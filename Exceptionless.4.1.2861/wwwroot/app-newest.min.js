/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2015 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/master/LICENSE
 */
var exports,require;!function(root,factory){"use strict";"function"==typeof define&&define.amd?define(factory):"object"==typeof exports?module.exports=factory():root.returnExports=factory()}(this,(function(){var $Array=Array,ArrayPrototype=$Array.prototype,$Object=Object,ObjectPrototype=$Object.prototype,$Function=Function,FunctionPrototype=$Function.prototype,$String=String,StringPrototype=$String.prototype,$Number=Number,NumberPrototype=$Number.prototype,array_slice=ArrayPrototype.slice,array_splice=ArrayPrototype.splice,array_push=ArrayPrototype.push,array_unshift=ArrayPrototype.unshift,array_concat=ArrayPrototype.concat,array_join=ArrayPrototype.join,call=FunctionPrototype.call,apply=FunctionPrototype.apply,max=Math.max,min=Math.min,to_string=ObjectPrototype.toString,hasToStringTag="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,isCallable,fnToStr=Function.prototype.toString,constructorRegex=/^\s*class /,isES6ClassFn=function isES6ClassFn(value){try{var fnStr,singleStripped,multiStripped,spaceStripped=fnToStr.call(value).replace(/\/\/.*\n/g,"").replace(/\/\*[.\s\S]*\*\//g,"").replace(/\n/gm," ").replace(/ {2}/g," ");return constructorRegex.test(spaceStripped)}catch(e){return!1}},tryFunctionObject=function tryFunctionObject(value){try{return!isES6ClassFn(value)&&(fnToStr.call(value),!0)}catch(e){return!1}},fnClass="[object Function]",genClass="[object GeneratorFunction]",isCallable=function isCallable(value){if(!value)return!1;if("function"!=typeof value&&"object"!=typeof value)return!1;if(hasToStringTag)return tryFunctionObject(value);if(isES6ClassFn(value))return!1;var strClass=to_string.call(value);return strClass===fnClass||strClass===genClass},isRegex,regexExec=RegExp.prototype.exec,tryRegexExec=function tryRegexExec(value){try{return regexExec.call(value),!0}catch(e){return!1}},regexClass="[object RegExp]",isString;isRegex=function isRegex(value){return"object"==typeof value&&(hasToStringTag?tryRegexExec(value):to_string.call(value)===regexClass)};var strValue=String.prototype.valueOf,tryStringObject=function tryStringObject(value){try{return strValue.call(value),!0}catch(e){return!1}},stringClass="[object String]";isString=function isString(value){return"string"==typeof value||"object"==typeof value&&(hasToStringTag?tryStringObject(value):to_string.call(value)===stringClass)};var supportsDescriptors=$Object.defineProperty&&function(){try{var obj={};for(var _ in $Object.defineProperty(obj,"x",{enumerable:!1,value:obj}),obj)return!1;return obj.x===obj}catch(e){return!1}}(),defineProperties=(has=ObjectPrototype.hasOwnProperty,defineProperty=supportsDescriptors?function(object,name,method,forceAssign){!forceAssign&&name in object||$Object.defineProperty(object,name,{configurable:!0,enumerable:!1,writable:!0,value:method})}:function(object,name,method,forceAssign){!forceAssign&&name in object||(object[name]=method)},function defineProperties(object,map,forceAssign){for(var name in map)has.call(map,name)&&defineProperty(object,name,map[name],forceAssign)}),has,defineProperty,isPrimitive=function isPrimitive(input){var type=typeof input;return null===input||"object"!==type&&"function"!==type},isActualNaN=$Number.isNaN||function isActualNaN(x){return x!=x},ES={ToInteger:function ToInteger(num){var n=+num;return isActualNaN(n)?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n))),n},ToPrimitive:function ToPrimitive(input){var val,valueOf,toStr;if(isPrimitive(input))return input;if(valueOf=input.valueOf,isCallable(valueOf)&&(val=valueOf.call(input),isPrimitive(val)))return val;if(toStr=input.toString,isCallable(toStr)&&(val=toStr.call(input),isPrimitive(val)))return val;throw new TypeError},ToObject:function(o){if(null==o)throw new TypeError("can't convert "+o+" to object");return $Object(o)},ToUint32:function ToUint32(x){return x>>>0}},Empty=function Empty(){};defineProperties(FunctionPrototype,{bind:function bind(that){var target=this;if(!isCallable(target))throw new TypeError("Function.prototype.bind called on incompatible "+target);for(var args=array_slice.call(arguments,1),bound,binder=function(){if(this instanceof bound){var result=apply.call(target,this,array_concat.call(args,array_slice.call(arguments)));return $Object(result)===result?result:this}return apply.call(target,that,array_concat.call(args,array_slice.call(arguments)))},boundLength=max(0,target.length-args.length),boundArgs=[],i=0;i<boundLength;i++)array_push.call(boundArgs,"$"+i);return bound=$Function("binder","return function ("+array_join.call(boundArgs,",")+"){ return binder.apply(this, arguments); }")(binder),target.prototype&&(Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null),bound}});var owns=call.bind(ObjectPrototype.hasOwnProperty),toStr=call.bind(ObjectPrototype.toString),arraySlice=call.bind(array_slice),arraySliceApply=apply.bind(array_slice),strSlice=call.bind(StringPrototype.slice),strSplit=call.bind(StringPrototype.split),strIndexOf=call.bind(StringPrototype.indexOf),pushCall=call.bind(array_push),isEnum=call.bind(ObjectPrototype.propertyIsEnumerable),arraySort=call.bind(ArrayPrototype.sort),isArray=$Array.isArray||function isArray(obj){return"[object Array]"===toStr(obj)},hasUnshiftReturnValueBug=1!==[].unshift(0);defineProperties(ArrayPrototype,{unshift:function(){return array_unshift.apply(this,arguments),this.length}},hasUnshiftReturnValueBug),defineProperties($Array,{isArray:isArray});var boxedString=$Object("a"),splitString="a"!==boxedString[0]||!(0 in boxedString),properlyBoxesContext=function properlyBoxed(method){var properlyBoxesNonStrict=!0,properlyBoxesStrict=!0,threwException=!1;if(method)try{method.call("foo",(function(_,__,context){"object"!=typeof context&&(properlyBoxesNonStrict=!1)})),method.call([1],(function(){"use strict";properlyBoxesStrict="string"==typeof this}),"x")}catch(e){threwException=!0}return!!method&&!threwException&&properlyBoxesNonStrict&&properlyBoxesStrict};defineProperties(ArrayPrototype,{forEach:function forEach(callbackfn){var object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,i=-1,length=ES.ToUint32(self.length),T;if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.forEach callback must be a function");for(;++i<length;)i in self&&(void 0===T?callbackfn(self[i],i,object):callbackfn.call(T,self[i],i,object))}},!properlyBoxesContext(ArrayPrototype.forEach)),defineProperties(ArrayPrototype,{map:function map(callbackfn){var object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length),result=$Array(length),T;if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.map callback must be a function");for(var i=0;i<length;i++)i in self&&(result[i]=void 0===T?callbackfn(self[i],i,object):callbackfn.call(T,self[i],i,object));return result}},!properlyBoxesContext(ArrayPrototype.map)),defineProperties(ArrayPrototype,{filter:function filter(callbackfn){var object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length),result=[],value,T;if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.filter callback must be a function");for(var i=0;i<length;i++)i in self&&(value=self[i],(void 0===T?callbackfn(value,i,object):callbackfn.call(T,value,i,object))&&pushCall(result,value));return result}},!properlyBoxesContext(ArrayPrototype.filter)),defineProperties(ArrayPrototype,{every:function every(callbackfn){var object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length),T;if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.every callback must be a function");for(var i=0;i<length;i++)if(i in self&&!(void 0===T?callbackfn(self[i],i,object):callbackfn.call(T,self[i],i,object)))return!1;return!0}},!properlyBoxesContext(ArrayPrototype.every)),defineProperties(ArrayPrototype,{some:function some(callbackfn){var object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length),T;if(arguments.length>1&&(T=arguments[1]),!isCallable(callbackfn))throw new TypeError("Array.prototype.some callback must be a function");for(var i=0;i<length;i++)if(i in self&&(void 0===T?callbackfn(self[i],i,object):callbackfn.call(T,self[i],i,object)))return!0;return!1}},!properlyBoxesContext(ArrayPrototype.some));var reduceCoercesToObject=!1;ArrayPrototype.reduce&&(reduceCoercesToObject="object"==typeof ArrayPrototype.reduce.call("es5",(function(_,__,___,list){return list}))),defineProperties(ArrayPrototype,{reduce:function reduce(callbackfn){var object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length);if(!isCallable(callbackfn))throw new TypeError("Array.prototype.reduce callback must be a function");if(0===length&&1===arguments.length)throw new TypeError("reduce of empty array with no initial value");var i=0,result;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i++];break}if(++i>=length)throw new TypeError("reduce of empty array with no initial value")}for(;i<length;i++)i in self&&(result=callbackfn(result,self[i],i,object));return result}},!reduceCoercesToObject);var reduceRightCoercesToObject=!1;ArrayPrototype.reduceRight&&(reduceRightCoercesToObject="object"==typeof ArrayPrototype.reduceRight.call("es5",(function(_,__,___,list){return list}))),defineProperties(ArrayPrototype,{reduceRight:function reduceRight(callbackfn){var object=ES.ToObject(this),self=splitString&&isString(this)?strSplit(this,""):object,length=ES.ToUint32(self.length),result;if(!isCallable(callbackfn))throw new TypeError("Array.prototype.reduceRight callback must be a function");if(0===length&&1===arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var i=length-1;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i--];break}if(--i<0)throw new TypeError("reduceRight of empty array with no initial value")}if(i<0)return result;do{i in self&&(result=callbackfn(result,self[i],i,object))}while(i--);return result}},!reduceRightCoercesToObject);var hasFirefox2IndexOfBug=ArrayPrototype.indexOf&&-1!==[0,1].indexOf(1,2);defineProperties(ArrayPrototype,{indexOf:function indexOf(searchElement){var self=splitString&&isString(this)?strSplit(this,""):ES.ToObject(this),length=ES.ToUint32(self.length);if(0===length)return-1;var i=0;for(arguments.length>1&&(i=ES.ToInteger(arguments[1])),i=i>=0?i:max(0,length+i);i<length;i++)if(i in self&&self[i]===searchElement)return i;return-1}},hasFirefox2IndexOfBug);var hasFirefox2LastIndexOfBug=ArrayPrototype.lastIndexOf&&-1!==[0,1].lastIndexOf(0,-3);defineProperties(ArrayPrototype,{lastIndexOf:function lastIndexOf(searchElement){var self=splitString&&isString(this)?strSplit(this,""):ES.ToObject(this),length=ES.ToUint32(self.length);if(0===length)return-1;var i=length-1;for(arguments.length>1&&(i=min(i,ES.ToInteger(arguments[1]))),i=i>=0?i:length-Math.abs(i);i>=0;i--)if(i in self&&searchElement===self[i])return i;return-1}},hasFirefox2LastIndexOfBug);var spliceNoopReturnsEmptyArray=(result=(a=[1,2]).splice(),2===a.length&&isArray(result)&&0===result.length),a,result;defineProperties(ArrayPrototype,{splice:function splice(start,deleteCount){return 0===arguments.length?[]:array_splice.apply(this,arguments)}},!spliceNoopReturnsEmptyArray);var spliceWorksWithEmptyObject=function(){var obj={};return ArrayPrototype.splice.call(obj,0,0,1),1===obj.length}();defineProperties(ArrayPrototype,{splice:function splice(start,deleteCount){if(0===arguments.length)return[];var args=arguments;return this.length=max(ES.ToInteger(this.length),0),arguments.length>0&&"number"!=typeof deleteCount&&((args=arraySlice(arguments)).length<2?pushCall(args,this.length-start):args[1]=ES.ToInteger(deleteCount)),array_splice.apply(this,args)}},!spliceWorksWithEmptyObject);var spliceWorksWithLargeSparseArrays=((arr=new $Array(1e5))[8]="x",arr.splice(1,1),7===arr.indexOf("x")),arr,spliceWorksWithSmallSparseArrays=function(){var n=256,arr=[];return arr[n]="a",arr.splice(257,0,"b"),"a"===arr[n]}();defineProperties(ArrayPrototype,{splice:function splice(start,deleteCount){for(var O=ES.ToObject(this),A=[],len=ES.ToUint32(O.length),relativeStart=ES.ToInteger(start),actualStart=relativeStart<0?max(len+relativeStart,0):min(relativeStart,len),actualDeleteCount=min(max(ES.ToInteger(deleteCount),0),len-actualStart),k=0,from;k<actualDeleteCount;)from=$String(actualStart+k),owns(O,from)&&(A[k]=O[from]),k+=1;var items=arraySlice(arguments,2),itemCount=items.length,to;if(itemCount<actualDeleteCount){k=actualStart;for(var maxK=len-actualDeleteCount;k<maxK;)from=$String(k+actualDeleteCount),to=$String(k+itemCount),owns(O,from)?O[to]=O[from]:delete O[to],k+=1;k=len;for(var minK=len-actualDeleteCount+itemCount;k>minK;)delete O[k-1],k-=1}else if(itemCount>actualDeleteCount)for(k=len-actualDeleteCount;k>actualStart;)from=$String(k+actualDeleteCount-1),to=$String(k+itemCount-1),owns(O,from)?O[to]=O[from]:delete O[to],k-=1;k=actualStart;for(var i=0;i<items.length;++i)O[k]=items[i],k+=1;return O.length=len-actualDeleteCount+itemCount,A}},!spliceWorksWithLargeSparseArrays||!spliceWorksWithSmallSparseArrays);var originalJoin=ArrayPrototype.join,hasStringJoinBug;try{hasStringJoinBug="1,2,3"!==Array.prototype.join.call("123",",")}catch(e){hasStringJoinBug=!0}hasStringJoinBug&&defineProperties(ArrayPrototype,{join:function join(separator){var sep=void 0===separator?",":separator;return originalJoin.call(isString(this)?strSplit(this,""):this,sep)}},hasStringJoinBug);var hasJoinUndefinedBug="1,2"!==[1,2].join(void 0);hasJoinUndefinedBug&&defineProperties(ArrayPrototype,{join:function join(separator){var sep=void 0===separator?",":separator;return originalJoin.call(this,sep)}},hasJoinUndefinedBug);var pushShim=function push(item){for(var O=ES.ToObject(this),n=ES.ToUint32(O.length),i=0;i<arguments.length;)O[n+i]=arguments[i],i+=1;return O.length=n+i,n+i},pushIsNotGeneric=function(){var obj={},result;return 1!==Array.prototype.push.call(obj,void 0)||1!==obj.length||void 0!==obj[0]||!owns(obj,0)}();defineProperties(ArrayPrototype,{push:function push(item){return isArray(this)?array_push.apply(this,arguments):pushShim.apply(this,arguments)}},pushIsNotGeneric);var pushUndefinedIsWeird=function(){var arr=[],result;return 1!==arr.push(void 0)||1!==arr.length||void 0!==arr[0]||!owns(arr,0)}();defineProperties(ArrayPrototype,{push:pushShim},pushUndefinedIsWeird),defineProperties(ArrayPrototype,{slice:function(start,end){var arr=isString(this)?strSplit(this,""):this;return arraySliceApply(arr,arguments)}},splitString);var sortIgnoresNonFunctions=function(){try{return[1,2].sort(null),[1,2].sort({}),!0}catch(e){}return!1}(),sortThrowsOnRegex=function(){try{return[1,2].sort(/a/),!1}catch(e){}return!0}(),sortIgnoresUndefined=function(){try{return[1,2].sort(void 0),!0}catch(e){}return!1}();defineProperties(ArrayPrototype,{sort:function sort(compareFn){if(void 0===compareFn)return arraySort(this);if(!isCallable(compareFn))throw new TypeError("Array.prototype.sort callback must be a function");return arraySort(this,compareFn)}},sortIgnoresNonFunctions||!sortIgnoresUndefined||!sortThrowsOnRegex);var hasDontEnumBug=!isEnum({toString:null},"toString"),hasProtoEnumBug=isEnum((function(){}),"prototype"),hasStringEnumBug=!owns("x","0"),equalsConstructorPrototype=function(o){var ctor=o.constructor;return ctor&&ctor.prototype===o},blacklistedKeys={$window:!0,$console:!0,$parent:!0,$self:!0,$frame:!0,$frames:!0,$frameElement:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$external:!0},hasAutomationEqualityBug=function(){if("undefined"==typeof window)return!1;for(var k in window)try{!blacklistedKeys["$"+k]&&owns(window,k)&&null!==window[k]&&"object"==typeof window[k]&&equalsConstructorPrototype(window[k])}catch(e){return!0}return!1}(),equalsConstructorPrototypeIfNotBuggy=function(object){if("undefined"==typeof window||!hasAutomationEqualityBug)return equalsConstructorPrototype(object);try{return equalsConstructorPrototype(object)}catch(e){return!1}},dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length,isStandardArguments=function isArguments(value){return"[object Arguments]"===toStr(value)},isLegacyArguments=function isArguments(value){return null!==value&&"object"==typeof value&&"number"==typeof value.length&&value.length>=0&&!isArray(value)&&isCallable(value.callee)},isArguments=isStandardArguments(arguments)?isStandardArguments:isLegacyArguments;defineProperties($Object,{keys:function keys(object){var isFn=isCallable(object),isArgs=isArguments(object),isObject=null!==object&&"object"==typeof object,isStr=isObject&&isString(object);if(!isObject&&!isFn&&!isArgs)throw new TypeError("Object.keys called on a non-object");var theKeys=[],skipProto=hasProtoEnumBug&&isFn;if(isStr&&hasStringEnumBug||isArgs)for(var i=0;i<object.length;++i)pushCall(theKeys,$String(i));if(!isArgs)for(var name in object)skipProto&&"prototype"===name||!owns(object,name)||pushCall(theKeys,$String(name));if(hasDontEnumBug)for(var skipConstructor=equalsConstructorPrototypeIfNotBuggy(object),j=0;j<dontEnumsLength;j++){var dontEnum=dontEnums[j];skipConstructor&&"constructor"===dontEnum||!owns(object,dontEnum)||pushCall(theKeys,dontEnum)}return theKeys}});var keysWorksWithArguments=$Object.keys&&function(){return 2===$Object.keys(arguments).length}(1,2),keysHasArgumentsLengthBug=$Object.keys&&function(){var argKeys=$Object.keys(arguments);return 1!==arguments.length||1!==argKeys.length||1!==argKeys[0]}(1),originalKeys=$Object.keys;defineProperties($Object,{keys:function keys(object){return isArguments(object)?originalKeys(arraySlice(object)):originalKeys(object)}},!keysWorksWithArguments||keysHasArgumentsLengthBug);var hasNegativeMonthYearBug=0!==new Date(-0xc782b5b342b24).getUTCMonth(),aNegativeTestDate=new Date(-0x55d318d56a724),aPositiveTestDate=new Date(14496624e5),hasToUTCStringFormatBug="Mon, 01 Jan -45875 11:59:59 GMT"!==aNegativeTestDate.toUTCString(),hasToDateStringFormatBug,hasToStringFormatBug,timeZoneOffset=aNegativeTestDate.getTimezoneOffset();timeZoneOffset<-720?(hasToDateStringFormatBug="Tue Jan 02 -45875"!==aNegativeTestDate.toDateString(),hasToStringFormatBug=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-\+]\d\d\d\d(?: |$)/.test(aPositiveTestDate.toString())):(hasToDateStringFormatBug="Mon Jan 01 -45875"!==aNegativeTestDate.toDateString(),hasToStringFormatBug=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-\+]\d\d\d\d(?: |$)/.test(aPositiveTestDate.toString()));var originalGetFullYear=call.bind(Date.prototype.getFullYear),originalGetMonth=call.bind(Date.prototype.getMonth),originalGetDate=call.bind(Date.prototype.getDate),originalGetUTCFullYear=call.bind(Date.prototype.getUTCFullYear),originalGetUTCMonth=call.bind(Date.prototype.getUTCMonth),originalGetUTCDate=call.bind(Date.prototype.getUTCDate),originalGetUTCDay=call.bind(Date.prototype.getUTCDay),originalGetUTCHours=call.bind(Date.prototype.getUTCHours),originalGetUTCMinutes=call.bind(Date.prototype.getUTCMinutes),originalGetUTCSeconds=call.bind(Date.prototype.getUTCSeconds),originalGetUTCMilliseconds=call.bind(Date.prototype.getUTCMilliseconds),dayName=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthName=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],daysInMonth=function daysInMonth(month,year){return originalGetDate(new Date(year,month,0))};defineProperties(Date.prototype,{getFullYear:function getFullYear(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetFullYear(this);return year<0&&originalGetMonth(this)>11?year+1:year},getMonth:function getMonth(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetFullYear(this),month=originalGetMonth(this);return year<0&&month>11?0:month},getDate:function getDate(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetFullYear(this),month=originalGetMonth(this),date=originalGetDate(this),days;return year<0&&month>11?12===month?date:daysInMonth(0,year+1)-date+1:date},getUTCFullYear:function getUTCFullYear(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetUTCFullYear(this);return year<0&&originalGetUTCMonth(this)>11?year+1:year},getUTCMonth:function getUTCMonth(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetUTCFullYear(this),month=originalGetUTCMonth(this);return year<0&&month>11?0:month},getUTCDate:function getUTCDate(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var year=originalGetUTCFullYear(this),month=originalGetUTCMonth(this),date=originalGetUTCDate(this),days;return year<0&&month>11?12===month?date:daysInMonth(0,year+1)-date+1:date}},hasNegativeMonthYearBug),defineProperties(Date.prototype,{toUTCString:function toUTCString(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var day=originalGetUTCDay(this),date=originalGetUTCDate(this),month=originalGetUTCMonth(this),year=originalGetUTCFullYear(this),hour=originalGetUTCHours(this),minute=originalGetUTCMinutes(this),second=originalGetUTCSeconds(this);return dayName[day]+", "+(date<10?"0"+date:date)+" "+monthName[month]+" "+year+" "+(hour<10?"0"+hour:hour)+":"+(minute<10?"0"+minute:minute)+":"+(second<10?"0"+second:second)+" GMT"}},hasNegativeMonthYearBug||hasToUTCStringFormatBug),defineProperties(Date.prototype,{toDateString:function toDateString(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var day=this.getDay(),date=this.getDate(),month=this.getMonth(),year=this.getFullYear();return dayName[day]+" "+monthName[month]+" "+(date<10?"0"+date:date)+" "+year}},hasNegativeMonthYearBug||hasToDateStringFormatBug),(hasNegativeMonthYearBug||hasToStringFormatBug)&&(Date.prototype.toString=function toString(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var day=this.getDay(),date=this.getDate(),month=this.getMonth(),year=this.getFullYear(),hour=this.getHours(),minute=this.getMinutes(),second=this.getSeconds(),timezoneOffset=this.getTimezoneOffset(),hoursOffset=Math.floor(Math.abs(timezoneOffset)/60),minutesOffset=Math.floor(Math.abs(timezoneOffset)%60);return dayName[day]+" "+monthName[month]+" "+(date<10?"0"+date:date)+" "+year+" "+(hour<10?"0"+hour:hour)+":"+(minute<10?"0"+minute:minute)+":"+(second<10?"0"+second:second)+" GMT"+(timezoneOffset>0?"-":"+")+(hoursOffset<10?"0"+hoursOffset:hoursOffset)+(minutesOffset<10?"0"+minutesOffset:minutesOffset)},supportsDescriptors&&$Object.defineProperty(Date.prototype,"toString",{configurable:!0,enumerable:!1,writable:!0}));var negativeDate=-621987552e5,negativeYearString="-000001",hasNegativeDateBug=Date.prototype.toISOString&&-1===new Date(negativeDate).toISOString().indexOf(negativeYearString),hasSafari51DateBug=Date.prototype.toISOString&&"1969-12-31T23:59:59.999Z"!==new Date(-1).toISOString(),getTime=call.bind(Date.prototype.getTime);defineProperties(Date.prototype,{toISOString:function toISOString(){if(!isFinite(this)||!isFinite(getTime(this)))throw new RangeError("Date.prototype.toISOString called on non-finite value.");var year=originalGetUTCFullYear(this),month=originalGetUTCMonth(this);year+=Math.floor(month/12);var result=[(month=(month%12+12)%12)+1,originalGetUTCDate(this),originalGetUTCHours(this),originalGetUTCMinutes(this),originalGetUTCSeconds(this)];year=(year<0?"-":year>9999?"+":"")+strSlice("00000"+Math.abs(year),0<=year&&year<=9999?-4:-6);for(var i=0;i<result.length;++i)result[i]=strSlice("00"+result[i],-2);return year+"-"+arraySlice(result,0,2).join("-")+"T"+arraySlice(result,2).join(":")+"."+strSlice("000"+originalGetUTCMilliseconds(this),-3)+"Z"}},hasNegativeDateBug||hasSafari51DateBug);var dateToJSONIsSupported=function(){try{return Date.prototype.toJSON&&null===new Date(NaN).toJSON()&&-1!==new Date(negativeDate).toJSON().indexOf(negativeYearString)&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(e){return!1}}();dateToJSONIsSupported||(Date.prototype.toJSON=function toJSON(key){var O=$Object(this),tv=ES.ToPrimitive(O);if("number"==typeof tv&&!isFinite(tv))return null;var toISO=O.toISOString;if(!isCallable(toISO))throw new TypeError("toISOString property is not callable");return toISO.call(O)});var supportsExtendedYears=1e15===Date.parse("+033658-09-27T01:46:40.000Z"),acceptsInvalidDates=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z")),doesNotParseY2KNewYear=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(doesNotParseY2KNewYear||acceptsInvalidDates||!supportsExtendedYears){var maxSafeUnsigned32Bit=Math.pow(2,31)-1,hasSafariSignedIntBug=isActualNaN(new Date(1970,0,1,0,0,0,maxSafeUnsigned32Bit+1).getTime());Date=function(NativeDate){var DateShim=function Date(Y,M,D,h,m,s,ms){var length=arguments.length,date;if(this instanceof NativeDate){var seconds=s,millis=ms;if(hasSafariSignedIntBug&&length>=7&&ms>maxSafeUnsigned32Bit){var msToShift=Math.floor(ms/maxSafeUnsigned32Bit)*maxSafeUnsigned32Bit,sToShift=Math.floor(msToShift/1e3);seconds+=sToShift,millis-=1e3*sToShift}date=1===length&&$String(Y)===Y?new NativeDate(DateShim.parse(Y)):length>=7?new NativeDate(Y,M,D,h,m,seconds,millis):length>=6?new NativeDate(Y,M,D,h,m,seconds):length>=5?new NativeDate(Y,M,D,h,m):length>=4?new NativeDate(Y,M,D,h):length>=3?new NativeDate(Y,M,D):length>=2?new NativeDate(Y,M):length>=1?new NativeDate(Y instanceof NativeDate?+Y:Y):new NativeDate}else date=NativeDate.apply(this,arguments);return isPrimitive(date)||defineProperties(date,{constructor:DateShim},!0),date},isoDateExpression=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),months=[0,31,59,90,120,151,181,212,243,273,304,334,365],dayFromMonth=function dayFromMonth(year,month){var t=month>1?1:0;return months[month]+Math.floor((year-1969+t)/4)-Math.floor((year-1901+t)/100)+Math.floor((year-1601+t)/400)+365*(year-1970)},toUTC=function toUTC(t){var s=0,ms=t;if(hasSafariSignedIntBug&&ms>maxSafeUnsigned32Bit){var msToShift=Math.floor(ms/maxSafeUnsigned32Bit)*maxSafeUnsigned32Bit,sToShift=Math.floor(msToShift/1e3);s+=sToShift,ms-=1e3*sToShift}return $Number(new NativeDate(1970,0,1,0,0,s,ms))},parseShim;for(var key in NativeDate)owns(NativeDate,key)&&(DateShim[key]=NativeDate[key]);return defineProperties(DateShim,{now:NativeDate.now,UTC:NativeDate.UTC},!0),DateShim.prototype=NativeDate.prototype,defineProperties(DateShim.prototype,{constructor:DateShim},!0),defineProperties(DateShim,{parse:function parse(string){var match=isoDateExpression.exec(string);if(match){var year=$Number(match[1]),month=$Number(match[2]||1)-1,day=$Number(match[3]||1)-1,hour=$Number(match[4]||0),minute=$Number(match[5]||0),second=$Number(match[6]||0),millisecond=Math.floor(1e3*$Number(match[7]||0)),isLocalTime=Boolean(match[4]&&!match[8]),signOffset="-"===match[9]?1:-1,hourOffset=$Number(match[10]||0),minuteOffset=$Number(match[11]||0),result,hasMinutesOrSecondsOrMilliseconds=minute>0||second>0||millisecond>0;return hour<(hasMinutesOrSecondsOrMilliseconds?24:25)&&minute<60&&second<60&&millisecond<1e3&&month>-1&&month<12&&hourOffset<24&&minuteOffset<60&&day>-1&&day<dayFromMonth(year,month+1)-dayFromMonth(year,month)&&(result=1e3*(60*((result=60*(24*(dayFromMonth(year,month)+day)+hour+hourOffset*signOffset))+minute+minuteOffset*signOffset)+second)+millisecond,isLocalTime&&(result=toUTC(result)),-864e13<=result&&result<=864e13)?result:NaN}return NativeDate.parse.apply(this,arguments)}}),DateShim}(Date)}Date.now||(Date.now=function now(){return(new Date).getTime()});var hasToFixedBugs=NumberPrototype.toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0)),toFixedHelpers={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function multiply(n,c){for(var i=-1,c2=c;++i<toFixedHelpers.size;)c2+=n*toFixedHelpers.data[i],toFixedHelpers.data[i]=c2%toFixedHelpers.base,c2=Math.floor(c2/toFixedHelpers.base)},divide:function divide(n){for(var i=toFixedHelpers.size,c=0;--i>=0;)c+=toFixedHelpers.data[i],toFixedHelpers.data[i]=Math.floor(c/n),c=c%n*toFixedHelpers.base},numToString:function numToString(){for(var i=toFixedHelpers.size,s="";--i>=0;)if(""!==s||0===i||0!==toFixedHelpers.data[i]){var t=$String(toFixedHelpers.data[i]);""===s?s=t:s+=strSlice("0000000",0,7-t.length)+t}return s},pow:function pow(x,n,acc){return 0===n?acc:n%2==1?pow(x,n-1,acc*x):pow(x*x,n/2,acc)},log:function log(x){for(var n=0,x2=x;x2>=4096;)n+=12,x2/=4096;for(;x2>=2;)n+=1,x2/=2;return n}},toFixedShim=function toFixed(fractionDigits){var f,x,s,m,e,z,j,k;if(f=$Number(fractionDigits),(f=isActualNaN(f)?0:Math.floor(f))<0||f>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(x=$Number(this),isActualNaN(x))return"NaN";if(x<=-1e21||x>=1e21)return $String(x);if(s="",x<0&&(s="-",x=-x),m="0",x>1e-21)if(z=(e=toFixedHelpers.log(x*toFixedHelpers.pow(2,69,1))-69)<0?x*toFixedHelpers.pow(2,-e,1):x/toFixedHelpers.pow(2,e,1),z*=4503599627370496,(e=52-e)>0){for(toFixedHelpers.multiply(0,z),j=f;j>=7;)toFixedHelpers.multiply(1e7,0),j-=7;for(toFixedHelpers.multiply(toFixedHelpers.pow(10,j,1),0),j=e-1;j>=23;)toFixedHelpers.divide(1<<23),j-=23;toFixedHelpers.divide(1<<j),toFixedHelpers.multiply(1,1),toFixedHelpers.divide(2),m=toFixedHelpers.numToString()}else toFixedHelpers.multiply(0,z),toFixedHelpers.multiply(1<<-e,0),m=toFixedHelpers.numToString()+strSlice("0.00000000000000000000",2,2+f);return m=f>0?(k=m.length)<=f?s+strSlice("0.0000000000000000000",0,f-k+2)+m:s+strSlice(m,0,k-f)+"."+strSlice(m,k-f):s+m};defineProperties(NumberPrototype,{toFixed:toFixedShim},hasToFixedBugs);var hasToPrecisionUndefinedBug=function(){try{return"1"===1..toPrecision(void 0)}catch(e){return!0}}(),originalToPrecision=NumberPrototype.toPrecision,compliantExecNpcg,maxSafe32BitInt;defineProperties(NumberPrototype,{toPrecision:function toPrecision(precision){return void 0===precision?originalToPrecision.call(this):originalToPrecision.call(this,precision)}},hasToPrecisionUndefinedBug),2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?(compliantExecNpcg=void 0===/()??/.exec("")[1],maxSafe32BitInt=Math.pow(2,32)-1,StringPrototype.split=function(separator,limit){var string=String(this);if(void 0===separator&&0===limit)return[];if(!isRegex(separator))return strSplit(this,separator,limit);var output=[],flags=(separator.ignoreCase?"i":"")+(separator.multiline?"m":"")+(separator.unicode?"u":"")+(separator.sticky?"y":""),lastLastIndex=0,separator2,match,lastIndex,lastLength,separatorCopy=new RegExp(separator.source,flags+"g");compliantExecNpcg||(separator2=new RegExp("^"+separatorCopy.source+"$(?!\\s)",flags));var splitLimit=void 0===limit?maxSafe32BitInt:ES.ToUint32(limit);for(match=separatorCopy.exec(string);match&&!((lastIndex=match.index+match[0].length)>lastLastIndex&&(pushCall(output,strSlice(string,lastLastIndex,match.index)),!compliantExecNpcg&&match.length>1&&match[0].replace(separator2,(function(){for(var i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(match[i]=void 0)})),match.length>1&&match.index<string.length&&array_push.apply(output,arraySlice(match,1)),lastLength=match[0].length,lastLastIndex=lastIndex,output.length>=splitLimit));)separatorCopy.lastIndex===match.index&&separatorCopy.lastIndex++,match=separatorCopy.exec(string);return lastLastIndex===string.length?!lastLength&&separatorCopy.test("")||pushCall(output,""):pushCall(output,strSlice(string,lastLastIndex)),output.length>splitLimit?arraySlice(output,0,splitLimit):output}):"0".split(void 0,0).length&&(StringPrototype.split=function split(separator,limit){return void 0===separator&&0===limit?[]:strSplit(this,separator,limit)});var str_replace=StringPrototype.replace,replaceReportsGroupsCorrectly=(groups=[],"x".replace(/x(.)?/g,(function(match,group){pushCall(groups,group)})),1===groups.length&&void 0===groups[0]),groups;replaceReportsGroupsCorrectly||(StringPrototype.replace=function replace(searchValue,replaceValue){var isFn=isCallable(replaceValue),hasCapturingGroups=isRegex(searchValue)&&/\)[*?]/.test(searchValue.source);if(isFn&&hasCapturingGroups){var wrappedReplaceValue=function(match){var length=arguments.length,originalLastIndex=searchValue.lastIndex;searchValue.lastIndex=0;var args=searchValue.exec(match)||[];return searchValue.lastIndex=originalLastIndex,pushCall(args,arguments[length-2],arguments[length-1]),replaceValue.apply(this,args)};return str_replace.call(this,searchValue,wrappedReplaceValue)}return str_replace.call(this,searchValue,replaceValue)});var string_substr=StringPrototype.substr,hasNegativeSubstrBug="".substr&&"b"!=="0b".substr(-1);defineProperties(StringPrototype,{substr:function substr(start,length){var normalizedStart=start;return start<0&&(normalizedStart=max(this.length+start,0)),string_substr.call(this,normalizedStart,length)}},hasNegativeSubstrBug);var ws="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",zeroWidth="​",wsRegexChars="["+ws+"]",trimBeginRegexp=new RegExp("^"+wsRegexChars+wsRegexChars+"*"),trimEndRegexp=new RegExp(wsRegexChars+wsRegexChars+"*$"),hasTrimWhitespaceBug=StringPrototype.trim&&(ws.trim()||!zeroWidth.trim());defineProperties(StringPrototype,{trim:function trim(){if(null==this)throw new TypeError("can't convert "+this+" to object");return $String(this).replace(trimBeginRegexp,"").replace(trimEndRegexp,"")}},hasTrimWhitespaceBug);var trim=call.bind(String.prototype.trim),hasLastIndexBug=StringPrototype.lastIndexOf&&-1!=="abcあい".lastIndexOf("あい",2);defineProperties(StringPrototype,{lastIndexOf:function lastIndexOf(searchString){if(null==this)throw new TypeError("can't convert "+this+" to object");for(var S=$String(this),searchStr=$String(searchString),numPos=arguments.length>1?$Number(arguments[1]):NaN,pos=isActualNaN(numPos)?1/0:ES.ToInteger(numPos),start=min(max(pos,0),S.length),searchLen=searchStr.length,k=start+searchLen;k>0;){k=max(0,k-searchLen);var index=strIndexOf(strSlice(S,k,start+searchLen),searchStr);if(-1!==index)return k+index}return-1}},hasLastIndexBug);var originalLastIndexOf=StringPrototype.lastIndexOf,origParseInt,hexRegex,origParseFloat;if(defineProperties(StringPrototype,{lastIndexOf:function lastIndexOf(searchString){return originalLastIndexOf.apply(this,arguments)}},1!==StringPrototype.lastIndexOf.length),8===parseInt(ws+"08")&&22===parseInt(ws+"0x16")||(parseInt=(origParseInt=parseInt,hexRegex=/^[\-+]?0[xX]/,function parseInt(str,radix){var string=trim(String(str)),defaultedRadix=$Number(radix)||(hexRegex.test(string)?16:10);return origParseInt(string,defaultedRadix)})),1/parseFloat("-0")!=-1/0&&(parseFloat=(origParseFloat=parseFloat,function parseFloat(string){var inputString=trim(String(string)),result=origParseFloat(inputString);return 0===result&&"-"===strSlice(inputString,0,1)?-0:result})),"RangeError: test"!==String(new RangeError("test"))){var errorToStringShim=function toString(){if(null==this)throw new TypeError("can't convert "+this+" to object");var name=this.name;void 0===name?name="Error":"string"!=typeof name&&(name=$String(name));var msg=this.message;return void 0===msg?msg="":"string"!=typeof msg&&(msg=$String(msg)),name?msg?name+": "+msg:name:msg};Error.prototype.toString=errorToStringShim}if(supportsDescriptors){var ensureNonEnumerable=function(obj,prop){if(isEnum(obj,prop)){var desc=Object.getOwnPropertyDescriptor(obj,prop);desc.configurable&&(desc.enumerable=!1,Object.defineProperty(obj,prop,desc))}};ensureNonEnumerable(Error.prototype,"message"),""!==Error.prototype.message&&(Error.prototype.message=""),ensureNonEnumerable(Error.prototype,"name")}if("/a/gim"!==String(/a/gim)){var regexToString=function toString(){var str="/"+this.source+"/";return this.global&&(str+="g"),this.ignoreCase&&(str+="i"),this.multiline&&(str+="m"),str};RegExp.prototype.toString=regexToString}})),
/*!
  * https://github.com/paulmillr/es6-shim
  * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
  *   and contributors,  MIT License
  * es6-shim: v0.35.1
  * see https://github.com/paulmillr/es6-shim/blob/0.35.1/LICENSE
  * Details and documentation:
  * https://github.com/paulmillr/es6-shim/
  */
function(root,factory){"function"==typeof define&&define.amd?define(factory):"object"==typeof exports?module.exports=factory():root.returnExports=factory()}(this,(function(){"use strict";var _apply=Function.call.bind(Function.apply),_call=Function.call.bind(Function.call),isArray=Array.isArray,keys=Object.keys,not=function notThunker(func){return function notThunk(){return!_apply(func,this,arguments)}},throwsError=function(func){try{return func(),!1}catch(e){return!0}},valueOrFalseIfThrows=function valueOrFalseIfThrows(func){try{return func()}catch(e){return!1}},isCallableWithoutNew=not(throwsError),arePropertyDescriptorsSupported=function(){return!throwsError((function(){Object.defineProperty({},"x",{get:function(){}})}))},supportsDescriptors=!!Object.defineProperty&&arePropertyDescriptorsSupported(),functionsHaveNames="foo"===function foo(){}.name,_forEach=Function.call.bind(Array.prototype.forEach),_reduce=Function.call.bind(Array.prototype.reduce),_filter=Function.call.bind(Array.prototype.filter),_some=Function.call.bind(Array.prototype.some),defineProperty=function(object,name,value,force){!force&&name in object||(supportsDescriptors?Object.defineProperty(object,name,{configurable:!0,enumerable:!1,writable:!0,value:value}):object[name]=value)},defineProperties=function(object,map,forceOverride){_forEach(keys(map),(function(name){var method=map[name];defineProperty(object,name,method,!!forceOverride)}))},_toString=Function.call.bind(Object.prototype.toString),isCallable="function"==typeof/abc/?function IsCallableSlow(x){return"function"==typeof x&&"[object Function]"===_toString(x)}:function IsCallableFast(x){return"function"==typeof x},Value={getter:function(object,name,getter){if(!supportsDescriptors)throw new TypeError("getters require true ES5 support");Object.defineProperty(object,name,{configurable:!0,enumerable:!1,get:getter})},proxy:function(originalObject,key,targetObject){if(!supportsDescriptors)throw new TypeError("getters require true ES5 support");var originalDescriptor=Object.getOwnPropertyDescriptor(originalObject,key);Object.defineProperty(targetObject,key,{configurable:originalDescriptor.configurable,enumerable:originalDescriptor.enumerable,get:function getKey(){return originalObject[key]},set:function setKey(value){originalObject[key]=value}})},redefine:function(object,property,newValue){if(supportsDescriptors){var descriptor=Object.getOwnPropertyDescriptor(object,property);descriptor.value=newValue,Object.defineProperty(object,property,descriptor)}else object[property]=newValue},defineByDescriptor:function(object,property,descriptor){supportsDescriptors?Object.defineProperty(object,property,descriptor):"value"in descriptor&&(object[property]=descriptor.value)},preserveToString:function(target,source){source&&isCallable(source.toString)&&defineProperty(target,"toString",source.toString.bind(source),!0)}},create=Object.create||function(prototype,properties){var Prototype=function Prototype(){};Prototype.prototype=prototype;var object=new Prototype;return void 0!==properties&&keys(properties).forEach((function(key){Value.defineByDescriptor(object,key,properties[key])})),object},supportsSubclassing=function(C,f){return!!Object.setPrototypeOf&&valueOrFalseIfThrows((function(){var Sub=function Subclass(arg){var o=new C(arg);return Object.setPrototypeOf(o,Subclass.prototype),o};return Object.setPrototypeOf(Sub,C),Sub.prototype=create(C.prototype,{constructor:{value:Sub}}),f(Sub)}))},getGlobal=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")},globals=getGlobal(),globalIsFinite=globals.isFinite,_indexOf=Function.call.bind(String.prototype.indexOf),_arrayIndexOfApply=Function.apply.bind(Array.prototype.indexOf),_concat=Function.call.bind(Array.prototype.concat),_strSlice=Function.call.bind(String.prototype.slice),_push=Function.call.bind(Array.prototype.push),_pushApply=Function.apply.bind(Array.prototype.push),_shift=Function.call.bind(Array.prototype.shift),_max=Math.max,_min=Math.min,_floor=Math.floor,_abs=Math.abs,_exp=Math.exp,_log=Math.log,_sqrt=Math.sqrt,_hasOwnProperty=Function.call.bind(Object.prototype.hasOwnProperty),ArrayIterator,noop=function(){},OrigMap=globals.Map,origMapDelete=OrigMap&&OrigMap.prototype.delete,origMapGet=OrigMap&&OrigMap.prototype.get,origMapHas=OrigMap&&OrigMap.prototype.has,origMapSet=OrigMap&&OrigMap.prototype.set,Symbol=globals.Symbol||{},symbolSpecies=Symbol.species||"@@species",numberIsNaN=Number.isNaN||function isNaN(value){return value!=value},numberIsFinite=Number.isFinite||function isFinite(value){return"number"==typeof value&&globalIsFinite(value)},_sign=isCallable(Math.sign)?Math.sign:function sign(value){var number=Number(value);return 0===number?number:numberIsNaN(number)?number:number<0?-1:1},isStandardArguments=function isArguments(value){return"[object Arguments]"===_toString(value)},isLegacyArguments=function isArguments(value){return null!==value&&"object"==typeof value&&"number"==typeof value.length&&value.length>=0&&"[object Array]"!==_toString(value)&&"[object Function]"===_toString(value.callee)},isArguments=isStandardArguments(arguments)?isStandardArguments:isLegacyArguments,Type={primitive:function(x){return null===x||"function"!=typeof x&&"object"!=typeof x},string:function(x){return"[object String]"===_toString(x)},regex:function(x){return"[object RegExp]"===_toString(x)},symbol:function(x){return"function"==typeof globals.Symbol&&"symbol"==typeof x}},overrideNative=function overrideNative(object,property,replacement){var original=object[property];defineProperty(object,property,replacement,!0),Value.preserveToString(object[property],original)},hasSymbols="function"==typeof Symbol&&"function"==typeof Symbol.for&&Type.symbol(Symbol()),$iterator$=Type.symbol(Symbol.iterator)?Symbol.iterator:"_es6-shim iterator_";globals.Set&&"function"==typeof(new globals.Set)["@@iterator"]&&($iterator$="@@iterator"),globals.Reflect||defineProperty(globals,"Reflect",{},!0);var Reflect=globals.Reflect,$String=String,domAll="undefined"!=typeof document&&document?document.all:null,isNullOrUndefined=null==domAll?function isNullOrUndefined(x){return null==x}:function isNullOrUndefinedAndNotDocumentAll(x){return null==x&&x!==domAll},ES={Call:function Call(F,V){var args=arguments.length>2?arguments[2]:[];if(!ES.IsCallable(F))throw new TypeError(F+" is not a function");return _apply(F,V,args)},RequireObjectCoercible:function(x,optMessage){if(isNullOrUndefined(x))throw new TypeError(optMessage||"Cannot call method on "+x);return x},TypeIsObject:function(x){return null!=x&&!0!==x&&!1!==x&&("function"==typeof x||"object"==typeof x||x===domAll)},ToObject:function(o,optMessage){return Object(ES.RequireObjectCoercible(o,optMessage))},IsCallable:isCallable,IsConstructor:function(x){return ES.IsCallable(x)},ToInt32:function(x){return ES.ToNumber(x)>>0},ToUint32:function(x){return ES.ToNumber(x)>>>0},ToNumber:function(value){if("[object Symbol]"===_toString(value))throw new TypeError("Cannot convert a Symbol value to a number");return+value},ToInteger:function(value){var number=ES.ToNumber(value);return numberIsNaN(number)?0:0!==number&&numberIsFinite(number)?(number>0?1:-1)*_floor(_abs(number)):number},ToLength:function(value){var len=ES.ToInteger(value);return len<=0?0:len>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:len},SameValue:function(a,b){return a===b?0!==a||1/a==1/b:numberIsNaN(a)&&numberIsNaN(b)},SameValueZero:function(a,b){return a===b||numberIsNaN(a)&&numberIsNaN(b)},IsIterable:function(o){return ES.TypeIsObject(o)&&(void 0!==o[$iterator$]||isArguments(o))},GetIterator:function(o){if(isArguments(o))return new ArrayIterator(o,"value");var itFn=ES.GetMethod(o,$iterator$);if(!ES.IsCallable(itFn))throw new TypeError("value is not an iterable");var it=ES.Call(itFn,o);if(!ES.TypeIsObject(it))throw new TypeError("bad iterator");return it},GetMethod:function(o,p){var func=ES.ToObject(o)[p];if(!isNullOrUndefined(func)){if(!ES.IsCallable(func))throw new TypeError("Method not callable: "+p);return func}},IteratorComplete:function(iterResult){return!!iterResult.done},IteratorClose:function(iterator,completionIsThrow){var returnMethod=ES.GetMethod(iterator,"return");if(void 0!==returnMethod){var innerResult,innerException;try{innerResult=ES.Call(returnMethod,iterator)}catch(e){innerException=e}if(!completionIsThrow){if(innerException)throw innerException;if(!ES.TypeIsObject(innerResult))throw new TypeError("Iterator's return method returned a non-object.")}}},IteratorNext:function(it){var result=arguments.length>1?it.next(arguments[1]):it.next();if(!ES.TypeIsObject(result))throw new TypeError("bad iterator");return result},IteratorStep:function(it){var result=ES.IteratorNext(it),done;return!ES.IteratorComplete(result)&&result},Construct:function(C,args,newTarget,isES6internal){var target=void 0===newTarget?C:newTarget;if(!isES6internal&&Reflect.construct)return Reflect.construct(C,args,target);var proto=target.prototype;ES.TypeIsObject(proto)||(proto=Object.prototype);var obj=create(proto),result=ES.Call(C,obj,args);return ES.TypeIsObject(result)?result:obj},SpeciesConstructor:function(O,defaultConstructor){var C=O.constructor;if(void 0===C)return defaultConstructor;if(!ES.TypeIsObject(C))throw new TypeError("Bad constructor");var S=C[symbolSpecies];if(isNullOrUndefined(S))return defaultConstructor;if(!ES.IsConstructor(S))throw new TypeError("Bad @@species");return S},CreateHTML:function(string,tag,attribute,value){var S=ES.ToString(string),p1="<"+tag,V,escapedV,p2,p3;""!==attribute&&(p1+=" "+attribute+'="'+ES.ToString(value).replace(/"/g,"&quot;")+'"');return p1+">"+S+"</"+tag+">"},IsRegExp:function IsRegExp(argument){if(!ES.TypeIsObject(argument))return!1;var isRegExp=argument[Symbol.match];return void 0!==isRegExp?!!isRegExp:Type.regex(argument)},ToString:function ToString(string){return $String(string)}},o;if(supportsDescriptors&&hasSymbols){var defineWellKnownSymbol=function defineWellKnownSymbol(name){if(Type.symbol(Symbol[name]))return Symbol[name];var sym=Symbol.for("Symbol."+name);return Object.defineProperty(Symbol,name,{configurable:!1,enumerable:!1,writable:!1,value:sym}),sym};if(!Type.symbol(Symbol.search)){var symbolSearch=defineWellKnownSymbol("search"),originalSearch=String.prototype.search;defineProperty(RegExp.prototype,symbolSearch,(function search(string){return ES.Call(originalSearch,string,[this])}));var searchShim=function search(regexp){var O=ES.RequireObjectCoercible(this);if(!isNullOrUndefined(regexp)){var searcher=ES.GetMethod(regexp,symbolSearch);if(void 0!==searcher)return ES.Call(searcher,regexp,[O])}return ES.Call(originalSearch,O,[ES.ToString(regexp)])};overrideNative(String.prototype,"search",searchShim)}if(!Type.symbol(Symbol.replace)){var symbolReplace=defineWellKnownSymbol("replace"),originalReplace=String.prototype.replace;defineProperty(RegExp.prototype,symbolReplace,(function replace(string,replaceValue){return ES.Call(originalReplace,string,[this,replaceValue])}));var replaceShim=function replace(searchValue,replaceValue){var O=ES.RequireObjectCoercible(this);if(!isNullOrUndefined(searchValue)){var replacer=ES.GetMethod(searchValue,symbolReplace);if(void 0!==replacer)return ES.Call(replacer,searchValue,[O,replaceValue])}return ES.Call(originalReplace,O,[ES.ToString(searchValue),replaceValue])};overrideNative(String.prototype,"replace",replaceShim)}if(!Type.symbol(Symbol.split)){var symbolSplit=defineWellKnownSymbol("split"),originalSplit=String.prototype.split;defineProperty(RegExp.prototype,symbolSplit,(function split(string,limit){return ES.Call(originalSplit,string,[this,limit])}));var splitShim=function split(separator,limit){var O=ES.RequireObjectCoercible(this);if(!isNullOrUndefined(separator)){var splitter=ES.GetMethod(separator,symbolSplit);if(void 0!==splitter)return ES.Call(splitter,separator,[O,limit])}return ES.Call(originalSplit,O,[ES.ToString(separator),limit])};overrideNative(String.prototype,"split",splitShim)}var symbolMatchExists=Type.symbol(Symbol.match),stringMatchIgnoresSymbolMatch=symbolMatchExists&&((o={})[Symbol.match]=function(){return 42},42!=="a".match(o));if(!symbolMatchExists||stringMatchIgnoresSymbolMatch){var symbolMatch=defineWellKnownSymbol("match"),originalMatch=String.prototype.match;defineProperty(RegExp.prototype,symbolMatch,(function match(string){return ES.Call(originalMatch,string,[this])}));var matchShim=function match(regexp){var O=ES.RequireObjectCoercible(this);if(!isNullOrUndefined(regexp)){var matcher=ES.GetMethod(regexp,symbolMatch);if(void 0!==matcher)return ES.Call(matcher,regexp,[O])}return ES.Call(originalMatch,O,[ES.ToString(regexp)])};overrideNative(String.prototype,"match",matchShim)}}var wrapConstructor=function wrapConstructor(original,replacement,keysToSkip){Value.preserveToString(replacement,original),Object.setPrototypeOf&&Object.setPrototypeOf(original,replacement),supportsDescriptors?_forEach(Object.getOwnPropertyNames(original),(function(key){key in noop||keysToSkip[key]||Value.proxy(original,key,replacement)})):_forEach(Object.keys(original),(function(key){key in noop||keysToSkip[key]||(replacement[key]=original[key])})),replacement.prototype=original.prototype,Value.redefine(original.prototype,"constructor",replacement)},defaultSpeciesGetter=function(){return this},addDefaultSpecies=function(C){supportsDescriptors&&!_hasOwnProperty(C,symbolSpecies)&&Value.getter(C,symbolSpecies,defaultSpeciesGetter)},addIterator=function(prototype,impl){var implementation=impl||function iterator(){return this};defineProperty(prototype,$iterator$,implementation),!prototype[$iterator$]&&Type.symbol($iterator$)&&(prototype[$iterator$]=implementation)},createDataProperty=function createDataProperty(object,name,value){supportsDescriptors?Object.defineProperty(object,name,{configurable:!0,enumerable:!0,writable:!0,value:value}):object[name]=value},createDataPropertyOrThrow=function createDataPropertyOrThrow(object,name,value){if(createDataProperty(object,name,value),!ES.SameValue(object[name],value))throw new TypeError("property is nonconfigurable")},emulateES6construct=function(o,defaultNewTarget,defaultProto,slots){if(!ES.TypeIsObject(o))throw new TypeError("Constructor requires `new`: "+defaultNewTarget.name);var proto=defaultNewTarget.prototype;ES.TypeIsObject(proto)||(proto=defaultProto);var obj=create(proto);for(var name in slots)if(_hasOwnProperty(slots,name)){var value=slots[name];defineProperty(obj,name,value,!0)}return obj};if(String.fromCodePoint&&1!==String.fromCodePoint.length){var originalFromCodePoint=String.fromCodePoint;overrideNative(String,"fromCodePoint",(function fromCodePoint(codePoints){return ES.Call(originalFromCodePoint,this,arguments)}))}var StringShims={fromCodePoint:function fromCodePoint(codePoints){for(var result=[],next,i=0,length=arguments.length;i<length;i++){if(next=Number(arguments[i]),!ES.SameValue(next,ES.ToInteger(next))||next<0||next>1114111)throw new RangeError("Invalid code point "+next);next<65536?_push(result,String.fromCharCode(next)):(next-=65536,_push(result,String.fromCharCode(55296+(next>>10))),_push(result,String.fromCharCode(next%1024+56320)))}return result.join("")},raw:function raw(callSite){var cooked=ES.ToObject(callSite,"bad callSite"),rawString=ES.ToObject(cooked.raw,"bad raw value"),len=rawString.length,literalsegments=ES.ToLength(len);if(literalsegments<=0)return"";for(var stringElements=[],nextIndex=0,nextKey,next,nextSeg,nextSub;nextIndex<literalsegments&&(nextKey=ES.ToString(nextIndex),nextSeg=ES.ToString(rawString[nextKey]),_push(stringElements,nextSeg),!(nextIndex+1>=literalsegments));)next=nextIndex+1<arguments.length?arguments[nextIndex+1]:"",nextSub=ES.ToString(next),_push(stringElements,nextSub),nextIndex+=1;return stringElements.join("")}};String.raw&&"xy"!==String.raw({raw:{0:"x",1:"y",length:2}})&&overrideNative(String,"raw",StringShims.raw),defineProperties(String,StringShims);var stringRepeat=function repeat(s,times){if(times<1)return"";if(times%2)return repeat(s,times-1)+s;var half=repeat(s,times/2);return half+half},stringMaxLength=1/0,StringPrototypeShims={repeat:function repeat(times){var thisStr=ES.ToString(ES.RequireObjectCoercible(this)),numTimes=ES.ToInteger(times);if(numTimes<0||numTimes>=stringMaxLength)throw new RangeError("repeat count must be less than infinity and not overflow maximum string size");return stringRepeat(thisStr,numTimes)},startsWith:function startsWith(searchString){var S=ES.ToString(ES.RequireObjectCoercible(this));if(ES.IsRegExp(searchString))throw new TypeError('Cannot call method "startsWith" with a regex');var searchStr=ES.ToString(searchString),position;arguments.length>1&&(position=arguments[1]);var start=_max(ES.ToInteger(position),0);return _strSlice(S,start,start+searchStr.length)===searchStr},endsWith:function endsWith(searchString){var S=ES.ToString(ES.RequireObjectCoercible(this));if(ES.IsRegExp(searchString))throw new TypeError('Cannot call method "endsWith" with a regex');var searchStr=ES.ToString(searchString),len=S.length,endPosition;arguments.length>1&&(endPosition=arguments[1]);var pos=void 0===endPosition?len:ES.ToInteger(endPosition),end=_min(_max(pos,0),len);return _strSlice(S,end-searchStr.length,end)===searchStr},includes:function includes(searchString){if(ES.IsRegExp(searchString))throw new TypeError('"includes" does not accept a RegExp');var searchStr=ES.ToString(searchString),position;return arguments.length>1&&(position=arguments[1]),-1!==_indexOf(this,searchStr,position)},codePointAt:function codePointAt(pos){var thisStr=ES.ToString(ES.RequireObjectCoercible(this)),position=ES.ToInteger(pos),length=thisStr.length;if(position>=0&&position<length){var first=thisStr.charCodeAt(position),isEnd;if(first<55296||first>56319||position+1===length)return first;var second=thisStr.charCodeAt(position+1);return second<56320||second>57343?first:1024*(first-55296)+(second-56320)+65536}}};if(String.prototype.includes&&!1!=="a".includes("a",1/0)&&overrideNative(String.prototype,"includes",StringPrototypeShims.includes),String.prototype.startsWith&&String.prototype.endsWith){var startsWithRejectsRegex=throwsError((function(){"/a/".startsWith(/a/)})),startsWithHandlesInfinity=valueOrFalseIfThrows((function(){return!1==="abc".startsWith("a",1/0)}));startsWithRejectsRegex&&startsWithHandlesInfinity||(overrideNative(String.prototype,"startsWith",StringPrototypeShims.startsWith),overrideNative(String.prototype,"endsWith",StringPrototypeShims.endsWith))}if(hasSymbols){var startsWithSupportsSymbolMatch=valueOrFalseIfThrows((function(){var re=/a/;return re[Symbol.match]=!1,"/a/".startsWith(re)}));startsWithSupportsSymbolMatch||overrideNative(String.prototype,"startsWith",StringPrototypeShims.startsWith);var endsWithSupportsSymbolMatch=valueOrFalseIfThrows((function(){var re=/a/;return re[Symbol.match]=!1,"/a/".endsWith(re)}));endsWithSupportsSymbolMatch||overrideNative(String.prototype,"endsWith",StringPrototypeShims.endsWith);var includesSupportsSymbolMatch=valueOrFalseIfThrows((function(){var re=/a/;return re[Symbol.match]=!1,"/a/".includes(re)}));includesSupportsSymbolMatch||overrideNative(String.prototype,"includes",StringPrototypeShims.includes)}defineProperties(String.prototype,StringPrototypeShims);var ws=["\t\n\v\f\r   ᠎    ","         　\u2028","\u2029\ufeff"].join(""),trimRegexp=new RegExp("(^["+ws+"]+)|(["+ws+"]+$)","g"),trimShim=function trim(){return ES.ToString(ES.RequireObjectCoercible(this)).replace(trimRegexp,"")},nonWS=["","​","￾"].join(""),nonWSregex=new RegExp("["+nonWS+"]","g"),isBadHexRegex=/^[-+]0x[0-9a-f]+$/i,hasStringTrimBug=nonWS.trim().length!==nonWS.length;defineProperty(String.prototype,"trim",trimShim,hasStringTrimBug);var iteratorResult=function(x){return{value:x,done:0===arguments.length}},StringIterator=function(s){ES.RequireObjectCoercible(s),this._s=ES.ToString(s),this._i=0};StringIterator.prototype.next=function(){var s=this._s,i=this._i;if(void 0===s||i>=s.length)return this._s=void 0,iteratorResult();var first=s.charCodeAt(i),second,len;return len=first<55296||first>56319||i+1===s.length?1:(second=s.charCodeAt(i+1))<56320||second>57343?1:2,this._i=i+len,iteratorResult(s.substr(i,len))},addIterator(StringIterator.prototype),addIterator(String.prototype,(function(){return new StringIterator(this)}));var ArrayShims={from:function from(items){var C=this,mapFn,mapping,T;if(arguments.length>1&&(mapFn=arguments[1]),void 0===mapFn)mapping=!1;else{if(!ES.IsCallable(mapFn))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(T=arguments[2]),mapping=!0}var usingIterator=void 0!==(isArguments(items)||ES.GetMethod(items,$iterator$)),length,result,i;if(usingIterator){result=ES.IsConstructor(C)?Object(new C):[];var iterator=ES.GetIterator(items),next,nextValue;for(i=0;!1!==(next=ES.IteratorStep(iterator));){nextValue=next.value;try{mapping&&(nextValue=void 0===T?mapFn(nextValue,i):_call(mapFn,T,nextValue,i)),result[i]=nextValue}catch(e){throw ES.IteratorClose(iterator,!0),e}i+=1}length=i}else{var arrayLike=ES.ToObject(items),value;for(length=ES.ToLength(arrayLike.length),result=ES.IsConstructor(C)?Object(new C(length)):new Array(length),i=0;i<length;++i)value=arrayLike[i],mapping&&(value=void 0===T?mapFn(value,i):_call(mapFn,T,value,i)),createDataPropertyOrThrow(result,i,value)}return result.length=length,result},of:function of(){for(var len=arguments.length,C=this,A=isArray(C)||!ES.IsCallable(C)?new Array(len):ES.Construct(C,[len]),k=0;k<len;++k)createDataPropertyOrThrow(A,k,arguments[k]);return A.length=len,A}};defineProperties(Array,ArrayShims),addDefaultSpecies(Array),defineProperties((ArrayIterator=function(array,kind){this.i=0,this.array=array,this.kind=kind}).prototype,{next:function(){var i=this.i,array=this.array;if(!(this instanceof ArrayIterator))throw new TypeError("Not an ArrayIterator");if(void 0!==array)for(var len=ES.ToLength(array.length);i<len;i++){var kind=this.kind,retval;return"key"===kind?retval=i:"value"===kind?retval=array[i]:"entry"===kind&&(retval=[i,array[i]]),this.i=i+1,iteratorResult(retval)}return this.array=void 0,iteratorResult()}}),addIterator(ArrayIterator.prototype);var arrayOfSupportsSubclassing=Array.of===ArrayShims.of||function(){var Foo=function Foo(len){this.length=len};Foo.prototype=[];var fooArr=Array.of.apply(Foo,[1,2]);return fooArr instanceof Foo&&2===fooArr.length}();arrayOfSupportsSubclassing||overrideNative(Array,"of",ArrayShims.of);var ArrayPrototypeShims={copyWithin:function copyWithin(target,start){var o=ES.ToObject(this),len=ES.ToLength(o.length),relativeTarget=ES.ToInteger(target),relativeStart=ES.ToInteger(start),to=relativeTarget<0?_max(len+relativeTarget,0):_min(relativeTarget,len),from=relativeStart<0?_max(len+relativeStart,0):_min(relativeStart,len),end;arguments.length>2&&(end=arguments[2]);var relativeEnd=void 0===end?len:ES.ToInteger(end),finalItem=relativeEnd<0?_max(len+relativeEnd,0):_min(relativeEnd,len),count=_min(finalItem-from,len-to),direction=1;for(from<to&&to<from+count&&(direction=-1,from+=count-1,to+=count-1);count>0;)from in o?o[to]=o[from]:delete o[to],from+=direction,to+=direction,count-=1;return o},fill:function fill(value){var start,end;arguments.length>1&&(start=arguments[1]),arguments.length>2&&(end=arguments[2]);var O=ES.ToObject(this),len=ES.ToLength(O.length);start=ES.ToInteger(void 0===start?0:start),end=ES.ToInteger(void 0===end?len:end);for(var relativeStart=start<0?_max(len+start,0):_min(start,len),relativeEnd=end<0?len+end:end,i=relativeStart;i<len&&i<relativeEnd;++i)O[i]=value;return O},find:function find(predicate){var list=ES.ToObject(this),length=ES.ToLength(list.length);if(!ES.IsCallable(predicate))throw new TypeError("Array#find: predicate must be a function");for(var thisArg=arguments.length>1?arguments[1]:null,i=0,value;i<length;i++)if(value=list[i],thisArg){if(_call(predicate,thisArg,value,i,list))return value}else if(predicate(value,i,list))return value},findIndex:function findIndex(predicate){var list=ES.ToObject(this),length=ES.ToLength(list.length);if(!ES.IsCallable(predicate))throw new TypeError("Array#findIndex: predicate must be a function");for(var thisArg=arguments.length>1?arguments[1]:null,i=0;i<length;i++)if(thisArg){if(_call(predicate,thisArg,list[i],i,list))return i}else if(predicate(list[i],i,list))return i;return-1},keys:function keys(){return new ArrayIterator(this,"key")},values:function values(){return new ArrayIterator(this,"value")},entries:function entries(){return new ArrayIterator(this,"entry")}};if(Array.prototype.keys&&!ES.IsCallable([1].keys().next)&&delete Array.prototype.keys,Array.prototype.entries&&!ES.IsCallable([1].entries().next)&&delete Array.prototype.entries,Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[$iterator$]&&(defineProperties(Array.prototype,{values:Array.prototype[$iterator$]}),Type.symbol(Symbol.unscopables)&&(Array.prototype[Symbol.unscopables].values=!0)),functionsHaveNames&&Array.prototype.values&&"values"!==Array.prototype.values.name){var originalArrayPrototypeValues=Array.prototype.values;overrideNative(Array.prototype,"values",(function values(){return ES.Call(originalArrayPrototypeValues,this,arguments)})),defineProperty(Array.prototype,$iterator$,Array.prototype.values,!0)}defineProperties(Array.prototype,ArrayPrototypeShims),1/[!0].indexOf(!0,-0)<0&&defineProperty(Array.prototype,"indexOf",(function indexOf(searchElement){var value=_arrayIndexOfApply(this,arguments);return 0===value&&1/value<0?0:value}),!0),addIterator(Array.prototype,(function(){return this.values()})),Object.getPrototypeOf&&addIterator(Object.getPrototypeOf([].values()));var arrayFromSwallowsNegativeLengths=valueOrFalseIfThrows((function(){return 0===Array.from({length:-1}).length})),arrayFromHandlesIterables=1===(arr=Array.from([0].entries())).length&&isArray(arr[0])&&0===arr[0][0]&&0===arr[0][1],arr;arrayFromSwallowsNegativeLengths&&arrayFromHandlesIterables||overrideNative(Array,"from",ArrayShims.from);var arrayFromHandlesUndefinedMapFunction=valueOrFalseIfThrows((function(){return Array.from([0],void 0)}));if(!arrayFromHandlesUndefinedMapFunction){var origArrayFrom=Array.from;overrideNative(Array,"from",(function from(items){return arguments.length>1&&void 0!==arguments[1]?ES.Call(origArrayFrom,this,arguments):_call(origArrayFrom,this,items)}))}var int32sAsOne=-(Math.pow(2,32)-1),toLengthsCorrectly=function(method,reversed){var obj={length:int32sAsOne};return obj[reversed?(obj.length>>>0)-1:0]=!0,valueOrFalseIfThrows((function(){return _call(method,obj,(function(){throw new RangeError("should not reach here")}),[]),!0}))};if(!toLengthsCorrectly(Array.prototype.forEach)){var originalForEach=Array.prototype.forEach;overrideNative(Array.prototype,"forEach",(function forEach(callbackFn){return ES.Call(originalForEach,this.length>=0?this:[],arguments)}),!0)}if(!toLengthsCorrectly(Array.prototype.map)){var originalMap=Array.prototype.map;overrideNative(Array.prototype,"map",(function map(callbackFn){return ES.Call(originalMap,this.length>=0?this:[],arguments)}),!0)}if(!toLengthsCorrectly(Array.prototype.filter)){var originalFilter=Array.prototype.filter;overrideNative(Array.prototype,"filter",(function filter(callbackFn){return ES.Call(originalFilter,this.length>=0?this:[],arguments)}),!0)}if(!toLengthsCorrectly(Array.prototype.some)){var originalSome=Array.prototype.some;overrideNative(Array.prototype,"some",(function some(callbackFn){return ES.Call(originalSome,this.length>=0?this:[],arguments)}),!0)}if(!toLengthsCorrectly(Array.prototype.every)){var originalEvery=Array.prototype.every;overrideNative(Array.prototype,"every",(function every(callbackFn){return ES.Call(originalEvery,this.length>=0?this:[],arguments)}),!0)}if(!toLengthsCorrectly(Array.prototype.reduce)){var originalReduce=Array.prototype.reduce;overrideNative(Array.prototype,"reduce",(function reduce(callbackFn){return ES.Call(originalReduce,this.length>=0?this:[],arguments)}),!0)}if(!toLengthsCorrectly(Array.prototype.reduceRight,!0)){var originalReduceRight=Array.prototype.reduceRight;overrideNative(Array.prototype,"reduceRight",(function reduceRight(callbackFn){return ES.Call(originalReduceRight,this.length>=0?this:[],arguments)}),!0)}var lacksOctalSupport=8!==Number("0o10"),lacksBinarySupport=2!==Number("0b10"),trimsNonWhitespace=_some(nonWS,(function(c){return 0===Number(c+0+c)}));if(lacksOctalSupport||lacksBinarySupport||trimsNonWhitespace){var OrigNumber=Number,binaryRegex=/^0b[01]+$/i,octalRegex=/^0o[0-7]+$/i,isBinary=binaryRegex.test.bind(binaryRegex),isOctal=octalRegex.test.bind(octalRegex),toPrimitive=function(O){var result;if("function"==typeof O.valueOf&&(result=O.valueOf(),Type.primitive(result)))return result;if("function"==typeof O.toString&&(result=O.toString(),Type.primitive(result)))return result;throw new TypeError("No default value")},hasNonWS=nonWSregex.test.bind(nonWSregex),isBadHex=isBadHexRegex.test.bind(isBadHexRegex),NumberShim=function(){var NumberShim=function Number(value){var primValue;"string"==typeof(primValue=arguments.length>0?Type.primitive(value)?value:toPrimitive(value,"number"):0)&&(primValue=ES.Call(trimShim,primValue),isBinary(primValue)?primValue=parseInt(_strSlice(primValue,2),2):isOctal(primValue)?primValue=parseInt(_strSlice(primValue,2),8):(hasNonWS(primValue)||isBadHex(primValue))&&(primValue=NaN));var receiver=this,valueOfSucceeds=valueOrFalseIfThrows((function(){return OrigNumber.prototype.valueOf.call(receiver),!0}));return receiver instanceof NumberShim&&!valueOfSucceeds?new OrigNumber(primValue):OrigNumber(primValue)};return NumberShim}();wrapConstructor(OrigNumber,NumberShim,{}),defineProperties(NumberShim,{NaN:OrigNumber.NaN,MAX_VALUE:OrigNumber.MAX_VALUE,MIN_VALUE:OrigNumber.MIN_VALUE,NEGATIVE_INFINITY:OrigNumber.NEGATIVE_INFINITY,POSITIVE_INFINITY:OrigNumber.POSITIVE_INFINITY}),Number=NumberShim,Value.redefine(globals,"Number",NumberShim)}var maxSafeInteger=Math.pow(2,53)-1;defineProperties(Number,{MAX_SAFE_INTEGER:maxSafeInteger,MIN_SAFE_INTEGER:-maxSafeInteger,EPSILON:2220446049250313e-31,parseInt:globals.parseInt,parseFloat:globals.parseFloat,isFinite:numberIsFinite,isInteger:function isInteger(value){return numberIsFinite(value)&&ES.ToInteger(value)===value},isSafeInteger:function isSafeInteger(value){return Number.isInteger(value)&&_abs(value)<=Number.MAX_SAFE_INTEGER},isNaN:numberIsNaN}),defineProperty(Number,"parseInt",globals.parseInt,Number.parseInt!==globals.parseInt),1===[,1].find((function(){return!0}))&&overrideNative(Array.prototype,"find",ArrayPrototypeShims.find),0!==[,1].findIndex((function(){return!0}))&&overrideNative(Array.prototype,"findIndex",ArrayPrototypeShims.findIndex);var isEnumerableOn=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable),ensureEnumerable=function ensureEnumerable(obj,prop){supportsDescriptors&&isEnumerableOn(obj,prop)&&Object.defineProperty(obj,prop,{enumerable:!1})},sliceArgs=function sliceArgs(){for(var initial=Number(this),len=arguments.length,desiredArgCount=len-initial,args=new Array(desiredArgCount<0?0:desiredArgCount),i=initial;i<len;++i)args[i-initial]=arguments[i];return args},assignTo=function assignTo(source){return function assignToSource(target,key){return target[key]=source[key],target}},assignReducer=function(target,source){var sourceKeys=keys(Object(source)),symbols;return ES.IsCallable(Object.getOwnPropertySymbols)&&(symbols=_filter(Object.getOwnPropertySymbols(Object(source)),isEnumerableOn(source))),_reduce(_concat(sourceKeys,symbols||[]),assignTo(source),target)},ObjectShims={assign:function(target,source){var to=ES.ToObject(target,"Cannot convert undefined or null to object");return _reduce(ES.Call(sliceArgs,1,arguments),assignReducer,to)},is:function is(a,b){return ES.SameValue(a,b)}},assignHasPendingExceptions=Object.assign&&Object.preventExtensions&&function(){var thrower=Object.preventExtensions({1:2});try{Object.assign(thrower,"xy")}catch(e){return"y"===thrower[1]}}(),FAKENULL,gpo,spo;if(assignHasPendingExceptions&&overrideNative(Object,"assign",ObjectShims.assign),defineProperties(Object,ObjectShims),supportsDescriptors){var ES5ObjectShims={setPrototypeOf:function(Object,magic){var set,checkArgs=function(O,proto){if(!ES.TypeIsObject(O))throw new TypeError("cannot set prototype on a non-object");if(null!==proto&&!ES.TypeIsObject(proto))throw new TypeError("can only set prototype to an object or null"+proto)},setPrototypeOf=function(O,proto){return checkArgs(O,proto),_call(set,O,proto),O};try{set=Object.getOwnPropertyDescriptor(Object.prototype,magic).set,_call(set,{},null)}catch(e){if(Object.prototype!=={}[magic])return;set=function(proto){this[magic]=proto},setPrototypeOf.polyfill=setPrototypeOf(setPrototypeOf({},null),Object.prototype)instanceof Object}return setPrototypeOf}(Object,"__proto__")};defineProperties(Object,ES5ObjectShims)}Object.setPrototypeOf&&Object.getPrototypeOf&&null!==Object.getPrototypeOf(Object.setPrototypeOf({},null))&&null===Object.getPrototypeOf(Object.create(null))&&(FAKENULL=Object.create(null),gpo=Object.getPrototypeOf,spo=Object.setPrototypeOf,Object.getPrototypeOf=function(o){var result=gpo(o);return result===FAKENULL?null:result},Object.setPrototypeOf=function(o,p){var proto;return spo(o,null===p?FAKENULL:p)},Object.setPrototypeOf.polyfill=!1);var objectKeysAcceptsPrimitives=!throwsError((function(){Object.keys("foo")}));if(!objectKeysAcceptsPrimitives){var originalObjectKeys=Object.keys;overrideNative(Object,"keys",(function keys(value){return originalObjectKeys(ES.ToObject(value))})),keys=Object.keys}var objectKeysRejectsRegex=throwsError((function(){Object.keys(/a/g)}));if(objectKeysRejectsRegex){var regexRejectingObjectKeys=Object.keys;overrideNative(Object,"keys",(function keys(value){if(Type.regex(value)){var regexKeys=[];for(var k in value)_hasOwnProperty(value,k)&&_push(regexKeys,k);return regexKeys}return regexRejectingObjectKeys(value)})),keys=Object.keys}if(Object.getOwnPropertyNames){var objectGOPNAcceptsPrimitives=!throwsError((function(){Object.getOwnPropertyNames("foo")}));if(!objectGOPNAcceptsPrimitives){var cachedWindowNames="object"==typeof window?Object.getOwnPropertyNames(window):[],originalObjectGetOwnPropertyNames=Object.getOwnPropertyNames;overrideNative(Object,"getOwnPropertyNames",(function getOwnPropertyNames(value){var val=ES.ToObject(value);if("[object Window]"===_toString(val))try{return originalObjectGetOwnPropertyNames(val)}catch(e){return _concat([],cachedWindowNames)}return originalObjectGetOwnPropertyNames(val)}))}}if(Object.getOwnPropertyDescriptor){var objectGOPDAcceptsPrimitives=!throwsError((function(){Object.getOwnPropertyDescriptor("foo","bar")}));if(!objectGOPDAcceptsPrimitives){var originalObjectGetOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;overrideNative(Object,"getOwnPropertyDescriptor",(function getOwnPropertyDescriptor(value,property){return originalObjectGetOwnPropertyDescriptor(ES.ToObject(value),property)}))}}if(Object.seal){var objectSealAcceptsPrimitives=!throwsError((function(){Object.seal("foo")}));if(!objectSealAcceptsPrimitives){var originalObjectSeal=Object.seal;overrideNative(Object,"seal",(function seal(value){return ES.TypeIsObject(value)?originalObjectSeal(value):value}))}}if(Object.isSealed){var objectIsSealedAcceptsPrimitives=!throwsError((function(){Object.isSealed("foo")}));if(!objectIsSealedAcceptsPrimitives){var originalObjectIsSealed=Object.isSealed;overrideNative(Object,"isSealed",(function isSealed(value){return!ES.TypeIsObject(value)||originalObjectIsSealed(value)}))}}if(Object.freeze){var objectFreezeAcceptsPrimitives=!throwsError((function(){Object.freeze("foo")}));if(!objectFreezeAcceptsPrimitives){var originalObjectFreeze=Object.freeze;overrideNative(Object,"freeze",(function freeze(value){return ES.TypeIsObject(value)?originalObjectFreeze(value):value}))}}if(Object.isFrozen){var objectIsFrozenAcceptsPrimitives=!throwsError((function(){Object.isFrozen("foo")}));if(!objectIsFrozenAcceptsPrimitives){var originalObjectIsFrozen=Object.isFrozen;overrideNative(Object,"isFrozen",(function isFrozen(value){return!ES.TypeIsObject(value)||originalObjectIsFrozen(value)}))}}if(Object.preventExtensions){var objectPreventExtensionsAcceptsPrimitives=!throwsError((function(){Object.preventExtensions("foo")}));if(!objectPreventExtensionsAcceptsPrimitives){var originalObjectPreventExtensions=Object.preventExtensions;overrideNative(Object,"preventExtensions",(function preventExtensions(value){return ES.TypeIsObject(value)?originalObjectPreventExtensions(value):value}))}}if(Object.isExtensible){var objectIsExtensibleAcceptsPrimitives=!throwsError((function(){Object.isExtensible("foo")}));if(!objectIsExtensibleAcceptsPrimitives){var originalObjectIsExtensible=Object.isExtensible;overrideNative(Object,"isExtensible",(function isExtensible(value){return!!ES.TypeIsObject(value)&&originalObjectIsExtensible(value)}))}}if(Object.getPrototypeOf){var objectGetProtoAcceptsPrimitives=!throwsError((function(){Object.getPrototypeOf("foo")}));if(!objectGetProtoAcceptsPrimitives){var originalGetProto=Object.getPrototypeOf;overrideNative(Object,"getPrototypeOf",(function getPrototypeOf(value){return originalGetProto(ES.ToObject(value))}))}}var hasFlags=supportsDescriptors&&((desc=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags"))&&ES.IsCallable(desc.get)),desc;if(supportsDescriptors&&!hasFlags){var regExpFlagsGetter=function flags(){if(!ES.TypeIsObject(this))throw new TypeError("Method called on incompatible type: must be an object.");var result="";return this.global&&(result+="g"),this.ignoreCase&&(result+="i"),this.multiline&&(result+="m"),this.unicode&&(result+="u"),this.sticky&&(result+="y"),result};Value.getter(RegExp.prototype,"flags",regExpFlagsGetter)}var regExpSupportsFlagsWithRegex=supportsDescriptors&&valueOrFalseIfThrows((function(){return"/a/i"===String(new RegExp(/a/g,"i"))})),regExpNeedsToSupportSymbolMatch=hasSymbols&&supportsDescriptors&&((regex=/./)[Symbol.match]=!1,RegExp(regex)===regex),regex,regexToStringIsGeneric=valueOrFalseIfThrows((function(){return"/abc/"===RegExp.prototype.toString.call({source:"abc"})})),regexToStringSupportsGenericFlags=regexToStringIsGeneric&&valueOrFalseIfThrows((function(){return"/a/b"===RegExp.prototype.toString.call({source:"a",flags:"b"})}));if(!regexToStringIsGeneric||!regexToStringSupportsGenericFlags){var origRegExpToString=RegExp.prototype.toString;defineProperty(RegExp.prototype,"toString",(function toString(){var R=ES.RequireObjectCoercible(this),pattern,flags;return Type.regex(R)?_call(origRegExpToString,R):"/"+$String(R.source)+"/"+$String(R.flags)}),!0),Value.preserveToString(RegExp.prototype.toString,origRegExpToString)}if(supportsDescriptors&&(!regExpSupportsFlagsWithRegex||regExpNeedsToSupportSymbolMatch)){var flagsGetter=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get,sourceDesc=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{},legacySourceGetter=function(){return this.source},sourceGetter=ES.IsCallable(sourceDesc.get)?sourceDesc.get:legacySourceGetter,OrigRegExp=RegExp,RegExpShim=function RegExp(pattern,flags){var patternIsRegExp=ES.IsRegExp(pattern),calledWithNew;if(!(this instanceof RegExp)&&patternIsRegExp&&void 0===flags&&pattern.constructor===RegExp)return pattern;var P=pattern,F=flags;return Type.regex(pattern)?new RegExp(P=ES.Call(sourceGetter,pattern),F=void 0===flags?ES.Call(flagsGetter,pattern):flags):(patternIsRegExp&&(P=pattern.source,F=void 0===flags?pattern.flags:flags),new OrigRegExp(pattern,flags))};wrapConstructor(OrigRegExp,RegExpShim,{$input:!0}),RegExp=RegExpShim,Value.redefine(globals,"RegExp",RegExpShim)}if(supportsDescriptors){var regexGlobals={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};_forEach(keys(regexGlobals),(function(prop){prop in RegExp&&!(regexGlobals[prop]in RegExp)&&Value.getter(RegExp,regexGlobals[prop],(function get(){return RegExp[prop]}))}))}addDefaultSpecies(RegExp);var inverseEpsilon=1/Number.EPSILON,roundTiesToEven=function roundTiesToEven(n){return n+inverseEpsilon-inverseEpsilon},BINARY_32_EPSILON=Math.pow(2,-23),BINARY_32_MAX_VALUE=Math.pow(2,127)*(2-BINARY_32_EPSILON),BINARY_32_MIN_VALUE=Math.pow(2,-126),E=Math.E,LOG2E=Math.LOG2E,LOG10E=Math.LOG10E,numberCLZ=Number.prototype.clz;delete Number.prototype.clz;var MathShims={acosh:function acosh(value){var x=Number(value);return numberIsNaN(x)||value<1?NaN:1===x?0:x===1/0?x:_log(x/E+_sqrt(x+1)*_sqrt(x-1)/E)+1},asinh:function asinh(value){var x=Number(value);return 0!==x&&globalIsFinite(x)?x<0?-asinh(-x):_log(x+_sqrt(x*x+1)):x},atanh:function atanh(value){var x=Number(value);return numberIsNaN(x)||x<-1||x>1?NaN:-1===x?-1/0:1===x?1/0:0===x?x:.5*_log((1+x)/(1-x))},cbrt:function cbrt(value){var x=Number(value);if(0===x)return x;var negate=x<0,result;return negate&&(x=-x),result=x===1/0?1/0:(x/((result=_exp(_log(x)/3))*result)+2*result)/3,negate?-result:result},clz32:function clz32(value){var x=Number(value),number=ES.ToUint32(x);return 0===number?32:numberCLZ?ES.Call(numberCLZ,number):31-_floor(_log(number+.5)*LOG2E)},cosh:function cosh(value){var x=Number(value);return 0===x?1:numberIsNaN(x)?NaN:globalIsFinite(x)?(x<0&&(x=-x),x>21?_exp(x)/2:(_exp(x)+_exp(-x))/2):1/0},expm1:function expm1(value){var x=Number(value);if(x===-1/0)return-1;if(!globalIsFinite(x)||0===x)return x;if(_abs(x)>.5)return _exp(x)-1;for(var t=x,sum=0,n=1;sum+t!==sum;)sum+=t,t*=x/(n+=1);return sum},hypot:function hypot(x,y){for(var result=0,largest=0,i=0;i<arguments.length;++i){var value=_abs(Number(arguments[i]));largest<value?(result*=largest/value*(largest/value),result+=1,largest=value):result+=value>0?value/largest*(value/largest):value}return largest===1/0?1/0:largest*_sqrt(result)},log2:function log2(value){return _log(value)*LOG2E},log10:function log10(value){return _log(value)*LOG10E},log1p:function log1p(value){var x=Number(value);return x<-1||numberIsNaN(x)?NaN:0===x||x===1/0?x:-1===x?-1/0:1+x-1==0?x:x*(_log(1+x)/(1+x-1))},sign:_sign,sinh:function sinh(value){var x=Number(value);return globalIsFinite(x)&&0!==x?_abs(x)<1?(Math.expm1(x)-Math.expm1(-x))/2:(_exp(x-1)-_exp(-x-1))*E/2:x},tanh:function tanh(value){var x=Number(value);return numberIsNaN(x)||0===x?x:x>=20?1:x<=-20?-1:(Math.expm1(x)-Math.expm1(-x))/(_exp(x)+_exp(-x))},trunc:function trunc(value){var x=Number(value);return x<0?-_floor(-x):_floor(x)},imul:function imul(x,y){var a=ES.ToUint32(x),b=ES.ToUint32(y),ah,al=65535&a,bh,bl=65535&b;return al*bl+((a>>>16&65535)*bl+al*(b>>>16&65535)<<16>>>0)|0},fround:function fround(x){var v=Number(x);if(0===v||v===1/0||v===-1/0||numberIsNaN(v))return v;var sign=_sign(v),abs=_abs(v);if(abs<BINARY_32_MIN_VALUE)return sign*roundTiesToEven(abs/BINARY_32_MIN_VALUE/BINARY_32_EPSILON)*BINARY_32_MIN_VALUE*BINARY_32_EPSILON;var a=(1+BINARY_32_EPSILON/Number.EPSILON)*abs,result=a-(a-abs);return result>BINARY_32_MAX_VALUE||numberIsNaN(result)?sign*(1/0):sign*result}};defineProperties(Math,MathShims),defineProperty(Math,"log1p",MathShims.log1p,-1e-17!==Math.log1p(-1e-17)),defineProperty(Math,"asinh",MathShims.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7)),defineProperty(Math,"tanh",MathShims.tanh,-2e-17!==Math.tanh(-2e-17)),defineProperty(Math,"acosh",MathShims.acosh,Math.acosh(Number.MAX_VALUE)===1/0),defineProperty(Math,"cbrt",MathShims.cbrt,Math.abs(1-Math.cbrt(1e-300)/1e-100)/Number.EPSILON>8),defineProperty(Math,"sinh",MathShims.sinh,-2e-17!==Math.sinh(-2e-17));var expm1OfTen=Math.expm1(10);defineProperty(Math,"expm1",MathShims.expm1,expm1OfTen>22025.465794806718||expm1OfTen<22025.465794806718);var origMathRound=Math.round,roundHandlesBoundaryConditions=0===Math.round(.5-Number.EPSILON/4)&&1===Math.round(Number.EPSILON/3.99-.5),smallestPositiveNumberWhereRoundBreaks=inverseEpsilon+1,largestPositiveNumberWhereRoundBreaks=2*inverseEpsilon-1,roundDoesNotIncreaseIntegers=[smallestPositiveNumberWhereRoundBreaks,largestPositiveNumberWhereRoundBreaks].every((function(num){return Math.round(num)===num}));defineProperty(Math,"round",(function round(x){var floor=_floor(x),ceil;return x-floor<.5?floor:-1===floor?-0:floor+1}),!roundHandlesBoundaryConditions||!roundDoesNotIncreaseIntegers),Value.preserveToString(Math.round,origMathRound);var origImul=Math.imul;-5!==Math.imul(4294967295,5)&&(Math.imul=MathShims.imul,Value.preserveToString(Math.imul,origImul)),2!==Math.imul.length&&overrideNative(Math,"imul",(function imul(x,y){return ES.Call(origImul,Math,arguments)}));var PromiseShim=function(){var setTimeout=globals.setTimeout;if("function"==typeof setTimeout||"object"==typeof setTimeout){ES.IsPromise=function(promise){return!!ES.TypeIsObject(promise)&&void 0!==promise._promise};var PromiseCapability=function(C){if(!ES.IsConstructor(C))throw new TypeError("Bad promise constructor");var capability=this,resolver=function(resolve,reject){if(void 0!==capability.resolve||void 0!==capability.reject)throw new TypeError("Bad Promise implementation!");capability.resolve=resolve,capability.reject=reject};if(capability.resolve=void 0,capability.reject=void 0,capability.promise=new C(resolver),!ES.IsCallable(capability.resolve)||!ES.IsCallable(capability.reject))throw new TypeError("Bad promise constructor")},makeZeroTimeout;"undefined"!=typeof window&&ES.IsCallable(window.postMessage)&&(makeZeroTimeout=function(){var timeouts=[],messageName="zero-timeout-message",setZeroTimeout=function(fn){_push(timeouts,fn),window.postMessage(messageName,"*")},handleMessage=function(event){if(event.source===window&&event.data===messageName){if(event.stopPropagation(),0===timeouts.length)return;var fn;_shift(timeouts)()}};return window.addEventListener("message",handleMessage,!0),setZeroTimeout});var makePromiseAsap=function(){var P=globals.Promise,pr=P&&P.resolve&&P.resolve();return pr&&function(task){return pr.then(task)}},enqueue=ES.IsCallable(globals.setImmediate)?globals.setImmediate:"object"==typeof process&&process.nextTick?process.nextTick:makePromiseAsap()||(ES.IsCallable(makeZeroTimeout)?makeZeroTimeout():function(task){setTimeout(task,0)}),PROMISE_IDENTITY=function(x){return x},PROMISE_THROWER=function(e){throw e},PROMISE_PENDING=0,PROMISE_FULFILLED=1,PROMISE_REJECTED=2,PROMISE_FULFILL_OFFSET=0,PROMISE_REJECT_OFFSET=1,PROMISE_CAPABILITY_OFFSET=2,PROMISE_FAKE_CAPABILITY={},enqueuePromiseReactionJob=function(handler,capability,argument){enqueue((function(){promiseReactionJob(handler,capability,argument)}))},promiseReactionJob=function(handler,promiseCapability,argument){var handlerResult,f;if(promiseCapability===PROMISE_FAKE_CAPABILITY)return handler(argument);try{handlerResult=handler(argument),f=promiseCapability.resolve}catch(e){handlerResult=e,f=promiseCapability.reject}f(handlerResult)},fulfillPromise=function(promise,value){var _promise=promise._promise,length=_promise.reactionLength;if(length>0&&(enqueuePromiseReactionJob(_promise.fulfillReactionHandler0,_promise.reactionCapability0,value),_promise.fulfillReactionHandler0=void 0,_promise.rejectReactions0=void 0,_promise.reactionCapability0=void 0,length>1))for(var i=1,idx=0;i<length;i++,idx+=3)enqueuePromiseReactionJob(_promise[idx+0],_promise[idx+2],value),promise[idx+0]=void 0,promise[idx+1]=void 0,promise[idx+2]=void 0;_promise.result=value,_promise.state=1,_promise.reactionLength=0},rejectPromise=function(promise,reason){var _promise=promise._promise,length=_promise.reactionLength;if(length>0&&(enqueuePromiseReactionJob(_promise.rejectReactionHandler0,_promise.reactionCapability0,reason),_promise.fulfillReactionHandler0=void 0,_promise.rejectReactions0=void 0,_promise.reactionCapability0=void 0,length>1))for(var i=1,idx=0;i<length;i++,idx+=3)enqueuePromiseReactionJob(_promise[idx+1],_promise[idx+2],reason),promise[idx+0]=void 0,promise[idx+1]=void 0,promise[idx+2]=void 0;_promise.result=reason,_promise.state=2,_promise.reactionLength=0},createResolvingFunctions=function(promise){var alreadyResolved=!1,resolve,reject;return{resolve:function(resolution){var then;if(!alreadyResolved){if(alreadyResolved=!0,resolution===promise)return rejectPromise(promise,new TypeError("Self resolution"));if(!ES.TypeIsObject(resolution))return fulfillPromise(promise,resolution);try{then=resolution.then}catch(e){return rejectPromise(promise,e)}if(!ES.IsCallable(then))return fulfillPromise(promise,resolution);enqueue((function(){promiseResolveThenableJob(promise,resolution,then)}))}},reject:function(reason){if(!alreadyResolved)return alreadyResolved=!0,rejectPromise(promise,reason)}}},optimizedThen=function(then,thenable,resolve,reject){then===Promise$prototype$then?_call(then,thenable,resolve,reject,PROMISE_FAKE_CAPABILITY):_call(then,thenable,resolve,reject)},promiseResolveThenableJob=function(promise,thenable,then){var resolvingFunctions=createResolvingFunctions(promise),resolve=resolvingFunctions.resolve,reject=resolvingFunctions.reject;try{optimizedThen(then,thenable,resolve,reject)}catch(e){reject(e)}},Promise$prototype,Promise$prototype$then,Promise=function(){var PromiseShim=function Promise(resolver){if(!(this instanceof PromiseShim))throw new TypeError('Constructor Promise requires "new"');if(this&&this._promise)throw new TypeError("Bad construction");if(!ES.IsCallable(resolver))throw new TypeError("not a valid resolver");var promise=emulateES6construct(this,PromiseShim,Promise$prototype,{_promise:{result:void 0,state:0,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}}),resolvingFunctions=createResolvingFunctions(promise),reject=resolvingFunctions.reject;try{resolver(resolvingFunctions.resolve,reject)}catch(e){reject(e)}return promise};return PromiseShim}();Promise$prototype=Promise.prototype;var _promiseAllResolver=function(index,values,capability,remaining){var alreadyCalled=!1;return function(x){var resolve;alreadyCalled||(alreadyCalled=!0,values[index]=x,0==--remaining.count&&(0,capability.resolve)(values))}},performPromiseAll=function(iteratorRecord,C,resultCapability){for(var it=iteratorRecord.iterator,values=[],remaining={count:1},next,nextValue,index=0,resolve;;){try{if(!1===(next=ES.IteratorStep(it))){iteratorRecord.done=!0;break}nextValue=next.value}catch(e){throw iteratorRecord.done=!0,e}values[index]=void 0;var nextPromise=C.resolve(nextValue),resolveElement=_promiseAllResolver(index,values,resultCapability,remaining);remaining.count+=1,optimizedThen(nextPromise.then,nextPromise,resolveElement,resultCapability.reject),index+=1}0==--remaining.count&&(0,resultCapability.resolve)(values);return resultCapability.promise},performPromiseRace=function(iteratorRecord,C,resultCapability){for(var it=iteratorRecord.iterator,next,nextValue,nextPromise;;){try{if(!1===(next=ES.IteratorStep(it))){iteratorRecord.done=!0;break}nextValue=next.value}catch(e){throw iteratorRecord.done=!0,e}nextPromise=C.resolve(nextValue),optimizedThen(nextPromise.then,nextPromise,resultCapability.resolve,resultCapability.reject)}return resultCapability.promise};return defineProperties(Promise,{all:function all(iterable){var C=this;if(!ES.TypeIsObject(C))throw new TypeError("Promise is not object");var capability=new PromiseCapability(C),iterator,iteratorRecord;try{return iterator=ES.GetIterator(iterable),performPromiseAll(iteratorRecord={iterator:iterator,done:!1},C,capability)}catch(e){var exception=e,reject;if(iteratorRecord&&!iteratorRecord.done)try{ES.IteratorClose(iterator,!0)}catch(ee){exception=ee}return(0,capability.reject)(exception),capability.promise}},race:function race(iterable){var C=this;if(!ES.TypeIsObject(C))throw new TypeError("Promise is not object");var capability=new PromiseCapability(C),iterator,iteratorRecord;try{return iterator=ES.GetIterator(iterable),performPromiseRace(iteratorRecord={iterator:iterator,done:!1},C,capability)}catch(e){var exception=e,reject;if(iteratorRecord&&!iteratorRecord.done)try{ES.IteratorClose(iterator,!0)}catch(ee){exception=ee}return(0,capability.reject)(exception),capability.promise}},reject:function reject(reason){var C=this;if(!ES.TypeIsObject(C))throw new TypeError("Bad promise constructor");var capability=new PromiseCapability(C),rejectFunc;return(0,capability.reject)(reason),capability.promise},resolve:function resolve(v){var C=this,constructor;if(!ES.TypeIsObject(C))throw new TypeError("Bad promise constructor");if(ES.IsPromise(v)&&v.constructor===C)return v;var capability=new PromiseCapability(C),resolveFunc;return(0,capability.resolve)(v),capability.promise}}),defineProperties(Promise$prototype,{catch:function(onRejected){return this.then(null,onRejected)},then:function then(onFulfilled,onRejected){var promise=this;if(!ES.IsPromise(promise))throw new TypeError("not a promise");var C=ES.SpeciesConstructor(promise,Promise),resultCapability,returnValueIsIgnored=arguments.length>2&&arguments[2]===PROMISE_FAKE_CAPABILITY;resultCapability=returnValueIsIgnored&&C===Promise?PROMISE_FAKE_CAPABILITY:new PromiseCapability(C);var fulfillReactionHandler=ES.IsCallable(onFulfilled)?onFulfilled:PROMISE_IDENTITY,rejectReactionHandler=ES.IsCallable(onRejected)?onRejected:PROMISE_THROWER,_promise=promise._promise,value;if(0===_promise.state){if(0===_promise.reactionLength)_promise.fulfillReactionHandler0=fulfillReactionHandler,_promise.rejectReactionHandler0=rejectReactionHandler,_promise.reactionCapability0=resultCapability;else{var idx=3*(_promise.reactionLength-1);_promise[idx+0]=fulfillReactionHandler,_promise[idx+1]=rejectReactionHandler,_promise[idx+2]=resultCapability}_promise.reactionLength+=1}else if(1===_promise.state)value=_promise.result,enqueuePromiseReactionJob(fulfillReactionHandler,resultCapability,value);else{if(2!==_promise.state)throw new TypeError("unexpected Promise state");value=_promise.result,enqueuePromiseReactionJob(rejectReactionHandler,resultCapability,value)}return resultCapability.promise}}),PROMISE_FAKE_CAPABILITY=new PromiseCapability(Promise),Promise$prototype$then=Promise$prototype.then,Promise}}(),count,thenable;if(globals.Promise&&(delete globals.Promise.accept,delete globals.Promise.defer,delete globals.Promise.prototype.chain),"function"==typeof PromiseShim){defineProperties(globals,{Promise:PromiseShim});var promiseSupportsSubclassing=supportsSubclassing(globals.Promise,(function(S){return S.resolve(42).then((function(){}))instanceof S})),promiseIgnoresNonFunctionThenCallbacks=!throwsError((function(){globals.Promise.reject(42).then(null,5).then(null,noop)})),promiseRequiresObjectContext=throwsError((function(){globals.Promise.call(3,noop)})),promiseResolveBroken=function(Promise){var p=Promise.resolve(5);p.constructor={};var p2=Promise.resolve(p);try{p2.then(null,noop).then(null,noop)}catch(e){return!0}return p===p2}(globals.Promise),getsThenSynchronously=supportsDescriptors&&(count=0,thenable=Object.defineProperty({},"then",{get:function(){count+=1}}),Promise.resolve(thenable),1===count),BadResolverPromise=function BadResolverPromise(executor){var p=new Promise(executor);executor(3,(function(){})),this.then=p.then,this.constructor=BadResolverPromise};BadResolverPromise.prototype=Promise.prototype,BadResolverPromise.all=Promise.all;var hasBadResolverPromise=valueOrFalseIfThrows((function(){return!!BadResolverPromise.all([1,2])}));if(promiseSupportsSubclassing&&promiseIgnoresNonFunctionThenCallbacks&&promiseRequiresObjectContext&&!promiseResolveBroken&&getsThenSynchronously&&!hasBadResolverPromise||(Promise=PromiseShim,overrideNative(globals,"Promise",PromiseShim)),1!==Promise.all.length){var origAll=Promise.all;overrideNative(Promise,"all",(function all(iterable){return ES.Call(origAll,this,arguments)}))}if(1!==Promise.race.length){var origRace=Promise.race;overrideNative(Promise,"race",(function race(iterable){return ES.Call(origRace,this,arguments)}))}if(1!==Promise.resolve.length){var origResolve=Promise.resolve;overrideNative(Promise,"resolve",(function resolve(x){return ES.Call(origResolve,this,arguments)}))}if(1!==Promise.reject.length){var origReject=Promise.reject;overrideNative(Promise,"reject",(function reject(r){return ES.Call(origReject,this,arguments)}))}ensureEnumerable(Promise,"all"),ensureEnumerable(Promise,"race"),ensureEnumerable(Promise,"resolve"),ensureEnumerable(Promise,"reject"),addDefaultSpecies(Promise)}var testOrder=function(a){var b=keys(_reduce(a,(function(o,k){return o[k]=!0,o}),{}));return a.join(":")===b.join(":")},preservesInsertionOrder=testOrder(["z","a","bb"]),preservesNumericInsertionOrder=testOrder(["z",1,"a","3",2]),s,m;if(supportsDescriptors){var fastkey=function fastkey(key,skipInsertionOrderCheck){return skipInsertionOrderCheck||preservesInsertionOrder?isNullOrUndefined(key)?"^"+ES.ToString(key):"string"==typeof key?"$"+key:"number"==typeof key?preservesNumericInsertionOrder?key:"n"+key:"boolean"==typeof key?"b"+key:null:null},emptyObject=function emptyObject(){return Object.create?Object.create(null):{}},addIterableToMap=function addIterableToMap(MapConstructor,map,iterable){if(isArray(iterable)||Type.string(iterable))_forEach(iterable,(function(entry){if(!ES.TypeIsObject(entry))throw new TypeError("Iterator value "+entry+" is not an entry object");map.set(entry[0],entry[1])}));else if(iterable instanceof MapConstructor)_call(MapConstructor.prototype.forEach,iterable,(function(value,key){map.set(key,value)}));else{var iter,adder;if(!isNullOrUndefined(iterable)){if(adder=map.set,!ES.IsCallable(adder))throw new TypeError("bad map");iter=ES.GetIterator(iterable)}if(void 0!==iter)for(;;){var next=ES.IteratorStep(iter);if(!1===next)break;var nextItem=next.value;try{if(!ES.TypeIsObject(nextItem))throw new TypeError("Iterator value "+nextItem+" is not an entry object");_call(adder,map,nextItem[0],nextItem[1])}catch(e){throw ES.IteratorClose(iter,!0),e}}}},addIterableToSet=function addIterableToSet(SetConstructor,set,iterable){if(isArray(iterable)||Type.string(iterable))_forEach(iterable,(function(value){set.add(value)}));else if(iterable instanceof SetConstructor)_call(SetConstructor.prototype.forEach,iterable,(function(value){set.add(value)}));else{var iter,adder;if(!isNullOrUndefined(iterable)){if(adder=set.add,!ES.IsCallable(adder))throw new TypeError("bad set");iter=ES.GetIterator(iterable)}if(void 0!==iter)for(;;){var next=ES.IteratorStep(iter);if(!1===next)break;var nextValue=next.value;try{_call(adder,set,nextValue)}catch(e){throw ES.IteratorClose(iter,!0),e}}}},collectionShims={Map:function(){var empty={},MapEntry=function MapEntry(key,value){this.key=key,this.value=value,this.next=null,this.prev=null};MapEntry.prototype.isRemoved=function isRemoved(){return this.key===empty};var isMap=function isMap(map){return!!map._es6map},requireMapSlot=function requireMapSlot(map,method){if(!ES.TypeIsObject(map)||!isMap(map))throw new TypeError("Method Map.prototype."+method+" called on incompatible receiver "+ES.ToString(map))},MapIterator=function MapIterator(map,kind){requireMapSlot(map,"[[MapIterator]]"),this.head=map._head,this.i=this.head,this.kind=kind},Map$prototype;addIterator(MapIterator.prototype={next:function next(){var i=this.i,kind=this.kind,head=this.head,result;if(void 0===this.i)return iteratorResult();for(;i.isRemoved()&&i!==head;)i=i.prev;for(;i.next!==head;)if(!(i=i.next).isRemoved())return result="key"===kind?i.key:"value"===kind?i.value:[i.key,i.value],this.i=i,iteratorResult(result);return this.i=void 0,iteratorResult()}});var MapShim=function Map(){if(!(this instanceof Map))throw new TypeError('Constructor Map requires "new"');if(this&&this._es6map)throw new TypeError("Bad construction");var map=emulateES6construct(this,Map,Map$prototype,{_es6map:!0,_head:null,_map:OrigMap?new OrigMap:null,_size:0,_storage:emptyObject()}),head=new MapEntry(null,null);return head.next=head.prev=head,map._head=head,arguments.length>0&&addIterableToMap(Map,map,arguments[0]),map};return Map$prototype=MapShim.prototype,Value.getter(Map$prototype,"size",(function(){if(void 0===this._size)throw new TypeError("size method called on incompatible Map");return this._size})),defineProperties(Map$prototype,{get:function get(key){var entry;requireMapSlot(this,"get");var fkey=fastkey(key,!0);if(null!==fkey)return(entry=this._storage[fkey])?entry.value:void 0;if(this._map)return(entry=origMapGet.call(this._map,key))?entry.value:void 0;for(var head=this._head,i=head;(i=i.next)!==head;)if(ES.SameValueZero(i.key,key))return i.value},has:function has(key){requireMapSlot(this,"has");var fkey=fastkey(key,!0);if(null!==fkey)return void 0!==this._storage[fkey];if(this._map)return origMapHas.call(this._map,key);for(var head=this._head,i=head;(i=i.next)!==head;)if(ES.SameValueZero(i.key,key))return!0;return!1},set:function set(key,value){requireMapSlot(this,"set");var head=this._head,i=head,entry,fkey=fastkey(key,!0);if(null!==fkey){if(void 0!==this._storage[fkey])return this._storage[fkey].value=value,this;entry=this._storage[fkey]=new MapEntry(key,value),i=head.prev}else this._map&&(origMapHas.call(this._map,key)?origMapGet.call(this._map,key).value=value:(entry=new MapEntry(key,value),origMapSet.call(this._map,key,entry),i=head.prev));for(;(i=i.next)!==head;)if(ES.SameValueZero(i.key,key))return i.value=value,this;return entry=entry||new MapEntry(key,value),ES.SameValue(-0,key)&&(entry.key=0),entry.next=this._head,entry.prev=this._head.prev,entry.prev.next=entry,entry.next.prev=entry,this._size+=1,this},delete:function(key){requireMapSlot(this,"delete");var head=this._head,i=head,fkey=fastkey(key,!0);if(null!==fkey){if(void 0===this._storage[fkey])return!1;i=this._storage[fkey].prev,delete this._storage[fkey]}else if(this._map){if(!origMapHas.call(this._map,key))return!1;i=origMapGet.call(this._map,key).prev,origMapDelete.call(this._map,key)}for(;(i=i.next)!==head;)if(ES.SameValueZero(i.key,key))return i.key=empty,i.value=empty,i.prev.next=i.next,i.next.prev=i.prev,this._size-=1,!0;return!1},clear:function clear(){requireMapSlot(this,"clear"),this._map=OrigMap?new OrigMap:null,this._size=0,this._storage=emptyObject();for(var head=this._head,i=head,p=i.next;(i=p)!==head;)i.key=empty,i.value=empty,p=i.next,i.next=i.prev=head;head.next=head.prev=head},keys:function keys(){return requireMapSlot(this,"keys"),new MapIterator(this,"key")},values:function values(){return requireMapSlot(this,"values"),new MapIterator(this,"value")},entries:function entries(){return requireMapSlot(this,"entries"),new MapIterator(this,"key+value")},forEach:function forEach(callback){requireMapSlot(this,"forEach");for(var context=arguments.length>1?arguments[1]:null,it=this.entries(),entry=it.next();!entry.done;entry=it.next())context?_call(callback,context,entry.value[1],entry.value[0],this):callback(entry.value[1],entry.value[0],this)}}),addIterator(Map$prototype,Map$prototype.entries),MapShim}(),Set:function(){var isSet=function isSet(set){return set._es6set&&void 0!==set._storage},requireSetSlot=function requireSetSlot(set,method){if(!ES.TypeIsObject(set)||!isSet(set))throw new TypeError("Set.prototype."+method+" called on incompatible receiver "+ES.ToString(set))},Set$prototype,SetShim=function Set(){if(!(this instanceof Set))throw new TypeError('Constructor Set requires "new"');if(this&&this._es6set)throw new TypeError("Bad construction");var set=emulateES6construct(this,Set,Set$prototype,{_es6set:!0,"[[SetData]]":null,_storage:emptyObject()});if(!set._es6set)throw new TypeError("bad set");return arguments.length>0&&addIterableToSet(Set,set,arguments[0]),set};Set$prototype=SetShim.prototype;var decodeKey=function(key){var k=key;if("^null"===k)return null;if("^undefined"!==k){var first=k.charAt(0);return"$"===first?_strSlice(k,1):"n"===first?+_strSlice(k,1):"b"===first?"btrue"===k:+k}},ensureMap=function ensureMap(set){if(!set["[[SetData]]"]){var m=new collectionShims.Map;set["[[SetData]]"]=m,_forEach(keys(set._storage),(function(key){var k=decodeKey(key);m.set(k,k)})),set["[[SetData]]"]=m}set._storage=null};return Value.getter(SetShim.prototype,"size",(function(){return requireSetSlot(this,"size"),this._storage?keys(this._storage).length:(ensureMap(this),this["[[SetData]]"].size)})),defineProperties(SetShim.prototype,{has:function has(key){var fkey;return requireSetSlot(this,"has"),this._storage&&null!==(fkey=fastkey(key))?!!this._storage[fkey]:(ensureMap(this),this["[[SetData]]"].has(key))},add:function add(key){var fkey;return requireSetSlot(this,"add"),this._storage&&null!==(fkey=fastkey(key))?(this._storage[fkey]=!0,this):(ensureMap(this),this["[[SetData]]"].set(key,key),this)},delete:function(key){var fkey;if(requireSetSlot(this,"delete"),this._storage&&null!==(fkey=fastkey(key))){var hasFKey=_hasOwnProperty(this._storage,fkey);return delete this._storage[fkey]&&hasFKey}return ensureMap(this),this["[[SetData]]"].delete(key)},clear:function clear(){requireSetSlot(this,"clear"),this._storage&&(this._storage=emptyObject()),this["[[SetData]]"]&&this["[[SetData]]"].clear()},values:function values(){return requireSetSlot(this,"values"),ensureMap(this),this["[[SetData]]"].values()},entries:function entries(){return requireSetSlot(this,"entries"),ensureMap(this),this["[[SetData]]"].entries()},forEach:function forEach(callback){requireSetSlot(this,"forEach");var context=arguments.length>1?arguments[1]:null,entireSet=this;ensureMap(entireSet),this["[[SetData]]"].forEach((function(value,key){context?_call(callback,context,key,key,entireSet):callback(key,key,entireSet)}))}}),defineProperty(SetShim.prototype,"keys",SetShim.prototype.values,!0),addIterator(SetShim.prototype,SetShim.prototype.values),SetShim}()};if(globals.Map||globals.Set){var mapAcceptsArguments=valueOrFalseIfThrows((function(){return 2===new Map([[1,2]]).get(1)}));mapAcceptsArguments||(globals.Map=function Map(){if(!(this instanceof Map))throw new TypeError('Constructor Map requires "new"');var m=new OrigMap;return arguments.length>0&&addIterableToMap(Map,m,arguments[0]),delete m.constructor,Object.setPrototypeOf(m,globals.Map.prototype),m},globals.Map.prototype=create(OrigMap.prototype),defineProperty(globals.Map.prototype,"constructor",globals.Map,!0),Value.preserveToString(globals.Map,OrigMap));var testMap=new Map,mapUsesSameValueZero=((m=new Map([[1,0],[2,0],[3,0],[4,0]])).set(-0,m),m.get(0)===m&&m.get(-0)===m&&m.has(0)&&m.has(-0)),mapSupportsChaining=testMap.set(1,2)===testMap;mapUsesSameValueZero&&mapSupportsChaining||overrideNative(Map.prototype,"set",(function set(k,v){return _call(origMapSet,this,0===k?0:k,v),this})),mapUsesSameValueZero||(defineProperties(Map.prototype,{get:function get(k){return _call(origMapGet,this,0===k?0:k)},has:function has(k){return _call(origMapHas,this,0===k?0:k)}},!0),Value.preserveToString(Map.prototype.get,origMapGet),Value.preserveToString(Map.prototype.has,origMapHas));var testSet=new Set,setUsesSameValueZero=((s=testSet).delete(0),s.add(-0),!s.has(0)),setSupportsChaining=testSet.add(1)===testSet;if(!setUsesSameValueZero||!setSupportsChaining){var origSetAdd=Set.prototype.add;Set.prototype.add=function add(v){return _call(origSetAdd,this,0===v?0:v),this},Value.preserveToString(Set.prototype.add,origSetAdd)}if(!setUsesSameValueZero){var origSetHas=Set.prototype.has;Set.prototype.has=function has(v){return _call(origSetHas,this,0===v?0:v)},Value.preserveToString(Set.prototype.has,origSetHas);var origSetDel=Set.prototype.delete;Set.prototype.delete=function SetDelete(v){return _call(origSetDel,this,0===v?0:v)},Value.preserveToString(Set.prototype.delete,origSetDel)}var mapSupportsSubclassing=supportsSubclassing(globals.Map,(function(M){var m=new M([]);return m.set(42,42),m instanceof M})),mapFailsToSupportSubclassing=Object.setPrototypeOf&&!mapSupportsSubclassing,mapRequiresNew=function(){try{return!(globals.Map()instanceof globals.Map)}catch(e){return e instanceof TypeError}}();0===globals.Map.length&&!mapFailsToSupportSubclassing&&mapRequiresNew||(globals.Map=function Map(){if(!(this instanceof Map))throw new TypeError('Constructor Map requires "new"');var m=new OrigMap;return arguments.length>0&&addIterableToMap(Map,m,arguments[0]),delete m.constructor,Object.setPrototypeOf(m,Map.prototype),m},globals.Map.prototype=OrigMap.prototype,defineProperty(globals.Map.prototype,"constructor",globals.Map,!0),Value.preserveToString(globals.Map,OrigMap));var setSupportsSubclassing=supportsSubclassing(globals.Set,(function(S){var s=new S([]);return s.add(42,42),s instanceof S})),setFailsToSupportSubclassing=Object.setPrototypeOf&&!setSupportsSubclassing,setRequiresNew=function(){try{return!(globals.Set()instanceof globals.Set)}catch(e){return e instanceof TypeError}}();if(0!==globals.Set.length||setFailsToSupportSubclassing||!setRequiresNew){var OrigSet=globals.Set;globals.Set=function Set(){if(!(this instanceof Set))throw new TypeError('Constructor Set requires "new"');var s=new OrigSet;return arguments.length>0&&addIterableToSet(Set,s,arguments[0]),delete s.constructor,Object.setPrototypeOf(s,Set.prototype),s},globals.Set.prototype=OrigSet.prototype,defineProperty(globals.Set.prototype,"constructor",globals.Set,!0),Value.preserveToString(globals.Set,OrigSet)}var newMap=new globals.Map,mapIterationThrowsStopIterator=!valueOrFalseIfThrows((function(){return newMap.keys().next().done}));if(("function"!=typeof globals.Map.prototype.clear||0!==(new globals.Set).size||0!==newMap.size||"function"!=typeof globals.Map.prototype.keys||"function"!=typeof globals.Set.prototype.keys||"function"!=typeof globals.Map.prototype.forEach||"function"!=typeof globals.Set.prototype.forEach||isCallableWithoutNew(globals.Map)||isCallableWithoutNew(globals.Set)||"function"!=typeof newMap.keys().next||mapIterationThrowsStopIterator||!mapSupportsSubclassing)&&defineProperties(globals,{Map:collectionShims.Map,Set:collectionShims.Set},!0),globals.Set.prototype.keys!==globals.Set.prototype.values&&defineProperty(globals.Set.prototype,"keys",globals.Set.prototype.values,!0),addIterator(Object.getPrototypeOf((new globals.Map).keys())),addIterator(Object.getPrototypeOf((new globals.Set).keys())),functionsHaveNames&&"has"!==globals.Set.prototype.has.name){var anonymousSetHas=globals.Set.prototype.has;overrideNative(globals.Set.prototype,"has",(function has(key){return _call(anonymousSetHas,this,key)}))}}defineProperties(globals,collectionShims),addDefaultSpecies(globals.Map),addDefaultSpecies(globals.Set)}var throwUnlessTargetIsObject=function throwUnlessTargetIsObject(target){if(!ES.TypeIsObject(target))throw new TypeError("target must be an object")},ReflectShims={apply:function apply(){return ES.Call(ES.Call,null,arguments)},construct:function construct(constructor,args){if(!ES.IsConstructor(constructor))throw new TypeError("First argument must be a constructor.");var newTarget=arguments.length>2?arguments[2]:constructor;if(!ES.IsConstructor(newTarget))throw new TypeError("new.target must be a constructor.");return ES.Construct(constructor,args,newTarget,"internal")},deleteProperty:function deleteProperty(target,key){if(throwUnlessTargetIsObject(target),supportsDescriptors){var desc=Object.getOwnPropertyDescriptor(target,key);if(desc&&!desc.configurable)return!1}return delete target[key]},has:function has(target,key){return throwUnlessTargetIsObject(target),key in target}};Object.getOwnPropertyNames&&Object.assign(ReflectShims,{ownKeys:function ownKeys(target){throwUnlessTargetIsObject(target);var keys=Object.getOwnPropertyNames(target);return ES.IsCallable(Object.getOwnPropertySymbols)&&_pushApply(keys,Object.getOwnPropertySymbols(target)),keys}});var callAndCatchException=function ConvertExceptionToBoolean(func){return!throwsError(func)};if(Object.preventExtensions&&Object.assign(ReflectShims,{isExtensible:function isExtensible(target){return throwUnlessTargetIsObject(target),Object.isExtensible(target)},preventExtensions:function preventExtensions(target){return throwUnlessTargetIsObject(target),callAndCatchException((function(){Object.preventExtensions(target)}))}}),supportsDescriptors){var internalGet=function get(target,key,receiver){var desc=Object.getOwnPropertyDescriptor(target,key);if(!desc){var parent=Object.getPrototypeOf(target);if(null===parent)return;return internalGet(parent,key,receiver)}return"value"in desc?desc.value:desc.get?ES.Call(desc.get,receiver):void 0},internalSet=function set(target,key,value,receiver){var desc=Object.getOwnPropertyDescriptor(target,key),existingDesc;if(!desc){var parent=Object.getPrototypeOf(target);if(null!==parent)return internalSet(parent,key,value,receiver);desc={value:void 0,writable:!0,enumerable:!0,configurable:!0}}return"value"in desc?!!desc.writable&&(!!ES.TypeIsObject(receiver)&&(Object.getOwnPropertyDescriptor(receiver,key)?Reflect.defineProperty(receiver,key,{value:value}):Reflect.defineProperty(receiver,key,{value:value,writable:!0,enumerable:!0,configurable:!0}))):!!desc.set&&(_call(desc.set,receiver,value),!0)};Object.assign(ReflectShims,{defineProperty:function defineProperty(target,propertyKey,attributes){return throwUnlessTargetIsObject(target),callAndCatchException((function(){Object.defineProperty(target,propertyKey,attributes)}))},getOwnPropertyDescriptor:function getOwnPropertyDescriptor(target,propertyKey){return throwUnlessTargetIsObject(target),Object.getOwnPropertyDescriptor(target,propertyKey)},get:function get(target,key){throwUnlessTargetIsObject(target);var receiver=arguments.length>2?arguments[2]:target;return internalGet(target,key,receiver)},set:function set(target,key,value){throwUnlessTargetIsObject(target);var receiver=arguments.length>3?arguments[3]:target;return internalSet(target,key,value,receiver)}})}if(Object.getPrototypeOf){var objectDotGetPrototypeOf=Object.getPrototypeOf;ReflectShims.getPrototypeOf=function getPrototypeOf(target){return throwUnlessTargetIsObject(target),objectDotGetPrototypeOf(target)}}if(Object.setPrototypeOf&&ReflectShims.getPrototypeOf){var willCreateCircularPrototype=function(object,lastProto){for(var proto=lastProto;proto;){if(object===proto)return!0;proto=ReflectShims.getPrototypeOf(proto)}return!1};Object.assign(ReflectShims,{setPrototypeOf:function setPrototypeOf(object,proto){if(throwUnlessTargetIsObject(object),null!==proto&&!ES.TypeIsObject(proto))throw new TypeError("proto must be an object or null");return proto===Reflect.getPrototypeOf(object)||!(Reflect.isExtensible&&!Reflect.isExtensible(object))&&(!willCreateCircularPrototype(object,proto)&&(Object.setPrototypeOf(object,proto),!0))}})}var defineOrOverrideReflectProperty=function(key,shim){var acceptsPrimitives;ES.IsCallable(globals.Reflect[key])?valueOrFalseIfThrows((function(){return globals.Reflect[key](1),globals.Reflect[key](NaN),globals.Reflect[key](!0),!0}))&&overrideNative(globals.Reflect,key,shim):defineProperty(globals.Reflect,key,shim)};Object.keys(ReflectShims).forEach((function(key){defineOrOverrideReflectProperty(key,ReflectShims[key])}));var originalReflectGetProto=globals.Reflect.getPrototypeOf;if(functionsHaveNames&&originalReflectGetProto&&"getPrototypeOf"!==originalReflectGetProto.name&&overrideNative(globals.Reflect,"getPrototypeOf",(function getPrototypeOf(target){return _call(originalReflectGetProto,globals.Reflect,target)})),globals.Reflect.setPrototypeOf&&valueOrFalseIfThrows((function(){return globals.Reflect.setPrototypeOf(1,{}),!0}))&&overrideNative(globals.Reflect,"setPrototypeOf",ReflectShims.setPrototypeOf),globals.Reflect.defineProperty&&(valueOrFalseIfThrows((function(){var basic=!globals.Reflect.defineProperty(1,"test",{value:1}),extensible="function"!=typeof Object.preventExtensions||!globals.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return basic&&extensible}))||overrideNative(globals.Reflect,"defineProperty",ReflectShims.defineProperty)),globals.Reflect.construct&&(valueOrFalseIfThrows((function(){var F=function F(){};return globals.Reflect.construct((function(){}),[],F)instanceof F}))||overrideNative(globals.Reflect,"construct",ReflectShims.construct)),"Invalid Date"!==String(new Date(NaN))){var dateToString=Date.prototype.toString,shimmedDateToString=function toString(){var valueOf=+this;return valueOf!=valueOf?"Invalid Date":ES.Call(dateToString,this)};overrideNative(Date.prototype,"toString",shimmedDateToString)}var stringHTMLshims={anchor:function anchor(name){return ES.CreateHTML(this,"a","name",name)},big:function big(){return ES.CreateHTML(this,"big","","")},blink:function blink(){return ES.CreateHTML(this,"blink","","")},bold:function bold(){return ES.CreateHTML(this,"b","","")},fixed:function fixed(){return ES.CreateHTML(this,"tt","","")},fontcolor:function fontcolor(color){return ES.CreateHTML(this,"font","color",color)},fontsize:function fontsize(size){return ES.CreateHTML(this,"font","size",size)},italics:function italics(){return ES.CreateHTML(this,"i","","")},link:function link(url){return ES.CreateHTML(this,"a","href",url)},small:function small(){return ES.CreateHTML(this,"small","","")},strike:function strike(){return ES.CreateHTML(this,"strike","","")},sub:function sub(){return ES.CreateHTML(this,"sub","","")},sup:function sub(){return ES.CreateHTML(this,"sup","","")}};_forEach(Object.keys(stringHTMLshims),(function(key){var method=String.prototype[key],shouldOverwrite=!1;if(ES.IsCallable(method)){var output=_call(method,"",' " '),quotesCount=_concat([],output.match(/"/g)).length;shouldOverwrite=output!==output.toLowerCase()||quotesCount>2}else shouldOverwrite=!0;shouldOverwrite&&overrideNative(String.prototype,key,stringHTMLshims[key])}));var JSONstringifiesSymbols=function(){if(!hasSymbols)return!1;var stringify="object"==typeof JSON&&"function"==typeof JSON.stringify?JSON.stringify:null;if(!stringify)return!1;if(void 0!==stringify(Symbol()))return!0;if("[null]"!==stringify([Symbol()]))return!0;var obj={a:Symbol()};return obj[Symbol()]=!0,"{}"!==stringify(obj)}(),JSONstringifyAcceptsObjectSymbol=valueOrFalseIfThrows((function(){return!hasSymbols||"{}"===JSON.stringify(Object(Symbol()))&&"[{}]"===JSON.stringify([Object(Symbol())])}));if(JSONstringifiesSymbols||!JSONstringifyAcceptsObjectSymbol){var origStringify=JSON.stringify;overrideNative(JSON,"stringify",(function stringify(value){if("symbol"!=typeof value){var replacer;arguments.length>1&&(replacer=arguments[1]);var args=[value];if(isArray(replacer))args.push(replacer);else{var replaceFn=ES.IsCallable(replacer)?replacer:null,wrappedReplacer=function(key,val){var parsedValue=replaceFn?_call(replaceFn,this,key,val):val;if("symbol"!=typeof parsedValue)return Type.symbol(parsedValue)?assignTo({})(parsedValue):parsedValue};args.push(wrappedReplacer)}return arguments.length>2&&args.push(arguments[2]),origStringify.apply(this,args)}}))}return globals})),
/**
 * https://github.com/csnover/TraceKit
 * @license MIT
 * @namespace TraceKit
 */
function(window,undefined){if(window){var TraceKit={},_oldTraceKit=window.TraceKit,_slice=[].slice,UNKNOWN_FUNCTION="?",ERROR_TYPES_RE=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;TraceKit.noConflict=function noConflict(){return window.TraceKit=_oldTraceKit,TraceKit},TraceKit.wrap=function traceKitWrapper(func){function wrapped(){try{return func.apply(this,arguments)}catch(e){throw TraceKit.report(e),e}}return wrapped},TraceKit.report=function reportModuleWrapper(){var handlers=[],lastException=null,lastExceptionStack=null,_oldOnerrorHandler,_onErrorHandlerInstalled;function subscribe(handler){installGlobalHandler(),handlers.push(handler)}function unsubscribe(handler){for(var i=handlers.length-1;i>=0;--i)handlers[i]===handler&&handlers.splice(i,1);0===handlers.length&&(window.onerror=_oldOnerrorHandler,_onErrorHandlerInstalled=!1)}function notifyHandlers(stack,isWindowError,error){var exception=null;if(!isWindowError||TraceKit.collectWindowErrors){for(var i in handlers)if(_has(handlers,i))try{handlers[i](stack,isWindowError,error)}catch(inner){exception=inner}if(exception)throw exception}}function traceKitWindowOnError(message,url,lineNo,columnNo,errorObj){var stack=null;if(lastExceptionStack)TraceKit.computeStackTrace.augmentStackTraceWithInitialElement(lastExceptionStack,url,lineNo,message),processLastException();else if(errorObj)notifyHandlers(stack=TraceKit.computeStackTrace(errorObj),!0,errorObj);else{var location={url:url,line:lineNo,column:columnNo},name,msg=message;if("[object String]"==={}.toString.call(message)){var groups=message.match(ERROR_TYPES_RE);groups&&(name=groups[1],msg=groups[2])}location.func=TraceKit.computeStackTrace.guessFunctionName(location.url,location.line),location.context=TraceKit.computeStackTrace.gatherContext(location.url,location.line),notifyHandlers(stack={name:name,message:msg,mode:"onerror",stack:[location]},!0,null)}return!!_oldOnerrorHandler&&_oldOnerrorHandler.apply(this,arguments)}function installGlobalHandler(){!0!==_onErrorHandlerInstalled&&(_oldOnerrorHandler=window.onerror,window.onerror=traceKitWindowOnError,_onErrorHandlerInstalled=!0)}function processLastException(){var _lastExceptionStack=lastExceptionStack,_lastException=lastException;lastExceptionStack=null,lastException=null,notifyHandlers(_lastExceptionStack,!1,_lastException)}function report(ex){if(lastExceptionStack){if(lastException===ex)return;processLastException()}var stack=TraceKit.computeStackTrace(ex);throw lastExceptionStack=stack,lastException=ex,setTimeout((function(){lastException===ex&&processLastException()}),stack.incomplete?2e3:0),ex}return report.subscribe=subscribe,report.unsubscribe=unsubscribe,report}(),TraceKit.computeStackTrace=function computeStackTraceWrapper(){var debug=!1,sourceCache={};function loadSource(url){if(!TraceKit.remoteFetching)return"";try{var getXHR,request=function(){try{return new window.XMLHttpRequest}catch(e){return new window.ActiveXObject("Microsoft.XMLHTTP")}}();return request.open("GET",url,!1),request.send(""),request.responseText}catch(e){return""}}function getSource(url){if("string"!=typeof url)return[];if(!_has(sourceCache,url)){var source="",domain="";try{domain=window.document.domain}catch(e){}var match=/(.*)\:\/\/([^:\/]+)([:\d]*)\/{0,1}([\s\S]*)/.exec(url);match&&match[2]===domain&&(source=loadSource(url)),sourceCache[url]=source?source.split("\n"):[]}return sourceCache[url]}function guessFunctionName(url,lineNo){var reFunctionArgNames=/function ([^(]*)\(([^)]*)\)/,reGuessFunction=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,line="",maxLines=10,source=getSource(url),m;if(!source.length)return"?";for(var i=0;i<10;++i)if(!_isUndefined(line=source[lineNo-i]+line)){if(m=reGuessFunction.exec(line))return m[1];if(m=reFunctionArgNames.exec(line))return m[1]}return"?"}function gatherContext(url,line){var source=getSource(url);if(!source.length)return null;var context=[],linesBefore=Math.floor(TraceKit.linesOfContext/2),linesAfter=linesBefore+TraceKit.linesOfContext%2,start=Math.max(0,line-linesBefore-1),end=Math.min(source.length,line+linesAfter-1);line-=1;for(var i=start;i<end;++i)_isUndefined(source[i])||context.push(source[i]);return context.length>0?context:null}function escapeRegExp(text){return text.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function escapeCodeAsRegExpForMatchingInsideHTML(body){return escapeRegExp(body).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function findSourceInUrls(re,urls){for(var source,m,i=0,j=urls.length;i<j;++i)if((source=getSource(urls[i])).length&&(source=source.join("\n"),m=re.exec(source)))return{url:urls[i],line:source.substring(0,m.index).split("\n").length,column:m.index-source.lastIndexOf("\n",m.index)-1};return null}function findSourceInLine(fragment,url,line){var source=getSource(url),re=new RegExp("\\b"+escapeRegExp(fragment)+"\\b"),m;return line-=1,source&&source.length>line&&(m=re.exec(source[line]))?m.index:null}function findSourceByFunctionBody(func){if(!_isUndefined(window&&window.document)){for(var urls=[window.location.href],scripts=window.document.getElementsByTagName("script"),body,code=""+func,codeRE=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,eventRE=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,re,parts,result,i=0;i<scripts.length;++i){var script=scripts[i];script.src&&urls.push(script.src)}if(parts=codeRE.exec(code)){var name=parts[1]?"\\s+"+parts[1]:"",args=parts[2].split(",").join("\\s*,\\s*");body=escapeRegExp(parts[3]).replace(/;$/,";?"),re=new RegExp("function"+name+"\\s*\\(\\s*"+args+"\\s*\\)\\s*{\\s*"+body+"\\s*}")}else re=new RegExp(escapeRegExp(code).replace(/\s+/g,"\\s+"));if(result=findSourceInUrls(re,urls))return result;if(parts=eventRE.exec(code)){var event=parts[1];if(body=escapeCodeAsRegExpForMatchingInsideHTML(parts[2]),result=findSourceInUrls(re=new RegExp("on"+event+"=[\\'\"]\\s*"+body+"\\s*[\\'\"]","i"),urls[0]))return result;if(result=findSourceInUrls(re=new RegExp(body),urls))return result}return null}}function computeStackTraceFromStackProp(ex){if(!ex.stack)return null;for(var chrome=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,gecko=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,winjs=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,isEval,geckoEval=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,chromeEval=/\((\S*)(?::(\d+))(?::(\d+))\)/,lines=ex.stack.split("\n"),stack=[],submatch,parts,element,reference=/^(.*) is undefined$/.exec(ex.message),i=0,j=lines.length;i<j;++i){if(parts=chrome.exec(lines[i])){var isNative=parts[2]&&0===parts[2].indexOf("native");(isEval=parts[2]&&0===parts[2].indexOf("eval"))&&(submatch=chromeEval.exec(parts[2]))&&(parts[2]=submatch[1],parts[3]=submatch[2],parts[4]=submatch[3]),element={url:isNative?null:parts[2],func:parts[1]||"?",args:isNative?[parts[2]]:[],line:parts[3]?+parts[3]:null,column:parts[4]?+parts[4]:null}}else if(parts=winjs.exec(lines[i]))element={url:parts[2],func:parts[1]||"?",args:[],line:+parts[3],column:parts[4]?+parts[4]:null};else{if(!(parts=gecko.exec(lines[i])))continue;(isEval=parts[3]&&parts[3].indexOf(" > eval")>-1)&&(submatch=geckoEval.exec(parts[3]))?(parts[3]=submatch[1],parts[4]=submatch[2],parts[5]=null):0!==i||parts[5]||_isUndefined(ex.columnNumber)||(stack[0].column=ex.columnNumber+1),element={url:parts[3],func:parts[1]||"?",args:parts[2]?parts[2].split(","):[],line:parts[4]?+parts[4]:null,column:parts[5]?+parts[5]:null}}!element.func&&element.line&&(element.func=guessFunctionName(element.url,element.line)),element.context=element.line?gatherContext(element.url,element.line):null,stack.push(element)}return stack.length?(stack[0]&&stack[0].line&&!stack[0].column&&reference&&(stack[0].column=findSourceInLine(reference[1],stack[0].url,stack[0].line)),{mode:"stack",name:ex.name,message:ex.message,stack:stack}):null}function computeStackTraceFromStacktraceProp(ex){var stacktrace=ex.stacktrace;if(stacktrace){for(var opera10Regex=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,opera11Regex=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i,lines=stacktrace.split("\n"),stack=[],parts,line=0;line<lines.length;line+=2){var element=null;if((parts=opera10Regex.exec(lines[line]))?element={url:parts[2],line:+parts[1],column:null,func:parts[3],args:[]}:(parts=opera11Regex.exec(lines[line]))&&(element={url:parts[6],line:+parts[1],column:+parts[2],func:parts[3]||parts[4],args:parts[5]?parts[5].split(","):[]}),element){if(!element.func&&element.line&&(element.func=guessFunctionName(element.url,element.line)),element.line)try{element.context=gatherContext(element.url,element.line)}catch(exc){}element.context||(element.context=[lines[line+1]]),stack.push(element)}}return stack.length?{mode:"stacktrace",name:ex.name,message:ex.message,stack:stack}:null}}function computeStackTraceFromOperaMultiLineMessage(ex){var lines=ex.message.split("\n");if(lines.length<4)return null;var lineRE1=/^\s*Line (\d+) of linked script ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,lineRE2=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,lineRE3=/^\s*Line (\d+) of function script\s*$/i,stack=[],scripts=window&&window.document&&window.document.getElementsByTagName("script"),inlineScriptBlocks=[],parts;for(var s in scripts)_has(scripts,s)&&!scripts[s].src&&inlineScriptBlocks.push(scripts[s]);for(var line=2;line<lines.length;line+=2){var item=null;if(parts=lineRE1.exec(lines[line]))item={url:parts[2],func:parts[3],args:[],line:+parts[1],column:null};else if(parts=lineRE2.exec(lines[line])){item={url:parts[3],func:parts[4],args:[],line:+parts[1],column:null};var relativeLine=+parts[1],script=inlineScriptBlocks[parts[2]-1];if(script){var source=getSource(item.url);if(source){var pos=(source=source.join("\n")).indexOf(script.innerText);pos>=0&&(item.line=relativeLine+source.substring(0,pos).split("\n").length)}}}else if(parts=lineRE3.exec(lines[line])){var url=window.location.href.replace(/#.*$/,""),re,src=findSourceInUrls(new RegExp(escapeCodeAsRegExpForMatchingInsideHTML(lines[line+1])),[url]);item={url:url,func:"",args:[],line:src?src.line:parts[1],column:null}}if(item){item.func||(item.func=guessFunctionName(item.url,item.line));var context=gatherContext(item.url,item.line),midline=context?context[Math.floor(context.length/2)]:null;context&&midline.replace(/^\s*/,"")===lines[line+1].replace(/^\s*/,"")?item.context=context:item.context=[lines[line+1]],stack.push(item)}}return stack.length?{mode:"multiline",name:ex.name,message:lines[0],stack:stack}:null}function augmentStackTraceWithInitialElement(stackInfo,url,lineNo,message){var initial={url:url,line:lineNo};if(initial.url&&initial.line){stackInfo.incomplete=!1,initial.func||(initial.func=guessFunctionName(initial.url,initial.line)),initial.context||(initial.context=gatherContext(initial.url,initial.line));var reference=/ '([^']+)' /.exec(message);if(reference&&(initial.column=findSourceInLine(reference[1],initial.url,initial.line)),stackInfo.stack.length>0&&stackInfo.stack[0].url===initial.url){if(stackInfo.stack[0].line===initial.line)return!1;if(!stackInfo.stack[0].line&&stackInfo.stack[0].func===initial.func)return stackInfo.stack[0].line=initial.line,stackInfo.stack[0].context=initial.context,!1}return stackInfo.stack.unshift(initial),stackInfo.partial=!0,!0}return stackInfo.incomplete=!0,!1}function computeStackTraceByWalkingCallerChain(ex,depth){for(var functionName=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,stack=[],funcs={},recursion=!1,parts,item,source,curr=computeStackTraceByWalkingCallerChain.caller;curr&&!recursion;curr=curr.caller)if(curr!==computeStackTrace&&curr!==TraceKit.report){if(item={url:null,func:"?",args:[],line:null,column:null},curr.name?item.func=curr.name:(parts=functionName.exec(curr.toString()))&&(item.func=parts[1]),void 0===item.func)try{item.func=parts.input.substring(0,parts.input.indexOf("{"))}catch(e){}if(source=findSourceByFunctionBody(curr)){item.url=source.url,item.line=source.line,"?"===item.func&&(item.func=guessFunctionName(item.url,item.line));var reference=/ '([^']+)' /.exec(ex.message||ex.description);reference&&(item.column=findSourceInLine(reference[1],source.url,source.line))}funcs[""+curr]?recursion=!0:funcs[""+curr]=!0,stack.push(item)}depth&&stack.splice(0,depth);var result={mode:"callers",name:ex.name,message:ex.message,stack:stack};return augmentStackTraceWithInitialElement(result,ex.sourceURL||ex.fileName,ex.line||ex.lineNumber,ex.message||ex.description),result}function computeStackTrace(ex,depth){var stack=null;depth=null==depth?0:+depth;try{if(stack=computeStackTraceFromStacktraceProp(ex))return stack}catch(e){0}try{if(stack=computeStackTraceFromStackProp(ex))return stack}catch(e){0}try{if(stack=computeStackTraceFromOperaMultiLineMessage(ex))return stack}catch(e){0}try{if(stack=computeStackTraceByWalkingCallerChain(ex,depth+1))return stack}catch(e){0}return{name:ex.name,message:ex.message,mode:"failed"}}function computeStackTraceOfCaller(depth){depth=1+(null==depth?0:+depth);try{throw new Error}catch(ex){return computeStackTrace(ex,depth+1)}}return computeStackTrace.augmentStackTraceWithInitialElement=augmentStackTraceWithInitialElement,computeStackTrace.computeStackTraceFromStackProp=computeStackTraceFromStackProp,computeStackTrace.guessFunctionName=guessFunctionName,computeStackTrace.gatherContext=gatherContext,computeStackTrace.ofCaller=computeStackTraceOfCaller,computeStackTrace.getSource=getSource,computeStackTrace}(),TraceKit.extendToAsynchronousCallbacks=function(){var _helper=function _helper(fnName){var originalFn=window[fnName];window[fnName]=function traceKitAsyncExtension(){var args=_slice.call(arguments),originalCallback=args[0];return"function"==typeof originalCallback&&(args[0]=TraceKit.wrap(originalCallback)),originalFn.apply?originalFn.apply(this,args):originalFn(args[0],args[1])}};_helper("setTimeout"),_helper("setInterval")},TraceKit.remoteFetching||(TraceKit.remoteFetching=!0),TraceKit.collectWindowErrors||(TraceKit.collectWindowErrors=!0),(!TraceKit.linesOfContext||TraceKit.linesOfContext<1)&&(TraceKit.linesOfContext=11),"function"==typeof define&&define.amd?define("TraceKit",[],TraceKit):"undefined"!=typeof module&&module.exports&&window.module!==module?module.exports=TraceKit:window.TraceKit=TraceKit}function _has(object,key){return Object.prototype.hasOwnProperty.call(object,key)}function _isUndefined(what){return void 0===what}}("undefined"!=typeof window?window:global),function(root,factory){"function"==typeof define&&define.amd?define("exceptionless",["require","exports","TraceKit"],factory):"object"==typeof exports?module.exports=factory(require,exports,require("TraceKit")):root.exceptionless=factory(require,exports,root.TraceKit)}(this,(function(require,exports,TraceKit){if(!exports)var exports={};var __extends=this&&this.__extends||(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),extendStatics;Object.defineProperty(exports,"__esModule",{value:!0});var DefaultLastReferenceIdManager=function(){function DefaultLastReferenceIdManager(){this._lastReferenceId=null}return DefaultLastReferenceIdManager.prototype.getLast=function(){return this._lastReferenceId},DefaultLastReferenceIdManager.prototype.clearLast=function(){this._lastReferenceId=null},DefaultLastReferenceIdManager.prototype.setLast=function(eventId){this._lastReferenceId=eventId},DefaultLastReferenceIdManager}();exports.DefaultLastReferenceIdManager=DefaultLastReferenceIdManager;var ConsoleLog=function(){function ConsoleLog(){}return ConsoleLog.prototype.trace=function(message){this.log("debug",message)},ConsoleLog.prototype.info=function(message){this.log("info",message)},ConsoleLog.prototype.warn=function(message){this.log("warn",message)},ConsoleLog.prototype.error=function(message){this.log("error",message)},ConsoleLog.prototype.log=function(level,message){if(console){var msg="["+level+"] Exceptionless: "+message;console[level]?console[level](msg):console.log&&console.log(msg)}},ConsoleLog}();exports.ConsoleLog=ConsoleLog;var NullLog=function(){function NullLog(){}return NullLog.prototype.trace=function(message){},NullLog.prototype.info=function(message){},NullLog.prototype.warn=function(message){},NullLog.prototype.error=function(message){},NullLog}();exports.NullLog=NullLog;var HeartbeatPlugin=function(){function HeartbeatPlugin(heartbeatInterval){void 0===heartbeatInterval&&(heartbeatInterval=3e4),this.priority=100,this.name="HeartbeatPlugin",this._interval=heartbeatInterval}return HeartbeatPlugin.prototype.run=function(context,next){clearInterval(this._intervalId);var user=context.event.data["@user"];user&&user.identity&&(this._intervalId=setInterval((function(){return context.client.submitSessionHeartbeat(user.identity)}),this._interval)),next&&next()},HeartbeatPlugin}();exports.HeartbeatPlugin=HeartbeatPlugin;var ReferenceIdPlugin=function(){function ReferenceIdPlugin(){this.priority=20,this.name="ReferenceIdPlugin"}return ReferenceIdPlugin.prototype.run=function(context,next){context.event.reference_id&&0!==context.event.reference_id.length||"error"!==context.event.type||(context.event.reference_id=Utils.guid().replace("-","").substring(0,10)),next&&next()},ReferenceIdPlugin}();exports.ReferenceIdPlugin=ReferenceIdPlugin;var EventPluginContext=function(){function EventPluginContext(client,event,contextData){this.client=client,this.event=event,this.contextData=contextData||new ContextData}return Object.defineProperty(EventPluginContext.prototype,"log",{get:function(){return this.client.config.log},enumerable:!0,configurable:!0}),EventPluginContext}();exports.EventPluginContext=EventPluginContext;var EventPluginManager=function(){function EventPluginManager(){}return EventPluginManager.run=function(context,callback){var wrap=function(plugin,next){return function(){try{context.cancelled||plugin.run(context,next)}catch(ex){context.cancelled=!0,context.log.error("Error running plugin '"+plugin.name+"': "+ex.message+". Discarding Event.")}context.cancelled&&callback&&callback(context)}},plugins=context.client.config.plugins,wrappedPlugins=[];callback&&(wrappedPlugins[plugins.length]=wrap({name:"cb",priority:9007199254740992,run:callback},null));for(var index=plugins.length-1;index>-1;index--)wrappedPlugins[index]=wrap(plugins[index],callback||index<plugins.length-1?wrappedPlugins[index+1]:null);wrappedPlugins[0]()},EventPluginManager.addDefaultPlugins=function(config){config.addPlugin(new ConfigurationDefaultsPlugin),config.addPlugin(new ErrorPlugin),config.addPlugin(new DuplicateCheckerPlugin),config.addPlugin(new EventExclusionPlugin),config.addPlugin(new ModuleInfoPlugin),config.addPlugin(new RequestInfoPlugin),config.addPlugin(new EnvironmentInfoPlugin),config.addPlugin(new SubmissionMethodPlugin)},EventPluginManager}();exports.EventPluginManager=EventPluginManager;var DefaultEventQueue=function(){function DefaultEventQueue(config){this._handlers=[],this._processingQueue=!1,this._config=config}return DefaultEventQueue.prototype.enqueue=function(event){var eventWillNotBeQueued="The event will not be queued.",config=this._config,log=config.log;if(config.enabled)if(config.isValid)if(this.areQueuedItemsDiscarded())log.info("Queue items are currently being discarded. "+eventWillNotBeQueued);else{this.ensureQueueTimer();var timestamp=config.storage.queue.save(event),logText="type="+event.type+" "+(event.reference_id?"refid="+event.reference_id:"");timestamp?log.info("Enqueuing event: "+timestamp+" "+logText):log.error("Could not enqueue event "+logText)}else log.info("Invalid Api Key. "+eventWillNotBeQueued);else log.info("Configuration is disabled. "+eventWillNotBeQueued)},DefaultEventQueue.prototype.process=function(isAppExiting){var _this=this,queueNotProcessed="The queue will not be processed.",config=this._config,log=config.log;if(!this._processingQueue)if(log.info("Processing queue..."),config.enabled)if(config.isValid){this._processingQueue=!0,this.ensureQueueTimer();try{var events_1=config.storage.queue.get(config.submissionBatchSize);if(!events_1||0===events_1.length)return void(this._processingQueue=!1);log.info("Sending "+events_1.length+" events to "+config.serverUrl+"."),config.submissionClient.postEvents(events_1.map((function(e){return e.value})),config,(function(response){_this.processSubmissionResponse(response,events_1),_this.eventsPosted(events_1.map((function(e){return e.value})),response),log.info("Finished processing queue."),_this._processingQueue=!1}),isAppExiting)}catch(ex){log.error("Error processing queue: "+ex),this.suspendProcessing(),this._processingQueue=!1}}else log.info("Invalid Api Key. "+queueNotProcessed);else log.info("Configuration is disabled. "+queueNotProcessed)},DefaultEventQueue.prototype.suspendProcessing=function(durationInMinutes,discardFutureQueuedItems,clearQueue){var config=this._config;(!durationInMinutes||durationInMinutes<=0)&&(durationInMinutes=5),config.log.info("Suspending processing for "+durationInMinutes+" minutes."),this._suspendProcessingUntil=new Date((new Date).getTime()+6e4*durationInMinutes),discardFutureQueuedItems&&(this._discardQueuedItemsUntil=this._suspendProcessingUntil),clearQueue&&config.storage.queue.clear()},DefaultEventQueue.prototype.onEventsPosted=function(handler){handler&&this._handlers.push(handler)},DefaultEventQueue.prototype.eventsPosted=function(events,response){for(var handlers,_i=0,handlers_1=this._handlers;_i<handlers_1.length;_i++){var handler=handlers_1[_i];try{handler(events,response)}catch(ex){this._config.log.error("Error calling onEventsPosted handler: "+ex)}}},DefaultEventQueue.prototype.areQueuedItemsDiscarded=function(){return this._discardQueuedItemsUntil&&this._discardQueuedItemsUntil>new Date},DefaultEventQueue.prototype.ensureQueueTimer=function(){var _this=this;this._queueTimer||(this._queueTimer=setInterval((function(){return _this.onProcessQueue()}),1e4))},DefaultEventQueue.prototype.isQueueProcessingSuspended=function(){return this._suspendProcessingUntil&&this._suspendProcessingUntil>new Date},DefaultEventQueue.prototype.onProcessQueue=function(){this.isQueueProcessingSuspended()||this._processingQueue||this.process()},DefaultEventQueue.prototype.processSubmissionResponse=function(response,events){var noSubmission="The event will not be submitted.",config=this._config,log=config.log;if(response.success)return log.info("Sent "+events.length+" events."),void this.removeEvents(events);if(response.serviceUnavailable)return log.error("Server returned service unavailable."),void this.suspendProcessing();if(response.paymentRequired)return log.info("Too many events have been submitted, please upgrade your plan."),void this.suspendProcessing(null,!0,!0);if(response.unableToAuthenticate)return log.info("Unable to authenticate, please check your configuration. "+noSubmission),this.suspendProcessing(15),void this.removeEvents(events);if(response.notFound||response.badRequest)return log.error("Error while trying to submit data: "+response.message),this.suspendProcessing(240),void this.removeEvents(events);if(response.requestEntityTooLarge){var message="Event submission discarded for being too large.";config.submissionBatchSize>1?(log.error(message+" Retrying with smaller batch size."),config.submissionBatchSize=Math.max(1,Math.round(config.submissionBatchSize/1.5))):(log.error(message+" "+noSubmission),this.removeEvents(events))}else response.success||(log.error("Error submitting events: "+(response.message||"Please check the network tab for more info.")),this.suspendProcessing())},DefaultEventQueue.prototype.removeEvents=function(events){for(var index=0;index<(events||[]).length;index++)this._config.storage.queue.remove(events[index].timestamp)},DefaultEventQueue}();exports.DefaultEventQueue=DefaultEventQueue;var InMemoryStorageProvider=function(){function InMemoryStorageProvider(maxQueueItems){void 0===maxQueueItems&&(maxQueueItems=250),this.queue=new InMemoryStorage(maxQueueItems),this.settings=new InMemoryStorage(1)}return InMemoryStorageProvider}();exports.InMemoryStorageProvider=InMemoryStorageProvider;var DefaultSubmissionClient=function(){function DefaultSubmissionClient(){this.configurationVersionHeader="x-exceptionless-configversion"}return DefaultSubmissionClient.prototype.postEvents=function(events,config,callback,isAppExiting){var data=JSON.stringify(events),request=this.createRequest(config,"POST",config.serverUrl+"/api/v2/events",data),cb=this.createSubmissionCallback(config,callback);return config.submissionAdapter.sendRequest(request,cb,isAppExiting)},DefaultSubmissionClient.prototype.postUserDescription=function(referenceId,description,config,callback){var path=config.serverUrl+"/api/v2/events/by-ref/"+encodeURIComponent(referenceId)+"/user-description",data=JSON.stringify(description),request=this.createRequest(config,"POST",path,data),cb=this.createSubmissionCallback(config,callback);return config.submissionAdapter.sendRequest(request,cb)},DefaultSubmissionClient.prototype.getSettings=function(config,version,callback){var request=this.createRequest(config,"GET",config.serverUrl+"/api/v2/projects/config?v="+version),cb=function(status,message,data,headers){if(200!==status)return callback(new SettingsResponse(!1,null,-1,null,message));var settings;try{settings=JSON.parse(data)}catch(e){config.log.error("Unable to parse settings: '"+data+"'")}if(!settings||isNaN(settings.version))return callback(new SettingsResponse(!1,null,-1,null,"Invalid configuration settings."));callback(new SettingsResponse(!0,settings.settings||{},settings.version))};return config.submissionAdapter.sendRequest(request,cb)},DefaultSubmissionClient.prototype.sendHeartbeat=function(sessionIdOrUserId,closeSession,config){var request=this.createRequest(config,"GET",config.heartbeatServerUrl+"/api/v2/events/session/heartbeat?id="+sessionIdOrUserId+"&close="+closeSession);config.submissionAdapter.sendRequest(request)},DefaultSubmissionClient.prototype.createRequest=function(config,method,url,data){return void 0===data&&(data=null),{method:method,url:url,data:data,apiKey:config.apiKey,userAgent:config.userAgent}},DefaultSubmissionClient.prototype.createSubmissionCallback=function(config,callback){var _this=this;return function(status,message,data,headers){var settingsVersion=headers&&parseInt(headers[_this.configurationVersionHeader],10);SettingsManager.checkVersion(settingsVersion,config),callback(new SubmissionResponse(status,message))}},DefaultSubmissionClient}();exports.DefaultSubmissionClient=DefaultSubmissionClient;var Utils=function(){function Utils(){}return Utils.addRange=function(target){for(var values=[],_i=1;_i<arguments.length;_i++)values[_i-1]=arguments[_i];if(target||(target=[]),!values||0===values.length)return target;for(var _a=0,values_1=values;_a<values_1.length;_a++){var value=values_1[_a];value&&target.indexOf(value)<0&&target.push(value)}return target},Utils.getHashCode=function(source){if(!source||0===source.length)return 0;for(var hash=0,index=0;index<source.length;index++){var character;hash=(hash<<5)-hash+source.charCodeAt(index),hash|=0}return hash},Utils.getCookies=function(cookies,exclusions){for(var result={},parts,_i=0,parts_1=(cookies||"").split("; ");_i<parts_1.length;_i++){var part,cookie=parts_1[_i].split("=");Utils.isMatch(cookie[0],exclusions)||(result[cookie[0]]=cookie[1])}return Utils.isEmpty(result)?null:result},Utils.guid=function(){function s4(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return s4()+s4()+"-"+s4()+"-"+s4()+"-"+s4()+"-"+s4()+s4()+s4()},Utils.merge=function(defaultValues,values){var result={};for(var key in defaultValues||{})defaultValues[key]&&(result[key]=defaultValues[key]);for(var key in values||{})values[key]&&(result[key]=values[key]);return result},Utils.parseVersion=function(source){if(!source)return null;var versionRegex,matches=/(v?((\d+)\.(\d+)(\.(\d+))?)(?:-([\dA-Za-z\-]+(?:\.[\dA-Za-z\-]+)*))?(?:\+([\dA-Za-z\-]+(?:\.[\dA-Za-z\-]+)*))?)/.exec(source);return matches&&matches.length>0?matches[0]:null},Utils.parseQueryString=function(query,exclusions){if(!query||0===query.length)return null;var pairs=query.split("&");if(0===pairs.length)return null;for(var result={},_i=0,pairs_1=pairs;_i<pairs_1.length;_i++){var pair,parts=pairs_1[_i].split("=");Utils.isMatch(parts[0],exclusions)||(result[decodeURIComponent(parts[0])]=decodeURIComponent(parts[1]))}return Utils.isEmpty(result)?null:result},Utils.randomNumber=function(){return Math.floor(9007199254740992*Math.random())},Utils.isMatch=function(input,patterns,ignoreCase){if(void 0===ignoreCase&&(ignoreCase=!0),!input||"string"!=typeof input)return!1;var trim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;return input=(ignoreCase?input.toLowerCase():input).replace(trim,""),(patterns||[]).some((function(pattern){if("string"!=typeof pattern)return!1;if((pattern=(ignoreCase?pattern.toLowerCase():pattern).replace(trim,"")).length<=0)return!1;var startsWithWildcard="*"===pattern[0];startsWithWildcard&&(pattern=pattern.slice(1));var endsWithWildcard="*"===pattern[pattern.length-1];return endsWithWildcard&&(pattern=pattern.substring(0,pattern.length-1)),startsWithWildcard&&endsWithWildcard?pattern.length<=input.length&&-1!==input.indexOf(pattern,0):startsWithWildcard?Utils.endsWith(input,pattern):endsWithWildcard?Utils.startsWith(input,pattern):input===pattern}))},Utils.isEmpty=function(input){return null===input||"object"==typeof input&&0===Object.keys(input).length},Utils.startsWith=function(input,prefix){return input.substring(0,prefix.length)===prefix},Utils.endsWith=function(input,suffix){return-1!==input.indexOf(suffix,input.length-suffix.length)},Utils.stringify=function(data,exclusions,maxDepth){function stringifyImpl(obj,excludedKeys){var cache=[];return JSON.stringify(obj,(function(key,value){if(!Utils.isMatch(key,excludedKeys)){if("object"==typeof value&&value){if(-1!==cache.indexOf(value))return;cache.push(value)}return value}}))}if("[object Object]"==={}.toString.call(data)){var flattened={};for(var prop in data){var value;data[prop]!==data&&(flattened[prop]=data[prop])}return stringifyImpl(flattened,exclusions)}if("[object Array]"==={}.toString.call(data)){for(var result=[],index=0;index<data.length;index++)result[index]=JSON.parse(stringifyImpl(data[index],exclusions));return JSON.stringify(result)}return stringifyImpl(data,exclusions)},Utils.toBoolean=function(input,defaultValue){if(void 0===defaultValue&&(defaultValue=!1),"boolean"==typeof input)return input;if(null===input||"number"!=typeof input&&"string"!=typeof input)return defaultValue;switch((input+"").toLowerCase().trim()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case null:return!1}return defaultValue},Utils}();exports.Utils=Utils;var SettingsManager=function(){function SettingsManager(){}return SettingsManager.onChanged=function(handler){handler&&this._handlers.push(handler)},SettingsManager.applySavedServerSettings=function(config){if(config&&config.isValid){var savedSettings=this.getSavedServerSettings(config);config.log.info("Applying saved settings: v"+savedSettings.version),config.settings=Utils.merge(config.settings,savedSettings.settings),this.changed(config)}},SettingsManager.getVersion=function(config){return config&&config.isValid&&this.getSavedServerSettings(config).version||0;var savedSettings},SettingsManager.checkVersion=function(version,config){var currentVersion=this.getVersion(config);version<=currentVersion||(config.log.info("Updating settings from v"+currentVersion+" to v"+version),this.updateSettings(config,currentVersion))},SettingsManager.updateSettings=function(config,version){var _this=this;if(config&&config.enabled){var unableToUpdateMessage="Unable to update settings";config.isValid?((!version||version<0)&&(version=this.getVersion(config)),config.log.info("Checking for updated settings from: v"+version+"."),config.submissionClient.getSettings(config,version,(function(response){if(config&&response&&response.success&&response.settings){config.settings=Utils.merge(config.settings,response.settings);var savedServerSettings=SettingsManager.getSavedServerSettings(config);for(var key in savedServerSettings)response.settings[key]||delete config.settings[key];var newSettings={version:response.settingsVersion,settings:response.settings};config.storage.settings.save(newSettings),config.log.info("Updated settings: v"+newSettings.version),_this.changed(config)}else config.log.warn(unableToUpdateMessage+": "+response.message)}))):config.log.error(unableToUpdateMessage+": ApiKey is not set.")}},SettingsManager.changed=function(config){for(var handlers,_i=0,handlers_2=this._handlers;_i<handlers_2.length;_i++){var handler=handlers_2[_i];try{handler(config)}catch(ex){config.log.error("Error calling onChanged handler: "+ex)}}},SettingsManager.getSavedServerSettings=function(config){var item=config.storage.settings.get()[0];return item&&item.value&&item.value.version&&item.value.settings?item.value:{version:0,settings:{}}},SettingsManager}();SettingsManager._handlers=[],exports.SettingsManager=SettingsManager;var SubmissionResponse=function(){function SubmissionResponse(statusCode,message){this.success=!1,this.badRequest=!1,this.serviceUnavailable=!1,this.paymentRequired=!1,this.unableToAuthenticate=!1,this.notFound=!1,this.requestEntityTooLarge=!1,this.statusCode=statusCode,this.message=message,this.success=statusCode>=200&&statusCode<=299,this.badRequest=400===statusCode,this.serviceUnavailable=503===statusCode,this.paymentRequired=402===statusCode,this.unableToAuthenticate=401===statusCode||403===statusCode,this.notFound=404===statusCode,this.requestEntityTooLarge=413===statusCode}return SubmissionResponse}();exports.SubmissionResponse=SubmissionResponse;var ExceptionlessClient=function(){function ExceptionlessClient(settingsOrApiKey,serverUrl){var _this=this;this.config=new Configuration("object"==typeof settingsOrApiKey?settingsOrApiKey:{apiKey:settingsOrApiKey,serverUrl:serverUrl}),this.updateSettingsTimer(5e3),this.config.onChanged((function(config){return _this.updateSettingsTimer(_this._timeoutId>0?5e3:0)})),this.config.queue.onEventsPosted((function(events,response){return _this.updateSettingsTimer()}))}return ExceptionlessClient.prototype.createException=function(exception){var pluginContextData=new ContextData;return pluginContextData.setException(exception),this.createEvent(pluginContextData).setType("error")},ExceptionlessClient.prototype.submitException=function(exception,callback){this.createException(exception).submit(callback)},ExceptionlessClient.prototype.createUnhandledException=function(exception,submissionMethod){var builder=this.createException(exception);return builder.pluginContextData.markAsUnhandledError(),builder.pluginContextData.setSubmissionMethod(submissionMethod),builder},ExceptionlessClient.prototype.submitUnhandledException=function(exception,submissionMethod,callback){this.createUnhandledException(exception,submissionMethod).submit(callback)},ExceptionlessClient.prototype.createFeatureUsage=function(feature){return this.createEvent().setType("usage").setSource(feature)},ExceptionlessClient.prototype.submitFeatureUsage=function(feature,callback){this.createFeatureUsage(feature).submit(callback)},ExceptionlessClient.prototype.createLog=function(sourceOrMessage,message,level){var builder=this.createEvent().setType("log");if(level)builder=builder.setSource(sourceOrMessage).setMessage(message).setProperty("@level",level);else if(message)builder=builder.setSource(sourceOrMessage).setMessage(message);else{builder=builder.setMessage(sourceOrMessage);try{var caller=this.createLog.caller;builder=builder.setSource(caller&&caller.caller&&caller.caller.name)}catch(e){this.config.log.trace("Unable to resolve log source: "+e.message)}}return builder},ExceptionlessClient.prototype.submitLog=function(sourceOrMessage,message,level,callback){this.createLog(sourceOrMessage,message,level).submit(callback)},ExceptionlessClient.prototype.createNotFound=function(resource){return this.createEvent().setType("404").setSource(resource)},ExceptionlessClient.prototype.submitNotFound=function(resource,callback){this.createNotFound(resource).submit(callback)},ExceptionlessClient.prototype.createSessionStart=function(){return this.createEvent().setType("session")},ExceptionlessClient.prototype.submitSessionStart=function(callback){this.createSessionStart().submit(callback)},ExceptionlessClient.prototype.submitSessionEnd=function(sessionIdOrUserId){sessionIdOrUserId&&(this.config.log.info("Submitting session end: "+sessionIdOrUserId),this.config.submissionClient.sendHeartbeat(sessionIdOrUserId,!0,this.config))},ExceptionlessClient.prototype.submitSessionHeartbeat=function(sessionIdOrUserId){sessionIdOrUserId&&(this.config.log.info("Submitting session heartbeat: "+sessionIdOrUserId),this.config.submissionClient.sendHeartbeat(sessionIdOrUserId,!1,this.config))},ExceptionlessClient.prototype.createEvent=function(pluginContextData){return new EventBuilder({date:new Date},this,pluginContextData)},ExceptionlessClient.prototype.submitEvent=function(event,pluginContextData,callback){function cancelled(context){return context&&(context.cancelled=!0),!!callback&&callback(context)}var context=new EventPluginContext(this,event,pluginContextData);return event?this.config.enabled?(event.data||(event.data={}),event.tags&&event.tags.length||(event.tags=[]),void EventPluginManager.run(context,(function(ctx){var config=ctx.client.config,ev=ctx.event;ctx.cancelled||(ev.type&&0!==ev.type.length||(ev.type="log"),ev.date||(ev.date=new Date),config.queue.enqueue(ev),ev.reference_id&&ev.reference_id.length>0&&(ctx.log.info("Setting last reference id '"+ev.reference_id+"'"),config.lastReferenceIdManager.setLast(ev.reference_id))),callback&&callback(ctx)}))):(this.config.log.info("Event submission is currently disabled."),cancelled(context)):cancelled(context)},ExceptionlessClient.prototype.updateUserEmailAndDescription=function(referenceId,email,description,callback){var _this=this;if(!(referenceId&&email&&description&&this.config.enabled))return!!callback&&callback(new SubmissionResponse(500,"cancelled"));var userDescription={email_address:email,description:description};this.config.submissionClient.postUserDescription(referenceId,userDescription,this.config,(function(response){response.success||_this.config.log.error("Failed to submit user email and description for event '"+referenceId+"': "+response.statusCode+" "+response.message),callback&&callback(response)}))},ExceptionlessClient.prototype.getLastReferenceId=function(){return this.config.lastReferenceIdManager.getLast()},ExceptionlessClient.prototype.updateSettingsTimer=function(initialDelay){var _this=this;this.config.log.info("Updating settings timer with delay: "+initialDelay),this._timeoutId=clearTimeout(this._timeoutId),this._timeoutId=clearInterval(this._intervalId);var interval=this.config.updateSettingsWhenIdleInterval;if(interval>0){var updateSettings=function(){return SettingsManager.updateSettings(_this.config)};initialDelay>0&&(this._timeoutId=setTimeout(updateSettings,initialDelay)),this._intervalId=setInterval(updateSettings,interval)}},Object.defineProperty(ExceptionlessClient,"default",{get:function(){return null===ExceptionlessClient._instance&&(ExceptionlessClient._instance=new ExceptionlessClient(null)),ExceptionlessClient._instance},enumerable:!0,configurable:!0}),ExceptionlessClient}();ExceptionlessClient._instance=null,exports.ExceptionlessClient=ExceptionlessClient;var ContextData=function(){function ContextData(){}return ContextData.prototype.setException=function(exception){exception&&(this["@@_Exception"]=exception)},Object.defineProperty(ContextData.prototype,"hasException",{get:function(){return!!this["@@_Exception"]},enumerable:!0,configurable:!0}),ContextData.prototype.getException=function(){return this["@@_Exception"]||null},ContextData.prototype.markAsUnhandledError=function(){this["@@_IsUnhandledError"]=!0},Object.defineProperty(ContextData.prototype,"isUnhandledError",{get:function(){return!!this["@@_IsUnhandledError"]},enumerable:!0,configurable:!0}),ContextData.prototype.setSubmissionMethod=function(method){method&&(this["@@_SubmissionMethod"]=method)},ContextData.prototype.getSubmissionMethod=function(){return this["@@_SubmissionMethod"]||null},ContextData}();exports.ContextData=ContextData;var Configuration=function(){function Configuration(configSettings){function inject(fn){return"function"==typeof fn?fn(this):fn}this.defaultTags=[],this.defaultData={},this.enabled=!0,this.lastReferenceIdManager=new DefaultLastReferenceIdManager,this.settings={},this._serverUrl="https://collector.exceptionless.io",this._heartbeatServerUrl="https://heartbeat.exceptionless.io",this._updateSettingsWhenIdleInterval=12e4,this._dataExclusions=[],this._userAgentBotPatterns=[],this._plugins=[],this._handlers=[],configSettings=Utils.merge(Configuration.defaults,configSettings),this.log=inject(configSettings.log)||new NullLog,this.apiKey=configSettings.apiKey,this.serverUrl=configSettings.serverUrl,this.heartbeatServerUrl=configSettings.heartbeatServerUrl,this.updateSettingsWhenIdleInterval=configSettings.updateSettingsWhenIdleInterval,this.environmentInfoCollector=inject(configSettings.environmentInfoCollector),this.errorParser=inject(configSettings.errorParser),this.lastReferenceIdManager=inject(configSettings.lastReferenceIdManager)||new DefaultLastReferenceIdManager,this.moduleCollector=inject(configSettings.moduleCollector),this.requestInfoCollector=inject(configSettings.requestInfoCollector),this.submissionBatchSize=inject(configSettings.submissionBatchSize)||50,this.submissionAdapter=inject(configSettings.submissionAdapter),this.submissionClient=inject(configSettings.submissionClient)||new DefaultSubmissionClient,this.storage=inject(configSettings.storage)||new InMemoryStorageProvider,this.queue=inject(configSettings.queue)||new DefaultEventQueue(this),SettingsManager.applySavedServerSettings(this),EventPluginManager.addDefaultPlugins(this)}return Object.defineProperty(Configuration.prototype,"apiKey",{get:function(){return this._apiKey},set:function(value){this._apiKey=value||null,this.log.info("apiKey: "+this._apiKey),this.changed()},enumerable:!0,configurable:!0}),Object.defineProperty(Configuration.prototype,"isValid",{get:function(){return!!this.apiKey&&this.apiKey.length>=10},enumerable:!0,configurable:!0}),Object.defineProperty(Configuration.prototype,"serverUrl",{get:function(){return this._serverUrl},set:function(value){value&&(this._serverUrl=value,this._heartbeatServerUrl=value,this.log.info("serverUrl: "+value),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(Configuration.prototype,"heartbeatServerUrl",{get:function(){return this._heartbeatServerUrl},set:function(value){value&&(this._heartbeatServerUrl=value,this.log.info("heartbeatServerUrl: "+value),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(Configuration.prototype,"updateSettingsWhenIdleInterval",{get:function(){return this._updateSettingsWhenIdleInterval},set:function(value){"number"==typeof value&&(value<=0?value=-1:value>0&&value<15e3&&(value=15e3),this._updateSettingsWhenIdleInterval=value,this.log.info("updateSettingsWhenIdleInterval: "+value),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(Configuration.prototype,"dataExclusions",{get:function(){var exclusions=this.settings["@@DataExclusions"];return this._dataExclusions.concat(exclusions&&exclusions.split(",")||[])},enumerable:!0,configurable:!0}),Configuration.prototype.addDataExclusions=function(){for(var exclusions=[],_i=0;_i<arguments.length;_i++)exclusions[_i]=arguments[_i];this._dataExclusions=Utils.addRange.apply(Utils,[this._dataExclusions].concat(exclusions))},Object.defineProperty(Configuration.prototype,"userAgentBotPatterns",{get:function(){var patterns=this.settings["@@UserAgentBotPatterns"];return this._userAgentBotPatterns.concat(patterns&&patterns.split(",")||[])},enumerable:!0,configurable:!0}),Configuration.prototype.addUserAgentBotPatterns=function(){for(var userAgentBotPatterns=[],_i=0;_i<arguments.length;_i++)userAgentBotPatterns[_i]=arguments[_i];this._userAgentBotPatterns=Utils.addRange.apply(Utils,[this._userAgentBotPatterns].concat(userAgentBotPatterns))},Object.defineProperty(Configuration.prototype,"plugins",{get:function(){return this._plugins.sort((function(p1,p2){return p1.priority<p2.priority?-1:p1.priority>p2.priority?1:0}))},enumerable:!0,configurable:!0}),Configuration.prototype.addPlugin=function(pluginOrName,priority,pluginAction){var plugin=pluginAction?{name:pluginOrName,priority:priority,run:pluginAction}:pluginOrName;if(plugin&&plugin.run){plugin.name||(plugin.name=Utils.guid()),plugin.priority||(plugin.priority=0);for(var pluginExists=!1,plugins=this._plugins,_i=0,plugins_1=plugins;_i<plugins_1.length;_i++){var p;if(plugins_1[_i].name===plugin.name){pluginExists=!0;break}}pluginExists||plugins.push(plugin)}else this.log.error("Add plugin failed: Run method not defined")},Configuration.prototype.removePlugin=function(pluginOrName){var name="string"==typeof pluginOrName?pluginOrName:pluginOrName.name;if(name){for(var plugins=this._plugins,index=0;index<plugins.length;index++)if(plugins[index].name===name){plugins.splice(index,1);break}}else this.log.error("Remove plugin failed: Plugin name not defined")},Configuration.prototype.setVersion=function(version){version&&(this.defaultData["@version"]=version)},Configuration.prototype.setUserIdentity=function(userInfoOrIdentity,name){var USER_KEY="@user",userInfo="string"!=typeof userInfoOrIdentity?userInfoOrIdentity:{identity:userInfoOrIdentity,name:name},shouldRemove=!userInfo||!userInfo.identity&&!userInfo.name;shouldRemove?delete this.defaultData["@user"]:this.defaultData["@user"]=userInfo,this.log.info("user identity: "+(shouldRemove?"null":userInfo.identity))},Object.defineProperty(Configuration.prototype,"userAgent",{get:function(){return"exceptionless-js/1.5.4"},enumerable:!0,configurable:!0}),Configuration.prototype.useSessions=function(sendHeartbeats,heartbeatInterval){void 0===sendHeartbeats&&(sendHeartbeats=!0),void 0===heartbeatInterval&&(heartbeatInterval=3e4),sendHeartbeats&&this.addPlugin(new HeartbeatPlugin(heartbeatInterval))},Configuration.prototype.useReferenceIds=function(){this.addPlugin(new ReferenceIdPlugin)},Configuration.prototype.useLocalStorage=function(){},Configuration.prototype.useDebugLogger=function(){this.log=new ConsoleLog},Configuration.prototype.onChanged=function(handler){handler&&this._handlers.push(handler)},Configuration.prototype.changed=function(){for(var handlers,_i=0,handlers_3=this._handlers;_i<handlers_3.length;_i++){var handler=handlers_3[_i];try{handler(this)}catch(ex){this.log.error("Error calling onChanged handler: "+ex)}}},Object.defineProperty(Configuration,"defaults",{get:function(){return null===Configuration._defaultSettings&&(Configuration._defaultSettings={}),Configuration._defaultSettings},enumerable:!0,configurable:!0}),Configuration}();Configuration._defaultSettings=null,exports.Configuration=Configuration;var SettingsResponse=function(){function SettingsResponse(success,settings,settingsVersion,exception,message){void 0===settingsVersion&&(settingsVersion=-1),void 0===exception&&(exception=null),void 0===message&&(message=null),this.success=!1,this.settingsVersion=-1,this.success=success,this.settings=settings,this.settingsVersion=settingsVersion,this.exception=exception,this.message=message}return SettingsResponse}();exports.SettingsResponse=SettingsResponse;var EventBuilder=function(){function EventBuilder(event,client,pluginContextData){this._validIdentifierErrorMessage="must contain between 8 and 100 alphanumeric or '-' characters.",this.target=event,this.client=client,this.pluginContextData=pluginContextData||new ContextData}return EventBuilder.prototype.setType=function(type){return type&&(this.target.type=type),this},EventBuilder.prototype.setSource=function(source){return source&&(this.target.source=source),this},EventBuilder.prototype.setReferenceId=function(referenceId){if(!this.isValidIdentifier(referenceId))throw new Error("ReferenceId "+this._validIdentifierErrorMessage);return this.target.reference_id=referenceId,this},EventBuilder.prototype.setEventReference=function(name,id){if(!name)throw new Error("Invalid name");if(!id||!this.isValidIdentifier(id))throw new Error("Id "+this._validIdentifierErrorMessage);return this.setProperty("@ref:"+name,id),this},EventBuilder.prototype.setMessage=function(message){return message&&(this.target.message=message),this},EventBuilder.prototype.setGeo=function(latitude,longitude){if(latitude<-90||latitude>90)throw new Error("Must be a valid latitude value between -90.0 and 90.0.");if(longitude<-180||longitude>180)throw new Error("Must be a valid longitude value between -180.0 and 180.0.");return this.target.geo=latitude+","+longitude,this},EventBuilder.prototype.setUserIdentity=function(userInfoOrIdentity,name){var userInfo="string"!=typeof userInfoOrIdentity?userInfoOrIdentity:{identity:userInfoOrIdentity,name:name};return userInfo&&(userInfo.identity||userInfo.name)?(this.setProperty("@user",userInfo),this):this},EventBuilder.prototype.setUserDescription=function(emailAddress,description){return emailAddress&&description&&this.setProperty("@user_description",{email_address:emailAddress,description:description}),this},EventBuilder.prototype.setManualStackingInfo=function(signatureData,title){if(signatureData){var stack={signature_data:signatureData};title&&(stack.title=title),this.setProperty("@stack",stack)}return this},EventBuilder.prototype.setManualStackingKey=function(manualStackingKey,title){if(manualStackingKey){var data={ManualStackingKey:manualStackingKey};this.setManualStackingInfo(data,title)}return this},EventBuilder.prototype.setValue=function(value){return value&&(this.target.value=value),this},EventBuilder.prototype.addTags=function(){for(var tags=[],_i=0;_i<arguments.length;_i++)tags[_i]=arguments[_i];return this.target.tags=Utils.addRange.apply(Utils,[this.target.tags].concat(tags)),this},EventBuilder.prototype.setProperty=function(name,value,maxDepth,excludedPropertyNames){if(!name||void 0===value||null==value)return this;this.target.data||(this.target.data={});var result=JSON.parse(Utils.stringify(value,this.client.config.dataExclusions.concat(excludedPropertyNames||[]),maxDepth));return Utils.isEmpty(result)||(this.target.data[name]=result),this},EventBuilder.prototype.markAsCritical=function(critical){return critical&&this.addTags("Critical"),this},EventBuilder.prototype.addRequestInfo=function(request){return request&&(this.pluginContextData["@request"]=request),this},EventBuilder.prototype.submit=function(callback){this.client.submitEvent(this.target,this.pluginContextData,callback)},EventBuilder.prototype.isValidIdentifier=function(value){if(!value)return!0;if(value.length<8||value.length>100)return!1;for(var index=0;index<value.length;index++){var code=value.charCodeAt(index),isDigit,isLetter,isMinus;if(!(code>=48&&code<=57)&&!(code>=65&&code<=90||code>=97&&code<=122)&&!(45===code))return!1}return!0},EventBuilder}();exports.EventBuilder=EventBuilder;var ConfigurationDefaultsPlugin=function(){function ConfigurationDefaultsPlugin(){this.priority=10,this.name="ConfigurationDefaultsPlugin"}return ConfigurationDefaultsPlugin.prototype.run=function(context,next){for(var config=context.client.config,defaultTags,_i=0,defaultTags_1=config.defaultTags||[];_i<defaultTags_1.length;_i++){var tag=defaultTags_1[_i];tag&&context.event.tags.indexOf(tag)<0&&context.event.tags.push(tag)}var defaultData=config.defaultData||{};for(var key in defaultData)if(defaultData[key]){var result=JSON.parse(Utils.stringify(defaultData[key],config.dataExclusions));Utils.isEmpty(result)||(context.event.data[key]=result)}next&&next()},ConfigurationDefaultsPlugin}();exports.ConfigurationDefaultsPlugin=ConfigurationDefaultsPlugin;var DuplicateCheckerPlugin=function(){function DuplicateCheckerPlugin(getCurrentTime,interval){void 0===getCurrentTime&&(getCurrentTime=function(){return Date.now()}),void 0===interval&&(interval=3e4);var _this=this;this.priority=1010,this.name="DuplicateCheckerPlugin",this._mergedEvents=[],this._processedHashcodes=[],this._getCurrentTime=getCurrentTime,this._interval=interval,setInterval((function(){for(;_this._mergedEvents.length>0;)_this._mergedEvents.shift().resubmit()}),interval)}return DuplicateCheckerPlugin.prototype.run=function(context,next){var _this=this;function getHashCode(error){for(var hashCode=0;error;)error.message&&error.message.length&&(hashCode+=397*hashCode^Utils.getHashCode(error.message)),error.stack_trace&&error.stack_trace.length&&(hashCode+=397*hashCode^Utils.getHashCode(JSON.stringify(error.stack_trace))),error=error.inner;return hashCode}var error,hashCode=getHashCode(context.event.data["@error"]);if(hashCode){var count=context.event.count||1,now_1=this._getCurrentTime(),merged=this._mergedEvents.filter((function(s){return s.hashCode===hashCode}))[0];if(merged&&(merged.incrementCount(count),merged.updateDate(context.event.date),context.log.info("Ignoring duplicate event with hash: "+hashCode),context.cancelled=!0),!context.cancelled&&this._processedHashcodes.some((function(h){return h.hash===hashCode&&h.timestamp>=now_1-_this._interval}))&&(context.log.trace("Adding event with hash: "+hashCode),this._mergedEvents.push(new MergedEvent(hashCode,context,count)),context.cancelled=!0),!context.cancelled)for(context.log.trace("Enqueueing event with hash: "+hashCode+"to cache."),this._processedHashcodes.push({hash:hashCode,timestamp:now_1});this._processedHashcodes.length>50;)this._processedHashcodes.shift()}next&&next()},DuplicateCheckerPlugin}();exports.DuplicateCheckerPlugin=DuplicateCheckerPlugin;var MergedEvent=function(){function MergedEvent(hashCode,context,count){this.hashCode=hashCode,this._context=context,this._count=count}return MergedEvent.prototype.incrementCount=function(count){this._count+=count},MergedEvent.prototype.resubmit=function(){this._context.event.count=this._count,this._context.client.config.queue.enqueue(this._context.event)},MergedEvent.prototype.updateDate=function(date){date>this._context.event.date&&(this._context.event.date=date)},MergedEvent}(),EnvironmentInfoPlugin=function(){function EnvironmentInfoPlugin(){this.priority=80,this.name="EnvironmentInfoPlugin"}return EnvironmentInfoPlugin.prototype.run=function(context,next){var ENVIRONMENT_KEY="@environment",collector=context.client.config.environmentInfoCollector;if(!context.event.data["@environment"]&&collector){var environmentInfo=collector.getEnvironmentInfo(context);environmentInfo&&(context.event.data["@environment"]=environmentInfo)}next&&next()},EnvironmentInfoPlugin}();exports.EnvironmentInfoPlugin=EnvironmentInfoPlugin;var ErrorPlugin=function(){function ErrorPlugin(){this.priority=30,this.name="ErrorPlugin"}return ErrorPlugin.prototype.run=function(context,next){var ERROR_KEY="@error",ignoredProperties=["arguments","column","columnNumber","description","fileName","message","name","number","line","lineNumber","opera#sourceloc","sourceId","sourceURL","stack","stackArray","stacktrace"],exception=context.contextData.getException();if(exception&&(context.event.type="error",!context.event.data["@error"])){var config=context.client.config,parser=config.errorParser;if(!parser)throw new Error("No error parser was defined.");var result=parser.parse(context,exception);if(result){var additionalData=JSON.parse(Utils.stringify(exception,config.dataExclusions.concat(ignoredProperties)));Utils.isEmpty(additionalData)||(result.data||(result.data={}),result.data["@ext"]=additionalData),context.event.data["@error"]=result}}next&&next()},ErrorPlugin}();exports.ErrorPlugin=ErrorPlugin;var EventExclusionPlugin=function(){function EventExclusionPlugin(){this.priority=45,this.name="EventExclusionPlugin"}return EventExclusionPlugin.prototype.run=function(context,next){function getLogLevel(level){switch((level||"").toLowerCase().trim()){case"trace":case"true":case"1":case"yes":return 0;case"debug":return 1;case"info":return 2;case"warn":return 3;case"error":return 4;case"fatal":return 5;case"off":case"false":case"0":case"no":return 6;default:return-1}}function getMinLogLevel(settings,loggerName){return void 0===loggerName&&(loggerName="*"),getLogLevel(getTypeAndSourceSetting(settings,"log",loggerName,"Trace")+"")}function getTypeAndSourceSetting(settings,type,source,defaultValue){if(void 0===settings&&(settings={}),!type)return defaultValue;var isLog="log"===type,sourcePrefix="@@"+type+":",value=settings[sourcePrefix+source];if(value)return isLog?value:Utils.toBoolean(value);for(var key in settings)if(Utils.startsWith(key.toLowerCase(),sourcePrefix.toLowerCase())&&Utils.isMatch(source,[key.substring(sourcePrefix.length)]))return isLog?settings[key]:Utils.toBoolean(settings[key]);return defaultValue}var ev=context.event,log=context.log,settings=context.client.config.settings;if("log"===ev.type){var minLogLevel=getMinLogLevel(settings,ev.source),logLevel=getLogLevel(ev.data["@level"]);logLevel>=0&&(logLevel>5||logLevel<minLogLevel)&&(log.info("Cancelling log event due to minimum log level."),context.cancelled=!0)}else if("error"===ev.type)for(var error=ev.data["@error"];!context.cancelled&&error;)!1===getTypeAndSourceSetting(settings,ev.type,error.type,!0)&&(log.info("Cancelling error from excluded exception type: "+error.type),context.cancelled=!0),error=error.inner;else!1===getTypeAndSourceSetting(settings,ev.type,ev.source,!0)&&(log.info("Cancelling event from excluded type: "+ev.type+" and source: "+ev.source),context.cancelled=!0);next&&next()},EventExclusionPlugin}();exports.EventExclusionPlugin=EventExclusionPlugin;var ModuleInfoPlugin=function(){function ModuleInfoPlugin(){this.priority=50,this.name="ModuleInfoPlugin"}return ModuleInfoPlugin.prototype.run=function(context,next){var ERROR_KEY="@error",collector=context.client.config.moduleCollector;if(context.event.data["@error"]&&!context.event.data["@error"].modules&&collector){var modules=collector.getModules(context);modules&&modules.length>0&&(context.event.data["@error"].modules=modules)}next&&next()},ModuleInfoPlugin}();exports.ModuleInfoPlugin=ModuleInfoPlugin;var RequestInfoPlugin=function(){function RequestInfoPlugin(){this.priority=70,this.name="RequestInfoPlugin"}return RequestInfoPlugin.prototype.run=function(context,next){var REQUEST_KEY="@request",config=context.client.config,collector=config.requestInfoCollector;if(!context.event.data["@request"]&&collector){var requestInfo=collector.getRequestInfo(context);requestInfo&&(Utils.isMatch(requestInfo.user_agent,config.userAgentBotPatterns)?(context.log.info("Cancelling event as the request user agent matches a known bot pattern"),context.cancelled=!0):context.event.data["@request"]=requestInfo)}next&&next()},RequestInfoPlugin}();exports.RequestInfoPlugin=RequestInfoPlugin;var SubmissionMethodPlugin=function(){function SubmissionMethodPlugin(){this.priority=100,this.name="SubmissionMethodPlugin"}return SubmissionMethodPlugin.prototype.run=function(context,next){var submissionMethod=context.contextData.getSubmissionMethod();submissionMethod&&(context.event.data["@submission_method"]=submissionMethod),next&&next()},SubmissionMethodPlugin}();exports.SubmissionMethodPlugin=SubmissionMethodPlugin;var InMemoryStorage=function(){function InMemoryStorage(maxItems){this.items=[],this.lastTimestamp=0,this.maxItems=maxItems}return InMemoryStorage.prototype.save=function(value){if(!value)return null;var items=this.items,timestamp=Math.max(Date.now(),this.lastTimestamp+1),item={timestamp:timestamp,value:value};return items.push(item)>this.maxItems&&items.shift(),this.lastTimestamp=timestamp,item.timestamp},InMemoryStorage.prototype.get=function(limit){return this.items.slice(0,limit)},InMemoryStorage.prototype.remove=function(timestamp){for(var items=this.items,i=0;i<items.length;i++)if(items[i].timestamp===timestamp)return void items.splice(i,1)},InMemoryStorage.prototype.clear=function(){this.items=[]},InMemoryStorage}();exports.InMemoryStorage=InMemoryStorage;var KeyValueStorageBase=function(){function KeyValueStorageBase(maxItems){this.lastTimestamp=0,this.maxItems=maxItems}return KeyValueStorageBase.prototype.save=function(value,single){if(!value)return null;this.ensureIndex();var items=this.items,timestamp=Math.max(Date.now(),this.lastTimestamp+1),key=this.getKey(timestamp),json=JSON.stringify(value);try{this.write(key,json),this.lastTimestamp=timestamp,items.push(timestamp)>this.maxItems&&this.delete(this.getKey(items.shift()))}catch(e){return null}return timestamp},KeyValueStorageBase.prototype.get=function(limit){var _this=this;return this.ensureIndex(),this.items.slice(0,limit).map((function(timestamp){var key=_this.getKey(timestamp);try{var json=_this.read(key),value;return{timestamp:timestamp,value:JSON.parse(json,parseDate)}}catch(error){return _this.safeDelete(key),null}})).filter((function(item){return null!=item}))},KeyValueStorageBase.prototype.remove=function(timestamp){this.ensureIndex();var items=this.items,index=items.indexOf(timestamp);if(index>=0){var key=this.getKey(timestamp);this.safeDelete(key),items.splice(index,1)}},KeyValueStorageBase.prototype.clear=function(){var _this=this;this.items.forEach((function(item){return _this.safeDelete(_this.getKey(item))})),this.items=[]},KeyValueStorageBase.prototype.ensureIndex=function(){this.items||(this.items=this.createIndex(),this.lastTimestamp=Math.max.apply(Math,[0].concat(this.items))+1)},KeyValueStorageBase.prototype.safeDelete=function(key){try{this.delete(key)}catch(error){}},KeyValueStorageBase.prototype.createIndex=function(){var _this=this;try{var keys;return this.readAllKeys().map((function(key){try{var timestamp=_this.getTimestamp(key);return timestamp||(_this.safeDelete(key),null)}catch(error){return _this.safeDelete(key),null}})).filter((function(timestamp){return null!=timestamp})).sort((function(a,b){return a-b}))}catch(error){return[]}},KeyValueStorageBase}();function parseDate(key,value){var dateRegx,a;if("string"==typeof value&&/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/g.exec(value))return new Date(value);return value}exports.KeyValueStorageBase=KeyValueStorageBase;var BrowserStorage=function(_super){function BrowserStorage(namespace,prefix,maxItems){void 0===prefix&&(prefix="com.exceptionless."),void 0===maxItems&&(maxItems=20);var _this=_super.call(this,maxItems)||this;return _this.prefix=prefix+namespace+"-",_this}return __extends(BrowserStorage,_super),BrowserStorage.isAvailable=function(){try{var storage=window.localStorage,x="__storage_test__";return storage.setItem(x,x),storage.removeItem(x),!0}catch(e){return!1}},BrowserStorage.prototype.write=function(key,value){window.localStorage.setItem(key,value)},BrowserStorage.prototype.read=function(key){return window.localStorage.getItem(key)},BrowserStorage.prototype.readAllKeys=function(){var _this=this;return Object.keys(window.localStorage).filter((function(key){return 0===key.indexOf(_this.prefix)}))},BrowserStorage.prototype.delete=function(key){window.localStorage.removeItem(key)},BrowserStorage.prototype.getKey=function(timestamp){return this.prefix+timestamp},BrowserStorage.prototype.getTimestamp=function(key){return parseInt(key.substr(this.prefix.length),10)},BrowserStorage}(KeyValueStorageBase);exports.BrowserStorage=BrowserStorage;var DefaultErrorParser=function(){function DefaultErrorParser(){}return DefaultErrorParser.prototype.parse=function(context,exception){function getParameters(parameters){for(var params,result=[],_i=0,params_1=("string"==typeof parameters?[parameters]:parameters)||[];_i<params_1.length;_i++){var param=params_1[_i];result.push({name:param})}return result}function getStackFrames(stackFrames){for(var ANONYMOUS="<anonymous>",frames=[],_i=0,stackFrames_1=stackFrames;_i<stackFrames_1.length;_i++){var frame=stackFrames_1[_i];frames.push({name:(frame.func||ANONYMOUS).replace("?",ANONYMOUS),parameters:getParameters(frame.args),file_name:frame.url,line_number:frame.line||0,column:frame.column||0})}return frames}var TRACEKIT_STACK_TRACE_KEY="@@_TraceKit.StackTrace",stackTrace=context.contextData["@@_TraceKit.StackTrace"]?context.contextData["@@_TraceKit.StackTrace"]:TraceKit.computeStackTrace(exception,25);if(!stackTrace)throw new Error("Unable to parse the exceptions stack trace.");var message="string"==typeof exception?exception:void 0;return{type:stackTrace.name||"Error",message:stackTrace.message||exception.message||message,stack_trace:getStackFrames(stackTrace.stack||[])}},DefaultErrorParser}();exports.DefaultErrorParser=DefaultErrorParser;var DefaultModuleCollector=function(){function DefaultModuleCollector(){}return DefaultModuleCollector.prototype.getModules=function(context){if(!document||!document.getElementsByTagName)return null;var modules=[],scripts=document.getElementsByTagName("script");if(scripts&&scripts.length>0)for(var index=0;index<scripts.length;index++)scripts[index].src?modules.push({module_id:index,name:scripts[index].src.split("?")[0],version:Utils.parseVersion(scripts[index].src)}):scripts[index].innerHTML&&modules.push({module_id:index,name:"Script Tag",version:Utils.getHashCode(scripts[index].innerHTML).toString()});return modules},DefaultModuleCollector}();exports.DefaultModuleCollector=DefaultModuleCollector;var DefaultRequestInfoCollector=function(){function DefaultRequestInfoCollector(){}return DefaultRequestInfoCollector.prototype.getRequestInfo=function(context){if(!document||!navigator||!location)return null;var exclusions=context.client.config.dataExclusions,requestInfo={user_agent:navigator.userAgent,is_secure:"https:"===location.protocol,host:location.hostname,port:location.port&&""!==location.port?parseInt(location.port,10):80,path:location.pathname,cookies:Utils.getCookies(document.cookie,exclusions),query_string:Utils.parseQueryString(location.search.substring(1),exclusions)};return document.referrer&&""!==document.referrer&&(requestInfo.referrer=document.referrer),requestInfo},DefaultRequestInfoCollector}();exports.DefaultRequestInfoCollector=DefaultRequestInfoCollector;var BrowserStorageProvider=function(){function BrowserStorageProvider(prefix,maxQueueItems){void 0===maxQueueItems&&(maxQueueItems=250),this.queue=new BrowserStorage("q",prefix,maxQueueItems),this.settings=new BrowserStorage("settings",prefix,1)}return BrowserStorageProvider}();exports.BrowserStorageProvider=BrowserStorageProvider;var DefaultSubmissionAdapter=function(){function DefaultSubmissionAdapter(){}return DefaultSubmissionAdapter.prototype.sendRequest=function(request,callback,isAppExiting){var TIMEOUT="timeout",LOADED="loaded",WITH_CREDENTIALS="withCredentials",isCompleted=!1,useSetTimeout=!1;function complete(mode,xhr){function parseResponseHeaders(headerStr){function trim(value){return value.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}for(var headers={},headerPairs,_i=0,headerPairs_1=(headerStr||"").split("\r\n");_i<headerPairs_1.length;_i++){var headerPair=headerPairs_1[_i],separator=headerPair.indexOf(": ");separator>0&&(headers[trim(headerPair.substring(0,separator).toLowerCase())]=headerPair.substring(separator+2))}return headers}if(!isCompleted){isCompleted=!0;var message=xhr.statusText,responseText=xhr.responseText,status=xhr.status;if(mode===TIMEOUT||0===status)message="Unable to connect to server.",status=0;else if(mode!==LOADED||status){if(status<200||status>299){var responseBody=xhr.responseBody;if(responseBody&&responseBody.message)message=responseBody.message;else if(responseText&&-1!==responseText.indexOf("message"))try{message=JSON.parse(responseText).message}catch(e){message=responseText}}}else status="POST"===request.method?202:200;callback&&callback(status||500,message||"",responseText,parseResponseHeaders(xhr.getAllResponseHeaders&&xhr.getAllResponseHeaders()))}}function createRequest(userAgent,method,url){var xhr=new XMLHttpRequest;return WITH_CREDENTIALS in xhr?(xhr.open(method,url,!0),xhr.setRequestHeader("X-Exceptionless-Client",userAgent),"POST"===method&&xhr.setRequestHeader("Content-Type","application/json")):"undefined"!=typeof XDomainRequest?(useSetTimeout=!0,(xhr=new XDomainRequest).open(method,"http:"===location.protocol?url.replace("https:","http:"):url)):xhr=null,xhr&&(xhr.timeout=1e4),xhr}var url=request.url+(-1===request.url.indexOf("?")?"?":"&")+"access_token="+encodeURIComponent(request.apiKey),xhr=createRequest(request.userAgent,request.method||"POST",url);if(!xhr)return callback&&callback(503,"CORS not supported.");WITH_CREDENTIALS in xhr&&(xhr.onreadystatechange=function(){4===xhr.readyState&&complete(LOADED,xhr)}),xhr.onprogress=function(){},xhr.ontimeout=function(){return complete(TIMEOUT,xhr)},xhr.onerror=function(){return complete("error",xhr)},xhr.onload=function(){return complete(LOADED,xhr)},useSetTimeout?setTimeout((function(){return xhr.send(request.data)}),500):xhr.send(request.data)},DefaultSubmissionAdapter}();return exports.DefaultSubmissionAdapter=DefaultSubmissionAdapter,function init(){function getDefaultsSettingsFromScriptTag(){if(!document||!document.getElementsByTagName)return null;for(var scripts=document.getElementsByTagName("script"),index=0;index<scripts.length;index++)if(scripts[index].src&&scripts[index].src.indexOf("/exceptionless")>-1)return Utils.parseQueryString(scripts[index].src.split("?").pop());return null}function processUnhandledException(stackTrace,options){var builder=ExceptionlessClient.default.createUnhandledException(new Error(stackTrace.message||(options||{}).status||"Script error"),"onerror");builder.pluginContextData["@@_TraceKit.StackTrace"]=stackTrace,builder.submit()}if("undefined"!=typeof document){Configuration.prototype.useLocalStorage=function(){BrowserStorage.isAvailable()&&(this.storage=new BrowserStorageProvider,SettingsManager.applySavedServerSettings(this),this.changed())};var defaults=Configuration.defaults,settings=getDefaultsSettingsFromScriptTag();settings&&(settings.apiKey||settings.serverUrl)&&(defaults.apiKey=settings.apiKey,defaults.serverUrl=settings.serverUrl),defaults.errorParser=new DefaultErrorParser,defaults.moduleCollector=new DefaultModuleCollector,defaults.requestInfoCollector=new DefaultRequestInfoCollector,defaults.submissionAdapter=new DefaultSubmissionAdapter,TraceKit.report.subscribe(processUnhandledException),TraceKit.extendToAsynchronousCallbacks(),Error.stackTraceLimit=1/0}}(),exports})),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):global.moment=factory()}(this,(function(){"use strict";var hookCallback,some;function hooks(){return hookCallback.apply(null,arguments)}function setHookCallback(callback){hookCallback=callback}function isArray(input){return input instanceof Array||"[object Array]"===Object.prototype.toString.call(input)}function isObject(input){return null!=input&&"[object Object]"===Object.prototype.toString.call(input)}function isObjectEmpty(obj){var k;for(k in obj)return!1;return!0}function isUndefined(input){return void 0===input}function isNumber(input){return"number"==typeof input||"[object Number]"===Object.prototype.toString.call(input)}function isDate(input){return input instanceof Date||"[object Date]"===Object.prototype.toString.call(input)}function map(arr,fn){var res=[],i;for(i=0;i<arr.length;++i)res.push(fn(arr[i],i));return res}function hasOwnProp(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function extend(a,b){for(var i in b)hasOwnProp(b,i)&&(a[i]=b[i]);return hasOwnProp(b,"toString")&&(a.toString=b.toString),hasOwnProp(b,"valueOf")&&(a.valueOf=b.valueOf),a}function createUTC(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,!0).utc()}function defaultParsingFlags(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function getParsingFlags(m){return null==m._pf&&(m._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),m._pf}var some$1=some=Array.prototype.some?Array.prototype.some:function(fun){for(var t=Object(this),len=t.length>>>0,i=0;i<len;i++)if(i in t&&fun.call(this,t[i],i,t))return!0;return!1};function isValid(m){if(null==m._isValid){var flags=getParsingFlags(m),parsedParts=some$1.call(flags.parsedDateParts,(function(i){return null!=i})),isNowValid=!isNaN(m._d.getTime())&&flags.overflow<0&&!flags.empty&&!flags.invalidMonth&&!flags.invalidWeekday&&!flags.nullInput&&!flags.invalidFormat&&!flags.userInvalidated&&(!flags.meridiem||flags.meridiem&&parsedParts);if(m._strict&&(isNowValid=isNowValid&&0===flags.charsLeftOver&&0===flags.unusedTokens.length&&void 0===flags.bigHour),null!=Object.isFrozen&&Object.isFrozen(m))return isNowValid;m._isValid=isNowValid}return m._isValid}function createInvalid(flags){var m=createUTC(NaN);return null!=flags?extend(getParsingFlags(m),flags):getParsingFlags(m).userInvalidated=!0,m}var momentProperties=hooks.momentProperties=[];function copyConfig(to,from){var i,prop,val;if(isUndefined(from._isAMomentObject)||(to._isAMomentObject=from._isAMomentObject),isUndefined(from._i)||(to._i=from._i),isUndefined(from._f)||(to._f=from._f),isUndefined(from._l)||(to._l=from._l),isUndefined(from._strict)||(to._strict=from._strict),isUndefined(from._tzm)||(to._tzm=from._tzm),isUndefined(from._isUTC)||(to._isUTC=from._isUTC),isUndefined(from._offset)||(to._offset=from._offset),isUndefined(from._pf)||(to._pf=getParsingFlags(from)),isUndefined(from._locale)||(to._locale=from._locale),momentProperties.length>0)for(i=0;i<momentProperties.length;i++)isUndefined(val=from[prop=momentProperties[i]])||(to[prop]=val);return to}var updateInProgress=!1;function Moment(config){copyConfig(this,config),this._d=new Date(null!=config._d?config._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===updateInProgress&&(updateInProgress=!0,hooks.updateOffset(this),updateInProgress=!1)}function isMoment(obj){return obj instanceof Moment||null!=obj&&null!=obj._isAMomentObject}function absFloor(number){return number<0?Math.ceil(number)||0:Math.floor(number)}function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;return 0!==coercedNumber&&isFinite(coercedNumber)&&(value=absFloor(coercedNumber)),value}function compareArrays(array1,array2,dontConvert){var len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0,i;for(i=0;i<len;i++)(dontConvert&&array1[i]!==array2[i]||!dontConvert&&toInt(array1[i])!==toInt(array2[i]))&&diffs++;return diffs+lengthDiff}function warn(msg){!1===hooks.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+msg)}function deprecate(msg,fn){var firstTime=!0;return extend((function(){if(null!=hooks.deprecationHandler&&hooks.deprecationHandler(null,msg),firstTime){for(var args=[],arg,i=0;i<arguments.length;i++){if(arg="","object"==typeof arguments[i]){for(var key in arg+="\n["+i+"] ",arguments[0])arg+=key+": "+arguments[0][key]+", ";arg=arg.slice(0,-2)}else arg=arguments[i];args.push(arg)}warn(msg+"\nArguments: "+Array.prototype.slice.call(args).join("")+"\n"+(new Error).stack),firstTime=!1}return fn.apply(this,arguments)}),fn)}var deprecations={},keys;function deprecateSimple(name,msg){null!=hooks.deprecationHandler&&hooks.deprecationHandler(name,msg),deprecations[name]||(warn(msg),deprecations[name]=!0)}function isFunction(input){return input instanceof Function||"[object Function]"===Object.prototype.toString.call(input)}function set(config){var prop,i;for(i in config)isFunction(prop=config[i])?this[i]=prop:this["_"+i]=prop;this._config=config,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function mergeConfigs(parentConfig,childConfig){var res=extend({},parentConfig),prop;for(prop in childConfig)hasOwnProp(childConfig,prop)&&(isObject(parentConfig[prop])&&isObject(childConfig[prop])?(res[prop]={},extend(res[prop],parentConfig[prop]),extend(res[prop],childConfig[prop])):null!=childConfig[prop]?res[prop]=childConfig[prop]:delete res[prop]);for(prop in parentConfig)hasOwnProp(parentConfig,prop)&&!hasOwnProp(childConfig,prop)&&isObject(parentConfig[prop])&&(res[prop]=extend({},res[prop]));return res}function Locale(config){null!=config&&this.set(config)}hooks.suppressDeprecationWarnings=!1,hooks.deprecationHandler=null;var keys$1=keys=Object.keys?Object.keys:function(obj){var i,res=[];for(i in obj)hasOwnProp(obj,i)&&res.push(i);return res},defaultCalendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function calendar(key,mom,now){var output=this._calendar[key]||this._calendar.sameElse;return isFunction(output)?output.call(mom,now):output}var defaultLongDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function longDateFormat(key){var format=this._longDateFormat[key],formatUpper=this._longDateFormat[key.toUpperCase()];return format||!formatUpper?format:(this._longDateFormat[key]=formatUpper.replace(/MMMM|MM|DD|dddd/g,(function(val){return val.slice(1)})),this._longDateFormat[key])}var defaultInvalidDate="Invalid date";function invalidDate(){return this._invalidDate}var defaultOrdinal="%d",defaultDayOfMonthOrdinalParse=/\d{1,2}/;function ordinal(number){return this._ordinal.replace("%d",number)}var defaultRelativeTime={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function relativeTime(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return isFunction(output)?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number)}function pastFuture(diff,output){var format=this._relativeTime[diff>0?"future":"past"];return isFunction(format)?format(output):format.replace(/%s/i,output)}var aliases={};function addUnitAlias(unit,shorthand){var lowerCase=unit.toLowerCase();aliases[lowerCase]=aliases[lowerCase+"s"]=aliases[shorthand]=unit}function normalizeUnits(units){return"string"==typeof units?aliases[units]||aliases[units.toLowerCase()]:void 0}function normalizeObjectUnits(inputObject){var normalizedInput={},normalizedProp,prop;for(prop in inputObject)hasOwnProp(inputObject,prop)&&(normalizedProp=normalizeUnits(prop))&&(normalizedInput[normalizedProp]=inputObject[prop]);return normalizedInput}var priorities={};function addUnitPriority(unit,priority){priorities[unit]=priority}function getPrioritizedUnits(unitsObj){var units=[];for(var u in unitsObj)units.push({unit:u,priority:priorities[u]});return units.sort((function(a,b){return a.priority-b.priority})),units}function makeGetSet(unit,keepTime){return function(value){return null!=value?(set$1(this,unit,value),hooks.updateOffset(this,keepTime),this):get(this,unit)}}function get(mom,unit){return mom.isValid()?mom._d["get"+(mom._isUTC?"UTC":"")+unit]():NaN}function set$1(mom,unit,value){mom.isValid()&&mom._d["set"+(mom._isUTC?"UTC":"")+unit](value)}function stringGet(units){return isFunction(this[units=normalizeUnits(units)])?this[units]():this}function stringSet(units,value){if("object"==typeof units)for(var prioritized=getPrioritizedUnits(units=normalizeObjectUnits(units)),i=0;i<prioritized.length;i++)this[prioritized[i].unit](units[prioritized[i].unit]);else if(isFunction(this[units=normalizeUnits(units)]))return this[units](value);return this}function zeroFill(number,targetLength,forceSign){var absNumber=""+Math.abs(number),zerosToFill=targetLength-absNumber.length,sign;return(number>=0?forceSign?"+":"":"-")+Math.pow(10,Math.max(0,zerosToFill)).toString().substr(1)+absNumber}var formattingTokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,formatFunctions={},formatTokenFunctions={};function addFormatToken(token,padded,ordinal,callback){var func=callback;"string"==typeof callback&&(func=function(){return this[callback]()}),token&&(formatTokenFunctions[token]=func),padded&&(formatTokenFunctions[padded[0]]=function(){return zeroFill(func.apply(this,arguments),padded[1],padded[2])}),ordinal&&(formatTokenFunctions[ordinal]=function(){return this.localeData().ordinal(func.apply(this,arguments),token)})}function removeFormattingTokens(input){return input.match(/\[[\s\S]/)?input.replace(/^\[|\]$/g,""):input.replace(/\\/g,"")}function makeFormatFunction(format){var array=format.match(formattingTokens),i,length;for(i=0,length=array.length;i<length;i++)formatTokenFunctions[array[i]]?array[i]=formatTokenFunctions[array[i]]:array[i]=removeFormattingTokens(array[i]);return function(mom){var output="",i;for(i=0;i<length;i++)output+=isFunction(array[i])?array[i].call(mom,format):array[i];return output}}function formatMoment(m,format){return m.isValid()?(format=expandFormat(format,m.localeData()),formatFunctions[format]=formatFunctions[format]||makeFormatFunction(format),formatFunctions[format](m)):m.localeData().invalidDate()}function expandFormat(format,locale){var i=5;function replaceLongDateFormatTokens(input){return locale.longDateFormat(input)||input}for(localFormattingTokens.lastIndex=0;i>=0&&localFormattingTokens.test(format);)format=format.replace(localFormattingTokens,replaceLongDateFormatTokens),localFormattingTokens.lastIndex=0,i-=1;return format}var match1=/\d/,match2=/\d\d/,match3=/\d{3}/,match4=/\d{4}/,match6=/[+-]?\d{6}/,match1to2=/\d\d?/,match3to4=/\d\d\d\d?/,match5to6=/\d\d\d\d\d\d?/,match1to3=/\d{1,3}/,match1to4=/\d{1,4}/,match1to6=/[+-]?\d{1,6}/,matchUnsigned=/\d+/,matchSigned=/[+-]?\d+/,matchOffset=/Z|[+-]\d\d:?\d\d/gi,matchShortOffset=/Z|[+-]\d\d(?::?\d\d)?/gi,matchTimestamp=/[+-]?\d+(\.\d{1,3})?/,matchWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,regexes={};function addRegexToken(token,regex,strictRegex){regexes[token]=isFunction(regex)?regex:function(isStrict,localeData){return isStrict&&strictRegex?strictRegex:regex}}function getParseRegexForToken(token,config){return hasOwnProp(regexes,token)?regexes[token](config._strict,config._locale):new RegExp(unescapeFormat(token))}function unescapeFormat(s){return regexEscape(s.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(matched,p1,p2,p3,p4){return p1||p2||p3||p4})))}function regexEscape(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var tokens={};function addParseToken(token,callback){var i,func=callback;for("string"==typeof token&&(token=[token]),isNumber(callback)&&(func=function(input,array){array[callback]=toInt(input)}),i=0;i<token.length;i++)tokens[token[i]]=func}function addWeekParseToken(token,callback){addParseToken(token,(function(input,array,config,token){config._w=config._w||{},callback(input,config._w,config,token)}))}function addTimeToArrayFromToken(token,input,config){null!=input&&hasOwnProp(tokens,token)&&tokens[token](input,config._a,config,token)}var YEAR=0,MONTH=1,DATE=2,HOUR=3,MINUTE=4,SECOND=5,MILLISECOND=6,WEEK=7,WEEKDAY=8,indexOf,indexOf$1=indexOf=Array.prototype.indexOf?Array.prototype.indexOf:function(o){var i;for(i=0;i<this.length;++i)if(this[i]===o)return i;return-1};function daysInMonth(year,month){return new Date(Date.UTC(year,month+1,0)).getUTCDate()}addFormatToken("M",["MM",2],"Mo",(function(){return this.month()+1})),addFormatToken("MMM",0,0,(function(format){return this.localeData().monthsShort(this,format)})),addFormatToken("MMMM",0,0,(function(format){return this.localeData().months(this,format)})),addUnitAlias("month","M"),addUnitPriority("month",8),addRegexToken("M",match1to2),addRegexToken("MM",match1to2,match2),addRegexToken("MMM",(function(isStrict,locale){return locale.monthsShortRegex(isStrict)})),addRegexToken("MMMM",(function(isStrict,locale){return locale.monthsRegex(isStrict)})),addParseToken(["M","MM"],(function(input,array){array[1]=toInt(input)-1})),addParseToken(["MMM","MMMM"],(function(input,array,config,token){var month=config._locale.monthsParse(input,token,config._strict);null!=month?array[1]=month:getParsingFlags(config).invalidMonth=input}));var MONTHS_IN_FORMAT=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,defaultLocaleMonths="January_February_March_April_May_June_July_August_September_October_November_December".split("_");function localeMonths(m,format){return m?isArray(this._months)?this._months[m.month()]:this._months[(this._months.isFormat||MONTHS_IN_FORMAT).test(format)?"format":"standalone"][m.month()]:isArray(this._months)?this._months:this._months.standalone}var defaultLocaleMonthsShort="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function localeMonthsShort(m,format){return m?isArray(this._monthsShort)?this._monthsShort[m.month()]:this._monthsShort[MONTHS_IN_FORMAT.test(format)?"format":"standalone"][m.month()]:isArray(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function handleStrictParse(monthName,format,strict){var i,ii,mom,llc=monthName.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)mom=createUTC([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(mom,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(mom,"").toLocaleLowerCase();return strict?"MMM"===format?-1!==(ii=indexOf$1.call(this._shortMonthsParse,llc))?ii:null:-1!==(ii=indexOf$1.call(this._longMonthsParse,llc))?ii:null:"MMM"===format?-1!==(ii=indexOf$1.call(this._shortMonthsParse,llc))?ii:-1!==(ii=indexOf$1.call(this._longMonthsParse,llc))?ii:null:-1!==(ii=indexOf$1.call(this._longMonthsParse,llc))?ii:-1!==(ii=indexOf$1.call(this._shortMonthsParse,llc))?ii:null}function localeMonthsParse(monthName,format,strict){var i,mom,regex;if(this._monthsParseExact)return handleStrictParse.call(this,monthName,format,strict);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(mom=createUTC([2e3,i]),strict&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(mom,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(mom,"").replace(".","")+"$","i")),strict||this._monthsParse[i]||(regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,""),this._monthsParse[i]=new RegExp(regex.replace(".",""),"i")),strict&&"MMMM"===format&&this._longMonthsParse[i].test(monthName))return i;if(strict&&"MMM"===format&&this._shortMonthsParse[i].test(monthName))return i;if(!strict&&this._monthsParse[i].test(monthName))return i}}function setMonth(mom,value){var dayOfMonth;if(!mom.isValid())return mom;if("string"==typeof value)if(/^\d+$/.test(value))value=toInt(value);else if(!isNumber(value=mom.localeData().monthsParse(value)))return mom;return dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value)),mom._d["set"+(mom._isUTC?"UTC":"")+"Month"](value,dayOfMonth),mom}function getSetMonth(value){return null!=value?(setMonth(this,value),hooks.updateOffset(this,!0),this):get(this,"Month")}function getDaysInMonth(){return daysInMonth(this.year(),this.month())}var defaultMonthsShortRegex=matchWord;function monthsShortRegex(isStrict){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),isStrict?this._monthsShortStrictRegex:this._monthsShortRegex):(hasOwnProp(this,"_monthsShortRegex")||(this._monthsShortRegex=defaultMonthsShortRegex),this._monthsShortStrictRegex&&isStrict?this._monthsShortStrictRegex:this._monthsShortRegex)}var defaultMonthsRegex=matchWord;function monthsRegex(isStrict){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),isStrict?this._monthsStrictRegex:this._monthsRegex):(hasOwnProp(this,"_monthsRegex")||(this._monthsRegex=defaultMonthsRegex),this._monthsStrictRegex&&isStrict?this._monthsStrictRegex:this._monthsRegex)}function computeMonthsParse(){function cmpLenRev(a,b){return b.length-a.length}var shortPieces=[],longPieces=[],mixedPieces=[],i,mom;for(i=0;i<12;i++)mom=createUTC([2e3,i]),shortPieces.push(this.monthsShort(mom,"")),longPieces.push(this.months(mom,"")),mixedPieces.push(this.months(mom,"")),mixedPieces.push(this.monthsShort(mom,""));for(shortPieces.sort(cmpLenRev),longPieces.sort(cmpLenRev),mixedPieces.sort(cmpLenRev),i=0;i<12;i++)shortPieces[i]=regexEscape(shortPieces[i]),longPieces[i]=regexEscape(longPieces[i]);for(i=0;i<24;i++)mixedPieces[i]=regexEscape(mixedPieces[i]);this._monthsRegex=new RegExp("^("+mixedPieces.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+longPieces.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+shortPieces.join("|")+")","i")}function daysInYear(year){return isLeapYear(year)?366:365}function isLeapYear(year){return year%4==0&&year%100!=0||year%400==0}addFormatToken("Y",0,0,(function(){var y=this.year();return y<=9999?""+y:"+"+y})),addFormatToken(0,["YY",2],0,(function(){return this.year()%100})),addFormatToken(0,["YYYY",4],0,"year"),addFormatToken(0,["YYYYY",5],0,"year"),addFormatToken(0,["YYYYYY",6,!0],0,"year"),addUnitAlias("year","y"),addUnitPriority("year",1),addRegexToken("Y",matchSigned),addRegexToken("YY",match1to2,match2),addRegexToken("YYYY",match1to4,match4),addRegexToken("YYYYY",match1to6,match6),addRegexToken("YYYYYY",match1to6,match6),addParseToken(["YYYYY","YYYYYY"],0),addParseToken("YYYY",(function(input,array){array[0]=2===input.length?hooks.parseTwoDigitYear(input):toInt(input)})),addParseToken("YY",(function(input,array){array[0]=hooks.parseTwoDigitYear(input)})),addParseToken("Y",(function(input,array){array[0]=parseInt(input,10)})),hooks.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2e3)};var getSetYear=makeGetSet("FullYear",!0);function getIsLeapYear(){return isLeapYear(this.year())}function createDate(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);return y<100&&y>=0&&isFinite(date.getFullYear())&&date.setFullYear(y),date}function createUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));return y<100&&y>=0&&isFinite(date.getUTCFullYear())&&date.setUTCFullYear(y),date}function firstWeekOffset(year,dow,doy){var fwd=7+dow-doy,fwdlw;return-((7+createUTCDate(year,0,fwd).getUTCDay()-dow)%7)+fwd-1}function dayOfYearFromWeeks(year,week,weekday,dow,doy){var localWeekday,weekOffset,dayOfYear=1+7*(week-1)+(7+weekday-dow)%7+firstWeekOffset(year,dow,doy),resYear,resDayOfYear;return dayOfYear<=0?resDayOfYear=daysInYear(resYear=year-1)+dayOfYear:dayOfYear>daysInYear(year)?(resYear=year+1,resDayOfYear=dayOfYear-daysInYear(year)):(resYear=year,resDayOfYear=dayOfYear),{year:resYear,dayOfYear:resDayOfYear}}function weekOfYear(mom,dow,doy){var weekOffset=firstWeekOffset(mom.year(),dow,doy),week=Math.floor((mom.dayOfYear()-weekOffset-1)/7)+1,resWeek,resYear;return week<1?resWeek=week+weeksInYear(resYear=mom.year()-1,dow,doy):week>weeksInYear(mom.year(),dow,doy)?(resWeek=week-weeksInYear(mom.year(),dow,doy),resYear=mom.year()+1):(resYear=mom.year(),resWeek=week),{week:resWeek,year:resYear}}function weeksInYear(year,dow,doy){var weekOffset=firstWeekOffset(year,dow,doy),weekOffsetNext=firstWeekOffset(year+1,dow,doy);return(daysInYear(year)-weekOffset+weekOffsetNext)/7}function localeWeek(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week}addFormatToken("w",["ww",2],"wo","week"),addFormatToken("W",["WW",2],"Wo","isoWeek"),addUnitAlias("week","w"),addUnitAlias("isoWeek","W"),addUnitPriority("week",5),addUnitPriority("isoWeek",5),addRegexToken("w",match1to2),addRegexToken("ww",match1to2,match2),addRegexToken("W",match1to2),addRegexToken("WW",match1to2,match2),addWeekParseToken(["w","ww","W","WW"],(function(input,week,config,token){week[token.substr(0,1)]=toInt(input)}));var defaultLocaleWeek={dow:0,doy:6};function localeFirstDayOfWeek(){return this._week.dow}function localeFirstDayOfYear(){return this._week.doy}function getSetWeek(input){var week=this.localeData().week(this);return null==input?week:this.add(7*(input-week),"d")}function getSetISOWeek(input){var week=weekOfYear(this,1,4).week;return null==input?week:this.add(7*(input-week),"d")}function parseWeekday(input,locale){return"string"!=typeof input?input:isNaN(input)?"number"==typeof(input=locale.weekdaysParse(input))?input:null:parseInt(input,10)}function parseIsoWeekday(input,locale){return"string"==typeof input?locale.weekdaysParse(input)%7||7:isNaN(input)?null:input}addFormatToken("d",0,"do","day"),addFormatToken("dd",0,0,(function(format){return this.localeData().weekdaysMin(this,format)})),addFormatToken("ddd",0,0,(function(format){return this.localeData().weekdaysShort(this,format)})),addFormatToken("dddd",0,0,(function(format){return this.localeData().weekdays(this,format)})),addFormatToken("e",0,0,"weekday"),addFormatToken("E",0,0,"isoWeekday"),addUnitAlias("day","d"),addUnitAlias("weekday","e"),addUnitAlias("isoWeekday","E"),addUnitPriority("day",11),addUnitPriority("weekday",11),addUnitPriority("isoWeekday",11),addRegexToken("d",match1to2),addRegexToken("e",match1to2),addRegexToken("E",match1to2),addRegexToken("dd",(function(isStrict,locale){return locale.weekdaysMinRegex(isStrict)})),addRegexToken("ddd",(function(isStrict,locale){return locale.weekdaysShortRegex(isStrict)})),addRegexToken("dddd",(function(isStrict,locale){return locale.weekdaysRegex(isStrict)})),addWeekParseToken(["dd","ddd","dddd"],(function(input,week,config,token){var weekday=config._locale.weekdaysParse(input,token,config._strict);null!=weekday?week.d=weekday:getParsingFlags(config).invalidWeekday=input})),addWeekParseToken(["d","e","E"],(function(input,week,config,token){week[token]=toInt(input)}));var defaultLocaleWeekdays="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");function localeWeekdays(m,format){return m?isArray(this._weekdays)?this._weekdays[m.day()]:this._weekdays[this._weekdays.isFormat.test(format)?"format":"standalone"][m.day()]:isArray(this._weekdays)?this._weekdays:this._weekdays.standalone}var defaultLocaleWeekdaysShort="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function localeWeekdaysShort(m){return m?this._weekdaysShort[m.day()]:this._weekdaysShort}var defaultLocaleWeekdaysMin="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function localeWeekdaysMin(m){return m?this._weekdaysMin[m.day()]:this._weekdaysMin}function handleStrictParse$1(weekdayName,format,strict){var i,ii,mom,llc=weekdayName.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)mom=createUTC([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(mom,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(mom,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(mom,"").toLocaleLowerCase();return strict?"dddd"===format?-1!==(ii=indexOf$1.call(this._weekdaysParse,llc))?ii:null:"ddd"===format?-1!==(ii=indexOf$1.call(this._shortWeekdaysParse,llc))?ii:null:-1!==(ii=indexOf$1.call(this._minWeekdaysParse,llc))?ii:null:"dddd"===format?-1!==(ii=indexOf$1.call(this._weekdaysParse,llc))?ii:-1!==(ii=indexOf$1.call(this._shortWeekdaysParse,llc))?ii:-1!==(ii=indexOf$1.call(this._minWeekdaysParse,llc))?ii:null:"ddd"===format?-1!==(ii=indexOf$1.call(this._shortWeekdaysParse,llc))?ii:-1!==(ii=indexOf$1.call(this._weekdaysParse,llc))?ii:-1!==(ii=indexOf$1.call(this._minWeekdaysParse,llc))?ii:null:-1!==(ii=indexOf$1.call(this._minWeekdaysParse,llc))?ii:-1!==(ii=indexOf$1.call(this._weekdaysParse,llc))?ii:-1!==(ii=indexOf$1.call(this._shortWeekdaysParse,llc))?ii:null}function localeWeekdaysParse(weekdayName,format,strict){var i,mom,regex;if(this._weekdaysParseExact)return handleStrictParse$1.call(this,weekdayName,format,strict);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(mom=createUTC([2e3,1]).day(i),strict&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(mom,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(mom,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(mom,"").replace(".",".?")+"$","i")),this._weekdaysParse[i]||(regex="^"+this.weekdays(mom,"")+"|^"+this.weekdaysShort(mom,"")+"|^"+this.weekdaysMin(mom,""),this._weekdaysParse[i]=new RegExp(regex.replace(".",""),"i")),strict&&"dddd"===format&&this._fullWeekdaysParse[i].test(weekdayName))return i;if(strict&&"ddd"===format&&this._shortWeekdaysParse[i].test(weekdayName))return i;if(strict&&"dd"===format&&this._minWeekdaysParse[i].test(weekdayName))return i;if(!strict&&this._weekdaysParse[i].test(weekdayName))return i}}function getSetDayOfWeek(input){if(!this.isValid())return null!=input?this:NaN;var day=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=input?(input=parseWeekday(input,this.localeData()),this.add(input-day,"d")):day}function getSetLocaleDayOfWeek(input){if(!this.isValid())return null!=input?this:NaN;var weekday=(this.day()+7-this.localeData()._week.dow)%7;return null==input?weekday:this.add(input-weekday,"d")}function getSetISODayOfWeek(input){if(!this.isValid())return null!=input?this:NaN;if(null!=input){var weekday=parseIsoWeekday(input,this.localeData());return this.day(this.day()%7?weekday:weekday-7)}return this.day()||7}var defaultWeekdaysRegex=matchWord;function weekdaysRegex(isStrict){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),isStrict?this._weekdaysStrictRegex:this._weekdaysRegex):(hasOwnProp(this,"_weekdaysRegex")||(this._weekdaysRegex=defaultWeekdaysRegex),this._weekdaysStrictRegex&&isStrict?this._weekdaysStrictRegex:this._weekdaysRegex)}var defaultWeekdaysShortRegex=matchWord;function weekdaysShortRegex(isStrict){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),isStrict?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(hasOwnProp(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=defaultWeekdaysShortRegex),this._weekdaysShortStrictRegex&&isStrict?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}var defaultWeekdaysMinRegex=matchWord;function weekdaysMinRegex(isStrict){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),isStrict?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(hasOwnProp(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=defaultWeekdaysMinRegex),this._weekdaysMinStrictRegex&&isStrict?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function computeWeekdaysParse(){function cmpLenRev(a,b){return b.length-a.length}var minPieces=[],shortPieces=[],longPieces=[],mixedPieces=[],i,mom,minp,shortp,longp;for(i=0;i<7;i++)mom=createUTC([2e3,1]).day(i),minp=this.weekdaysMin(mom,""),shortp=this.weekdaysShort(mom,""),longp=this.weekdays(mom,""),minPieces.push(minp),shortPieces.push(shortp),longPieces.push(longp),mixedPieces.push(minp),mixedPieces.push(shortp),mixedPieces.push(longp);for(minPieces.sort(cmpLenRev),shortPieces.sort(cmpLenRev),longPieces.sort(cmpLenRev),mixedPieces.sort(cmpLenRev),i=0;i<7;i++)shortPieces[i]=regexEscape(shortPieces[i]),longPieces[i]=regexEscape(longPieces[i]),mixedPieces[i]=regexEscape(mixedPieces[i]);this._weekdaysRegex=new RegExp("^("+mixedPieces.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+longPieces.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+shortPieces.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+minPieces.join("|")+")","i")}function hFormat(){return this.hours()%12||12}function kFormat(){return this.hours()||24}function meridiem(token,lowercase){addFormatToken(token,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),lowercase)}))}function matchMeridiem(isStrict,locale){return locale._meridiemParse}function localeIsPM(input){return"p"===(input+"").toLowerCase().charAt(0)}addFormatToken("H",["HH",2],0,"hour"),addFormatToken("h",["hh",2],0,hFormat),addFormatToken("k",["kk",2],0,kFormat),addFormatToken("hmm",0,0,(function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)})),addFormatToken("hmmss",0,0,(function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)})),addFormatToken("Hmm",0,0,(function(){return""+this.hours()+zeroFill(this.minutes(),2)})),addFormatToken("Hmmss",0,0,(function(){return""+this.hours()+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)})),meridiem("a",!0),meridiem("A",!1),addUnitAlias("hour","h"),addUnitPriority("hour",13),addRegexToken("a",matchMeridiem),addRegexToken("A",matchMeridiem),addRegexToken("H",match1to2),addRegexToken("h",match1to2),addRegexToken("k",match1to2),addRegexToken("HH",match1to2,match2),addRegexToken("hh",match1to2,match2),addRegexToken("kk",match1to2,match2),addRegexToken("hmm",match3to4),addRegexToken("hmmss",match5to6),addRegexToken("Hmm",match3to4),addRegexToken("Hmmss",match5to6),addParseToken(["H","HH"],3),addParseToken(["k","kk"],(function(input,array,config){var kInput=toInt(input);array[3]=24===kInput?0:kInput})),addParseToken(["a","A"],(function(input,array,config){config._isPm=config._locale.isPM(input),config._meridiem=input})),addParseToken(["h","hh"],(function(input,array,config){array[3]=toInt(input),getParsingFlags(config).bigHour=!0})),addParseToken("hmm",(function(input,array,config){var pos=input.length-2;array[3]=toInt(input.substr(0,pos)),array[4]=toInt(input.substr(pos)),getParsingFlags(config).bigHour=!0})),addParseToken("hmmss",(function(input,array,config){var pos1=input.length-4,pos2=input.length-2;array[3]=toInt(input.substr(0,pos1)),array[4]=toInt(input.substr(pos1,2)),array[5]=toInt(input.substr(pos2)),getParsingFlags(config).bigHour=!0})),addParseToken("Hmm",(function(input,array,config){var pos=input.length-2;array[3]=toInt(input.substr(0,pos)),array[4]=toInt(input.substr(pos))})),addParseToken("Hmmss",(function(input,array,config){var pos1=input.length-4,pos2=input.length-2;array[3]=toInt(input.substr(0,pos1)),array[4]=toInt(input.substr(pos1,2)),array[5]=toInt(input.substr(pos2))}));var defaultLocaleMeridiemParse=/[ap]\.?m?\.?/i;function localeMeridiem(hours,minutes,isLower){return hours>11?isLower?"pm":"PM":isLower?"am":"AM"}var getSetHour=makeGetSet("Hours",!0),baseConfig={calendar:defaultCalendar,longDateFormat:defaultLongDateFormat,invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:defaultDayOfMonthOrdinalParse,relativeTime:defaultRelativeTime,months:defaultLocaleMonths,monthsShort:defaultLocaleMonthsShort,week:defaultLocaleWeek,weekdays:defaultLocaleWeekdays,weekdaysMin:defaultLocaleWeekdaysMin,weekdaysShort:defaultLocaleWeekdaysShort,meridiemParse:defaultLocaleMeridiemParse},locales={},localeFamilies={},globalLocale;function normalizeLocale(key){return key?key.toLowerCase().replace("_","-"):key}function chooseLocale(names){for(var i=0,j,next,locale,split;i<names.length;){for(j=(split=normalizeLocale(names[i]).split("-")).length,next=(next=normalizeLocale(names[i+1]))?next.split("-"):null;j>0;){if(locale=loadLocale(split.slice(0,j).join("-")))return locale;if(next&&next.length>=j&&compareArrays(split,next,!0)>=j-1)break;j--}i++}return null}function loadLocale(name){var oldLocale=null;if(!locales[name]&&"undefined"!=typeof module&&module&&module.exports)try{oldLocale=globalLocale._abbr,require("./locale/"+name),getSetGlobalLocale(oldLocale)}catch(e){}return locales[name]}function getSetGlobalLocale(key,values){var data;return key&&(data=isUndefined(values)?getLocale(key):defineLocale(key,values))&&(globalLocale=data),globalLocale._abbr}function defineLocale(name,config){if(null!==config){var parentConfig=baseConfig;if(config.abbr=name,null!=locales[name])deprecateSimple("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),parentConfig=locales[name]._config;else if(null!=config.parentLocale){if(null==locales[config.parentLocale])return localeFamilies[config.parentLocale]||(localeFamilies[config.parentLocale]=[]),localeFamilies[config.parentLocale].push({name:name,config:config}),null;parentConfig=locales[config.parentLocale]._config}return locales[name]=new Locale(mergeConfigs(parentConfig,config)),localeFamilies[name]&&localeFamilies[name].forEach((function(x){defineLocale(x.name,x.config)})),getSetGlobalLocale(name),locales[name]}return delete locales[name],null}function updateLocale(name,config){if(null!=config){var locale,parentConfig=baseConfig;null!=locales[name]&&(parentConfig=locales[name]._config),(locale=new Locale(config=mergeConfigs(parentConfig,config))).parentLocale=locales[name],locales[name]=locale,getSetGlobalLocale(name)}else null!=locales[name]&&(null!=locales[name].parentLocale?locales[name]=locales[name].parentLocale:null!=locales[name]&&delete locales[name]);return locales[name]}function getLocale(key){var locale;if(key&&key._locale&&key._locale._abbr&&(key=key._locale._abbr),!key)return globalLocale;if(!isArray(key)){if(locale=loadLocale(key))return locale;key=[key]}return chooseLocale(key)}function listLocales(){return keys$1(locales)}function checkOverflow(m){var overflow,a=m._a;return a&&-2===getParsingFlags(m).overflow&&(overflow=a[1]<0||a[1]>11?1:a[2]<1||a[2]>daysInMonth(a[0],a[1])?2:a[3]<0||a[3]>24||24===a[3]&&(0!==a[4]||0!==a[5]||0!==a[6])?3:a[4]<0||a[4]>59?4:a[5]<0||a[5]>59?5:a[6]<0||a[6]>999?6:-1,getParsingFlags(m)._overflowDayOfYear&&(overflow<0||overflow>2)&&(overflow=2),getParsingFlags(m)._overflowWeeks&&-1===overflow&&(overflow=7),getParsingFlags(m)._overflowWeekday&&-1===overflow&&(overflow=8),getParsingFlags(m).overflow=overflow),m}var extendedIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,basicIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,tzRegex=/Z|[+-]\d\d(?::?\d\d)?/,isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],isoTimes=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],aspNetJsonRegex=/^\/?Date\((\-?\d+)/i;function configFromISO(config){var i,l,string=config._i,match=extendedIsoRegex.exec(string)||basicIsoRegex.exec(string),allowTime,dateFormat,timeFormat,tzFormat;if(match){for(getParsingFlags(config).iso=!0,i=0,l=isoDates.length;i<l;i++)if(isoDates[i][1].exec(match[1])){dateFormat=isoDates[i][0],allowTime=!1!==isoDates[i][2];break}if(null==dateFormat)return void(config._isValid=!1);if(match[3]){for(i=0,l=isoTimes.length;i<l;i++)if(isoTimes[i][1].exec(match[3])){timeFormat=(match[2]||" ")+isoTimes[i][0];break}if(null==timeFormat)return void(config._isValid=!1)}if(!allowTime&&null!=timeFormat)return void(config._isValid=!1);if(match[4]){if(!tzRegex.exec(match[4]))return void(config._isValid=!1);tzFormat="Z"}config._f=dateFormat+(timeFormat||"")+(tzFormat||""),configFromStringAndFormat(config)}else config._isValid=!1}var basicRfcRegex=/^((?:Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d?\d\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(?:\d\d)?\d\d\s)(\d\d:\d\d)(\:\d\d)?(\s(?:UT|GMT|[ECMP][SD]T|[A-IK-Za-ik-z]|[+-]\d{4}))$/;function configFromRFC2822(config){var string,match,dayFormat,dateFormat,timeFormat,tzFormat,timezones={" GMT":" +0000"," EDT":" -0400"," EST":" -0500"," CDT":" -0500"," CST":" -0600"," MDT":" -0600"," MST":" -0700"," PDT":" -0700"," PST":" -0800"},military="YXWVUTSRQPONZABCDEFGHIKLM",timezone,timezoneIndex;if(string=config._i.replace(/\([^\)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s|\s$/g,""),match=basicRfcRegex.exec(string)){if(dayFormat=match[1]?"ddd"+(5===match[1].length?", ":" "):"",dateFormat="D MMM "+(match[2].length>10?"YYYY ":"YY "),timeFormat="HH:mm"+(match[4]?":ss":""),match[1]){var momentDate,momentDay=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][new Date(match[2]).getDay()];if(match[1].substr(0,3)!==momentDay)return getParsingFlags(config).weekdayMismatch=!0,void(config._isValid=!1)}switch(match[5].length){case 2:timezone=0===timezoneIndex?" +0000":((timezoneIndex=military.indexOf(match[5][1].toUpperCase())-12)<0?" -":" +")+(""+timezoneIndex).replace(/^-?/,"0").match(/..$/)[0]+"00";break;case 4:timezone=timezones[match[5]];break;default:timezone=timezones[" GMT"]}match[5]=timezone,config._i=match.splice(1).join(""),tzFormat=" ZZ",config._f=dayFormat+dateFormat+timeFormat+" ZZ",configFromStringAndFormat(config),getParsingFlags(config).rfc2822=!0}else config._isValid=!1}function configFromString(config){var matched=aspNetJsonRegex.exec(config._i);null===matched?(configFromISO(config),!1===config._isValid&&(delete config._isValid,configFromRFC2822(config),!1===config._isValid&&(delete config._isValid,hooks.createFromInputFallback(config)))):config._d=new Date(+matched[1])}function defaults(a,b,c){return null!=a?a:null!=b?b:c}function currentDateArray(config){var nowValue=new Date(hooks.now());return config._useUTC?[nowValue.getUTCFullYear(),nowValue.getUTCMonth(),nowValue.getUTCDate()]:[nowValue.getFullYear(),nowValue.getMonth(),nowValue.getDate()]}function configFromArray(config){var i,date,input=[],currentDate,yearToUse;if(!config._d){for(currentDate=currentDateArray(config),config._w&&null==config._a[2]&&null==config._a[1]&&dayOfYearFromWeekInfo(config),null!=config._dayOfYear&&(yearToUse=defaults(config._a[0],currentDate[0]),(config._dayOfYear>daysInYear(yearToUse)||0===config._dayOfYear)&&(getParsingFlags(config)._overflowDayOfYear=!0),date=createUTCDate(yearToUse,0,config._dayOfYear),config._a[1]=date.getUTCMonth(),config._a[2]=date.getUTCDate()),i=0;i<3&&null==config._a[i];++i)config._a[i]=input[i]=currentDate[i];for(;i<7;i++)config._a[i]=input[i]=null==config._a[i]?2===i?1:0:config._a[i];24===config._a[3]&&0===config._a[4]&&0===config._a[5]&&0===config._a[6]&&(config._nextDay=!0,config._a[3]=0),config._d=(config._useUTC?createUTCDate:createDate).apply(null,input),null!=config._tzm&&config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm),config._nextDay&&(config._a[3]=24)}}function dayOfYearFromWeekInfo(config){var w,weekYear,week,weekday,dow,doy,temp,weekdayOverflow;if(null!=(w=config._w).GG||null!=w.W||null!=w.E)dow=1,doy=4,weekYear=defaults(w.GG,config._a[0],weekOfYear(createLocal(),1,4).year),week=defaults(w.W,1),((weekday=defaults(w.E,1))<1||weekday>7)&&(weekdayOverflow=!0);else{dow=config._locale._week.dow,doy=config._locale._week.doy;var curWeek=weekOfYear(createLocal(),dow,doy);weekYear=defaults(w.gg,config._a[0],curWeek.year),week=defaults(w.w,curWeek.week),null!=w.d?((weekday=w.d)<0||weekday>6)&&(weekdayOverflow=!0):null!=w.e?(weekday=w.e+dow,(w.e<0||w.e>6)&&(weekdayOverflow=!0)):weekday=dow}week<1||week>weeksInYear(weekYear,dow,doy)?getParsingFlags(config)._overflowWeeks=!0:null!=weekdayOverflow?getParsingFlags(config)._overflowWeekday=!0:(temp=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy),config._a[0]=temp.year,config._dayOfYear=temp.dayOfYear)}function configFromStringAndFormat(config){if(config._f!==hooks.ISO_8601)if(config._f!==hooks.RFC_2822){config._a=[],getParsingFlags(config).empty=!0;var string=""+config._i,i,parsedInput,tokens,token,skipped,stringLength=string.length,totalParsedInputLength=0;for(tokens=expandFormat(config._f,config._locale).match(formattingTokens)||[],i=0;i<tokens.length;i++)token=tokens[i],(parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0])&&((skipped=string.substr(0,string.indexOf(parsedInput))).length>0&&getParsingFlags(config).unusedInput.push(skipped),string=string.slice(string.indexOf(parsedInput)+parsedInput.length),totalParsedInputLength+=parsedInput.length),formatTokenFunctions[token]?(parsedInput?getParsingFlags(config).empty=!1:getParsingFlags(config).unusedTokens.push(token),addTimeToArrayFromToken(token,parsedInput,config)):config._strict&&!parsedInput&&getParsingFlags(config).unusedTokens.push(token);getParsingFlags(config).charsLeftOver=stringLength-totalParsedInputLength,string.length>0&&getParsingFlags(config).unusedInput.push(string),config._a[3]<=12&&!0===getParsingFlags(config).bigHour&&config._a[3]>0&&(getParsingFlags(config).bigHour=void 0),getParsingFlags(config).parsedDateParts=config._a.slice(0),getParsingFlags(config).meridiem=config._meridiem,config._a[3]=meridiemFixWrap(config._locale,config._a[3],config._meridiem),configFromArray(config),checkOverflow(config)}else configFromRFC2822(config);else configFromISO(config)}function meridiemFixWrap(locale,hour,meridiem){var isPm;return null==meridiem?hour:null!=locale.meridiemHour?locale.meridiemHour(hour,meridiem):null!=locale.isPM?((isPm=locale.isPM(meridiem))&&hour<12&&(hour+=12),isPm||12!==hour||(hour=0),hour):hour}function configFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(0===config._f.length)return getParsingFlags(config).invalidFormat=!0,void(config._d=new Date(NaN));for(i=0;i<config._f.length;i++)currentScore=0,tempConfig=copyConfig({},config),null!=config._useUTC&&(tempConfig._useUTC=config._useUTC),tempConfig._f=config._f[i],configFromStringAndFormat(tempConfig),isValid(tempConfig)&&(currentScore+=getParsingFlags(tempConfig).charsLeftOver,currentScore+=10*getParsingFlags(tempConfig).unusedTokens.length,getParsingFlags(tempConfig).score=currentScore,(null==scoreToBeat||currentScore<scoreToBeat)&&(scoreToBeat=currentScore,bestMoment=tempConfig));extend(config,bestMoment||tempConfig)}function configFromObject(config){if(!config._d){var i=normalizeObjectUnits(config._i);config._a=map([i.year,i.month,i.day||i.date,i.hour,i.minute,i.second,i.millisecond],(function(obj){return obj&&parseInt(obj,10)})),configFromArray(config)}}function createFromConfig(config){var res=new Moment(checkOverflow(prepareConfig(config)));return res._nextDay&&(res.add(1,"d"),res._nextDay=void 0),res}function prepareConfig(config){var input=config._i,format=config._f;return config._locale=config._locale||getLocale(config._l),null===input||void 0===format&&""===input?createInvalid({nullInput:!0}):("string"==typeof input&&(config._i=input=config._locale.preparse(input)),isMoment(input)?new Moment(checkOverflow(input)):(isDate(input)?config._d=input:isArray(format)?configFromStringAndArray(config):format?configFromStringAndFormat(config):configFromInput(config),isValid(config)||(config._d=null),config))}function configFromInput(config){var input=config._i;isUndefined(input)?config._d=new Date(hooks.now()):isDate(input)?config._d=new Date(input.valueOf()):"string"==typeof input?configFromString(config):isArray(input)?(config._a=map(input.slice(0),(function(obj){return parseInt(obj,10)})),configFromArray(config)):isObject(input)?configFromObject(config):isNumber(input)?config._d=new Date(input):hooks.createFromInputFallback(config)}function createLocalOrUTC(input,format,locale,strict,isUTC){var c={};return!0!==locale&&!1!==locale||(strict=locale,locale=void 0),(isObject(input)&&isObjectEmpty(input)||isArray(input)&&0===input.length)&&(input=void 0),c._isAMomentObject=!0,c._useUTC=c._isUTC=isUTC,c._l=locale,c._i=input,c._f=format,c._strict=strict,createFromConfig(c)}function createLocal(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,!1)}hooks.createFromInputFallback=deprecate("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(config){config._d=new Date(config._i+(config._useUTC?" UTC":""))})),hooks.ISO_8601=function(){},hooks.RFC_2822=function(){};var prototypeMin=deprecate("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var other=createLocal.apply(null,arguments);return this.isValid()&&other.isValid()?other<this?this:other:createInvalid()})),prototypeMax=deprecate("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var other=createLocal.apply(null,arguments);return this.isValid()&&other.isValid()?other>this?this:other:createInvalid()}));function pickBy(fn,moments){var res,i;if(1===moments.length&&isArray(moments[0])&&(moments=moments[0]),!moments.length)return createLocal();for(res=moments[0],i=1;i<moments.length;++i)moments[i].isValid()&&!moments[i][fn](res)||(res=moments[i]);return res}function min(){var args=[].slice.call(arguments,0);return pickBy("isBefore",args)}function max(){var args=[].slice.call(arguments,0);return pickBy("isAfter",args)}var now=function(){return Date.now?Date.now():+new Date},ordering=["year","quarter","month","week","day","hour","minute","second","millisecond"];function isDurationValid(m){for(var key in m)if(-1===ordering.indexOf(key)||null!=m[key]&&isNaN(m[key]))return!1;for(var unitHasDecimal=!1,i=0;i<ordering.length;++i)if(m[ordering[i]]){if(unitHasDecimal)return!1;parseFloat(m[ordering[i]])!==toInt(m[ordering[i]])&&(unitHasDecimal=!0)}return!0}function isValid$1(){return this._isValid}function createInvalid$1(){return createDuration(NaN)}function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._isValid=isDurationValid(normalizedInput),this._milliseconds=+milliseconds+1e3*seconds+6e4*minutes+1e3*hours*60*60,this._days=+days+7*weeks,this._months=+months+3*quarters+12*years,this._data={},this._locale=getLocale(),this._bubble()}function isDuration(obj){return obj instanceof Duration}function absRound(number){return number<0?-1*Math.round(-1*number):Math.round(number)}function offset(token,separator){addFormatToken(token,0,0,(function(){var offset=this.utcOffset(),sign="+";return offset<0&&(offset=-offset,sign="-"),sign+zeroFill(~~(offset/60),2)+separator+zeroFill(~~offset%60,2)}))}offset("Z",":"),offset("ZZ",""),addRegexToken("Z",matchShortOffset),addRegexToken("ZZ",matchShortOffset),addParseToken(["Z","ZZ"],(function(input,array,config){config._useUTC=!0,config._tzm=offsetFromString(matchShortOffset,input)}));var chunkOffset=/([\+\-]|\d\d)/gi;function offsetFromString(matcher,string){var matches=(string||"").match(matcher);if(null===matches)return null;var chunk,parts=((matches[matches.length-1]||[])+"").match(chunkOffset)||["-",0,0],minutes=60*parts[1]+toInt(parts[2]);return 0===minutes?0:"+"===parts[0]?minutes:-minutes}function cloneWithOffset(input,model){var res,diff;return model._isUTC?(res=model.clone(),diff=(isMoment(input)||isDate(input)?input.valueOf():createLocal(input).valueOf())-res.valueOf(),res._d.setTime(res._d.valueOf()+diff),hooks.updateOffset(res,!1),res):createLocal(input).local()}function getDateOffset(m){return 15*-Math.round(m._d.getTimezoneOffset()/15)}function getSetOffset(input,keepLocalTime,keepMinutes){var offset=this._offset||0,localAdjust;if(!this.isValid())return null!=input?this:NaN;if(null!=input){if("string"==typeof input){if(null===(input=offsetFromString(matchShortOffset,input)))return this}else Math.abs(input)<16&&!keepMinutes&&(input*=60);return!this._isUTC&&keepLocalTime&&(localAdjust=getDateOffset(this)),this._offset=input,this._isUTC=!0,null!=localAdjust&&this.add(localAdjust,"m"),offset!==input&&(!keepLocalTime||this._changeInProgress?addSubtract(this,createDuration(input-offset,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,hooks.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?offset:getDateOffset(this)}function getSetZone(input,keepLocalTime){return null!=input?("string"!=typeof input&&(input=-input),this.utcOffset(input,keepLocalTime),this):-this.utcOffset()}function setOffsetToUTC(keepLocalTime){return this.utcOffset(0,keepLocalTime)}function setOffsetToLocal(keepLocalTime){return this._isUTC&&(this.utcOffset(0,keepLocalTime),this._isUTC=!1,keepLocalTime&&this.subtract(getDateOffset(this),"m")),this}function setOffsetToParsedOffset(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var tZone=offsetFromString(matchOffset,this._i);null!=tZone?this.utcOffset(tZone):this.utcOffset(0,!0)}return this}function hasAlignedHourOffset(input){return!!this.isValid()&&(input=input?createLocal(input).utcOffset():0,(this.utcOffset()-input)%60==0)}function isDaylightSavingTime(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function isDaylightSavingTimeShifted(){if(!isUndefined(this._isDSTShifted))return this._isDSTShifted;var c={};if(copyConfig(c,this),(c=prepareConfig(c))._a){var other=c._isUTC?createUTC(c._a):createLocal(c._a);this._isDSTShifted=this.isValid()&&compareArrays(c._a,other.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function isLocal(){return!!this.isValid()&&!this._isUTC}function isUtcOffset(){return!!this.isValid()&&this._isUTC}function isUtc(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}hooks.updateOffset=function(){};var aspNetRegex=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,isoRegex=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;function createDuration(input,key){var duration=input,match=null,sign,ret,diffRes;return isDuration(input)?duration={ms:input._milliseconds,d:input._days,M:input._months}:isNumber(input)?(duration={},key?duration[key]=input:duration.milliseconds=input):(match=aspNetRegex.exec(input))?(sign="-"===match[1]?-1:1,duration={y:0,d:toInt(match[2])*sign,h:toInt(match[3])*sign,m:toInt(match[4])*sign,s:toInt(match[5])*sign,ms:toInt(absRound(1e3*match[6]))*sign}):(match=isoRegex.exec(input))?(sign="-"===match[1]?-1:1,duration={y:parseIso(match[2],sign),M:parseIso(match[3],sign),w:parseIso(match[4],sign),d:parseIso(match[5],sign),h:parseIso(match[6],sign),m:parseIso(match[7],sign),s:parseIso(match[8],sign)}):null==duration?duration={}:"object"==typeof duration&&("from"in duration||"to"in duration)&&(diffRes=momentsDifference(createLocal(duration.from),createLocal(duration.to)),(duration={}).ms=diffRes.milliseconds,duration.M=diffRes.months),ret=new Duration(duration),isDuration(input)&&hasOwnProp(input,"_locale")&&(ret._locale=input._locale),ret}function parseIso(inp,sign){var res=inp&&parseFloat(inp.replace(",","."));return(isNaN(res)?0:res)*sign}function positiveMomentsDifference(base,other){var res={milliseconds:0,months:0};return res.months=other.month()-base.month()+12*(other.year()-base.year()),base.clone().add(res.months,"M").isAfter(other)&&--res.months,res.milliseconds=+other-+base.clone().add(res.months,"M"),res}function momentsDifference(base,other){var res;return base.isValid()&&other.isValid()?(other=cloneWithOffset(other,base),base.isBefore(other)?res=positiveMomentsDifference(base,other):((res=positiveMomentsDifference(other,base)).milliseconds=-res.milliseconds,res.months=-res.months),res):{milliseconds:0,months:0}}function createAdder(direction,name){return function(val,period){var dur,tmp;return null===period||isNaN(+period)||(deprecateSimple(name,"moment()."+name+"(period, number) is deprecated. Please use moment()."+name+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),tmp=val,val=period,period=tmp),addSubtract(this,dur=createDuration(val="string"==typeof val?+val:val,period),direction),this}}function addSubtract(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=absRound(duration._days),months=absRound(duration._months);mom.isValid()&&(updateOffset=null==updateOffset||updateOffset,milliseconds&&mom._d.setTime(mom._d.valueOf()+milliseconds*isAdding),days&&set$1(mom,"Date",get(mom,"Date")+days*isAdding),months&&setMonth(mom,get(mom,"Month")+months*isAdding),updateOffset&&hooks.updateOffset(mom,days||months))}createDuration.fn=Duration.prototype,createDuration.invalid=createInvalid$1;var add=createAdder(1,"add"),subtract=createAdder(-1,"subtract");function getCalendarFormat(myMoment,now){var diff=myMoment.diff(now,"days",!0);return diff<-6?"sameElse":diff<-1?"lastWeek":diff<0?"lastDay":diff<1?"sameDay":diff<2?"nextDay":diff<7?"nextWeek":"sameElse"}function calendar$1(time,formats){var now=time||createLocal(),sod=cloneWithOffset(now,this).startOf("day"),format=hooks.calendarFormat(this,sod)||"sameElse",output=formats&&(isFunction(formats[format])?formats[format].call(this,now):formats[format]);return this.format(output||this.localeData().calendar(format,this,createLocal(now)))}function clone(){return new Moment(this)}function isAfter(input,units){var localInput=isMoment(input)?input:createLocal(input);return!(!this.isValid()||!localInput.isValid())&&("millisecond"===(units=normalizeUnits(isUndefined(units)?"millisecond":units))?this.valueOf()>localInput.valueOf():localInput.valueOf()<this.clone().startOf(units).valueOf())}function isBefore(input,units){var localInput=isMoment(input)?input:createLocal(input);return!(!this.isValid()||!localInput.isValid())&&("millisecond"===(units=normalizeUnits(isUndefined(units)?"millisecond":units))?this.valueOf()<localInput.valueOf():this.clone().endOf(units).valueOf()<localInput.valueOf())}function isBetween(from,to,units,inclusivity){return("("===(inclusivity=inclusivity||"()")[0]?this.isAfter(from,units):!this.isBefore(from,units))&&(")"===inclusivity[1]?this.isBefore(to,units):!this.isAfter(to,units))}function isSame(input,units){var localInput=isMoment(input)?input:createLocal(input),inputMs;return!(!this.isValid()||!localInput.isValid())&&("millisecond"===(units=normalizeUnits(units||"millisecond"))?this.valueOf()===localInput.valueOf():(inputMs=localInput.valueOf(),this.clone().startOf(units).valueOf()<=inputMs&&inputMs<=this.clone().endOf(units).valueOf()))}function isSameOrAfter(input,units){return this.isSame(input,units)||this.isAfter(input,units)}function isSameOrBefore(input,units){return this.isSame(input,units)||this.isBefore(input,units)}function diff(input,units,asFloat){var that,zoneDelta,delta,output;return this.isValid()&&(that=cloneWithOffset(input,this)).isValid()?(zoneDelta=6e4*(that.utcOffset()-this.utcOffset()),"year"===(units=normalizeUnits(units))||"month"===units||"quarter"===units?(output=monthDiff(this,that),"quarter"===units?output/=3:"year"===units&&(output/=12)):(delta=this-that,output="second"===units?delta/1e3:"minute"===units?delta/6e4:"hour"===units?delta/36e5:"day"===units?(delta-zoneDelta)/864e5:"week"===units?(delta-zoneDelta)/6048e5:delta),asFloat?output:absFloor(output)):NaN}function monthDiff(a,b){var wholeMonthDiff=12*(b.year()-a.year())+(b.month()-a.month()),anchor=a.clone().add(wholeMonthDiff,"months"),anchor2,adjust;return-(wholeMonthDiff+(adjust=b-anchor<0?(b-anchor)/(anchor-(anchor2=a.clone().add(wholeMonthDiff-1,"months"))):(b-anchor)/((anchor2=a.clone().add(wholeMonthDiff+1,"months"))-anchor)))||0}function toString(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function toISOString(){if(!this.isValid())return null;var m=this.clone().utc();return m.year()<0||m.year()>9999?formatMoment(m,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):isFunction(Date.prototype.toISOString)?this.toDate().toISOString():formatMoment(m,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function inspect(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var func="moment",zone="";this.isLocal()||(func=0===this.utcOffset()?"moment.utc":"moment.parseZone",zone="Z");var prefix="["+func+'("]',year=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",datetime="-MM-DD[T]HH:mm:ss.SSS",suffix=zone+'[")]';return this.format(prefix+year+datetime+suffix)}function format(inputString){inputString||(inputString=this.isUtc()?hooks.defaultFormatUtc:hooks.defaultFormat);var output=formatMoment(this,inputString);return this.localeData().postformat(output)}function from(time,withoutSuffix){return this.isValid()&&(isMoment(time)&&time.isValid()||createLocal(time).isValid())?createDuration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix):this.localeData().invalidDate()}function fromNow(withoutSuffix){return this.from(createLocal(),withoutSuffix)}function to(time,withoutSuffix){return this.isValid()&&(isMoment(time)&&time.isValid()||createLocal(time).isValid())?createDuration({from:this,to:time}).locale(this.locale()).humanize(!withoutSuffix):this.localeData().invalidDate()}function toNow(withoutSuffix){return this.to(createLocal(),withoutSuffix)}function locale(key){var newLocaleData;return void 0===key?this._locale._abbr:(null!=(newLocaleData=getLocale(key))&&(this._locale=newLocaleData),this)}hooks.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",hooks.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var lang=deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(key){return void 0===key?this.localeData():this.locale(key)}));function localeData(){return this._locale}function startOf(units){switch(units=normalizeUnits(units)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===units&&this.weekday(0),"isoWeek"===units&&this.isoWeekday(1),"quarter"===units&&this.month(3*Math.floor(this.month()/3)),this}function endOf(units){return void 0===(units=normalizeUnits(units))||"millisecond"===units?this:("date"===units&&(units="day"),this.startOf(units).add(1,"isoWeek"===units?"week":units).subtract(1,"ms"))}function valueOf(){return this._d.valueOf()-6e4*(this._offset||0)}function unix(){return Math.floor(this.valueOf()/1e3)}function toDate(){return new Date(this.valueOf())}function toArray(){var m=this;return[m.year(),m.month(),m.date(),m.hour(),m.minute(),m.second(),m.millisecond()]}function toObject(){var m=this;return{years:m.year(),months:m.month(),date:m.date(),hours:m.hours(),minutes:m.minutes(),seconds:m.seconds(),milliseconds:m.milliseconds()}}function toJSON(){return this.isValid()?this.toISOString():null}function isValid$2(){return isValid(this)}function parsingFlags(){return extend({},getParsingFlags(this))}function invalidAt(){return getParsingFlags(this).overflow}function creationData(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function addWeekYearFormatToken(token,getter){addFormatToken(0,[token,token.length],0,getter)}function getSetWeekYear(input){return getSetWeekYearHelper.call(this,input,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function getSetISOWeekYear(input){return getSetWeekYearHelper.call(this,input,this.isoWeek(),this.isoWeekday(),1,4)}function getISOWeeksInYear(){return weeksInYear(this.year(),1,4)}function getWeeksInYear(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy)}function getSetWeekYearHelper(input,week,weekday,dow,doy){var weeksTarget;return null==input?weekOfYear(this,dow,doy).year:(week>(weeksTarget=weeksInYear(input,dow,doy))&&(week=weeksTarget),setWeekAll.call(this,input,week,weekday,dow,doy))}function setWeekAll(weekYear,week,weekday,dow,doy){var dayOfYearData=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy),date=createUTCDate(dayOfYearData.year,0,dayOfYearData.dayOfYear);return this.year(date.getUTCFullYear()),this.month(date.getUTCMonth()),this.date(date.getUTCDate()),this}function getSetQuarter(input){return null==input?Math.ceil((this.month()+1)/3):this.month(3*(input-1)+this.month()%3)}addFormatToken(0,["gg",2],0,(function(){return this.weekYear()%100})),addFormatToken(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),addWeekYearFormatToken("gggg","weekYear"),addWeekYearFormatToken("ggggg","weekYear"),addWeekYearFormatToken("GGGG","isoWeekYear"),addWeekYearFormatToken("GGGGG","isoWeekYear"),addUnitAlias("weekYear","gg"),addUnitAlias("isoWeekYear","GG"),addUnitPriority("weekYear",1),addUnitPriority("isoWeekYear",1),addRegexToken("G",matchSigned),addRegexToken("g",matchSigned),addRegexToken("GG",match1to2,match2),addRegexToken("gg",match1to2,match2),addRegexToken("GGGG",match1to4,match4),addRegexToken("gggg",match1to4,match4),addRegexToken("GGGGG",match1to6,match6),addRegexToken("ggggg",match1to6,match6),addWeekParseToken(["gggg","ggggg","GGGG","GGGGG"],(function(input,week,config,token){week[token.substr(0,2)]=toInt(input)})),addWeekParseToken(["gg","GG"],(function(input,week,config,token){week[token]=hooks.parseTwoDigitYear(input)})),addFormatToken("Q",0,"Qo","quarter"),addUnitAlias("quarter","Q"),addUnitPriority("quarter",7),addRegexToken("Q",match1),addParseToken("Q",(function(input,array){array[1]=3*(toInt(input)-1)})),addFormatToken("D",["DD",2],"Do","date"),addUnitAlias("date","D"),addUnitPriority("date",9),addRegexToken("D",match1to2),addRegexToken("DD",match1to2,match2),addRegexToken("Do",(function(isStrict,locale){return isStrict?locale._dayOfMonthOrdinalParse||locale._ordinalParse:locale._dayOfMonthOrdinalParseLenient})),addParseToken(["D","DD"],2),addParseToken("Do",(function(input,array){array[2]=toInt(input.match(match1to2)[0],10)}));var getSetDayOfMonth=makeGetSet("Date",!0);function getSetDayOfYear(input){var dayOfYear=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==input?dayOfYear:this.add(input-dayOfYear,"d")}addFormatToken("DDD",["DDDD",3],"DDDo","dayOfYear"),addUnitAlias("dayOfYear","DDD"),addUnitPriority("dayOfYear",4),addRegexToken("DDD",match1to3),addRegexToken("DDDD",match3),addParseToken(["DDD","DDDD"],(function(input,array,config){config._dayOfYear=toInt(input)})),addFormatToken("m",["mm",2],0,"minute"),addUnitAlias("minute","m"),addUnitPriority("minute",14),addRegexToken("m",match1to2),addRegexToken("mm",match1to2,match2),addParseToken(["m","mm"],4);var getSetMinute=makeGetSet("Minutes",!1);addFormatToken("s",["ss",2],0,"second"),addUnitAlias("second","s"),addUnitPriority("second",15),addRegexToken("s",match1to2),addRegexToken("ss",match1to2,match2),addParseToken(["s","ss"],5);var getSetSecond=makeGetSet("Seconds",!1),token;for(addFormatToken("S",0,0,(function(){return~~(this.millisecond()/100)})),addFormatToken(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),addFormatToken(0,["SSS",3],0,"millisecond"),addFormatToken(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),addFormatToken(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),addFormatToken(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),addFormatToken(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),addFormatToken(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),addFormatToken(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),addUnitAlias("millisecond","ms"),addUnitPriority("millisecond",16),addRegexToken("S",match1to3,match1),addRegexToken("SS",match1to3,match2),addRegexToken("SSS",match1to3,match3),token="SSSS";token.length<=9;token+="S")addRegexToken(token,matchUnsigned);function parseMs(input,array){array[6]=toInt(1e3*("0."+input))}for(token="S";token.length<=9;token+="S")addParseToken(token,parseMs);var getSetMillisecond=makeGetSet("Milliseconds",!1);function getZoneAbbr(){return this._isUTC?"UTC":""}function getZoneName(){return this._isUTC?"Coordinated Universal Time":""}addFormatToken("z",0,0,"zoneAbbr"),addFormatToken("zz",0,0,"zoneName");var proto=Moment.prototype;function createUnix(input){return createLocal(1e3*input)}function createInZone(){return createLocal.apply(null,arguments).parseZone()}function preParsePostFormat(string){return string}proto.add=add,proto.calendar=calendar$1,proto.clone=clone,proto.diff=diff,proto.endOf=endOf,proto.format=format,proto.from=from,proto.fromNow=fromNow,proto.to=to,proto.toNow=toNow,proto.get=stringGet,proto.invalidAt=invalidAt,proto.isAfter=isAfter,proto.isBefore=isBefore,proto.isBetween=isBetween,proto.isSame=isSame,proto.isSameOrAfter=isSameOrAfter,proto.isSameOrBefore=isSameOrBefore,proto.isValid=isValid$2,proto.lang=lang,proto.locale=locale,proto.localeData=localeData,proto.max=prototypeMax,proto.min=prototypeMin,proto.parsingFlags=parsingFlags,proto.set=stringSet,proto.startOf=startOf,proto.subtract=subtract,proto.toArray=toArray,proto.toObject=toObject,proto.toDate=toDate,proto.toISOString=toISOString,proto.inspect=inspect,proto.toJSON=toJSON,proto.toString=toString,proto.unix=unix,proto.valueOf=valueOf,proto.creationData=creationData,proto.year=getSetYear,proto.isLeapYear=getIsLeapYear,proto.weekYear=getSetWeekYear,proto.isoWeekYear=getSetISOWeekYear,proto.quarter=proto.quarters=getSetQuarter,proto.month=getSetMonth,proto.daysInMonth=getDaysInMonth,proto.week=proto.weeks=getSetWeek,proto.isoWeek=proto.isoWeeks=getSetISOWeek,proto.weeksInYear=getWeeksInYear,proto.isoWeeksInYear=getISOWeeksInYear,proto.date=getSetDayOfMonth,proto.day=proto.days=getSetDayOfWeek,proto.weekday=getSetLocaleDayOfWeek,proto.isoWeekday=getSetISODayOfWeek,proto.dayOfYear=getSetDayOfYear,proto.hour=proto.hours=getSetHour,proto.minute=proto.minutes=getSetMinute,proto.second=proto.seconds=getSetSecond,proto.millisecond=proto.milliseconds=getSetMillisecond,proto.utcOffset=getSetOffset,proto.utc=setOffsetToUTC,proto.local=setOffsetToLocal,proto.parseZone=setOffsetToParsedOffset,proto.hasAlignedHourOffset=hasAlignedHourOffset,proto.isDST=isDaylightSavingTime,proto.isLocal=isLocal,proto.isUtcOffset=isUtcOffset,proto.isUtc=isUtc,proto.isUTC=isUtc,proto.zoneAbbr=getZoneAbbr,proto.zoneName=getZoneName,proto.dates=deprecate("dates accessor is deprecated. Use date instead.",getSetDayOfMonth),proto.months=deprecate("months accessor is deprecated. Use month instead",getSetMonth),proto.years=deprecate("years accessor is deprecated. Use year instead",getSetYear),proto.zone=deprecate("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",getSetZone),proto.isDSTShifted=deprecate("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",isDaylightSavingTimeShifted);var proto$1=Locale.prototype;function get$1(format,index,field,setter){var locale=getLocale(),utc=createUTC().set(setter,index);return locale[field](utc,format)}function listMonthsImpl(format,index,field){if(isNumber(format)&&(index=format,format=void 0),format=format||"",null!=index)return get$1(format,index,field,"month");var i,out=[];for(i=0;i<12;i++)out[i]=get$1(format,i,field,"month");return out}function listWeekdaysImpl(localeSorted,format,index,field){"boolean"==typeof localeSorted?(isNumber(format)&&(index=format,format=void 0),format=format||""):(index=format=localeSorted,localeSorted=!1,isNumber(format)&&(index=format,format=void 0),format=format||"");var locale=getLocale(),shift=localeSorted?locale._week.dow:0,i;if(null!=index)return get$1(format,(index+shift)%7,field,"day");var out=[];for(i=0;i<7;i++)out[i]=get$1(format,(i+shift)%7,field,"day");return out}function listMonths(format,index){return listMonthsImpl(format,index,"months")}function listMonthsShort(format,index){return listMonthsImpl(format,index,"monthsShort")}function listWeekdays(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,"weekdays")}function listWeekdaysShort(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,"weekdaysShort")}function listWeekdaysMin(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,"weekdaysMin")}proto$1.calendar=calendar,proto$1.longDateFormat=longDateFormat,proto$1.invalidDate=invalidDate,proto$1.ordinal=ordinal,proto$1.preparse=preParsePostFormat,proto$1.postformat=preParsePostFormat,proto$1.relativeTime=relativeTime,proto$1.pastFuture=pastFuture,proto$1.set=set,proto$1.months=localeMonths,proto$1.monthsShort=localeMonthsShort,proto$1.monthsParse=localeMonthsParse,proto$1.monthsRegex=monthsRegex,proto$1.monthsShortRegex=monthsShortRegex,proto$1.week=localeWeek,proto$1.firstDayOfYear=localeFirstDayOfYear,proto$1.firstDayOfWeek=localeFirstDayOfWeek,proto$1.weekdays=localeWeekdays,proto$1.weekdaysMin=localeWeekdaysMin,proto$1.weekdaysShort=localeWeekdaysShort,proto$1.weekdaysParse=localeWeekdaysParse,proto$1.weekdaysRegex=weekdaysRegex,proto$1.weekdaysShortRegex=weekdaysShortRegex,proto$1.weekdaysMinRegex=weekdaysMinRegex,proto$1.isPM=localeIsPM,proto$1.meridiem=localeMeridiem,getSetGlobalLocale("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10,output;return number+(1===toInt(number%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th")}}),hooks.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",getSetGlobalLocale),hooks.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",getLocale);var mathAbs=Math.abs;function abs(){var data=this._data;return this._milliseconds=mathAbs(this._milliseconds),this._days=mathAbs(this._days),this._months=mathAbs(this._months),data.milliseconds=mathAbs(data.milliseconds),data.seconds=mathAbs(data.seconds),data.minutes=mathAbs(data.minutes),data.hours=mathAbs(data.hours),data.months=mathAbs(data.months),data.years=mathAbs(data.years),this}function addSubtract$1(duration,input,value,direction){var other=createDuration(input,value);return duration._milliseconds+=direction*other._milliseconds,duration._days+=direction*other._days,duration._months+=direction*other._months,duration._bubble()}function add$1(input,value){return addSubtract$1(this,input,value,1)}function subtract$1(input,value){return addSubtract$1(this,input,value,-1)}function absCeil(number){return number<0?Math.floor(number):Math.ceil(number)}function bubble(){var milliseconds=this._milliseconds,days=this._days,months=this._months,data=this._data,seconds,minutes,hours,years,monthsFromDays;return milliseconds>=0&&days>=0&&months>=0||milliseconds<=0&&days<=0&&months<=0||(milliseconds+=864e5*absCeil(monthsToDays(months)+days),days=0,months=0),data.milliseconds=milliseconds%1e3,seconds=absFloor(milliseconds/1e3),data.seconds=seconds%60,minutes=absFloor(seconds/60),data.minutes=minutes%60,hours=absFloor(minutes/60),data.hours=hours%24,days+=absFloor(hours/24),months+=monthsFromDays=absFloor(daysToMonths(days)),days-=absCeil(monthsToDays(monthsFromDays)),years=absFloor(months/12),months%=12,data.days=days,data.months=months,data.years=years,this}function daysToMonths(days){return 4800*days/146097}function monthsToDays(months){return 146097*months/4800}function as(units){if(!this.isValid())return NaN;var days,months,milliseconds=this._milliseconds;if("month"===(units=normalizeUnits(units))||"year"===units)return days=this._days+milliseconds/864e5,months=this._months+daysToMonths(days),"month"===units?months:months/12;switch(days=this._days+Math.round(monthsToDays(this._months)),units){case"week":return days/7+milliseconds/6048e5;case"day":return days+milliseconds/864e5;case"hour":return 24*days+milliseconds/36e5;case"minute":return 1440*days+milliseconds/6e4;case"second":return 86400*days+milliseconds/1e3;case"millisecond":return Math.floor(864e5*days)+milliseconds;default:throw new Error("Unknown unit "+units)}}function valueOf$1(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*toInt(this._months/12):NaN}function makeAs(alias){return function(){return this.as(alias)}}var asMilliseconds=makeAs("ms"),asSeconds=makeAs("s"),asMinutes=makeAs("m"),asHours=makeAs("h"),asDays=makeAs("d"),asWeeks=makeAs("w"),asMonths=makeAs("M"),asYears=makeAs("y");function get$2(units){return units=normalizeUnits(units),this.isValid()?this[units+"s"]():NaN}function makeGetter(name){return function(){return this.isValid()?this._data[name]:NaN}}var milliseconds=makeGetter("milliseconds"),seconds=makeGetter("seconds"),minutes=makeGetter("minutes"),hours=makeGetter("hours"),days=makeGetter("days"),months=makeGetter("months"),years=makeGetter("years");function weeks(){return absFloor(this.days()/7)}var round=Math.round,thresholds={ss:44,s:45,m:45,h:22,d:26,M:11};function substituteTimeAgo(string,number,withoutSuffix,isFuture,locale){return locale.relativeTime(number||1,!!withoutSuffix,string,isFuture)}function relativeTime$1(posNegDuration,withoutSuffix,locale){var duration=createDuration(posNegDuration).abs(),seconds=round(duration.as("s")),minutes=round(duration.as("m")),hours=round(duration.as("h")),days=round(duration.as("d")),months=round(duration.as("M")),years=round(duration.as("y")),a=seconds<=thresholds.ss&&["s",seconds]||seconds<thresholds.s&&["ss",seconds]||minutes<=1&&["m"]||minutes<thresholds.m&&["mm",minutes]||hours<=1&&["h"]||hours<thresholds.h&&["hh",hours]||days<=1&&["d"]||days<thresholds.d&&["dd",days]||months<=1&&["M"]||months<thresholds.M&&["MM",months]||years<=1&&["y"]||["yy",years];return a[2]=withoutSuffix,a[3]=+posNegDuration>0,a[4]=locale,substituteTimeAgo.apply(null,a)}function getSetRelativeTimeRounding(roundingFunction){return void 0===roundingFunction?round:"function"==typeof roundingFunction&&(round=roundingFunction,!0)}function getSetRelativeTimeThreshold(threshold,limit){return void 0!==thresholds[threshold]&&(void 0===limit?thresholds[threshold]:(thresholds[threshold]=limit,"s"===threshold&&(thresholds.ss=limit-1),!0))}function humanize(withSuffix){if(!this.isValid())return this.localeData().invalidDate();var locale=this.localeData(),output=relativeTime$1(this,!withSuffix,locale);return withSuffix&&(output=locale.pastFuture(+this,output)),locale.postformat(output)}var abs$1=Math.abs;function toISOString$1(){if(!this.isValid())return this.localeData().invalidDate();var seconds=abs$1(this._milliseconds)/1e3,days=abs$1(this._days),months=abs$1(this._months),minutes,hours,years;minutes=absFloor(seconds/60),hours=absFloor(minutes/60),seconds%=60,minutes%=60;var Y=years=absFloor(months/12),M=months%=12,D=days,h=hours,m=minutes,s=seconds,total=this.asSeconds();return total?(total<0?"-":"")+"P"+(Y?Y+"Y":"")+(M?M+"M":"")+(D?D+"D":"")+(h||m||s?"T":"")+(h?h+"H":"")+(m?m+"M":"")+(s?s+"S":""):"P0D"}var proto$2=Duration.prototype;return proto$2.isValid=isValid$1,proto$2.abs=abs,proto$2.add=add$1,proto$2.subtract=subtract$1,proto$2.as=as,proto$2.asMilliseconds=asMilliseconds,proto$2.asSeconds=asSeconds,proto$2.asMinutes=asMinutes,proto$2.asHours=asHours,proto$2.asDays=asDays,proto$2.asWeeks=asWeeks,proto$2.asMonths=asMonths,proto$2.asYears=asYears,proto$2.valueOf=valueOf$1,proto$2._bubble=bubble,proto$2.get=get$2,proto$2.milliseconds=milliseconds,proto$2.seconds=seconds,proto$2.minutes=minutes,proto$2.hours=hours,proto$2.days=days,proto$2.weeks=weeks,proto$2.months=months,proto$2.years=years,proto$2.humanize=humanize,proto$2.toISOString=toISOString$1,proto$2.toString=toISOString$1,proto$2.toJSON=toISOString$1,proto$2.locale=locale,proto$2.localeData=localeData,proto$2.toIsoString=deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",toISOString$1),proto$2.lang=lang,addFormatToken("X",0,0,"unix"),addFormatToken("x",0,0,"valueOf"),addRegexToken("x",matchSigned),addRegexToken("X",matchTimestamp),addParseToken("X",(function(input,array,config){config._d=new Date(1e3*parseFloat(input,10))})),addParseToken("x",(function(input,array,config){config._d=new Date(toInt(input))})),hooks.version="2.18.1",setHookCallback(createLocal),hooks.fn=proto,hooks.min=min,hooks.max=max,hooks.now=now,hooks.utc=createUTC,hooks.unix=createUnix,hooks.months=listMonths,hooks.isDate=isDate,hooks.locale=getSetGlobalLocale,hooks.invalid=createInvalid,hooks.duration=createDuration,hooks.isMoment=isMoment,hooks.weekdays=listWeekdays,hooks.parseZone=createInZone,hooks.localeData=getLocale,hooks.isDuration=isDuration,hooks.monthsShort=listMonthsShort,hooks.weekdaysMin=listWeekdaysMin,hooks.defineLocale=defineLocale,hooks.updateLocale=updateLocale,hooks.locales=listLocales,hooks.weekdaysShort=listWeekdaysShort,hooks.normalizeUnits=normalizeUnits,hooks.relativeTimeRounding=getSetRelativeTimeRounding,hooks.relativeTimeThreshold=getSetRelativeTimeThreshold,hooks.calendarFormat=getCalendarFormat,hooks.prototype=proto,hooks})),
/**
* @version: 2.1.25
* @author: Dan Grossman http://www.dangrossman.info/
* @copyright: Copyright (c) 2012-2017 Dan Grossman. All rights reserved.
* @license: Licensed under the MIT license. See http://www.opensource.org/licenses/mit-license.php
* @website: https://www.daterangepicker.com/
*/
function(root,factory){if("function"==typeof define&&define.amd)define(["moment","jquery"],(function(moment,jquery){return root.daterangepicker=factory(moment,jquery)}));else if("object"==typeof module&&module.exports){var jQuery="undefined"!=typeof window?window.jQuery:void 0;jQuery||(jQuery=require("jquery")).fn||(jQuery.fn={}),module.exports=factory(require("moment"),jQuery)}else root.daterangepicker=factory(root.moment,root.jQuery)}(this,(function(moment,$){var DateRangePicker=function(element,options,cb){if(this.parentEl="body",this.element=$(element),this.startDate=moment().startOf("day"),this.endDate=moment().endOf("day"),this.minDate=!1,this.maxDate=!1,this.dateLimit=!1,this.autoApply=!1,this.singleDatePicker=!1,this.showDropdowns=!1,this.showWeekNumbers=!1,this.showISOWeekNumbers=!1,this.showCustomRangeLabel=!0,this.timePicker=!1,this.timePicker24Hour=!1,this.timePickerIncrement=1,this.timePickerSeconds=!1,this.linkedCalendars=!0,this.autoUpdateInput=!0,this.alwaysShowCalendars=!1,this.ranges={},this.opens="right",this.element.hasClass("pull-right")&&(this.opens="left"),this.drops="down",this.element.hasClass("dropup")&&(this.drops="up"),this.buttonClasses="btn btn-sm",this.applyClass="btn-success",this.cancelClass="btn-default",this.locale={direction:"ltr",format:moment.localeData().longDateFormat("L"),separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:moment.weekdaysMin(),monthNames:moment.monthsShort(),firstDay:moment.localeData().firstDayOfWeek()},this.callback=function(){},this.isShowing=!1,this.leftCalendar={},this.rightCalendar={},"object"==typeof options&&null!==options||(options={}),"string"==typeof(options=$.extend(this.element.data(),options)).template||options.template instanceof $||(options.template='<div class="daterangepicker dropdown-menu"><div class="calendar left"><div class="daterangepicker_input"><input class="input-mini form-control" type="text" name="daterangepicker_start" value="" /><i class="fa fa-calendar glyphicon glyphicon-calendar"></i><div class="calendar-time"><div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div></div><div class="calendar right"><div class="daterangepicker_input"><input class="input-mini form-control" type="text" name="daterangepicker_end" value="" /><i class="fa fa-calendar glyphicon glyphicon-calendar"></i><div class="calendar-time"><div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div></div><div class="ranges"><div class="range_inputs"><button class="applyBtn" disabled="disabled" type="button"></button> <button class="cancelBtn" type="button"></button></div></div></div>'),this.parentEl=options.parentEl&&$(options.parentEl).length?$(options.parentEl):$(this.parentEl),this.container=$(options.template).appendTo(this.parentEl),"object"==typeof options.locale&&("string"==typeof options.locale.direction&&(this.locale.direction=options.locale.direction),"string"==typeof options.locale.format&&(this.locale.format=options.locale.format),"string"==typeof options.locale.separator&&(this.locale.separator=options.locale.separator),"object"==typeof options.locale.daysOfWeek&&(this.locale.daysOfWeek=options.locale.daysOfWeek.slice()),"object"==typeof options.locale.monthNames&&(this.locale.monthNames=options.locale.monthNames.slice()),"number"==typeof options.locale.firstDay&&(this.locale.firstDay=options.locale.firstDay),"string"==typeof options.locale.applyLabel&&(this.locale.applyLabel=options.locale.applyLabel),"string"==typeof options.locale.cancelLabel&&(this.locale.cancelLabel=options.locale.cancelLabel),"string"==typeof options.locale.weekLabel&&(this.locale.weekLabel=options.locale.weekLabel),"string"==typeof options.locale.customRangeLabel)){var elem;(elem=document.createElement("textarea")).innerHTML=options.locale.customRangeLabel;var rangeHtml=elem.value;this.locale.customRangeLabel=rangeHtml}if(this.container.addClass(this.locale.direction),"string"==typeof options.startDate&&(this.startDate=moment(options.startDate,this.locale.format)),"string"==typeof options.endDate&&(this.endDate=moment(options.endDate,this.locale.format)),"string"==typeof options.minDate&&(this.minDate=moment(options.minDate,this.locale.format)),"string"==typeof options.maxDate&&(this.maxDate=moment(options.maxDate,this.locale.format)),"object"==typeof options.startDate&&(this.startDate=moment(options.startDate)),"object"==typeof options.endDate&&(this.endDate=moment(options.endDate)),"object"==typeof options.minDate&&(this.minDate=moment(options.minDate)),"object"==typeof options.maxDate&&(this.maxDate=moment(options.maxDate)),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone()),"string"==typeof options.applyClass&&(this.applyClass=options.applyClass),"string"==typeof options.cancelClass&&(this.cancelClass=options.cancelClass),"object"==typeof options.dateLimit&&(this.dateLimit=options.dateLimit),"string"==typeof options.opens&&(this.opens=options.opens),"string"==typeof options.drops&&(this.drops=options.drops),"boolean"==typeof options.showWeekNumbers&&(this.showWeekNumbers=options.showWeekNumbers),"boolean"==typeof options.showISOWeekNumbers&&(this.showISOWeekNumbers=options.showISOWeekNumbers),"string"==typeof options.buttonClasses&&(this.buttonClasses=options.buttonClasses),"object"==typeof options.buttonClasses&&(this.buttonClasses=options.buttonClasses.join(" ")),"boolean"==typeof options.showDropdowns&&(this.showDropdowns=options.showDropdowns),"boolean"==typeof options.showCustomRangeLabel&&(this.showCustomRangeLabel=options.showCustomRangeLabel),"boolean"==typeof options.singleDatePicker&&(this.singleDatePicker=options.singleDatePicker,this.singleDatePicker&&(this.endDate=this.startDate.clone())),"boolean"==typeof options.timePicker&&(this.timePicker=options.timePicker),"boolean"==typeof options.timePickerSeconds&&(this.timePickerSeconds=options.timePickerSeconds),"number"==typeof options.timePickerIncrement&&(this.timePickerIncrement=options.timePickerIncrement),"boolean"==typeof options.timePicker24Hour&&(this.timePicker24Hour=options.timePicker24Hour),"boolean"==typeof options.autoApply&&(this.autoApply=options.autoApply),"boolean"==typeof options.autoUpdateInput&&(this.autoUpdateInput=options.autoUpdateInput),"boolean"==typeof options.linkedCalendars&&(this.linkedCalendars=options.linkedCalendars),"function"==typeof options.isInvalidDate&&(this.isInvalidDate=options.isInvalidDate),"function"==typeof options.isCustomDate&&(this.isCustomDate=options.isCustomDate),"boolean"==typeof options.alwaysShowCalendars&&(this.alwaysShowCalendars=options.alwaysShowCalendars),0!=this.locale.firstDay)for(var iterator=this.locale.firstDay;iterator>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),iterator--;var start,end,range;if(void 0===options.startDate&&void 0===options.endDate&&$(this.element).is("input[type=text]")){var val=$(this.element).val(),split=val.split(this.locale.separator);start=end=null,2==split.length?(start=moment(split[0],this.locale.format),end=moment(split[1],this.locale.format)):this.singleDatePicker&&""!==val&&(start=moment(val,this.locale.format),end=moment(val,this.locale.format)),null!==start&&null!==end&&(this.setStartDate(start),this.setEndDate(end))}if("object"==typeof options.ranges){for(range in options.ranges){start="string"==typeof options.ranges[range][0]?moment(options.ranges[range][0],this.locale.format):moment(options.ranges[range][0]),end="string"==typeof options.ranges[range][1]?moment(options.ranges[range][1],this.locale.format):moment(options.ranges[range][1]),this.minDate&&start.isBefore(this.minDate)&&(start=this.minDate.clone());var maxDate=this.maxDate;if(this.dateLimit&&maxDate&&start.clone().add(this.dateLimit).isAfter(maxDate)&&(maxDate=start.clone().add(this.dateLimit)),maxDate&&end.isAfter(maxDate)&&(end=maxDate.clone()),!(this.minDate&&end.isBefore(this.minDate,this.timepicker?"minute":"day")||maxDate&&start.isAfter(maxDate,this.timepicker?"minute":"day"))){var elem;(elem=document.createElement("textarea")).innerHTML=range;var rangeHtml=elem.value;this.ranges[rangeHtml]=[start,end]}}var list="<ul>";for(range in this.ranges)list+='<li data-range-key="'+range+'">'+range+"</li>";this.showCustomRangeLabel&&(list+='<li data-range-key="'+this.locale.customRangeLabel+'">'+this.locale.customRangeLabel+"</li>"),list+="</ul>",this.container.find(".ranges").prepend(list)}"function"==typeof cb&&(this.callback=cb),this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.endOf("day"),this.container.find(".calendar-time").hide()),this.timePicker&&this.autoApply&&(this.autoApply=!1),this.autoApply&&"object"!=typeof options.ranges?this.container.find(".ranges").hide():this.autoApply&&this.container.find(".applyBtn, .cancelBtn").addClass("hide"),this.singleDatePicker&&(this.container.addClass("single"),this.container.find(".calendar.left").addClass("single"),this.container.find(".calendar.left").show(),this.container.find(".calendar.right").hide(),this.container.find(".daterangepicker_input input, .daterangepicker_input > i").hide(),this.timePicker?this.container.find(".ranges ul").hide():this.container.find(".ranges").hide()),(void 0===options.ranges&&!this.singleDatePicker||this.alwaysShowCalendars)&&this.container.addClass("show-calendar"),this.container.addClass("opens"+this.opens),void 0!==options.ranges&&"right"==this.opens&&this.container.find(".ranges").prependTo(this.container.find(".calendar.left").parent()),this.container.find(".applyBtn, .cancelBtn").addClass(this.buttonClasses),this.applyClass.length&&this.container.find(".applyBtn").addClass(this.applyClass),this.cancelClass.length&&this.container.find(".cancelBtn").addClass(this.cancelClass),this.container.find(".applyBtn").html(this.locale.applyLabel),this.container.find(".cancelBtn").html(this.locale.cancelLabel),this.container.find(".calendar").on("click.daterangepicker",".prev",$.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",$.proxy(this.clickNext,this)).on("mousedown.daterangepicker","td.available",$.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",$.proxy(this.hoverDate,this)).on("mouseleave.daterangepicker","td.available",$.proxy(this.updateFormInputs,this)).on("change.daterangepicker","select.yearselect",$.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.monthselect",$.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.secondselect,select.ampmselect",$.proxy(this.timeChanged,this)).on("click.daterangepicker",".daterangepicker_input input",$.proxy(this.showCalendars,this)).on("focus.daterangepicker",".daterangepicker_input input",$.proxy(this.formInputsFocused,this)).on("blur.daterangepicker",".daterangepicker_input input",$.proxy(this.formInputsBlurred,this)).on("change.daterangepicker",".daterangepicker_input input",$.proxy(this.formInputsChanged,this)),this.container.find(".ranges").on("click.daterangepicker","button.applyBtn",$.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",$.proxy(this.clickCancel,this)).on("click.daterangepicker","li",$.proxy(this.clickRange,this)).on("mouseenter.daterangepicker","li",$.proxy(this.hoverRange,this)).on("mouseleave.daterangepicker","li",$.proxy(this.updateFormInputs,this)),this.element.is("input")||this.element.is("button")?this.element.on({"click.daterangepicker":$.proxy(this.show,this),"focus.daterangepicker":$.proxy(this.show,this),"keyup.daterangepicker":$.proxy(this.elementChanged,this),"keydown.daterangepicker":$.proxy(this.keydown,this)}):this.element.on("click.daterangepicker",$.proxy(this.toggle,this)),this.element.is("input")&&!this.singleDatePicker&&this.autoUpdateInput?(this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.element.trigger("change")):this.element.is("input")&&this.autoUpdateInput&&(this.element.val(this.startDate.format(this.locale.format)),this.element.trigger("change"))};return DateRangePicker.prototype={constructor:DateRangePicker,setStartDate:function(startDate){"string"==typeof startDate&&(this.startDate=moment(startDate,this.locale.format)),"object"==typeof startDate&&(this.startDate=moment(startDate)),this.timePicker||(this.startDate=this.startDate.startOf("day")),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement)),this.maxDate&&this.startDate.isAfter(this.maxDate)&&(this.startDate=this.maxDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.floor(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement)),this.isShowing||this.updateElement(),this.updateMonthsInView()},setEndDate:function(endDate){"string"==typeof endDate&&(this.endDate=moment(endDate,this.locale.format)),"object"==typeof endDate&&(this.endDate=moment(endDate)),this.timePicker||(this.endDate=this.endDate.endOf("day")),this.timePicker&&this.timePickerIncrement&&this.endDate.minute(Math.round(this.endDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.endDate.isBefore(this.startDate)&&(this.endDate=this.startDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone()),this.dateLimit&&this.startDate.clone().add(this.dateLimit).isBefore(this.endDate)&&(this.endDate=this.startDate.clone().add(this.dateLimit)),this.previousRightTime=this.endDate.clone(),this.isShowing||this.updateElement(),this.updateMonthsInView()},isInvalidDate:function(){return!1},isCustomDate:function(){return!1},updateView:function(){this.timePicker&&(this.renderTimePicker("left"),this.renderTimePicker("right"),this.endDate?this.container.find(".right .calendar-time select").removeAttr("disabled").removeClass("disabled"):this.container.find(".right .calendar-time select").attr("disabled","disabled").addClass("disabled")),this.endDate?(this.container.find('input[name="daterangepicker_end"]').removeClass("active"),this.container.find('input[name="daterangepicker_start"]').addClass("active")):(this.container.find('input[name="daterangepicker_end"]').addClass("active"),this.container.find('input[name="daterangepicker_start"]').removeClass("active")),this.updateMonthsInView(),this.updateCalendars(),this.updateFormInputs()},updateMonthsInView:function(){if(this.endDate){if(!this.singleDatePicker&&this.leftCalendar.month&&this.rightCalendar.month&&(this.startDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.startDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM"))&&(this.endDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.endDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM")))return;this.leftCalendar.month=this.startDate.clone().date(2),this.linkedCalendars||this.endDate.month()==this.startDate.month()&&this.endDate.year()==this.startDate.year()?this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"):this.rightCalendar.month=this.endDate.clone().date(2)}else this.leftCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&this.rightCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&(this.leftCalendar.month=this.startDate.clone().date(2),this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"));this.maxDate&&this.linkedCalendars&&!this.singleDatePicker&&this.rightCalendar.month>this.maxDate&&(this.rightCalendar.month=this.maxDate.clone().date(2),this.leftCalendar.month=this.maxDate.clone().date(2).subtract(1,"month"))},updateCalendars:function(){if(this.timePicker){var hour,minute,second,ampm,ampm;if(this.endDate){if(hour=parseInt(this.container.find(".left .hourselect").val(),10),minute=parseInt(this.container.find(".left .minuteselect").val(),10),second=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0,!this.timePicker24Hour)"PM"===(ampm=this.container.find(".left .ampmselect").val())&&hour<12&&(hour+=12),"AM"===ampm&&12===hour&&(hour=0)}else if(hour=parseInt(this.container.find(".right .hourselect").val(),10),minute=parseInt(this.container.find(".right .minuteselect").val(),10),second=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0,!this.timePicker24Hour)"PM"===(ampm=this.container.find(".right .ampmselect").val())&&hour<12&&(hour+=12),"AM"===ampm&&12===hour&&(hour=0);this.leftCalendar.month.hour(hour).minute(minute).second(second),this.rightCalendar.month.hour(hour).minute(minute).second(second)}this.renderCalendar("left"),this.renderCalendar("right"),this.container.find(".ranges li").removeClass("active"),null!=this.endDate&&this.calculateChosenLabel()},renderCalendar:function(side){var calendar,month=(calendar="left"==side?this.leftCalendar:this.rightCalendar).month.month(),year=calendar.month.year(),hour=calendar.month.hour(),minute=calendar.month.minute(),second=calendar.month.second(),daysInMonth=moment([year,month]).daysInMonth(),firstDay=moment([year,month,1]),lastDay=moment([year,month,daysInMonth]),lastMonth=moment(firstDay).subtract(1,"month").month(),lastYear=moment(firstDay).subtract(1,"month").year(),daysInLastMonth=moment([lastYear,lastMonth]).daysInMonth(),dayOfWeek=firstDay.day(),calendar;(calendar=[]).firstDay=firstDay,calendar.lastDay=lastDay;for(var i=0;i<6;i++)calendar[i]=[];var startDay=daysInLastMonth-dayOfWeek+this.locale.firstDay+1;startDay>daysInLastMonth&&(startDay-=7),dayOfWeek==this.locale.firstDay&&(startDay=daysInLastMonth-6);for(var curDate=moment([lastYear,lastMonth,startDay,12,minute,second]),col,row,i=0,col=0,row=0;i<42;i++,col++,curDate=moment(curDate).add(24,"hour"))i>0&&col%7==0&&(col=0,row++),calendar[row][col]=curDate.clone().hour(hour).minute(minute).second(second),curDate.hour(12),this.minDate&&calendar[row][col].format("YYYY-MM-DD")==this.minDate.format("YYYY-MM-DD")&&calendar[row][col].isBefore(this.minDate)&&"left"==side&&(calendar[row][col]=this.minDate.clone()),this.maxDate&&calendar[row][col].format("YYYY-MM-DD")==this.maxDate.format("YYYY-MM-DD")&&calendar[row][col].isAfter(this.maxDate)&&"right"==side&&(calendar[row][col]=this.maxDate.clone());"left"==side?this.leftCalendar.calendar=calendar:this.rightCalendar.calendar=calendar;var minDate="left"==side?this.minDate:this.startDate,maxDate=this.maxDate,selected="left"==side?this.startDate:this.endDate,arrow="ltr"==this.locale.direction?{left:"chevron-left",right:"chevron-right"}:{left:"chevron-right",right:"chevron-left"},html='<table class="table-condensed">';html+="<thead>",html+="<tr>",(this.showWeekNumbers||this.showISOWeekNumbers)&&(html+="<th></th>"),minDate&&!minDate.isBefore(calendar.firstDay)||this.linkedCalendars&&"left"!=side?html+="<th></th>":html+='<th class="prev available"><i class="fa fa-'+arrow.left+" glyphicon glyphicon-"+arrow.left+'"></i></th>';var dateHtml=this.locale.monthNames[calendar[1][1].month()]+calendar[1][1].format(" YYYY");if(this.showDropdowns){for(var currentMonth=calendar[1][1].month(),currentYear=calendar[1][1].year(),maxYear=maxDate&&maxDate.year()||currentYear+5,minYear=minDate&&minDate.year()||currentYear-50,inMinYear=currentYear==minYear,inMaxYear=currentYear==maxYear,monthHtml='<select class="monthselect">',m=0;m<12;m++)(!inMinYear||m>=minDate.month())&&(!inMaxYear||m<=maxDate.month())?monthHtml+="<option value='"+m+"'"+(m===currentMonth?" selected='selected'":"")+">"+this.locale.monthNames[m]+"</option>":monthHtml+="<option value='"+m+"'"+(m===currentMonth?" selected='selected'":"")+" disabled='disabled'>"+this.locale.monthNames[m]+"</option>";monthHtml+="</select>";for(var yearHtml='<select class="yearselect">',y=minYear;y<=maxYear;y++)yearHtml+='<option value="'+y+'"'+(y===currentYear?' selected="selected"':"")+">"+y+"</option>";dateHtml=monthHtml+(yearHtml+="</select>")}if(html+='<th colspan="5" class="month">'+dateHtml+"</th>",maxDate&&!maxDate.isAfter(calendar.lastDay)||this.linkedCalendars&&"right"!=side&&!this.singleDatePicker?html+="<th></th>":html+='<th class="next available"><i class="fa fa-'+arrow.right+" glyphicon glyphicon-"+arrow.right+'"></i></th>',html+="</tr>",html+="<tr>",(this.showWeekNumbers||this.showISOWeekNumbers)&&(html+='<th class="week">'+this.locale.weekLabel+"</th>"),$.each(this.locale.daysOfWeek,(function(index,dayOfWeek){html+="<th>"+dayOfWeek+"</th>"})),html+="</tr>",html+="</thead>",html+="<tbody>",null==this.endDate&&this.dateLimit){var maxLimit=this.startDate.clone().add(this.dateLimit).endOf("day");maxDate&&!maxLimit.isBefore(maxDate)||(maxDate=maxLimit)}for(var row=0;row<6;row++){html+="<tr>",this.showWeekNumbers?html+='<td class="week">'+calendar[row][0].week()+"</td>":this.showISOWeekNumbers&&(html+='<td class="week">'+calendar[row][0].isoWeek()+"</td>");for(var col=0;col<7;col++){var classes=[];calendar[row][col].isSame(new Date,"day")&&classes.push("today"),calendar[row][col].isoWeekday()>5&&classes.push("weekend"),calendar[row][col].month()!=calendar[1][1].month()&&classes.push("off"),this.minDate&&calendar[row][col].isBefore(this.minDate,"day")&&classes.push("off","disabled"),maxDate&&calendar[row][col].isAfter(maxDate,"day")&&classes.push("off","disabled"),this.isInvalidDate(calendar[row][col])&&classes.push("off","disabled"),calendar[row][col].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&classes.push("active","start-date"),null!=this.endDate&&calendar[row][col].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&classes.push("active","end-date"),null!=this.endDate&&calendar[row][col]>this.startDate&&calendar[row][col]<this.endDate&&classes.push("in-range");var isCustom=this.isCustomDate(calendar[row][col]);!1!==isCustom&&("string"==typeof isCustom?classes.push(isCustom):Array.prototype.push.apply(classes,isCustom));for(var cname="",disabled=!1,i=0;i<classes.length;i++)cname+=classes[i]+" ","disabled"==classes[i]&&(disabled=!0);disabled||(cname+="available"),html+='<td class="'+cname.replace(/^\s+|\s+$/g,"")+'" data-title="r'+row+"c"+col+'">'+calendar[row][col].date()+"</td>"}html+="</tr>"}html+="</tbody>",html+="</table>",this.container.find(".calendar."+side+" .calendar-table").html(html)},renderTimePicker:function(side){if("right"!=side||this.endDate){var html,selected,minDate,maxDate=this.maxDate;if(!this.dateLimit||this.maxDate&&!this.startDate.clone().add(this.dateLimit).isAfter(this.maxDate)||(maxDate=this.startDate.clone().add(this.dateLimit)),"left"==side)selected=this.startDate.clone(),minDate=this.minDate;else if("right"==side){selected=this.endDate.clone(),minDate=this.startDate;var timeSelector=this.container.find(".calendar.right .calendar-time div");if(""!=timeSelector.html()&&(selected.hour(timeSelector.find(".hourselect option:selected").val()||selected.hour()),selected.minute(timeSelector.find(".minuteselect option:selected").val()||selected.minute()),selected.second(timeSelector.find(".secondselect option:selected").val()||selected.second()),!this.timePicker24Hour)){var ampm=timeSelector.find(".ampmselect option:selected").val();"PM"===ampm&&selected.hour()<12&&selected.hour(selected.hour()+12),"AM"===ampm&&12===selected.hour()&&selected.hour(0)}selected.isBefore(this.startDate)&&(selected=this.startDate.clone()),maxDate&&selected.isAfter(maxDate)&&(selected=maxDate.clone())}html='<select class="hourselect">';for(var start=this.timePicker24Hour?0:1,end=this.timePicker24Hour?23:12,i=start;i<=end;i++){var i_in_24=i;this.timePicker24Hour||(i_in_24=selected.hour()>=12?12==i?12:i+12:12==i?0:i);var time=selected.clone().hour(i_in_24),disabled=!1;minDate&&time.minute(59).isBefore(minDate)&&(disabled=!0),maxDate&&time.minute(0).isAfter(maxDate)&&(disabled=!0),i_in_24!=selected.hour()||disabled?html+=disabled?'<option value="'+i+'" disabled="disabled" class="disabled">'+i+"</option>":'<option value="'+i+'">'+i+"</option>":html+='<option value="'+i+'" selected="selected">'+i+"</option>"}html+="</select> ",html+=': <select class="minuteselect">';for(var i=0;i<60;i+=this.timePickerIncrement){var padded=i<10?"0"+i:i,time=selected.clone().minute(i),disabled=!1;minDate&&time.second(59).isBefore(minDate)&&(disabled=!0),maxDate&&time.second(0).isAfter(maxDate)&&(disabled=!0),selected.minute()!=i||disabled?html+=disabled?'<option value="'+i+'" disabled="disabled" class="disabled">'+padded+"</option>":'<option value="'+i+'">'+padded+"</option>":html+='<option value="'+i+'" selected="selected">'+padded+"</option>"}if(html+="</select> ",this.timePickerSeconds){html+=': <select class="secondselect">';for(var i=0;i<60;i++){var padded=i<10?"0"+i:i,time=selected.clone().second(i),disabled=!1;minDate&&time.isBefore(minDate)&&(disabled=!0),maxDate&&time.isAfter(maxDate)&&(disabled=!0),selected.second()!=i||disabled?html+=disabled?'<option value="'+i+'" disabled="disabled" class="disabled">'+padded+"</option>":'<option value="'+i+'">'+padded+"</option>":html+='<option value="'+i+'" selected="selected">'+padded+"</option>"}html+="</select> "}if(!this.timePicker24Hour){html+='<select class="ampmselect">';var am_html="",pm_html="";minDate&&selected.clone().hour(12).minute(0).second(0).isBefore(minDate)&&(am_html=' disabled="disabled" class="disabled"'),maxDate&&selected.clone().hour(0).minute(0).second(0).isAfter(maxDate)&&(pm_html=' disabled="disabled" class="disabled"'),selected.hour()>=12?html+='<option value="AM"'+am_html+'>AM</option><option value="PM" selected="selected"'+pm_html+">PM</option>":html+='<option value="AM" selected="selected"'+am_html+'>AM</option><option value="PM"'+pm_html+">PM</option>",html+="</select>"}this.container.find(".calendar."+side+" .calendar-time div").html(html)}},updateFormInputs:function(){this.container.find("input[name=daterangepicker_start]").is(":focus")||this.container.find("input[name=daterangepicker_end]").is(":focus")||(this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.locale.format)),this.endDate&&this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.locale.format)),this.singleDatePicker||this.endDate&&(this.startDate.isBefore(this.endDate)||this.startDate.isSame(this.endDate))?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled"))},move:function(){var parentOffset={top:0,left:0},containerTop,parentRightEdge=$(window).width();this.parentEl.is("body")||(parentOffset={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()},parentRightEdge=this.parentEl[0].clientWidth+this.parentEl.offset().left),containerTop="up"==this.drops?this.element.offset().top-this.container.outerHeight()-parentOffset.top:this.element.offset().top+this.element.outerHeight()-parentOffset.top,this.container["up"==this.drops?"addClass":"removeClass"]("dropup"),"left"==this.opens?(this.container.css({top:containerTop,right:parentRightEdge-this.element.offset().left-this.element.outerWidth(),left:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):"center"==this.opens?(this.container.css({top:containerTop,left:this.element.offset().left-parentOffset.left+this.element.outerWidth()/2-this.container.outerWidth()/2,right:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):(this.container.css({top:containerTop,left:this.element.offset().left-parentOffset.left,right:"auto"}),this.container.offset().left+this.container.outerWidth()>$(window).width()&&this.container.css({left:"auto",right:0}))},show:function(e){this.isShowing||(this._outsideClickProxy=$.proxy((function(e){this.outsideClick(e)}),this),$(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("touchend.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy),$(window).on("resize.daterangepicker",$.proxy((function(e){this.move(e)}),this)),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.previousRightTime=this.endDate.clone(),this.updateView(),this.container.show(),this.move(),this.element.trigger("show.daterangepicker",this),this.isShowing=!0)},hide:function(e){this.isShowing&&(this.endDate||(this.startDate=this.oldStartDate.clone(),this.endDate=this.oldEndDate.clone()),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.callback(this.startDate,this.endDate,this.chosenLabel),this.updateElement(),$(document).off(".daterangepicker"),$(window).off(".daterangepicker"),this.container.hide(),this.element.trigger("hide.daterangepicker",this),this.isShowing=!1)},toggle:function(e){this.isShowing?this.hide():this.show()},outsideClick:function(e){var target=$(e.target);"focusin"==e.type||target.closest(this.element).length||target.closest(this.container).length||target.closest(".calendar-table").length||(this.hide(),this.element.trigger("outsideClick.daterangepicker",this))},showCalendars:function(){this.container.addClass("show-calendar"),this.move(),this.element.trigger("showCalendar.daterangepicker",this)},hideCalendars:function(){this.container.removeClass("show-calendar"),this.element.trigger("hideCalendar.daterangepicker",this)},hoverRange:function(e){if(!this.container.find("input[name=daterangepicker_start]").is(":focus")&&!this.container.find("input[name=daterangepicker_end]").is(":focus")){var label=e.target.getAttribute("data-range-key");if(label==this.locale.customRangeLabel)this.updateView();else{var dates=this.ranges[label];this.container.find("input[name=daterangepicker_start]").val(dates[0].format(this.locale.format)),this.container.find("input[name=daterangepicker_end]").val(dates[1].format(this.locale.format))}}},clickRange:function(e){var label=e.target.getAttribute("data-range-key");if(this.chosenLabel=label,label==this.locale.customRangeLabel)this.showCalendars();else{var dates=this.ranges[label];this.startDate=dates[0],this.endDate=dates[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.alwaysShowCalendars||this.hideCalendars(),this.clickApply()}},clickPrev:function(e){var cal;$(e.target).parents(".calendar").hasClass("left")?(this.leftCalendar.month.subtract(1,"month"),this.linkedCalendars&&this.rightCalendar.month.subtract(1,"month")):this.rightCalendar.month.subtract(1,"month"),this.updateCalendars()},clickNext:function(e){var cal;$(e.target).parents(".calendar").hasClass("left")?this.leftCalendar.month.add(1,"month"):(this.rightCalendar.month.add(1,"month"),this.linkedCalendars&&this.leftCalendar.month.add(1,"month")),this.updateCalendars()},hoverDate:function(e){if($(e.target).hasClass("available")){var title=$(e.target).attr("data-title"),row=title.substr(1,1),col=title.substr(3,1),cal,date=$(e.target).parents(".calendar").hasClass("left")?this.leftCalendar.calendar[row][col]:this.rightCalendar.calendar[row][col];this.endDate&&!this.container.find("input[name=daterangepicker_start]").is(":focus")?this.container.find("input[name=daterangepicker_start]").val(date.format(this.locale.format)):this.endDate||this.container.find("input[name=daterangepicker_end]").is(":focus")||this.container.find("input[name=daterangepicker_end]").val(date.format(this.locale.format));var leftCalendar=this.leftCalendar,rightCalendar=this.rightCalendar,startDate=this.startDate;this.endDate||this.container.find(".calendar tbody td").each((function(index,el){if(!$(el).hasClass("week")){var title=$(el).attr("data-title"),row=title.substr(1,1),col=title.substr(3,1),cal,dt=$(el).parents(".calendar").hasClass("left")?leftCalendar.calendar[row][col]:rightCalendar.calendar[row][col];dt.isAfter(startDate)&&dt.isBefore(date)||dt.isSame(date,"day")?$(el).addClass("in-range"):$(el).removeClass("in-range")}}))}},clickDate:function(e){if($(e.target).hasClass("available")){var title=$(e.target).attr("data-title"),row=title.substr(1,1),col=title.substr(3,1),cal,date=$(e.target).parents(".calendar").hasClass("left")?this.leftCalendar.calendar[row][col]:this.rightCalendar.calendar[row][col];if(this.endDate||date.isBefore(this.startDate,"day")){if(this.timePicker){var hour=parseInt(this.container.find(".left .hourselect").val(),10),ampm;if(!this.timePicker24Hour)"PM"===(ampm=this.container.find(".left .ampmselect").val())&&hour<12&&(hour+=12),"AM"===ampm&&12===hour&&(hour=0);var minute=parseInt(this.container.find(".left .minuteselect").val(),10),second=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0;date=date.clone().hour(hour).minute(minute).second(second)}this.endDate=null,this.setStartDate(date.clone())}else if(!this.endDate&&date.isBefore(this.startDate))this.setEndDate(this.startDate.clone());else{if(this.timePicker){var hour=parseInt(this.container.find(".right .hourselect").val(),10),ampm;if(!this.timePicker24Hour)"PM"===(ampm=this.container.find(".right .ampmselect").val())&&hour<12&&(hour+=12),"AM"===ampm&&12===hour&&(hour=0);var minute=parseInt(this.container.find(".right .minuteselect").val(),10),second=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0;date=date.clone().hour(hour).minute(minute).second(second)}this.setEndDate(date.clone()),this.autoApply&&(this.calculateChosenLabel(),this.clickApply())}this.singleDatePicker&&(this.setEndDate(this.startDate),this.timePicker||this.clickApply()),this.updateView(),e.stopPropagation()}},calculateChosenLabel:function(){var customRange=!0,i=0;for(var range in this.ranges){if(this.timePicker){if(this.startDate.isSame(this.ranges[range][0])&&this.endDate.isSame(this.ranges[range][1])){customRange=!1,this.chosenLabel=this.container.find(".ranges li:eq("+i+")").addClass("active").html();break}}else if(this.startDate.format("YYYY-MM-DD")==this.ranges[range][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[range][1].format("YYYY-MM-DD")){customRange=!1,this.chosenLabel=this.container.find(".ranges li:eq("+i+")").addClass("active").html();break}i++}customRange&&(this.showCustomRangeLabel?this.chosenLabel=this.container.find(".ranges li:last").addClass("active").html():this.chosenLabel=null,this.showCalendars())},clickApply:function(e){this.hide(),this.element.trigger("apply.daterangepicker",this)},clickCancel:function(e){this.startDate=this.oldStartDate,this.endDate=this.oldEndDate,this.hide(),this.element.trigger("cancel.daterangepicker",this)},monthOrYearChanged:function(e){var isLeft=$(e.target).closest(".calendar").hasClass("left"),leftOrRight=isLeft?"left":"right",cal=this.container.find(".calendar."+leftOrRight),month=parseInt(cal.find(".monthselect").val(),10),year=cal.find(".yearselect").val();isLeft||(year<this.startDate.year()||year==this.startDate.year()&&month<this.startDate.month())&&(month=this.startDate.month(),year=this.startDate.year()),this.minDate&&(year<this.minDate.year()||year==this.minDate.year()&&month<this.minDate.month())&&(month=this.minDate.month(),year=this.minDate.year()),this.maxDate&&(year>this.maxDate.year()||year==this.maxDate.year()&&month>this.maxDate.month())&&(month=this.maxDate.month(),year=this.maxDate.year()),isLeft?(this.leftCalendar.month.month(month).year(year),this.linkedCalendars&&(this.rightCalendar.month=this.leftCalendar.month.clone().add(1,"month"))):(this.rightCalendar.month.month(month).year(year),this.linkedCalendars&&(this.leftCalendar.month=this.rightCalendar.month.clone().subtract(1,"month"))),this.updateCalendars()},timeChanged:function(e){var cal=$(e.target).closest(".calendar"),isLeft=cal.hasClass("left"),hour=parseInt(cal.find(".hourselect").val(),10),minute=parseInt(cal.find(".minuteselect").val(),10),second=this.timePickerSeconds?parseInt(cal.find(".secondselect").val(),10):0;if(!this.timePicker24Hour){var ampm=cal.find(".ampmselect").val();"PM"===ampm&&hour<12&&(hour+=12),"AM"===ampm&&12===hour&&(hour=0)}if(isLeft){var start=this.startDate.clone();start.hour(hour),start.minute(minute),start.second(second),this.setStartDate(start),this.singleDatePicker?this.endDate=this.startDate.clone():this.endDate&&this.endDate.format("YYYY-MM-DD")==start.format("YYYY-MM-DD")&&this.endDate.isBefore(start)&&this.setEndDate(start.clone())}else if(this.endDate){var end=this.endDate.clone();end.hour(hour),end.minute(minute),end.second(second),this.setEndDate(end)}this.updateCalendars(),this.updateFormInputs(),this.renderTimePicker("left"),this.renderTimePicker("right")},formInputsChanged:function(e){var isRight=$(e.target).closest(".calendar").hasClass("right"),start=moment(this.container.find('input[name="daterangepicker_start"]').val(),this.locale.format),end=moment(this.container.find('input[name="daterangepicker_end"]').val(),this.locale.format);start.isValid()&&end.isValid()&&(isRight&&end.isBefore(start)&&(start=end.clone()),this.setStartDate(start),this.setEndDate(end),isRight?this.container.find('input[name="daterangepicker_start"]').val(this.startDate.format(this.locale.format)):this.container.find('input[name="daterangepicker_end"]').val(this.endDate.format(this.locale.format))),this.updateView()},formInputsFocused:function(e){var isRight;this.container.find('input[name="daterangepicker_start"], input[name="daterangepicker_end"]').removeClass("active"),$(e.target).addClass("active"),$(e.target).closest(".calendar").hasClass("right")&&(this.endDate=null,this.setStartDate(this.startDate.clone()),this.updateView())},formInputsBlurred:function(e){if(!this.endDate){var val=this.container.find('input[name="daterangepicker_end"]').val(),end=moment(val,this.locale.format);end.isValid()&&(this.setEndDate(end),this.updateView())}},elementChanged:function(){if(this.element.is("input")&&this.element.val().length&&!(this.element.val().length<this.locale.format.length)){var dateString=this.element.val().split(this.locale.separator),start=null,end=null;2===dateString.length&&(start=moment(dateString[0],this.locale.format),end=moment(dateString[1],this.locale.format)),(this.singleDatePicker||null===start||null===end)&&(end=start=moment(this.element.val(),this.locale.format)),start.isValid()&&end.isValid()&&(this.setStartDate(start),this.setEndDate(end),this.updateView())}},keydown:function(e){9!==e.keyCode&&13!==e.keyCode||this.hide()},updateElement:function(){this.element.is("input")&&!this.singleDatePicker&&this.autoUpdateInput?(this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.element.trigger("change")):this.element.is("input")&&this.autoUpdateInput&&(this.element.val(this.startDate.format(this.locale.format)),this.element.trigger("change"))},remove:function(){this.container.remove(),this.element.off(".daterangepicker"),this.element.removeData()}},$.fn.daterangepicker=function(options,callback){return this.each((function(){var el=$(this);el.data("daterangepicker")&&el.data("daterangepicker").remove(),el.data("daterangepicker",new DateRangePicker(el,options,callback))})),this},DateRangePicker})),function(){var hasModule,isArray,makeTwix,slice=[].slice;if(hasModule="undefined"!=typeof module&&null!==module&&null!=module.exports&&"function"==typeof require,isArray=function(input){return"[object Array]"===Object.prototype.toString.call(input)},makeTwix=function(moment){var Twix;if(null==moment)throw new Error("Can't find moment");return(Twix=function(){function Twix(start,end,parseFormat,options){var ref;null==options&&(options={}),"string"!=typeof parseFormat&&(options=null!=parseFormat?parseFormat:{},parseFormat=null),"boolean"==typeof options&&(options={allDay:options}),this._oStart=moment(start,parseFormat,options.parseStrict),this._oEnd=moment(end,parseFormat,options.parseStrict),this.allDay=null!=(ref=options.allDay)&&ref,this._mutated()}return Twix._extend=function(){var attr,first,j,len,other,others;for(first=arguments[0],j=0,len=(others=2<=arguments.length?slice.call(arguments,1):[]).length;j<len;j++)for(attr in other=others[j])void 0!==other[attr]&&(first[attr]=other[attr]);return first},Twix.prototype.start=function(){return this._start.clone()},Twix.prototype.end=function(){return this._end.clone()},Twix.prototype.isSame=function(period){return this._start.isSame(this._end,period)},Twix.prototype.length=function(period,floatingPoint){return null==floatingPoint&&(floatingPoint=!1),this._displayEnd.diff(this._start,period,floatingPoint)},Twix.prototype.count=function(period){var end,start;return start=this.start().startOf(period),(end=this.end().startOf(period)).diff(start,period)+1},Twix.prototype.countInner=function(period){var end,ref,start;return(start=(ref=this._inner(period))[0])>=(end=ref[1])?0:end.diff(start,period)},Twix.prototype.iterate=function(intervalAmount,period,minHours){var end,hasNext,ref,start,_this;return intervalAmount=(ref=this._prepIterateInputs(intervalAmount,period,minHours))[0],period=ref[1],minHours=ref[2],start=this.start().startOf(period),end=this.end().startOf(period),this.allDay&&(end=end.add(1,"d")),_this=this,hasNext=function(){return!_this.allDay&&start<=end&&(!minHours||!start.isSame(end)||_this._end.hours()>minHours)||_this.allDay&&start<end},this._iterateHelper(period,start,hasNext,intervalAmount)},Twix.prototype.iterateInner=function(intervalAmount,period){var end,hasNext,ref,ref1,start;return intervalAmount=(ref=this._prepIterateInputs(intervalAmount,period))[0],period=ref[1],ref1=this._inner(period,intervalAmount),start=ref1[0],end=ref1[1],hasNext=function(){return start<end},this._iterateHelper(period,start,hasNext,intervalAmount)},Twix.prototype.humanizeLength=function(){return this.allDay?this.isSame("d")?"all day":this._start.from(this.end().add(1,"d"),!0):this._start.from(this._end,!0)},Twix.prototype.asDuration=function(units){var diff;return diff=this._end.diff(this._start),moment.duration(diff)},Twix.prototype.isPast=function(){return this._lastMilli<moment()},Twix.prototype.isFuture=function(){return this._start>moment()},Twix.prototype.isCurrent=function(){return!this.isPast()&&!this.isFuture()},Twix.prototype.contains=function(mom){return moment.isMoment(mom)||(mom=moment(mom)),this._start<=mom&&this._lastMilli>=mom},Twix.prototype.isEmpty=function(){return this._start.isSame(this._displayEnd)},Twix.prototype.overlaps=function(other){return this._displayEnd.isAfter(other._start)&&this._start.isBefore(other._displayEnd)},Twix.prototype.engulfs=function(other){return this._start<=other._start&&this._displayEnd>=other._displayEnd},Twix.prototype.union=function(other){var allDay,newEnd,newStart;return allDay=this.allDay&&other.allDay,new Twix(newStart=this._start<other._start?this._start:other._start,newEnd=this._lastMilli>other._lastMilli?allDay?this._end:this._displayEnd:allDay?other._end:other._displayEnd,allDay)},Twix.prototype.intersection=function(other){var allDay,newEnd,newStart;return allDay=this.allDay&&other.allDay,new Twix(newStart=this._start>other._start?this._start:other._start,newEnd=this._lastMilli<other._lastMilli?allDay?this._end:this._displayEnd:allDay?other._end:other._displayEnd,allDay)},Twix.prototype.xor=function(){var allDay,arr,endTime,i,item,j,k,last,len,len1,o,open,other,others,ref,results,start,t;for(others=1<=arguments.length?slice.call(arguments,0):[],open=0,start=null,results=[],allDay=function(){var j,len,results1;for(results1=[],j=0,len=others.length;j<len;j++)(o=others[j]).allDay&&results1.push(o);return results1}().length===others.length,arr=[],i=j=0,len=(ref=[this].concat(others)).length;j<len;i=++j)item=ref[i],arr.push({time:item._start,i:i,type:0}),arr.push({time:item._displayEnd,i:i,type:1});for(k=0,len1=(arr=arr.sort((function(a,b){return a.time-b.time}))).length;k<len1;k++)1===(other=arr[k]).type&&(open-=1),open===other.type&&(start=other.time),open===(other.type+1)%2&&(start&&((last=results[results.length-1])&&last._end.isSame(start)?(last._oEnd=other.time,last._mutated()):(t=new Twix(start,endTime=allDay?other.time.clone().subtract(1,"d"):other.time,allDay)).isEmpty()||results.push(t)),start=null),0===other.type&&(open+=1);return results},Twix.prototype.difference=function(){var j,len,others,ref,results1,t,_this;for(others=1<=arguments.length?slice.call(arguments,0):[],results1=[],j=0,len=(ref=this.xor.apply(this,others).map((_this=this,function(i){return _this.intersection(i)}))).length;j<len;j++)!(t=ref[j]).isEmpty()&&t.isValid()&&results1.push(t);return results1},Twix.prototype.split=function(){var args,dur,end,final,i,mom,start,time,times,vals;if(args=1<=arguments.length?slice.call(arguments,0):[],end=start=this.start(),moment.isDuration(args[0])?dur=args[0]:!moment.isMoment(args[0])&&!isArray(args[0])&&"object"==typeof args[0]||"number"==typeof args[0]&&"string"==typeof args[1]?dur=moment.duration(args[0],args[1]):times=isArray(args[0])?args[0]:args,times&&(times=function(){var j,len,results1;for(results1=[],j=0,len=times.length;j<len;j++)time=times[j],results1.push(moment(time));return results1}(),times=function(){var j,len,results1;for(results1=[],j=0,len=times.length;j<len;j++)(mom=times[j]).isValid()&&mom>=start&&results1.push(mom);return results1}().sort((function(a,b){return a.valueOf()-b.valueOf()}))),dur&&0===dur.asMilliseconds()||times&&0===times.length)return[this];for(vals=[],i=0,final=this._displayEnd;start<final&&(null==times||times[i]);)end=dur?start.clone().add(dur):times[i].clone(),end=moment.min(final,end),start.isSame(end)||vals.push(moment.twix(start,end)),start=end,i+=1;return!end.isSame(this._displayEnd)&&times&&vals.push(moment.twix(end,this._displayEnd)),vals},Twix.prototype.divide=function(parts){return this.split(this.length()/parts,"ms").slice(0,+(parts-1)+1||9e9)},Twix.prototype.isValid=function(){return this._start.isValid()&&this._end.isValid()&&this._start<=this._displayEnd},Twix.prototype.equals=function(other){return other instanceof Twix&&this.allDay===other.allDay&&this._start.valueOf()===other._start.valueOf()&&this._end.valueOf()===other._end.valueOf()},Twix.prototype.toString=function(){return"{start: "+this._start.format()+", end: "+this._end.format()+", allDay: "+(this.allDay?"true":"false")+"}"},Twix.prototype.toArray=function(intervalAmount,period,minHours){var itr,range;for(itr=this.iterate(intervalAmount,period,minHours),range=[];itr.hasNext();)range.push(itr.next());return range},Twix.prototype.simpleFormat=function(momentOpts,inopts){var options,s;return options={allDay:"(all day)",template:Twix.formatTemplate},Twix._extend(options,inopts||{}),s=options.template(this._start.format(momentOpts),this._end.format(momentOpts)),this.allDay&&options.allDay&&(s+=" "+options.allDay),s},Twix.prototype.format=function(inopts){var americanish,atomicMonthDate,common_bucket,end_bucket,fold,format,fs,global_first,goesIntoTheMorning,j,len,localFormat,momentHourFormat,needDate,needsMeridiem,options,process,start_bucket,together,_this;if(this.isEmpty())return"";for(momentHourFormat=this._start.localeData()._longDateFormat.LT[0],options={groupMeridiems:!0,spaceBeforeMeridiem:!0,showDayOfWeek:!1,hideTime:!1,hideYear:!1,implicitMinutes:!0,implicitDate:!1,implicitYear:!0,yearFormat:"YYYY",monthFormat:"MMM",weekdayFormat:"ddd",dayFormat:"D",meridiemFormat:"A",hourFormat:momentHourFormat,minuteFormat:"mm",allDay:"all day",explicitAllDay:!1,lastNightEndsAt:0,template:Twix.formatTemplate},Twix._extend(options,inopts||{}),fs=[],needsMeridiem=options.hourFormat&&"h"===options.hourFormat[0],localFormat=this._start.localeData()._longDateFormat.L,americanish=localFormat.indexOf("M")<localFormat.indexOf("D"),goesIntoTheMorning=options.lastNightEndsAt>0&&!this.allDay&&this.end().startOf("d").valueOf()===this.start().add(1,"d").startOf("d").valueOf()&&this._start.hours()>12&&this._end.hours()<options.lastNightEndsAt,needDate=!(options.hideDate||options.implicitDate&&this.start().startOf("d").valueOf()===moment().startOf("d").valueOf()&&(this.isSame("d")||goesIntoTheMorning)),atomicMonthDate=!(this.allDay||options.hideTime),this.allDay&&this.isSame("d")&&(options.implicitDate||options.explicitAllDay)&&fs.push({name:"all day simple",fn:function(){return options.allDay},pre:" ",slot:0}),!needDate||options.hideYear||options.implicitYear&&this._start.year()===moment().year()&&this.isSame("y")||fs.push({name:"year",fn:function(date){return date.format(options.yearFormat)},pre:americanish?", ":" ",slot:4}),atomicMonthDate&&needDate&&fs.push({name:"month-date",fn:function(date){var format;return format=americanish?options.monthFormat+" "+options.dayFormat:options.dayFormat+" "+options.monthFormat,date.format(format)},ignoreEnd:function(){return goesIntoTheMorning},pre:" ",slot:2}),!atomicMonthDate&&needDate&&fs.push({name:"month",fn:function(date){return date.format(options.monthFormat)},pre:" ",slot:americanish?2:3}),!atomicMonthDate&&needDate&&fs.push({name:"date",fn:function(date){return date.format(options.dayFormat)},pre:" ",slot:americanish?3:2}),needDate&&options.showDayOfWeek&&fs.push({name:"day of week",fn:function(date){return date.format(options.weekdayFormat)},pre:" ",slot:1}),options.groupMeridiems&&needsMeridiem&&!this.allDay&&!options.hideTime&&fs.push({name:"meridiem",fn:function(t){return t.format(options.meridiemFormat)},slot:6,pre:options.spaceBeforeMeridiem?" ":""}),this.allDay||options.hideTime||fs.push({name:"time",fn:function(date){var str;return str=0===date.minutes()&&options.implicitMinutes&&needsMeridiem?date.format(options.hourFormat):date.format(options.hourFormat+":"+options.minuteFormat),!options.groupMeridiems&&needsMeridiem&&(options.spaceBeforeMeridiem&&(str+=" "),str+=date.format(options.meridiemFormat)),str},slot:5,pre:", "}),start_bucket=[],end_bucket=[],common_bucket=[],together=!0,_this=this,process=function(format){var end_str,start_group,start_str;return start_str=format.fn(_this._start),end_str=format.ignoreEnd&&format.ignoreEnd()?start_str:format.fn(_this._end),start_group={format:format,value:function(){return start_str}},end_str===start_str&&together?common_bucket.push(start_group):(together&&(together=!1,common_bucket.push({format:{slot:format.slot,pre:""},value:function(){return options.template(fold(start_bucket),fold(end_bucket,!0).trim())}})),start_bucket.push(start_group),end_bucket.push({format:format,value:function(){return end_str}}))},j=0,len=fs.length;j<len;j++)process(format=fs[j]);return global_first=!0,(fold=function(array,skip_pre){var k,len1,local_first,ref,section,str;for(local_first=!0,str="",k=0,len1=(ref=array.sort((function(a,b){return a.format.slot-b.format.slot}))).length;k<len1;k++)section=ref[k],global_first||(str+=local_first&&skip_pre?" ":section.format.pre),str+=section.value(),global_first=!1,local_first=!1;return str})(common_bucket)},Twix.prototype._iterateHelper=function(period,iter,hasNext,intervalAmount){return{next:function(){var val;return hasNext()?(val=iter.clone(),iter.add(intervalAmount,period),val):null},hasNext:hasNext}},Twix.prototype._prepIterateInputs=function(){var inputs,intervalAmount,minHours,period,ref,ref1;return"number"==typeof(inputs=1<=arguments.length?slice.call(arguments,0):[])[0]?inputs:("string"==typeof inputs[0]&&(period=inputs.shift(),intervalAmount=null!=(ref=inputs.pop())?ref:1,inputs.length&&(minHours=null!=(ref1=inputs[0])&&ref1)),moment.isDuration(inputs[0])&&(period="ms",intervalAmount=inputs[0].as(period)),[intervalAmount,period,minHours])},Twix.prototype._inner=function(period,intervalAmount){var durationCount,durationPeriod,end,modulus,start;return null==period&&(period="ms"),null==intervalAmount&&(intervalAmount=1),start=this.start(),end=this._displayEnd.clone(),start>start.clone().startOf(period)&&start.startOf(period).add(intervalAmount,period),end<end.clone().endOf(period)&&end.startOf(period),modulus=(durationCount=(durationPeriod=start.twix(end).asDuration(period)).get(period))%intervalAmount,end.subtract(modulus,period),[start,end]},Twix.prototype._mutated=function(){return this._start=this.allDay?this._oStart.clone().startOf("d"):this._oStart,this._lastMilli=this.allDay?this._oEnd.clone().endOf("d"):this._oEnd,this._end=this.allDay?this._oEnd.clone().startOf("d"):this._oEnd,this._displayEnd=this.allDay?this._end.clone().add(1,"d"):this._end},Twix}())._extend(moment.locale(),{_twix:Twix.defaults}),Twix.formatTemplate=function(leftSide,rightSide){return leftSide+" - "+rightSide},moment.twix=function(){return function(func,args,ctor){ctor.prototype=func.prototype;var child=new ctor,result=func.apply(child,args);return Object(result)===result?result:child}(Twix,arguments,(function(){}))},moment.fn.twix=function(){return function(func,args,ctor){ctor.prototype=func.prototype;var child=new ctor,result=func.apply(child,args);return Object(result)===result?result:child}(Twix,[this].concat(slice.call(arguments)),(function(){}))},moment.fn.forDuration=function(duration,allDay){return new Twix(this,this.clone().add(duration),allDay)},moment.duration.fn&&(moment.duration.fn.afterMoment=function(startingTime,allDay){return new Twix(startingTime,moment(startingTime).clone().add(this),allDay)},moment.duration.fn.beforeMoment=function(startingTime,allDay){return new Twix(moment(startingTime).clone().subtract(this),startingTime,allDay)}),moment.twixClass=Twix,Twix},hasModule)return module.exports=makeTwix(require("moment"));"function"==typeof define&&define("twix",["moment"],(function(moment){return makeTwix(moment)})),this.moment?this.Twix=makeTwix(this.moment):"undefined"!=typeof moment&&null!==moment&&(this.Twix=makeTwix(moment))}.call(this),function(){var ObjectId=function(){var increment=0,pid=Math.floor(32767*Math.random()),machine=Math.floor(16777216*Math.random());if("undefined"!=typeof localStorage){var mongoMachineId=parseInt(localStorage.mongoMachineId);mongoMachineId>=0&&mongoMachineId<=16777215&&(machine=Math.floor(localStorage.mongoMachineId)),localStorage.mongoMachineId=machine,document.cookie="mongoMachineId="+machine+";expires=Tue, 19 Jan 2038 05:00:00 GMT"}else{var cookieList=document.cookie.split("; ");for(var i in cookieList){var cookie=cookieList[i].split("=");if("mongoMachineId"==cookie[0]&&cookie[1]>=0&&cookie[1]<=16777215){machine=cookie[1];break}}document.cookie="mongoMachineId="+machine+";expires=Tue, 19 Jan 2038 05:00:00 GMT"}function ObjId(){if(!(this instanceof ObjectId))return new ObjectId(arguments[0],arguments[1],arguments[2],arguments[3]).toString();"object"==typeof arguments[0]?(this.timestamp=arguments[0].timestamp,this.machine=arguments[0].machine,this.pid=arguments[0].pid,this.increment=arguments[0].increment):"string"==typeof arguments[0]&&24==arguments[0].length?(this.timestamp=Number("0x"+arguments[0].substr(0,8)),this.machine=Number("0x"+arguments[0].substr(8,6)),this.pid=Number("0x"+arguments[0].substr(14,4)),this.increment=Number("0x"+arguments[0].substr(18,6))):4==arguments.length&&null!=arguments[0]?(this.timestamp=arguments[0],this.machine=arguments[1],this.pid=arguments[2],this.increment=arguments[3]):(this.timestamp=Math.floor((new Date).valueOf()/1e3),this.machine=machine,this.pid=pid,this.increment=increment++,increment>16777215&&(increment=0))}return ObjId}();ObjectId.prototype.getDate=function(){return new Date(1e3*this.timestamp)},ObjectId.prototype.toArray=function(){var strOid=this.toString(),array=[],i;for(i=0;i<12;i++)array[i]=parseInt(strOid.slice(2*i,2*i+2),16);return array},ObjectId.prototype.toString=function(){var timestamp=this.timestamp.toString(16),machine=this.machine.toString(16),pid=this.pid.toString(16),increment=this.increment.toString(16);return"00000000".substr(0,8-timestamp.length)+timestamp+"000000".substr(0,6-machine.length)+machine+"0000".substr(0,4-pid.length)+pid+"000000".substr(0,6-increment.length)+increment},void 0!==exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=ObjectId),exports.ObjectId=ObjectId):this.ObjectId=ObjectId}.call(this),
/**!

 @license
 handlebars v4.0.10

Copyright (C) 2011-2016 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/
function webpackUniversalModuleDefinition(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory():"function"==typeof define&&define.amd?define([],factory):"object"==typeof exports?exports.Handlebars=factory():root.Handlebars=factory()}(this,(function(){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0;var _handlebarsRuntime,_handlebarsRuntime2=_interopRequireDefault(__webpack_require__(2)),_handlebarsCompilerAst,_handlebarsCompilerAst2=_interopRequireDefault(__webpack_require__(35)),_handlebarsCompilerBase=__webpack_require__(36),_handlebarsCompilerCompiler=__webpack_require__(41),_handlebarsCompilerJavascriptCompiler,_handlebarsCompilerJavascriptCompiler2=_interopRequireDefault(__webpack_require__(42)),_handlebarsCompilerVisitor,_handlebarsCompilerVisitor2=_interopRequireDefault(__webpack_require__(39)),_handlebarsNoConflict,_handlebarsNoConflict2=_interopRequireDefault(__webpack_require__(34)),_create=_handlebarsRuntime2.default.create;function create(){var hb=_create();return hb.compile=function(input,options){return _handlebarsCompilerCompiler.compile(input,options,hb)},hb.precompile=function(input,options){return _handlebarsCompilerCompiler.precompile(input,options,hb)},hb.AST=_handlebarsCompilerAst2.default,hb.Compiler=_handlebarsCompilerCompiler.Compiler,hb.JavaScriptCompiler=_handlebarsCompilerJavascriptCompiler2.default,hb.Parser=_handlebarsCompilerBase.parser,hb.parse=_handlebarsCompilerBase.parse,hb}var inst=create();inst.create=create,_handlebarsNoConflict2.default(inst),inst.Visitor=_handlebarsCompilerVisitor2.default,inst.default=inst,exports.default=inst,module.exports=exports.default},function(module,exports){"use strict";exports.default=function(obj){return obj&&obj.__esModule?obj:{default:obj}},exports.__esModule=!0},function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(3).default,_interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0;var _handlebarsBase,base=_interopRequireWildcard(__webpack_require__(4)),_handlebarsSafeString,_handlebarsSafeString2=_interopRequireDefault(__webpack_require__(21)),_handlebarsException,_handlebarsException2=_interopRequireDefault(__webpack_require__(6)),_handlebarsUtils,Utils=_interopRequireWildcard(__webpack_require__(5)),_handlebarsRuntime,runtime=_interopRequireWildcard(__webpack_require__(22)),_handlebarsNoConflict,_handlebarsNoConflict2=_interopRequireDefault(__webpack_require__(34));function create(){var hb=new base.HandlebarsEnvironment;return Utils.extend(hb,base),hb.SafeString=_handlebarsSafeString2.default,hb.Exception=_handlebarsException2.default,hb.Utils=Utils,hb.escapeExpression=Utils.escapeExpression,hb.VM=runtime,hb.template=function(spec){return runtime.template(spec,hb)},hb}var inst=create();inst.create=create,_handlebarsNoConflict2.default(inst),inst.default=inst,exports.default=inst,module.exports=exports.default},function(module,exports){"use strict";exports.default=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj},exports.__esModule=!0},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0,exports.HandlebarsEnvironment=HandlebarsEnvironment;var _utils=__webpack_require__(5),_exception,_exception2=_interopRequireDefault(__webpack_require__(6)),_helpers=__webpack_require__(10),_decorators=__webpack_require__(18),_logger,_logger2=_interopRequireDefault(__webpack_require__(20)),VERSION="4.0.10";exports.VERSION=VERSION;var COMPILER_REVISION=7;exports.COMPILER_REVISION=7;var REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};exports.REVISION_CHANGES=REVISION_CHANGES;var objectType="[object Object]";function HandlebarsEnvironment(helpers,partials,decorators){this.helpers=helpers||{},this.partials=partials||{},this.decorators=decorators||{},_helpers.registerDefaultHelpers(this),_decorators.registerDefaultDecorators(this)}HandlebarsEnvironment.prototype={constructor:HandlebarsEnvironment,logger:_logger2.default,log:_logger2.default.log,registerHelper:function registerHelper(name,fn){if(_utils.toString.call(name)===objectType){if(fn)throw new _exception2.default("Arg not supported with multiple helpers");_utils.extend(this.helpers,name)}else this.helpers[name]=fn},unregisterHelper:function unregisterHelper(name){delete this.helpers[name]},registerPartial:function registerPartial(name,partial){if(_utils.toString.call(name)===objectType)_utils.extend(this.partials,name);else{if(void 0===partial)throw new _exception2.default('Attempting to register a partial called "'+name+'" as undefined');this.partials[name]=partial}},unregisterPartial:function unregisterPartial(name){delete this.partials[name]},registerDecorator:function registerDecorator(name,fn){if(_utils.toString.call(name)===objectType){if(fn)throw new _exception2.default("Arg not supported with multiple decorators");_utils.extend(this.decorators,name)}else this.decorators[name]=fn},unregisterDecorator:function unregisterDecorator(name){delete this.decorators[name]}};var log=_logger2.default.log;exports.log=log,exports.createFrame=_utils.createFrame,exports.logger=_logger2.default},function(module,exports){"use strict";exports.__esModule=!0,exports.extend=extend,exports.indexOf=indexOf,exports.escapeExpression=escapeExpression,exports.isEmpty=isEmpty,exports.createFrame=createFrame,exports.blockParams=blockParams,exports.appendContextPath=appendContextPath;var escape={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},badChars=/[&<>"'`=]/g,possible=/[&<>"'`=]/;function escapeChar(chr){return escape[chr]}function extend(obj){for(var i=1;i<arguments.length;i++)for(var key in arguments[i])Object.prototype.hasOwnProperty.call(arguments[i],key)&&(obj[key]=arguments[i][key]);return obj}var toString=Object.prototype.toString;exports.toString=toString;var isFunction=function isFunction(value){return"function"==typeof value};isFunction(/x/)&&(exports.isFunction=isFunction=function(value){return"function"==typeof value&&"[object Function]"===toString.call(value)}),exports.isFunction=isFunction;var isArray=Array.isArray||function(value){return!(!value||"object"!=typeof value)&&"[object Array]"===toString.call(value)};function indexOf(array,value){for(var i=0,len=array.length;i<len;i++)if(array[i]===value)return i;return-1}function escapeExpression(string){if("string"!=typeof string){if(string&&string.toHTML)return string.toHTML();if(null==string)return"";if(!string)return string+"";string=""+string}return possible.test(string)?string.replace(badChars,escapeChar):string}function isEmpty(value){return!value&&0!==value||!(!isArray(value)||0!==value.length)}function createFrame(object){var frame=extend({},object);return frame._parent=object,frame}function blockParams(params,ids){return params.path=ids,params}function appendContextPath(contextPath,id){return(contextPath?contextPath+".":"")+id}exports.isArray=isArray},function(module,exports,__webpack_require__){"use strict";var _Object$defineProperty=__webpack_require__(7).default;exports.__esModule=!0;var errorProps=["description","fileName","lineNumber","message","name","number","stack"];function Exception(message,node){var loc=node&&node.loc,line=void 0,column=void 0;loc&&(message+=" - "+(line=loc.start.line)+":"+(column=loc.start.column));for(var tmp=Error.prototype.constructor.call(this,message),idx=0;idx<errorProps.length;idx++)this[errorProps[idx]]=tmp[errorProps[idx]];Error.captureStackTrace&&Error.captureStackTrace(this,Exception);try{loc&&(this.lineNumber=line,_Object$defineProperty?Object.defineProperty(this,"column",{value:column,enumerable:!0}):this.column=column)}catch(nop){}}Exception.prototype=new Error,exports.default=Exception,module.exports=exports.default},function(module,exports,__webpack_require__){module.exports={default:__webpack_require__(8),__esModule:!0}},function(module,exports,__webpack_require__){var $=__webpack_require__(9);module.exports=function defineProperty(it,key,desc){return $.setDesc(it,key,desc)}},function(module,exports){var $Object=Object;module.exports={create:$Object.create,getProto:$Object.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:$Object.getOwnPropertyDescriptor,setDesc:$Object.defineProperty,setDescs:$Object.defineProperties,getKeys:$Object.keys,getNames:$Object.getOwnPropertyNames,getSymbols:$Object.getOwnPropertySymbols,each:[].forEach}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0,exports.registerDefaultHelpers=registerDefaultHelpers;var _helpersBlockHelperMissing,_helpersBlockHelperMissing2=_interopRequireDefault(__webpack_require__(11)),_helpersEach,_helpersEach2=_interopRequireDefault(__webpack_require__(12)),_helpersHelperMissing,_helpersHelperMissing2=_interopRequireDefault(__webpack_require__(13)),_helpersIf,_helpersIf2=_interopRequireDefault(__webpack_require__(14)),_helpersLog,_helpersLog2=_interopRequireDefault(__webpack_require__(15)),_helpersLookup,_helpersLookup2=_interopRequireDefault(__webpack_require__(16)),_helpersWith,_helpersWith2=_interopRequireDefault(__webpack_require__(17));function registerDefaultHelpers(instance){_helpersBlockHelperMissing2.default(instance),_helpersEach2.default(instance),_helpersHelperMissing2.default(instance),_helpersIf2.default(instance),_helpersLog2.default(instance),_helpersLookup2.default(instance),_helpersWith2.default(instance)}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _utils=__webpack_require__(5);exports.default=function(instance){instance.registerHelper("blockHelperMissing",(function(context,options){var inverse=options.inverse,fn=options.fn;if(!0===context)return fn(this);if(!1===context||null==context)return inverse(this);if(_utils.isArray(context))return context.length>0?(options.ids&&(options.ids=[options.name]),instance.helpers.each(context,options)):inverse(this);if(options.data&&options.ids){var data=_utils.createFrame(options.data);data.contextPath=_utils.appendContextPath(options.data.contextPath,options.name),options={data:data}}return fn(context,options)}))},module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0;var _utils=__webpack_require__(5),_exception,_exception2=_interopRequireDefault(__webpack_require__(6));exports.default=function(instance){instance.registerHelper("each",(function(context,options){if(!options)throw new _exception2.default("Must pass iterator to #each");var fn=options.fn,inverse=options.inverse,i=0,ret="",data=void 0,contextPath=void 0;function execIteration(field,index,last){data&&(data.key=field,data.index=index,data.first=0===index,data.last=!!last,contextPath&&(data.contextPath=contextPath+field)),ret+=fn(context[field],{data:data,blockParams:_utils.blockParams([context[field],field],[contextPath+field,null])})}if(options.data&&options.ids&&(contextPath=_utils.appendContextPath(options.data.contextPath,options.ids[0])+"."),_utils.isFunction(context)&&(context=context.call(this)),options.data&&(data=_utils.createFrame(options.data)),context&&"object"==typeof context)if(_utils.isArray(context))for(var j=context.length;i<j;i++)i in context&&execIteration(i,i,i===context.length-1);else{var priorKey=void 0;for(var key in context)context.hasOwnProperty(key)&&(void 0!==priorKey&&execIteration(priorKey,i-1),priorKey=key,i++);void 0!==priorKey&&execIteration(priorKey,i-1,!0)}return 0===i&&(ret=inverse(this)),ret}))},module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0;var _exception,_exception2=_interopRequireDefault(__webpack_require__(6));exports.default=function(instance){instance.registerHelper("helperMissing",(function(){if(1!==arguments.length)throw new _exception2.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}))},module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _utils=__webpack_require__(5);exports.default=function(instance){instance.registerHelper("if",(function(conditional,options){return _utils.isFunction(conditional)&&(conditional=conditional.call(this)),!options.hash.includeZero&&!conditional||_utils.isEmpty(conditional)?options.inverse(this):options.fn(this)})),instance.registerHelper("unless",(function(conditional,options){return instance.helpers.if.call(this,conditional,{fn:options.inverse,inverse:options.fn,hash:options.hash})}))},module.exports=exports.default},function(module,exports){"use strict";exports.__esModule=!0,exports.default=function(instance){instance.registerHelper("log",(function(){for(var args=[void 0],options=arguments[arguments.length-1],i=0;i<arguments.length-1;i++)args.push(arguments[i]);var level=1;null!=options.hash.level?level=options.hash.level:options.data&&null!=options.data.level&&(level=options.data.level),args[0]=level,instance.log.apply(instance,args)}))},module.exports=exports.default},function(module,exports){"use strict";exports.__esModule=!0,exports.default=function(instance){instance.registerHelper("lookup",(function(obj,field){return obj&&obj[field]}))},module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _utils=__webpack_require__(5);exports.default=function(instance){instance.registerHelper("with",(function(context,options){_utils.isFunction(context)&&(context=context.call(this));var fn=options.fn;if(_utils.isEmpty(context))return options.inverse(this);var data=options.data;return options.data&&options.ids&&((data=_utils.createFrame(options.data)).contextPath=_utils.appendContextPath(options.data.contextPath,options.ids[0])),fn(context,{data:data,blockParams:_utils.blockParams([context],[data&&data.contextPath])})}))},module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0,exports.registerDefaultDecorators=registerDefaultDecorators;var _decoratorsInline,_decoratorsInline2=_interopRequireDefault(__webpack_require__(19));function registerDefaultDecorators(instance){_decoratorsInline2.default(instance)}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _utils=__webpack_require__(5);exports.default=function(instance){instance.registerDecorator("inline",(function(fn,props,container,options){var ret=fn;return props.partials||(props.partials={},ret=function(context,options){var original=container.partials;container.partials=_utils.extend({},original,props.partials);var ret=fn(context,options);return container.partials=original,ret}),props.partials[options.args[0]]=options.fn,ret}))},module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _utils=__webpack_require__(5),logger={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function lookupLevel(level){if("string"==typeof level){var levelMap=_utils.indexOf(logger.methodMap,level.toLowerCase());level=levelMap>=0?levelMap:parseInt(level,10)}return level},log:function log(level){if(level=logger.lookupLevel(level),"undefined"!=typeof console&&logger.lookupLevel(logger.level)<=level){var method=logger.methodMap[level];console[method]||(method="log");for(var _len=arguments.length,message=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)message[_key-1]=arguments[_key];console[method].apply(console,message)}}};exports.default=logger,module.exports=exports.default},function(module,exports){"use strict";function SafeString(string){this.string=string}exports.__esModule=!0,SafeString.prototype.toString=SafeString.prototype.toHTML=function(){return""+this.string},exports.default=SafeString,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";var _Object$seal=__webpack_require__(23).default,_interopRequireWildcard=__webpack_require__(3).default,_interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0,exports.checkRevision=checkRevision,exports.template=template,exports.wrapProgram=wrapProgram,exports.resolvePartial=resolvePartial,exports.invokePartial=invokePartial,exports.noop=noop;var _utils,Utils=_interopRequireWildcard(__webpack_require__(5)),_exception,_exception2=_interopRequireDefault(__webpack_require__(6)),_base=__webpack_require__(4);function checkRevision(compilerInfo){var compilerRevision=compilerInfo&&compilerInfo[0]||1,currentRevision=_base.COMPILER_REVISION;if(compilerRevision!==currentRevision){if(compilerRevision<currentRevision){var runtimeVersions=_base.REVISION_CHANGES[currentRevision],compilerVersions=_base.REVISION_CHANGES[compilerRevision];throw new _exception2.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+runtimeVersions+") or downgrade your runtime to an older version ("+compilerVersions+").")}throw new _exception2.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+compilerInfo[1]+").")}}function template(templateSpec,env){if(!env)throw new _exception2.default("No environment passed to template");if(!templateSpec||!templateSpec.main)throw new _exception2.default("Unknown template object: "+typeof templateSpec);function invokePartialWrapper(partial,context,options){options.hash&&(context=Utils.extend({},context,options.hash),options.ids&&(options.ids[0]=!0)),partial=env.VM.resolvePartial.call(this,partial,context,options);var result=env.VM.invokePartial.call(this,partial,context,options);if(null==result&&env.compile&&(options.partials[options.name]=env.compile(partial,templateSpec.compilerOptions,env),result=options.partials[options.name](context,options)),null!=result){if(options.indent){for(var lines=result.split("\n"),i=0,l=lines.length;i<l&&(lines[i]||i+1!==l);i++)lines[i]=options.indent+lines[i];result=lines.join("\n")}return result}throw new _exception2.default("The partial "+options.name+" could not be compiled when running in runtime-only mode")}templateSpec.main.decorator=templateSpec.main_d,env.VM.checkRevision(templateSpec.compiler);var container={strict:function strict(obj,name){if(!(name in obj))throw new _exception2.default('"'+name+'" not defined in '+obj);return obj[name]},lookup:function lookup(depths,name){for(var len=depths.length,i=0;i<len;i++)if(depths[i]&&null!=depths[i][name])return depths[i][name]},lambda:function lambda(current,context){return"function"==typeof current?current.call(context):current},escapeExpression:Utils.escapeExpression,invokePartial:invokePartialWrapper,fn:function fn(i){var ret=templateSpec[i];return ret.decorator=templateSpec[i+"_d"],ret},programs:[],program:function program(i,data,declaredBlockParams,blockParams,depths){var programWrapper=this.programs[i],fn=this.fn(i);return data||depths||blockParams||declaredBlockParams?programWrapper=wrapProgram(this,i,fn,data,declaredBlockParams,blockParams,depths):programWrapper||(programWrapper=this.programs[i]=wrapProgram(this,i,fn)),programWrapper},data:function data(value,depth){for(;value&&depth--;)value=value._parent;return value},merge:function merge(param,common){var obj=param||common;return param&&common&&param!==common&&(obj=Utils.extend({},common,param)),obj},nullContext:_Object$seal({}),noop:env.VM.noop,compilerInfo:templateSpec.compiler};function ret(context){var options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],data=options.data;ret._setup(options),!options.partial&&templateSpec.useData&&(data=initData(context,data));var depths=void 0,blockParams=templateSpec.useBlockParams?[]:void 0;function main(context){return""+templateSpec.main(container,context,container.helpers,container.partials,data,blockParams,depths)}return templateSpec.useDepths&&(depths=options.depths?context!=options.depths[0]?[context].concat(options.depths):options.depths:[context]),(main=executeDecorators(templateSpec.main,main,container,options.depths||[],data,blockParams))(context,options)}return ret.isTop=!0,ret._setup=function(options){options.partial?(container.helpers=options.helpers,container.partials=options.partials,container.decorators=options.decorators):(container.helpers=container.merge(options.helpers,env.helpers),templateSpec.usePartial&&(container.partials=container.merge(options.partials,env.partials)),(templateSpec.usePartial||templateSpec.useDecorators)&&(container.decorators=container.merge(options.decorators,env.decorators)))},ret._child=function(i,data,blockParams,depths){if(templateSpec.useBlockParams&&!blockParams)throw new _exception2.default("must pass block params");if(templateSpec.useDepths&&!depths)throw new _exception2.default("must pass parent depths");return wrapProgram(container,i,templateSpec[i],data,0,blockParams,depths)},ret}function wrapProgram(container,i,fn,data,declaredBlockParams,blockParams,depths){function prog(context){var options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],currentDepths=depths;return!depths||context==depths[0]||context===container.nullContext&&null===depths[0]||(currentDepths=[context].concat(depths)),fn(container,context,container.helpers,container.partials,options.data||data,blockParams&&[options.blockParams].concat(blockParams),currentDepths)}return(prog=executeDecorators(fn,prog,container,depths,data,blockParams)).program=i,prog.depth=depths?depths.length:0,prog.blockParams=declaredBlockParams||0,prog}function resolvePartial(partial,context,options){return partial?partial.call||options.name||(options.name=partial,partial=options.partials[partial]):partial="@partial-block"===options.name?options.data["partial-block"]:options.partials[options.name],partial}function invokePartial(partial,context,options){var currentPartialBlock=options.data&&options.data["partial-block"];options.partial=!0,options.ids&&(options.data.contextPath=options.ids[0]||options.data.contextPath);var partialBlock=void 0;if(options.fn&&options.fn!==noop&&function(){options.data=_base.createFrame(options.data);var fn=options.fn;partialBlock=options.data["partial-block"]=function partialBlockWrapper(context){var options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return options.data=_base.createFrame(options.data),options.data["partial-block"]=currentPartialBlock,fn(context,options)},fn.partials&&(options.partials=Utils.extend({},options.partials,fn.partials))}(),void 0===partial&&partialBlock&&(partial=partialBlock),void 0===partial)throw new _exception2.default("The partial "+options.name+" could not be found");if(partial instanceof Function)return partial(context,options)}function noop(){return""}function initData(context,data){return data&&"root"in data||((data=data?_base.createFrame(data):{}).root=context),data}function executeDecorators(fn,prog,container,depths,data,blockParams){if(fn.decorator){var props={};prog=fn.decorator(prog,props,container,depths&&depths[0],data,blockParams,depths),Utils.extend(prog,props)}return prog}},function(module,exports,__webpack_require__){module.exports={default:__webpack_require__(24),__esModule:!0}},function(module,exports,__webpack_require__){__webpack_require__(25),module.exports=__webpack_require__(30).Object.seal},function(module,exports,__webpack_require__){var isObject=__webpack_require__(26);__webpack_require__(27)("seal",(function($seal){return function seal(it){return $seal&&isObject(it)?$seal(it):it}}))},function(module,exports){module.exports=function(it){return"object"==typeof it?null!==it:"function"==typeof it}},function(module,exports,__webpack_require__){var $export=__webpack_require__(28),core=__webpack_require__(30),fails=__webpack_require__(33);module.exports=function(KEY,exec){var fn=(core.Object||{})[KEY]||Object[KEY],exp={};exp[KEY]=exec(fn),$export($export.S+$export.F*fails((function(){fn(1)})),"Object",exp)}},function(module,exports,__webpack_require__){var global=__webpack_require__(29),core=__webpack_require__(30),ctx=__webpack_require__(31),PROTOTYPE="prototype",$export=function(type,name,source){var IS_FORCED=type&$export.F,IS_GLOBAL=type&$export.G,IS_STATIC=type&$export.S,IS_PROTO=type&$export.P,IS_BIND=type&$export.B,IS_WRAP=type&$export.W,exports=IS_GLOBAL?core:core[name]||(core[name]={}),target=IS_GLOBAL?global:IS_STATIC?global[name]:(global[name]||{}).prototype,key,own,out;for(key in IS_GLOBAL&&(source=name),source)(own=!IS_FORCED&&target&&key in target)&&key in exports||(out=own?target[key]:source[key],exports[key]=IS_GLOBAL&&"function"!=typeof target[key]?source[key]:IS_BIND&&own?ctx(out,global):IS_WRAP&&target[key]==out?function(C){var F=function(param){return this instanceof C?new C(param):C(param)};return F.prototype=C.prototype,F}(out):IS_PROTO&&"function"==typeof out?ctx(Function.call,out):out,IS_PROTO&&((exports.prototype||(exports.prototype={}))[key]=out))};$export.F=1,$export.G=2,$export.S=4,$export.P=8,$export.B=16,$export.W=32,module.exports=$export},function(module,exports){var global=module.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=global)},function(module,exports){var core=module.exports={version:"1.2.6"};"number"==typeof __e&&(__e=core)},function(module,exports,__webpack_require__){var aFunction=__webpack_require__(32);module.exports=function(fn,that,length){if(aFunction(fn),void 0===that)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},function(module,exports){module.exports=function(it){if("function"!=typeof it)throw TypeError(it+" is not a function!");return it}},function(module,exports){module.exports=function(exec){try{return!!exec()}catch(e){return!0}}},function(module,exports){(function(global){"use strict";exports.__esModule=!0,exports.default=function(Handlebars){var root=void 0!==global?global:window,$Handlebars=root.Handlebars;Handlebars.noConflict=function(){return root.Handlebars===Handlebars&&(root.Handlebars=$Handlebars),Handlebars}},module.exports=exports.default}).call(exports,function(){return this}())},function(module,exports){"use strict";exports.__esModule=!0;var AST={helpers:{helperExpression:function helperExpression(node){return"SubExpression"===node.type||("MustacheStatement"===node.type||"BlockStatement"===node.type)&&!!(node.params&&node.params.length||node.hash)},scopedId:function scopedId(path){return/^\.|this\b/.test(path.original)},simpleId:function simpleId(path){return 1===path.parts.length&&!AST.helpers.scopedId(path)&&!path.depth}}};exports.default=AST,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(1).default,_interopRequireWildcard=__webpack_require__(3).default;exports.__esModule=!0,exports.parse=parse;var _parser,_parser2=_interopRequireDefault(__webpack_require__(37)),_whitespaceControl,_whitespaceControl2=_interopRequireDefault(__webpack_require__(38)),_helpers,Helpers=_interopRequireWildcard(__webpack_require__(40)),_utils=__webpack_require__(5);exports.parser=_parser2.default;var yy={};function parse(input,options){return"Program"===input.type?input:(_parser2.default.yy=yy,yy.locInfo=function(locInfo){return new yy.SourceLocation(options&&options.srcName,locInfo)},new _whitespaceControl2.default(options).accept(_parser2.default.parse(input)));var strip}_utils.extend(yy,Helpers)},function(module,exports){"use strict";exports.__esModule=!0;var handlebars=function(){var parser={trace:function trace(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition_plus0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,1],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function anonymous(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 1:return $$[$0-1];case 2:this.$=yy.prepareProgram($$[$0]);break;case 3:case 4:case 5:case 6:case 7:case 8:this.$=$$[$0];break;case 9:this.$={type:"CommentStatement",value:yy.stripComment($$[$0]),strip:yy.stripFlags($$[$0],$$[$0]),loc:yy.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:$$[$0],value:$$[$0],loc:yy.locInfo(this._$)};break;case 11:this.$=yy.prepareRawBlock($$[$0-2],$$[$0-1],$$[$0],this._$);break;case 12:this.$={path:$$[$0-3],params:$$[$0-2],hash:$$[$0-1]};break;case 13:this.$=yy.prepareBlock($$[$0-3],$$[$0-2],$$[$0-1],$$[$0],!1,this._$);break;case 14:this.$=yy.prepareBlock($$[$0-3],$$[$0-2],$$[$0-1],$$[$0],!0,this._$);break;case 15:this.$={open:$$[$0-5],path:$$[$0-4],params:$$[$0-3],hash:$$[$0-2],blockParams:$$[$0-1],strip:yy.stripFlags($$[$0-5],$$[$0])};break;case 16:case 17:this.$={path:$$[$0-4],params:$$[$0-3],hash:$$[$0-2],blockParams:$$[$0-1],strip:yy.stripFlags($$[$0-5],$$[$0])};break;case 18:this.$={strip:yy.stripFlags($$[$0-1],$$[$0-1]),program:$$[$0]};break;case 19:var inverse=yy.prepareBlock($$[$0-2],$$[$0-1],$$[$0],$$[$0],!1,this._$),program=yy.prepareProgram([inverse],$$[$0-1].loc);program.chained=!0,this.$={strip:$$[$0-2].strip,program:program,chain:!0};break;case 20:this.$=$$[$0];break;case 21:this.$={path:$$[$0-1],strip:yy.stripFlags($$[$0-2],$$[$0])};break;case 22:case 23:this.$=yy.prepareMustache($$[$0-3],$$[$0-2],$$[$0-1],$$[$0-4],yy.stripFlags($$[$0-4],$$[$0]),this._$);break;case 24:this.$={type:"PartialStatement",name:$$[$0-3],params:$$[$0-2],hash:$$[$0-1],indent:"",strip:yy.stripFlags($$[$0-4],$$[$0]),loc:yy.locInfo(this._$)};break;case 25:this.$=yy.preparePartialBlock($$[$0-2],$$[$0-1],$$[$0],this._$);break;case 26:this.$={path:$$[$0-3],params:$$[$0-2],hash:$$[$0-1],strip:yy.stripFlags($$[$0-4],$$[$0])};break;case 27:case 28:this.$=$$[$0];break;case 29:this.$={type:"SubExpression",path:$$[$0-3],params:$$[$0-2],hash:$$[$0-1],loc:yy.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:$$[$0],loc:yy.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:yy.id($$[$0-2]),value:$$[$0],loc:yy.locInfo(this._$)};break;case 32:this.$=yy.id($$[$0-1]);break;case 33:case 34:this.$=$$[$0];break;case 35:this.$={type:"StringLiteral",value:$$[$0],original:$$[$0],loc:yy.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number($$[$0]),original:Number($$[$0]),loc:yy.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===$$[$0],original:"true"===$$[$0],loc:yy.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:yy.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:yy.locInfo(this._$)};break;case 40:case 41:this.$=$$[$0];break;case 42:this.$=yy.preparePath(!0,$$[$0],this._$);break;case 43:this.$=yy.preparePath(!1,$$[$0],this._$);break;case 44:$$[$0-2].push({part:yy.id($$[$0]),original:$$[$0],separator:$$[$0-1]}),this.$=$$[$0-2];break;case 45:this.$=[{part:yy.id($$[$0]),original:$$[$0]}];break;case 46:this.$=[];break;case 47:$$[$0-1].push($$[$0]);break;case 48:this.$=[$$[$0]];break;case 49:$$[$0-1].push($$[$0]);break;case 50:this.$=[];break;case 51:$$[$0-1].push($$[$0]);break;case 58:this.$=[];break;case 59:$$[$0-1].push($$[$0]);break;case 64:this.$=[];break;case 65:$$[$0-1].push($$[$0]);break;case 70:this.$=[];break;case 71:$$[$0-1].push($$[$0]);break;case 78:this.$=[];break;case 79:$$[$0-1].push($$[$0]);break;case 82:this.$=[];break;case 83:$$[$0-1].push($$[$0]);break;case 86:this.$=[];break;case 87:$$[$0-1].push($$[$0]);break;case 90:this.$=[];break;case 91:$$[$0-1].push($$[$0]);break;case 94:this.$=[];break;case 95:$$[$0-1].push($$[$0]);break;case 98:this.$=[$$[$0]];break;case 99:$$[$0-1].push($$[$0]);break;case 100:this.$=[$$[$0]];break;case 101:$$[$0-1].push($$[$0])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{13:40,15:[1,20],17:39},{20:42,56:41,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:45,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:48,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:42,56:49,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:50,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,51]},{72:[1,35],86:52},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:53,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:54,38:56,39:[1,58],43:57,44:[1,59],45:55,47:[2,54]},{28:60,43:61,44:[1,59],47:[2,56]},{13:63,15:[1,20],18:[1,62]},{15:[2,48],18:[2,48]},{33:[2,86],57:64,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:65,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:66,47:[1,67]},{30:68,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:69,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:70,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:71,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:75,33:[2,80],50:72,63:73,64:76,65:[1,44],69:74,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,80]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,51]},{20:75,53:81,54:[2,84],63:82,64:76,65:[1,44],69:83,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:84,47:[1,67]},{47:[2,55]},{4:85,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:86,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:87,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:88,47:[1,67]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:75,33:[2,88],58:89,63:90,64:76,65:[1,44],69:91,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:92,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:93,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,31:94,33:[2,60],63:95,64:76,65:[1,44],69:96,70:77,71:78,72:[1,79],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,66],36:97,63:98,64:76,65:[1,44],69:99,70:77,71:78,72:[1,79],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,22:100,23:[2,52],63:101,64:76,65:[1,44],69:102,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,92],62:103,63:104,64:76,65:[1,44],69:105,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,106]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:107,72:[1,108],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,109],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,110]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:56,39:[1,58],43:57,44:[1,59],45:112,46:111,47:[2,76]},{33:[2,70],40:113,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,114]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:75,63:116,64:76,65:[1,44],67:115,68:[2,96],69:117,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,118]},{32:119,33:[2,62],74:120,75:[1,121]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:122,74:123,75:[1,121]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,124]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,125]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,109]},{20:75,63:126,64:76,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:75,33:[2,72],41:127,63:128,64:76,65:[1,44],69:129,70:77,71:78,72:[1,79],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,130]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,131]},{33:[2,63]},{72:[1,133],76:132},{33:[1,134]},{33:[2,69]},{15:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:135,74:136,75:[1,121]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,138],77:[1,137]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,139]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],55:[2,55],57:[2,20],61:[2,57],74:[2,81],83:[2,85],87:[2,18],91:[2,89],102:[2,53],105:[2,93],111:[2,19],112:[2,77],117:[2,97],120:[2,63],123:[2,69],124:[2,12],136:[2,75],137:[2,32]},parseError:function parseError(str,hash){throw new Error(str)},parse:function parse(input){var self=this,stack=[0],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,TERROR=2,EOF=1;this.lexer.setInput(input),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var yyloc=this.lexer.yylloc;lstack.push(yyloc);var ranges=this.lexer.options&&this.lexer.options.ranges;function popStack(n){stack.length=stack.length-2*n,vstack.length=vstack.length-n,lstack.length=lstack.length-n}function lex(){var token;return"number"!=typeof(token=self.lexer.lex()||1)&&(token=self.symbols_[token]||token),token}"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var symbol,preErrorSymbol,state,action,a,r,yyval={},p,len,newState,expected;;){if(state=stack[stack.length-1],this.defaultActions[state]?action=this.defaultActions[state]:(null==symbol&&(symbol=lex()),action=table[state]&&table[state][symbol]),void 0===action||!action.length||!action[0]){var errStr="";if(!recovering){for(p in expected=[],table[state])this.terminals_[p]&&p>2&&expected.push("'"+this.terminals_[p]+"'");errStr=this.lexer.showPosition?"Parse error on line "+(yylineno+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'":"Parse error on line "+(yylineno+1)+": Unexpected "+(1==symbol?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'"),this.parseError(errStr,{text:this.lexer.match,token:this.terminals_[symbol]||symbol,line:this.lexer.yylineno,loc:yyloc,expected:expected})}}if(action[0]instanceof Array&&action.length>1)throw new Error("Parse Error: multiple actions possible at state: "+state+", token: "+symbol);switch(action[0]){case 1:stack.push(symbol),vstack.push(this.lexer.yytext),lstack.push(this.lexer.yylloc),stack.push(action[1]),symbol=null,preErrorSymbol?(symbol=preErrorSymbol,preErrorSymbol=null):(yyleng=this.lexer.yyleng,yytext=this.lexer.yytext,yylineno=this.lexer.yylineno,yyloc=this.lexer.yylloc,recovering>0&&recovering--);break;case 2:if(len=this.productions_[action[1]][1],yyval.$=vstack[vstack.length-len],yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column},ranges&&(yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]),void 0!==(r=this.performAction.call(yyval,yytext,yyleng,yylineno,this.yy,action[1],vstack,lstack)))return r;len&&(stack=stack.slice(0,-1*len*2),vstack=vstack.slice(0,-1*len),lstack=lstack.slice(0,-1*len)),stack.push(this.productions_[action[1]][0]),vstack.push(yyval.$),lstack.push(yyval._$),newState=table[stack[stack.length-2]][stack[stack.length-1]],stack.push(newState);break;case 3:return!0}}return!0}},lexer=function(){var lexer={EOF:1,parseError:function parseError(str,hash){if(!this.yy.parser)throw new Error(str);this.yy.parser.parseError(str,hash)},setInput:function setInput(input){return this._input=input,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function input(){var ch=this._input[0],lines;return this.yytext+=ch,this.yyleng++,this.offset++,this.match+=ch,this.matched+=ch,ch.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ch},unput:function unput(ch){var len=ch.length,lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-len-1),this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),lines.length-1&&(this.yylineno-=lines.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-len]),this},more:function more(){return this._more=!0,this},less:function less(n){this.unput(this.match.slice(n))},pastInput:function pastInput(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},upcomingInput:function upcomingInput(){var next=this.match;return next.length<20&&(next+=this._input.substr(0,20-next.length)),(next.substr(0,20)+(next.length>20?"...":"")).replace(/\n/g,"")},showPosition:function showPosition(){var pre=this.pastInput(),c=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c+"^"},next:function next(){if(this.done)return this.EOF;var token,match,tempMatch,index,col,lines;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var rules=this._currentRules(),i=0;i<rules.length&&(!(tempMatch=this._input.match(this.rules[rules[i]]))||match&&!(tempMatch[0].length>match[0].length)||(match=tempMatch,index=i,this.options.flex));i++);return match?((lines=match[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=lines.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match[0].length},this.yytext+=match[0],this.match+=match[0],this.matches=match,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(match[0].length),this.matched+=match[0],token=this.performAction.call(this,this.yy,this,rules[index],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),token||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function lex(){var r=this.next();return void 0!==r?r:this.lex()},begin:function begin(condition){this.conditionStack.push(condition)},popState:function popState(){return this.conditionStack.pop()},_currentRules:function _currentRules(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function topState(){return this.conditionStack[this.conditionStack.length-2]},pushState:function begin(condition){this.begin(condition)},options:{},performAction:function anonymous(yy,yy_,$avoiding_name_collisions,YY_START){function strip(start,end){return yy_.yytext=yy_.yytext.substr(start,yy_.yyleng-end)}var YYSTATE=YY_START;switch($avoiding_name_collisions){case 0:if("\\\\"===yy_.yytext.slice(-2)?(strip(0,1),this.begin("mu")):"\\"===yy_.yytext.slice(-1)?(strip(0,1),this.begin("emu")):this.begin("mu"),yy_.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(yy_.yytext=yy_.yytext.substr(5,yy_.yyleng-9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(yy_.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return yy_.yytext=strip(1,2).replace(/\\"/g,'"'),80;case 32:return yy_.yytext=strip(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return yy_.yytext=yy_.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}};return lexer}();function Parser(){this.yy={}}return parser.lexer=lexer,Parser.prototype=parser,parser.Parser=Parser,new Parser}();exports.default=handlebars,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0;var _visitor,_visitor2=_interopRequireDefault(__webpack_require__(39));function WhitespaceControl(){var options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=options}function isPrevWhitespace(body,i,isRoot){void 0===i&&(i=body.length);var prev=body[i-1],sibling=body[i-2];return prev?"ContentStatement"===prev.type?(sibling||!isRoot?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(prev.original):void 0:isRoot}function isNextWhitespace(body,i,isRoot){void 0===i&&(i=-1);var next=body[i+1],sibling=body[i+2];return next?"ContentStatement"===next.type?(sibling||!isRoot?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(next.original):void 0:isRoot}function omitRight(body,i,multiple){var current=body[null==i?0:i+1];if(current&&"ContentStatement"===current.type&&(multiple||!current.rightStripped)){var original=current.value;current.value=current.value.replace(multiple?/^\s+/:/^[ \t]*\r?\n?/,""),current.rightStripped=current.value!==original}}function omitLeft(body,i,multiple){var current=body[null==i?body.length-1:i-1];if(current&&"ContentStatement"===current.type&&(multiple||!current.leftStripped)){var original=current.value;return current.value=current.value.replace(multiple?/\s+$/:/[ \t]+$/,""),current.leftStripped=current.value!==original,current.leftStripped}}WhitespaceControl.prototype=new _visitor2.default,WhitespaceControl.prototype.Program=function(program){var doStandalone=!this.options.ignoreStandalone,isRoot=!this.isRootSeen;this.isRootSeen=!0;for(var body=program.body,i=0,l=body.length;i<l;i++){var current=body[i],strip=this.accept(current);if(strip){var _isPrevWhitespace=isPrevWhitespace(body,i,isRoot),_isNextWhitespace=isNextWhitespace(body,i,isRoot),openStandalone=strip.openStandalone&&_isPrevWhitespace,closeStandalone=strip.closeStandalone&&_isNextWhitespace,inlineStandalone=strip.inlineStandalone&&_isPrevWhitespace&&_isNextWhitespace;strip.close&&omitRight(body,i,!0),strip.open&&omitLeft(body,i,!0),doStandalone&&inlineStandalone&&(omitRight(body,i),omitLeft(body,i)&&"PartialStatement"===current.type&&(current.indent=/([ \t]+$)/.exec(body[i-1].original)[1])),doStandalone&&openStandalone&&(omitRight((current.program||current.inverse).body),omitLeft(body,i)),doStandalone&&closeStandalone&&(omitRight(body,i),omitLeft((current.inverse||current.program).body))}}return program},WhitespaceControl.prototype.BlockStatement=WhitespaceControl.prototype.DecoratorBlock=WhitespaceControl.prototype.PartialBlockStatement=function(block){this.accept(block.program),this.accept(block.inverse);var program=block.program||block.inverse,inverse=block.program&&block.inverse,firstInverse=inverse,lastInverse=inverse;if(inverse&&inverse.chained)for(firstInverse=inverse.body[0].program;lastInverse.chained;)lastInverse=lastInverse.body[lastInverse.body.length-1].program;var strip={open:block.openStrip.open,close:block.closeStrip.close,openStandalone:isNextWhitespace(program.body),closeStandalone:isPrevWhitespace((firstInverse||program).body)};if(block.openStrip.close&&omitRight(program.body,null,!0),inverse){var inverseStrip=block.inverseStrip;inverseStrip.open&&omitLeft(program.body,null,!0),inverseStrip.close&&omitRight(firstInverse.body,null,!0),block.closeStrip.open&&omitLeft(lastInverse.body,null,!0),!this.options.ignoreStandalone&&isPrevWhitespace(program.body)&&isNextWhitespace(firstInverse.body)&&(omitLeft(program.body),omitRight(firstInverse.body))}else block.closeStrip.open&&omitLeft(program.body,null,!0);return strip},WhitespaceControl.prototype.Decorator=WhitespaceControl.prototype.MustacheStatement=function(mustache){return mustache.strip},WhitespaceControl.prototype.PartialStatement=WhitespaceControl.prototype.CommentStatement=function(node){var strip=node.strip||{};return{inlineStandalone:!0,open:strip.open,close:strip.close}},exports.default=WhitespaceControl,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0;var _exception,_exception2=_interopRequireDefault(__webpack_require__(6));function Visitor(){this.parents=[]}function visitSubExpression(mustache){this.acceptRequired(mustache,"path"),this.acceptArray(mustache.params),this.acceptKey(mustache,"hash")}function visitBlock(block){visitSubExpression.call(this,block),this.acceptKey(block,"program"),this.acceptKey(block,"inverse")}function visitPartial(partial){this.acceptRequired(partial,"name"),this.acceptArray(partial.params),this.acceptKey(partial,"hash")}Visitor.prototype={constructor:Visitor,mutating:!1,acceptKey:function acceptKey(node,name){var value=this.accept(node[name]);if(this.mutating){if(value&&!Visitor.prototype[value.type])throw new _exception2.default('Unexpected node type "'+value.type+'" found when accepting '+name+" on "+node.type);node[name]=value}},acceptRequired:function acceptRequired(node,name){if(this.acceptKey(node,name),!node[name])throw new _exception2.default(node.type+" requires "+name)},acceptArray:function acceptArray(array){for(var i=0,l=array.length;i<l;i++)this.acceptKey(array,i),array[i]||(array.splice(i,1),i--,l--)},accept:function accept(object){if(object){if(!this[object.type])throw new _exception2.default("Unknown type: "+object.type,object);this.current&&this.parents.unshift(this.current),this.current=object;var ret=this[object.type](object);return this.current=this.parents.shift(),!this.mutating||ret?ret:!1!==ret?object:void 0}},Program:function Program(program){this.acceptArray(program.body)},MustacheStatement:visitSubExpression,Decorator:visitSubExpression,BlockStatement:visitBlock,DecoratorBlock:visitBlock,PartialStatement:visitPartial,PartialBlockStatement:function PartialBlockStatement(partial){visitPartial.call(this,partial),this.acceptKey(partial,"program")},ContentStatement:function ContentStatement(){},CommentStatement:function CommentStatement(){},SubExpression:visitSubExpression,PathExpression:function PathExpression(){},StringLiteral:function StringLiteral(){},NumberLiteral:function NumberLiteral(){},BooleanLiteral:function BooleanLiteral(){},UndefinedLiteral:function UndefinedLiteral(){},NullLiteral:function NullLiteral(){},Hash:function Hash(hash){this.acceptArray(hash.pairs)},HashPair:function HashPair(pair){this.acceptRequired(pair,"value")}},exports.default=Visitor,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0,exports.SourceLocation=SourceLocation,exports.id=id,exports.stripFlags=stripFlags,exports.stripComment=stripComment,exports.preparePath=preparePath,exports.prepareMustache=prepareMustache,exports.prepareRawBlock=prepareRawBlock,exports.prepareBlock=prepareBlock,exports.prepareProgram=prepareProgram,exports.preparePartialBlock=preparePartialBlock;var _exception,_exception2=_interopRequireDefault(__webpack_require__(6));function validateClose(open,close){if(close=close.path?close.path.original:close,open.path.original!==close){var errorNode={loc:open.path.loc};throw new _exception2.default(open.path.original+" doesn't match "+close,errorNode)}}function SourceLocation(source,locInfo){this.source=source,this.start={line:locInfo.first_line,column:locInfo.first_column},this.end={line:locInfo.last_line,column:locInfo.last_column}}function id(token){return/^\[.*\]$/.test(token)?token.substr(1,token.length-2):token}function stripFlags(open,close){return{open:"~"===open.charAt(2),close:"~"===close.charAt(close.length-3)}}function stripComment(comment){return comment.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function preparePath(data,parts,loc){loc=this.locInfo(loc);for(var original=data?"@":"",dig=[],depth=0,depthString="",i=0,l=parts.length;i<l;i++){var part=parts[i].part,isLiteral=parts[i].original!==part;if(original+=(parts[i].separator||"")+part,isLiteral||".."!==part&&"."!==part&&"this"!==part)dig.push(part);else{if(dig.length>0)throw new _exception2.default("Invalid path: "+original,{loc:loc});".."===part&&(depth++,depthString+="../")}}return{type:"PathExpression",data:data,depth:depth,parts:dig,original:original,loc:loc}}function prepareMustache(path,params,hash,open,strip,locInfo){var escapeFlag=open.charAt(3)||open.charAt(2),escaped="{"!==escapeFlag&&"&"!==escapeFlag,decorator;return{type:/\*/.test(open)?"Decorator":"MustacheStatement",path:path,params:params,hash:hash,escaped:escaped,strip:strip,loc:this.locInfo(locInfo)}}function prepareRawBlock(openRawBlock,contents,close,locInfo){validateClose(openRawBlock,close);var program={type:"Program",body:contents,strip:{},loc:locInfo=this.locInfo(locInfo)};return{type:"BlockStatement",path:openRawBlock.path,params:openRawBlock.params,hash:openRawBlock.hash,program:program,openStrip:{},inverseStrip:{},closeStrip:{},loc:locInfo}}function prepareBlock(openBlock,program,inverseAndProgram,close,inverted,locInfo){close&&close.path&&validateClose(openBlock,close);var decorator=/\*/.test(openBlock.open);program.blockParams=openBlock.blockParams;var inverse=void 0,inverseStrip=void 0;if(inverseAndProgram){if(decorator)throw new _exception2.default("Unexpected inverse block on decorator",inverseAndProgram);inverseAndProgram.chain&&(inverseAndProgram.program.body[0].closeStrip=close.strip),inverseStrip=inverseAndProgram.strip,inverse=inverseAndProgram.program}return inverted&&(inverted=inverse,inverse=program,program=inverted),{type:decorator?"DecoratorBlock":"BlockStatement",path:openBlock.path,params:openBlock.params,hash:openBlock.hash,program:program,inverse:inverse,openStrip:openBlock.strip,inverseStrip:inverseStrip,closeStrip:close&&close.strip,loc:this.locInfo(locInfo)}}function prepareProgram(statements,loc){if(!loc&&statements.length){var firstLoc=statements[0].loc,lastLoc=statements[statements.length-1].loc;firstLoc&&lastLoc&&(loc={source:firstLoc.source,start:{line:firstLoc.start.line,column:firstLoc.start.column},end:{line:lastLoc.end.line,column:lastLoc.end.column}})}return{type:"Program",body:statements,strip:{},loc:loc}}function preparePartialBlock(open,program,close,locInfo){return validateClose(open,close),{type:"PartialBlockStatement",name:open.path,params:open.params,hash:open.hash,program:program,openStrip:open.strip,closeStrip:close&&close.strip,loc:this.locInfo(locInfo)}}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0,exports.Compiler=Compiler,exports.precompile=precompile,exports.compile=compile;var _exception,_exception2=_interopRequireDefault(__webpack_require__(6)),_utils=__webpack_require__(5),_ast,_ast2=_interopRequireDefault(__webpack_require__(35)),slice=[].slice;function Compiler(){}function precompile(input,options,env){if(null==input||"string"!=typeof input&&"Program"!==input.type)throw new _exception2.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+input);"data"in(options=options||{})||(options.data=!0),options.compat&&(options.useDepths=!0);var ast=env.parse(input,options),environment=(new env.Compiler).compile(ast,options);return(new env.JavaScriptCompiler).compile(environment,options)}function compile(input,options,env){if(void 0===options&&(options={}),null==input||"string"!=typeof input&&"Program"!==input.type)throw new _exception2.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+input);"data"in(options=_utils.extend({},options))||(options.data=!0),options.compat&&(options.useDepths=!0);var compiled=void 0;function compileInput(){var ast=env.parse(input,options),environment=(new env.Compiler).compile(ast,options),templateSpec=(new env.JavaScriptCompiler).compile(environment,options,void 0,!0);return env.template(templateSpec)}function ret(context,execOptions){return compiled||(compiled=compileInput()),compiled.call(this,context,execOptions)}return ret._setup=function(setupOptions){return compiled||(compiled=compileInput()),compiled._setup(setupOptions)},ret._child=function(i,data,blockParams,depths){return compiled||(compiled=compileInput()),compiled._child(i,data,blockParams,depths)},ret}function argEquals(a,b){if(a===b)return!0;if(_utils.isArray(a)&&_utils.isArray(b)&&a.length===b.length){for(var i=0;i<a.length;i++)if(!argEquals(a[i],b[i]))return!1;return!0}}function transformLiteralToPath(sexpr){if(!sexpr.path.parts){var literal=sexpr.path;sexpr.path={type:"PathExpression",data:!1,depth:0,parts:[literal.original+""],original:literal.original+"",loc:literal.loc}}}Compiler.prototype={compiler:Compiler,equals:function equals(other){var len=this.opcodes.length;if(other.opcodes.length!==len)return!1;for(var i=0;i<len;i++){var opcode=this.opcodes[i],otherOpcode=other.opcodes[i];if(opcode.opcode!==otherOpcode.opcode||!argEquals(opcode.args,otherOpcode.args))return!1}len=this.children.length;for(var i=0;i<len;i++)if(!this.children[i].equals(other.children[i]))return!1;return!0},guid:0,compile:function compile(program,options){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=options,this.stringParams=options.stringParams,this.trackIds=options.trackIds,options.blockParams=options.blockParams||[];var knownHelpers=options.knownHelpers;if(options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},knownHelpers)for(var _name in knownHelpers)_name in knownHelpers&&(this.options.knownHelpers[_name]=knownHelpers[_name]);return this.accept(program)},compileProgram:function compileProgram(program){var childCompiler,result=(new this.compiler).compile(program,this.options),guid=this.guid++;return this.usePartial=this.usePartial||result.usePartial,this.children[guid]=result,this.useDepths=this.useDepths||result.useDepths,guid},accept:function accept(node){if(!this[node.type])throw new _exception2.default("Unknown type: "+node.type,node);this.sourceNode.unshift(node);var ret=this[node.type](node);return this.sourceNode.shift(),ret},Program:function Program(program){this.options.blockParams.unshift(program.blockParams);for(var body=program.body,bodyLength=body.length,i=0;i<bodyLength;i++)this.accept(body[i]);return this.options.blockParams.shift(),this.isSimple=1===bodyLength,this.blockParams=program.blockParams?program.blockParams.length:0,this},BlockStatement:function BlockStatement(block){transformLiteralToPath(block);var program=block.program,inverse=block.inverse;program=program&&this.compileProgram(program),inverse=inverse&&this.compileProgram(inverse);var type=this.classifySexpr(block);"helper"===type?this.helperSexpr(block,program,inverse):"simple"===type?(this.simpleSexpr(block),this.opcode("pushProgram",program),this.opcode("pushProgram",inverse),this.opcode("emptyHash"),this.opcode("blockValue",block.path.original)):(this.ambiguousSexpr(block,program,inverse),this.opcode("pushProgram",program),this.opcode("pushProgram",inverse),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function DecoratorBlock(decorator){var program=decorator.program&&this.compileProgram(decorator.program),params=this.setupFullMustacheParams(decorator,program,void 0),path=decorator.path;this.useDecorators=!0,this.opcode("registerDecorator",params.length,path.original)},PartialStatement:function PartialStatement(partial){this.usePartial=!0;var program=partial.program;program&&(program=this.compileProgram(partial.program));var params=partial.params;if(params.length>1)throw new _exception2.default("Unsupported number of partial arguments: "+params.length,partial);params.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):params.push({type:"PathExpression",parts:[],depth:0}));var partialName=partial.name.original,isDynamic="SubExpression"===partial.name.type;isDynamic&&this.accept(partial.name),this.setupFullMustacheParams(partial,program,void 0,!0);var indent=partial.indent||"";this.options.preventIndent&&indent&&(this.opcode("appendContent",indent),indent=""),this.opcode("invokePartial",isDynamic,partialName,indent),this.opcode("append")},PartialBlockStatement:function PartialBlockStatement(partialBlock){this.PartialStatement(partialBlock)},MustacheStatement:function MustacheStatement(mustache){this.SubExpression(mustache),mustache.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function Decorator(decorator){this.DecoratorBlock(decorator)},ContentStatement:function ContentStatement(content){content.value&&this.opcode("appendContent",content.value)},CommentStatement:function CommentStatement(){},SubExpression:function SubExpression(sexpr){transformLiteralToPath(sexpr);var type=this.classifySexpr(sexpr);"simple"===type?this.simpleSexpr(sexpr):"helper"===type?this.helperSexpr(sexpr):this.ambiguousSexpr(sexpr)},ambiguousSexpr:function ambiguousSexpr(sexpr,program,inverse){var path=sexpr.path,name=path.parts[0],isBlock=null!=program||null!=inverse;this.opcode("getContext",path.depth),this.opcode("pushProgram",program),this.opcode("pushProgram",inverse),path.strict=!0,this.accept(path),this.opcode("invokeAmbiguous",name,isBlock)},simpleSexpr:function simpleSexpr(sexpr){var path=sexpr.path;path.strict=!0,this.accept(path),this.opcode("resolvePossibleLambda")},helperSexpr:function helperSexpr(sexpr,program,inverse){var params=this.setupFullMustacheParams(sexpr,program,inverse),path=sexpr.path,name=path.parts[0];if(this.options.knownHelpers[name])this.opcode("invokeKnownHelper",params.length,name);else{if(this.options.knownHelpersOnly)throw new _exception2.default("You specified knownHelpersOnly, but used the unknown helper "+name,sexpr);path.strict=!0,path.falsy=!0,this.accept(path),this.opcode("invokeHelper",params.length,path.original,_ast2.default.helpers.simpleId(path))}},PathExpression:function PathExpression(path){this.addDepth(path.depth),this.opcode("getContext",path.depth);var name=path.parts[0],scoped=_ast2.default.helpers.scopedId(path),blockParamId=!path.depth&&!scoped&&this.blockParamIndex(name);blockParamId?this.opcode("lookupBlockParam",blockParamId,path.parts):name?path.data?(this.options.data=!0,this.opcode("lookupData",path.depth,path.parts,path.strict)):this.opcode("lookupOnContext",path.parts,path.falsy,path.strict,scoped):this.opcode("pushContext")},StringLiteral:function StringLiteral(string){this.opcode("pushString",string.value)},NumberLiteral:function NumberLiteral(number){this.opcode("pushLiteral",number.value)},BooleanLiteral:function BooleanLiteral(bool){this.opcode("pushLiteral",bool.value)},UndefinedLiteral:function UndefinedLiteral(){this.opcode("pushLiteral","undefined")},NullLiteral:function NullLiteral(){this.opcode("pushLiteral","null")},Hash:function Hash(hash){var pairs=hash.pairs,i=0,l=pairs.length;for(this.opcode("pushHash");i<l;i++)this.pushParam(pairs[i].value);for(;i--;)this.opcode("assignToHash",pairs[i].key);this.opcode("popHash")},opcode:function opcode(name){this.opcodes.push({opcode:name,args:slice.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function addDepth(depth){depth&&(this.useDepths=!0)},classifySexpr:function classifySexpr(sexpr){var isSimple=_ast2.default.helpers.simpleId(sexpr.path),isBlockParam=isSimple&&!!this.blockParamIndex(sexpr.path.parts[0]),isHelper=!isBlockParam&&_ast2.default.helpers.helperExpression(sexpr),isEligible=!isBlockParam&&(isHelper||isSimple);if(isEligible&&!isHelper){var _name2=sexpr.path.parts[0],options=this.options;options.knownHelpers[_name2]?isHelper=!0:options.knownHelpersOnly&&(isEligible=!1)}return isHelper?"helper":isEligible?"ambiguous":"simple"},pushParams:function pushParams(params){for(var i=0,l=params.length;i<l;i++)this.pushParam(params[i])},pushParam:function pushParam(val){var value=null!=val.value?val.value:val.original||"";if(this.stringParams)value.replace&&(value=value.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),val.depth&&this.addDepth(val.depth),this.opcode("getContext",val.depth||0),this.opcode("pushStringParam",value,val.type),"SubExpression"===val.type&&this.accept(val);else{if(this.trackIds){var blockParamIndex=void 0;if(!val.parts||_ast2.default.helpers.scopedId(val)||val.depth||(blockParamIndex=this.blockParamIndex(val.parts[0])),blockParamIndex){var blockParamChild=val.parts.slice(1).join(".");this.opcode("pushId","BlockParam",blockParamIndex,blockParamChild)}else(value=val.original||value).replace&&(value=value.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",val.type,value)}this.accept(val)}},setupFullMustacheParams:function setupFullMustacheParams(sexpr,program,inverse,omitEmpty){var params=sexpr.params;return this.pushParams(params),this.opcode("pushProgram",program),this.opcode("pushProgram",inverse),sexpr.hash?this.accept(sexpr.hash):this.opcode("emptyHash",omitEmpty),params},blockParamIndex:function blockParamIndex(name){for(var depth=0,len=this.options.blockParams.length;depth<len;depth++){var blockParams=this.options.blockParams[depth],param=blockParams&&_utils.indexOf(blockParams,name);if(blockParams&&param>=0)return[depth,param]}}}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0;var _base=__webpack_require__(4),_exception,_exception2=_interopRequireDefault(__webpack_require__(6)),_utils=__webpack_require__(5),_codeGen,_codeGen2=_interopRequireDefault(__webpack_require__(43));function Literal(value){this.value=value}function JavaScriptCompiler(){}function strictLookup(requireTerminal,compiler,parts,type){var stack=compiler.popStack(),i=0,len=parts.length;for(requireTerminal&&len--;i<len;i++)stack=compiler.nameLookup(stack,parts[i],type);return requireTerminal?[compiler.aliasable("container.strict"),"(",stack,", ",compiler.quotedString(parts[i]),")"]:stack}JavaScriptCompiler.prototype={nameLookup:function nameLookup(parent,name){return JavaScriptCompiler.isValidJavaScriptVariableName(name)?[parent,".",name]:[parent,"[",JSON.stringify(name),"]"]},depthedLookup:function depthedLookup(name){return[this.aliasable("container.lookup"),'(depths, "',name,'")']},compilerInfo:function compilerInfo(){var revision=_base.COMPILER_REVISION,versions;return[revision,_base.REVISION_CHANGES[revision]]},appendToBuffer:function appendToBuffer(source,location,explicit){return _utils.isArray(source)||(source=[source]),source=this.source.wrap(source,location),this.environment.isSimple?["return ",source,";"]:explicit?["buffer += ",source,";"]:(source.appendToBuffer=!0,source)},initializeBuffer:function initializeBuffer(){return this.quotedString("")},compile:function compile(environment,options,context,asObject){this.environment=environment,this.options=options,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!asObject,this.name=this.environment.name,this.isChild=!!context,this.context=context||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(environment,options),this.useDepths=this.useDepths||environment.useDepths||environment.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||environment.useBlockParams;var opcodes=environment.opcodes,opcode=void 0,firstLoc=void 0,i=void 0,l=void 0;for(i=0,l=opcodes.length;i<l;i++)opcode=opcodes[i],this.source.currentLocation=opcode.loc,firstLoc=firstLoc||opcode.loc,this[opcode.opcode].apply(this,opcode.args);if(this.source.currentLocation=firstLoc,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new _exception2.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend("var decorators = container.decorators;\n"),this.decorators.push("return fn;"),asObject?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var fn=this.createFunctionContext(asObject);if(this.isChild)return fn;var ret={compiler:this.compilerInfo(),main:fn};this.decorators&&(ret.main_d=this.decorators,ret.useDecorators=!0);var _context=this.context,programs=_context.programs,decorators=_context.decorators;for(i=0,l=programs.length;i<l;i++)programs[i]&&(ret[i]=programs[i],decorators[i]&&(ret[i+"_d"]=decorators[i],ret.useDecorators=!0));return this.environment.usePartial&&(ret.usePartial=!0),this.options.data&&(ret.useData=!0),this.useDepths&&(ret.useDepths=!0),this.useBlockParams&&(ret.useBlockParams=!0),this.options.compat&&(ret.compat=!0),asObject?ret.compilerOptions=this.options:(ret.compiler=JSON.stringify(ret.compiler),this.source.currentLocation={start:{line:1,column:0}},ret=this.objectLiteral(ret),options.srcName?(ret=ret.toStringWithSourceMap({file:options.destName})).map=ret.map&&ret.map.toString():ret=ret.toString()),ret},preamble:function preamble(){this.lastContext=0,this.source=new _codeGen2.default(this.options.srcName),this.decorators=new _codeGen2.default(this.options.srcName)},createFunctionContext:function createFunctionContext(asObject){var varDeclarations="",locals=this.stackVars.concat(this.registers.list);locals.length>0&&(varDeclarations+=", "+locals.join(", "));var aliasCount=0;for(var alias in this.aliases){var node=this.aliases[alias];this.aliases.hasOwnProperty(alias)&&node.children&&node.referenceCount>1&&(varDeclarations+=", alias"+ ++aliasCount+"="+alias,node.children[0]="alias"+aliasCount)}var params=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&params.push("blockParams"),this.useDepths&&params.push("depths");var source=this.mergeSource(varDeclarations);return asObject?(params.push(source),Function.apply(this,params)):this.source.wrap(["function(",params.join(","),") {\n  ",source,"}"])},mergeSource:function mergeSource(varDeclarations){var isSimple=this.environment.isSimple,appendOnly=!this.forceBuffer,appendFirst=void 0,sourceSeen=void 0,bufferStart=void 0,bufferEnd=void 0;return this.source.each((function(line){line.appendToBuffer?(bufferStart?line.prepend("  + "):bufferStart=line,bufferEnd=line):(bufferStart&&(sourceSeen?bufferStart.prepend("buffer += "):appendFirst=!0,bufferEnd.add(";"),bufferStart=bufferEnd=void 0),sourceSeen=!0,isSimple||(appendOnly=!1))})),appendOnly?bufferStart?(bufferStart.prepend("return "),bufferEnd.add(";")):sourceSeen||this.source.push('return "";'):(varDeclarations+=", buffer = "+(appendFirst?"":this.initializeBuffer()),bufferStart?(bufferStart.prepend("return buffer + "),bufferEnd.add(";")):this.source.push("return buffer;")),varDeclarations&&this.source.prepend("var "+varDeclarations.substring(2)+(appendFirst?"":";\n")),this.source.merge()},blockValue:function blockValue(name){var blockHelperMissing=this.aliasable("helpers.blockHelperMissing"),params=[this.contextName(0)];this.setupHelperArgs(name,0,params);var blockName=this.popStack();params.splice(1,0,blockName),this.push(this.source.functionCall(blockHelperMissing,"call",params))},ambiguousBlockValue:function ambiguousBlockValue(){var blockHelperMissing=this.aliasable("helpers.blockHelperMissing"),params=[this.contextName(0)];this.setupHelperArgs("",0,params,!0),this.flushInline();var current=this.topStack();params.splice(1,0,current),this.pushSource(["if (!",this.lastHelper,") { ",current," = ",this.source.functionCall(blockHelperMissing,"call",params),"}"])},appendContent:function appendContent(content){this.pendingContent?content=this.pendingContent+content:this.pendingLocation=this.source.currentLocation,this.pendingContent=content},append:function append(){if(this.isInline())this.replaceStack((function(current){return[" != null ? ",current,' : ""']})),this.pushSource(this.appendToBuffer(this.popStack()));else{var local=this.popStack();this.pushSource(["if (",local," != null) { ",this.appendToBuffer(local,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function appendEscaped(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function getContext(depth){this.lastContext=depth},pushContext:function pushContext(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function lookupOnContext(parts,falsy,strict,scoped){var i=0;scoped||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(parts[i++])),this.resolvePath("context",parts,i,falsy,strict)},lookupBlockParam:function lookupBlockParam(blockParamId,parts){this.useBlockParams=!0,this.push(["blockParams[",blockParamId[0],"][",blockParamId[1],"]"]),this.resolvePath("context",parts,1)},lookupData:function lookupData(depth,parts,strict){depth?this.pushStackLiteral("container.data(data, "+depth+")"):this.pushStackLiteral("data"),this.resolvePath("data",parts,0,!0,strict)},resolvePath:function resolvePath(type,parts,i,falsy,strict){var _this=this;if(this.options.strict||this.options.assumeObjects)this.push(strictLookup(this.options.strict&&strict,this,parts,type));else for(var len=parts.length;i<len;i++)this.replaceStack((function(current){var lookup=_this.nameLookup(current,parts[i],type);return falsy?[" && ",lookup]:[" != null ? ",lookup," : ",current]}))},resolvePossibleLambda:function resolvePossibleLambda(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function pushStringParam(string,type){this.pushContext(),this.pushString(type),"SubExpression"!==type&&("string"==typeof string?this.pushString(string):this.pushStackLiteral(string))},emptyHash:function emptyHash(omitEmpty){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(omitEmpty?"undefined":"{}")},pushHash:function pushHash(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function popHash(){var hash=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(hash.ids)),this.stringParams&&(this.push(this.objectLiteral(hash.contexts)),this.push(this.objectLiteral(hash.types))),this.push(this.objectLiteral(hash.values))},pushString:function pushString(string){this.pushStackLiteral(this.quotedString(string))},pushLiteral:function pushLiteral(value){this.pushStackLiteral(value)},pushProgram:function pushProgram(guid){null!=guid?this.pushStackLiteral(this.programExpression(guid)):this.pushStackLiteral(null)},registerDecorator:function registerDecorator(paramSize,name){var foundDecorator=this.nameLookup("decorators",name,"decorator"),options=this.setupHelperArgs(name,paramSize);this.decorators.push(["fn = ",this.decorators.functionCall(foundDecorator,"",["fn","props","container",options])," || fn;"])},invokeHelper:function invokeHelper(paramSize,name,isSimple){var nonHelper=this.popStack(),helper=this.setupHelper(paramSize,name),simple=isSimple?[helper.name," || "]:"",lookup=["("].concat(simple,nonHelper);this.options.strict||lookup.push(" || ",this.aliasable("helpers.helperMissing")),lookup.push(")"),this.push(this.source.functionCall(lookup,"call",helper.callParams))},invokeKnownHelper:function invokeKnownHelper(paramSize,name){var helper=this.setupHelper(paramSize,name);this.push(this.source.functionCall(helper.name,"call",helper.callParams))},invokeAmbiguous:function invokeAmbiguous(name,helperCall){this.useRegister("helper");var nonHelper=this.popStack();this.emptyHash();var helper=this.setupHelper(0,name,helperCall),helperName,lookup=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",name,"helper")," || ",nonHelper,")"];this.options.strict||(lookup[0]="(helper = ",lookup.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",lookup,helper.paramsInit?["),(",helper.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",helper.callParams)," : helper))"])},invokePartial:function invokePartial(isDynamic,name,indent){var params=[],options=this.setupParams(name,1,params);isDynamic&&(name=this.popStack(),delete options.name),indent&&(options.indent=JSON.stringify(indent)),options.helpers="helpers",options.partials="partials",options.decorators="container.decorators",isDynamic?params.unshift(name):params.unshift(this.nameLookup("partials",name,"partial")),this.options.compat&&(options.depths="depths"),options=this.objectLiteral(options),params.push(options),this.push(this.source.functionCall("container.invokePartial","",params))},assignToHash:function assignToHash(key){var value=this.popStack(),context=void 0,type=void 0,id=void 0;this.trackIds&&(id=this.popStack()),this.stringParams&&(type=this.popStack(),context=this.popStack());var hash=this.hash;context&&(hash.contexts[key]=context),type&&(hash.types[key]=type),id&&(hash.ids[key]=id),hash.values[key]=value},pushId:function pushId(type,name,child){"BlockParam"===type?this.pushStackLiteral("blockParams["+name[0]+"].path["+name[1]+"]"+(child?" + "+JSON.stringify("."+child):"")):"PathExpression"===type?this.pushString(name):"SubExpression"===type?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:JavaScriptCompiler,compileChildren:function compileChildren(environment,options){for(var children=environment.children,child=void 0,compiler=void 0,i=0,l=children.length;i<l;i++){child=children[i],compiler=new this.compiler;var existing=this.matchExistingProgram(child);if(null==existing){this.context.programs.push("");var index=this.context.programs.length;child.index=index,child.name="program"+index,this.context.programs[index]=compiler.compile(child,options,this.context,!this.precompile),this.context.decorators[index]=compiler.decorators,this.context.environments[index]=child,this.useDepths=this.useDepths||compiler.useDepths,this.useBlockParams=this.useBlockParams||compiler.useBlockParams,child.useDepths=this.useDepths,child.useBlockParams=this.useBlockParams}else child.index=existing.index,child.name="program"+existing.index,this.useDepths=this.useDepths||existing.useDepths,this.useBlockParams=this.useBlockParams||existing.useBlockParams}},matchExistingProgram:function matchExistingProgram(child){for(var i=0,len=this.context.environments.length;i<len;i++){var environment=this.context.environments[i];if(environment&&environment.equals(child))return environment}},programExpression:function programExpression(guid){var child=this.environment.children[guid],programParams=[child.index,"data",child.blockParams];return(this.useBlockParams||this.useDepths)&&programParams.push("blockParams"),this.useDepths&&programParams.push("depths"),"container.program("+programParams.join(", ")+")"},useRegister:function useRegister(name){this.registers[name]||(this.registers[name]=!0,this.registers.list.push(name))},push:function push(expr){return expr instanceof Literal||(expr=this.source.wrap(expr)),this.inlineStack.push(expr),expr},pushStackLiteral:function pushStackLiteral(item){this.push(new Literal(item))},pushSource:function pushSource(source){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),source&&this.source.push(source)},replaceStack:function replaceStack(callback){var prefix=["("],stack=void 0,createdStack=void 0,usedLiteral=void 0;if(!this.isInline())throw new _exception2.default("replaceStack on non-inline");var top=this.popStack(!0);if(top instanceof Literal)prefix=["(",stack=[top.value]],usedLiteral=!0;else{createdStack=!0;var _name=this.incrStack();prefix=["((",this.push(_name)," = ",top,")"],stack=this.topStack()}var item=callback.call(this,stack);usedLiteral||this.popStack(),createdStack&&this.stackSlot--,this.push(prefix.concat(item,")"))},incrStack:function incrStack(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function topStackName(){return"stack"+this.stackSlot},flushInline:function flushInline(){var inlineStack=this.inlineStack;this.inlineStack=[];for(var i=0,len=inlineStack.length;i<len;i++){var entry=inlineStack[i];if(entry instanceof Literal)this.compileStack.push(entry);else{var stack=this.incrStack();this.pushSource([stack," = ",entry,";"]),this.compileStack.push(stack)}}},isInline:function isInline(){return this.inlineStack.length},popStack:function popStack(wrapped){var inline=this.isInline(),item=(inline?this.inlineStack:this.compileStack).pop();if(!wrapped&&item instanceof Literal)return item.value;if(!inline){if(!this.stackSlot)throw new _exception2.default("Invalid stack pop");this.stackSlot--}return item},topStack:function topStack(){var stack=this.isInline()?this.inlineStack:this.compileStack,item=stack[stack.length-1];return item instanceof Literal?item.value:item},contextName:function contextName(context){return this.useDepths&&context?"depths["+context+"]":"depth"+context},quotedString:function quotedString(str){return this.source.quotedString(str)},objectLiteral:function objectLiteral(obj){return this.source.objectLiteral(obj)},aliasable:function aliasable(name){var ret=this.aliases[name];return ret?(ret.referenceCount++,ret):((ret=this.aliases[name]=this.source.wrap(name)).aliasable=!0,ret.referenceCount=1,ret)},setupHelper:function setupHelper(paramSize,name,blockHelper){var params=[],paramsInit,foundHelper,callContext;return{params:params,paramsInit:this.setupHelperArgs(name,paramSize,params,blockHelper),name:this.nameLookup("helpers",name,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(params)}},setupParams:function setupParams(helper,paramSize,params){var options={},contexts=[],types=[],ids=[],objectArgs=!params,param=void 0;objectArgs&&(params=[]),options.name=this.quotedString(helper),options.hash=this.popStack(),this.trackIds&&(options.hashIds=this.popStack()),this.stringParams&&(options.hashTypes=this.popStack(),options.hashContexts=this.popStack());var inverse=this.popStack(),program=this.popStack();(program||inverse)&&(options.fn=program||"container.noop",options.inverse=inverse||"container.noop");for(var i=paramSize;i--;)param=this.popStack(),params[i]=param,this.trackIds&&(ids[i]=this.popStack()),this.stringParams&&(types[i]=this.popStack(),contexts[i]=this.popStack());return objectArgs&&(options.args=this.source.generateArray(params)),this.trackIds&&(options.ids=this.source.generateArray(ids)),this.stringParams&&(options.types=this.source.generateArray(types),options.contexts=this.source.generateArray(contexts)),this.options.data&&(options.data="data"),this.useBlockParams&&(options.blockParams="blockParams"),options},setupHelperArgs:function setupHelperArgs(helper,paramSize,params,useRegister){var options=this.setupParams(helper,paramSize,params);return options=this.objectLiteral(options),useRegister?(this.useRegister("options"),params.push("options"),["options=",options]):params?(params.push(options),""):options}},function(){for(var reservedWords="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),compilerWords=JavaScriptCompiler.RESERVED_WORDS={},i=0,l=reservedWords.length;i<l;i++)compilerWords[reservedWords[i]]=!0}(),JavaScriptCompiler.isValidJavaScriptVariableName=function(name){return!JavaScriptCompiler.RESERVED_WORDS[name]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(name)},exports.default=JavaScriptCompiler,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _utils=__webpack_require__(5),SourceNode=void 0;try{var SourceMap}catch(err){}function castChunk(chunk,codeGen,loc){if(_utils.isArray(chunk)){for(var ret=[],i=0,len=chunk.length;i<len;i++)ret.push(codeGen.wrap(chunk[i],loc));return ret}return"boolean"==typeof chunk||"number"==typeof chunk?chunk+"":chunk}function CodeGen(srcFile){this.srcFile=srcFile,this.source=[]}SourceNode||((SourceNode=function(line,column,srcFile,chunks){this.src="",chunks&&this.add(chunks)}).prototype={add:function add(chunks){_utils.isArray(chunks)&&(chunks=chunks.join("")),this.src+=chunks},prepend:function prepend(chunks){_utils.isArray(chunks)&&(chunks=chunks.join("")),this.src=chunks+this.src},toStringWithSourceMap:function toStringWithSourceMap(){return{code:this.toString()}},toString:function toString(){return this.src}}),CodeGen.prototype={isEmpty:function isEmpty(){return!this.source.length},prepend:function prepend(source,loc){this.source.unshift(this.wrap(source,loc))},push:function push(source,loc){this.source.push(this.wrap(source,loc))},merge:function merge(){var source=this.empty();return this.each((function(line){source.add(["  ",line,"\n"])})),source},each:function each(iter){for(var i=0,len=this.source.length;i<len;i++)iter(this.source[i])},empty:function empty(){var loc=this.currentLocation||{start:{}};return new SourceNode(loc.start.line,loc.start.column,this.srcFile)},wrap:function wrap(chunk){var loc=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return chunk instanceof SourceNode?chunk:(chunk=castChunk(chunk,this,loc),new SourceNode(loc.start.line,loc.start.column,this.srcFile,chunk))},functionCall:function functionCall(fn,type,params){return params=this.generateList(params),this.wrap([fn,type?"."+type+"(":"(",params,")"])},quotedString:function quotedString(str){return'"'+(str+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function objectLiteral(obj){var pairs=[];for(var key in obj)if(obj.hasOwnProperty(key)){var value=castChunk(obj[key],this);"undefined"!==value&&pairs.push([this.quotedString(key),":",value])}var ret=this.generateList(pairs);return ret.prepend("{"),ret.add("}"),ret},generateList:function generateList(entries){for(var ret=this.empty(),i=0,len=entries.length;i<len;i++)i&&ret.add(","),ret.add(castChunk(entries[i],this));return ret},generateArray:function generateArray(entries){var ret=this.generateList(entries);return ret.prepend("["),ret.add("]"),ret}},exports.default=CodeGen,module.exports=exports.default}])})),
/**!
 * trunk8 v1.3.3
 * https://github.com/rviscomi/trunk8
 * 
 * Copyright 2012 Rick Viscomi
 * Released under the MIT License.
 * 
 * Date: September 26, 2012
 */
function($){var methods,utils,SIDES_center="center",SIDES_left="left",SIDES_right="right",WIDTH_auto="auto";function trunk8(element){this.$element=$(element),this.original_text=this.$element.html().trim(),this.settings=$.extend({},$.fn.trunk8.defaults)}function stripHTML(html){var tmp=document.createElement("DIV");return tmp.innerHTML=html,void 0!==tmp.textContent?tmp.textContent:tmp.innerText}function getHtmlArr(str){if(stripHTML(str)===str)return str.split(/\s/g);for(var allResults=[],reg=/<([a-z]+)([^<]*)(?:>(.*?(?!<\1>)*)<\/\1>|\s+\/>)(['.?!,]*)|((?:[^<>\s])+['.?!,]*\w?|<br\s?\/?>)/gi,outArr=reg.exec(str),lastI,ind;outArr&&lastI!==reg.lastIndex;)lastI=reg.lastIndex,outArr[5]?allResults.push(outArr[5]):outArr[1]&&allResults.push({tag:outArr[1],attribs:outArr[2],content:outArr[3],after:outArr[4]}),outArr=reg.exec(str);for(ind=0;ind<allResults.length;ind++)"string"!=typeof allResults[ind]&&allResults[ind].content&&(allResults[ind].content=getHtmlArr(allResults[ind].content));return allResults}function rebuildHtmlFromBite(bite,htmlObject,fill){bite=bite.replace(fill,"");var biteHelper=function(contentArr,tagInfo){var retStr="",content,biteContent,biteLength,nextWord,i;for(i=0;i<contentArr.length;i++)content=contentArr[i],biteLength=$.trim(bite).split(" ").length,$.trim(bite).length&&("string"==typeof content?(/<br\s*\/?>/.test(content)||(1===biteLength&&$.trim(bite).length<=content.length?(content=bite,"p"!==tagInfo&&"div"!==tagInfo||(content+=fill),bite=""):bite=bite.replace(content,"")),retStr+=$.trim(content)+(i===contentArr.length-1||biteLength<=1?"":" ")):(biteContent=biteHelper(content.content,content.tag),content.after&&(bite=bite.replace(content.after,"")),biteContent&&(content.after||(content.after=" "),retStr+="<"+content.tag+content.attribs+">"+biteContent+"</"+content.tag+">"+content.after)));return retStr},htmlResults=biteHelper(htmlObject);return htmlResults.slice(htmlResults.length-fill.length)===fill&&(htmlResults+=fill),htmlResults}function truncate(){var data=this.data("trunk8"),settings=data.settings,width=settings.width,side=settings.side,fill=settings.fill,parseHTML=settings.parseHTML,line_height=utils.getLineHeight(this)*settings.lines,str=data.original_text,length=str.length,max_bite="",lower,upper,bite_size,bite,text,htmlObject;if(this.html(str),text=this.text(),parseHTML&&stripHTML(str)!==str&&(htmlObject=getHtmlArr(str),length=(str=stripHTML(str)).length),width===WIDTH_auto){if(this.height()<=line_height)return;for(lower=0,upper=length-1;lower<=upper;)bite_size=lower+(upper-lower>>1),bite=utils.eatStr(str,side,length-bite_size,fill),parseHTML&&htmlObject&&(bite=rebuildHtmlFromBite(bite,htmlObject,fill)),this.html(bite),this.height()>line_height?upper=bite_size-1:(lower=bite_size+1,max_bite=max_bite.length>bite.length?max_bite:bite);this.html(""),this.html(max_bite),settings.tooltip&&this.attr("title",text)}else{if(isNaN(width))return void $.error('Invalid width "'+width+'".');bite_size=length-width,bite=utils.eatStr(str,side,bite_size,fill),this.html(bite),settings.tooltip&&this.attr("title",str)}settings.onTruncate()}trunk8.prototype.updateSettings=function(options){this.settings=$.extend(this.settings,options)},methods={init:function(options){return this.each((function(){var $this=$(this),data=$this.data("trunk8");data||$this.data("trunk8",data=new trunk8(this)),data.updateSettings(options),truncate.call($this)}))},update:function(new_string){return this.each((function(){var $this=$(this);new_string&&($this.data("trunk8").original_text=new_string),truncate.call($this)}))},revert:function(){return this.each((function(){var text=$(this).data("trunk8").original_text;$(this).html(text)}))},getSettings:function(){return $(this.get(0)).data("trunk8").settings}},(utils={eatStr:function(str,side,bite_size,fill){var length=str.length,key=utils.eatStr.generateKey.apply(null,arguments),half_length,half_bite_size;if(utils.eatStr.cache[key])return utils.eatStr.cache[key];if("string"==typeof str&&0!==length||$.error('Invalid source string "'+str+'".'),bite_size<0||bite_size>length)$.error('Invalid bite size "'+bite_size+'".');else if(0===bite_size)return str;switch("string"!=typeof(fill+"")&&$.error("Fill unable to be converted to a string."),side){case SIDES_right:return utils.eatStr.cache[key]=$.trim(str.substr(0,length-bite_size))+fill;case SIDES_left:return utils.eatStr.cache[key]=fill+$.trim(str.substr(bite_size));case SIDES_center:return half_length=length>>1,half_bite_size=bite_size>>1,utils.eatStr.cache[key]=$.trim(utils.eatStr(str.substr(0,length-half_length),SIDES_right,bite_size-half_bite_size,""))+fill+$.trim(utils.eatStr(str.substr(length-half_length),SIDES_left,half_bite_size,""));default:$.error('Invalid side "'+side+'".')}},getLineHeight:function(elem){var floats=$(elem).css("float");"none"!==floats&&$(elem).css("float","none");var pos=$(elem).css("position");"absolute"===pos&&$(elem).css("position","static");var html=$(elem).html(),wrapper_id="line-height-test",line_height;return $(elem).html("i").wrap('<div id="'+wrapper_id+'" />'),line_height=$("#"+wrapper_id).innerHeight(),$(elem).html(html).css({float:floats,position:pos}).unwrap(),line_height}}).eatStr.cache={},utils.eatStr.generateKey=function(){return Array.prototype.join.call(arguments,"")},$.fn.trunk8=function(method){return methods[method]?methods[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?void $.error("Method "+method+" does not exist on jQuery.trunk8"):methods.init.apply(this,arguments)},$.fn.trunk8.defaults={fill:"&hellip;",lines:1,side:SIDES_right,tooltip:!0,width:WIDTH_auto,parseHTML:!1,onTruncate:function(){}}}(jQuery),
/**
 * @license AngularJS v1.6.6
 * (c) 2010-2017 Google, Inc. http://angularjs.org
 * License: MIT
 */
function(window){"use strict";var minErrConfig={objectMaxDepth:5};function errorHandlingConfig(config){if(!isObject(config))return minErrConfig;isDefined(config.objectMaxDepth)&&(minErrConfig.objectMaxDepth=isValidObjectMaxDepth(config.objectMaxDepth)?config.objectMaxDepth:NaN)}function isValidObjectMaxDepth(maxDepth){return isNumber(maxDepth)&&maxDepth>0}function minErr(module,ErrorConstructor){return ErrorConstructor=ErrorConstructor||Error,function(){var code=arguments[0],template=arguments[1],message="["+(module?module+":":"")+code+"] ",templateArgs=sliceArgs(arguments,2).map((function(arg){return toDebugString(arg,minErrConfig.objectMaxDepth)})),paramPrefix,i;for(message+=template.replace(/\{\d+\}/g,(function(match){var index=+match.slice(1,-1);return index<templateArgs.length?templateArgs[index]:match})),message+="\nhttp://errors.angularjs.org/1.6.6/"+(module?module+"/":"")+code,i=0,paramPrefix="?";i<templateArgs.length;i++,paramPrefix="&")message+=paramPrefix+"p"+i+"="+encodeURIComponent(templateArgs[i]);return new ErrorConstructor(message)}}var REGEX_STRING_REGEXP=/^\/(.+)\/([a-z]*)$/,VALIDITY_STATE_PROPERTY="validity",hasOwnProperty=Object.prototype.hasOwnProperty,lowercase=function(string){return isString(string)?string.toLowerCase():string},uppercase=function(string){return isString(string)?string.toUpperCase():string},manualLowercase=function(s){return isString(s)?s.replace(/[A-Z]/g,(function(ch){return String.fromCharCode(32|ch.charCodeAt(0))})):s},manualUppercase=function(s){return isString(s)?s.replace(/[a-z]/g,(function(ch){return String.fromCharCode(-33&ch.charCodeAt(0))})):s};"i"!=="I".toLowerCase()&&(lowercase=manualLowercase,uppercase=manualUppercase);var msie,jqLite,jQuery,slice=[].slice,splice=[].splice,push=[].push,toString=Object.prototype.toString,getPrototypeOf=Object.getPrototypeOf,ngMinErr=minErr("ng"),angular=window.angular||(window.angular={}),angularModule,uid=0;function isArrayLike(obj){if(null==obj||isWindow(obj))return!1;if(isArray(obj)||isString(obj)||jqLite&&obj instanceof jqLite)return!0;var length="length"in Object(obj)&&obj.length;return isNumber(length)&&(length>=0&&(length-1 in obj||obj instanceof Array)||"function"==typeof obj.item)}function forEach(obj,iterator,context){var key,length;if(obj)if(isFunction(obj))for(key in obj)"prototype"!==key&&"length"!==key&&"name"!==key&&obj.hasOwnProperty(key)&&iterator.call(context,obj[key],key,obj);else if(isArray(obj)||isArrayLike(obj)){var isPrimitive="object"!=typeof obj;for(key=0,length=obj.length;key<length;key++)(isPrimitive||key in obj)&&iterator.call(context,obj[key],key,obj)}else if(obj.forEach&&obj.forEach!==forEach)obj.forEach(iterator,context,obj);else if(isBlankObject(obj))for(key in obj)iterator.call(context,obj[key],key,obj);else if("function"==typeof obj.hasOwnProperty)for(key in obj)obj.hasOwnProperty(key)&&iterator.call(context,obj[key],key,obj);else for(key in obj)hasOwnProperty.call(obj,key)&&iterator.call(context,obj[key],key,obj);return obj}function forEachSorted(obj,iterator,context){for(var keys=Object.keys(obj).sort(),i=0;i<keys.length;i++)iterator.call(context,obj[keys[i]],keys[i]);return keys}function reverseParams(iteratorFn){return function(value,key){iteratorFn(key,value)}}function nextUid(){return++uid}function setHashKey(obj,h){h?obj.$$hashKey=h:delete obj.$$hashKey}function baseExtend(dst,objs,deep){for(var h=dst.$$hashKey,i=0,ii=objs.length;i<ii;++i){var obj=objs[i];if(isObject(obj)||isFunction(obj))for(var keys=Object.keys(obj),j=0,jj=keys.length;j<jj;j++){var key=keys[j],src=obj[key];deep&&isObject(src)?isDate(src)?dst[key]=new Date(src.valueOf()):isRegExp(src)?dst[key]=new RegExp(src):src.nodeName?dst[key]=src.cloneNode(!0):isElement(src)?dst[key]=src.clone():(isObject(dst[key])||(dst[key]=isArray(src)?[]:{}),baseExtend(dst[key],[src],!0)):dst[key]=src}}return setHashKey(dst,h),dst}function extend(dst){return baseExtend(dst,slice.call(arguments,1),!1)}function merge(dst){return baseExtend(dst,slice.call(arguments,1),!0)}function toInt(str){return parseInt(str,10)}msie=window.document.documentMode;var isNumberNaN=Number.isNaN||function isNumberNaN(num){return num!=num};function inherit(parent,extra){return extend(Object.create(parent),extra)}function noop(){}function identity($){return $}function valueFn(value){return function valueRef(){return value}}function hasCustomToString(obj){return isFunction(obj.toString)&&obj.toString!==toString}function isUndefined(value){return void 0===value}function isDefined(value){return void 0!==value}function isObject(value){return null!==value&&"object"==typeof value}function isBlankObject(value){return null!==value&&"object"==typeof value&&!getPrototypeOf(value)}function isString(value){return"string"==typeof value}function isNumber(value){return"number"==typeof value}function isDate(value){return"[object Date]"===toString.call(value)}noop.$inject=[],identity.$inject=[];var isArray=Array.isArray;function isError(value){var tag;switch(toString.call(value)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return value instanceof Error}}function isFunction(value){return"function"==typeof value}function isRegExp(value){return"[object RegExp]"===toString.call(value)}function isWindow(obj){return obj&&obj.window===obj}function isScope(obj){return obj&&obj.$evalAsync&&obj.$watch}function isFile(obj){return"[object File]"===toString.call(obj)}function isFormData(obj){return"[object FormData]"===toString.call(obj)}function isBlob(obj){return"[object Blob]"===toString.call(obj)}function isBoolean(value){return"boolean"==typeof value}function isPromiseLike(obj){return obj&&isFunction(obj.then)}var TYPED_ARRAY_REGEXP=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/;function isTypedArray(value){return value&&isNumber(value.length)&&TYPED_ARRAY_REGEXP.test(toString.call(value))}function isArrayBuffer(obj){return"[object ArrayBuffer]"===toString.call(obj)}var trim=function(value){return isString(value)?value.trim():value},escapeForRegexp=function(s){return s.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function isElement(node){return!(!node||!(node.nodeName||node.prop&&node.attr&&node.find))}function makeMap(str){var obj={},items=str.split(","),i;for(i=0;i<items.length;i++)obj[items[i]]=!0;return obj}function nodeName_(element){return lowercase(element.nodeName||element[0]&&element[0].nodeName)}function includes(array,obj){return-1!==Array.prototype.indexOf.call(array,obj)}function arrayRemove(array,value){var index=array.indexOf(value);return index>=0&&array.splice(index,1),index}function copy(source,destination,maxDepth){var stackSource=[],stackDest=[];if(maxDepth=isValidObjectMaxDepth(maxDepth)?maxDepth:NaN,destination){if(isTypedArray(destination)||isArrayBuffer(destination))throw ngMinErr("cpta","Can't copy! TypedArray destination cannot be mutated.");if(source===destination)throw ngMinErr("cpi","Can't copy! Source and destination are identical.");return isArray(destination)?destination.length=0:forEach(destination,(function(value,key){"$$hashKey"!==key&&delete destination[key]})),stackSource.push(source),stackDest.push(destination),copyRecurse(source,destination,maxDepth)}return copyElement(source,maxDepth);function copyRecurse(source,destination,maxDepth){if(--maxDepth<0)return"...";var h=destination.$$hashKey,key;if(isArray(source))for(var i=0,ii=source.length;i<ii;i++)destination.push(copyElement(source[i],maxDepth));else if(isBlankObject(source))for(key in source)destination[key]=copyElement(source[key],maxDepth);else if(source&&"function"==typeof source.hasOwnProperty)for(key in source)source.hasOwnProperty(key)&&(destination[key]=copyElement(source[key],maxDepth));else for(key in source)hasOwnProperty.call(source,key)&&(destination[key]=copyElement(source[key],maxDepth));return setHashKey(destination,h),destination}function copyElement(source,maxDepth){if(!isObject(source))return source;var index=stackSource.indexOf(source);if(-1!==index)return stackDest[index];if(isWindow(source)||isScope(source))throw ngMinErr("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var needsRecurse=!1,destination=copyType(source);return void 0===destination&&(destination=isArray(source)?[]:Object.create(getPrototypeOf(source)),needsRecurse=!0),stackSource.push(source),stackDest.push(destination),needsRecurse?copyRecurse(source,destination,maxDepth):destination}function copyType(source){switch(toString.call(source)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new source.constructor(copyElement(source.buffer),source.byteOffset,source.length);case"[object ArrayBuffer]":if(!source.slice){var copied=new ArrayBuffer(source.byteLength);return new Uint8Array(copied).set(new Uint8Array(source)),copied}return source.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new source.constructor(source.valueOf());case"[object RegExp]":var re=new RegExp(source.source,source.toString().match(/[^/]*$/)[0]);return re.lastIndex=source.lastIndex,re;case"[object Blob]":return new source.constructor([source],{type:source.type})}if(isFunction(source.cloneNode))return source.cloneNode(!0)}}function simpleCompare(a,b){return a===b||a!=a&&b!=b}function equals(o1,o2){if(o1===o2)return!0;if(null===o1||null===o2)return!1;if(o1!=o1&&o2!=o2)return!0;var t1=typeof o1,t2,length,key,keySet;if(t1===typeof o2&&"object"===t1){if(!isArray(o1)){if(isDate(o1))return!!isDate(o2)&&simpleCompare(o1.getTime(),o2.getTime());if(isRegExp(o1))return!!isRegExp(o2)&&o1.toString()===o2.toString();if(isScope(o1)||isScope(o2)||isWindow(o1)||isWindow(o2)||isArray(o2)||isDate(o2)||isRegExp(o2))return!1;for(key in keySet=createMap(),o1)if("$"!==key.charAt(0)&&!isFunction(o1[key])){if(!equals(o1[key],o2[key]))return!1;keySet[key]=!0}for(key in o2)if(!(key in keySet)&&"$"!==key.charAt(0)&&isDefined(o2[key])&&!isFunction(o2[key]))return!1;return!0}if(!isArray(o2))return!1;if((length=o1.length)===o2.length){for(key=0;key<length;key++)if(!equals(o1[key],o2[key]))return!1;return!0}}return!1}var csp=function(){if(!isDefined(csp.rules)){var ngCspElement=window.document.querySelector("[ng-csp]")||window.document.querySelector("[data-ng-csp]");if(ngCspElement){var ngCspAttribute=ngCspElement.getAttribute("ng-csp")||ngCspElement.getAttribute("data-ng-csp");csp.rules={noUnsafeEval:!ngCspAttribute||-1!==ngCspAttribute.indexOf("no-unsafe-eval"),noInlineStyle:!ngCspAttribute||-1!==ngCspAttribute.indexOf("no-inline-style")}}else csp.rules={noUnsafeEval:noUnsafeEval(),noInlineStyle:!1}}return csp.rules;function noUnsafeEval(){try{return new Function(""),!1}catch(e){return!0}}},jq=function(){if(isDefined(jq.name_))return jq.name_;var el,i,ii=ngAttrPrefixes.length,prefix,name;for(i=0;i<ii;++i)if(prefix=ngAttrPrefixes[i],el=window.document.querySelector("["+prefix.replace(":","\\:")+"jq]")){name=el.getAttribute(prefix+"jq");break}return jq.name_=name};function concat(array1,array2,index){return array1.concat(slice.call(array2,index))}function sliceArgs(args,startIndex){return slice.call(args,startIndex||0)}function bind(self,fn){var curryArgs=arguments.length>2?sliceArgs(arguments,2):[];return!isFunction(fn)||fn instanceof RegExp?fn:curryArgs.length?function(){return arguments.length?fn.apply(self,concat(curryArgs,arguments,0)):fn.apply(self,curryArgs)}:function(){return arguments.length?fn.apply(self,arguments):fn.call(self)}}function toJsonReplacer(key,value){var val=value;return"string"==typeof key&&"$"===key.charAt(0)&&"$"===key.charAt(1)?val=void 0:isWindow(value)?val="$WINDOW":value&&window.document===value?val="$DOCUMENT":isScope(value)&&(val="$SCOPE"),val}function toJson(obj,pretty){if(!isUndefined(obj))return isNumber(pretty)||(pretty=pretty?2:null),JSON.stringify(obj,toJsonReplacer,pretty)}function fromJson(json){return isString(json)?JSON.parse(json):json}var ALL_COLONS=/:/g;function timezoneToOffset(timezone,fallback){timezone=timezone.replace(ALL_COLONS,"");var requestedTimezoneOffset=Date.parse("Jan 01, 1970 00:00:00 "+timezone)/6e4;return isNumberNaN(requestedTimezoneOffset)?fallback:requestedTimezoneOffset}function addDateMinutes(date,minutes){return(date=new Date(date.getTime())).setMinutes(date.getMinutes()+minutes),date}function convertTimezoneToLocal(date,timezone,reverse){reverse=reverse?-1:1;var dateTimezoneOffset=date.getTimezoneOffset(),timezoneOffset;return addDateMinutes(date,reverse*(timezoneToOffset(timezone,dateTimezoneOffset)-dateTimezoneOffset))}function startingTag(element){element=jqLite(element).clone().empty();var elemHtml=jqLite("<div>").append(element).html();try{return element[0].nodeType===NODE_TYPE_TEXT?lowercase(elemHtml):elemHtml.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,(function(match,nodeName){return"<"+lowercase(nodeName)}))}catch(e){return lowercase(elemHtml)}}function tryDecodeURIComponent(value){try{return decodeURIComponent(value)}catch(e){}}function parseKeyValue(keyValue){var obj={};return forEach((keyValue||"").split("&"),(function(keyValue){var splitPoint,key,val;keyValue&&(key=keyValue=keyValue.replace(/\+/g,"%20"),-1!==(splitPoint=keyValue.indexOf("="))&&(key=keyValue.substring(0,splitPoint),val=keyValue.substring(splitPoint+1)),isDefined(key=tryDecodeURIComponent(key))&&(val=!isDefined(val)||tryDecodeURIComponent(val),hasOwnProperty.call(obj,key)?isArray(obj[key])?obj[key].push(val):obj[key]=[obj[key],val]:obj[key]=val))})),obj}function toKeyValue(obj){var parts=[];return forEach(obj,(function(value,key){isArray(value)?forEach(value,(function(arrayValue){parts.push(encodeUriQuery(key,!0)+(!0===arrayValue?"":"="+encodeUriQuery(arrayValue,!0)))})):parts.push(encodeUriQuery(key,!0)+(!0===value?"":"="+encodeUriQuery(value,!0)))})),parts.length?parts.join("&"):""}function encodeUriSegment(val){return encodeUriQuery(val,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function encodeUriQuery(val,pctEncodeSpaces){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,pctEncodeSpaces?"%20":"+")}var ngAttrPrefixes=["ng-","data-ng-","ng:","x-ng-"];function getNgAttribute(element,ngAttr){var attr,i,ii=ngAttrPrefixes.length;for(i=0;i<ii;++i)if(attr=ngAttrPrefixes[i]+ngAttr,isString(attr=element.getAttribute(attr)))return attr;return null}function allowAutoBootstrap(document){var script=document.currentScript;if(!script)return!0;if(!(script instanceof window.HTMLScriptElement||script instanceof window.SVGScriptElement))return!1;var attributes=script.attributes,srcs;return[attributes.getNamedItem("src"),attributes.getNamedItem("href"),attributes.getNamedItem("xlink:href")].every((function(src){if(!src)return!0;if(!src.value)return!1;var link=document.createElement("a");if(link.href=src.value,document.location.origin===link.origin)return!0;switch(link.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}}))}var isAutoBootstrapAllowed=allowAutoBootstrap(window.document);function angularInit(element,bootstrap){var appElement,module,config={};if(forEach(ngAttrPrefixes,(function(prefix){var name=prefix+"app";!appElement&&element.hasAttribute&&element.hasAttribute(name)&&(appElement=element,module=element.getAttribute(name))})),forEach(ngAttrPrefixes,(function(prefix){var name=prefix+"app",candidate;!appElement&&(candidate=element.querySelector("["+name.replace(":","\\:")+"]"))&&(appElement=candidate,module=candidate.getAttribute(name))})),appElement){if(!isAutoBootstrapAllowed)return void window.console.error("Angular: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");config.strictDi=null!==getNgAttribute(appElement,"strict-di"),bootstrap(appElement,module?[module]:[],config)}}function bootstrap(element,modules,config){var defaultConfig;isObject(config)||(config={}),config=extend({strictDi:!1},config);var doBootstrap=function(){if((element=jqLite(element)).injector()){var tag=element[0]===window.document?"document":startingTag(element);throw ngMinErr("btstrpd","App already bootstrapped with this element '{0}'",tag.replace(/</,"&lt;").replace(/>/,"&gt;"))}(modules=modules||[]).unshift(["$provide",function($provide){$provide.value("$rootElement",element)}]),config.debugInfoEnabled&&modules.push(["$compileProvider",function($compileProvider){$compileProvider.debugInfoEnabled(!0)}]),modules.unshift("ng");var injector=createInjector(modules,config.strictDi);return injector.invoke(["$rootScope","$rootElement","$compile","$injector",function bootstrapApply(scope,element,compile,injector){scope.$apply((function(){element.data("$injector",injector),compile(element)(scope)}))}]),injector},NG_ENABLE_DEBUG_INFO=/^NG_ENABLE_DEBUG_INFO!/,NG_DEFER_BOOTSTRAP=/^NG_DEFER_BOOTSTRAP!/;if(window&&NG_ENABLE_DEBUG_INFO.test(window.name)&&(config.debugInfoEnabled=!0,window.name=window.name.replace(NG_ENABLE_DEBUG_INFO,"")),window&&!NG_DEFER_BOOTSTRAP.test(window.name))return doBootstrap();window.name=window.name.replace(NG_DEFER_BOOTSTRAP,""),angular.resumeBootstrap=function(extraModules){return forEach(extraModules,(function(module){modules.push(module)})),doBootstrap()},isFunction(angular.resumeDeferredBootstrap)&&angular.resumeDeferredBootstrap()}function reloadWithDebugInfo(){window.name="NG_ENABLE_DEBUG_INFO!"+window.name,window.location.reload()}function getTestability(rootElement){var injector=angular.element(rootElement).injector();if(!injector)throw ngMinErr("test","no injector found for element argument to getTestability");return injector.get("$$testability")}var SNAKE_CASE_REGEXP=/[A-Z]/g;function snake_case(name,separator){return separator=separator||"_",name.replace(SNAKE_CASE_REGEXP,(function(letter,pos){return(pos?separator:"")+letter.toLowerCase()}))}var bindJQueryFired=!1;function bindJQuery(){var originalCleanData;if(!bindJQueryFired){var jqName=jq();(jQuery=isUndefined(jqName)?window.jQuery:jqName?window[jqName]:void 0)&&jQuery.fn.on?(jqLite=jQuery,extend(jQuery.fn,{scope:JQLitePrototype.scope,isolateScope:JQLitePrototype.isolateScope,controller:JQLitePrototype.controller,injector:JQLitePrototype.injector,inheritedData:JQLitePrototype.inheritedData}),originalCleanData=jQuery.cleanData,jQuery.cleanData=function(elems){for(var events,i=0,elem;null!=(elem=elems[i]);i++)(events=jQuery._data(elem,"events"))&&events.$destroy&&jQuery(elem).triggerHandler("$destroy");originalCleanData(elems)}):jqLite=JQLite,angular.element=jqLite,bindJQueryFired=!0}}function assertArg(arg,name,reason){if(!arg)throw ngMinErr("areq","Argument '{0}' is {1}",name||"?",reason||"required");return arg}function assertArgFn(arg,name,acceptArrayAnnotation){return acceptArrayAnnotation&&isArray(arg)&&(arg=arg[arg.length-1]),assertArg(isFunction(arg),name,"not a function, got "+(arg&&"object"==typeof arg?arg.constructor.name||"Object":typeof arg)),arg}function assertNotHasOwnProperty(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)}function getter(obj,path,bindFnToScope){if(!path)return obj;for(var keys=path.split("."),key,lastInstance=obj,len=keys.length,i=0;i<len;i++)key=keys[i],obj&&(obj=(lastInstance=obj)[key]);return!bindFnToScope&&isFunction(obj)?bind(lastInstance,obj):obj}function getBlockNodes(nodes){for(var node=nodes[0],endNode=nodes[nodes.length-1],blockNodes,i=1;node!==endNode&&(node=node.nextSibling);i++)(blockNodes||nodes[i]!==node)&&(blockNodes||(blockNodes=jqLite(slice.call(nodes,0,i))),blockNodes.push(node));return blockNodes||nodes}function createMap(){return Object.create(null)}function stringify(value){if(null==value)return"";switch(typeof value){case"string":break;case"number":value=""+value;break;default:value=!hasCustomToString(value)||isArray(value)||isDate(value)?toJson(value):value.toString()}return value}var NODE_TYPE_ELEMENT=1,NODE_TYPE_ATTRIBUTE=2,NODE_TYPE_TEXT=3,NODE_TYPE_COMMENT=8,NODE_TYPE_DOCUMENT=9,NODE_TYPE_DOCUMENT_FRAGMENT=11;function setupModuleLoader(window){var $injectorMinErr=minErr("$injector"),ngMinErr=minErr("ng");function ensure(obj,name,factory){return obj[name]||(obj[name]=factory())}var angular=ensure(window,"angular",Object);return angular.$$minErr=angular.$$minErr||minErr,ensure(angular,"module",(function(){var modules={};return function module(name,requires,configFn){var info={},assertNotHasOwnProperty;return function(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)}(name,"module"),requires&&modules.hasOwnProperty(name)&&(modules[name]=null),ensure(modules,name,(function(){if(!requires)throw $injectorMinErr("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",name);var invokeQueue=[],configBlocks=[],runBlocks=[],config=invokeLater("$injector","invoke","push",configBlocks),moduleInstance={_invokeQueue:invokeQueue,_configBlocks:configBlocks,_runBlocks:runBlocks,info:function(value){if(isDefined(value)){if(!isObject(value))throw ngMinErr("aobj","Argument '{0}' must be an object","value");return info=value,this}return info},requires:requires,name:name,provider:invokeLaterAndSetModuleName("$provide","provider"),factory:invokeLaterAndSetModuleName("$provide","factory"),service:invokeLaterAndSetModuleName("$provide","service"),value:invokeLater("$provide","value"),constant:invokeLater("$provide","constant","unshift"),decorator:invokeLaterAndSetModuleName("$provide","decorator",configBlocks),animation:invokeLaterAndSetModuleName("$animateProvider","register"),filter:invokeLaterAndSetModuleName("$filterProvider","register"),controller:invokeLaterAndSetModuleName("$controllerProvider","register"),directive:invokeLaterAndSetModuleName("$compileProvider","directive"),component:invokeLaterAndSetModuleName("$compileProvider","component"),config:config,run:function(block){return runBlocks.push(block),this}};return configFn&&config(configFn),moduleInstance;function invokeLater(provider,method,insertMethod,queue){return queue||(queue=invokeQueue),function(){return queue[insertMethod||"push"]([provider,method,arguments]),moduleInstance}}function invokeLaterAndSetModuleName(provider,method,queue){return queue||(queue=invokeQueue),function(recipeName,factoryFunction){return factoryFunction&&isFunction(factoryFunction)&&(factoryFunction.$$moduleName=name),queue.push([provider,method,arguments]),moduleInstance}}}))}}))}function shallowCopy(src,dst){if(isArray(src)){dst=dst||[];for(var i=0,ii=src.length;i<ii;i++)dst[i]=src[i]}else if(isObject(src))for(var key in dst=dst||{},src)"$"===key.charAt(0)&&"$"===key.charAt(1)||(dst[key]=src[key]);return dst||src}function serializeObject(obj,maxDepth){var seen=[];return isValidObjectMaxDepth(maxDepth)&&(obj=angular.copy(obj,null,maxDepth)),JSON.stringify(obj,(function(key,val){if(isObject(val=toJsonReplacer(key,val))){if(seen.indexOf(val)>=0)return"...";seen.push(val)}return val}))}function toDebugString(obj,maxDepth){return"function"==typeof obj?obj.toString().replace(/ \{[\s\S]*$/,""):isUndefined(obj)?"undefined":"string"!=typeof obj?serializeObject(obj,maxDepth):obj}var version={full:"1.6.6",major:1,minor:6,dot:6,codeName:"interdimensional-cable"};function publishExternalAPI(angular){extend(angular,{errorHandlingConfig:errorHandlingConfig,bootstrap:bootstrap,copy:copy,extend:extend,merge:merge,equals:equals,element:jqLite,forEach:forEach,injector:createInjector,noop:noop,bind:bind,toJson:toJson,fromJson:fromJson,identity:identity,isUndefined:isUndefined,isDefined:isDefined,isString:isString,isFunction:isFunction,isObject:isObject,isNumber:isNumber,isElement:isElement,isArray:isArray,version:version,isDate:isDate,lowercase:lowercase,uppercase:uppercase,callbacks:{$$counter:0},getTestability:getTestability,reloadWithDebugInfo:reloadWithDebugInfo,$$minErr:minErr,$$csp:csp,$$encodeUriSegment:encodeUriSegment,$$encodeUriQuery:encodeUriQuery,$$stringify:stringify}),(angularModule=setupModuleLoader(window))("ng",["ngLocale"],["$provide",function ngModule($provide){$provide.provider({$$sanitizeUri:$$SanitizeUriProvider}),$provide.provider("$compile",$CompileProvider).directive({a:htmlAnchorDirective,input:inputDirective,textarea:inputDirective,form:formDirective,script:scriptDirective,select:selectDirective,option:optionDirective,ngBind:ngBindDirective,ngBindHtml:ngBindHtmlDirective,ngBindTemplate:ngBindTemplateDirective,ngClass:ngClassDirective,ngClassEven:ngClassEvenDirective,ngClassOdd:ngClassOddDirective,ngCloak:ngCloakDirective,ngController:ngControllerDirective,ngForm:ngFormDirective,ngHide:ngHideDirective,ngIf:ngIfDirective,ngInclude:ngIncludeDirective,ngInit:ngInitDirective,ngNonBindable:ngNonBindableDirective,ngPluralize:ngPluralizeDirective,ngRepeat:ngRepeatDirective,ngShow:ngShowDirective,ngStyle:ngStyleDirective,ngSwitch:ngSwitchDirective,ngSwitchWhen:ngSwitchWhenDirective,ngSwitchDefault:ngSwitchDefaultDirective,ngOptions:ngOptionsDirective,ngTransclude:ngTranscludeDirective,ngModel:ngModelDirective,ngList:ngListDirective,ngChange:ngChangeDirective,pattern:patternDirective,ngPattern:patternDirective,required:requiredDirective,ngRequired:requiredDirective,minlength:minlengthDirective,ngMinlength:minlengthDirective,maxlength:maxlengthDirective,ngMaxlength:maxlengthDirective,ngValue:ngValueDirective,ngModelOptions:ngModelOptionsDirective}).directive({ngInclude:ngIncludeFillContentDirective}).directive(ngAttributeAliasDirectives).directive(ngEventDirectives),$provide.provider({$anchorScroll:$AnchorScrollProvider,$animate:$AnimateProvider,$animateCss:$CoreAnimateCssProvider,$$animateJs:$$CoreAnimateJsProvider,$$animateQueue:$$CoreAnimateQueueProvider,$$AnimateRunner:$$AnimateRunnerFactoryProvider,$$animateAsyncRun:$$AnimateAsyncRunFactoryProvider,$browser:$BrowserProvider,$cacheFactory:$CacheFactoryProvider,$controller:$ControllerProvider,$document:$DocumentProvider,$$isDocumentHidden:$$IsDocumentHiddenProvider,$exceptionHandler:$ExceptionHandlerProvider,$filter:$FilterProvider,$$forceReflow:$$ForceReflowProvider,$interpolate:$InterpolateProvider,$interval:$IntervalProvider,$http:$HttpProvider,$httpParamSerializer:$HttpParamSerializerProvider,$httpParamSerializerJQLike:$HttpParamSerializerJQLikeProvider,$httpBackend:$HttpBackendProvider,$xhrFactory:$xhrFactoryProvider,$jsonpCallbacks:$jsonpCallbacksProvider,$location:$LocationProvider,$log:$LogProvider,$parse:$ParseProvider,$rootScope:$RootScopeProvider,$q:$QProvider,$$q:$$QProvider,$sce:$SceProvider,$sceDelegate:$SceDelegateProvider,$sniffer:$SnifferProvider,$templateCache:$TemplateCacheProvider,$templateRequest:$TemplateRequestProvider,$$testability:$$TestabilityProvider,$timeout:$TimeoutProvider,$window:$WindowProvider,$$rAF:$$RAFProvider,$$jqLite:$$jqLiteProvider,$$Map:$$MapProvider,$$cookieReader:$$CookieReaderProvider})}]).info({angularVersion:"1.6.6"})}JQLite.expando="ng339";var jqCache=JQLite.cache={},jqId=1;function jqNextId(){return++jqId}JQLite._data=function(node){return this.cache[node[this.expando]]||{}};var DASH_LOWERCASE_REGEXP=/-([a-z])/g,MS_HACK_REGEXP=/^-ms-/,MOUSE_EVENT_MAP={mouseleave:"mouseout",mouseenter:"mouseover"},jqLiteMinErr=minErr("jqLite");function cssKebabToCamel(name){return kebabToCamel(name.replace(MS_HACK_REGEXP,"ms-"))}function fnCamelCaseReplace(all,letter){return letter.toUpperCase()}function kebabToCamel(name){return name.replace(DASH_LOWERCASE_REGEXP,fnCamelCaseReplace)}var SINGLE_TAG_REGEXP=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,HTML_REGEXP=/<|&#?\w+;/,TAG_NAME_REGEXP=/<([\w:-]+)/,XHTML_TAG_REGEXP=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,wrapMap={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function jqLiteIsTextNode(html){return!HTML_REGEXP.test(html)}function jqLiteAcceptsData(node){var nodeType=node.nodeType;return 1===nodeType||!nodeType||9===nodeType}function jqLiteHasData(node){for(var key in jqCache[node.ng339])return!0;return!1}function jqLiteBuildFragment(html,context){var tmp,tag,wrap,fragment=context.createDocumentFragment(),nodes=[],i;if(jqLiteIsTextNode(html))nodes.push(context.createTextNode(html));else{for(tmp=fragment.appendChild(context.createElement("div")),tag=(TAG_NAME_REGEXP.exec(html)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML=wrap[1]+html.replace(XHTML_TAG_REGEXP,"<$1></$2>")+wrap[2],i=wrap[0];i--;)tmp=tmp.lastChild;nodes=concat(nodes,tmp.childNodes),(tmp=fragment.firstChild).textContent=""}return fragment.textContent="",fragment.innerHTML="",forEach(nodes,(function(node){fragment.appendChild(node)})),fragment}function jqLiteParseHTML(html,context){var parsed;return context=context||window.document,(parsed=SINGLE_TAG_REGEXP.exec(html))?[context.createElement(parsed[1])]:(parsed=jqLiteBuildFragment(html,context))?parsed.childNodes:[]}function jqLiteWrapNode(node,wrapper){var parent=node.parentNode;parent&&parent.replaceChild(wrapper,node),wrapper.appendChild(node)}wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td;var jqLiteContains=window.Node.prototype.contains||function(arg){return!!(16&this.compareDocumentPosition(arg))};function JQLite(element){if(element instanceof JQLite)return element;var argIsString;if(isString(element)&&(element=trim(element),argIsString=!0),!(this instanceof JQLite)){if(argIsString&&"<"!==element.charAt(0))throw jqLiteMinErr("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new JQLite(element)}argIsString?jqLiteAddNodes(this,jqLiteParseHTML(element)):isFunction(element)?jqLiteReady(element):jqLiteAddNodes(this,element)}function jqLiteClone(element){return element.cloneNode(!0)}function jqLiteDealoc(element,onlyDescendants){!onlyDescendants&&jqLiteAcceptsData(element)&&jqLite.cleanData([element]),element.querySelectorAll&&jqLite.cleanData(element.querySelectorAll("*"))}function jqLiteOff(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("offargs","jqLite#off() does not support the `selector` argument");var expandoStore=jqLiteExpandoStore(element),events=expandoStore&&expandoStore.events,handle=expandoStore&&expandoStore.handle;if(handle)if(type){var removeHandler=function(type){var listenerFns=events[type];isDefined(fn)&&arrayRemove(listenerFns||[],fn),isDefined(fn)&&listenerFns&&listenerFns.length>0||(element.removeEventListener(type,handle),delete events[type])};forEach(type.split(" "),(function(type){removeHandler(type),MOUSE_EVENT_MAP[type]&&removeHandler(MOUSE_EVENT_MAP[type])}))}else for(type in events)"$destroy"!==type&&element.removeEventListener(type,handle),delete events[type]}function jqLiteRemoveData(element,name){var expandoId=element.ng339,expandoStore=expandoId&&jqCache[expandoId];if(expandoStore){if(name)return void delete expandoStore.data[name];expandoStore.handle&&(expandoStore.events.$destroy&&expandoStore.handle({},"$destroy"),jqLiteOff(element)),delete jqCache[expandoId],element.ng339=void 0}}function jqLiteExpandoStore(element,createIfNecessary){var expandoId=element.ng339,expandoStore=expandoId&&jqCache[expandoId];return createIfNecessary&&!expandoStore&&(element.ng339=expandoId=jqNextId(),expandoStore=jqCache[expandoId]={events:{},data:{},handle:void 0}),expandoStore}function jqLiteData(element,key,value){if(jqLiteAcceptsData(element)){var prop,isSimpleSetter=isDefined(value),isSimpleGetter=!isSimpleSetter&&key&&!isObject(key),massGetter=!key,expandoStore=jqLiteExpandoStore(element,!isSimpleGetter),data=expandoStore&&expandoStore.data;if(isSimpleSetter)data[kebabToCamel(key)]=value;else{if(massGetter)return data;if(isSimpleGetter)return data&&data[kebabToCamel(key)];for(prop in key)data[kebabToCamel(prop)]=key[prop]}}}function jqLiteHasClass(element,selector){return!!element.getAttribute&&(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+selector+" ")>-1}function jqLiteRemoveClass(element,cssClasses){cssClasses&&element.setAttribute&&forEach(cssClasses.split(" "),(function(cssClass){element.setAttribute("class",trim((" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+trim(cssClass)+" "," ")))}))}function jqLiteAddClass(element,cssClasses){if(cssClasses&&element.setAttribute){var existingClasses=(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");forEach(cssClasses.split(" "),(function(cssClass){cssClass=trim(cssClass),-1===existingClasses.indexOf(" "+cssClass+" ")&&(existingClasses+=cssClass+" ")})),element.setAttribute("class",trim(existingClasses))}}function jqLiteAddNodes(root,elements){if(elements)if(elements.nodeType)root[root.length++]=elements;else{var length=elements.length;if("number"==typeof length&&elements.window!==elements){if(length)for(var i=0;i<length;i++)root[root.length++]=elements[i]}else root[root.length++]=elements}}function jqLiteController(element,name){return jqLiteInheritedData(element,"$"+(name||"ngController")+"Controller")}function jqLiteInheritedData(element,name,value){9===element.nodeType&&(element=element.documentElement);for(var names=isArray(name)?name:[name];element;){for(var i=0,ii=names.length;i<ii;i++)if(isDefined(value=jqLite.data(element,names[i])))return value;element=element.parentNode||11===element.nodeType&&element.host}}function jqLiteEmpty(element){for(jqLiteDealoc(element,!0);element.firstChild;)element.removeChild(element.firstChild)}function jqLiteRemove(element,keepData){keepData||jqLiteDealoc(element);var parent=element.parentNode;parent&&parent.removeChild(element)}function jqLiteDocumentLoaded(action,win){"complete"===(win=win||window).document.readyState?win.setTimeout(action):jqLite(win).on("load",action)}function jqLiteReady(fn){function trigger(){window.document.removeEventListener("DOMContentLoaded",trigger),window.removeEventListener("load",trigger),fn()}"complete"===window.document.readyState?window.setTimeout(fn):(window.document.addEventListener("DOMContentLoaded",trigger),window.addEventListener("load",trigger))}var JQLitePrototype=JQLite.prototype={ready:jqLiteReady,toString:function(){var value=[];return forEach(this,(function(e){value.push(""+e)})),"["+value.join(", ")+"]"},eq:function(index){return jqLite(index>=0?this[index]:this[this.length+index])},length:0,push:push,sort:[].sort,splice:[].splice},BOOLEAN_ATTR={};forEach("multiple,selected,checked,disabled,readOnly,required,open".split(","),(function(value){BOOLEAN_ATTR[lowercase(value)]=value}));var BOOLEAN_ELEMENTS={};forEach("input,select,option,textarea,button,form,details".split(","),(function(value){BOOLEAN_ELEMENTS[value]=!0}));var ALIASED_ATTR={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};function getBooleanAttrName(element,name){var booleanAttr=BOOLEAN_ATTR[name.toLowerCase()];return booleanAttr&&BOOLEAN_ELEMENTS[nodeName_(element)]&&booleanAttr}function getAliasedAttrName(name){return ALIASED_ATTR[name]}function createEventHandler(element,events){var eventHandler=function(event,type){event.isDefaultPrevented=function(){return event.defaultPrevented};var eventFns=events[type||event.type],eventFnsLength=eventFns?eventFns.length:0;if(eventFnsLength){if(isUndefined(event.immediatePropagationStopped)){var originalStopImmediatePropagation=event.stopImmediatePropagation;event.stopImmediatePropagation=function(){event.immediatePropagationStopped=!0,event.stopPropagation&&event.stopPropagation(),originalStopImmediatePropagation&&originalStopImmediatePropagation.call(event)}}event.isImmediatePropagationStopped=function(){return!0===event.immediatePropagationStopped};var handlerWrapper=eventFns.specialHandlerWrapper||defaultHandlerWrapper;eventFnsLength>1&&(eventFns=shallowCopy(eventFns));for(var i=0;i<eventFnsLength;i++)event.isImmediatePropagationStopped()||handlerWrapper(element,event,eventFns[i])}};return eventHandler.elem=element,eventHandler}function defaultHandlerWrapper(element,event,handler){handler.call(element,event)}function specialMouseHandlerWrapper(target,event,handler){var related=event.relatedTarget;related&&(related===target||jqLiteContains.call(target,related))||handler.call(target,event)}function $$jqLiteProvider(){this.$get=function $$jqLite(){return extend(JQLite,{hasClass:function(node,classes){return node.attr&&(node=node[0]),jqLiteHasClass(node,classes)},addClass:function(node,classes){return node.attr&&(node=node[0]),jqLiteAddClass(node,classes)},removeClass:function(node,classes){return node.attr&&(node=node[0]),jqLiteRemoveClass(node,classes)}})}}function hashKey(obj,nextUidFn){var key=obj&&obj.$$hashKey;if(key)return"function"==typeof key&&(key=obj.$$hashKey()),key;var objType=typeof obj;return key="function"===objType||"object"===objType&&null!==obj?obj.$$hashKey=objType+":"+(nextUidFn||nextUid)():objType+":"+obj}forEach({data:jqLiteData,removeData:jqLiteRemoveData,hasData:jqLiteHasData,cleanData:function jqLiteCleanData(nodes){for(var i=0,ii=nodes.length;i<ii;i++)jqLiteRemoveData(nodes[i])}},(function(fn,name){JQLite[name]=fn})),forEach({data:jqLiteData,inheritedData:jqLiteInheritedData,scope:function(element){return jqLite.data(element,"$scope")||jqLiteInheritedData(element.parentNode||element,["$isolateScope","$scope"])},isolateScope:function(element){return jqLite.data(element,"$isolateScope")||jqLite.data(element,"$isolateScopeNoTemplate")},controller:jqLiteController,injector:function(element){return jqLiteInheritedData(element,"$injector")},removeAttr:function(element,name){element.removeAttribute(name)},hasClass:jqLiteHasClass,css:function(element,name,value){if(name=cssKebabToCamel(name),!isDefined(value))return element.style[name];element.style[name]=value},attr:function(element,name,value){var ret,nodeType=element.nodeType;if(nodeType!==NODE_TYPE_TEXT&&2!==nodeType&&8!==nodeType&&element.getAttribute){var lowercasedName=lowercase(name),isBooleanAttr=BOOLEAN_ATTR[lowercasedName];if(!isDefined(value))return ret=element.getAttribute(name),isBooleanAttr&&null!==ret&&(ret=lowercasedName),null===ret?void 0:ret;null===value||!1===value&&isBooleanAttr?element.removeAttribute(name):element.setAttribute(name,isBooleanAttr?lowercasedName:value)}},prop:function(element,name,value){if(!isDefined(value))return element[name];element[name]=value},text:function(){return getText.$dv="",getText;function getText(element,value){if(isUndefined(value)){var nodeType=element.nodeType;return 1===nodeType||nodeType===NODE_TYPE_TEXT?element.textContent:""}element.textContent=value}}(),val:function(element,value){if(isUndefined(value)){if(element.multiple&&"select"===nodeName_(element)){var result=[];return forEach(element.options,(function(option){option.selected&&result.push(option.value||option.text)})),result}return element.value}element.value=value},html:function(element,value){if(isUndefined(value))return element.innerHTML;jqLiteDealoc(element,!0),element.innerHTML=value},empty:jqLiteEmpty},(function(fn,name){JQLite.prototype[name]=function(arg1,arg2){var i,key,nodeCount=this.length;if(fn!==jqLiteEmpty&&isUndefined(2===fn.length&&fn!==jqLiteHasClass&&fn!==jqLiteController?arg1:arg2)){if(isObject(arg1)){for(i=0;i<nodeCount;i++)if(fn===jqLiteData)fn(this[i],arg1);else for(key in arg1)fn(this[i],key,arg1[key]);return this}for(var value=fn.$dv,jj=isUndefined(value)?Math.min(nodeCount,1):nodeCount,j=0;j<jj;j++){var nodeValue=fn(this[j],arg1,arg2);value=value?value+nodeValue:nodeValue}return value}for(i=0;i<nodeCount;i++)fn(this[i],arg1,arg2);return this}})),forEach({removeData:jqLiteRemoveData,on:function jqLiteOn(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(jqLiteAcceptsData(element)){var expandoStore=jqLiteExpandoStore(element,!0),events=expandoStore.events,handle=expandoStore.handle;handle||(handle=expandoStore.handle=createEventHandler(element,events));for(var types=type.indexOf(" ")>=0?type.split(" "):[type],i=types.length,addHandler=function(type,specialHandlerWrapper,noEventListener){var eventFns=events[type];eventFns||((eventFns=events[type]=[]).specialHandlerWrapper=specialHandlerWrapper,"$destroy"===type||noEventListener||element.addEventListener(type,handle)),eventFns.push(fn)};i--;)type=types[i],MOUSE_EVENT_MAP[type]?(addHandler(MOUSE_EVENT_MAP[type],specialMouseHandlerWrapper),addHandler(type,void 0,!0)):addHandler(type)}},off:jqLiteOff,one:function(element,type,fn){(element=jqLite(element)).on(type,(function onFn(){element.off(type,fn),element.off(type,onFn)})),element.on(type,fn)},replaceWith:function(element,replaceNode){var index,parent=element.parentNode;jqLiteDealoc(element),forEach(new JQLite(replaceNode),(function(node){index?parent.insertBefore(node,index.nextSibling):parent.replaceChild(node,element),index=node}))},children:function(element){var children=[];return forEach(element.childNodes,(function(element){1===element.nodeType&&children.push(element)})),children},contents:function(element){return element.contentDocument||element.childNodes||[]},append:function(element,node){var nodeType=element.nodeType;if(1===nodeType||11===nodeType)for(var i=0,ii=(node=new JQLite(node)).length;i<ii;i++){var child=node[i];element.appendChild(child)}},prepend:function(element,node){if(1===element.nodeType){var index=element.firstChild;forEach(new JQLite(node),(function(child){element.insertBefore(child,index)}))}},wrap:function(element,wrapNode){jqLiteWrapNode(element,jqLite(wrapNode).eq(0).clone()[0])},remove:jqLiteRemove,detach:function(element){jqLiteRemove(element,!0)},after:function(element,newElement){var index=element,parent=element.parentNode;if(parent)for(var i=0,ii=(newElement=new JQLite(newElement)).length;i<ii;i++){var node=newElement[i];parent.insertBefore(node,index.nextSibling),index=node}},addClass:jqLiteAddClass,removeClass:jqLiteRemoveClass,toggleClass:function(element,selector,condition){selector&&forEach(selector.split(" "),(function(className){var classCondition=condition;isUndefined(classCondition)&&(classCondition=!jqLiteHasClass(element,className)),(classCondition?jqLiteAddClass:jqLiteRemoveClass)(element,className)}))},parent:function(element){var parent=element.parentNode;return parent&&11!==parent.nodeType?parent:null},next:function(element){return element.nextElementSibling},find:function(element,selector){return element.getElementsByTagName?element.getElementsByTagName(selector):[]},clone:jqLiteClone,triggerHandler:function(element,event,extraParameters){var dummyEvent,eventFnsCopy,handlerArgs,eventName=event.type||event,expandoStore=jqLiteExpandoStore(element),events=expandoStore&&expandoStore.events,eventFns=events&&events[eventName];eventFns&&(dummyEvent={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:noop,type:eventName,target:element},event.type&&(dummyEvent=extend(dummyEvent,event)),eventFnsCopy=shallowCopy(eventFns),handlerArgs=extraParameters?[dummyEvent].concat(extraParameters):[dummyEvent],forEach(eventFnsCopy,(function(fn){dummyEvent.isImmediatePropagationStopped()||fn.apply(element,handlerArgs)})))}},(function(fn,name){JQLite.prototype[name]=function(arg1,arg2,arg3){for(var value,i=0,ii=this.length;i<ii;i++)isUndefined(value)?isDefined(value=fn(this[i],arg1,arg2,arg3))&&(value=jqLite(value)):jqLiteAddNodes(value,fn(this[i],arg1,arg2,arg3));return isDefined(value)?value:this}})),JQLite.prototype.bind=JQLite.prototype.on,JQLite.prototype.unbind=JQLite.prototype.off;var nanKey=Object.create(null);function NgMapShim(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}NgMapShim.prototype={_idx:function(key){return key===this._lastKey?this._lastIndex:(this._lastKey=key,this._lastIndex=this._keys.indexOf(key),this._lastIndex)},_transformKey:function(key){return isNumberNaN(key)?nanKey:key},get:function(key){key=this._transformKey(key);var idx=this._idx(key);if(-1!==idx)return this._values[idx]},set:function(key,value){key=this._transformKey(key);var idx=this._idx(key);-1===idx&&(idx=this._lastIndex=this._keys.length),this._keys[idx]=key,this._values[idx]=value},delete:function(key){key=this._transformKey(key);var idx=this._idx(key);return-1!==idx&&(this._keys.splice(idx,1),this._values.splice(idx,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var NgMap=NgMapShim,$$MapProvider=[function(){this.$get=[function(){return NgMap}]}],ARROW_ARG=/^([^(]+?)=>/,FN_ARGS=/^[^(]*\(\s*([^)]*)\)/m,FN_ARG_SPLIT=/,/,FN_ARG=/^\s*(_?)(\S+?)\1\s*$/,STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,$injectorMinErr=minErr("$injector");function stringifyFn(fn){return Function.prototype.toString.call(fn)}function extractArgs(fn){var fnText=stringifyFn(fn).replace(STRIP_COMMENTS,""),args;return fnText.match(ARROW_ARG)||fnText.match(FN_ARGS)}function anonFn(fn){var args=extractArgs(fn);return args?"function("+(args[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function annotate(fn,strictDi,name){var $inject,argDecl,last;if("function"==typeof fn){if(!($inject=fn.$inject)){if($inject=[],fn.length){if(strictDi)throw isString(name)&&name||(name=fn.name||anonFn(fn)),$injectorMinErr("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",name);forEach((argDecl=extractArgs(fn))[1].split(FN_ARG_SPLIT),(function(arg){arg.replace(FN_ARG,(function(all,underscore,name){$inject.push(name)}))}))}fn.$inject=$inject}}else isArray(fn)?(assertArgFn(fn[last=fn.length-1],"fn"),$inject=fn.slice(0,last)):assertArgFn(fn,"fn",!0);return $inject}function createInjector(modulesToLoad,strictDi){strictDi=!0===strictDi;var INSTANTIATING={},providerSuffix="Provider",path=[],loadedModules=new NgMap,providerCache={$provide:{provider:supportObject(provider),factory:supportObject(factory),service:supportObject(service),value:supportObject(value),constant:supportObject(constant),decorator:decorator}},providerInjector=providerCache.$injector=createInternalInjector(providerCache,(function(serviceName,caller){throw angular.isString(caller)&&path.push(caller),$injectorMinErr("unpr","Unknown provider: {0}",path.join(" <- "))})),instanceCache={},protoInstanceInjector=createInternalInjector(instanceCache,(function(serviceName,caller){var provider=providerInjector.get(serviceName+"Provider",caller);return instanceInjector.invoke(provider.$get,provider,void 0,serviceName)})),instanceInjector=protoInstanceInjector;providerCache.$injectorProvider={$get:valueFn(protoInstanceInjector)},instanceInjector.modules=providerInjector.modules=createMap();var runBlocks=loadModules(modulesToLoad);return(instanceInjector=protoInstanceInjector.get("$injector")).strictDi=strictDi,forEach(runBlocks,(function(fn){fn&&instanceInjector.invoke(fn)})),instanceInjector;function supportObject(delegate){return function(key,value){if(!isObject(key))return delegate(key,value);forEach(key,reverseParams(delegate))}}function provider(name,provider_){if(assertNotHasOwnProperty(name,"service"),(isFunction(provider_)||isArray(provider_))&&(provider_=providerInjector.instantiate(provider_)),!provider_.$get)throw $injectorMinErr("pget","Provider '{0}' must define $get factory method.",name);return providerCache[name+"Provider"]=provider_}function enforceReturnValue(name,factory){return function enforcedReturnValue(){var result=instanceInjector.invoke(factory,this);if(isUndefined(result))throw $injectorMinErr("undef","Provider '{0}' must return a value from $get factory method.",name);return result}}function factory(name,factoryFn,enforce){return provider(name,{$get:!1!==enforce?enforceReturnValue(name,factoryFn):factoryFn})}function service(name,constructor){return factory(name,["$injector",function($injector){return $injector.instantiate(constructor)}])}function value(name,val){return factory(name,valueFn(val),!1)}function constant(name,value){assertNotHasOwnProperty(name,"constant"),providerCache[name]=value,instanceCache[name]=value}function decorator(serviceName,decorFn){var origProvider=providerInjector.get(serviceName+"Provider"),orig$get=origProvider.$get;origProvider.$get=function(){var origInstance=instanceInjector.invoke(orig$get,origProvider);return instanceInjector.invoke(decorFn,null,{$delegate:origInstance})}}function loadModules(modulesToLoad){assertArg(isUndefined(modulesToLoad)||isArray(modulesToLoad),"modulesToLoad","not an array");var runBlocks=[],moduleFn;return forEach(modulesToLoad,(function(module){if(!loadedModules.get(module)){loadedModules.set(module,!0);try{isString(module)?(moduleFn=angularModule(module),instanceInjector.modules[module]=moduleFn,runBlocks=runBlocks.concat(loadModules(moduleFn.requires)).concat(moduleFn._runBlocks),runInvokeQueue(moduleFn._invokeQueue),runInvokeQueue(moduleFn._configBlocks)):isFunction(module)?runBlocks.push(providerInjector.invoke(module)):isArray(module)?runBlocks.push(providerInjector.invoke(module)):assertArgFn(module,"module")}catch(e){throw isArray(module)&&(module=module[module.length-1]),e.message&&e.stack&&-1===e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),$injectorMinErr("modulerr","Failed to instantiate module {0} due to:\n{1}",module,e.stack||e.message||e)}}function runInvokeQueue(queue){var i,ii;for(i=0,ii=queue.length;i<ii;i++){var invokeArgs=queue[i],provider=providerInjector.get(invokeArgs[0]);provider[invokeArgs[1]].apply(provider,invokeArgs[2])}}})),runBlocks}function createInternalInjector(cache,factory){function getService(serviceName,caller){if(cache.hasOwnProperty(serviceName)){if(cache[serviceName]===INSTANTIATING)throw $injectorMinErr("cdep","Circular dependency found: {0}",serviceName+" <- "+path.join(" <- "));return cache[serviceName]}try{return path.unshift(serviceName),cache[serviceName]=INSTANTIATING,cache[serviceName]=factory(serviceName,caller),cache[serviceName]}catch(err){throw cache[serviceName]===INSTANTIATING&&delete cache[serviceName],err}finally{path.shift()}}function injectionArgs(fn,locals,serviceName){for(var args=[],$inject=createInjector.$$annotate(fn,strictDi,serviceName),i=0,length=$inject.length;i<length;i++){var key=$inject[i];if("string"!=typeof key)throw $injectorMinErr("itkn","Incorrect injection token! Expected service name as string, got {0}",key);args.push(locals&&locals.hasOwnProperty(key)?locals[key]:getService(key,serviceName))}return args}function isClass(func){if(msie||"function"!=typeof func)return!1;var result=func.$$ngIsClass;return isBoolean(result)||(result=func.$$ngIsClass=/^(?:class\b|constructor\()/.test(stringifyFn(func))),result}function invoke(fn,self,locals,serviceName){"string"==typeof locals&&(serviceName=locals,locals=null);var args=injectionArgs(fn,locals,serviceName);return isArray(fn)&&(fn=fn[fn.length-1]),isClass(fn)?(args.unshift(null),new(Function.prototype.bind.apply(fn,args))):fn.apply(self,args)}function instantiate(Type,locals,serviceName){var ctor=isArray(Type)?Type[Type.length-1]:Type,args=injectionArgs(Type,locals,serviceName);return args.unshift(null),new(Function.prototype.bind.apply(ctor,args))}return{invoke:invoke,instantiate:instantiate,get:getService,annotate:createInjector.$$annotate,has:function(name){return providerCache.hasOwnProperty(name+"Provider")||cache.hasOwnProperty(name)}}}}function $AnchorScrollProvider(){var autoScrollingEnabled=!0;this.disableAutoScrolling=function(){autoScrollingEnabled=!1},this.$get=["$window","$location","$rootScope",function($window,$location,$rootScope){var document=$window.document;function getFirstAnchor(list){var result=null;return Array.prototype.some.call(list,(function(element){if("a"===nodeName_(element))return result=element,!0})),result}function getYOffset(){var offset=scroll.yOffset;if(isFunction(offset))offset=offset();else if(isElement(offset)){var elem=offset[0],style;offset="fixed"!==$window.getComputedStyle(elem).position?0:elem.getBoundingClientRect().bottom}else isNumber(offset)||(offset=0);return offset}function scrollTo(elem){if(elem){elem.scrollIntoView();var offset=getYOffset();if(offset){var elemTop=elem.getBoundingClientRect().top;$window.scrollBy(0,elemTop-offset)}}else $window.scrollTo(0,0)}function scroll(hash){var elm;(hash=isString(hash)?hash:isNumber(hash)?hash.toString():$location.hash())?(elm=document.getElementById(hash))?scrollTo(elm):(elm=getFirstAnchor(document.getElementsByName(hash)))?scrollTo(elm):"top"===hash&&scrollTo(null):scrollTo(null)}return autoScrollingEnabled&&$rootScope.$watch((function autoScrollWatch(){return $location.hash()}),(function autoScrollWatchAction(newVal,oldVal){newVal===oldVal&&""===newVal||jqLiteDocumentLoaded((function(){$rootScope.$evalAsync(scroll)}))})),scroll}]}createInjector.$$annotate=annotate;var $animateMinErr=minErr("$animate"),ELEMENT_NODE=1,NG_ANIMATE_CLASSNAME="ng-animate";function mergeClasses(a,b){return a||b?a?b?(isArray(a)&&(a=a.join(" ")),isArray(b)&&(b=b.join(" ")),a+" "+b):a:b:""}function extractElementNode(element){for(var i=0;i<element.length;i++){var elm=element[i];if(1===elm.nodeType)return elm}}function splitClasses(classes){isString(classes)&&(classes=classes.split(" "));var obj=createMap();return forEach(classes,(function(klass){klass.length&&(obj[klass]=!0)})),obj}function prepareAnimateOptions(options){return isObject(options)?options:{}}var $$CoreAnimateJsProvider=function(){this.$get=noop},$$CoreAnimateQueueProvider=function(){var postDigestQueue=new NgMap,postDigestElements=[];this.$get=["$$AnimateRunner","$rootScope",function($$AnimateRunner,$rootScope){return{enabled:noop,on:noop,off:noop,pin:noop,push:function(element,event,options,domOperation){domOperation&&domOperation(),(options=options||{}).from&&element.css(options.from),options.to&&element.css(options.to),(options.addClass||options.removeClass)&&addRemoveClassesPostDigest(element,options.addClass,options.removeClass);var runner=new $$AnimateRunner;return runner.complete(),runner}};function updateData(data,classes,value){var changed=!1;return classes&&forEach(classes=isString(classes)?classes.split(" "):isArray(classes)?classes:[],(function(className){className&&(changed=!0,data[className]=value)})),changed}function handleCSSClassChanges(){forEach(postDigestElements,(function(element){var data=postDigestQueue.get(element);if(data){var existing=splitClasses(element.attr("class")),toAdd="",toRemove="";forEach(data,(function(status,className){var hasClass;status!==!!existing[className]&&(status?toAdd+=(toAdd.length?" ":"")+className:toRemove+=(toRemove.length?" ":"")+className)})),forEach(element,(function(elm){toAdd&&jqLiteAddClass(elm,toAdd),toRemove&&jqLiteRemoveClass(elm,toRemove)})),postDigestQueue.delete(element)}})),postDigestElements.length=0}function addRemoveClassesPostDigest(element,add,remove){var data=postDigestQueue.get(element)||{},classesAdded=updateData(data,add,!0),classesRemoved=updateData(data,remove,!1);(classesAdded||classesRemoved)&&(postDigestQueue.set(element,data),postDigestElements.push(element),1===postDigestElements.length&&$rootScope.$$postDigest(handleCSSClassChanges))}}]},$AnimateProvider=["$provide",function($provide){var provider=this,classNameFilter=null,customFilter=null;this.$$registeredAnimations=Object.create(null),this.register=function(name,factory){if(name&&"."!==name.charAt(0))throw $animateMinErr("notcsel","Expecting class selector starting with '.' got '{0}'.",name);var key=name+"-animation";provider.$$registeredAnimations[name.substr(1)]=key,$provide.factory(key,factory)},this.customFilter=function(filterFn){return 1===arguments.length&&(customFilter=isFunction(filterFn)?filterFn:null),customFilter},this.classNameFilter=function(expression){if(1===arguments.length&&(classNameFilter=expression instanceof RegExp?expression:null)){var reservedRegex=new RegExp("[(\\s|\\/)]ng-animate[(\\s|\\/)]");if(reservedRegex.test(classNameFilter.toString()))throw classNameFilter=null,$animateMinErr("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',"ng-animate")}return classNameFilter},this.$get=["$$animateQueue",function($$animateQueue){function domInsert(element,parentElement,afterElement){if(afterElement){var afterNode=extractElementNode(afterElement);!afterNode||afterNode.parentNode||afterNode.previousElementSibling||(afterElement=null)}afterElement?afterElement.after(element):parentElement.prepend(element)}return{on:$$animateQueue.on,off:$$animateQueue.off,pin:$$animateQueue.pin,enabled:$$animateQueue.enabled,cancel:function(runner){runner.end&&runner.end()},enter:function(element,parent,after,options){return parent=parent&&jqLite(parent),after=after&&jqLite(after),domInsert(element,parent=parent||after.parent(),after),$$animateQueue.push(element,"enter",prepareAnimateOptions(options))},move:function(element,parent,after,options){return parent=parent&&jqLite(parent),after=after&&jqLite(after),domInsert(element,parent=parent||after.parent(),after),$$animateQueue.push(element,"move",prepareAnimateOptions(options))},leave:function(element,options){return $$animateQueue.push(element,"leave",prepareAnimateOptions(options),(function(){element.remove()}))},addClass:function(element,className,options){return(options=prepareAnimateOptions(options)).addClass=mergeClasses(options.addclass,className),$$animateQueue.push(element,"addClass",options)},removeClass:function(element,className,options){return(options=prepareAnimateOptions(options)).removeClass=mergeClasses(options.removeClass,className),$$animateQueue.push(element,"removeClass",options)},setClass:function(element,add,remove,options){return(options=prepareAnimateOptions(options)).addClass=mergeClasses(options.addClass,add),options.removeClass=mergeClasses(options.removeClass,remove),$$animateQueue.push(element,"setClass",options)},animate:function(element,from,to,className,options){return(options=prepareAnimateOptions(options)).from=options.from?extend(options.from,from):from,options.to=options.to?extend(options.to,to):to,className=className||"ng-inline-animate",options.tempClasses=mergeClasses(options.tempClasses,className),$$animateQueue.push(element,"animate",options)}}}]}],$$AnimateAsyncRunFactoryProvider=function(){this.$get=["$$rAF",function($$rAF){var waitQueue=[];function waitForTick(fn){waitQueue.push(fn),waitQueue.length>1||$$rAF((function(){for(var i=0;i<waitQueue.length;i++)waitQueue[i]();waitQueue=[]}))}return function(){var passed=!1;return waitForTick((function(){passed=!0})),function(callback){passed?callback():waitForTick(callback)}}}]},$$AnimateRunnerFactoryProvider=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function($q,$sniffer,$$animateAsyncRun,$$isDocumentHidden,$timeout){var INITIAL_STATE=0,DONE_PENDING_STATE=1,DONE_COMPLETE_STATE=2;function AnimateRunner(host){this.setHost(host);var rafTick=$$animateAsyncRun(),timeoutTick=function(fn){$timeout(fn,0,!1)};this._doneCallbacks=[],this._tick=function(fn){$$isDocumentHidden()?timeoutTick(fn):rafTick(fn)},this._state=0}return AnimateRunner.chain=function(chain,callback){var index=0;function next(){index!==chain.length?chain[index]((function(response){!1!==response?(index++,next()):callback(!1)})):callback(!0)}next()},AnimateRunner.all=function(runners,callback){var count=0,status=!0;function onProgress(response){status=status&&response,++count===runners.length&&callback(status)}forEach(runners,(function(runner){runner.done(onProgress)}))},AnimateRunner.prototype={setHost:function(host){this.host=host||{}},done:function(fn){2===this._state?fn():this._doneCallbacks.push(fn)},progress:noop,getPromise:function(){if(!this.promise){var self=this;this.promise=$q((function(resolve,reject){self.done((function(status){!1===status?reject():resolve()}))}))}return this.promise},then:function(resolveHandler,rejectHandler){return this.getPromise().then(resolveHandler,rejectHandler)},catch:function(handler){return this.getPromise().catch(handler)},finally:function(handler){return this.getPromise().finally(handler)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(response){var self=this;0===self._state&&(self._state=1,self._tick((function(){self._resolve(response)})))},_resolve:function(response){2!==this._state&&(forEach(this._doneCallbacks,(function(fn){fn(response)})),this._doneCallbacks.length=0,this._state=2)}},AnimateRunner}]},$CoreAnimateCssProvider=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function($$rAF,$q,$$AnimateRunner){return function(element,initialOptions){var options=initialOptions||{};options.$$prepared||(options=copy(options)),options.cleanupStyles&&(options.from=options.to=null),options.from&&(element.css(options.from),options.from=null);var closed,runner=new $$AnimateRunner;return{start:run,end:run};function run(){return $$rAF((function(){applyAnimationContents(),closed||runner.complete(),closed=!0})),runner}function applyAnimationContents(){options.addClass&&(element.addClass(options.addClass),options.addClass=null),options.removeClass&&(element.removeClass(options.removeClass),options.removeClass=null),options.to&&(element.css(options.to),options.to=null)}}}]};function Browser(window,document,$log,$sniffer){var self=this,location=window.location,history=window.history,setTimeout=window.setTimeout,clearTimeout=window.clearTimeout,pendingDeferIds={};self.isMock=!1;var outstandingRequestCount=0,outstandingRequestCallbacks=[];function completeOutstandingRequest(fn){try{fn.apply(null,sliceArgs(arguments,1))}finally{if(0===--outstandingRequestCount)for(;outstandingRequestCallbacks.length;)try{outstandingRequestCallbacks.pop()()}catch(e){$log.error(e)}}}function getHash(url){var index=url.indexOf("#");return-1===index?"":url.substr(index)}self.$$completeOutstandingRequest=completeOutstandingRequest,self.$$incOutstandingRequestCount=function(){outstandingRequestCount++},self.notifyWhenNoOutstandingRequests=function(callback){0===outstandingRequestCount?callback():outstandingRequestCallbacks.push(callback)};var cachedState,lastHistoryState,lastBrowserUrl=location.href,baseElement=document.find("base"),pendingLocation=null,getCurrentState=$sniffer.history?function getCurrentState(){try{return history.state}catch(e){}}:noop;cacheState(),self.url=function(url,replace,state){if(isUndefined(state)&&(state=null),location!==window.location&&(location=window.location),history!==window.history&&(history=window.history),url){var sameState=lastHistoryState===state;if(lastBrowserUrl===url&&(!$sniffer.history||sameState))return self;var sameBase=lastBrowserUrl&&stripHash(lastBrowserUrl)===stripHash(url);return lastBrowserUrl=url,lastHistoryState=state,!$sniffer.history||sameBase&&sameState?(sameBase||(pendingLocation=url),replace?location.replace(url):sameBase?location.hash=getHash(url):location.href=url,location.href!==url&&(pendingLocation=url)):(history[replace?"replaceState":"pushState"](state,"",url),cacheState()),pendingLocation&&(pendingLocation=url),self}return pendingLocation||location.href.replace(/%27/g,"'")},self.state=function(){return cachedState};var urlChangeListeners=[],urlChangeInit=!1;function cacheStateAndFireUrlChange(){pendingLocation=null,fireStateOrUrlChange()}var lastCachedState=null;function cacheState(){equals(cachedState=isUndefined(cachedState=getCurrentState())?null:cachedState,lastCachedState)&&(cachedState=lastCachedState),lastCachedState=cachedState,lastHistoryState=cachedState}function fireStateOrUrlChange(){var prevLastHistoryState=lastHistoryState;cacheState(),lastBrowserUrl===self.url()&&prevLastHistoryState===cachedState||(lastBrowserUrl=self.url(),lastHistoryState=cachedState,forEach(urlChangeListeners,(function(listener){listener(self.url(),cachedState)})))}self.onUrlChange=function(callback){return urlChangeInit||($sniffer.history&&jqLite(window).on("popstate",cacheStateAndFireUrlChange),jqLite(window).on("hashchange",cacheStateAndFireUrlChange),urlChangeInit=!0),urlChangeListeners.push(callback),callback},self.$$applicationDestroyed=function(){jqLite(window).off("hashchange popstate",cacheStateAndFireUrlChange)},self.$$checkUrlChange=fireStateOrUrlChange,self.baseHref=function(){var href=baseElement.attr("href");return href?href.replace(/^(https?:)?\/\/[^/]*/,""):""},self.defer=function(fn,delay){var timeoutId;return outstandingRequestCount++,timeoutId=setTimeout((function(){delete pendingDeferIds[timeoutId],completeOutstandingRequest(fn)}),delay||0),pendingDeferIds[timeoutId]=!0,timeoutId},self.defer.cancel=function(deferId){return!!pendingDeferIds[deferId]&&(delete pendingDeferIds[deferId],clearTimeout(deferId),completeOutstandingRequest(noop),!0)}}function $BrowserProvider(){this.$get=["$window","$log","$sniffer","$document",function($window,$log,$sniffer,$document){return new Browser($window,$document,$log,$sniffer)}]}function $CacheFactoryProvider(){this.$get=function(){var caches={};function cacheFactory(cacheId,options){if(cacheId in caches)throw minErr("$cacheFactory")("iid","CacheId '{0}' is already taken!",cacheId);var size=0,stats=extend({},options,{id:cacheId}),data=createMap(),capacity=options&&options.capacity||Number.MAX_VALUE,lruHash=createMap(),freshEnd=null,staleEnd=null;return caches[cacheId]={put:function(key,value){if(!isUndefined(value)){var lruEntry;if(capacity<Number.MAX_VALUE)refresh(lruHash[key]||(lruHash[key]={key:key}));return key in data||size++,data[key]=value,size>capacity&&this.remove(staleEnd.key),value}},get:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;refresh(lruEntry)}return data[key]},remove:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;lruEntry===freshEnd&&(freshEnd=lruEntry.p),lruEntry===staleEnd&&(staleEnd=lruEntry.n),link(lruEntry.n,lruEntry.p),delete lruHash[key]}key in data&&(delete data[key],size--)},removeAll:function(){data=createMap(),size=0,lruHash=createMap(),freshEnd=staleEnd=null},destroy:function(){data=null,stats=null,lruHash=null,delete caches[cacheId]},info:function(){return extend({},stats,{size:size})}};function refresh(entry){entry!==freshEnd&&(staleEnd?staleEnd===entry&&(staleEnd=entry.n):staleEnd=entry,link(entry.n,entry.p),link(entry,freshEnd),(freshEnd=entry).n=null)}function link(nextEntry,prevEntry){nextEntry!==prevEntry&&(nextEntry&&(nextEntry.p=prevEntry),prevEntry&&(prevEntry.n=nextEntry))}}return cacheFactory.info=function(){var info={};return forEach(caches,(function(cache,cacheId){info[cacheId]=cache.info()})),info},cacheFactory.get=function(cacheId){return caches[cacheId]},cacheFactory}}function $TemplateCacheProvider(){this.$get=["$cacheFactory",function($cacheFactory){return $cacheFactory("templates")}]}var $compileMinErr=minErr("$compile");function UNINITIALIZED_VALUE(){}var _UNINITIALIZED_VALUE=new UNINITIALIZED_VALUE;function $CompileProvider($provide,$$sanitizeUriProvider){var hasDirectives={},Suffix="Directive",COMMENT_DIRECTIVE_REGEXP=/^\s*directive:\s*([\w-]+)\s+(.*)$/,CLASS_DIRECTIVE_REGEXP=/(([\w-]+)(?::([^;]+))?;?)/,ALL_OR_NOTHING_ATTRS=makeMap("ngSrc,ngSrcset,src,srcset"),REQUIRE_PREFIX_REGEXP=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,EVENT_HANDLER_ATTR_REGEXP=/^(on[a-z]+|formaction)$/,bindingCache=createMap();function parseIsolateBindings(scope,directiveName,isController){var LOCAL_REGEXP=/^\s*([@&<]|=(\*?))(\??)\s*([\w$]*)\s*$/,bindings=createMap();return forEach(scope,(function(definition,scopeName){if(definition in bindingCache)bindings[scopeName]=bindingCache[definition];else{var match=definition.match(LOCAL_REGEXP);if(!match)throw $compileMinErr("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",directiveName,scopeName,definition,isController?"controller bindings definition":"isolate scope definition");bindings[scopeName]={mode:match[1][0],collection:"*"===match[2],optional:"?"===match[3],attrName:match[4]||scopeName},match[4]&&(bindingCache[definition]=bindings[scopeName])}})),bindings}function parseDirectiveBindings(directive,directiveName){var bindings={isolateScope:null,bindToController:null};if(isObject(directive.scope)&&(!0===directive.bindToController?(bindings.bindToController=parseIsolateBindings(directive.scope,directiveName,!0),bindings.isolateScope={}):bindings.isolateScope=parseIsolateBindings(directive.scope,directiveName,!1)),isObject(directive.bindToController)&&(bindings.bindToController=parseIsolateBindings(directive.bindToController,directiveName,!0)),bindings.bindToController&&!directive.controller)throw $compileMinErr("noctrl","Cannot bind to controller without directive '{0}'s controller.",directiveName);return bindings}function assertValidDirectiveName(name){var letter=name.charAt(0);if(!letter||letter!==lowercase(letter))throw $compileMinErr("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",name);if(name!==name.trim())throw $compileMinErr("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",name)}function getDirectiveRequire(directive){var require=directive.require||directive.controller&&directive.name;return!isArray(require)&&isObject(require)&&forEach(require,(function(value,key){var match=value.match(REQUIRE_PREFIX_REGEXP),name;value.substring(match[0].length)||(require[key]=match[0]+key)})),require}function getDirectiveRestrict(restrict,name){if(restrict&&(!isString(restrict)||!/[EACM]/.test(restrict)))throw $compileMinErr("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",restrict,name);return restrict||"EA"}this.directive=function registerDirective(name,directiveFactory){return assertArg(name,"name"),assertNotHasOwnProperty(name,"directive"),isString(name)?(assertValidDirectiveName(name),assertArg(directiveFactory,"directiveFactory"),hasDirectives.hasOwnProperty(name)||(hasDirectives[name]=[],$provide.factory(name+Suffix,["$injector","$exceptionHandler",function($injector,$exceptionHandler){var directives=[];return forEach(hasDirectives[name],(function(directiveFactory,index){try{var directive=$injector.invoke(directiveFactory);isFunction(directive)?directive={compile:valueFn(directive)}:!directive.compile&&directive.link&&(directive.compile=valueFn(directive.link)),directive.priority=directive.priority||0,directive.index=index,directive.name=directive.name||name,directive.require=getDirectiveRequire(directive),directive.restrict=getDirectiveRestrict(directive.restrict,name),directive.$$moduleName=directiveFactory.$$moduleName,directives.push(directive)}catch(e){$exceptionHandler(e)}})),directives}])),hasDirectives[name].push(directiveFactory)):forEach(name,reverseParams(registerDirective)),this},this.component=function registerComponent(name,options){if(!isString(name))return forEach(name,reverseParams(bind(this,registerComponent))),this;var controller=options.controller||function(){};function factory($injector){function makeInjectable(fn){return isFunction(fn)||isArray(fn)?function(tElement,tAttrs){return $injector.invoke(fn,this,{$element:tElement,$attrs:tAttrs})}:fn}var template=options.template||options.templateUrl?options.template:"",ddo={controller:controller,controllerAs:identifierForController(options.controller)||options.controllerAs||"$ctrl",template:makeInjectable(template),templateUrl:makeInjectable(options.templateUrl),transclude:options.transclude,scope:{},bindToController:options.bindings||{},restrict:"E",require:options.require};return forEach(options,(function(val,key){"$"===key.charAt(0)&&(ddo[key]=val)})),ddo}return forEach(options,(function(val,key){"$"===key.charAt(0)&&(factory[key]=val,isFunction(controller)&&(controller[key]=val))})),factory.$inject=["$injector"],this.directive(name,factory)},this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.aHrefSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.imgSrcSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.imgSrcSanitizationWhitelist()};var debugInfoEnabled=!0;this.debugInfoEnabled=function(enabled){return isDefined(enabled)?(debugInfoEnabled=enabled,this):debugInfoEnabled};var preAssignBindingsEnabled=!1;this.preAssignBindingsEnabled=function(enabled){return isDefined(enabled)?(preAssignBindingsEnabled=enabled,this):preAssignBindingsEnabled};var strictComponentBindingsEnabled=!1;this.strictComponentBindingsEnabled=function(enabled){return isDefined(enabled)?(strictComponentBindingsEnabled=enabled,this):strictComponentBindingsEnabled};var TTL=10;this.onChangesTtl=function(value){return arguments.length?(TTL=value,this):TTL};var commentDirectivesEnabledConfig=!0;this.commentDirectivesEnabled=function(value){return arguments.length?(commentDirectivesEnabledConfig=value,this):commentDirectivesEnabledConfig};var cssClassDirectivesEnabledConfig=!0;this.cssClassDirectivesEnabled=function(value){return arguments.length?(cssClassDirectivesEnabledConfig=value,this):cssClassDirectivesEnabledConfig},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function($injector,$interpolate,$exceptionHandler,$templateRequest,$parse,$controller,$rootScope,$sce,$animate,$$sanitizeUri){var SIMPLE_ATTR_NAME=/^\w/,specialAttrHolder=window.document.createElement("div"),commentDirectivesEnabled=commentDirectivesEnabledConfig,cssClassDirectivesEnabled=cssClassDirectivesEnabledConfig,onChangesTtl=TTL,onChangesQueue;function flushOnChangesQueue(){try{if(!--onChangesTtl)throw onChangesQueue=void 0,$compileMinErr("infchng","{0} $onChanges() iterations reached. Aborting!\n",TTL);$rootScope.$apply((function(){for(var errors=[],i=0,ii=onChangesQueue.length;i<ii;++i)try{onChangesQueue[i]()}catch(e){errors.push(e)}if(onChangesQueue=void 0,errors.length)throw errors}))}finally{onChangesTtl++}}function Attributes(element,attributesToCopy){if(attributesToCopy){var keys=Object.keys(attributesToCopy),i,l,key;for(i=0,l=keys.length;i<l;i++)this[key=keys[i]]=attributesToCopy[key]}else this.$attr={};this.$$element=element}function setSpecialAttr(element,attrName,value){specialAttrHolder.innerHTML="<span "+attrName+">";var attributes=specialAttrHolder.firstChild.attributes,attribute=attributes[0];attributes.removeNamedItem(attribute.name),attribute.value=value,element.attributes.setNamedItem(attribute)}function safeAddClass($element,className){try{$element.addClass(className)}catch(e){}}Attributes.prototype={$normalize:directiveNormalize,$addClass:function(classVal){classVal&&classVal.length>0&&$animate.addClass(this.$$element,classVal)},$removeClass:function(classVal){classVal&&classVal.length>0&&$animate.removeClass(this.$$element,classVal)},$updateClass:function(newClasses,oldClasses){var toAdd=tokenDifference(newClasses,oldClasses);toAdd&&toAdd.length&&$animate.addClass(this.$$element,toAdd);var toRemove=tokenDifference(oldClasses,newClasses);toRemove&&toRemove.length&&$animate.removeClass(this.$$element,toRemove)},$set:function(key,value,writeAttr,attrName){var node,booleanKey=getBooleanAttrName(this.$$element[0],key),aliasedKey=getAliasedAttrName(key),observer=key,nodeName;if(booleanKey?(this.$$element.prop(key,value),attrName=booleanKey):aliasedKey&&(this[aliasedKey]=value,observer=aliasedKey),this[key]=value,attrName?this.$attr[key]=attrName:(attrName=this.$attr[key])||(this.$attr[key]=attrName=snake_case(key,"-")),"a"===(nodeName=nodeName_(this.$$element))&&("href"===key||"xlinkHref"===key)||"img"===nodeName&&"src"===key)this[key]=value=$$sanitizeUri(value,"src"===key);else if("img"===nodeName&&"srcset"===key&&isDefined(value)){for(var result="",trimmedSrcset=trim(value),srcPattern=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,pattern=/\s/.test(trimmedSrcset)?srcPattern:/(,)/,rawUris=trimmedSrcset.split(pattern),nbrUrisWith2parts=Math.floor(rawUris.length/2),i=0;i<nbrUrisWith2parts;i++){var innerIdx=2*i;result+=$$sanitizeUri(trim(rawUris[innerIdx]),!0),result+=" "+trim(rawUris[innerIdx+1])}var lastTuple=trim(rawUris[2*i]).split(/\s/);result+=$$sanitizeUri(trim(lastTuple[0]),!0),2===lastTuple.length&&(result+=" "+trim(lastTuple[1])),this[key]=value=result}!1!==writeAttr&&(null===value||isUndefined(value)?this.$$element.removeAttr(attrName):SIMPLE_ATTR_NAME.test(attrName)?this.$$element.attr(attrName,value):setSpecialAttr(this.$$element[0],attrName,value));var $$observers=this.$$observers;$$observers&&forEach($$observers[observer],(function(fn){try{fn(value)}catch(e){$exceptionHandler(e)}}))},$observe:function(key,fn){var attrs=this,$$observers=attrs.$$observers||(attrs.$$observers=createMap()),listeners=$$observers[key]||($$observers[key]=[]);return listeners.push(fn),$rootScope.$evalAsync((function(){listeners.$$inter||!attrs.hasOwnProperty(key)||isUndefined(attrs[key])||fn(attrs[key])})),function(){arrayRemove(listeners,fn)}}};var startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),denormalizeTemplate="{{"===startSymbol&&"}}"===endSymbol?identity:function denormalizeTemplate(template){return template.replace(/\{\{/g,startSymbol).replace(/}}/g,endSymbol)},NG_ATTR_BINDING=/^ngAttr[A-Z]/,MULTI_ELEMENT_DIR_RE=/^(.+)Start$/;return compile.$$addBindingInfo=debugInfoEnabled?function $$addBindingInfo($element,binding){var bindings=$element.data("$binding")||[];isArray(binding)?bindings=bindings.concat(binding):bindings.push(binding),$element.data("$binding",bindings)}:noop,compile.$$addBindingClass=debugInfoEnabled?function $$addBindingClass($element){safeAddClass($element,"ng-binding")}:noop,compile.$$addScopeInfo=debugInfoEnabled?function $$addScopeInfo($element,scope,isolated,noTemplate){var dataName=isolated?noTemplate?"$isolateScopeNoTemplate":"$isolateScope":"$scope";$element.data(dataName,scope)}:noop,compile.$$addScopeClass=debugInfoEnabled?function $$addScopeClass($element,isolated){safeAddClass($element,isolated?"ng-isolate-scope":"ng-scope")}:noop,compile.$$createComment=function(directiveName,comment){var content="";return debugInfoEnabled&&(content=" "+(directiveName||"")+": ",comment&&(content+=comment+" ")),window.document.createComment(content)},compile;function compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext){$compileNodes instanceof jqLite||($compileNodes=jqLite($compileNodes));var compositeLinkFn=compileNodes($compileNodes,transcludeFn,$compileNodes,maxPriority,ignoreDirective,previousCompileContext);compile.$$addScopeClass($compileNodes);var namespace=null;return function publicLinkFn(scope,cloneConnectFn,options){if(!$compileNodes)throw $compileMinErr("multilink","This element has already been linked.");assertArg(scope,"scope"),previousCompileContext&&previousCompileContext.needsNewScope&&(scope=scope.$parent.$new());var parentBoundTranscludeFn=(options=options||{}).parentBoundTranscludeFn,transcludeControllers=options.transcludeControllers,futureParentElement=options.futureParentElement,$linkNode;if(parentBoundTranscludeFn&&parentBoundTranscludeFn.$$boundTransclude&&(parentBoundTranscludeFn=parentBoundTranscludeFn.$$boundTransclude),namespace||(namespace=detectNamespaceForChildElements(futureParentElement)),$linkNode="html"!==namespace?jqLite(wrapTemplate(namespace,jqLite("<div>").append($compileNodes).html())):cloneConnectFn?JQLitePrototype.clone.call($compileNodes):$compileNodes,transcludeControllers)for(var controllerName in transcludeControllers)$linkNode.data("$"+controllerName+"Controller",transcludeControllers[controllerName].instance);return compile.$$addScopeInfo($linkNode,scope),cloneConnectFn&&cloneConnectFn($linkNode,scope),compositeLinkFn&&compositeLinkFn(scope,$linkNode,$linkNode,parentBoundTranscludeFn),cloneConnectFn||($compileNodes=compositeLinkFn=null),$linkNode}}function detectNamespaceForChildElements(parentElement){var node=parentElement&&parentElement[0];return node&&"foreignobject"!==nodeName_(node)&&toString.call(node).match(/SVG/)?"svg":"html"}function compileNodes(nodeList,transcludeFn,$rootElement,maxPriority,ignoreDirective,previousCompileContext){for(var linkFns=[],notLiveList=isArray(nodeList)||nodeList instanceof jqLite,attrs,directives,nodeLinkFn,childNodes,childLinkFn,linkFnFound,nodeLinkFnFound,i=0;i<nodeList.length;i++)attrs=new Attributes,11===msie&&mergeConsecutiveTextNodes(nodeList,i,notLiveList),(nodeLinkFn=(directives=collectDirectives(nodeList[i],[],attrs,0===i?maxPriority:void 0,ignoreDirective)).length?applyDirectivesToNode(directives,nodeList[i],attrs,transcludeFn,$rootElement,null,[],[],previousCompileContext):null)&&nodeLinkFn.scope&&compile.$$addScopeClass(attrs.$$element),childLinkFn=nodeLinkFn&&nodeLinkFn.terminal||!(childNodes=nodeList[i].childNodes)||!childNodes.length?null:compileNodes(childNodes,nodeLinkFn?(nodeLinkFn.transcludeOnThisElement||!nodeLinkFn.templateOnThisElement)&&nodeLinkFn.transclude:transcludeFn),(nodeLinkFn||childLinkFn)&&(linkFns.push(i,nodeLinkFn,childLinkFn),linkFnFound=!0,nodeLinkFnFound=nodeLinkFnFound||nodeLinkFn),previousCompileContext=null;return linkFnFound?compositeLinkFn:null;function compositeLinkFn(scope,nodeList,$rootElement,parentBoundTranscludeFn){var nodeLinkFn,childLinkFn,node,childScope,i,ii,idx,childBoundTranscludeFn,stableNodeList;if(nodeLinkFnFound){var nodeListLength=nodeList.length;for(stableNodeList=new Array(nodeListLength),i=0;i<linkFns.length;i+=3)stableNodeList[idx=linkFns[i]]=nodeList[idx]}else stableNodeList=nodeList;for(i=0,ii=linkFns.length;i<ii;)node=stableNodeList[linkFns[i++]],nodeLinkFn=linkFns[i++],childLinkFn=linkFns[i++],nodeLinkFn?(nodeLinkFn.scope?(childScope=scope.$new(),compile.$$addScopeInfo(jqLite(node),childScope)):childScope=scope,nodeLinkFn(childLinkFn,childScope,node,$rootElement,childBoundTranscludeFn=nodeLinkFn.transcludeOnThisElement?createBoundTranscludeFn(scope,nodeLinkFn.transclude,parentBoundTranscludeFn):!nodeLinkFn.templateOnThisElement&&parentBoundTranscludeFn?parentBoundTranscludeFn:!parentBoundTranscludeFn&&transcludeFn?createBoundTranscludeFn(scope,transcludeFn):null)):childLinkFn&&childLinkFn(scope,node.childNodes,void 0,parentBoundTranscludeFn)}}function mergeConsecutiveTextNodes(nodeList,idx,notLiveList){var node=nodeList[idx],parent=node.parentNode,sibling;if(node.nodeType===NODE_TYPE_TEXT)for(;(sibling=parent?node.nextSibling:nodeList[idx+1])&&sibling.nodeType===NODE_TYPE_TEXT;)node.nodeValue=node.nodeValue+sibling.nodeValue,sibling.parentNode&&sibling.parentNode.removeChild(sibling),notLiveList&&sibling===nodeList[idx+1]&&nodeList.splice(idx+1,1)}function createBoundTranscludeFn(scope,transcludeFn,previousBoundTranscludeFn){function boundTranscludeFn(transcludedScope,cloneFn,controllers,futureParentElement,containingScope){return transcludedScope||((transcludedScope=scope.$new(!1,containingScope)).$$transcluded=!0),transcludeFn(transcludedScope,cloneFn,{parentBoundTranscludeFn:previousBoundTranscludeFn,transcludeControllers:controllers,futureParentElement:futureParentElement})}var boundSlots=boundTranscludeFn.$$slots=createMap();for(var slotName in transcludeFn.$$slots)transcludeFn.$$slots[slotName]?boundSlots[slotName]=createBoundTranscludeFn(scope,transcludeFn.$$slots[slotName],previousBoundTranscludeFn):boundSlots[slotName]=null;return boundTranscludeFn}function collectDirectives(node,directives,attrs,maxPriority,ignoreDirective){var nodeType=node.nodeType,attrsMap=attrs.$attr,match,nodeName,className;switch(nodeType){case 1:addDirective(directives,directiveNormalize(nodeName=nodeName_(node)),"E",maxPriority,ignoreDirective);for(var attr,name,nName,ngAttrName,value,isNgAttr,nAttrs=node.attributes,j=0,jj=nAttrs&&nAttrs.length;j<jj;j++){var attrStartName=!1,attrEndName=!1;name=(attr=nAttrs[j]).name,value=attr.value,ngAttrName=directiveNormalize(name),(isNgAttr=NG_ATTR_BINDING.test(ngAttrName))&&(name=name.replace(PREFIX_REGEXP,"").substr(8).replace(/_(.)/g,(function(match,letter){return letter.toUpperCase()})));var multiElementMatch=ngAttrName.match(MULTI_ELEMENT_DIR_RE);multiElementMatch&&directiveIsMultiElement(multiElementMatch[1])&&(attrStartName=name,attrEndName=name.substr(0,name.length-5)+"end",name=name.substr(0,name.length-6)),attrsMap[nName=directiveNormalize(name.toLowerCase())]=name,!isNgAttr&&attrs.hasOwnProperty(nName)||(attrs[nName]=value,getBooleanAttrName(node,nName)&&(attrs[nName]=!0)),addAttrInterpolateDirective(node,directives,value,nName,isNgAttr),addDirective(directives,nName,"A",maxPriority,ignoreDirective,attrStartName,attrEndName)}if("input"===nodeName&&"hidden"===node.getAttribute("type")&&node.setAttribute("autocomplete","off"),!cssClassDirectivesEnabled)break;if(isObject(className=node.className)&&(className=className.animVal),isString(className)&&""!==className)for(;match=CLASS_DIRECTIVE_REGEXP.exec(className);)addDirective(directives,nName=directiveNormalize(match[2]),"C",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[3])),className=className.substr(match.index+match[0].length);break;case NODE_TYPE_TEXT:addTextInterpolateDirective(directives,node.nodeValue);break;case 8:if(!commentDirectivesEnabled)break;collectCommentDirectives(node,directives,attrs,maxPriority,ignoreDirective)}return directives.sort(byPriority),directives}function collectCommentDirectives(node,directives,attrs,maxPriority,ignoreDirective){try{var match=COMMENT_DIRECTIVE_REGEXP.exec(node.nodeValue);if(match){var nName=directiveNormalize(match[1]);addDirective(directives,nName,"M",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[2]))}}catch(e){}}function groupScan(node,attrStart,attrEnd){var nodes=[],depth=0;if(attrStart&&node.hasAttribute&&node.hasAttribute(attrStart))do{if(!node)throw $compileMinErr("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",attrStart,attrEnd);1===node.nodeType&&(node.hasAttribute(attrStart)&&depth++,node.hasAttribute(attrEnd)&&depth--),nodes.push(node),node=node.nextSibling}while(depth>0);else nodes.push(node);return jqLite(nodes)}function groupElementsLinkFnWrapper(linkFn,attrStart,attrEnd){return function groupedElementsLink(scope,element,attrs,controllers,transcludeFn){return element=groupScan(element[0],attrStart,attrEnd),linkFn(scope,element,attrs,controllers,transcludeFn)}}function compilationGenerator(eager,$compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext){var compiled;return eager?compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext):function lazyCompilation(){return compiled||(compiled=compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext),$compileNodes=transcludeFn=previousCompileContext=null),compiled.apply(this,arguments)}}function applyDirectivesToNode(directives,compileNode,templateAttrs,transcludeFn,jqCollection,originalReplaceDirective,preLinkFns,postLinkFns,previousCompileContext){previousCompileContext=previousCompileContext||{};for(var terminalPriority=-Number.MAX_VALUE,newScopeDirective=previousCompileContext.newScopeDirective,controllerDirectives=previousCompileContext.controllerDirectives,newIsolateScopeDirective=previousCompileContext.newIsolateScopeDirective,templateDirective=previousCompileContext.templateDirective,nonTlbTranscludeDirective=previousCompileContext.nonTlbTranscludeDirective,hasTranscludeDirective=!1,hasTemplate=!1,hasElementTranscludeDirective=previousCompileContext.hasElementTranscludeDirective,$compileNode=templateAttrs.$$element=jqLite(compileNode),directive,directiveName,$template,replaceDirective=originalReplaceDirective,childTranscludeFn=transcludeFn,linkFn,didScanForMultipleTransclusion=!1,mightHaveMultipleTransclusionError=!1,directiveValue,i=0,ii=directives.length;i<ii;i++){var attrStart=(directive=directives[i]).$$start,attrEnd=directive.$$end;if(attrStart&&($compileNode=groupScan(compileNode,attrStart,attrEnd)),$template=void 0,terminalPriority>directive.priority)break;if((directiveValue=directive.scope)&&(directive.templateUrl||(isObject(directiveValue)?(assertNoDuplicate("new/isolated scope",newIsolateScopeDirective||newScopeDirective,directive,$compileNode),newIsolateScopeDirective=directive):assertNoDuplicate("new/isolated scope",newIsolateScopeDirective,directive,$compileNode)),newScopeDirective=newScopeDirective||directive),directiveName=directive.name,!didScanForMultipleTransclusion&&(directive.replace&&(directive.templateUrl||directive.template)||directive.transclude&&!directive.$$tlb)){for(var candidateDirective,scanningIndex=i+1;candidateDirective=directives[scanningIndex++];)if(candidateDirective.transclude&&!candidateDirective.$$tlb||candidateDirective.replace&&(candidateDirective.templateUrl||candidateDirective.template)){mightHaveMultipleTransclusionError=!0;break}didScanForMultipleTransclusion=!0}if(!directive.templateUrl&&directive.controller&&(controllerDirectives=controllerDirectives||createMap(),assertNoDuplicate("'"+directiveName+"' controller",controllerDirectives[directiveName],directive,$compileNode),controllerDirectives[directiveName]=directive),directiveValue=directive.transclude)if(hasTranscludeDirective=!0,directive.$$tlb||(assertNoDuplicate("transclusion",nonTlbTranscludeDirective,directive,$compileNode),nonTlbTranscludeDirective=directive),"element"===directiveValue)hasElementTranscludeDirective=!0,terminalPriority=directive.priority,$template=$compileNode,$compileNode=templateAttrs.$$element=jqLite(compile.$$createComment(directiveName,templateAttrs[directiveName])),compileNode=$compileNode[0],replaceWith(jqCollection,sliceArgs($template),compileNode),$template[0].$$parentNode=$template[0].parentNode,childTranscludeFn=compilationGenerator(mightHaveMultipleTransclusionError,$template,transcludeFn,terminalPriority,replaceDirective&&replaceDirective.name,{nonTlbTranscludeDirective:nonTlbTranscludeDirective});else{var slots=createMap();if(isObject(directiveValue)){$template=[];var slotMap=createMap(),filledSlots=createMap();for(var slotName in forEach(directiveValue,(function(elementSelector,slotName){var optional="?"===elementSelector.charAt(0);elementSelector=optional?elementSelector.substring(1):elementSelector,slotMap[elementSelector]=slotName,slots[slotName]=null,filledSlots[slotName]=optional})),forEach($compileNode.contents(),(function(node){var slotName=slotMap[directiveNormalize(nodeName_(node))];slotName?(filledSlots[slotName]=!0,slots[slotName]=slots[slotName]||[],slots[slotName].push(node)):$template.push(node)})),forEach(filledSlots,(function(filled,slotName){if(!filled)throw $compileMinErr("reqslot","Required transclusion slot `{0}` was not filled.",slotName)})),slots)slots[slotName]&&(slots[slotName]=compilationGenerator(mightHaveMultipleTransclusionError,slots[slotName],transcludeFn))}else $template=jqLite(jqLiteClone(compileNode)).contents();$compileNode.empty(),(childTranscludeFn=compilationGenerator(mightHaveMultipleTransclusionError,$template,transcludeFn,void 0,void 0,{needsNewScope:directive.$$isolateScope||directive.$$newScope})).$$slots=slots}if(directive.template)if(hasTemplate=!0,assertNoDuplicate("template",templateDirective,directive,$compileNode),templateDirective=directive,directiveValue=isFunction(directive.template)?directive.template($compileNode,templateAttrs):directive.template,directiveValue=denormalizeTemplate(directiveValue),directive.replace){if(replaceDirective=directive,$template=jqLiteIsTextNode(directiveValue)?[]:removeComments(wrapTemplate(directive.templateNamespace,trim(directiveValue))),compileNode=$template[0],1!==$template.length||1!==compileNode.nodeType)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",directiveName,"");replaceWith(jqCollection,$compileNode,compileNode);var newTemplateAttrs={$attr:{}},templateDirectives=collectDirectives(compileNode,[],newTemplateAttrs),unprocessedDirectives=directives.splice(i+1,directives.length-(i+1));(newIsolateScopeDirective||newScopeDirective)&&markDirectiveScope(templateDirectives,newIsolateScopeDirective,newScopeDirective),directives=directives.concat(templateDirectives).concat(unprocessedDirectives),mergeTemplateAttributes(templateAttrs,newTemplateAttrs),ii=directives.length}else $compileNode.html(directiveValue);if(directive.templateUrl)hasTemplate=!0,assertNoDuplicate("template",templateDirective,directive,$compileNode),templateDirective=directive,directive.replace&&(replaceDirective=directive),nodeLinkFn=compileTemplateUrl(directives.splice(i,directives.length-i),$compileNode,templateAttrs,jqCollection,hasTranscludeDirective&&childTranscludeFn,preLinkFns,postLinkFns,{controllerDirectives:controllerDirectives,newScopeDirective:newScopeDirective!==directive&&newScopeDirective,newIsolateScopeDirective:newIsolateScopeDirective,templateDirective:templateDirective,nonTlbTranscludeDirective:nonTlbTranscludeDirective}),ii=directives.length;else if(directive.compile)try{linkFn=directive.compile($compileNode,templateAttrs,childTranscludeFn);var context=directive.$$originalDirective||directive;isFunction(linkFn)?addLinkFns(null,bind(context,linkFn),attrStart,attrEnd):linkFn&&addLinkFns(bind(context,linkFn.pre),bind(context,linkFn.post),attrStart,attrEnd)}catch(e){$exceptionHandler(e,startingTag($compileNode))}directive.terminal&&(nodeLinkFn.terminal=!0,terminalPriority=Math.max(terminalPriority,directive.priority))}return nodeLinkFn.scope=newScopeDirective&&!0===newScopeDirective.scope,nodeLinkFn.transcludeOnThisElement=hasTranscludeDirective,nodeLinkFn.templateOnThisElement=hasTemplate,nodeLinkFn.transclude=childTranscludeFn,previousCompileContext.hasElementTranscludeDirective=hasElementTranscludeDirective,nodeLinkFn;function addLinkFns(pre,post,attrStart,attrEnd){pre&&(attrStart&&(pre=groupElementsLinkFnWrapper(pre,attrStart,attrEnd)),pre.require=directive.require,pre.directiveName=directiveName,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(pre=cloneAndAnnotateFn(pre,{isolateScope:!0})),preLinkFns.push(pre)),post&&(attrStart&&(post=groupElementsLinkFnWrapper(post,attrStart,attrEnd)),post.require=directive.require,post.directiveName=directiveName,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(post=cloneAndAnnotateFn(post,{isolateScope:!0})),postLinkFns.push(post))}function nodeLinkFn(childLinkFn,scope,linkNode,$rootElement,boundTranscludeFn){var i,ii,linkFn,isolateScope,controllerScope,elementControllers,transcludeFn,$element,attrs,scopeBindingInfo;for(var name in compileNode===linkNode?(attrs=templateAttrs,$element=templateAttrs.$$element):attrs=new Attributes($element=jqLite(linkNode),templateAttrs),controllerScope=scope,newIsolateScopeDirective?isolateScope=scope.$new(!0):newScopeDirective&&(controllerScope=scope.$parent),boundTranscludeFn&&((transcludeFn=controllersBoundTransclude).$$boundTransclude=boundTranscludeFn,transcludeFn.isSlotFilled=function(slotName){return!!boundTranscludeFn.$$slots[slotName]}),controllerDirectives&&(elementControllers=setupControllers($element,attrs,transcludeFn,controllerDirectives,isolateScope,scope,newIsolateScopeDirective)),newIsolateScopeDirective&&(compile.$$addScopeInfo($element,isolateScope,!0,!(templateDirective&&(templateDirective===newIsolateScopeDirective||templateDirective===newIsolateScopeDirective.$$originalDirective))),compile.$$addScopeClass($element,!0),isolateScope.$$isolateBindings=newIsolateScopeDirective.$$isolateBindings,(scopeBindingInfo=initializeDirectiveBindings(scope,attrs,isolateScope,isolateScope.$$isolateBindings,newIsolateScopeDirective)).removeWatches&&isolateScope.$on("$destroy",scopeBindingInfo.removeWatches)),elementControllers){var controllerDirective=controllerDirectives[name],controller=elementControllers[name],bindings=controllerDirective.$$bindings.bindToController;if(preAssignBindingsEnabled){controller.bindingInfo=bindings?initializeDirectiveBindings(controllerScope,attrs,controller.instance,bindings,controllerDirective):{};var controllerResult=controller();controllerResult!==controller.instance&&(controller.instance=controllerResult,$element.data("$"+controllerDirective.name+"Controller",controllerResult),controller.bindingInfo.removeWatches&&controller.bindingInfo.removeWatches(),controller.bindingInfo=initializeDirectiveBindings(controllerScope,attrs,controller.instance,bindings,controllerDirective))}else controller.instance=controller(),$element.data("$"+controllerDirective.name+"Controller",controller.instance),controller.bindingInfo=initializeDirectiveBindings(controllerScope,attrs,controller.instance,bindings,controllerDirective)}for(forEach(controllerDirectives,(function(controllerDirective,name){var require=controllerDirective.require;controllerDirective.bindToController&&!isArray(require)&&isObject(require)&&extend(elementControllers[name].instance,getControllers(name,require,$element,elementControllers))})),forEach(elementControllers,(function(controller){var controllerInstance=controller.instance;if(isFunction(controllerInstance.$onChanges))try{controllerInstance.$onChanges(controller.bindingInfo.initialChanges)}catch(e){$exceptionHandler(e)}if(isFunction(controllerInstance.$onInit))try{controllerInstance.$onInit()}catch(e){$exceptionHandler(e)}isFunction(controllerInstance.$doCheck)&&(controllerScope.$watch((function(){controllerInstance.$doCheck()})),controllerInstance.$doCheck()),isFunction(controllerInstance.$onDestroy)&&controllerScope.$on("$destroy",(function callOnDestroyHook(){controllerInstance.$onDestroy()}))})),i=0,ii=preLinkFns.length;i<ii;i++)invokeLinkFn(linkFn=preLinkFns[i],linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn);var scopeToChild=scope;for(newIsolateScopeDirective&&(newIsolateScopeDirective.template||null===newIsolateScopeDirective.templateUrl)&&(scopeToChild=isolateScope),childLinkFn&&childLinkFn(scopeToChild,linkNode.childNodes,void 0,boundTranscludeFn),i=postLinkFns.length-1;i>=0;i--)invokeLinkFn(linkFn=postLinkFns[i],linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn);function controllersBoundTransclude(scope,cloneAttachFn,futureParentElement,slotName){var transcludeControllers;if(isScope(scope)||(slotName=futureParentElement,futureParentElement=cloneAttachFn,cloneAttachFn=scope,scope=void 0),hasElementTranscludeDirective&&(transcludeControllers=elementControllers),futureParentElement||(futureParentElement=hasElementTranscludeDirective?$element.parent():$element),!slotName)return boundTranscludeFn(scope,cloneAttachFn,transcludeControllers,futureParentElement,scopeToChild);var slotTranscludeFn=boundTranscludeFn.$$slots[slotName];if(slotTranscludeFn)return slotTranscludeFn(scope,cloneAttachFn,transcludeControllers,futureParentElement,scopeToChild);if(isUndefined(slotTranscludeFn))throw $compileMinErr("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',slotName,startingTag($element))}forEach(elementControllers,(function(controller){var controllerInstance=controller.instance;isFunction(controllerInstance.$postLink)&&controllerInstance.$postLink()}))}}function getControllers(directiveName,require,$element,elementControllers){var value;if(isString(require)){var match=require.match(REQUIRE_PREFIX_REGEXP),name=require.substring(match[0].length),inheritType=match[1]||match[3],optional="?"===match[2];if("^^"===inheritType?$element=$element.parent():value=(value=elementControllers&&elementControllers[name])&&value.instance,!value){var dataName="$"+name+"Controller";value=inheritType?$element.inheritedData(dataName):$element.data(dataName)}if(!value&&!optional)throw $compileMinErr("ctreq","Controller '{0}', required by directive '{1}', can't be found!",name,directiveName)}else if(isArray(require)){value=[];for(var i=0,ii=require.length;i<ii;i++)value[i]=getControllers(directiveName,require[i],$element,elementControllers)}else isObject(require)&&(value={},forEach(require,(function(controller,property){value[property]=getControllers(directiveName,controller,$element,elementControllers)})));return value||null}function setupControllers($element,attrs,transcludeFn,controllerDirectives,isolateScope,scope,newIsolateScopeDirective){var elementControllers=createMap();for(var controllerKey in controllerDirectives){var directive=controllerDirectives[controllerKey],locals={$scope:directive===newIsolateScopeDirective||directive.$$isolateScope?isolateScope:scope,$element:$element,$attrs:attrs,$transclude:transcludeFn},controller=directive.controller;"@"===controller&&(controller=attrs[directive.name]);var controllerInstance=$controller(controller,locals,!0,directive.controllerAs);elementControllers[directive.name]=controllerInstance,$element.data("$"+directive.name+"Controller",controllerInstance.instance)}return elementControllers}function markDirectiveScope(directives,isolateScope,newScope){for(var j=0,jj=directives.length;j<jj;j++)directives[j]=inherit(directives[j],{$$isolateScope:isolateScope,$$newScope:newScope})}function addDirective(tDirectives,name,location,maxPriority,ignoreDirective,startAttrName,endAttrName){if(name===ignoreDirective)return null;var match=null;if(hasDirectives.hasOwnProperty(name))for(var directive,directives=$injector.get(name+Suffix),i=0,ii=directives.length;i<ii;i++)if(directive=directives[i],(isUndefined(maxPriority)||maxPriority>directive.priority)&&-1!==directive.restrict.indexOf(location)){if(startAttrName&&(directive=inherit(directive,{$$start:startAttrName,$$end:endAttrName})),!directive.$$bindings){var bindings=directive.$$bindings=parseDirectiveBindings(directive,directive.name);isObject(bindings.isolateScope)&&(directive.$$isolateBindings=bindings.isolateScope)}tDirectives.push(directive),match=directive}return match}function directiveIsMultiElement(name){if(hasDirectives.hasOwnProperty(name))for(var directive,directives=$injector.get(name+Suffix),i=0,ii=directives.length;i<ii;i++)if((directive=directives[i]).multiElement)return!0;return!1}function mergeTemplateAttributes(dst,src){var srcAttr=src.$attr,dstAttr=dst.$attr;forEach(dst,(function(value,key){"$"!==key.charAt(0)&&(src[key]&&src[key]!==value&&(value.length?value+=("style"===key?";":" ")+src[key]:value=src[key]),dst.$set(key,value,!0,srcAttr[key]))})),forEach(src,(function(value,key){dst.hasOwnProperty(key)||"$"===key.charAt(0)||(dst[key]=value,"class"!==key&&"style"!==key&&(dstAttr[key]=srcAttr[key]))}))}function compileTemplateUrl(directives,$compileNode,tAttrs,$rootElement,childTranscludeFn,preLinkFns,postLinkFns,previousCompileContext){var linkQueue=[],afterTemplateNodeLinkFn,afterTemplateChildLinkFn,beforeTemplateCompileNode=$compileNode[0],origAsyncDirective=directives.shift(),derivedSyncDirective=inherit(origAsyncDirective,{templateUrl:null,transclude:null,replace:null,$$originalDirective:origAsyncDirective}),templateUrl=isFunction(origAsyncDirective.templateUrl)?origAsyncDirective.templateUrl($compileNode,tAttrs):origAsyncDirective.templateUrl,templateNamespace=origAsyncDirective.templateNamespace;return $compileNode.empty(),$templateRequest(templateUrl).then((function(content){var compileNode,tempTemplateAttrs,$template,childBoundTranscludeFn;if(content=denormalizeTemplate(content),origAsyncDirective.replace){if($template=jqLiteIsTextNode(content)?[]:removeComments(wrapTemplate(templateNamespace,trim(content))),compileNode=$template[0],1!==$template.length||1!==compileNode.nodeType)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",origAsyncDirective.name,templateUrl);tempTemplateAttrs={$attr:{}},replaceWith($rootElement,$compileNode,compileNode);var templateDirectives=collectDirectives(compileNode,[],tempTemplateAttrs);isObject(origAsyncDirective.scope)&&markDirectiveScope(templateDirectives,!0),directives=templateDirectives.concat(directives),mergeTemplateAttributes(tAttrs,tempTemplateAttrs)}else compileNode=beforeTemplateCompileNode,$compileNode.html(content);for(directives.unshift(derivedSyncDirective),afterTemplateNodeLinkFn=applyDirectivesToNode(directives,compileNode,tAttrs,childTranscludeFn,$compileNode,origAsyncDirective,preLinkFns,postLinkFns,previousCompileContext),forEach($rootElement,(function(node,i){node===compileNode&&($rootElement[i]=$compileNode[0])})),afterTemplateChildLinkFn=compileNodes($compileNode[0].childNodes,childTranscludeFn);linkQueue.length;){var scope=linkQueue.shift(),beforeTemplateLinkNode=linkQueue.shift(),linkRootElement=linkQueue.shift(),boundTranscludeFn=linkQueue.shift(),linkNode=$compileNode[0];if(!scope.$$destroyed){if(beforeTemplateLinkNode!==beforeTemplateCompileNode){var oldClasses=beforeTemplateLinkNode.className;previousCompileContext.hasElementTranscludeDirective&&origAsyncDirective.replace||(linkNode=jqLiteClone(compileNode)),replaceWith(linkRootElement,jqLite(beforeTemplateLinkNode),linkNode),safeAddClass(jqLite(linkNode),oldClasses)}childBoundTranscludeFn=afterTemplateNodeLinkFn.transcludeOnThisElement?createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn):boundTranscludeFn,afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,linkNode,$rootElement,childBoundTranscludeFn)}}linkQueue=null})).catch((function(error){isError(error)&&$exceptionHandler(error)})),function delayedNodeLinkFn(ignoreChildLinkFn,scope,node,rootElement,boundTranscludeFn){var childBoundTranscludeFn=boundTranscludeFn;scope.$$destroyed||(linkQueue?linkQueue.push(scope,node,rootElement,childBoundTranscludeFn):(afterTemplateNodeLinkFn.transcludeOnThisElement&&(childBoundTranscludeFn=createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn)),afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,node,rootElement,childBoundTranscludeFn)))}}function byPriority(a,b){var diff=b.priority-a.priority;return 0!==diff?diff:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function assertNoDuplicate(what,previousDirective,directive,element){function wrapModuleNameIfDefined(moduleName){return moduleName?" (module: "+moduleName+")":""}if(previousDirective)throw $compileMinErr("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",previousDirective.name,wrapModuleNameIfDefined(previousDirective.$$moduleName),directive.name,wrapModuleNameIfDefined(directive.$$moduleName),what,startingTag(element))}function addTextInterpolateDirective(directives,text){var interpolateFn=$interpolate(text,!0);interpolateFn&&directives.push({priority:0,compile:function textInterpolateCompileFn(templateNode){var templateNodeParent=templateNode.parent(),hasCompileParent=!!templateNodeParent.length;return hasCompileParent&&compile.$$addBindingClass(templateNodeParent),function textInterpolateLinkFn(scope,node){var parent=node.parent();hasCompileParent||compile.$$addBindingClass(parent),compile.$$addBindingInfo(parent,interpolateFn.expressions),scope.$watch(interpolateFn,(function interpolateFnWatchAction(value){node[0].nodeValue=value}))}}})}function wrapTemplate(type,template){switch(type=lowercase(type||"html")){case"svg":case"math":var wrapper=window.document.createElement("div");return wrapper.innerHTML="<"+type+">"+template+"</"+type+">",wrapper.childNodes[0].childNodes;default:return template}}function getTrustedContext(node,attrNormalizedName){if("srcdoc"===attrNormalizedName)return $sce.HTML;var tag=nodeName_(node);if("src"===attrNormalizedName||"ngSrc"===attrNormalizedName){if(-1===["img","video","audio","source","track"].indexOf(tag))return $sce.RESOURCE_URL}else if("xlinkHref"===attrNormalizedName||"form"===tag&&"action"===attrNormalizedName||"link"===tag&&"href"===attrNormalizedName)return $sce.RESOURCE_URL}function addAttrInterpolateDirective(node,directives,value,name,isNgAttr){var trustedContext=getTrustedContext(node,name),mustHaveExpression=!isNgAttr,allOrNothing=ALL_OR_NOTHING_ATTRS[name]||isNgAttr,interpolateFn=$interpolate(value,mustHaveExpression,trustedContext,allOrNothing);if(interpolateFn){if("multiple"===name&&"select"===nodeName_(node))throw $compileMinErr("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",startingTag(node));if(EVENT_HANDLER_ATTR_REGEXP.test(name))throw $compileMinErr("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");directives.push({priority:100,compile:function(){return{pre:function attrInterpolatePreLinkFn(scope,element,attr){var $$observers=attr.$$observers||(attr.$$observers=createMap()),newValue=attr[name];newValue!==value&&(interpolateFn=newValue&&$interpolate(newValue,!0,trustedContext,allOrNothing),value=newValue),interpolateFn&&(attr[name]=interpolateFn(scope),($$observers[name]||($$observers[name]=[])).$$inter=!0,(attr.$$observers&&attr.$$observers[name].$$scope||scope).$watch(interpolateFn,(function interpolateFnWatchAction(newValue,oldValue){"class"===name&&newValue!==oldValue?attr.$updateClass(newValue,oldValue):attr.$set(name,newValue)})))}}}})}}function replaceWith($rootElement,elementsToRemove,newNode){var firstElementToRemove=elementsToRemove[0],removeCount=elementsToRemove.length,parent=firstElementToRemove.parentNode,i,ii;if($rootElement)for(i=0,ii=$rootElement.length;i<ii;i++)if($rootElement[i]===firstElementToRemove){$rootElement[i++]=newNode;for(var j=i,j2=j+removeCount-1,jj=$rootElement.length;j<jj;j++,j2++)j2<jj?$rootElement[j]=$rootElement[j2]:delete $rootElement[j];$rootElement.length-=removeCount-1,$rootElement.context===firstElementToRemove&&($rootElement.context=newNode);break}parent&&parent.replaceChild(newNode,firstElementToRemove);var fragment=window.document.createDocumentFragment();for(i=0;i<removeCount;i++)fragment.appendChild(elementsToRemove[i]);for(jqLite.hasData(firstElementToRemove)&&(jqLite.data(newNode,jqLite.data(firstElementToRemove)),jqLite(firstElementToRemove).off("$destroy")),jqLite.cleanData(fragment.querySelectorAll("*")),i=1;i<removeCount;i++)delete elementsToRemove[i];elementsToRemove[0]=newNode,elementsToRemove.length=1}function cloneAndAnnotateFn(fn,annotation){return extend((function(){return fn.apply(null,arguments)}),fn,annotation)}function invokeLinkFn(linkFn,scope,$element,attrs,controllers,transcludeFn){try{linkFn(scope,$element,attrs,controllers,transcludeFn)}catch(e){$exceptionHandler(e,startingTag($element))}}function strictBindingsCheck(attrName,directiveName){if(strictComponentBindingsEnabled)throw $compileMinErr("missingattr","Attribute '{0}' of '{1}' is non-optional and must be set!",attrName,directiveName)}function initializeDirectiveBindings(scope,attrs,destination,bindings,directive){var removeWatchCollection=[],initialChanges={},changes;function recordChanges(key,currentValue,previousValue){isFunction(destination.$onChanges)&&!simpleCompare(currentValue,previousValue)&&(onChangesQueue||(scope.$$postDigest(flushOnChangesQueue),onChangesQueue=[]),changes||(changes={},onChangesQueue.push(triggerOnChangesHook)),changes[key]&&(previousValue=changes[key].previousValue),changes[key]=new SimpleChange(previousValue,currentValue))}function triggerOnChangesHook(){destination.$onChanges(changes),changes=void 0}return forEach(bindings,(function initializeBinding(definition,scopeName){var attrName=definition.attrName,optional=definition.optional,mode,lastValue,parentGet,parentSet,compare,removeWatch;switch(definition.mode){case"@":optional||hasOwnProperty.call(attrs,attrName)||(strictBindingsCheck(attrName,directive.name),destination[scopeName]=attrs[attrName]=void 0),removeWatch=attrs.$observe(attrName,(function(value){if(isString(value)||isBoolean(value)){var oldValue=destination[scopeName];recordChanges(scopeName,value,oldValue),destination[scopeName]=value}})),attrs.$$observers[attrName].$$scope=scope,isString(lastValue=attrs[attrName])?destination[scopeName]=$interpolate(lastValue)(scope):isBoolean(lastValue)&&(destination[scopeName]=lastValue),initialChanges[scopeName]=new SimpleChange(_UNINITIALIZED_VALUE,destination[scopeName]),removeWatchCollection.push(removeWatch);break;case"=":if(!hasOwnProperty.call(attrs,attrName)){if(optional)break;strictBindingsCheck(attrName,directive.name),attrs[attrName]=void 0}if(optional&&!attrs[attrName])break;parentGet=$parse(attrs[attrName]),compare=parentGet.literal?equals:simpleCompare,parentSet=parentGet.assign||function(){throw lastValue=destination[scopeName]=parentGet(scope),$compileMinErr("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",attrs[attrName],attrName,directive.name)},lastValue=destination[scopeName]=parentGet(scope);var parentValueWatch=function parentValueWatch(parentValue){return compare(parentValue,destination[scopeName])||(compare(parentValue,lastValue)?parentSet(scope,parentValue=destination[scopeName]):destination[scopeName]=parentValue),lastValue=parentValue};parentValueWatch.$stateful=!0,removeWatch=definition.collection?scope.$watchCollection(attrs[attrName],parentValueWatch):scope.$watch($parse(attrs[attrName],parentValueWatch),null,parentGet.literal),removeWatchCollection.push(removeWatch);break;case"<":if(!hasOwnProperty.call(attrs,attrName)){if(optional)break;strictBindingsCheck(attrName,directive.name),attrs[attrName]=void 0}if(optional&&!attrs[attrName])break;var deepWatch=(parentGet=$parse(attrs[attrName])).literal,initialValue=destination[scopeName]=parentGet(scope);initialChanges[scopeName]=new SimpleChange(_UNINITIALIZED_VALUE,destination[scopeName]),removeWatch=scope.$watch(parentGet,(function parentValueWatchAction(newValue,oldValue){if(oldValue===newValue){if(oldValue===initialValue||deepWatch&&equals(oldValue,initialValue))return;oldValue=initialValue}recordChanges(scopeName,newValue,oldValue),destination[scopeName]=newValue}),deepWatch),removeWatchCollection.push(removeWatch);break;case"&":if(optional||hasOwnProperty.call(attrs,attrName)||strictBindingsCheck(attrName,directive.name),(parentGet=attrs.hasOwnProperty(attrName)?$parse(attrs[attrName]):noop)===noop&&optional)break;destination[scopeName]=function(locals){return parentGet(scope,locals)}}})),{initialChanges:initialChanges,removeWatches:removeWatchCollection.length&&function removeWatches(){for(var i=0,ii=removeWatchCollection.length;i<ii;++i)removeWatchCollection[i]()}}}}]}function SimpleChange(previous,current){this.previousValue=previous,this.currentValue=current}$CompileProvider.$inject=["$provide","$$sanitizeUriProvider"],SimpleChange.prototype.isFirstChange=function(){return this.previousValue===_UNINITIALIZED_VALUE};var PREFIX_REGEXP=/^((?:x|data)[:\-_])/i,SPECIAL_CHARS_REGEXP=/[:\-_]+(.)/g;function directiveNormalize(name){return name.replace(PREFIX_REGEXP,"").replace(SPECIAL_CHARS_REGEXP,fnCamelCaseReplace)}function nodesetLinkingFn(scope,nodeList,rootElement,boundTranscludeFn){}function directiveLinkingFn(nodesetLinkingFn,scope,node,rootElement,boundTranscludeFn){}function tokenDifference(str1,str2){var values="",tokens1=str1.split(/\s+/),tokens2=str2.split(/\s+/);outer:for(var i=0;i<tokens1.length;i++){for(var token=tokens1[i],j=0;j<tokens2.length;j++)if(token===tokens2[j])continue outer;values+=(values.length>0?" ":"")+token}return values}function removeComments(jqNodes){var i=(jqNodes=jqLite(jqNodes)).length;if(i<=1)return jqNodes;for(;i--;){var node=jqNodes[i];(8===node.nodeType||node.nodeType===NODE_TYPE_TEXT&&""===node.nodeValue.trim())&&splice.call(jqNodes,i,1)}return jqNodes}var $controllerMinErr=minErr("$controller"),CNTRL_REG=/^(\S+)(\s+as\s+([\w$]+))?$/;function identifierForController(controller,ident){if(ident&&isString(ident))return ident;if(isString(controller)){var match=CNTRL_REG.exec(controller);if(match)return match[3]}}function $ControllerProvider(){var controllers={},globals=!1;this.has=function(name){return controllers.hasOwnProperty(name)},this.register=function(name,constructor){assertNotHasOwnProperty(name,"controller"),isObject(name)?extend(controllers,name):controllers[name]=constructor},this.allowGlobals=function(){globals=!0},this.$get=["$injector","$window",function($injector,$window){return function $controller(expression,locals,later,ident){var instance,match,constructor,identifier;if(later=!0===later,ident&&isString(ident)&&(identifier=ident),isString(expression)){if(!(match=expression.match(CNTRL_REG)))throw $controllerMinErr("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",expression);if(constructor=match[1],identifier=identifier||match[3],!(expression=controllers.hasOwnProperty(constructor)?controllers[constructor]:getter(locals.$scope,constructor,!0)||(globals?getter($window,constructor,!0):void 0)))throw $controllerMinErr("ctrlreg","The controller with the name '{0}' is not registered.",constructor);assertArgFn(expression,constructor,!0)}if(later){var controllerPrototype=(isArray(expression)?expression[expression.length-1]:expression).prototype;return instance=Object.create(controllerPrototype||null),identifier&&addIdentifier(locals,identifier,instance,constructor||expression.name),extend((function $controllerInit(){var result=$injector.invoke(expression,instance,locals,constructor);return result!==instance&&(isObject(result)||isFunction(result))&&(instance=result,identifier&&addIdentifier(locals,identifier,instance,constructor||expression.name)),instance}),{instance:instance,identifier:identifier})}return instance=$injector.instantiate(expression,locals,constructor),identifier&&addIdentifier(locals,identifier,instance,constructor||expression.name),instance};function addIdentifier(locals,identifier,instance,name){if(!locals||!isObject(locals.$scope))throw minErr("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",name,identifier);locals.$scope[identifier]=instance}}]}function $DocumentProvider(){this.$get=["$window",function(window){return jqLite(window.document)}]}function $$IsDocumentHiddenProvider(){this.$get=["$document","$rootScope",function($document,$rootScope){var doc=$document[0],hidden=doc&&doc.hidden;function changeListener(){hidden=doc.hidden}return $document.on("visibilitychange",changeListener),$rootScope.$on("$destroy",(function(){$document.off("visibilitychange",changeListener)})),function(){return hidden}}]}function $ExceptionHandlerProvider(){this.$get=["$log",function($log){return function(exception,cause){$log.error.apply($log,arguments)}}]}var $$ForceReflowProvider=function(){this.$get=["$document",function($document){return function(domNode){return domNode?!domNode.nodeType&&domNode instanceof jqLite&&(domNode=domNode[0]):domNode=$document[0].body,domNode.offsetWidth+1}}]},APPLICATION_JSON="application/json",CONTENT_TYPE_APPLICATION_JSON={"Content-Type":"application/json;charset=utf-8"},JSON_START=/^\[|^\{(?!\{)/,JSON_ENDS={"[":/]$/,"{":/}$/},JSON_PROTECTION_PREFIX=/^\)]\}',?\n/,$httpMinErr=minErr("$http");function serializeValue(v){return isObject(v)?isDate(v)?v.toISOString():toJson(v):v}function $HttpParamSerializerProvider(){this.$get=function(){return function ngParamSerializer(params){if(!params)return"";var parts=[];return forEachSorted(params,(function(value,key){null===value||isUndefined(value)||isFunction(value)||(isArray(value)?forEach(value,(function(v){parts.push(encodeUriQuery(key)+"="+encodeUriQuery(serializeValue(v)))})):parts.push(encodeUriQuery(key)+"="+encodeUriQuery(serializeValue(value))))})),parts.join("&")}}}function $HttpParamSerializerJQLikeProvider(){this.$get=function(){return function jQueryLikeParamSerializer(params){if(!params)return"";var parts=[];return serialize(params,"",!0),parts.join("&");function serialize(toSerialize,prefix,topLevel){null===toSerialize||isUndefined(toSerialize)||(isArray(toSerialize)?forEach(toSerialize,(function(value,index){serialize(value,prefix+"["+(isObject(value)?index:"")+"]")})):isObject(toSerialize)&&!isDate(toSerialize)?forEachSorted(toSerialize,(function(value,key){serialize(value,prefix+(topLevel?"":"[")+key+(topLevel?"":"]"))})):parts.push(encodeUriQuery(prefix)+"="+encodeUriQuery(serializeValue(toSerialize))))}}}}function defaultHttpResponseTransform(data,headers){if(isString(data)){var tempData=data.replace(JSON_PROTECTION_PREFIX,"").trim();if(tempData){var contentType=headers("Content-Type"),hasJsonContentType=contentType&&0===contentType.indexOf(APPLICATION_JSON);if(hasJsonContentType||isJsonLike(tempData))try{data=fromJson(tempData)}catch(e){if(!hasJsonContentType)return data;throw $httpMinErr("baddata",'Data must be a valid JSON object. Received: "{0}". Parse error: "{1}"',data,e)}}}return data}function isJsonLike(str){var jsonStart=str.match(JSON_START);return jsonStart&&JSON_ENDS[jsonStart[0]].test(str)}function parseHeaders(headers){var parsed=createMap(),i;function fillInParsed(key,val){key&&(parsed[key]=parsed[key]?parsed[key]+", "+val:val)}return isString(headers)?forEach(headers.split("\n"),(function(line){i=line.indexOf(":"),fillInParsed(lowercase(trim(line.substr(0,i))),trim(line.substr(i+1)))})):isObject(headers)&&forEach(headers,(function(headerVal,headerKey){fillInParsed(lowercase(headerKey),trim(headerVal))})),parsed}function headersGetter(headers){var headersObj;return function(name){if(headersObj||(headersObj=parseHeaders(headers)),name){var value=headersObj[lowercase(name)];return void 0===value&&(value=null),value}return headersObj}}function transformData(data,headers,status,fns){return isFunction(fns)?fns(data,headers,status):(forEach(fns,(function(fn){data=fn(data,headers,status)})),data)}function isSuccess(status){return 200<=status&&status<300}function $HttpProvider(){var defaults=this.defaults={transformResponse:[defaultHttpResponseTransform],transformRequest:[function(d){return!isObject(d)||isFile(d)||isBlob(d)||isFormData(d)?d:toJson(d)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),put:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),patch:shallowCopy(CONTENT_TYPE_APPLICATION_JSON)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},useApplyAsync=!1;this.useApplyAsync=function(value){return isDefined(value)?(useApplyAsync=!!value,this):useApplyAsync};var interceptorFactories=this.interceptors=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function($browser,$httpBackend,$$cookieReader,$cacheFactory,$rootScope,$q,$injector,$sce){var defaultCache=$cacheFactory("$http");defaults.paramSerializer=isString(defaults.paramSerializer)?$injector.get(defaults.paramSerializer):defaults.paramSerializer;var reversedInterceptors=[];function $http(requestConfig){if(!isObject(requestConfig))throw minErr("$http")("badreq","Http request configuration must be an object.  Received: {0}",requestConfig);if(!isString($sce.valueOf(requestConfig.url)))throw minErr("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",requestConfig.url);var config=extend({method:"get",transformRequest:defaults.transformRequest,transformResponse:defaults.transformResponse,paramSerializer:defaults.paramSerializer,jsonpCallbackParam:defaults.jsonpCallbackParam},requestConfig);config.headers=mergeHeaders(requestConfig),config.method=uppercase(config.method),config.paramSerializer=isString(config.paramSerializer)?$injector.get(config.paramSerializer):config.paramSerializer,$browser.$$incOutstandingRequestCount();var requestInterceptors=[],responseInterceptors=[],promise=$q.resolve(config);return forEach(reversedInterceptors,(function(interceptor){(interceptor.request||interceptor.requestError)&&requestInterceptors.unshift(interceptor.request,interceptor.requestError),(interceptor.response||interceptor.responseError)&&responseInterceptors.push(interceptor.response,interceptor.responseError)})),promise=chainInterceptors(promise,requestInterceptors),promise=(promise=chainInterceptors(promise=promise.then(serverRequest),responseInterceptors)).finally(completeOutstandingRequest);function chainInterceptors(promise,interceptors){for(var i=0,ii=interceptors.length;i<ii;){var thenFn=interceptors[i++],rejectFn=interceptors[i++];promise=promise.then(thenFn,rejectFn)}return interceptors.length=0,promise}function completeOutstandingRequest(){$browser.$$completeOutstandingRequest(noop)}function executeHeaderFns(headers,config){var headerContent,processedHeaders={};return forEach(headers,(function(headerFn,header){isFunction(headerFn)?null!=(headerContent=headerFn(config))&&(processedHeaders[header]=headerContent):processedHeaders[header]=headerFn})),processedHeaders}function mergeHeaders(config){var defHeaders=defaults.headers,reqHeaders=extend({},config.headers),defHeaderName,lowercaseDefHeaderName,reqHeaderName;defHeaders=extend({},defHeaders.common,defHeaders[lowercase(config.method)]);defaultHeadersIteration:for(defHeaderName in defHeaders){for(reqHeaderName in lowercaseDefHeaderName=lowercase(defHeaderName),reqHeaders)if(lowercase(reqHeaderName)===lowercaseDefHeaderName)continue defaultHeadersIteration;reqHeaders[defHeaderName]=defHeaders[defHeaderName]}return executeHeaderFns(reqHeaders,shallowCopy(config))}function serverRequest(config){var headers=config.headers,reqData=transformData(config.data,headersGetter(headers),void 0,config.transformRequest);return isUndefined(reqData)&&forEach(headers,(function(value,header){"content-type"===lowercase(header)&&delete headers[header]})),isUndefined(config.withCredentials)&&!isUndefined(defaults.withCredentials)&&(config.withCredentials=defaults.withCredentials),sendReq(config,reqData).then(transformResponse,transformResponse)}function transformResponse(response){var resp=extend({},response);return resp.data=transformData(response.data,response.headers,response.status,config.transformResponse),isSuccess(response.status)?resp:$q.reject(resp)}}return forEach(interceptorFactories,(function(interceptorFactory){reversedInterceptors.unshift(isString(interceptorFactory)?$injector.get(interceptorFactory):$injector.invoke(interceptorFactory))})),$http.pendingRequests=[],createShortMethods("get","delete","head","jsonp"),createShortMethodsWithData("post","put","patch"),$http.defaults=defaults,$http;function createShortMethods(names){forEach(arguments,(function(name){$http[name]=function(url,config){return $http(extend({},config||{},{method:name,url:url}))}}))}function createShortMethodsWithData(name){forEach(arguments,(function(name){$http[name]=function(url,data,config){return $http(extend({},config||{},{method:name,url:url,data:data}))}}))}function sendReq(config,reqData){var deferred=$q.defer(),promise=deferred.promise,cache,cachedResp,reqHeaders=config.headers,isJsonp="jsonp"===lowercase(config.method),url=config.url;if(isJsonp?url=$sce.getTrustedResourceUrl(url):isString(url)||(url=$sce.valueOf(url)),url=buildUrl(url,config.paramSerializer(config.params)),isJsonp&&(url=sanitizeJsonpCallbackParam(url,config.jsonpCallbackParam)),$http.pendingRequests.push(config),promise.then(removePendingReq,removePendingReq),!config.cache&&!defaults.cache||!1===config.cache||"GET"!==config.method&&"JSONP"!==config.method||(cache=isObject(config.cache)?config.cache:isObject(defaults.cache)?defaults.cache:defaultCache),cache&&(isDefined(cachedResp=cache.get(url))?isPromiseLike(cachedResp)?cachedResp.then(resolvePromiseWithResult,resolvePromiseWithResult):isArray(cachedResp)?resolvePromise(cachedResp[1],cachedResp[0],shallowCopy(cachedResp[2]),cachedResp[3],cachedResp[4]):resolvePromise(cachedResp,200,{},"OK","complete"):cache.put(url,promise)),isUndefined(cachedResp)){var xsrfValue=urlIsSameOrigin(config.url)?$$cookieReader()[config.xsrfCookieName||defaults.xsrfCookieName]:void 0;xsrfValue&&(reqHeaders[config.xsrfHeaderName||defaults.xsrfHeaderName]=xsrfValue),$httpBackend(config.method,url,reqData,done,reqHeaders,config.timeout,config.withCredentials,config.responseType,createApplyHandlers(config.eventHandlers),createApplyHandlers(config.uploadEventHandlers))}return promise;function createApplyHandlers(eventHandlers){if(eventHandlers){var applyHandlers={};return forEach(eventHandlers,(function(eventHandler,key){applyHandlers[key]=function(event){function callEventHandler(){eventHandler(event)}useApplyAsync?$rootScope.$applyAsync(callEventHandler):$rootScope.$$phase?callEventHandler():$rootScope.$apply(callEventHandler)}})),applyHandlers}}function done(status,response,headersString,statusText,xhrStatus){function resolveHttpPromise(){resolvePromise(response,status,headersString,statusText,xhrStatus)}cache&&(isSuccess(status)?cache.put(url,[status,response,parseHeaders(headersString),statusText,xhrStatus]):cache.remove(url)),useApplyAsync?$rootScope.$applyAsync(resolveHttpPromise):(resolveHttpPromise(),$rootScope.$$phase||$rootScope.$apply())}function resolvePromise(response,status,headers,statusText,xhrStatus){(isSuccess(status=status>=-1?status:0)?deferred.resolve:deferred.reject)({data:response,status:status,headers:headersGetter(headers),config:config,statusText:statusText,xhrStatus:xhrStatus})}function resolvePromiseWithResult(result){resolvePromise(result.data,result.status,shallowCopy(result.headers()),result.statusText,result.xhrStatus)}function removePendingReq(){var idx=$http.pendingRequests.indexOf(config);-1!==idx&&$http.pendingRequests.splice(idx,1)}}function buildUrl(url,serializedParams){return serializedParams.length>0&&(url+=(-1===url.indexOf("?")?"?":"&")+serializedParams),url}function sanitizeJsonpCallbackParam(url,key){if(/[&?][^=]+=JSON_CALLBACK/.test(url))throw $httpMinErr("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',url);var callbackParamRegex;if(new RegExp("[&?]"+key+"=").test(url))throw $httpMinErr("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',key,url);return url+=(-1===url.indexOf("?")?"?":"&")+key+"=JSON_CALLBACK"}}]}function $xhrFactoryProvider(){this.$get=function(){return function createXhr(){return new window.XMLHttpRequest}}}function $HttpBackendProvider(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function($browser,$jsonpCallbacks,$document,$xhrFactory){return createHttpBackend($browser,$xhrFactory,$browser.defer,$jsonpCallbacks,$document[0])}]}function createHttpBackend($browser,createXhr,$browserDefer,callbacks,rawDocument){return function(method,url,post,callback,headers,timeout,withCredentials,responseType,eventHandlers,uploadEventHandlers){if(url=url||$browser.url(),"jsonp"===lowercase(method))var callbackPath=callbacks.createCallback(url),jsonpDone=jsonpReq(url,callbackPath,(function(status,text){var response=200===status&&callbacks.getResponse(callbackPath);completeRequest(callback,status,response,"",text,"complete"),callbacks.removeCallback(callbackPath)}));else{var xhr=createXhr(method,url);xhr.open(method,url,!0),forEach(headers,(function(value,key){isDefined(value)&&xhr.setRequestHeader(key,value)})),xhr.onload=function requestLoaded(){var statusText=xhr.statusText||"",response="response"in xhr?xhr.response:xhr.responseText,status=1223===xhr.status?204:xhr.status;0===status&&(status=response?200:"file"===urlResolve(url).protocol?404:0),completeRequest(callback,status,response,xhr.getAllResponseHeaders(),statusText,"complete")};var requestError=function(){completeRequest(callback,-1,null,null,"","error")},requestAborted=function(){completeRequest(callback,-1,null,null,"","abort")},requestTimeout=function(){completeRequest(callback,-1,null,null,"","timeout")};if(xhr.onerror=requestError,xhr.onabort=requestAborted,xhr.ontimeout=requestTimeout,forEach(eventHandlers,(function(value,key){xhr.addEventListener(key,value)})),forEach(uploadEventHandlers,(function(value,key){xhr.upload.addEventListener(key,value)})),withCredentials&&(xhr.withCredentials=!0),responseType)try{xhr.responseType=responseType}catch(e){if("json"!==responseType)throw e}xhr.send(isUndefined(post)?null:post)}if(timeout>0)var timeoutId=$browserDefer(timeoutRequest,timeout);else isPromiseLike(timeout)&&timeout.then(timeoutRequest);function timeoutRequest(){jsonpDone&&jsonpDone(),xhr&&xhr.abort()}function completeRequest(callback,status,response,headersString,statusText,xhrStatus){isDefined(timeoutId)&&$browserDefer.cancel(timeoutId),jsonpDone=xhr=null,callback(status,response,headersString,statusText,xhrStatus)}};function jsonpReq(url,callbackPath,done){url=url.replace("JSON_CALLBACK",callbackPath);var script=rawDocument.createElement("script"),callback=null;return script.type="text/javascript",script.src=url,script.async=!0,callback=function(event){script.removeEventListener("load",callback),script.removeEventListener("error",callback),rawDocument.body.removeChild(script),script=null;var status=-1,text="unknown";event&&("load"!==event.type||callbacks.wasCalled(callbackPath)||(event={type:"error"}),text=event.type,status="error"===event.type?404:200),done&&done(status,text)},script.addEventListener("load",callback),script.addEventListener("error",callback),rawDocument.body.appendChild(script),callback}}var $interpolateMinErr=angular.$interpolateMinErr=minErr("$interpolate");function $InterpolateProvider(){var startSymbol="{{",endSymbol="}}";this.startSymbol=function(value){return value?(startSymbol=value,this):startSymbol},this.endSymbol=function(value){return value?(endSymbol=value,this):endSymbol},this.$get=["$parse","$exceptionHandler","$sce",function($parse,$exceptionHandler,$sce){var startSymbolLength=startSymbol.length,endSymbolLength=endSymbol.length,escapedStartRegexp=new RegExp(startSymbol.replace(/./g,escape),"g"),escapedEndRegexp=new RegExp(endSymbol.replace(/./g,escape),"g");function escape(ch){return"\\\\\\"+ch}function unescapeText(text){return text.replace(escapedStartRegexp,startSymbol).replace(escapedEndRegexp,endSymbol)}function constantWatchDelegate(scope,listener,objectEquality,constantInterp){var unwatch=scope.$watch((function constantInterpolateWatch(scope){return unwatch(),constantInterp(scope)}),listener,objectEquality);return unwatch}function $interpolate(text,mustHaveExpression,trustedContext,allOrNothing){if(!text.length||-1===text.indexOf(startSymbol)){var constantInterp,unescapedText;if(!mustHaveExpression)(constantInterp=valueFn(unescapeText(text))).exp=text,constantInterp.expressions=[],constantInterp.$$watchDelegate=constantWatchDelegate;return constantInterp}allOrNothing=!!allOrNothing;for(var startIndex,endIndex,index=0,expressions=[],parseFns=[],textLength=text.length,exp,concat=[],expressionPositions=[];index<textLength;){if(-1===(startIndex=text.indexOf(startSymbol,index))||-1===(endIndex=text.indexOf(endSymbol,startIndex+startSymbolLength))){index!==textLength&&concat.push(unescapeText(text.substring(index)));break}index!==startIndex&&concat.push(unescapeText(text.substring(index,startIndex))),exp=text.substring(startIndex+startSymbolLength,endIndex),expressions.push(exp),parseFns.push($parse(exp,parseStringifyInterceptor)),index=endIndex+endSymbolLength,expressionPositions.push(concat.length),concat.push("")}if(trustedContext&&concat.length>1&&$interpolateMinErr.throwNoconcat(text),!mustHaveExpression||expressions.length){var compute=function(values){for(var i=0,ii=expressions.length;i<ii;i++){if(allOrNothing&&isUndefined(values[i]))return;concat[expressionPositions[i]]=values[i]}return concat.join("")},getValue=function(value){return trustedContext?$sce.getTrusted(trustedContext,value):$sce.valueOf(value)};return extend((function interpolationFn(context){var i=0,ii=expressions.length,values=new Array(ii);try{for(;i<ii;i++)values[i]=parseFns[i](context);return compute(values)}catch(err){$exceptionHandler($interpolateMinErr.interr(text,err))}}),{exp:text,expressions:expressions,$$watchDelegate:function(scope,listener){var lastValue;return scope.$watchGroup(parseFns,(function interpolateFnWatcher(values,oldValues){var currValue=compute(values);isFunction(listener)&&listener.call(this,currValue,values!==oldValues?lastValue:currValue,scope),lastValue=currValue}))}})}function parseStringifyInterceptor(value){try{return value=getValue(value),allOrNothing&&!isDefined(value)?value:stringify(value)}catch(err){$exceptionHandler($interpolateMinErr.interr(text,err))}}}return $interpolate.startSymbol=function(){return startSymbol},$interpolate.endSymbol=function(){return endSymbol},$interpolate}]}function $IntervalProvider(){this.$get=["$rootScope","$window","$q","$$q","$browser",function($rootScope,$window,$q,$$q,$browser){var intervals={};function interval(fn,delay,count,invokeApply){var hasParams=arguments.length>4,args=hasParams?sliceArgs(arguments,4):[],setInterval=$window.setInterval,clearInterval=$window.clearInterval,iteration=0,skipApply=isDefined(invokeApply)&&!invokeApply,deferred=(skipApply?$$q:$q).defer(),promise=deferred.promise;return count=isDefined(count)?count:0,promise.$$intervalId=setInterval((function tick(){skipApply?$browser.defer(callback):$rootScope.$evalAsync(callback),deferred.notify(iteration++),count>0&&iteration>=count&&(deferred.resolve(iteration),clearInterval(promise.$$intervalId),delete intervals[promise.$$intervalId]),skipApply||$rootScope.$apply()}),delay),intervals[promise.$$intervalId]=deferred,promise;function callback(){hasParams?fn.apply(null,args):fn(iteration)}}return interval.cancel=function(promise){return!!(promise&&promise.$$intervalId in intervals)&&(markQExceptionHandled(intervals[promise.$$intervalId].promise),intervals[promise.$$intervalId].reject("canceled"),$window.clearInterval(promise.$$intervalId),delete intervals[promise.$$intervalId],!0)},interval}]}$interpolateMinErr.throwNoconcat=function(text){throw $interpolateMinErr("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",text)},$interpolateMinErr.interr=function(text,err){return $interpolateMinErr("interr","Can't interpolate: {0}\n{1}",text,err.toString())};var $jsonpCallbacksProvider=function(){this.$get=function(){var callbacks=angular.callbacks,callbackMap={};function createCallback(callbackId){var callback=function(data){callback.data=data,callback.called=!0};return callback.id=callbackId,callback}return{createCallback:function(url){var callbackId="_"+(callbacks.$$counter++).toString(36),callbackPath="angular.callbacks."+callbackId,callback=createCallback(callbackId);return callbackMap[callbackPath]=callbacks[callbackId]=callback,callbackPath},wasCalled:function(callbackPath){return callbackMap[callbackPath].called},getResponse:function(callbackPath){return callbackMap[callbackPath].data},removeCallback:function(callbackPath){var callback=callbackMap[callbackPath];delete callbacks[callback.id],delete callbackMap[callbackPath]}}}},PATH_MATCH=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,DEFAULT_PORTS={http:80,https:443,ftp:21},$locationMinErr=minErr("$location");function encodePath(path){for(var segments=path.split("/"),i=segments.length;i--;)segments[i]=encodeUriSegment(segments[i]);return segments.join("/")}function parseAbsoluteUrl(absoluteUrl,locationObj){var parsedUrl=urlResolve(absoluteUrl);locationObj.$$protocol=parsedUrl.protocol,locationObj.$$host=parsedUrl.hostname,locationObj.$$port=toInt(parsedUrl.port)||DEFAULT_PORTS[parsedUrl.protocol]||null}var DOUBLE_SLASH_REGEX=/^\s*[\\/]{2,}/;function parseAppUrl(url,locationObj){if(DOUBLE_SLASH_REGEX.test(url))throw $locationMinErr("badpath",'Invalid url "{0}".',url);var prefixed="/"!==url.charAt(0);prefixed&&(url="/"+url);var match=urlResolve(url);locationObj.$$path=decodeURIComponent(prefixed&&"/"===match.pathname.charAt(0)?match.pathname.substring(1):match.pathname),locationObj.$$search=parseKeyValue(match.search),locationObj.$$hash=decodeURIComponent(match.hash),locationObj.$$path&&"/"!==locationObj.$$path.charAt(0)&&(locationObj.$$path="/"+locationObj.$$path)}function startsWith(str,search){return str.slice(0,search.length)===search}function stripBaseUrl(base,url){if(startsWith(url,base))return url.substr(base.length)}function stripHash(url){var index=url.indexOf("#");return-1===index?url:url.substr(0,index)}function trimEmptyHash(url){return url.replace(/(#.+)|#$/,"$1")}function stripFile(url){return url.substr(0,stripHash(url).lastIndexOf("/")+1)}function serverBase(url){return url.substring(0,url.indexOf("/",url.indexOf("//")+2))}function LocationHtml5Url(appBase,appBaseNoFile,basePrefix){this.$$html5=!0,basePrefix=basePrefix||"",parseAbsoluteUrl(appBase,this),this.$$parse=function(url){var pathUrl=stripBaseUrl(appBaseNoFile,url);if(!isString(pathUrl))throw $locationMinErr("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',url,appBaseNoFile);parseAppUrl(pathUrl,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBaseNoFile+this.$$url.substr(1),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(url,relHref){return relHref&&"#"===relHref[0]?(this.hash(relHref.slice(1)),!0):(isDefined(appUrl=stripBaseUrl(appBase,url))?(prevAppUrl=appUrl,rewrittenUrl=basePrefix&&isDefined(appUrl=stripBaseUrl(basePrefix,appUrl))?appBaseNoFile+(stripBaseUrl("/",appUrl)||appUrl):appBase+prevAppUrl):isDefined(appUrl=stripBaseUrl(appBaseNoFile,url))?rewrittenUrl=appBaseNoFile+appUrl:appBaseNoFile===url+"/"&&(rewrittenUrl=appBaseNoFile),rewrittenUrl&&this.$$parse(rewrittenUrl),!!rewrittenUrl);var appUrl,prevAppUrl,rewrittenUrl}}function LocationHashbangUrl(appBase,appBaseNoFile,hashPrefix){parseAbsoluteUrl(appBase,this),this.$$parse=function(url){var withoutBaseUrl=stripBaseUrl(appBase,url)||stripBaseUrl(appBaseNoFile,url),withoutHashUrl;function removeWindowsDriveName(path,url,base){var windowsFilePathExp=/^\/[A-Z]:(\/.*)/,firstPathSegmentMatch;return startsWith(url,base)&&(url=url.replace(base,"")),windowsFilePathExp.exec(url)?path:(firstPathSegmentMatch=windowsFilePathExp.exec(path))?firstPathSegmentMatch[1]:path}isUndefined(withoutBaseUrl)||"#"!==withoutBaseUrl.charAt(0)?this.$$html5?withoutHashUrl=withoutBaseUrl:(withoutHashUrl="",isUndefined(withoutBaseUrl)&&(appBase=url,this.replace())):isUndefined(withoutHashUrl=stripBaseUrl(hashPrefix,withoutBaseUrl))&&(withoutHashUrl=withoutBaseUrl),parseAppUrl(withoutHashUrl,this),this.$$path=removeWindowsDriveName(this.$$path,withoutHashUrl,appBase),this.$$compose()},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBase+(this.$$url?hashPrefix+this.$$url:""),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(url,relHref){return stripHash(appBase)===stripHash(url)&&(this.$$parse(url),!0)}}function LocationHashbangInHtml5Url(appBase,appBaseNoFile,hashPrefix){this.$$html5=!0,LocationHashbangUrl.apply(this,arguments),this.$$parseLinkUrl=function(url,relHref){return relHref&&"#"===relHref[0]?(this.hash(relHref.slice(1)),!0):(appBase===stripHash(url)?rewrittenUrl=url:(appUrl=stripBaseUrl(appBaseNoFile,url))?rewrittenUrl=appBase+hashPrefix+appUrl:appBaseNoFile===url+"/"&&(rewrittenUrl=appBaseNoFile),rewrittenUrl&&this.$$parse(rewrittenUrl),!!rewrittenUrl);var rewrittenUrl,appUrl},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBase+hashPrefix+this.$$url,this.$$urlUpdatedByLocation=!0}}var locationPrototype={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:locationGetter("$$absUrl"),url:function(url){if(isUndefined(url))return this.$$url;var match=PATH_MATCH.exec(url);return(match[1]||""===url)&&this.path(decodeURIComponent(match[1])),(match[2]||match[1]||""===url)&&this.search(match[3]||""),this.hash(match[5]||""),this},protocol:locationGetter("$$protocol"),host:locationGetter("$$host"),port:locationGetter("$$port"),path:locationGetterSetter("$$path",(function(path){return"/"===(path=null!==path?path.toString():"").charAt(0)?path:"/"+path})),search:function(search,paramValue){switch(arguments.length){case 0:return this.$$search;case 1:if(isString(search)||isNumber(search))search=search.toString(),this.$$search=parseKeyValue(search);else{if(!isObject(search))throw $locationMinErr("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");forEach(search=copy(search,{}),(function(value,key){null==value&&delete search[key]})),this.$$search=search}break;default:isUndefined(paramValue)||null===paramValue?delete this.$$search[search]:this.$$search[search]=paramValue}return this.$$compose(),this},hash:locationGetterSetter("$$hash",(function(hash){return null!==hash?hash.toString():""})),replace:function(){return this.$$replace=!0,this}};function locationGetter(property){return function(){return this[property]}}function locationGetterSetter(property,preprocess){return function(value){return isUndefined(value)?this[property]:(this[property]=preprocess(value),this.$$compose(),this)}}function $LocationProvider(){var hashPrefix="!",html5Mode={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(prefix){return isDefined(prefix)?(hashPrefix=prefix,this):hashPrefix},this.html5Mode=function(mode){return isBoolean(mode)?(html5Mode.enabled=mode,this):isObject(mode)?(isBoolean(mode.enabled)&&(html5Mode.enabled=mode.enabled),isBoolean(mode.requireBase)&&(html5Mode.requireBase=mode.requireBase),(isBoolean(mode.rewriteLinks)||isString(mode.rewriteLinks))&&(html5Mode.rewriteLinks=mode.rewriteLinks),this):html5Mode},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function($rootScope,$browser,$sniffer,$rootElement,$window){var $location,LocationMode,baseHref=$browser.baseHref(),initialUrl=$browser.url(),appBase;if(html5Mode.enabled){if(!baseHref&&html5Mode.requireBase)throw $locationMinErr("nobase","$location in HTML5 mode requires a <base> tag to be present!");appBase=serverBase(initialUrl)+(baseHref||"/"),LocationMode=$sniffer.history?LocationHtml5Url:LocationHashbangInHtml5Url}else appBase=stripHash(initialUrl),LocationMode=LocationHashbangUrl;var appBaseNoFile=stripFile(appBase);($location=new LocationMode(appBase,appBaseNoFile,"#"+hashPrefix)).$$parseLinkUrl(initialUrl,initialUrl),$location.$$state=$browser.state();var IGNORE_URI_REGEXP=/^\s*(javascript|mailto):/i;function setBrowserUrlWithFallback(url,replace,state){var oldUrl=$location.url(),oldState=$location.$$state;try{$browser.url(url,replace,state),$location.$$state=$browser.state()}catch(e){throw $location.url(oldUrl),$location.$$state=oldState,e}}$rootElement.on("click",(function(event){var rewriteLinks=html5Mode.rewriteLinks;if(rewriteLinks&&!event.ctrlKey&&!event.metaKey&&!event.shiftKey&&2!==event.which&&2!==event.button){for(var elm=jqLite(event.target);"a"!==nodeName_(elm[0]);)if(elm[0]===$rootElement[0]||!(elm=elm.parent())[0])return;if(!isString(rewriteLinks)||!isUndefined(elm.attr(rewriteLinks))){var absHref=elm.prop("href"),relHref=elm.attr("href")||elm.attr("xlink:href");isObject(absHref)&&"[object SVGAnimatedString]"===absHref.toString()&&(absHref=urlResolve(absHref.animVal).href),IGNORE_URI_REGEXP.test(absHref)||!absHref||elm.attr("target")||event.isDefaultPrevented()||$location.$$parseLinkUrl(absHref,relHref)&&(event.preventDefault(),$location.absUrl()!==$browser.url()&&($rootScope.$apply(),$window.angular["ff-684208-preventDefault"]=!0))}}})),trimEmptyHash($location.absUrl())!==trimEmptyHash(initialUrl)&&$browser.url($location.absUrl(),!0);var initializing=!0;return $browser.onUrlChange((function(newUrl,newState){startsWith(newUrl,appBaseNoFile)?($rootScope.$evalAsync((function(){var oldUrl=$location.absUrl(),oldState=$location.$$state,defaultPrevented;newUrl=trimEmptyHash(newUrl),$location.$$parse(newUrl),$location.$$state=newState,defaultPrevented=$rootScope.$broadcast("$locationChangeStart",newUrl,oldUrl,newState,oldState).defaultPrevented,$location.absUrl()===newUrl&&(defaultPrevented?($location.$$parse(oldUrl),$location.$$state=oldState,setBrowserUrlWithFallback(oldUrl,!1,oldState)):(initializing=!1,afterLocationChange(oldUrl,oldState)))})),$rootScope.$$phase||$rootScope.$digest()):$window.location.href=newUrl})),$rootScope.$watch((function $locationWatch(){if(initializing||$location.$$urlUpdatedByLocation){$location.$$urlUpdatedByLocation=!1;var oldUrl=trimEmptyHash($browser.url()),newUrl=trimEmptyHash($location.absUrl()),oldState=$browser.state(),currentReplace=$location.$$replace,urlOrStateChanged=oldUrl!==newUrl||$location.$$html5&&$sniffer.history&&oldState!==$location.$$state;(initializing||urlOrStateChanged)&&(initializing=!1,$rootScope.$evalAsync((function(){var newUrl=$location.absUrl(),defaultPrevented=$rootScope.$broadcast("$locationChangeStart",newUrl,oldUrl,$location.$$state,oldState).defaultPrevented;$location.absUrl()===newUrl&&(defaultPrevented?($location.$$parse(oldUrl),$location.$$state=oldState):(urlOrStateChanged&&setBrowserUrlWithFallback(newUrl,currentReplace,oldState===$location.$$state?null:$location.$$state),afterLocationChange(oldUrl,oldState)))})))}$location.$$replace=!1})),$location;function afterLocationChange(oldUrl,oldState){$rootScope.$broadcast("$locationChangeSuccess",$location.absUrl(),oldUrl,$location.$$state,oldState)}}]}function $LogProvider(){var debug=!0,self=this;this.debugEnabled=function(flag){return isDefined(flag)?(debug=flag,this):debug},this.$get=["$window",function($window){var formatStackTrace=msie||/\bEdge\//.test($window.navigator&&$window.navigator.userAgent),fn;return{log:consoleLog("log"),info:consoleLog("info"),warn:consoleLog("warn"),error:consoleLog("error"),debug:(fn=consoleLog("debug"),function(){debug&&fn.apply(self,arguments)})};function formatError(arg){return isError(arg)&&(arg.stack&&formatStackTrace?arg=arg.message&&-1===arg.stack.indexOf(arg.message)?"Error: "+arg.message+"\n"+arg.stack:arg.stack:arg.sourceURL&&(arg=arg.message+"\n"+arg.sourceURL+":"+arg.line)),arg}function consoleLog(type){var console=$window.console||{},logFn=console[type]||console.log||noop;return function(){var args=[];return forEach(arguments,(function(arg){args.push(formatError(arg))})),Function.prototype.apply.call(logFn,console,args)}}}]}forEach([LocationHashbangInHtml5Url,LocationHashbangUrl,LocationHtml5Url],(function(Location){Location.prototype=Object.create(locationPrototype),Location.prototype.state=function(state){if(!arguments.length)return this.$$state;if(Location!==LocationHtml5Url||!this.$$html5)throw $locationMinErr("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=isUndefined(state)?null:state,this.$$urlUpdatedByLocation=!0,this}}));var $parseMinErr=minErr("$parse"),objectValueOf={}.constructor.prototype.valueOf;function getStringValue(name){return name+""}var OPERATORS=createMap();forEach("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),(function(operator){OPERATORS[operator]=!0}));var ESCAPE={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Lexer=function Lexer(options){this.options=options};Lexer.prototype={constructor:Lexer,lex:function(text){for(this.text=text,this.index=0,this.tokens=[];this.index<this.text.length;){var ch=this.text.charAt(this.index);if('"'===ch||"'"===ch)this.readString(ch);else if(this.isNumber(ch)||"."===ch&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(ch,"(){}[].,;:?"))this.tokens.push({index:this.index,text:ch}),this.index++;else if(this.isWhitespace(ch))this.index++;else{var ch2=ch+this.peek(),ch3=ch2+this.peek(2),op1=OPERATORS[ch],op2=OPERATORS[ch2],op3=OPERATORS[ch3];if(op1||op2||op3){var token=op3?ch3:op2?ch2:ch;this.tokens.push({index:this.index,text:token,operator:!0}),this.index+=token.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(ch,chars){return-1!==chars.indexOf(ch)},peek:function(i){var num=i||1;return this.index+num<this.text.length&&this.text.charAt(this.index+num)},isNumber:function(ch){return"0"<=ch&&ch<="9"&&"string"==typeof ch},isWhitespace:function(ch){return" "===ch||"\r"===ch||"\t"===ch||"\n"===ch||"\v"===ch||" "===ch},isIdentifierStart:function(ch){return this.options.isIdentifierStart?this.options.isIdentifierStart(ch,this.codePointAt(ch)):this.isValidIdentifierStart(ch)},isValidIdentifierStart:function(ch){return"a"<=ch&&ch<="z"||"A"<=ch&&ch<="Z"||"_"===ch||"$"===ch},isIdentifierContinue:function(ch){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(ch,this.codePointAt(ch)):this.isValidIdentifierContinue(ch)},isValidIdentifierContinue:function(ch,cp){return this.isValidIdentifierStart(ch,cp)||this.isNumber(ch)},codePointAt:function(ch){return 1===ch.length?ch.charCodeAt(0):(ch.charCodeAt(0)<<10)+ch.charCodeAt(1)-56613888},peekMultichar:function(){var ch=this.text.charAt(this.index),peek=this.peek();if(!peek)return ch;var cp1=ch.charCodeAt(0),cp2=peek.charCodeAt(0);return cp1>=55296&&cp1<=56319&&cp2>=56320&&cp2<=57343?ch+peek:ch},isExpOperator:function(ch){return"-"===ch||"+"===ch||this.isNumber(ch)},throwError:function(error,start,end){end=end||this.index;var colStr=isDefined(start)?"s "+start+"-"+this.index+" ["+this.text.substring(start,end)+"]":" "+end;throw $parseMinErr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",error,colStr,this.text)},readNumber:function(){for(var number="",start=this.index;this.index<this.text.length;){var ch=lowercase(this.text.charAt(this.index));if("."===ch||this.isNumber(ch))number+=ch;else{var peekCh=this.peek();if("e"===ch&&this.isExpOperator(peekCh))number+=ch;else if(this.isExpOperator(ch)&&peekCh&&this.isNumber(peekCh)&&"e"===number.charAt(number.length-1))number+=ch;else{if(!this.isExpOperator(ch)||peekCh&&this.isNumber(peekCh)||"e"!==number.charAt(number.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:start,text:number,constant:!0,value:Number(number)})},readIdent:function(){var start=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var ch=this.peekMultichar();if(!this.isIdentifierContinue(ch))break;this.index+=ch.length}this.tokens.push({index:start,text:this.text.slice(start,this.index),identifier:!0})},readString:function(quote){var start=this.index;this.index++;for(var string="",rawString=quote,escape=!1;this.index<this.text.length;){var ch=this.text.charAt(this.index);if(rawString+=ch,escape){if("u"===ch){var hex=this.text.substring(this.index+1,this.index+5);hex.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+hex+"]"),this.index+=4,string+=String.fromCharCode(parseInt(hex,16))}else{var rep;string+=ESCAPE[ch]||ch}escape=!1}else if("\\"===ch)escape=!0;else{if(ch===quote)return this.index++,void this.tokens.push({index:start,text:rawString,constant:!0,value:string});string+=ch}this.index++}this.throwError("Unterminated quote",start)}};var AST=function AST(lexer,options){this.lexer=lexer,this.options=options};function ifDefined(v,d){return void 0!==v?v:d}function plusFn(l,r){return void 0===l?r:void 0===r?l:l+r}function isStateless($filter,filterName){var fn;return!$filter(filterName).$stateful}AST.Program="Program",AST.ExpressionStatement="ExpressionStatement",AST.AssignmentExpression="AssignmentExpression",AST.ConditionalExpression="ConditionalExpression",AST.LogicalExpression="LogicalExpression",AST.BinaryExpression="BinaryExpression",AST.UnaryExpression="UnaryExpression",AST.CallExpression="CallExpression",AST.MemberExpression="MemberExpression",AST.Identifier="Identifier",AST.Literal="Literal",AST.ArrayExpression="ArrayExpression",AST.Property="Property",AST.ObjectExpression="ObjectExpression",AST.ThisExpression="ThisExpression",AST.LocalsExpression="LocalsExpression",AST.NGValueParameter="NGValueParameter",AST.prototype={ast:function(text){this.text=text,this.tokens=this.lexer.lex(text);var value=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),value},program:function(){for(var body=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&body.push(this.expressionStatement()),!this.expect(";"))return{type:AST.Program,body:body}},expressionStatement:function(){return{type:AST.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var left=this.expression();this.expect("|");)left=this.filter(left);return left},expression:function(){return this.assignment()},assignment:function(){var result=this.ternary();if(this.expect("=")){if(!isAssignable(result))throw $parseMinErr("lval","Trying to assign a value to a non l-value");result={type:AST.AssignmentExpression,left:result,right:this.assignment(),operator:"="}}return result},ternary:function(){var test=this.logicalOR(),alternate,consequent;return this.expect("?")&&(alternate=this.expression(),this.consume(":"))?(consequent=this.expression(),{type:AST.ConditionalExpression,test:test,alternate:alternate,consequent:consequent}):test},logicalOR:function(){for(var left=this.logicalAND();this.expect("||");)left={type:AST.LogicalExpression,operator:"||",left:left,right:this.logicalAND()};return left},logicalAND:function(){for(var left=this.equality();this.expect("&&");)left={type:AST.LogicalExpression,operator:"&&",left:left,right:this.equality()};return left},equality:function(){for(var left=this.relational(),token;token=this.expect("==","!=","===","!==");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.relational()};return left},relational:function(){for(var left=this.additive(),token;token=this.expect("<",">","<=",">=");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.additive()};return left},additive:function(){for(var left=this.multiplicative(),token;token=this.expect("+","-");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.multiplicative()};return left},multiplicative:function(){for(var left=this.unary(),token;token=this.expect("*","/","%");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.unary()};return left},unary:function(){var token;return(token=this.expect("+","-","!"))?{type:AST.UnaryExpression,operator:token.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var primary,next;for(this.expect("(")?(primary=this.filterChain(),this.consume(")")):this.expect("[")?primary=this.arrayDeclaration():this.expect("{")?primary=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?primary=copy(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?primary={type:AST.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?primary=this.identifier():this.peek().constant?primary=this.constant():this.throwError("not a primary expression",this.peek());next=this.expect("(","[",".");)"("===next.text?(primary={type:AST.CallExpression,callee:primary,arguments:this.parseArguments()},this.consume(")")):"["===next.text?(primary={type:AST.MemberExpression,object:primary,property:this.expression(),computed:!0},this.consume("]")):"."===next.text?primary={type:AST.MemberExpression,object:primary,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return primary},filter:function(baseExpression){for(var args=[baseExpression],result={type:AST.CallExpression,callee:this.identifier(),arguments:args,filter:!0};this.expect(":");)args.push(this.expression());return result},parseArguments:function(){var args=[];if(")"!==this.peekToken().text)do{args.push(this.filterChain())}while(this.expect(","));return args},identifier:function(){var token=this.consume();return token.identifier||this.throwError("is not a valid identifier",token),{type:AST.Identifier,name:token.text}},constant:function(){return{type:AST.Literal,value:this.consume().value}},arrayDeclaration:function(){var elements=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;elements.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:AST.ArrayExpression,elements:elements}},object:function(){var properties=[],property;if("}"!==this.peekToken().text)do{if(this.peek("}"))break;property={type:AST.Property,kind:"init"},this.peek().constant?(property.key=this.constant(),property.computed=!1,this.consume(":"),property.value=this.expression()):this.peek().identifier?(property.key=this.identifier(),property.computed=!1,this.peek(":")?(this.consume(":"),property.value=this.expression()):property.value=property.key):this.peek("[")?(this.consume("["),property.key=this.expression(),this.consume("]"),property.computed=!0,this.consume(":"),property.value=this.expression()):this.throwError("invalid key",this.peek()),properties.push(property)}while(this.expect(","));return this.consume("}"),{type:AST.ObjectExpression,properties:properties}},throwError:function(msg,token){throw $parseMinErr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",token.text,msg,token.index+1,this.text,this.text.substring(token.index))},consume:function(e1){if(0===this.tokens.length)throw $parseMinErr("ueoe","Unexpected end of expression: {0}",this.text);var token=this.expect(e1);return token||this.throwError("is unexpected, expecting ["+e1+"]",this.peek()),token},peekToken:function(){if(0===this.tokens.length)throw $parseMinErr("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e1,e2,e3,e4){return this.peekAhead(0,e1,e2,e3,e4)},peekAhead:function(i,e1,e2,e3,e4){if(this.tokens.length>i){var token=this.tokens[i],t=token.text;if(t===e1||t===e2||t===e3||t===e4||!e1&&!e2&&!e3&&!e4)return token}return!1},expect:function(e1,e2,e3,e4){var token=this.peek(e1,e2,e3,e4);return!!token&&(this.tokens.shift(),token)},selfReferential:{this:{type:AST.ThisExpression},$locals:{type:AST.LocalsExpression}}};var PURITY_ABSOLUTE=1,PURITY_RELATIVE=2;function isPure(node,parentIsPure){switch(node.type){case AST.MemberExpression:if(node.computed)return!1;break;case AST.UnaryExpression:return 1;case AST.BinaryExpression:return"+"!==node.operator&&1;case AST.CallExpression:return!1}return void 0===parentIsPure?2:parentIsPure}function findConstantAndWatchExpressions(ast,$filter,parentIsPure){var allConstants,argsToWatch,isStatelessFilter,astIsPure=ast.isPure=isPure(ast,parentIsPure);switch(ast.type){case AST.Program:allConstants=!0,forEach(ast.body,(function(expr){findConstantAndWatchExpressions(expr.expression,$filter,astIsPure),allConstants=allConstants&&expr.expression.constant})),ast.constant=allConstants;break;case AST.Literal:ast.constant=!0,ast.toWatch=[];break;case AST.UnaryExpression:findConstantAndWatchExpressions(ast.argument,$filter,astIsPure),ast.constant=ast.argument.constant,ast.toWatch=ast.argument.toWatch;break;case AST.BinaryExpression:findConstantAndWatchExpressions(ast.left,$filter,astIsPure),findConstantAndWatchExpressions(ast.right,$filter,astIsPure),ast.constant=ast.left.constant&&ast.right.constant,ast.toWatch=ast.left.toWatch.concat(ast.right.toWatch);break;case AST.LogicalExpression:findConstantAndWatchExpressions(ast.left,$filter,astIsPure),findConstantAndWatchExpressions(ast.right,$filter,astIsPure),ast.constant=ast.left.constant&&ast.right.constant,ast.toWatch=ast.constant?[]:[ast];break;case AST.ConditionalExpression:findConstantAndWatchExpressions(ast.test,$filter,astIsPure),findConstantAndWatchExpressions(ast.alternate,$filter,astIsPure),findConstantAndWatchExpressions(ast.consequent,$filter,astIsPure),ast.constant=ast.test.constant&&ast.alternate.constant&&ast.consequent.constant,ast.toWatch=ast.constant?[]:[ast];break;case AST.Identifier:ast.constant=!1,ast.toWatch=[ast];break;case AST.MemberExpression:findConstantAndWatchExpressions(ast.object,$filter,astIsPure),ast.computed&&findConstantAndWatchExpressions(ast.property,$filter,astIsPure),ast.constant=ast.object.constant&&(!ast.computed||ast.property.constant),ast.toWatch=ast.constant?[]:[ast];break;case AST.CallExpression:isStatelessFilter=!!ast.filter&&isStateless($filter,ast.callee.name),allConstants=isStatelessFilter,argsToWatch=[],forEach(ast.arguments,(function(expr){findConstantAndWatchExpressions(expr,$filter,astIsPure),allConstants=allConstants&&expr.constant,argsToWatch.push.apply(argsToWatch,expr.toWatch)})),ast.constant=allConstants,ast.toWatch=isStatelessFilter?argsToWatch:[ast];break;case AST.AssignmentExpression:findConstantAndWatchExpressions(ast.left,$filter,astIsPure),findConstantAndWatchExpressions(ast.right,$filter,astIsPure),ast.constant=ast.left.constant&&ast.right.constant,ast.toWatch=[ast];break;case AST.ArrayExpression:allConstants=!0,argsToWatch=[],forEach(ast.elements,(function(expr){findConstantAndWatchExpressions(expr,$filter,astIsPure),allConstants=allConstants&&expr.constant,argsToWatch.push.apply(argsToWatch,expr.toWatch)})),ast.constant=allConstants,ast.toWatch=argsToWatch;break;case AST.ObjectExpression:allConstants=!0,argsToWatch=[],forEach(ast.properties,(function(property){findConstantAndWatchExpressions(property.value,$filter,astIsPure),allConstants=allConstants&&property.value.constant,argsToWatch.push.apply(argsToWatch,property.value.toWatch),property.computed&&(findConstantAndWatchExpressions(property.key,$filter,!1),allConstants=allConstants&&property.key.constant,argsToWatch.push.apply(argsToWatch,property.key.toWatch))})),ast.constant=allConstants,ast.toWatch=argsToWatch;break;case AST.ThisExpression:case AST.LocalsExpression:ast.constant=!1,ast.toWatch=[]}}function getInputs(body){if(1===body.length){var lastExpression=body[0].expression,candidate=lastExpression.toWatch;return 1!==candidate.length?candidate:candidate[0]!==lastExpression?candidate:void 0}}function isAssignable(ast){return ast.type===AST.Identifier||ast.type===AST.MemberExpression}function assignableAST(ast){if(1===ast.body.length&&isAssignable(ast.body[0].expression))return{type:AST.AssignmentExpression,left:ast.body[0].expression,right:{type:AST.NGValueParameter},operator:"="}}function isLiteral(ast){return 0===ast.body.length||1===ast.body.length&&(ast.body[0].expression.type===AST.Literal||ast.body[0].expression.type===AST.ArrayExpression||ast.body[0].expression.type===AST.ObjectExpression)}function isConstant(ast){return ast.constant}function ASTCompiler($filter){this.$filter=$filter}function ASTInterpreter($filter){this.$filter=$filter}function Parser(lexer,$filter,options){this.ast=new AST(lexer,options),this.astCompiler=options.csp?new ASTInterpreter($filter):new ASTCompiler($filter)}function getValueOf(value){return isFunction(value.valueOf)?value.valueOf():objectValueOf.call(value)}function $ParseProvider(){var cache=createMap(),literals={true:!0,false:!1,null:null,undefined:void 0},identStart,identContinue;this.addLiteral=function(literalName,literalValue){literals[literalName]=literalValue},this.setIdentifierFns=function(identifierStart,identifierContinue){return identStart=identifierStart,identContinue=identifierContinue,this},this.$get=["$filter",function($filter){var noUnsafeEval,$parseOptions={csp:csp().noUnsafeEval,literals:copy(literals),isIdentifierStart:isFunction(identStart)&&identStart,isIdentifierContinue:isFunction(identContinue)&&identContinue};return $parse;function $parse(exp,interceptorFn){var parsedExpression,oneTime,cacheKey;switch(typeof exp){case"string":var lexer,parser;if(exp=exp.trim(),!(parsedExpression=cache[cacheKey=exp]))":"===exp.charAt(0)&&":"===exp.charAt(1)&&(oneTime=!0,exp=exp.substring(2)),(parsedExpression=new Parser(new Lexer($parseOptions),$filter,$parseOptions).parse(exp)).constant?parsedExpression.$$watchDelegate=constantWatchDelegate:oneTime?parsedExpression.$$watchDelegate=parsedExpression.literal?oneTimeLiteralWatchDelegate:oneTimeWatchDelegate:parsedExpression.inputs&&(parsedExpression.$$watchDelegate=inputsWatchDelegate),cache[cacheKey]=parsedExpression;return addInterceptor(parsedExpression,interceptorFn);case"function":return addInterceptor(exp,interceptorFn);default:return addInterceptor(noop,interceptorFn)}}function expressionInputDirtyCheck(newValue,oldValueOfValue,compareObjectIdentity){return null==newValue||null==oldValueOfValue?newValue===oldValueOfValue:!("object"==typeof newValue&&"object"==typeof(newValue=getValueOf(newValue))&&!compareObjectIdentity)&&(newValue===oldValueOfValue||newValue!=newValue&&oldValueOfValue!=oldValueOfValue)}function inputsWatchDelegate(scope,listener,objectEquality,parsedExpression,prettyPrintExpression){var inputExpressions=parsedExpression.inputs,lastResult;if(1===inputExpressions.length){var oldInputValueOf=expressionInputDirtyCheck;return inputExpressions=inputExpressions[0],scope.$watch((function expressionInputWatch(scope){var newInputValue=inputExpressions(scope);return expressionInputDirtyCheck(newInputValue,oldInputValueOf,inputExpressions.isPure)||(lastResult=parsedExpression(scope,void 0,void 0,[newInputValue]),oldInputValueOf=newInputValue&&getValueOf(newInputValue)),lastResult}),listener,objectEquality,prettyPrintExpression)}for(var oldInputValueOfValues=[],oldInputValues=[],i=0,ii=inputExpressions.length;i<ii;i++)oldInputValueOfValues[i]=expressionInputDirtyCheck,oldInputValues[i]=null;return scope.$watch((function expressionInputsWatch(scope){for(var changed=!1,i=0,ii=inputExpressions.length;i<ii;i++){var newInputValue=inputExpressions[i](scope);(changed||(changed=!expressionInputDirtyCheck(newInputValue,oldInputValueOfValues[i],inputExpressions[i].isPure)))&&(oldInputValues[i]=newInputValue,oldInputValueOfValues[i]=newInputValue&&getValueOf(newInputValue))}return changed&&(lastResult=parsedExpression(scope,void 0,void 0,oldInputValues)),lastResult}),listener,objectEquality,prettyPrintExpression)}function oneTimeWatchDelegate(scope,listener,objectEquality,parsedExpression,prettyPrintExpression){var unwatch,lastValue;return unwatch=parsedExpression.inputs?inputsWatchDelegate(scope,oneTimeListener,objectEquality,parsedExpression,prettyPrintExpression):scope.$watch(oneTimeWatch,oneTimeListener,objectEquality);function oneTimeWatch(scope){return parsedExpression(scope)}function oneTimeListener(value,old,scope){lastValue=value,isFunction(listener)&&listener(value,old,scope),isDefined(value)&&scope.$$postDigest((function(){isDefined(lastValue)&&unwatch()}))}}function oneTimeLiteralWatchDelegate(scope,listener,objectEquality,parsedExpression){var unwatch,lastValue;return unwatch=scope.$watch((function oneTimeWatch(scope){return parsedExpression(scope)}),(function oneTimeListener(value,old,scope){lastValue=value,isFunction(listener)&&listener(value,old,scope),isAllDefined(value)&&scope.$$postDigest((function(){isAllDefined(lastValue)&&unwatch()}))}),objectEquality);function isAllDefined(value){var allDefined=!0;return forEach(value,(function(val){isDefined(val)||(allDefined=!1)})),allDefined}}function constantWatchDelegate(scope,listener,objectEquality,parsedExpression){var unwatch=scope.$watch((function constantWatch(scope){return unwatch(),parsedExpression(scope)}),listener,objectEquality);return unwatch}function addInterceptor(parsedExpression,interceptorFn){if(!interceptorFn)return parsedExpression;var watchDelegate=parsedExpression.$$watchDelegate,useInputs=!1,regularWatch,fn=watchDelegate!==oneTimeLiteralWatchDelegate&&watchDelegate!==oneTimeWatchDelegate?function regularInterceptedExpression(scope,locals,assign,inputs){var value=useInputs&&inputs?inputs[0]:parsedExpression(scope,locals,assign,inputs);return interceptorFn(value,scope,locals)}:function oneTimeInterceptedExpression(scope,locals,assign,inputs){var value=parsedExpression(scope,locals,assign,inputs),result=interceptorFn(value,scope,locals);return isDefined(value)?result:value};return useInputs=!parsedExpression.inputs,watchDelegate&&watchDelegate!==inputsWatchDelegate?(fn.$$watchDelegate=watchDelegate,fn.inputs=parsedExpression.inputs):interceptorFn.$stateful||(fn.$$watchDelegate=inputsWatchDelegate,fn.inputs=parsedExpression.inputs?parsedExpression.inputs:[parsedExpression]),fn.inputs&&(fn.inputs=fn.inputs.map((function(e){return 2===e.isPure?function depurifier(s){return e(s)}:e}))),fn}}]}function $QProvider(){var errorOnUnhandledRejections=!0;this.$get=["$rootScope","$exceptionHandler",function($rootScope,$exceptionHandler){return qFactory((function(callback){$rootScope.$evalAsync(callback)}),$exceptionHandler,errorOnUnhandledRejections)}],this.errorOnUnhandledRejections=function(value){return isDefined(value)?(errorOnUnhandledRejections=value,this):errorOnUnhandledRejections}}function $$QProvider(){var errorOnUnhandledRejections=!0;this.$get=["$browser","$exceptionHandler",function($browser,$exceptionHandler){return qFactory((function(callback){$browser.defer(callback)}),$exceptionHandler,errorOnUnhandledRejections)}],this.errorOnUnhandledRejections=function(value){return isDefined(value)?(errorOnUnhandledRejections=value,this):errorOnUnhandledRejections}}function qFactory(nextTick,exceptionHandler,errorOnUnhandledRejections){var $qMinErr=minErr("$q",TypeError),queueSize=0,checkQueue=[];function defer(){return new Deferred}function Deferred(){var promise=this.promise=new Promise;this.resolve=function(val){resolvePromise(promise,val)},this.reject=function(reason){rejectPromise(promise,reason)},this.notify=function(progress){notifyPromise(promise,progress)}}function Promise(){this.$$state={status:0}}function processQueue(state){var fn,promise,pending;pending=state.pending,state.processScheduled=!1,state.pending=void 0;try{for(var i=0,ii=pending.length;i<ii;++i){markQStateExceptionHandled(state),promise=pending[i][0],fn=pending[i][state.status];try{isFunction(fn)?resolvePromise(promise,fn(state.value)):1===state.status?resolvePromise(promise,state.value):rejectPromise(promise,state.value)}catch(e){rejectPromise(promise,e)}}}finally{--queueSize,errorOnUnhandledRejections&&0===queueSize&&nextTick(processChecks)}}function processChecks(){for(;!queueSize&&checkQueue.length;){var toCheck=checkQueue.shift();if(!isStateExceptionHandled(toCheck)){markQStateExceptionHandled(toCheck);var errorMessage="Possibly unhandled rejection: "+toDebugString(toCheck.value);isError(toCheck.value)?exceptionHandler(toCheck.value,errorMessage):exceptionHandler(errorMessage)}}}function scheduleProcessQueue(state){!errorOnUnhandledRejections||state.pending||2!==state.status||isStateExceptionHandled(state)||(0===queueSize&&0===checkQueue.length&&nextTick(processChecks),checkQueue.push(state)),!state.processScheduled&&state.pending&&(state.processScheduled=!0,++queueSize,nextTick((function(){processQueue(state)})))}function resolvePromise(promise,val){promise.$$state.status||(val===promise?$$reject(promise,$qMinErr("qcycle","Expected promise to be resolved with value other than itself '{0}'",val)):$$resolve(promise,val))}function $$resolve(promise,val){var then,done=!1;try{(isObject(val)||isFunction(val))&&(then=val.then),isFunction(then)?(promise.$$state.status=-1,then.call(val,doResolve,doReject,doNotify)):(promise.$$state.value=val,promise.$$state.status=1,scheduleProcessQueue(promise.$$state))}catch(e){doReject(e)}function doResolve(val){done||(done=!0,$$resolve(promise,val))}function doReject(val){done||(done=!0,$$reject(promise,val))}function doNotify(progress){notifyPromise(promise,progress)}}function rejectPromise(promise,reason){promise.$$state.status||$$reject(promise,reason)}function $$reject(promise,reason){promise.$$state.value=reason,promise.$$state.status=2,scheduleProcessQueue(promise.$$state)}function notifyPromise(promise,progress){var callbacks=promise.$$state.pending;promise.$$state.status<=0&&callbacks&&callbacks.length&&nextTick((function(){for(var callback,result,i=0,ii=callbacks.length;i<ii;i++){result=callbacks[i][0],callback=callbacks[i][3];try{notifyPromise(result,isFunction(callback)?callback(progress):progress)}catch(e){exceptionHandler(e)}}}))}function reject(reason){var result=new Promise;return rejectPromise(result,reason),result}function handleCallback(value,resolver,callback){var callbackOutput=null;try{isFunction(callback)&&(callbackOutput=callback())}catch(e){return reject(e)}return isPromiseLike(callbackOutput)?callbackOutput.then((function(){return resolver(value)}),reject):resolver(value)}function when(value,callback,errback,progressBack){var result=new Promise;return resolvePromise(result,value),result.then(callback,errback,progressBack)}extend(Promise.prototype,{then:function(onFulfilled,onRejected,progressBack){if(isUndefined(onFulfilled)&&isUndefined(onRejected)&&isUndefined(progressBack))return this;var result=new Promise;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([result,onFulfilled,onRejected,progressBack]),this.$$state.status>0&&scheduleProcessQueue(this.$$state),result},catch:function(callback){return this.then(null,callback)},finally:function(callback,progressBack){return this.then((function(value){return handleCallback(value,resolve,callback)}),(function(error){return handleCallback(error,reject,callback)}),progressBack)}});var resolve=when;function all(promises){var result=new Promise,counter=0,results=isArray(promises)?[]:{};return forEach(promises,(function(promise,key){counter++,when(promise).then((function(value){results[key]=value,--counter||resolvePromise(result,results)}),(function(reason){rejectPromise(result,reason)}))})),0===counter&&resolvePromise(result,results),result}function race(promises){var deferred=defer();return forEach(promises,(function(promise){when(promise).then(deferred.resolve,deferred.reject)})),deferred.promise}function $Q(resolver){if(!isFunction(resolver))throw $qMinErr("norslvr","Expected resolverFn, got '{0}'",resolver);var promise=new Promise;function resolveFn(value){resolvePromise(promise,value)}function rejectFn(reason){rejectPromise(promise,reason)}return resolver(resolveFn,rejectFn),promise}return $Q.prototype=Promise.prototype,$Q.defer=defer,$Q.reject=reject,$Q.when=when,$Q.resolve=resolve,$Q.all=all,$Q.race=race,$Q}function isStateExceptionHandled(state){return!!state.pur}function markQStateExceptionHandled(state){state.pur=!0}function markQExceptionHandled(q){markQStateExceptionHandled(q.$$state)}function $$RAFProvider(){this.$get=["$window","$timeout",function($window,$timeout){var requestAnimationFrame=$window.requestAnimationFrame||$window.webkitRequestAnimationFrame,cancelAnimationFrame=$window.cancelAnimationFrame||$window.webkitCancelAnimationFrame||$window.webkitCancelRequestAnimationFrame,rafSupported=!!requestAnimationFrame,raf=rafSupported?function(fn){var id=requestAnimationFrame(fn);return function(){cancelAnimationFrame(id)}}:function(fn){var timer=$timeout(fn,16.66,!1);return function(){$timeout.cancel(timer)}};return raf.supported=rafSupported,raf}]}function $RootScopeProvider(){var TTL=10,$rootScopeMinErr=minErr("$rootScope"),lastDirtyWatch=null,applyAsyncId=null;function createChildScopeClass(parent){function ChildScope(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=nextUid(),this.$$ChildScope=null}return ChildScope.prototype=parent,ChildScope}this.digestTtl=function(value){return arguments.length&&(TTL=value),TTL},this.$get=["$exceptionHandler","$parse","$browser",function($exceptionHandler,$parse,$browser){function destroyChildScope($event){$event.currentScope.$$destroyed=!0}function cleanUpScope($scope){9===msie&&($scope.$$childHead&&cleanUpScope($scope.$$childHead),$scope.$$nextSibling&&cleanUpScope($scope.$$nextSibling)),$scope.$parent=$scope.$$nextSibling=$scope.$$prevSibling=$scope.$$childHead=$scope.$$childTail=$scope.$root=$scope.$$watchers=null}function Scope(){this.$id=nextUid(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}Scope.prototype={constructor:Scope,$new:function(isolate,parent){var child;return parent=parent||this,isolate?(child=new Scope).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=createChildScopeClass(this)),child=new this.$$ChildScope),child.$parent=parent,child.$$prevSibling=parent.$$childTail,parent.$$childHead?(parent.$$childTail.$$nextSibling=child,parent.$$childTail=child):parent.$$childHead=parent.$$childTail=child,(isolate||parent!==this)&&child.$on("$destroy",destroyChildScope),child},$watch:function(watchExp,listener,objectEquality,prettyPrintExpression){var get=$parse(watchExp);if(get.$$watchDelegate)return get.$$watchDelegate(this,listener,objectEquality,get,watchExp);var scope=this,array=scope.$$watchers,watcher={fn:listener,last:initWatchVal,get:get,exp:prettyPrintExpression||watchExp,eq:!!objectEquality};return lastDirtyWatch=null,isFunction(listener)||(watcher.fn=noop),array||((array=scope.$$watchers=[]).$$digestWatchIndex=-1),array.unshift(watcher),array.$$digestWatchIndex++,incrementWatchersCount(this,1),function deregisterWatch(){var index=arrayRemove(array,watcher);index>=0&&(incrementWatchersCount(scope,-1),index<array.$$digestWatchIndex&&array.$$digestWatchIndex--),lastDirtyWatch=null}},$watchGroup:function(watchExpressions,listener){var oldValues=new Array(watchExpressions.length),newValues=new Array(watchExpressions.length),deregisterFns=[],self=this,changeReactionScheduled=!1,firstRun=!0;if(!watchExpressions.length){var shouldCall=!0;return self.$evalAsync((function(){shouldCall&&listener(newValues,newValues,self)})),function deregisterWatchGroup(){shouldCall=!1}}if(1===watchExpressions.length)return this.$watch(watchExpressions[0],(function watchGroupAction(value,oldValue,scope){newValues[0]=value,oldValues[0]=oldValue,listener(newValues,value===oldValue?newValues:oldValues,scope)}));function watchGroupAction(){changeReactionScheduled=!1,firstRun?(firstRun=!1,listener(newValues,newValues,self)):listener(newValues,oldValues,self)}return forEach(watchExpressions,(function(expr,i){var unwatchFn=self.$watch(expr,(function watchGroupSubAction(value,oldValue){newValues[i]=value,oldValues[i]=oldValue,changeReactionScheduled||(changeReactionScheduled=!0,self.$evalAsync(watchGroupAction))}));deregisterFns.push(unwatchFn)})),function deregisterWatchGroup(){for(;deregisterFns.length;)deregisterFns.shift()()}},$watchCollection:function(obj,listener){$watchCollectionInterceptor.$stateful=!0;var self=this,newValue,oldValue,veryOldValue,trackVeryOldValue=listener.length>1,changeDetected=0,changeDetector=$parse(obj,$watchCollectionInterceptor),internalArray=[],internalObject={},initRun=!0,oldLength=0;function $watchCollectionInterceptor(_value){var newLength,key,bothNaN,newItem,oldItem;if(!isUndefined(newValue=_value)){if(isObject(newValue))if(isArrayLike(newValue)){oldValue!==internalArray&&(oldLength=(oldValue=internalArray).length=0,changeDetected++),newLength=newValue.length,oldLength!==newLength&&(changeDetected++,oldValue.length=oldLength=newLength);for(var i=0;i<newLength;i++)oldItem=oldValue[i],newItem=newValue[i],(bothNaN=oldItem!=oldItem&&newItem!=newItem)||oldItem===newItem||(changeDetected++,oldValue[i]=newItem)}else{for(key in oldValue!==internalObject&&(oldValue=internalObject={},oldLength=0,changeDetected++),newLength=0,newValue)hasOwnProperty.call(newValue,key)&&(newLength++,newItem=newValue[key],oldItem=oldValue[key],key in oldValue?(bothNaN=oldItem!=oldItem&&newItem!=newItem)||oldItem===newItem||(changeDetected++,oldValue[key]=newItem):(oldLength++,oldValue[key]=newItem,changeDetected++));if(oldLength>newLength)for(key in changeDetected++,oldValue)hasOwnProperty.call(newValue,key)||(oldLength--,delete oldValue[key])}else oldValue!==newValue&&(oldValue=newValue,changeDetected++);return changeDetected}}function $watchCollectionAction(){if(initRun?(initRun=!1,listener(newValue,newValue,self)):listener(newValue,veryOldValue,self),trackVeryOldValue)if(isObject(newValue))if(isArrayLike(newValue)){veryOldValue=new Array(newValue.length);for(var i=0;i<newValue.length;i++)veryOldValue[i]=newValue[i]}else for(var key in veryOldValue={},newValue)hasOwnProperty.call(newValue,key)&&(veryOldValue[key]=newValue[key]);else veryOldValue=newValue}return this.$watch(changeDetector,$watchCollectionAction)},$digest:function(){var watch,value,last,fn,get,watchers,dirty,ttl=TTL,next,current,target=this,watchLog=[],logIdx,asyncTask;beginPhase("$digest"),$browser.$$checkUrlChange(),this===$rootScope&&null!==applyAsyncId&&($browser.defer.cancel(applyAsyncId),flushApplyAsync()),lastDirtyWatch=null;do{dirty=!1,current=this;for(var asyncQueuePosition=0;asyncQueuePosition<asyncQueue.length;asyncQueuePosition++){try{(fn=(asyncTask=asyncQueue[asyncQueuePosition]).fn)(asyncTask.scope,asyncTask.locals)}catch(e){$exceptionHandler(e)}lastDirtyWatch=null}asyncQueue.length=0;traverseScopesLoop:do{if(watchers=current.$$watchers)for(watchers.$$digestWatchIndex=watchers.length;watchers.$$digestWatchIndex--;)try{if(watch=watchers[watchers.$$digestWatchIndex])if((value=(get=watch.get)(current))===(last=watch.last)||(watch.eq?equals(value,last):isNumberNaN(value)&&isNumberNaN(last))){if(watch===lastDirtyWatch){dirty=!1;break traverseScopesLoop}}else dirty=!0,lastDirtyWatch=watch,watch.last=watch.eq?copy(value,null):value,(fn=watch.fn)(value,last===initWatchVal?value:last,current),ttl<5&&(watchLog[logIdx=4-ttl]||(watchLog[logIdx]=[]),watchLog[logIdx].push({msg:isFunction(watch.exp)?"fn: "+(watch.exp.name||watch.exp.toString()):watch.exp,newVal:value,oldVal:last}))}catch(e){$exceptionHandler(e)}if(!(next=current.$$watchersCount&&current.$$childHead||current!==this&&current.$$nextSibling))for(;current!==this&&!(next=current.$$nextSibling);)current=current.$parent}while(current=next);if((dirty||asyncQueue.length)&&!ttl--)throw clearPhase(),$rootScopeMinErr("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",TTL,watchLog)}while(dirty||asyncQueue.length);for(clearPhase();postDigestQueuePosition<postDigestQueue.length;)try{postDigestQueue[postDigestQueuePosition++]()}catch(e){$exceptionHandler(e)}postDigestQueue.length=postDigestQueuePosition=0,$browser.$$checkUrlChange()},$destroy:function(){if(!this.$$destroyed){var parent=this.$parent;for(var eventName in this.$broadcast("$destroy"),this.$$destroyed=!0,this===$rootScope&&$browser.$$applicationDestroyed(),incrementWatchersCount(this,-this.$$watchersCount),this.$$listenerCount)decrementListenerCount(this,this.$$listenerCount[eventName],eventName);parent&&parent.$$childHead===this&&(parent.$$childHead=this.$$nextSibling),parent&&parent.$$childTail===this&&(parent.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=noop,this.$on=this.$watch=this.$watchGroup=function(){return noop},this.$$listeners={},this.$$nextSibling=null,cleanUpScope(this)}},$eval:function(expr,locals){return $parse(expr)(this,locals)},$evalAsync:function(expr,locals){$rootScope.$$phase||asyncQueue.length||$browser.defer((function(){asyncQueue.length&&$rootScope.$digest()})),asyncQueue.push({scope:this,fn:$parse(expr),locals:locals})},$$postDigest:function(fn){postDigestQueue.push(fn)},$apply:function(expr){try{beginPhase("$apply");try{return this.$eval(expr)}finally{clearPhase()}}catch(e){$exceptionHandler(e)}finally{try{$rootScope.$digest()}catch(e){throw $exceptionHandler(e),e}}},$applyAsync:function(expr){var scope=this;function $applyAsyncExpression(){scope.$eval(expr)}expr&&applyAsyncQueue.push($applyAsyncExpression),expr=$parse(expr),scheduleApplyAsync()},$on:function(name,listener){var namedListeners=this.$$listeners[name];namedListeners||(this.$$listeners[name]=namedListeners=[]),namedListeners.push(listener);var current=this;do{current.$$listenerCount[name]||(current.$$listenerCount[name]=0),current.$$listenerCount[name]++}while(current=current.$parent);var self=this;return function(){var indexOfListener=namedListeners.indexOf(listener);-1!==indexOfListener&&(namedListeners[indexOfListener]=null,decrementListenerCount(self,1,name))}},$emit:function(name,args){var empty=[],namedListeners,scope=this,stopPropagation=!1,event={name:name,targetScope:scope,stopPropagation:function(){stopPropagation=!0},preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1},listenerArgs=concat([event],arguments,1),i,length;do{for(namedListeners=scope.$$listeners[name]||empty,event.currentScope=scope,i=0,length=namedListeners.length;i<length;i++)if(namedListeners[i])try{namedListeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else namedListeners.splice(i,1),i--,length--;if(stopPropagation)return event.currentScope=null,event;scope=scope.$parent}while(scope);return event.currentScope=null,event},$broadcast:function(name,args){var target=this,current=target,next=target,event={name:name,targetScope:target,preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1};if(!target.$$listenerCount[name])return event;for(var listenerArgs=concat([event],arguments,1),listeners,i,length;current=next;){for(event.currentScope=current,i=0,length=(listeners=current.$$listeners[name]||[]).length;i<length;i++)if(listeners[i])try{listeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else listeners.splice(i,1),i--,length--;if(!(next=current.$$listenerCount[name]&&current.$$childHead||current!==target&&current.$$nextSibling))for(;current!==target&&!(next=current.$$nextSibling);)current=current.$parent}return event.currentScope=null,event}};var $rootScope=new Scope,asyncQueue=$rootScope.$$asyncQueue=[],postDigestQueue=$rootScope.$$postDigestQueue=[],applyAsyncQueue=$rootScope.$$applyAsyncQueue=[],postDigestQueuePosition=0;return $rootScope;function beginPhase(phase){if($rootScope.$$phase)throw $rootScopeMinErr("inprog","{0} already in progress",$rootScope.$$phase);$rootScope.$$phase=phase}function clearPhase(){$rootScope.$$phase=null}function incrementWatchersCount(current,count){do{current.$$watchersCount+=count}while(current=current.$parent)}function decrementListenerCount(current,count,name){do{current.$$listenerCount[name]-=count,0===current.$$listenerCount[name]&&delete current.$$listenerCount[name]}while(current=current.$parent)}function initWatchVal(){}function flushApplyAsync(){for(;applyAsyncQueue.length;)try{applyAsyncQueue.shift()()}catch(e){$exceptionHandler(e)}applyAsyncId=null}function scheduleApplyAsync(){null===applyAsyncId&&(applyAsyncId=$browser.defer((function(){$rootScope.$apply(flushApplyAsync)})))}}]}function $$SanitizeUriProvider(){var aHrefSanitizationWhitelist=/^\s*(https?|ftp|mailto|tel|file):/,imgSrcSanitizationWhitelist=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?(aHrefSanitizationWhitelist=regexp,this):aHrefSanitizationWhitelist},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?(imgSrcSanitizationWhitelist=regexp,this):imgSrcSanitizationWhitelist},this.$get=function(){return function sanitizeUri(uri,isImage){var regex=isImage?imgSrcSanitizationWhitelist:aHrefSanitizationWhitelist,normalizedVal;return""===(normalizedVal=urlResolve(uri).href)||normalizedVal.match(regex)?uri:"unsafe:"+normalizedVal}}}ASTCompiler.prototype={compile:function(ast){var self=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},findConstantAndWatchExpressions(ast,self.$filter);var extra="",assignable;if(this.stage="assign",assignable=assignableAST(ast)){this.state.computing="assign";var result=this.nextId();this.recurse(assignable,result),this.return_(result),extra="fn.assign="+this.generateFunction("assign","s,v,l")}var toWatch=getInputs(ast.body);self.stage="inputs",forEach(toWatch,(function(watch,key){var fnKey="fn"+key;self.state[fnKey]={vars:[],body:[],own:{}},self.state.computing=fnKey;var intoId=self.nextId();self.recurse(watch,intoId),self.return_(intoId),self.state.inputs.push({name:fnKey,isPure:watch.isPure}),watch.watchId=key})),this.state.computing="fn",this.stage="main",this.recurse(ast);var fnString='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+extra+this.watchFns()+"return fn;",fn=new Function("$filter","getStringValue","ifDefined","plus",fnString)(this.$filter,getStringValue,ifDefined,plusFn);return this.state=this.stage=void 0,fn},USE:"use",STRICT:"strict",watchFns:function(){var result=[],inputs=this.state.inputs,self=this;return forEach(inputs,(function(input){result.push("var "+input.name+"="+self.generateFunction(input.name,"s")),input.isPure&&result.push(input.name,".isPure="+JSON.stringify(input.isPure)+";")})),inputs.length&&result.push("fn.inputs=["+inputs.map((function(i){return i.name})).join(",")+"];"),result.join("")},generateFunction:function(name,params){return"function("+params+"){"+this.varsPrefix(name)+this.body(name)+"};"},filterPrefix:function(){var parts=[],self=this;return forEach(this.state.filters,(function(id,filter){parts.push(id+"=$filter("+self.escape(filter)+")")})),parts.length?"var "+parts.join(",")+";":""},varsPrefix:function(section){return this.state[section].vars.length?"var "+this.state[section].vars.join(",")+";":""},body:function(section){return this.state[section].body.join("")},recurse:function(ast,intoId,nameId,recursionFn,create,skipWatchIdCheck){var left,right,self=this,args,expression,computed;if(recursionFn=recursionFn||noop,!skipWatchIdCheck&&isDefined(ast.watchId))return intoId=intoId||this.nextId(),void this.if_("i",this.lazyAssign(intoId,this.computedMember("i",ast.watchId)),this.lazyRecurse(ast,intoId,nameId,recursionFn,create,!0));switch(ast.type){case AST.Program:forEach(ast.body,(function(expression,pos){self.recurse(expression.expression,void 0,void 0,(function(expr){right=expr})),pos!==ast.body.length-1?self.current().body.push(right,";"):self.return_(right)}));break;case AST.Literal:expression=this.escape(ast.value),this.assign(intoId,expression),recursionFn(intoId||expression);break;case AST.UnaryExpression:this.recurse(ast.argument,void 0,void 0,(function(expr){right=expr})),expression=ast.operator+"("+this.ifDefined(right,0)+")",this.assign(intoId,expression),recursionFn(expression);break;case AST.BinaryExpression:this.recurse(ast.left,void 0,void 0,(function(expr){left=expr})),this.recurse(ast.right,void 0,void 0,(function(expr){right=expr})),expression="+"===ast.operator?this.plus(left,right):"-"===ast.operator?this.ifDefined(left,0)+ast.operator+this.ifDefined(right,0):"("+left+")"+ast.operator+"("+right+")",this.assign(intoId,expression),recursionFn(expression);break;case AST.LogicalExpression:intoId=intoId||this.nextId(),self.recurse(ast.left,intoId),self.if_("&&"===ast.operator?intoId:self.not(intoId),self.lazyRecurse(ast.right,intoId)),recursionFn(intoId);break;case AST.ConditionalExpression:intoId=intoId||this.nextId(),self.recurse(ast.test,intoId),self.if_(intoId,self.lazyRecurse(ast.alternate,intoId),self.lazyRecurse(ast.consequent,intoId)),recursionFn(intoId);break;case AST.Identifier:intoId=intoId||this.nextId(),nameId&&(nameId.context="inputs"===self.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",ast.name)+"?l:s"),nameId.computed=!1,nameId.name=ast.name),self.if_("inputs"===self.stage||self.not(self.getHasOwnProperty("l",ast.name)),(function(){self.if_("inputs"===self.stage||"s",(function(){create&&1!==create&&self.if_(self.isNull(self.nonComputedMember("s",ast.name)),self.lazyAssign(self.nonComputedMember("s",ast.name),"{}")),self.assign(intoId,self.nonComputedMember("s",ast.name))}))}),intoId&&self.lazyAssign(intoId,self.nonComputedMember("l",ast.name))),recursionFn(intoId);break;case AST.MemberExpression:left=nameId&&(nameId.context=this.nextId())||this.nextId(),intoId=intoId||this.nextId(),self.recurse(ast.object,left,void 0,(function(){self.if_(self.notNull(left),(function(){ast.computed?(right=self.nextId(),self.recurse(ast.property,right),self.getStringValue(right),create&&1!==create&&self.if_(self.not(self.computedMember(left,right)),self.lazyAssign(self.computedMember(left,right),"{}")),expression=self.computedMember(left,right),self.assign(intoId,expression),nameId&&(nameId.computed=!0,nameId.name=right)):(create&&1!==create&&self.if_(self.isNull(self.nonComputedMember(left,ast.property.name)),self.lazyAssign(self.nonComputedMember(left,ast.property.name),"{}")),expression=self.nonComputedMember(left,ast.property.name),self.assign(intoId,expression),nameId&&(nameId.computed=!1,nameId.name=ast.property.name))}),(function(){self.assign(intoId,"undefined")})),recursionFn(intoId)}),!!create);break;case AST.CallExpression:intoId=intoId||this.nextId(),ast.filter?(right=self.filter(ast.callee.name),args=[],forEach(ast.arguments,(function(expr){var argument=self.nextId();self.recurse(expr,argument),args.push(argument)})),expression=right+"("+args.join(",")+")",self.assign(intoId,expression),recursionFn(intoId)):(right=self.nextId(),left={},args=[],self.recurse(ast.callee,right,left,(function(){self.if_(self.notNull(right),(function(){forEach(ast.arguments,(function(expr){self.recurse(expr,ast.constant?void 0:self.nextId(),void 0,(function(argument){args.push(argument)}))})),expression=left.name?self.member(left.context,left.name,left.computed)+"("+args.join(",")+")":right+"("+args.join(",")+")",self.assign(intoId,expression)}),(function(){self.assign(intoId,"undefined")})),recursionFn(intoId)})));break;case AST.AssignmentExpression:right=this.nextId(),left={},this.recurse(ast.left,void 0,left,(function(){self.if_(self.notNull(left.context),(function(){self.recurse(ast.right,right),expression=self.member(left.context,left.name,left.computed)+ast.operator+right,self.assign(intoId,expression),recursionFn(intoId||expression)}))}),1);break;case AST.ArrayExpression:args=[],forEach(ast.elements,(function(expr){self.recurse(expr,ast.constant?void 0:self.nextId(),void 0,(function(argument){args.push(argument)}))})),expression="["+args.join(",")+"]",this.assign(intoId,expression),recursionFn(intoId||expression);break;case AST.ObjectExpression:args=[],computed=!1,forEach(ast.properties,(function(property){property.computed&&(computed=!0)})),computed?(intoId=intoId||this.nextId(),this.assign(intoId,"{}"),forEach(ast.properties,(function(property){property.computed?(left=self.nextId(),self.recurse(property.key,left)):left=property.key.type===AST.Identifier?property.key.name:""+property.key.value,right=self.nextId(),self.recurse(property.value,right),self.assign(self.member(intoId,left,property.computed),right)}))):(forEach(ast.properties,(function(property){self.recurse(property.value,ast.constant?void 0:self.nextId(),void 0,(function(expr){args.push(self.escape(property.key.type===AST.Identifier?property.key.name:""+property.key.value)+":"+expr)}))})),expression="{"+args.join(",")+"}",this.assign(intoId,expression)),recursionFn(intoId||expression);break;case AST.ThisExpression:this.assign(intoId,"s"),recursionFn(intoId||"s");break;case AST.LocalsExpression:this.assign(intoId,"l"),recursionFn(intoId||"l");break;case AST.NGValueParameter:this.assign(intoId,"v"),recursionFn(intoId||"v")}},getHasOwnProperty:function(element,property){var key=element+"."+property,own=this.current().own;return own.hasOwnProperty(key)||(own[key]=this.nextId(!1,element+"&&("+this.escape(property)+" in "+element+")")),own[key]},assign:function(id,value){if(id)return this.current().body.push(id,"=",value,";"),id},filter:function(filterName){return this.state.filters.hasOwnProperty(filterName)||(this.state.filters[filterName]=this.nextId(!0)),this.state.filters[filterName]},ifDefined:function(id,defaultValue){return"ifDefined("+id+","+this.escape(defaultValue)+")"},plus:function(left,right){return"plus("+left+","+right+")"},return_:function(id){this.current().body.push("return ",id,";")},if_:function(test,alternate,consequent){if(!0===test)alternate();else{var body=this.current().body;body.push("if(",test,"){"),alternate(),body.push("}"),consequent&&(body.push("else{"),consequent(),body.push("}"))}},not:function(expression){return"!("+expression+")"},isNull:function(expression){return expression+"==null"},notNull:function(expression){return expression+"!=null"},nonComputedMember:function(left,right){var SAFE_IDENTIFIER,UNSAFE_CHARACTERS=/[^$_a-zA-Z0-9]/g;return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(right)?left+"."+right:left+'["'+right.replace(UNSAFE_CHARACTERS,this.stringEscapeFn)+'"]'},computedMember:function(left,right){return left+"["+right+"]"},member:function(left,right,computed){return computed?this.computedMember(left,right):this.nonComputedMember(left,right)},getStringValue:function(item){this.assign(item,"getStringValue("+item+")")},lazyRecurse:function(ast,intoId,nameId,recursionFn,create,skipWatchIdCheck){var self=this;return function(){self.recurse(ast,intoId,nameId,recursionFn,create,skipWatchIdCheck)}},lazyAssign:function(id,value){var self=this;return function(){self.assign(id,value)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(c){return"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)},escape:function(value){if(isString(value))return"'"+value.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(isNumber(value))return value.toString();if(!0===value)return"true";if(!1===value)return"false";if(null===value)return"null";if(void 0===value)return"undefined";throw $parseMinErr("esc","IMPOSSIBLE")},nextId:function(skip,init){var id="v"+this.state.nextId++;return skip||this.current().vars.push(id+(init?"="+init:"")),id},current:function(){return this.state[this.state.computing]}},ASTInterpreter.prototype={compile:function(ast){var self=this,assignable,assign;findConstantAndWatchExpressions(ast,self.$filter),(assignable=assignableAST(ast))&&(assign=this.recurse(assignable));var toWatch=getInputs(ast.body),inputs;toWatch&&(inputs=[],forEach(toWatch,(function(watch,key){var input=self.recurse(watch);input.isPure=watch.isPure,watch.input=input,inputs.push(input),watch.watchId=key})));var expressions=[];forEach(ast.body,(function(expression){expressions.push(self.recurse(expression.expression))}));var fn=0===ast.body.length?noop:1===ast.body.length?expressions[0]:function(scope,locals){var lastValue;return forEach(expressions,(function(exp){lastValue=exp(scope,locals)})),lastValue};return assign&&(fn.assign=function(scope,value,locals){return assign(scope,locals,value)}),inputs&&(fn.inputs=inputs),fn},recurse:function(ast,context,create){var left,right,self=this,args;if(ast.input)return this.inputs(ast.input,ast.watchId);switch(ast.type){case AST.Literal:return this.value(ast.value,context);case AST.UnaryExpression:return right=this.recurse(ast.argument),this["unary"+ast.operator](right,context);case AST.BinaryExpression:case AST.LogicalExpression:return left=this.recurse(ast.left),right=this.recurse(ast.right),this["binary"+ast.operator](left,right,context);case AST.ConditionalExpression:return this["ternary?:"](this.recurse(ast.test),this.recurse(ast.alternate),this.recurse(ast.consequent),context);case AST.Identifier:return self.identifier(ast.name,context,create);case AST.MemberExpression:return left=this.recurse(ast.object,!1,!!create),ast.computed||(right=ast.property.name),ast.computed&&(right=this.recurse(ast.property)),ast.computed?this.computedMember(left,right,context,create):this.nonComputedMember(left,right,context,create);case AST.CallExpression:return args=[],forEach(ast.arguments,(function(expr){args.push(self.recurse(expr))})),ast.filter&&(right=this.$filter(ast.callee.name)),ast.filter||(right=this.recurse(ast.callee,!0)),ast.filter?function(scope,locals,assign,inputs){for(var values=[],i=0;i<args.length;++i)values.push(args[i](scope,locals,assign,inputs));var value=right.apply(void 0,values,inputs);return context?{context:void 0,name:void 0,value:value}:value}:function(scope,locals,assign,inputs){var rhs=right(scope,locals,assign,inputs),value;if(null!=rhs.value){for(var values=[],i=0;i<args.length;++i)values.push(args[i](scope,locals,assign,inputs));value=rhs.value.apply(rhs.context,values)}return context?{value:value}:value};case AST.AssignmentExpression:return left=this.recurse(ast.left,!0,1),right=this.recurse(ast.right),function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs),rhs=right(scope,locals,assign,inputs);return lhs.context[lhs.name]=rhs,context?{value:rhs}:rhs};case AST.ArrayExpression:return args=[],forEach(ast.elements,(function(expr){args.push(self.recurse(expr))})),function(scope,locals,assign,inputs){for(var value=[],i=0;i<args.length;++i)value.push(args[i](scope,locals,assign,inputs));return context?{value:value}:value};case AST.ObjectExpression:return args=[],forEach(ast.properties,(function(property){property.computed?args.push({key:self.recurse(property.key),computed:!0,value:self.recurse(property.value)}):args.push({key:property.key.type===AST.Identifier?property.key.name:""+property.key.value,computed:!1,value:self.recurse(property.value)})})),function(scope,locals,assign,inputs){for(var value={},i=0;i<args.length;++i)args[i].computed?value[args[i].key(scope,locals,assign,inputs)]=args[i].value(scope,locals,assign,inputs):value[args[i].key]=args[i].value(scope,locals,assign,inputs);return context?{value:value}:value};case AST.ThisExpression:return function(scope){return context?{value:scope}:scope};case AST.LocalsExpression:return function(scope,locals){return context?{value:locals}:locals};case AST.NGValueParameter:return function(scope,locals,assign){return context?{value:assign}:assign}}},"unary+":function(argument,context){return function(scope,locals,assign,inputs){var arg=argument(scope,locals,assign,inputs);return arg=isDefined(arg)?+arg:0,context?{value:arg}:arg}},"unary-":function(argument,context){return function(scope,locals,assign,inputs){var arg=argument(scope,locals,assign,inputs);return arg=isDefined(arg)?-arg:-0,context?{value:arg}:arg}},"unary!":function(argument,context){return function(scope,locals,assign,inputs){var arg=!argument(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary+":function(left,right,context){return function(scope,locals,assign,inputs){var lhs,rhs,arg=plusFn(left(scope,locals,assign,inputs),right(scope,locals,assign,inputs));return context?{value:arg}:arg}},"binary-":function(left,right,context){return function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs),rhs=right(scope,locals,assign,inputs),arg=(isDefined(lhs)?lhs:0)-(isDefined(rhs)?rhs:0);return context?{value:arg}:arg}},"binary*":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)*right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary/":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)/right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary%":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)%right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary===":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)===right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary!==":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)!==right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary==":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)==right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary!=":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)!=right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary<":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)<right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary>":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)>right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary<=":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)<=right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary>=":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)>=right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary&&":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)&&right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary||":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)||right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"ternary?:":function(test,alternate,consequent,context){return function(scope,locals,assign,inputs){var arg=test(scope,locals,assign,inputs)?alternate(scope,locals,assign,inputs):consequent(scope,locals,assign,inputs);return context?{value:arg}:arg}},value:function(value,context){return function(){return context?{context:void 0,name:void 0,value:value}:value}},identifier:function(name,context,create){return function(scope,locals,assign,inputs){var base=locals&&name in locals?locals:scope;create&&1!==create&&base&&null==base[name]&&(base[name]={});var value=base?base[name]:void 0;return context?{context:base,name:name,value:value}:value}},computedMember:function(left,right,context,create){return function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs),rhs,value;return null!=lhs&&(rhs=getStringValue(rhs=right(scope,locals,assign,inputs)),create&&1!==create&&lhs&&!lhs[rhs]&&(lhs[rhs]={}),value=lhs[rhs]),context?{context:lhs,name:rhs,value:value}:value}},nonComputedMember:function(left,right,context,create){return function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs);create&&1!==create&&lhs&&null==lhs[right]&&(lhs[right]={});var value=null!=lhs?lhs[right]:void 0;return context?{context:lhs,name:right,value:value}:value}},inputs:function(input,watchId){return function(scope,value,locals,inputs){return inputs?inputs[watchId]:input(scope,value,locals)}}},Parser.prototype={constructor:Parser,parse:function(text){var ast=this.ast.ast(text),fn=this.astCompiler.compile(ast);return fn.literal=isLiteral(ast),fn.constant=isConstant(ast),fn}};var $sceMinErr=minErr("$sce"),SCE_CONTEXTS={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},UNDERSCORE_LOWERCASE_REGEXP=/_([a-z])/g;function snakeToCamel(name){return name.replace(UNDERSCORE_LOWERCASE_REGEXP,fnCamelCaseReplace)}function adjustMatcher(matcher){if("self"===matcher)return matcher;if(isString(matcher)){if(matcher.indexOf("***")>-1)throw $sceMinErr("iwcard","Illegal sequence *** in string matcher.  String: {0}",matcher);return matcher=escapeForRegexp(matcher).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+matcher+"$")}if(isRegExp(matcher))return new RegExp("^"+matcher.source+"$");throw $sceMinErr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function adjustMatchers(matchers){var adjustedMatchers=[];return isDefined(matchers)&&forEach(matchers,(function(matcher){adjustedMatchers.push(adjustMatcher(matcher))})),adjustedMatchers}function $SceDelegateProvider(){this.SCE_CONTEXTS=SCE_CONTEXTS;var resourceUrlWhitelist=["self"],resourceUrlBlacklist=[];this.resourceUrlWhitelist=function(value){return arguments.length&&(resourceUrlWhitelist=adjustMatchers(value)),resourceUrlWhitelist},this.resourceUrlBlacklist=function(value){return arguments.length&&(resourceUrlBlacklist=adjustMatchers(value)),resourceUrlBlacklist},this.$get=["$injector",function($injector){var htmlSanitizer=function htmlSanitizer(html){throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")};function matchUrl(matcher,parsedUrl){return"self"===matcher?urlIsSameOrigin(parsedUrl):!!matcher.exec(parsedUrl.href)}function isResourceUrlAllowedByPolicy(url){var parsedUrl=urlResolve(url.toString()),i,n,allowed=!1;for(i=0,n=resourceUrlWhitelist.length;i<n;i++)if(matchUrl(resourceUrlWhitelist[i],parsedUrl)){allowed=!0;break}if(allowed)for(i=0,n=resourceUrlBlacklist.length;i<n;i++)if(matchUrl(resourceUrlBlacklist[i],parsedUrl)){allowed=!1;break}return allowed}function generateHolderType(Base){var holderType=function TrustedValueHolderType(trustedValue){this.$$unwrapTrustedValue=function(){return trustedValue}};return Base&&(holderType.prototype=new Base),holderType.prototype.valueOf=function sceValueOf(){return this.$$unwrapTrustedValue()},holderType.prototype.toString=function sceToString(){return this.$$unwrapTrustedValue().toString()},holderType}$injector.has("$sanitize")&&(htmlSanitizer=$injector.get("$sanitize"));var trustedValueHolderBase=generateHolderType(),byType={};function trustAs(type,trustedValue){var Constructor=byType.hasOwnProperty(type)?byType[type]:null;if(!Constructor)throw $sceMinErr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",type,trustedValue);if(null===trustedValue||isUndefined(trustedValue)||""===trustedValue)return trustedValue;if("string"!=typeof trustedValue)throw $sceMinErr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",type);return new Constructor(trustedValue)}function valueOf(maybeTrusted){return maybeTrusted instanceof trustedValueHolderBase?maybeTrusted.$$unwrapTrustedValue():maybeTrusted}function getTrusted(type,maybeTrusted){if(null===maybeTrusted||isUndefined(maybeTrusted)||""===maybeTrusted)return maybeTrusted;var constructor=byType.hasOwnProperty(type)?byType[type]:null;if(constructor&&maybeTrusted instanceof constructor)return maybeTrusted.$$unwrapTrustedValue();if(type===SCE_CONTEXTS.RESOURCE_URL){if(isResourceUrlAllowedByPolicy(maybeTrusted))return maybeTrusted;throw $sceMinErr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",maybeTrusted.toString())}if(type===SCE_CONTEXTS.HTML)return htmlSanitizer(maybeTrusted);throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")}return byType[SCE_CONTEXTS.HTML]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.CSS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.URL]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.JS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.RESOURCE_URL]=generateHolderType(byType[SCE_CONTEXTS.URL]),{trustAs:trustAs,getTrusted:getTrusted,valueOf:valueOf}}]}function $SceProvider(){var enabled=!0;this.enabled=function(value){return arguments.length&&(enabled=!!value),enabled},this.$get=["$parse","$sceDelegate",function($parse,$sceDelegate){if(enabled&&msie<8)throw $sceMinErr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var sce=shallowCopy(SCE_CONTEXTS);sce.isEnabled=function(){return enabled},sce.trustAs=$sceDelegate.trustAs,sce.getTrusted=$sceDelegate.getTrusted,sce.valueOf=$sceDelegate.valueOf,enabled||(sce.trustAs=sce.getTrusted=function(type,value){return value},sce.valueOf=identity),sce.parseAs=function sceParseAs(type,expr){var parsed=$parse(expr);return parsed.literal&&parsed.constant?parsed:$parse(expr,(function(value){return sce.getTrusted(type,value)}))};var parse=sce.parseAs,getTrusted=sce.getTrusted,trustAs=sce.trustAs;return forEach(SCE_CONTEXTS,(function(enumValue,name){var lName=lowercase(name);sce[snakeToCamel("parse_as_"+lName)]=function(expr){return parse(enumValue,expr)},sce[snakeToCamel("get_trusted_"+lName)]=function(value){return getTrusted(enumValue,value)},sce[snakeToCamel("trust_as_"+lName)]=function(value){return trustAs(enumValue,value)}})),sce}]}function $SnifferProvider(){this.$get=["$window","$document",function($window,$document){var eventSupport={},isNw,isChromePackagedApp,hasHistoryPushState=!(!($window.nw&&$window.nw.process)&&$window.chrome&&($window.chrome.app&&$window.chrome.app.runtime||!$window.chrome.app&&$window.chrome.runtime&&$window.chrome.runtime.id))&&$window.history&&$window.history.pushState,android=toInt((/android (\d+)/.exec(lowercase(($window.navigator||{}).userAgent))||[])[1]),boxee=/Boxee/i.test(($window.navigator||{}).userAgent),document=$document[0]||{},bodyStyle=document.body&&document.body.style,transitions=!1,animations=!1;return bodyStyle&&(transitions=!!("transition"in bodyStyle||"webkitTransition"in bodyStyle),animations=!!("animation"in bodyStyle||"webkitAnimation"in bodyStyle)),{history:!(!hasHistoryPushState||android<4||boxee),hasEvent:function(event){if("input"===event&&msie)return!1;if(isUndefined(eventSupport[event])){var divElm=document.createElement("div");eventSupport[event]="on"+event in divElm}return eventSupport[event]},csp:csp(),transitions:transitions,animations:animations,android:android}}]}var $templateRequestMinErr=minErr("$compile");function $TemplateRequestProvider(){var httpOptions;this.httpOptions=function(val){return val?(httpOptions=val,this):httpOptions},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function($exceptionHandler,$templateCache,$http,$q,$sce){function handleRequestFn(tpl,ignoreRequestError){handleRequestFn.totalPendingRequests++,isString(tpl)&&!isUndefined($templateCache.get(tpl))||(tpl=$sce.getTrustedResourceUrl(tpl));var transformResponse=$http.defaults&&$http.defaults.transformResponse;return isArray(transformResponse)?transformResponse=transformResponse.filter((function(transformer){return transformer!==defaultHttpResponseTransform})):transformResponse===defaultHttpResponseTransform&&(transformResponse=null),$http.get(tpl,extend({cache:$templateCache,transformResponse:transformResponse},httpOptions)).finally((function(){handleRequestFn.totalPendingRequests--})).then((function(response){return $templateCache.put(tpl,response.data),response.data}),handleError);function handleError(resp){return ignoreRequestError||(resp=$templateRequestMinErr("tpload","Failed to load template: {0} (HTTP status: {1} {2})",tpl,resp.status,resp.statusText),$exceptionHandler(resp)),$q.reject(resp)}}return handleRequestFn.totalPendingRequests=0,handleRequestFn}]}function $$TestabilityProvider(){this.$get=["$rootScope","$browser","$location",function($rootScope,$browser,$location){var testability={findBindings:function(element,expression,opt_exactMatch){var bindings=element.getElementsByClassName("ng-binding"),matches=[];return forEach(bindings,(function(binding){var dataBinding=angular.element(binding).data("$binding");dataBinding&&forEach(dataBinding,(function(bindingName){var matcher;opt_exactMatch?new RegExp("(^|\\s)"+escapeForRegexp(expression)+"(\\s|\\||$)").test(bindingName)&&matches.push(binding):-1!==bindingName.indexOf(expression)&&matches.push(binding)}))})),matches},findModels:function(element,expression,opt_exactMatch){for(var prefixes=["ng-","data-ng-","ng\\:"],p=0;p<prefixes.length;++p){var attributeEquals,selector="["+prefixes[p]+"model"+(opt_exactMatch?"=":"*=")+'"'+expression+'"]',elements=element.querySelectorAll(selector);if(elements.length)return elements}},getLocation:function(){return $location.url()},setLocation:function(url){url!==$location.url()&&($location.url(url),$rootScope.$digest())},whenStable:function(callback){$browser.notifyWhenNoOutstandingRequests(callback)}};return testability}]}function $TimeoutProvider(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function($rootScope,$browser,$q,$$q,$exceptionHandler){var deferreds={};function timeout(fn,delay,invokeApply){isFunction(fn)||(invokeApply=delay,delay=fn,fn=noop);var args=sliceArgs(arguments,3),skipApply=isDefined(invokeApply)&&!invokeApply,deferred=(skipApply?$$q:$q).defer(),promise=deferred.promise,timeoutId;return timeoutId=$browser.defer((function(){try{deferred.resolve(fn.apply(null,args))}catch(e){deferred.reject(e),$exceptionHandler(e)}finally{delete deferreds[promise.$$timeoutId]}skipApply||$rootScope.$apply()}),delay),promise.$$timeoutId=timeoutId,deferreds[timeoutId]=deferred,promise}return timeout.cancel=function(promise){return!!(promise&&promise.$$timeoutId in deferreds)&&(markQExceptionHandled(deferreds[promise.$$timeoutId].promise),deferreds[promise.$$timeoutId].reject("canceled"),delete deferreds[promise.$$timeoutId],$browser.defer.cancel(promise.$$timeoutId))},timeout}]}var urlParsingNode=window.document.createElement("a"),originUrl=urlResolve(window.location.href);function urlResolve(url){var href=url;return msie&&(urlParsingNode.setAttribute("href",href),href=urlParsingNode.href),urlParsingNode.setAttribute("href",href),{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,""):"",host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,""):"",hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,""):"",hostname:urlParsingNode.hostname,port:urlParsingNode.port,pathname:"/"===urlParsingNode.pathname.charAt(0)?urlParsingNode.pathname:"/"+urlParsingNode.pathname}}function urlIsSameOrigin(requestUrl){var parsed=isString(requestUrl)?urlResolve(requestUrl):requestUrl;return parsed.protocol===originUrl.protocol&&parsed.host===originUrl.host}function $WindowProvider(){this.$get=valueFn(window)}function $$CookieReader($document){var rawDocument=$document[0]||{},lastCookies={},lastCookieString="";function safeGetCookie(rawDocument){try{return rawDocument.cookie||""}catch(e){return""}}function safeDecodeURIComponent(str){try{return decodeURIComponent(str)}catch(e){return str}}return function(){var cookieArray,cookie,i,index,name,currentCookieString=safeGetCookie(rawDocument);if(currentCookieString!==lastCookieString)for(cookieArray=(lastCookieString=currentCookieString).split("; "),lastCookies={},i=0;i<cookieArray.length;i++)(index=(cookie=cookieArray[i]).indexOf("="))>0&&(name=safeDecodeURIComponent(cookie.substring(0,index)),isUndefined(lastCookies[name])&&(lastCookies[name]=safeDecodeURIComponent(cookie.substring(index+1))));return lastCookies}}function $$CookieReaderProvider(){this.$get=$$CookieReader}function $FilterProvider($provide){var suffix="Filter";function register(name,factory){if(isObject(name)){var filters={};return forEach(name,(function(filter,key){filters[key]=register(key,filter)})),filters}return $provide.factory(name+suffix,factory)}this.register=register,this.$get=["$injector",function($injector){return function(name){return $injector.get(name+suffix)}}],register("currency",currencyFilter),register("date",dateFilter),register("filter",filterFilter),register("json",jsonFilter),register("limitTo",limitToFilter),register("lowercase",lowercaseFilter),register("number",numberFilter),register("orderBy",orderByFilter),register("uppercase",uppercaseFilter)}function filterFilter(){return function(array,expression,comparator,anyPropertyKey){if(!isArrayLike(array)){if(null==array)return array;throw minErr("filter")("notarray","Expected array but received: {0}",array)}var expressionType,predicateFn,matchAgainstAnyProp;switch(anyPropertyKey=anyPropertyKey||"$",getTypeForFilter(expression)){case"function":predicateFn=expression;break;case"boolean":case"null":case"number":case"string":matchAgainstAnyProp=!0;case"object":predicateFn=createPredicateFn(expression,comparator,anyPropertyKey,matchAgainstAnyProp);break;default:return array}return Array.prototype.filter.call(array,predicateFn)}}function createPredicateFn(expression,comparator,anyPropertyKey,matchAgainstAnyProp){var shouldMatchPrimitives=isObject(expression)&&anyPropertyKey in expression,predicateFn;return!0===comparator?comparator=equals:isFunction(comparator)||(comparator=function(actual,expected){return!isUndefined(actual)&&(null===actual||null===expected?actual===expected:!(isObject(expected)||isObject(actual)&&!hasCustomToString(actual))&&(actual=lowercase(""+actual),expected=lowercase(""+expected),-1!==actual.indexOf(expected)))}),predicateFn=function(item){return shouldMatchPrimitives&&!isObject(item)?deepCompare(item,expression[anyPropertyKey],comparator,anyPropertyKey,!1):deepCompare(item,expression,comparator,anyPropertyKey,matchAgainstAnyProp)}}function deepCompare(actual,expected,comparator,anyPropertyKey,matchAgainstAnyProp,dontMatchWholeObject){var actualType=getTypeForFilter(actual),expectedType=getTypeForFilter(expected);if("string"===expectedType&&"!"===expected.charAt(0))return!deepCompare(actual,expected.substring(1),comparator,anyPropertyKey,matchAgainstAnyProp);if(isArray(actual))return actual.some((function(item){return deepCompare(item,expected,comparator,anyPropertyKey,matchAgainstAnyProp)}));switch(actualType){case"object":var key;if(matchAgainstAnyProp){for(key in actual)if(key.charAt&&"$"!==key.charAt(0)&&deepCompare(actual[key],expected,comparator,anyPropertyKey,!0))return!0;return!dontMatchWholeObject&&deepCompare(actual,expected,comparator,anyPropertyKey,!1)}if("object"===expectedType){for(key in expected){var expectedVal=expected[key];if(!isFunction(expectedVal)&&!isUndefined(expectedVal)){var matchAnyProperty=key===anyPropertyKey,actualVal;if(!deepCompare(matchAnyProperty?actual:actual[key],expectedVal,comparator,anyPropertyKey,matchAnyProperty,matchAnyProperty))return!1}}return!0}return comparator(actual,expected);case"function":return!1;default:return comparator(actual,expected)}}function getTypeForFilter(val){return null===val?"null":typeof val}$$CookieReader.$inject=["$document"],$FilterProvider.$inject=["$provide"];var MAX_DIGITS=22,DECIMAL_SEP=".",ZERO_CHAR="0";function currencyFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(amount,currencySymbol,fractionSize){return isUndefined(currencySymbol)&&(currencySymbol=formats.CURRENCY_SYM),isUndefined(fractionSize)&&(fractionSize=formats.PATTERNS[1].maxFrac),null==amount?amount:formatNumber(amount,formats.PATTERNS[1],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize).replace(/\u00A4/g,currencySymbol)}}function numberFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(number,fractionSize){return null==number?number:formatNumber(number,formats.PATTERNS[0],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize)}}function parse(numStr){var exponent=0,digits,numberOfIntegerDigits,i,j,zeros;for((numberOfIntegerDigits=numStr.indexOf("."))>-1&&(numStr=numStr.replace(".","")),(i=numStr.search(/e/i))>0?(numberOfIntegerDigits<0&&(numberOfIntegerDigits=i),numberOfIntegerDigits+=+numStr.slice(i+1),numStr=numStr.substring(0,i)):numberOfIntegerDigits<0&&(numberOfIntegerDigits=numStr.length),i=0;"0"===numStr.charAt(i);i++);if(i===(zeros=numStr.length))digits=[0],numberOfIntegerDigits=1;else{for(zeros--;"0"===numStr.charAt(zeros);)zeros--;for(numberOfIntegerDigits-=i,digits=[],j=0;i<=zeros;i++,j++)digits[j]=+numStr.charAt(i)}return numberOfIntegerDigits>22&&(digits=digits.splice(0,21),exponent=numberOfIntegerDigits-1,numberOfIntegerDigits=1),{d:digits,e:exponent,i:numberOfIntegerDigits}}function roundNumber(parsedNumber,fractionSize,minFrac,maxFrac){var digits=parsedNumber.d,fractionLen=digits.length-parsedNumber.i,roundAt=(fractionSize=isUndefined(fractionSize)?Math.min(Math.max(minFrac,fractionLen),maxFrac):+fractionSize)+parsedNumber.i,digit=digits[roundAt];if(roundAt>0){digits.splice(Math.max(parsedNumber.i,roundAt));for(var j=roundAt;j<digits.length;j++)digits[j]=0}else{fractionLen=Math.max(0,fractionLen),parsedNumber.i=1,digits.length=Math.max(1,roundAt=fractionSize+1),digits[0]=0;for(var i=1;i<roundAt;i++)digits[i]=0}if(digit>=5)if(roundAt-1<0){for(var k=0;k>roundAt;k--)digits.unshift(0),parsedNumber.i++;digits.unshift(1),parsedNumber.i++}else digits[roundAt-1]++;for(;fractionLen<Math.max(0,fractionSize);fractionLen++)digits.push(0);var carry=digits.reduceRight((function(carry,d,i,digits){return d+=carry,digits[i]=d%10,Math.floor(d/10)}),0);carry&&(digits.unshift(carry),parsedNumber.i++)}function formatNumber(number,pattern,groupSep,decimalSep,fractionSize){if(!isString(number)&&!isNumber(number)||isNaN(number))return"";var isInfinity=!isFinite(number),isZero=!1,numStr=Math.abs(number)+"",formattedText="",parsedNumber;if(isInfinity)formattedText="∞";else{roundNumber(parsedNumber=parse(numStr),fractionSize,pattern.minFrac,pattern.maxFrac);var digits=parsedNumber.d,integerLen=parsedNumber.i,exponent=parsedNumber.e,decimals=[];for(isZero=digits.reduce((function(isZero,d){return isZero&&!d}),!0);integerLen<0;)digits.unshift(0),integerLen++;integerLen>0?decimals=digits.splice(integerLen,digits.length):(decimals=digits,digits=[0]);var groups=[];for(digits.length>=pattern.lgSize&&groups.unshift(digits.splice(-pattern.lgSize,digits.length).join(""));digits.length>pattern.gSize;)groups.unshift(digits.splice(-pattern.gSize,digits.length).join(""));digits.length&&groups.unshift(digits.join("")),formattedText=groups.join(groupSep),decimals.length&&(formattedText+=decimalSep+decimals.join("")),exponent&&(formattedText+="e+"+exponent)}return number<0&&!isZero?pattern.negPre+formattedText+pattern.negSuf:pattern.posPre+formattedText+pattern.posSuf}function padNumber(num,digits,trim,negWrap){var neg="";for((num<0||negWrap&&num<=0)&&(negWrap?num=1-num:(num=-num,neg="-")),num=""+num;num.length<digits;)num="0"+num;return trim&&(num=num.substr(num.length-digits)),neg+num}function dateGetter(name,size,offset,trim,negWrap){return offset=offset||0,function(date){var value=date["get"+name]();return(offset>0||value>-offset)&&(value+=offset),0===value&&-12===offset&&(value=12),padNumber(value,size,trim,negWrap)}}function dateStrGetter(name,shortForm,standAlone){return function(date,formats){var value=date["get"+name](),propPrefix,get;return formats[uppercase((standAlone?"STANDALONE":"")+(shortForm?"SHORT":"")+name)][value]}}function timeZoneGetter(date,formats,offset){var zone=-1*offset,paddedZone=zone>=0?"+":"";return paddedZone+=padNumber(Math[zone>0?"floor":"ceil"](zone/60),2)+padNumber(Math.abs(zone%60),2)}function getFirstThursdayOfYear(year){var dayOfWeekOnFirst=new Date(year,0,1).getDay();return new Date(year,0,(dayOfWeekOnFirst<=4?5:12)-dayOfWeekOnFirst)}function getThursdayThisWeek(datetime){return new Date(datetime.getFullYear(),datetime.getMonth(),datetime.getDate()+(4-datetime.getDay()))}function weekGetter(size){return function(date){var firstThurs=getFirstThursdayOfYear(date.getFullYear()),thisThurs,diff=+getThursdayThisWeek(date)-+firstThurs,result;return padNumber(1+Math.round(diff/6048e5),size)}}function ampmGetter(date,formats){return date.getHours()<12?formats.AMPMS[0]:formats.AMPMS[1]}function eraGetter(date,formats){return date.getFullYear()<=0?formats.ERAS[0]:formats.ERAS[1]}function longEraGetter(date,formats){return date.getFullYear()<=0?formats.ERANAMES[0]:formats.ERANAMES[1]}currencyFilter.$inject=["$locale"],numberFilter.$inject=["$locale"];var DATE_FORMATS={yyyy:dateGetter("FullYear",4,0,!1,!0),yy:dateGetter("FullYear",2,0,!0,!0),y:dateGetter("FullYear",1,0,!1,!0),MMMM:dateStrGetter("Month"),MMM:dateStrGetter("Month",!0),MM:dateGetter("Month",2,1),M:dateGetter("Month",1,1),LLLL:dateStrGetter("Month",!1,!0),dd:dateGetter("Date",2),d:dateGetter("Date",1),HH:dateGetter("Hours",2),H:dateGetter("Hours",1),hh:dateGetter("Hours",2,-12),h:dateGetter("Hours",1,-12),mm:dateGetter("Minutes",2),m:dateGetter("Minutes",1),ss:dateGetter("Seconds",2),s:dateGetter("Seconds",1),sss:dateGetter("Milliseconds",3),EEEE:dateStrGetter("Day"),EEE:dateStrGetter("Day",!0),a:ampmGetter,Z:timeZoneGetter,ww:weekGetter(2),w:weekGetter(1),G:eraGetter,GG:eraGetter,GGG:eraGetter,GGGG:longEraGetter},DATE_FORMATS_SPLIT=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,NUMBER_STRING=/^-?\d+$/;function dateFilter($locale){var R_ISO8601_STR=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;function jsonStringToDate(string){var match;if(match=string.match(R_ISO8601_STR)){var date=new Date(0),tzHour=0,tzMin=0,dateSetter=match[8]?date.setUTCFullYear:date.setFullYear,timeSetter=match[8]?date.setUTCHours:date.setHours;match[9]&&(tzHour=toInt(match[9]+match[10]),tzMin=toInt(match[9]+match[11])),dateSetter.call(date,toInt(match[1]),toInt(match[2])-1,toInt(match[3]));var h=toInt(match[4]||0)-tzHour,m=toInt(match[5]||0)-tzMin,s=toInt(match[6]||0),ms=Math.round(1e3*parseFloat("0."+(match[7]||0)));return timeSetter.call(date,h,m,s,ms),date}return string}return function(date,format,timezone){var text="",parts=[],fn,match;if(format=format||"mediumDate",format=$locale.DATETIME_FORMATS[format]||format,isString(date)&&(date=NUMBER_STRING.test(date)?toInt(date):jsonStringToDate(date)),isNumber(date)&&(date=new Date(date)),!isDate(date)||!isFinite(date.getTime()))return date;for(;format;)(match=DATE_FORMATS_SPLIT.exec(format))?format=(parts=concat(parts,match,1)).pop():(parts.push(format),format=null);var dateTimezoneOffset=date.getTimezoneOffset();return timezone&&(dateTimezoneOffset=timezoneToOffset(timezone,dateTimezoneOffset),date=convertTimezoneToLocal(date,timezone,!0)),forEach(parts,(function(value){text+=(fn=DATE_FORMATS[value])?fn(date,$locale.DATETIME_FORMATS,dateTimezoneOffset):"''"===value?"'":value.replace(/(^'|'$)/g,"").replace(/''/g,"'")})),text}}function jsonFilter(){return function(object,spacing){return isUndefined(spacing)&&(spacing=2),toJson(object,spacing)}}dateFilter.$inject=["$locale"];var lowercaseFilter=valueFn(lowercase),uppercaseFilter=valueFn(uppercase);function limitToFilter(){return function(input,limit,begin){return limit=Math.abs(Number(limit))===1/0?Number(limit):toInt(limit),isNumberNaN(limit)?input:(isNumber(input)&&(input=input.toString()),isArrayLike(input)?(begin=(begin=!begin||isNaN(begin)?0:toInt(begin))<0?Math.max(0,input.length+begin):begin,limit>=0?sliceFn(input,begin,begin+limit):0===begin?sliceFn(input,limit,input.length):sliceFn(input,Math.max(0,begin+limit),begin)):input)}}function sliceFn(input,begin,end){return isString(input)?input.slice(begin,end):slice.call(input,begin,end)}function orderByFilter($parse){return function(array,sortPredicate,reverseOrder,compareFn){if(null==array)return array;if(!isArrayLike(array))throw minErr("orderBy")("notarray","Expected array but received: {0}",array);isArray(sortPredicate)||(sortPredicate=[sortPredicate]),0===sortPredicate.length&&(sortPredicate=["+"]);var predicates=processPredicates(sortPredicate),descending=reverseOrder?-1:1,compare=isFunction(compareFn)?compareFn:defaultCompare,compareValues=Array.prototype.map.call(array,getComparisonObject);return compareValues.sort(doComparison),array=compareValues.map((function(item){return item.value}));function getComparisonObject(value,index){return{value:value,tieBreaker:{value:index,type:"number",index:index},predicateValues:predicates.map((function(predicate){return getPredicateValue(predicate.get(value),index)}))}}function doComparison(v1,v2){for(var i=0,ii=predicates.length;i<ii;i++){var result=compare(v1.predicateValues[i],v2.predicateValues[i]);if(result)return result*predicates[i].descending*descending}return(compare(v1.tieBreaker,v2.tieBreaker)||defaultCompare(v1.tieBreaker,v2.tieBreaker))*descending}};function processPredicates(sortPredicates){return sortPredicates.map((function(predicate){var descending=1,get=identity;if(isFunction(predicate))get=predicate;else if(isString(predicate)&&("+"!==predicate.charAt(0)&&"-"!==predicate.charAt(0)||(descending="-"===predicate.charAt(0)?-1:1,predicate=predicate.substring(1)),""!==predicate&&(get=$parse(predicate)).constant)){var key=get();get=function(value){return value[key]}}return{get:get,descending:descending}}))}function isPrimitive(value){switch(typeof value){case"number":case"boolean":case"string":return!0;default:return!1}}function objectValue(value){return isFunction(value.valueOf)&&isPrimitive(value=value.valueOf())?value:(hasCustomToString(value)&&isPrimitive(value=value.toString()),value)}function getPredicateValue(value,index){var type=typeof value;return null===value?(type="string",value="null"):"object"===type&&(value=objectValue(value)),{value:value,type:type,index:index}}function defaultCompare(v1,v2){var result=0,type1=v1.type,type2=v2.type;if(type1===type2){var value1=v1.value,value2=v2.value;"string"===type1?(value1=value1.toLowerCase(),value2=value2.toLowerCase()):"object"===type1&&(isObject(value1)&&(value1=v1.index),isObject(value2)&&(value2=v2.index)),value1!==value2&&(result=value1<value2?-1:1)}else result=type1<type2?-1:1;return result}}function ngDirective(directive){return isFunction(directive)&&(directive={link:directive}),directive.restrict=directive.restrict||"AC",valueFn(directive)}orderByFilter.$inject=["$parse"];var htmlAnchorDirective=valueFn({restrict:"E",compile:function(element,attr){if(!attr.href&&!attr.xlinkHref)return function(scope,element){if("a"===element[0].nodeName.toLowerCase()){var href="[object SVGAnimatedString]"===toString.call(element.prop("href"))?"xlink:href":"href";element.on("click",(function(event){element.attr(href)||event.preventDefault()}))}}}}),ngAttributeAliasDirectives={};forEach(BOOLEAN_ATTR,(function(propName,attrName){if("multiple"!==propName){var normalized=directiveNormalize("ng-"+attrName),linkFn=defaultLinkFn;"checked"===propName&&(linkFn=function(scope,element,attr){attr.ngModel!==attr[normalized]&&defaultLinkFn(scope,element,attr)}),ngAttributeAliasDirectives[normalized]=function(){return{restrict:"A",priority:100,link:linkFn}}}function defaultLinkFn(scope,element,attr){scope.$watch(attr[normalized],(function ngBooleanAttrWatchAction(value){attr.$set(attrName,!!value)}))}})),forEach(ALIASED_ATTR,(function(htmlAttr,ngAttr){ngAttributeAliasDirectives[ngAttr]=function(){return{priority:100,link:function(scope,element,attr){if("ngPattern"===ngAttr&&"/"===attr.ngPattern.charAt(0)){var match=attr.ngPattern.match(REGEX_STRING_REGEXP);if(match)return void attr.$set("ngPattern",new RegExp(match[1],match[2]))}scope.$watch(attr[ngAttr],(function ngAttrAliasWatchAction(value){attr.$set(ngAttr,value)}))}}}})),forEach(["src","srcset","href"],(function(attrName){var normalized=directiveNormalize("ng-"+attrName);ngAttributeAliasDirectives[normalized]=function(){return{priority:99,link:function(scope,element,attr){var propName=attrName,name=attrName;"href"===attrName&&"[object SVGAnimatedString]"===toString.call(element.prop("href"))&&(name="xlinkHref",attr.$attr[name]="xlink:href",propName=null),attr.$observe(normalized,(function(value){value?(attr.$set(name,value),msie&&propName&&element.prop(propName,attr[name])):"href"===attrName&&attr.$set(name,null)}))}}}}));var nullFormCtrl={$addControl:noop,$$renameControl:nullFormRenameControl,$removeControl:noop,$setValidity:noop,$setDirty:noop,$setPristine:noop,$setSubmitted:noop},PENDING_CLASS="ng-pending",SUBMITTED_CLASS="ng-submitted";function nullFormRenameControl(control,name){control.$name=name}function FormController($element,$attrs,$scope,$animate,$interpolate){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=$interpolate($attrs.name||$attrs.ngForm||"")($scope),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=nullFormCtrl,this.$$element=$element,this.$$animate=$animate,setupValidity(this)}FormController.$inject=["$element","$attrs","$scope","$animate","$interpolate"],FormController.prototype={$rollbackViewValue:function(){forEach(this.$$controls,(function(control){control.$rollbackViewValue()}))},$commitViewValue:function(){forEach(this.$$controls,(function(control){control.$commitViewValue()}))},$addControl:function(control){assertNotHasOwnProperty(control.$name,"input"),this.$$controls.push(control),control.$name&&(this[control.$name]=control),control.$$parentForm=this},$$renameControl:function(control,newName){var oldName=control.$name;this[oldName]===control&&delete this[oldName],this[newName]=control,control.$name=newName},$removeControl:function(control){control.$name&&this[control.$name]===control&&delete this[control.$name],forEach(this.$pending,(function(value,name){this.$setValidity(name,null,control)}),this),forEach(this.$error,(function(value,name){this.$setValidity(name,null,control)}),this),forEach(this.$$success,(function(value,name){this.$setValidity(name,null,control)}),this),arrayRemove(this.$$controls,control),control.$$parentForm=nullFormCtrl},$setDirty:function(){this.$$animate.removeClass(this.$$element,PRISTINE_CLASS),this.$$animate.addClass(this.$$element,DIRTY_CLASS),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,PRISTINE_CLASS,DIRTY_CLASS+" ng-submitted"),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,forEach(this.$$controls,(function(control){control.$setPristine()}))},$setUntouched:function(){forEach(this.$$controls,(function(control){control.$setUntouched()}))},$setSubmitted:function(){this.$$animate.addClass(this.$$element,"ng-submitted"),this.$submitted=!0,this.$$parentForm.$setSubmitted()}},addSetValidityMethod({clazz:FormController,set:function(object,property,controller){var list=object[property],index;list?-1===list.indexOf(controller)&&list.push(controller):object[property]=[controller]},unset:function(object,property,controller){var list=object[property];list&&(arrayRemove(list,controller),0===list.length&&delete object[property])}});var formDirectiveFactory=function(isNgForm){return["$timeout","$parse",function($timeout,$parse){var formDirective;return{name:"form",restrict:isNgForm?"EAC":"E",require:["form","^^?form"],controller:FormController,compile:function ngFormCompile(formElement,attr){formElement.addClass(PRISTINE_CLASS).addClass(VALID_CLASS);var nameAttr=attr.name?"name":!(!isNgForm||!attr.ngForm)&&"ngForm";return{pre:function ngFormPreLink(scope,formElement,attr,ctrls){var controller=ctrls[0],parentFormCtrl;if(!("action"in attr)){var handleFormSubmission=function(event){scope.$apply((function(){controller.$commitViewValue(),controller.$setSubmitted()})),event.preventDefault()};formElement[0].addEventListener("submit",handleFormSubmission),formElement.on("$destroy",(function(){$timeout((function(){formElement[0].removeEventListener("submit",handleFormSubmission)}),0,!1)}))}(ctrls[1]||controller.$$parentForm).$addControl(controller);var setter=nameAttr?getSetter(controller.$name):noop;nameAttr&&(setter(scope,controller),attr.$observe(nameAttr,(function(newValue){controller.$name!==newValue&&(setter(scope,void 0),controller.$$parentForm.$$renameControl(controller,newValue),(setter=getSetter(controller.$name))(scope,controller))}))),formElement.on("$destroy",(function(){controller.$$parentForm.$removeControl(controller),setter(scope,void 0),extend(controller,nullFormCtrl)}))}}}};function getSetter(expression){return""===expression?$parse('this[""]').assign:$parse(expression).assign||noop}}]},formDirective=formDirectiveFactory(),ngFormDirective=formDirectiveFactory(!0);function setupValidity(instance){instance.$$classCache={},instance.$$classCache[INVALID_CLASS]=!(instance.$$classCache[VALID_CLASS]=instance.$$element.hasClass(VALID_CLASS))}function addSetValidityMethod(context){var clazz=context.clazz,set=context.set,unset=context.unset;function createAndSet(ctrl,name,value,controller){ctrl[name]||(ctrl[name]={}),set(ctrl[name],value,controller)}function unsetAndCleanup(ctrl,name,value,controller){ctrl[name]&&unset(ctrl[name],value,controller),isObjectEmpty(ctrl[name])&&(ctrl[name]=void 0)}function cachedToggleClass(ctrl,className,switchValue){switchValue&&!ctrl.$$classCache[className]?(ctrl.$$animate.addClass(ctrl.$$element,className),ctrl.$$classCache[className]=!0):!switchValue&&ctrl.$$classCache[className]&&(ctrl.$$animate.removeClass(ctrl.$$element,className),ctrl.$$classCache[className]=!1)}function toggleValidationCss(ctrl,validationErrorKey,isValid){validationErrorKey=validationErrorKey?"-"+snake_case(validationErrorKey,"-"):"",cachedToggleClass(ctrl,VALID_CLASS+validationErrorKey,!0===isValid),cachedToggleClass(ctrl,INVALID_CLASS+validationErrorKey,!1===isValid)}clazz.prototype.$setValidity=function(validationErrorKey,state,controller){var combinedState;isUndefined(state)?createAndSet(this,"$pending",validationErrorKey,controller):unsetAndCleanup(this,"$pending",validationErrorKey,controller),isBoolean(state)?state?(unset(this.$error,validationErrorKey,controller),set(this.$$success,validationErrorKey,controller)):(set(this.$error,validationErrorKey,controller),unset(this.$$success,validationErrorKey,controller)):(unset(this.$error,validationErrorKey,controller),unset(this.$$success,validationErrorKey,controller)),this.$pending?(cachedToggleClass(this,"ng-pending",!0),this.$valid=this.$invalid=void 0,toggleValidationCss(this,"",null)):(cachedToggleClass(this,"ng-pending",!1),this.$valid=isObjectEmpty(this.$error),this.$invalid=!this.$valid,toggleValidationCss(this,"",this.$valid)),toggleValidationCss(this,validationErrorKey,combinedState=this.$pending&&this.$pending[validationErrorKey]?void 0:!this.$error[validationErrorKey]&&(!!this.$$success[validationErrorKey]||null)),this.$$parentForm.$setValidity(validationErrorKey,combinedState,this)}}function isObjectEmpty(obj){if(obj)for(var prop in obj)if(obj.hasOwnProperty(prop))return!1;return!0}var ISO_DATE_REGEXP=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,URL_REGEXP=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,EMAIL_REGEXP=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,NUMBER_REGEXP=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,DATE_REGEXP=/^(\d{4,})-(\d{2})-(\d{2})$/,DATETIMELOCAL_REGEXP=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,WEEK_REGEXP=/^(\d{4,})-W(\d\d)$/,MONTH_REGEXP=/^(\d{4,})-(\d\d)$/,TIME_REGEXP=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,PARTIAL_VALIDATION_EVENTS="keydown wheel mousedown",PARTIAL_VALIDATION_TYPES=createMap();forEach("date,datetime-local,month,time,week".split(","),(function(type){PARTIAL_VALIDATION_TYPES[type]=!0}));var inputType={text:textInputType,date:createDateInputType("date",DATE_REGEXP,createDateParser(DATE_REGEXP,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":createDateInputType("datetimelocal",DATETIMELOCAL_REGEXP,createDateParser(DATETIMELOCAL_REGEXP,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:createDateInputType("time",TIME_REGEXP,createDateParser(TIME_REGEXP,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:createDateInputType("week",WEEK_REGEXP,weekParser,"yyyy-Www"),month:createDateInputType("month",MONTH_REGEXP,createDateParser(MONTH_REGEXP,["yyyy","MM"]),"yyyy-MM"),number:numberInputType,url:urlInputType,email:emailInputType,radio:radioInputType,range:rangeInputType,checkbox:checkboxInputType,hidden:noop,button:noop,submit:noop,reset:noop,file:noop};function stringBasedInputType(ctrl){ctrl.$formatters.push((function(value){return ctrl.$isEmpty(value)?value:value.toString()}))}function textInputType(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl)}function baseInputType(scope,element,attr,ctrl,$sniffer,$browser){var type=lowercase(element[0].type),timeout;if(!$sniffer.android){var composing=!1;element.on("compositionstart",(function(){composing=!0})),element.on("compositionend",(function(){composing=!1,listener()}))}var listener=function(ev){if(timeout&&($browser.defer.cancel(timeout),timeout=null),!composing){var value=element.val(),event=ev&&ev.type;"password"===type||attr.ngTrim&&"false"===attr.ngTrim||(value=trim(value)),(ctrl.$viewValue!==value||""===value&&ctrl.$$hasNativeValidators)&&ctrl.$setViewValue(value,event)}};if($sniffer.hasEvent("input"))element.on("input",listener);else{var deferListener=function(ev,input,origValue){timeout||(timeout=$browser.defer((function(){timeout=null,input&&input.value===origValue||listener(ev)})))};element.on("keydown",(function(event){var key=event.keyCode;91===key||15<key&&key<19||37<=key&&key<=40||deferListener(event,this,this.value)})),$sniffer.hasEvent("paste")&&element.on("paste cut",deferListener)}element.on("change",listener),PARTIAL_VALIDATION_TYPES[type]&&ctrl.$$hasNativeValidators&&type===attr.type&&element.on("keydown wheel mousedown",(function(ev){if(!timeout){var validity=this.validity,origBadInput=validity.badInput,origTypeMismatch=validity.typeMismatch;timeout=$browser.defer((function(){timeout=null,validity.badInput===origBadInput&&validity.typeMismatch===origTypeMismatch||listener(ev)}))}})),ctrl.$render=function(){var value=ctrl.$isEmpty(ctrl.$viewValue)?"":ctrl.$viewValue;element.val()!==value&&element.val(value)}}function weekParser(isoWeek,existingDate){if(isDate(isoWeek))return isoWeek;if(isString(isoWeek)){WEEK_REGEXP.lastIndex=0;var parts=WEEK_REGEXP.exec(isoWeek);if(parts){var year=+parts[1],week=+parts[2],hours=0,minutes=0,seconds=0,milliseconds=0,firstThurs=getFirstThursdayOfYear(year),addDays=7*(week-1);return existingDate&&(hours=existingDate.getHours(),minutes=existingDate.getMinutes(),seconds=existingDate.getSeconds(),milliseconds=existingDate.getMilliseconds()),new Date(year,0,firstThurs.getDate()+addDays,hours,minutes,seconds,milliseconds)}}return NaN}function createDateParser(regexp,mapping){return function(iso,date){var parts,map;if(isDate(iso))return iso;if(isString(iso)){if('"'===iso.charAt(0)&&'"'===iso.charAt(iso.length-1)&&(iso=iso.substring(1,iso.length-1)),ISO_DATE_REGEXP.test(iso))return new Date(iso);if(regexp.lastIndex=0,parts=regexp.exec(iso))return parts.shift(),map=date?{yyyy:date.getFullYear(),MM:date.getMonth()+1,dd:date.getDate(),HH:date.getHours(),mm:date.getMinutes(),ss:date.getSeconds(),sss:date.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},forEach(parts,(function(part,index){index<mapping.length&&(map[mapping[index]]=+part)})),new Date(map.yyyy,map.MM-1,map.dd,map.HH,map.mm,map.ss||0,1e3*map.sss||0)}return NaN}}function createDateInputType(type,regexp,parseDate,format){return function dynamicDateInputType(scope,element,attr,ctrl,$sniffer,$browser,$filter){badInputChecker(scope,element,attr,ctrl),baseInputType(scope,element,attr,ctrl,$sniffer,$browser);var timezone=ctrl&&ctrl.$options.getOption("timezone"),previousDate,minVal,maxVal;(ctrl.$$parserName=type,ctrl.$parsers.push((function(value){if(ctrl.$isEmpty(value))return null;if(regexp.test(value)){var parsedDate=parseDate(value,previousDate);return timezone&&(parsedDate=convertTimezoneToLocal(parsedDate,timezone)),parsedDate}})),ctrl.$formatters.push((function(value){if(value&&!isDate(value))throw ngModelMinErr("datefmt","Expected `{0}` to be a date",value);return isValidDate(value)?((previousDate=value)&&timezone&&(previousDate=convertTimezoneToLocal(previousDate,timezone,!0)),$filter("date")(value,format,timezone)):(previousDate=null,"")})),isDefined(attr.min)||attr.ngMin)&&(ctrl.$validators.min=function(value){return!isValidDate(value)||isUndefined(minVal)||parseDate(value)>=minVal},attr.$observe("min",(function(val){minVal=parseObservedDateValue(val),ctrl.$validate()})));(isDefined(attr.max)||attr.ngMax)&&(ctrl.$validators.max=function(value){return!isValidDate(value)||isUndefined(maxVal)||parseDate(value)<=maxVal},attr.$observe("max",(function(val){maxVal=parseObservedDateValue(val),ctrl.$validate()})));function isValidDate(value){return value&&!(value.getTime&&value.getTime()!=value.getTime())}function parseObservedDateValue(val){return isDefined(val)&&!isDate(val)?parseDate(val)||void 0:val}}}function badInputChecker(scope,element,attr,ctrl){var node=element[0],nativeValidation;(ctrl.$$hasNativeValidators=isObject(node.validity))&&ctrl.$parsers.push((function(value){var validity=element.prop("validity")||{};return validity.badInput||validity.typeMismatch?void 0:value}))}function numberFormatterParser(ctrl){ctrl.$$parserName="number",ctrl.$parsers.push((function(value){return ctrl.$isEmpty(value)?null:NUMBER_REGEXP.test(value)?parseFloat(value):void 0})),ctrl.$formatters.push((function(value){if(!ctrl.$isEmpty(value)){if(!isNumber(value))throw ngModelMinErr("numfmt","Expected `{0}` to be a number",value);value=value.toString()}return value}))}function parseNumberAttrVal(val){return isDefined(val)&&!isNumber(val)&&(val=parseFloat(val)),isNumberNaN(val)?void 0:val}function isNumberInteger(num){return(0|num)===num}function countDecimals(num){var numString=num.toString(),decimalSymbolIndex=numString.indexOf(".");if(-1===decimalSymbolIndex){if(-1<num&&num<1){var match=/e-(\d+)$/.exec(numString);if(match)return Number(match[1])}return 0}return numString.length-decimalSymbolIndex-1}function isValidForStep(viewValue,stepBase,step){var value=Number(viewValue),isNonIntegerValue=!isNumberInteger(value),isNonIntegerStepBase=!isNumberInteger(stepBase),isNonIntegerStep=!isNumberInteger(step);if(isNonIntegerValue||isNonIntegerStepBase||isNonIntegerStep){var valueDecimals=isNonIntegerValue?countDecimals(value):0,stepBaseDecimals=isNonIntegerStepBase?countDecimals(stepBase):0,stepDecimals=isNonIntegerStep?countDecimals(step):0,decimalCount=Math.max(valueDecimals,stepBaseDecimals,stepDecimals),multiplier=Math.pow(10,decimalCount);value*=multiplier,stepBase*=multiplier,step*=multiplier,isNonIntegerValue&&(value=Math.round(value)),isNonIntegerStepBase&&(stepBase=Math.round(stepBase)),isNonIntegerStep&&(step=Math.round(step))}return(value-stepBase)%step==0}function numberInputType(scope,element,attr,ctrl,$sniffer,$browser){var minVal,maxVal,stepVal;(badInputChecker(scope,element,attr,ctrl),numberFormatterParser(ctrl),baseInputType(scope,element,attr,ctrl,$sniffer,$browser),(isDefined(attr.min)||attr.ngMin)&&(ctrl.$validators.min=function(value){return ctrl.$isEmpty(value)||isUndefined(minVal)||value>=minVal},attr.$observe("min",(function(val){minVal=parseNumberAttrVal(val),ctrl.$validate()}))),(isDefined(attr.max)||attr.ngMax)&&(ctrl.$validators.max=function(value){return ctrl.$isEmpty(value)||isUndefined(maxVal)||value<=maxVal},attr.$observe("max",(function(val){maxVal=parseNumberAttrVal(val),ctrl.$validate()}))),isDefined(attr.step)||attr.ngStep)&&(ctrl.$validators.step=function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(stepVal)||isValidForStep(viewValue,minVal||0,stepVal)},attr.$observe("step",(function(val){stepVal=parseNumberAttrVal(val),ctrl.$validate()})))}function rangeInputType(scope,element,attr,ctrl,$sniffer,$browser){badInputChecker(scope,element,attr,ctrl),numberFormatterParser(ctrl),baseInputType(scope,element,attr,ctrl,$sniffer,$browser);var supportsRange=ctrl.$$hasNativeValidators&&"range"===element[0].type,minVal=supportsRange?0:void 0,maxVal=supportsRange?100:void 0,stepVal=supportsRange?1:void 0,validity=element[0].validity,hasMinAttr=isDefined(attr.min),hasMaxAttr=isDefined(attr.max),hasStepAttr=isDefined(attr.step),originalRender=ctrl.$render;function setInitialValueAndObserver(htmlAttrName,changeFn){element.attr(htmlAttrName,attr[htmlAttrName]),attr.$observe(htmlAttrName,changeFn)}function minChange(val){if(minVal=parseNumberAttrVal(val),!isNumberNaN(ctrl.$modelValue))if(supportsRange){var elVal=element.val();minVal>elVal&&(elVal=minVal,element.val(elVal)),ctrl.$setViewValue(elVal)}else ctrl.$validate()}function maxChange(val){if(maxVal=parseNumberAttrVal(val),!isNumberNaN(ctrl.$modelValue))if(supportsRange){var elVal=element.val();maxVal<elVal&&(element.val(maxVal),elVal=maxVal<minVal?minVal:maxVal),ctrl.$setViewValue(elVal)}else ctrl.$validate()}function stepChange(val){stepVal=parseNumberAttrVal(val),isNumberNaN(ctrl.$modelValue)||(supportsRange&&ctrl.$viewValue!==element.val()?ctrl.$setViewValue(element.val()):ctrl.$validate())}ctrl.$render=supportsRange&&isDefined(validity.rangeUnderflow)&&isDefined(validity.rangeOverflow)?function rangeRender(){originalRender(),ctrl.$setViewValue(element.val())}:originalRender,hasMinAttr&&(ctrl.$validators.min=supportsRange?function noopMinValidator(){return!0}:function minValidator(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(minVal)||viewValue>=minVal},setInitialValueAndObserver("min",minChange)),hasMaxAttr&&(ctrl.$validators.max=supportsRange?function noopMaxValidator(){return!0}:function maxValidator(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(maxVal)||viewValue<=maxVal},setInitialValueAndObserver("max",maxChange)),hasStepAttr&&(ctrl.$validators.step=supportsRange?function nativeStepValidator(){return!validity.stepMismatch}:function stepValidator(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(stepVal)||isValidForStep(viewValue,minVal||0,stepVal)},setInitialValueAndObserver("step",stepChange))}function urlInputType(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl),ctrl.$$parserName="url",ctrl.$validators.url=function(modelValue,viewValue){var value=modelValue||viewValue;return ctrl.$isEmpty(value)||URL_REGEXP.test(value)}}function emailInputType(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl),ctrl.$$parserName="email",ctrl.$validators.email=function(modelValue,viewValue){var value=modelValue||viewValue;return ctrl.$isEmpty(value)||EMAIL_REGEXP.test(value)}}function radioInputType(scope,element,attr,ctrl){var doTrim=!attr.ngTrim||"false"!==trim(attr.ngTrim);isUndefined(attr.name)&&element.attr("name",nextUid());var listener=function(ev){var value;element[0].checked&&(value=attr.value,doTrim&&(value=trim(value)),ctrl.$setViewValue(value,ev&&ev.type))};element.on("click",listener),ctrl.$render=function(){var value=attr.value;doTrim&&(value=trim(value)),element[0].checked=value===ctrl.$viewValue},attr.$observe("value",ctrl.$render)}function parseConstantExpr($parse,context,name,expression,fallback){var parseFn;if(isDefined(expression)){if(!(parseFn=$parse(expression)).constant)throw ngModelMinErr("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",name,expression);return parseFn(context)}return fallback}function checkboxInputType(scope,element,attr,ctrl,$sniffer,$browser,$filter,$parse){var trueValue=parseConstantExpr($parse,scope,"ngTrueValue",attr.ngTrueValue,!0),falseValue=parseConstantExpr($parse,scope,"ngFalseValue",attr.ngFalseValue,!1),listener=function(ev){ctrl.$setViewValue(element[0].checked,ev&&ev.type)};element.on("click",listener),ctrl.$render=function(){element[0].checked=ctrl.$viewValue},ctrl.$isEmpty=function(value){return!1===value},ctrl.$formatters.push((function(value){return equals(value,trueValue)})),ctrl.$parsers.push((function(value){return value?trueValue:falseValue}))}var inputDirective=["$browser","$sniffer","$filter","$parse",function($browser,$sniffer,$filter,$parse){return{restrict:"E",require:["?ngModel"],link:{pre:function(scope,element,attr,ctrls){ctrls[0]&&(inputType[lowercase(attr.type)]||inputType.text)(scope,element,attr,ctrls[0],$sniffer,$browser,$filter,$parse)}}}}],CONSTANT_VALUE_REGEXP=/^(true|false|\d+)$/,ngValueDirective=function(){function updateElementValue(element,attr,value){var propValue=isDefined(value)?value:9===msie?"":null;element.prop("value",propValue),attr.$set("value",value)}return{restrict:"A",priority:100,compile:function(tpl,tplAttr){return CONSTANT_VALUE_REGEXP.test(tplAttr.ngValue)?function ngValueConstantLink(scope,elm,attr){var value;updateElementValue(elm,attr,scope.$eval(attr.ngValue))}:function ngValueLink(scope,elm,attr){scope.$watch(attr.ngValue,(function valueWatchAction(value){updateElementValue(elm,attr,value)}))}}}},ngBindDirective=["$compile",function($compile){return{restrict:"AC",compile:function ngBindCompile(templateElement){return $compile.$$addBindingClass(templateElement),function ngBindLink(scope,element,attr){$compile.$$addBindingInfo(element,attr.ngBind),element=element[0],scope.$watch(attr.ngBind,(function ngBindWatchAction(value){element.textContent=stringify(value)}))}}}}],ngBindTemplateDirective=["$interpolate","$compile",function($interpolate,$compile){return{compile:function ngBindTemplateCompile(templateElement){return $compile.$$addBindingClass(templateElement),function ngBindTemplateLink(scope,element,attr){var interpolateFn=$interpolate(element.attr(attr.$attr.ngBindTemplate));$compile.$$addBindingInfo(element,interpolateFn.expressions),element=element[0],attr.$observe("ngBindTemplate",(function(value){element.textContent=isUndefined(value)?"":value}))}}}}],ngBindHtmlDirective=["$sce","$parse","$compile",function($sce,$parse,$compile){return{restrict:"A",compile:function ngBindHtmlCompile(tElement,tAttrs){var ngBindHtmlGetter=$parse(tAttrs.ngBindHtml),ngBindHtmlWatch=$parse(tAttrs.ngBindHtml,(function sceValueOf(val){return $sce.valueOf(val)}));return $compile.$$addBindingClass(tElement),function ngBindHtmlLink(scope,element,attr){$compile.$$addBindingInfo(element,attr.ngBindHtml),scope.$watch(ngBindHtmlWatch,(function ngBindHtmlWatchAction(){var value=ngBindHtmlGetter(scope);element.html($sce.getTrustedHtml(value)||"")}))}}}}],ngChangeDirective=valueFn({restrict:"A",require:"ngModel",link:function(scope,element,attr,ctrl){ctrl.$viewChangeListeners.push((function(){scope.$eval(attr.ngChange)}))}});function classDirective(name,selector){var indexWatchExpression;return name="ngClass"+name,["$parse",function($parse){return{restrict:"AC",link:function(scope,element,attr){var expression=attr[name].trim(),isOneTime=":"===expression.charAt(0)&&":"===expression.charAt(1),watchInterceptor,watchExpression=$parse(expression,isOneTime?toFlatValue:toClassString),watchAction=isOneTime?ngClassOneTimeWatchAction:ngClassWatchAction,classCounts=element.data("$classCounts"),oldModulo=!0,oldClassString;function addClasses(classString){classString=digestClassCounts(split(classString),1),attr.$addClass(classString)}function removeClasses(classString){classString=digestClassCounts(split(classString),-1),attr.$removeClass(classString)}function updateClasses(oldClassString,newClassString){var oldClassArray=split(oldClassString),newClassArray=split(newClassString),toRemoveArray=arrayDifference(oldClassArray,newClassArray),toAddArray=arrayDifference(newClassArray,oldClassArray),toRemoveString=digestClassCounts(toRemoveArray,-1),toAddString=digestClassCounts(toAddArray,1);attr.$addClass(toAddString),attr.$removeClass(toRemoveString)}function digestClassCounts(classArray,count){var classesToUpdate=[];return forEach(classArray,(function(className){(count>0||classCounts[className])&&(classCounts[className]=(classCounts[className]||0)+count,classCounts[className]===+(count>0)&&classesToUpdate.push(className))})),classesToUpdate.join(" ")}function ngClassIndexWatchAction(newModulo){newModulo===selector?addClasses(oldClassString):removeClasses(oldClassString),oldModulo=newModulo}function ngClassOneTimeWatchAction(newClassValue){var newClassString=toClassString(newClassValue);newClassString!==oldClassString&&ngClassWatchAction(newClassString)}function ngClassWatchAction(newClassString){oldModulo===selector&&updateClasses(oldClassString,newClassString),oldClassString=newClassString}classCounts||(classCounts=createMap(),element.data("$classCounts",classCounts)),"ngClass"!==name&&(indexWatchExpression||(indexWatchExpression=$parse("$index",(function moduloTwo($index){return 1&$index}))),scope.$watch(indexWatchExpression,ngClassIndexWatchAction)),scope.$watch(watchExpression,watchAction,isOneTime)}}}];function arrayDifference(tokens1,tokens2){if(!tokens1||!tokens1.length)return[];if(!tokens2||!tokens2.length)return tokens1;var values=[];outer:for(var i=0;i<tokens1.length;i++){for(var token=tokens1[i],j=0;j<tokens2.length;j++)if(token===tokens2[j])continue outer;values.push(token)}return values}function split(classString){return classString&&classString.split(" ")}function toClassString(classValue){var classString=classValue;return isArray(classValue)?classString=classValue.map(toClassString).join(" "):isObject(classValue)&&(classString=Object.keys(classValue).filter((function(key){return classValue[key]})).join(" ")),classString}function toFlatValue(classValue){var flatValue=classValue;if(isArray(classValue))flatValue=classValue.map(toFlatValue);else if(isObject(classValue)){var hasUndefined=!1;flatValue=Object.keys(classValue).filter((function(key){var value=classValue[key];return!hasUndefined&&isUndefined(value)&&(hasUndefined=!0),value})),hasUndefined&&flatValue.push(void 0)}return flatValue}}var ngClassDirective=classDirective("",!0),ngClassOddDirective=classDirective("Odd",0),ngClassEvenDirective=classDirective("Even",1),ngCloakDirective=ngDirective({compile:function(element,attr){attr.$set("ngCloak",void 0),element.removeClass("ng-cloak")}}),ngControllerDirective=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],ngEventDirectives={},forceAsyncEvents={blur:!0,focus:!0};forEach("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),(function(eventName){var directiveName=directiveNormalize("ng-"+eventName);ngEventDirectives[directiveName]=["$parse","$rootScope",function($parse,$rootScope){return{restrict:"A",compile:function($element,attr){var fn=$parse(attr[directiveName]);return function ngEventHandler(scope,element){element.on(eventName,(function(event){var callback=function(){fn(scope,{$event:event})};forceAsyncEvents[eventName]&&$rootScope.$$phase?scope.$evalAsync(callback):scope.$apply(callback)}))}}}}]}));var ngIfDirective=["$animate","$compile",function($animate,$compile){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function($scope,$element,$attr,ctrl,$transclude){var block,childScope,previousElements;$scope.$watch($attr.ngIf,(function ngIfWatchAction(value){value?childScope||$transclude((function(clone,newScope){childScope=newScope,clone[clone.length++]=$compile.$$createComment("end ngIf",$attr.ngIf),block={clone:clone},$animate.enter(clone,$element.parent(),$element)})):(previousElements&&(previousElements.remove(),previousElements=null),childScope&&(childScope.$destroy(),childScope=null),block&&(previousElements=getBlockNodes(block.clone),$animate.leave(previousElements).done((function(response){!1!==response&&(previousElements=null)})),block=null))}))}}}],ngIncludeDirective=["$templateRequest","$anchorScroll","$animate",function($templateRequest,$anchorScroll,$animate){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:angular.noop,compile:function(element,attr){var srcExp=attr.ngInclude||attr.src,onloadExp=attr.onload||"",autoScrollExp=attr.autoscroll;return function(scope,$element,$attr,ctrl,$transclude){var changeCounter=0,currentScope,previousElement,currentElement,cleanupLastIncludeContent=function(){previousElement&&(previousElement.remove(),previousElement=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentElement&&($animate.leave(currentElement).done((function(response){!1!==response&&(previousElement=null)})),previousElement=currentElement,currentElement=null)};scope.$watch(srcExp,(function ngIncludeWatchAction(src){var afterAnimation=function(response){!1===response||!isDefined(autoScrollExp)||autoScrollExp&&!scope.$eval(autoScrollExp)||$anchorScroll()},thisChangeId=++changeCounter;src?($templateRequest(src,!0).then((function(response){if(!scope.$$destroyed&&thisChangeId===changeCounter){var newScope=scope.$new();ctrl.template=response;var clone=$transclude(newScope,(function(clone){cleanupLastIncludeContent(),$animate.enter(clone,null,$element).done(afterAnimation)}));currentElement=clone,(currentScope=newScope).$emit("$includeContentLoaded",src),scope.$eval(onloadExp)}}),(function(){scope.$$destroyed||thisChangeId===changeCounter&&(cleanupLastIncludeContent(),scope.$emit("$includeContentError",src))})),scope.$emit("$includeContentRequested",src)):(cleanupLastIncludeContent(),ctrl.template=null)}))}}}}],ngIncludeFillContentDirective=["$compile",function($compile){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(scope,$element,$attr,ctrl){if(toString.call($element[0]).match(/SVG/))return $element.empty(),void $compile(jqLiteBuildFragment(ctrl.template,window.document).childNodes)(scope,(function namespaceAdaptedClone(clone){$element.append(clone)}),{futureParentElement:$element});$element.html(ctrl.template),$compile($element.contents())(scope)}}}],ngInitDirective=ngDirective({priority:450,compile:function(){return{pre:function(scope,element,attrs){scope.$eval(attrs.ngInit)}}}}),ngListDirective=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(scope,element,attr,ctrl){var ngList=attr.ngList||", ",trimValues="false"!==attr.ngTrim,separator=trimValues?trim(ngList):ngList,parse=function(viewValue){if(!isUndefined(viewValue)){var list=[];return viewValue&&forEach(viewValue.split(separator),(function(value){value&&list.push(trimValues?trim(value):value)})),list}};ctrl.$parsers.push(parse),ctrl.$formatters.push((function(value){if(isArray(value))return value.join(ngList)})),ctrl.$isEmpty=function(value){return!value||!value.length}}}},VALID_CLASS="ng-valid",INVALID_CLASS="ng-invalid",PRISTINE_CLASS="ng-pristine",DIRTY_CLASS="ng-dirty",UNTOUCHED_CLASS="ng-untouched",TOUCHED_CLASS="ng-touched",EMPTY_CLASS="ng-empty",NOT_EMPTY_CLASS="ng-not-empty",ngModelMinErr=minErr("ngModel");function NgModelController($scope,$exceptionHandler,$attr,$element,$parse,$animate,$timeout,$q,$interpolate){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=$interpolate($attr.name||"",!1)($scope),this.$$parentForm=nullFormCtrl,this.$options=defaultModelOptions,this.$$parsedNgModel=$parse($attr.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$currentValidationRunId=0,Object.defineProperty(this,"$$scope",{value:$scope}),this.$$attr=$attr,this.$$element=$element,this.$$animate=$animate,this.$$timeout=$timeout,this.$$parse=$parse,this.$$q=$q,this.$$exceptionHandler=$exceptionHandler,setupValidity(this),setupModelWatcher(this)}function setupModelWatcher(ctrl){ctrl.$$scope.$watch((function ngModelWatch(scope){var modelValue=ctrl.$$ngModelGet(scope);if(modelValue!==ctrl.$modelValue&&(ctrl.$modelValue==ctrl.$modelValue||modelValue==modelValue)){ctrl.$modelValue=ctrl.$$rawModelValue=modelValue,ctrl.$$parserValid=void 0;for(var formatters=ctrl.$formatters,idx=formatters.length,viewValue=modelValue;idx--;)viewValue=formatters[idx](viewValue);ctrl.$viewValue!==viewValue&&(ctrl.$$updateEmptyClasses(viewValue),ctrl.$viewValue=ctrl.$$lastCommittedViewValue=viewValue,ctrl.$render(),ctrl.$$runValidators(ctrl.$modelValue,ctrl.$viewValue,noop))}return modelValue}))}NgModelController.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],NgModelController.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var invokeModelGetter=this.$$parse(this.$$attr.ngModel+"()"),invokeModelSetter=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function($scope){var modelValue=this.$$parsedNgModel($scope);return isFunction(modelValue)&&(modelValue=invokeModelGetter($scope)),modelValue},this.$$ngModelSet=function($scope,newValue){isFunction(this.$$parsedNgModel($scope))?invokeModelSetter($scope,{$$$p:newValue}):this.$$parsedNgModelAssign($scope,newValue)}}else if(!this.$$parsedNgModel.assign)throw ngModelMinErr("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,startingTag(this.$$element))},$render:noop,$isEmpty:function(value){return isUndefined(value)||""===value||null===value||value!=value},$$updateEmptyClasses:function(value){this.$isEmpty(value)?(this.$$animate.removeClass(this.$$element,"ng-not-empty"),this.$$animate.addClass(this.$$element,"ng-empty")):(this.$$animate.removeClass(this.$$element,"ng-empty"),this.$$animate.addClass(this.$$element,"ng-not-empty"))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,DIRTY_CLASS),this.$$animate.addClass(this.$$element,PRISTINE_CLASS)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,PRISTINE_CLASS),this.$$animate.addClass(this.$$element,DIRTY_CLASS),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,"ng-untouched","ng-touched")},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,"ng-touched","ng-untouched")},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!isNumberNaN(this.$modelValue)){var viewValue=this.$$lastCommittedViewValue,modelValue=this.$$rawModelValue,prevValid=this.$valid,prevModelValue=this.$modelValue,allowInvalid=this.$options.getOption("allowInvalid"),that=this;this.$$runValidators(modelValue,viewValue,(function(allValid){allowInvalid||prevValid===allValid||(that.$modelValue=allValid?modelValue:void 0,that.$modelValue!==prevModelValue&&that.$$writeModelToScope())}))}},$$runValidators:function(modelValue,viewValue,doneCallback){this.$$currentValidationRunId++;var localValidationRunId=this.$$currentValidationRunId,that=this;function processParseErrors(){var errorKey=that.$$parserName||"parse";return isUndefined(that.$$parserValid)?(setValidity(errorKey,null),!0):(that.$$parserValid||(forEach(that.$validators,(function(v,name){setValidity(name,null)})),forEach(that.$asyncValidators,(function(v,name){setValidity(name,null)}))),setValidity(errorKey,that.$$parserValid),that.$$parserValid)}function processSyncValidators(){var syncValidatorsValid=!0;return forEach(that.$validators,(function(validator,name){var result=Boolean(validator(modelValue,viewValue));syncValidatorsValid=syncValidatorsValid&&result,setValidity(name,result)})),!!syncValidatorsValid||(forEach(that.$asyncValidators,(function(v,name){setValidity(name,null)})),!1)}function processAsyncValidators(){var validatorPromises=[],allValid=!0;forEach(that.$asyncValidators,(function(validator,name){var promise=validator(modelValue,viewValue);if(!isPromiseLike(promise))throw ngModelMinErr("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",promise);setValidity(name,void 0),validatorPromises.push(promise.then((function(){setValidity(name,!0)}),(function(){allValid=!1,setValidity(name,!1)})))})),validatorPromises.length?that.$$q.all(validatorPromises).then((function(){validationDone(allValid)}),noop):validationDone(!0)}function setValidity(name,isValid){localValidationRunId===that.$$currentValidationRunId&&that.$setValidity(name,isValid)}function validationDone(allValid){localValidationRunId===that.$$currentValidationRunId&&doneCallback(allValid)}processParseErrors()&&processSyncValidators()?processAsyncValidators():validationDone(!1)},$commitViewValue:function(){var viewValue=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==viewValue||""===viewValue&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(viewValue),this.$$lastCommittedViewValue=viewValue,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){var viewValue,modelValue=this.$$lastCommittedViewValue,that=this;if(this.$$parserValid=!isUndefined(modelValue)||void 0,this.$$parserValid)for(var i=0;i<this.$parsers.length;i++)if(isUndefined(modelValue=this.$parsers[i](modelValue))){this.$$parserValid=!1;break}isNumberNaN(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var prevModelValue=this.$modelValue,allowInvalid=this.$options.getOption("allowInvalid");function writeToModelIfNeeded(){that.$modelValue!==prevModelValue&&that.$$writeModelToScope()}this.$$rawModelValue=modelValue,allowInvalid&&(this.$modelValue=modelValue,writeToModelIfNeeded()),this.$$runValidators(modelValue,this.$$lastCommittedViewValue,(function(allValid){allowInvalid||(that.$modelValue=allValid?modelValue:void 0,writeToModelIfNeeded())}))},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),forEach(this.$viewChangeListeners,(function(listener){try{listener()}catch(e){this.$$exceptionHandler(e)}}),this)},$setViewValue:function(value,trigger){this.$viewValue=value,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(trigger)},$$debounceViewValueCommit:function(trigger){var debounceDelay=this.$options.getOption("debounce");isNumber(debounceDelay[trigger])?debounceDelay=debounceDelay[trigger]:isNumber(debounceDelay.default)&&(debounceDelay=debounceDelay.default),this.$$timeout.cancel(this.$$pendingDebounce);var that=this;debounceDelay>0?this.$$pendingDebounce=this.$$timeout((function(){that.$commitViewValue()}),debounceDelay):this.$$scope.$root.$$phase?this.$commitViewValue():this.$$scope.$apply((function(){that.$commitViewValue()}))},$overrideModelOptions:function(options){this.$options=this.$options.createChild(options)}},addSetValidityMethod({clazz:NgModelController,set:function(object,property){object[property]=!0},unset:function(object,property){delete object[property]}});var ngModelDirective=["$rootScope",function($rootScope){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:NgModelController,priority:1,compile:function ngModelCompile(element){return element.addClass(PRISTINE_CLASS).addClass("ng-untouched").addClass(VALID_CLASS),{pre:function ngModelPreLink(scope,element,attr,ctrls){var modelCtrl=ctrls[0],formCtrl=ctrls[1]||modelCtrl.$$parentForm,optionsCtrl=ctrls[2];optionsCtrl&&(modelCtrl.$options=optionsCtrl.$options),modelCtrl.$$initGetterSetters(),formCtrl.$addControl(modelCtrl),attr.$observe("name",(function(newValue){modelCtrl.$name!==newValue&&modelCtrl.$$parentForm.$$renameControl(modelCtrl,newValue)})),scope.$on("$destroy",(function(){modelCtrl.$$parentForm.$removeControl(modelCtrl)}))},post:function ngModelPostLink(scope,element,attr,ctrls){var modelCtrl=ctrls[0];function setTouched(){modelCtrl.$setTouched()}modelCtrl.$options.getOption("updateOn")&&element.on(modelCtrl.$options.getOption("updateOn"),(function(ev){modelCtrl.$$debounceViewValueCommit(ev&&ev.type)})),element.on("blur",(function(){modelCtrl.$touched||($rootScope.$$phase?scope.$evalAsync(setTouched):scope.$apply(setTouched))}))}}}}}],defaultModelOptions,DEFAULT_REGEXP=/(\s+|^)default(\s+|$)/;function ModelOptions(options){this.$$options=options}ModelOptions.prototype={getOption:function(name){return this.$$options[name]},createChild:function(options){var inheritAll=!1;return forEach(options=extend({},options),(function(option,key){"$inherit"===option?"*"===key?inheritAll=!0:(options[key]=this.$$options[key],"updateOn"===key&&(options.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===key&&(options.updateOnDefault=!1,options[key]=trim(option.replace(DEFAULT_REGEXP,(function(){return options.updateOnDefault=!0," "}))))}),this),inheritAll&&(delete options["*"],defaults(options,this.$$options)),defaults(options,defaultModelOptions.$$options),new ModelOptions(options)}},defaultModelOptions=new ModelOptions({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var ngModelOptionsDirective=function(){function NgModelOptionsController($attrs,$scope){this.$$attrs=$attrs,this.$$scope=$scope}return NgModelOptionsController.$inject=["$attrs","$scope"],NgModelOptionsController.prototype={$onInit:function(){var parentOptions=this.parentCtrl?this.parentCtrl.$options:defaultModelOptions,modelOptionsDefinition=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=parentOptions.createChild(modelOptionsDefinition)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:NgModelOptionsController}};function defaults(dst,src){forEach(src,(function(value,key){isDefined(dst[key])||(dst[key]=value)}))}var ngNonBindableDirective=ngDirective({terminal:!0,priority:1e3}),ngOptionsMinErr=minErr("ngOptions"),NG_OPTIONS_REGEXP=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,ngOptionsDirective=["$compile","$document","$parse",function($compile,$document,$parse){function parseOptionsExpression(optionsExp,selectElement,scope){var match=optionsExp.match(NG_OPTIONS_REGEXP);if(!match)throw ngOptionsMinErr("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",optionsExp,startingTag(selectElement));var valueName=match[5]||match[7],keyName=match[6],selectAs=/ as /.test(match[0])&&match[1],trackBy=match[9],valueFn=$parse(match[2]?match[1]:valueName),selectAsFn,viewValueFn=selectAs&&$parse(selectAs)||valueFn,trackByFn=trackBy&&$parse(trackBy),getTrackByValueFn=trackBy?function(value,locals){return trackByFn(scope,locals)}:function getHashOfValue(value){return hashKey(value)},getTrackByValue=function(value,key){return getTrackByValueFn(value,getLocals(value,key))},displayFn=$parse(match[2]||match[1]),groupByFn=$parse(match[3]||""),disableWhenFn=$parse(match[4]||""),valuesFn=$parse(match[8]),locals={},getLocals=keyName?function(value,key){return locals[keyName]=key,locals[valueName]=value,locals}:function(value){return locals[valueName]=value,locals};function Option(selectValue,viewValue,label,group,disabled){this.selectValue=selectValue,this.viewValue=viewValue,this.label=label,this.group=group,this.disabled=disabled}function getOptionValuesKeys(optionValues){var optionValuesKeys;if(!keyName&&isArrayLike(optionValues))optionValuesKeys=optionValues;else for(var itemKey in optionValuesKeys=[],optionValues)optionValues.hasOwnProperty(itemKey)&&"$"!==itemKey.charAt(0)&&optionValuesKeys.push(itemKey);return optionValuesKeys}return{trackBy:trackBy,getTrackByValue:getTrackByValue,getWatchables:$parse(valuesFn,(function(optionValues){for(var watchedArray=[],optionValuesKeys=getOptionValuesKeys(optionValues=optionValues||[]),optionValuesLength=optionValuesKeys.length,index=0;index<optionValuesLength;index++){var key=optionValues===optionValuesKeys?index:optionValuesKeys[index],value=optionValues[key],locals=getLocals(value,key),selectValue=getTrackByValueFn(value,locals);if(watchedArray.push(selectValue),match[2]||match[1]){var label=displayFn(scope,locals);watchedArray.push(label)}if(match[4]){var disableWhen=disableWhenFn(scope,locals);watchedArray.push(disableWhen)}}return watchedArray})),getOptions:function(){for(var optionItems=[],selectValueMap={},optionValues=valuesFn(scope)||[],optionValuesKeys=getOptionValuesKeys(optionValues),optionValuesLength=optionValuesKeys.length,index=0;index<optionValuesLength;index++){var key=optionValues===optionValuesKeys?index:optionValuesKeys[index],value=optionValues[key],locals=getLocals(value,key),viewValue=viewValueFn(scope,locals),selectValue=getTrackByValueFn(viewValue,locals),label,group,disabled,optionItem=new Option(selectValue,viewValue,displayFn(scope,locals),groupByFn(scope,locals),disableWhenFn(scope,locals));optionItems.push(optionItem),selectValueMap[selectValue]=optionItem}return{items:optionItems,selectValueMap:selectValueMap,getOptionFromViewValue:function(value){return selectValueMap[getTrackByValue(value)]},getViewValueFromOption:function(option){return trackBy?copy(option.viewValue):option.viewValue}}}}}var optionTemplate=window.document.createElement("option"),optGroupTemplate=window.document.createElement("optgroup");function ngOptionsPostLink(scope,selectElement,attr,ctrls){for(var selectCtrl=ctrls[0],ngModelCtrl=ctrls[1],multiple=attr.multiple,i=0,children=selectElement.children(),ii=children.length;i<ii;i++)if(""===children[i].value){selectCtrl.hasEmptyOption=!0,selectCtrl.emptyOption=children.eq(i);break}selectElement.empty();var providedEmptyOption=!!selectCtrl.emptyOption,unknownOption,options;jqLite(optionTemplate.cloneNode(!1)).val("?");var ngOptions=parseOptionsExpression(attr.ngOptions,selectElement,scope),listFragment=$document[0].createDocumentFragment();function addOptionElement(option,parent){var optionElement=optionTemplate.cloneNode(!1);parent.appendChild(optionElement),updateOptionElement(option,optionElement)}function getAndUpdateSelectedOption(viewValue){var option=options.getOptionFromViewValue(viewValue),element=option&&option.element;return element&&!element.selected&&(element.selected=!0),option}function updateOptionElement(option,element){option.element=element,element.disabled=option.disabled,option.label!==element.label&&(element.label=option.label,element.textContent=option.label),element.value=option.selectValue}function updateOptions(){var previousValue=options&&selectCtrl.readValue();if(options)for(var i=options.items.length-1;i>=0;i--){var option=options.items[i];isDefined(option.group)?jqLiteRemove(option.element.parentNode):jqLiteRemove(option.element)}options=ngOptions.getOptions();var groupElementMap={};if(options.items.forEach((function addOption(option){var groupElement;isDefined(option.group)?((groupElement=groupElementMap[option.group])||(groupElement=optGroupTemplate.cloneNode(!1),listFragment.appendChild(groupElement),groupElement.label=null===option.group?"null":option.group,groupElementMap[option.group]=groupElement),addOptionElement(option,groupElement)):addOptionElement(option,listFragment)})),selectElement[0].appendChild(listFragment),ngModelCtrl.$render(),!ngModelCtrl.$isEmpty(previousValue)){var nextValue=selectCtrl.readValue(),isNotPrimitive;(ngOptions.trackBy||multiple?equals(previousValue,nextValue):previousValue===nextValue)||(ngModelCtrl.$setViewValue(nextValue),ngModelCtrl.$render())}}selectCtrl.generateUnknownOptionValue=function(val){return"?"},multiple?(selectCtrl.writeValue=function writeNgOptionsMultiple(values){if(options){var selectedOptions=values&&values.map(getAndUpdateSelectedOption)||[];options.items.forEach((function(option){option.element.selected&&!includes(selectedOptions,option)&&(option.element.selected=!1)}))}},selectCtrl.readValue=function readNgOptionsMultiple(){var selectedValues=selectElement.val()||[],selections=[];return forEach(selectedValues,(function(value){var option=options.selectValueMap[value];option&&!option.disabled&&selections.push(options.getViewValueFromOption(option))})),selections},ngOptions.trackBy&&scope.$watchCollection((function(){if(isArray(ngModelCtrl.$viewValue))return ngModelCtrl.$viewValue.map((function(value){return ngOptions.getTrackByValue(value)}))}),(function(){ngModelCtrl.$render()}))):(selectCtrl.writeValue=function writeNgOptionsValue(value){if(options){var selectedOption=selectElement[0].options[selectElement[0].selectedIndex],option=options.getOptionFromViewValue(value);selectedOption&&selectedOption.removeAttribute("selected"),option?(selectElement[0].value!==option.selectValue&&(selectCtrl.removeUnknownOption(),selectElement[0].value=option.selectValue,option.element.selected=!0),option.element.setAttribute("selected","selected")):selectCtrl.selectUnknownOrEmptyOption(value)}},selectCtrl.readValue=function readNgOptionsValue(){var selectedOption=options.selectValueMap[selectElement.val()];return selectedOption&&!selectedOption.disabled?(selectCtrl.unselectEmptyOption(),selectCtrl.removeUnknownOption(),options.getViewValueFromOption(selectedOption)):null},ngOptions.trackBy&&scope.$watch((function(){return ngOptions.getTrackByValue(ngModelCtrl.$viewValue)}),(function(){ngModelCtrl.$render()}))),providedEmptyOption&&($compile(selectCtrl.emptyOption)(scope),selectElement.prepend(selectCtrl.emptyOption),8===selectCtrl.emptyOption[0].nodeType?(selectCtrl.hasEmptyOption=!1,selectCtrl.registerOption=function(optionScope,optionEl){""===optionEl.val()&&(selectCtrl.hasEmptyOption=!0,selectCtrl.emptyOption=optionEl,selectCtrl.emptyOption.removeClass("ng-scope"),ngModelCtrl.$render(),optionEl.on("$destroy",(function(){var needsRerender=selectCtrl.$isEmptyOptionSelected();selectCtrl.hasEmptyOption=!1,selectCtrl.emptyOption=void 0,needsRerender&&ngModelCtrl.$render()})))}):selectCtrl.emptyOption.removeClass("ng-scope")),scope.$watchCollection(ngOptions.getWatchables,updateOptions)}return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function ngOptionsPreLink(scope,selectElement,attr,ctrls){ctrls[0].registerOption=noop},post:ngOptionsPostLink}}}],ngPluralizeDirective=["$locale","$interpolate","$log",function($locale,$interpolate,$log){var BRACE=/{}/g,IS_WHEN=/^when(Minus)?(.+)$/;return{link:function(scope,element,attr){var numberExp=attr.count,whenExp=attr.$attr.when&&element.attr(attr.$attr.when),offset=attr.offset||0,whens=scope.$eval(whenExp)||{},whensExpFns={},startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),braceReplacement=startSymbol+numberExp+"-"+offset+endSymbol,watchRemover=angular.noop,lastCount;function updateElementText(newText){element.text(newText||"")}forEach(attr,(function(expression,attributeName){var tmpMatch=IS_WHEN.exec(attributeName);if(tmpMatch){var whenKey=(tmpMatch[1]?"-":"")+lowercase(tmpMatch[2]);whens[whenKey]=element.attr(attr.$attr[attributeName])}})),forEach(whens,(function(expression,key){whensExpFns[key]=$interpolate(expression.replace(BRACE,braceReplacement))})),scope.$watch(numberExp,(function ngPluralizeWatchAction(newVal){var count=parseFloat(newVal),countIsNaN=isNumberNaN(count);if(countIsNaN||count in whens||(count=$locale.pluralCat(count-offset)),!(count===lastCount||countIsNaN&&isNumberNaN(lastCount))){watchRemover();var whenExpFn=whensExpFns[count];isUndefined(whenExpFn)?(null!=newVal&&$log.debug("ngPluralize: no rule defined for '"+count+"' in "+whenExp),watchRemover=noop,updateElementText()):watchRemover=scope.$watch(whenExpFn,updateElementText),lastCount=count}}))}}}],ngRepeatDirective=["$parse","$animate","$compile",function($parse,$animate,$compile){var NG_REMOVED="$$NG_REMOVED",ngRepeatMinErr=minErr("ngRepeat"),updateScope=function(scope,index,valueIdentifier,value,keyIdentifier,key,arrayLength){scope[valueIdentifier]=value,keyIdentifier&&(scope[keyIdentifier]=key),scope.$index=index,scope.$first=0===index,scope.$last=index===arrayLength-1,scope.$middle=!(scope.$first||scope.$last),scope.$odd=!(scope.$even=0==(1&index))},getBlockStart=function(block){return block.clone[0]},getBlockEnd=function(block){return block.clone[block.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function ngRepeatCompile($element,$attr){var expression=$attr.ngRepeat,ngRepeatEndComment=$compile.$$createComment("end ngRepeat",expression),match=expression.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!match)throw ngRepeatMinErr("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",expression);var lhs=match[1],rhs=match[2],aliasAs=match[3],trackByExp=match[4];if(!(match=lhs.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw ngRepeatMinErr("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",lhs);var valueIdentifier=match[3]||match[1],keyIdentifier=match[2],trackByExpGetter,trackByIdExpFn,trackByIdArrayFn,trackByIdObjFn;if(aliasAs&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(aliasAs)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(aliasAs)))throw ngRepeatMinErr("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",aliasAs);var hashFnLocals={$id:hashKey};return trackByExp?trackByExpGetter=$parse(trackByExp):(trackByIdArrayFn=function(key,value){return hashKey(value)},trackByIdObjFn=function(key){return key}),function ngRepeatLink($scope,$element,$attr,ctrl,$transclude){trackByExpGetter&&(trackByIdExpFn=function(key,value,index){return keyIdentifier&&(hashFnLocals[keyIdentifier]=key),hashFnLocals[valueIdentifier]=value,hashFnLocals.$index=index,trackByExpGetter($scope,hashFnLocals)});var lastBlockMap=createMap();$scope.$watchCollection(rhs,(function ngRepeatAction(collection){var index,length,previousNode=$element[0],nextNode,nextBlockMap=createMap(),collectionLength,key,value,trackById,trackByIdFn,collectionKeys,block,nextBlockOrder,elementsToRemove;if(aliasAs&&($scope[aliasAs]=collection),isArrayLike(collection))collectionKeys=collection,trackByIdFn=trackByIdExpFn||trackByIdArrayFn;else for(var itemKey in trackByIdFn=trackByIdExpFn||trackByIdObjFn,collectionKeys=[],collection)hasOwnProperty.call(collection,itemKey)&&"$"!==itemKey.charAt(0)&&collectionKeys.push(itemKey);for(collectionLength=collectionKeys.length,nextBlockOrder=new Array(collectionLength),index=0;index<collectionLength;index++)if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],trackById=trackByIdFn(key,value,index),lastBlockMap[trackById])block=lastBlockMap[trackById],delete lastBlockMap[trackById],nextBlockMap[trackById]=block,nextBlockOrder[index]=block;else{if(nextBlockMap[trackById])throw forEach(nextBlockOrder,(function(block){block&&block.scope&&(lastBlockMap[block.id]=block)})),ngRepeatMinErr("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",expression,trackById,value);nextBlockOrder[index]={id:trackById,scope:void 0,clone:void 0},nextBlockMap[trackById]=!0}for(var blockKey in lastBlockMap){if(elementsToRemove=getBlockNodes((block=lastBlockMap[blockKey]).clone),$animate.leave(elementsToRemove),elementsToRemove[0].parentNode)for(index=0,length=elementsToRemove.length;index<length;index++)elementsToRemove[index][NG_REMOVED]=!0;block.scope.$destroy()}for(index=0;index<collectionLength;index++)if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],(block=nextBlockOrder[index]).scope){nextNode=previousNode;do{nextNode=nextNode.nextSibling}while(nextNode&&nextNode[NG_REMOVED]);getBlockStart(block)!==nextNode&&$animate.move(getBlockNodes(block.clone),null,previousNode),previousNode=getBlockEnd(block),updateScope(block.scope,index,valueIdentifier,value,keyIdentifier,key,collectionLength)}else $transclude((function ngRepeatTransclude(clone,scope){block.scope=scope;var endNode=ngRepeatEndComment.cloneNode(!1);clone[clone.length++]=endNode,$animate.enter(clone,null,previousNode),previousNode=endNode,block.clone=clone,nextBlockMap[block.id]=block,updateScope(block.scope,index,valueIdentifier,value,keyIdentifier,key,collectionLength)}));lastBlockMap=nextBlockMap}))}}}}],NG_HIDE_CLASS="ng-hide",NG_HIDE_IN_PROGRESS_CLASS="ng-hide-animate",ngShowDirective=["$animate",function($animate){return{restrict:"A",multiElement:!0,link:function(scope,element,attr){scope.$watch(attr.ngShow,(function ngShowWatchAction(value){$animate[value?"removeClass":"addClass"](element,"ng-hide",{tempClasses:"ng-hide-animate"})}))}}}],ngHideDirective=["$animate",function($animate){return{restrict:"A",multiElement:!0,link:function(scope,element,attr){scope.$watch(attr.ngHide,(function ngHideWatchAction(value){$animate[value?"addClass":"removeClass"](element,"ng-hide",{tempClasses:"ng-hide-animate"})}))}}}],ngStyleDirective=ngDirective((function(scope,element,attr){scope.$watch(attr.ngStyle,(function ngStyleWatchAction(newStyles,oldStyles){oldStyles&&newStyles!==oldStyles&&forEach(oldStyles,(function(val,style){element.css(style,"")})),newStyles&&element.css(newStyles)}),!0)})),ngSwitchDirective=["$animate","$compile",function($animate,$compile){return{require:"ngSwitch",controller:["$scope",function NgSwitchController(){this.cases={}}],link:function(scope,element,attr,ngSwitchController){var watchExpr=attr.ngSwitch||attr.on,selectedTranscludes=[],selectedElements=[],previousLeaveAnimations=[],selectedScopes=[],spliceFactory=function(array,index){return function(response){!1!==response&&array.splice(index,1)}};scope.$watch(watchExpr,(function ngSwitchWatchAction(value){for(var i,ii;previousLeaveAnimations.length;)$animate.cancel(previousLeaveAnimations.pop());for(i=0,ii=selectedScopes.length;i<ii;++i){var selected=getBlockNodes(selectedElements[i].clone),runner;selectedScopes[i].$destroy(),(previousLeaveAnimations[i]=$animate.leave(selected)).done(spliceFactory(previousLeaveAnimations,i))}selectedElements.length=0,selectedScopes.length=0,(selectedTranscludes=ngSwitchController.cases["!"+value]||ngSwitchController.cases["?"])&&forEach(selectedTranscludes,(function(selectedTransclude){selectedTransclude.transclude((function(caseElement,selectedScope){selectedScopes.push(selectedScope);var anchor=selectedTransclude.element;caseElement[caseElement.length++]=$compile.$$createComment("end ngSwitchWhen");var block={clone:caseElement};selectedElements.push(block),$animate.enter(caseElement,anchor.parent(),anchor)}))}))}))}}}],ngSwitchWhenDirective=ngDirective({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(scope,element,attrs,ctrl,$transclude){var cases;forEach(attrs.ngSwitchWhen.split(attrs.ngSwitchWhenSeparator).sort().filter((function(element,index,array){return array[index-1]!==element})),(function(whenCase){ctrl.cases["!"+whenCase]=ctrl.cases["!"+whenCase]||[],ctrl.cases["!"+whenCase].push({transclude:$transclude,element:element})}))}}),ngSwitchDefaultDirective=ngDirective({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(scope,element,attr,ctrl,$transclude){ctrl.cases["?"]=ctrl.cases["?"]||[],ctrl.cases["?"].push({transclude:$transclude,element:element})}}),ngTranscludeMinErr=minErr("ngTransclude"),ngTranscludeDirective=["$compile",function($compile){return{restrict:"EAC",terminal:!0,compile:function ngTranscludeCompile(tElement){var fallbackLinkFn=$compile(tElement.contents());return tElement.empty(),function ngTranscludePostLink($scope,$element,$attrs,controller,$transclude){if(!$transclude)throw ngTranscludeMinErr("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",startingTag($element));$attrs.ngTransclude===$attrs.$attr.ngTransclude&&($attrs.ngTransclude="");var slotName=$attrs.ngTransclude||$attrs.ngTranscludeSlot;function ngTranscludeCloneAttachFn(clone,transcludedScope){clone.length&&notWhitespace(clone)?$element.append(clone):(useFallbackContent(),transcludedScope.$destroy())}function useFallbackContent(){fallbackLinkFn($scope,(function(clone){$element.append(clone)}))}function notWhitespace(nodes){for(var i=0,ii=nodes.length;i<ii;i++){var node=nodes[i];if(node.nodeType!==NODE_TYPE_TEXT||node.nodeValue.trim())return!0}}$transclude(ngTranscludeCloneAttachFn,null,slotName),slotName&&!$transclude.isSlotFilled(slotName)&&useFallbackContent()}}}}],scriptDirective=["$templateCache",function($templateCache){return{restrict:"E",terminal:!0,compile:function(element,attr){if("text/ng-template"===attr.type){var templateUrl=attr.id,text=element[0].text;$templateCache.put(templateUrl,text)}}}}],noopNgModelController={$setViewValue:noop,$render:noop};function setOptionSelectedStatus(optionEl,value){optionEl.prop("selected",value),optionEl.attr("selected",value)}var SelectController=["$element","$scope",function($element,$scope){var self=this,optionsMap=new NgMap;self.selectValueMap={},self.ngModelCtrl=noopNgModelController,self.multiple=!1,self.unknownOption=jqLite(window.document.createElement("option")),self.hasEmptyOption=!1,self.emptyOption=void 0,self.renderUnknownOption=function(val){var unknownVal=self.generateUnknownOptionValue(val);self.unknownOption.val(unknownVal),$element.prepend(self.unknownOption),setOptionSelectedStatus(self.unknownOption,!0),$element.val(unknownVal)},self.updateUnknownOption=function(val){var unknownVal=self.generateUnknownOptionValue(val);self.unknownOption.val(unknownVal),setOptionSelectedStatus(self.unknownOption,!0),$element.val(unknownVal)},self.generateUnknownOptionValue=function(val){return"? "+hashKey(val)+" ?"},self.removeUnknownOption=function(){self.unknownOption.parent()&&self.unknownOption.remove()},self.selectEmptyOption=function(){self.emptyOption&&($element.val(""),setOptionSelectedStatus(self.emptyOption,!0))},self.unselectEmptyOption=function(){self.hasEmptyOption&&setOptionSelectedStatus(self.emptyOption,!1)},$scope.$on("$destroy",(function(){self.renderUnknownOption=noop})),self.readValue=function readSingleValue(){var val=$element.val(),realVal=val in self.selectValueMap?self.selectValueMap[val]:val;return self.hasOption(realVal)?realVal:null},self.writeValue=function writeSingleValue(value){var currentlySelectedOption=$element[0].options[$element[0].selectedIndex];if(currentlySelectedOption&&setOptionSelectedStatus(jqLite(currentlySelectedOption),!1),self.hasOption(value)){self.removeUnknownOption();var hashedVal=hashKey(value);$element.val(hashedVal in self.selectValueMap?hashedVal:value);var selectedOption=$element[0].options[$element[0].selectedIndex];setOptionSelectedStatus(jqLite(selectedOption),!0)}else self.selectUnknownOrEmptyOption(value)},self.addOption=function(value,element){if(8!==element[0].nodeType){assertNotHasOwnProperty(value,'"option value"'),""===value&&(self.hasEmptyOption=!0,self.emptyOption=element);var count=optionsMap.get(value)||0;optionsMap.set(value,count+1),scheduleRender()}},self.removeOption=function(value){var count=optionsMap.get(value);count&&(1===count?(optionsMap.delete(value),""===value&&(self.hasEmptyOption=!1,self.emptyOption=void 0)):optionsMap.set(value,count-1))},self.hasOption=function(value){return!!optionsMap.get(value)},self.$hasEmptyOption=function(){return self.hasEmptyOption},self.$isUnknownOptionSelected=function(){return $element[0].options[0]===self.unknownOption[0]},self.$isEmptyOptionSelected=function(){return self.hasEmptyOption&&$element[0].options[$element[0].selectedIndex]===self.emptyOption[0]},self.selectUnknownOrEmptyOption=function(value){null==value&&self.emptyOption?(self.removeUnknownOption(),self.selectEmptyOption()):self.unknownOption.parent().length?self.updateUnknownOption(value):self.renderUnknownOption(value)};var renderScheduled=!1;function scheduleRender(){renderScheduled||(renderScheduled=!0,$scope.$$postDigest((function(){renderScheduled=!1,self.ngModelCtrl.$render()})))}var updateScheduled=!1;function scheduleViewValueUpdate(renderAfter){updateScheduled||(updateScheduled=!0,$scope.$$postDigest((function(){$scope.$$destroyed||(updateScheduled=!1,self.ngModelCtrl.$setViewValue(self.readValue()),renderAfter&&self.ngModelCtrl.$render())})))}self.registerOption=function(optionScope,optionElement,optionAttrs,interpolateValueFn,interpolateTextFn){if(optionAttrs.$attr.ngValue){var oldVal,hashedVal=NaN;optionAttrs.$observe("value",(function valueAttributeObserveAction(newVal){var removal,previouslySelected=optionElement.prop("selected");isDefined(hashedVal)&&(self.removeOption(oldVal),delete self.selectValueMap[hashedVal],removal=!0),hashedVal=hashKey(newVal),oldVal=newVal,self.selectValueMap[hashedVal]=newVal,self.addOption(newVal,optionElement),optionElement.attr("value",hashedVal),removal&&previouslySelected&&scheduleViewValueUpdate()}))}else interpolateValueFn?optionAttrs.$observe("value",(function valueAttributeObserveAction(newVal){var removal;self.readValue();var previouslySelected=optionElement.prop("selected");isDefined(oldVal)&&(self.removeOption(oldVal),removal=!0),oldVal=newVal,self.addOption(newVal,optionElement),removal&&previouslySelected&&scheduleViewValueUpdate()})):interpolateTextFn?optionScope.$watch(interpolateTextFn,(function interpolateWatchAction(newVal,oldVal){optionAttrs.$set("value",newVal);var previouslySelected=optionElement.prop("selected");oldVal!==newVal&&self.removeOption(oldVal),self.addOption(newVal,optionElement),oldVal&&previouslySelected&&scheduleViewValueUpdate()})):self.addOption(optionAttrs.value,optionElement);optionAttrs.$observe("disabled",(function(newVal){("true"===newVal||newVal&&optionElement.prop("selected"))&&(self.multiple?scheduleViewValueUpdate(!0):(self.ngModelCtrl.$setViewValue(null),self.ngModelCtrl.$render()))})),optionElement.on("$destroy",(function(){var currentValue=self.readValue(),removeValue=optionAttrs.value;self.removeOption(removeValue),scheduleRender(),(self.multiple&&currentValue&&-1!==currentValue.indexOf(removeValue)||currentValue===removeValue)&&scheduleViewValueUpdate(!0)}))}}],selectDirective=function(){return{restrict:"E",require:["select","?ngModel"],controller:SelectController,priority:1,link:{pre:selectPreLink,post:selectPostLink}};function selectPreLink(scope,element,attr,ctrls){var selectCtrl=ctrls[0],ngModelCtrl=ctrls[1];if(ngModelCtrl){if(selectCtrl.ngModelCtrl=ngModelCtrl,element.on("change",(function(){selectCtrl.removeUnknownOption(),scope.$apply((function(){ngModelCtrl.$setViewValue(selectCtrl.readValue())}))})),attr.multiple){selectCtrl.multiple=!0,selectCtrl.readValue=function readMultipleValue(){var array=[];return forEach(element.find("option"),(function(option){if(option.selected&&!option.disabled){var val=option.value;array.push(val in selectCtrl.selectValueMap?selectCtrl.selectValueMap[val]:val)}})),array},selectCtrl.writeValue=function writeMultipleValue(value){forEach(element.find("option"),(function(option){var shouldBeSelected=!!value&&(includes(value,option.value)||includes(value,selectCtrl.selectValueMap[option.value])),currentlySelected;shouldBeSelected!==option.selected&&setOptionSelectedStatus(jqLite(option),shouldBeSelected)}))};var lastView,lastViewRef=NaN;scope.$watch((function selectMultipleWatch(){lastViewRef!==ngModelCtrl.$viewValue||equals(lastView,ngModelCtrl.$viewValue)||(lastView=shallowCopy(ngModelCtrl.$viewValue),ngModelCtrl.$render()),lastViewRef=ngModelCtrl.$viewValue})),ngModelCtrl.$isEmpty=function(value){return!value||0===value.length}}}else selectCtrl.registerOption=noop}function selectPostLink(scope,element,attrs,ctrls){var ngModelCtrl=ctrls[1];if(ngModelCtrl){var selectCtrl=ctrls[0];ngModelCtrl.$render=function(){selectCtrl.writeValue(ngModelCtrl.$viewValue)}}}},optionDirective=["$interpolate",function($interpolate){return{restrict:"E",priority:100,compile:function(element,attr){var interpolateValueFn,interpolateTextFn;return isDefined(attr.ngValue)||(isDefined(attr.value)?interpolateValueFn=$interpolate(attr.value,!0):(interpolateTextFn=$interpolate(element.text(),!0))||attr.$set("value",element.text())),function(scope,element,attr){var selectCtrlName="$selectController",parent=element.parent(),selectCtrl=parent.data(selectCtrlName)||parent.parent().data(selectCtrlName);selectCtrl&&selectCtrl.registerOption(scope,element,attr,interpolateValueFn,interpolateTextFn)}}}}],requiredDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){ctrl&&(attr.required=!0,ctrl.$validators.required=function(modelValue,viewValue){return!attr.required||!ctrl.$isEmpty(viewValue)},attr.$observe("required",(function(){ctrl.$validate()})))}}},patternDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var regexp,patternExp=attr.ngPattern||attr.pattern;attr.$observe("pattern",(function(regex){if(isString(regex)&&regex.length>0&&(regex=new RegExp("^"+regex+"$")),regex&&!regex.test)throw minErr("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",patternExp,regex,startingTag(elm));regexp=regex||void 0,ctrl.$validate()})),ctrl.$validators.pattern=function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(regexp)||regexp.test(viewValue)}}}}},maxlengthDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var maxlength=-1;attr.$observe("maxlength",(function(value){var intVal=toInt(value);maxlength=isNumberNaN(intVal)?-1:intVal,ctrl.$validate()})),ctrl.$validators.maxlength=function(modelValue,viewValue){return maxlength<0||ctrl.$isEmpty(viewValue)||viewValue.length<=maxlength}}}}},minlengthDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var minlength=0;attr.$observe("minlength",(function(value){minlength=toInt(value)||0,ctrl.$validate()})),ctrl.$validators.minlength=function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||viewValue.length>=minlength}}}}};window.angular.bootstrap?window.console&&console.log("WARNING: Tried to load angular more than once."):(bindJQuery(),publishExternalAPI(angular),angular.module("ngLocale",[],["$provide",function($provide){var PLURAL_CATEGORY_ZERO="zero",PLURAL_CATEGORY_ONE="one",PLURAL_CATEGORY_TWO="two",PLURAL_CATEGORY_FEW="few",PLURAL_CATEGORY_MANY="many",PLURAL_CATEGORY_OTHER="other";function getDecimals(n){var i=(n+="").indexOf(".");return-1==i?0:n.length-i-1}function getVF(n,opt_precision){var v=opt_precision;void 0===v&&(v=Math.min(getDecimals(n),3));var base=Math.pow(10,v),f;return{v:v,f:(n*base|0)%base}}$provide.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(n,opt_precision){var i=0|n,vf=getVF(n,opt_precision);return 1==i&&0==vf.v?PLURAL_CATEGORY_ONE:PLURAL_CATEGORY_OTHER}})}]),jqLite((function(){angularInit(window.document,bootstrap)})))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),angular.module("exceptionless",[]).constant("$ExceptionlessClient",exceptionless.ExceptionlessClient.default).factory("exceptionlessHttpInterceptor",["$location","$q","$ExceptionlessClient",function($location,$q,$ExceptionlessClient){return{responseError:function responseError(response){if(404===response.status)$ExceptionlessClient.submitNotFound(response.config.url);else if(401!==response.status){var message="["+response.status+"] "+(response.data&&response.data.Message?response.data.Message:response.config.url);$ExceptionlessClient.createUnhandledException(new Error(message),"errorHttpInterceptor").setSource(response.config.url).setProperty("response",response).setProperty("referrer",$location.absUrl()).submit()}return $q.reject(response)}}}]).config(["$httpProvider","$provide","$ExceptionlessClient",function($httpProvider,$provide,$ExceptionlessClient){$httpProvider.interceptors.push("exceptionlessHttpInterceptor"),$provide.decorator("$exceptionHandler",["$delegate",function($delegate){return function(exception,cause){$delegate(exception,cause),$ExceptionlessClient.createUnhandledException(exception,"$exceptionHandler").setMessage(cause).submit()}}]),$provide.decorator("$log",["$delegate",function($delegate){function decorateRegularCall(property,logLevel){var previousFn=$delegate[property];return $delegate[property]=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];angular.mock&&($delegate[property].logs=[]),previousFn.apply(null,args),args[0]&&args[0].length>0&&$ExceptionlessClient.submitLog(null,args[0],logLevel)}}return $delegate.log=decorateRegularCall("log","Trace"),$delegate.info=decorateRegularCall("info","Info"),$delegate.warn=decorateRegularCall("warn","Warn"),$delegate.debug=decorateRegularCall("debug","Debug"),$delegate.error=decorateRegularCall("error","Error"),$delegate}])}]).run(["$rootScope","$ExceptionlessClient",function($rootScope,$ExceptionlessClient){$rootScope.$on("$routeChangeSuccess",(function(event,next,current){current&&$ExceptionlessClient.createFeatureUsage(current.name).setProperty("next",next).setProperty("current",current).submit()})),$rootScope.$on("$routeChangeError",(function(event,current,previous,rejection){$ExceptionlessClient.createUnhandledException(new Error(rejection),"$routeChangeError").setProperty("current",current).setProperty("previous",previous).submit()})),$rootScope.$on("$stateChangeSuccess",(function(event,toState,toParams,fromState,fromParams){toState&&"otherwise"!==toState.name&&$ExceptionlessClient.createFeatureUsage(toState.controller||toState.name).setProperty("toState",toState).setProperty("toParams",toParams).setProperty("fromState",fromState).setProperty("fromParams",fromParams).submit()})),$rootScope.$on("$stateNotFound",(function(event,unfoundState,fromState,fromParams){unfoundState&&$ExceptionlessClient.createNotFound(unfoundState.to).setProperty("unfoundState",unfoundState).setProperty("fromState",fromState).setProperty("fromParams",fromParams).submit()}));var stateChangeError="$stateChangeError";$rootScope.$on(stateChangeError,(function(event,toState,toParams,fromState,fromParams,error){var builder;error&&(error&&404===error.status?$ExceptionlessClient.createNotFound(error.config.url):$ExceptionlessClient.createUnhandledException(error,stateChangeError)).setSource(stateChangeError).setMessage(error&&error.statusText).setProperty("toState",toState).setProperty("toParams",toParams).setProperty("fromState",fromState).setProperty("fromParams",fromParams).submit()})),$rootScope.$on("$destroy",(function(){$ExceptionlessClient.config.queue.process()}))}]),
/**
 * @license AngularJS v1.6.6
 * (c) 2010-2017 Google, Inc. http://angularjs.org
 * License: MIT
 */
function(window,angular){"use strict";var ELEMENT_NODE=1,COMMENT_NODE=8,ADD_CLASS_SUFFIX="-add",REMOVE_CLASS_SUFFIX="-remove",EVENT_CLASS_PREFIX="ng-",ACTIVE_CLASS_SUFFIX="-active",PREPARE_CLASS_SUFFIX="-prepare",NG_ANIMATE_CLASSNAME="ng-animate",NG_ANIMATE_CHILDREN_DATA="$$ngAnimateChildren",CSS_PREFIX="",TRANSITION_PROP,TRANSITIONEND_EVENT,ANIMATION_PROP,ANIMATIONEND_EVENT;void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend?(CSS_PREFIX="-webkit-",TRANSITION_PROP="WebkitTransition",TRANSITIONEND_EVENT="webkitTransitionEnd transitionend"):(TRANSITION_PROP="transition",TRANSITIONEND_EVENT="transitionend"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend?(CSS_PREFIX="-webkit-",ANIMATION_PROP="WebkitAnimation",ANIMATIONEND_EVENT="webkitAnimationEnd animationend"):(ANIMATION_PROP="animation",ANIMATIONEND_EVENT="animationend");var DURATION_KEY="Duration",PROPERTY_KEY="Property",DELAY_KEY="Delay",TIMING_KEY="TimingFunction",ANIMATION_ITERATION_COUNT_KEY="IterationCount",ANIMATION_PLAYSTATE_KEY="PlayState",SAFE_FAST_FORWARD_DURATION_VALUE=9999,ANIMATION_DELAY_PROP=ANIMATION_PROP+"Delay",ANIMATION_DURATION_PROP=ANIMATION_PROP+"Duration",TRANSITION_DELAY_PROP=TRANSITION_PROP+"Delay",TRANSITION_DURATION_PROP=TRANSITION_PROP+"Duration",ngMinErr=angular.$$minErr("ng");function assertArg(arg,name,reason){if(!arg)throw ngMinErr("areq","Argument '{0}' is {1}",name||"?",reason||"required");return arg}function mergeClasses(a,b){return a||b?a?b?(isArray(a)&&(a=a.join(" ")),isArray(b)&&(b=b.join(" ")),a+" "+b):a:b:""}function packageStyles(options){var styles={};return options&&(options.to||options.from)&&(styles.to=options.to,styles.from=options.from),styles}function pendClasses(classes,fix,isPrefix){var className="";return classes=isArray(classes)?classes:classes&&isString(classes)&&classes.length?classes.split(/\s+/):[],forEach(classes,(function(klass,i){klass&&klass.length>0&&(className+=i>0?" ":"",className+=isPrefix?fix+klass:klass+fix)})),className}function removeFromArray(arr,val){var index=arr.indexOf(val);val>=0&&arr.splice(index,1)}function stripCommentsFromElement(element){if(element instanceof jqLite)switch(element.length){case 0:return element;case 1:if(1===element[0].nodeType)return element;break;default:return jqLite(extractElementNode(element))}if(1===element.nodeType)return jqLite(element)}function extractElementNode(element){if(!element[0])return element;for(var i=0;i<element.length;i++){var elm=element[i];if(1===elm.nodeType)return elm}}function $$addClass($$jqLite,element,className){forEach(element,(function(elm){$$jqLite.addClass(elm,className)}))}function $$removeClass($$jqLite,element,className){forEach(element,(function(elm){$$jqLite.removeClass(elm,className)}))}function applyAnimationClassesFactory($$jqLite){return function(element,options){options.addClass&&($$addClass($$jqLite,element,options.addClass),options.addClass=null),options.removeClass&&($$removeClass($$jqLite,element,options.removeClass),options.removeClass=null)}}function prepareAnimationOptions(options){if(!(options=options||{}).$$prepared){var domOperation=options.domOperation||noop;options.domOperation=function(){options.$$domOperationFired=!0,domOperation(),domOperation=noop},options.$$prepared=!0}return options}function applyAnimationStyles(element,options){applyAnimationFromStyles(element,options),applyAnimationToStyles(element,options)}function applyAnimationFromStyles(element,options){options.from&&(element.css(options.from),options.from=null)}function applyAnimationToStyles(element,options){options.to&&(element.css(options.to),options.to=null)}function mergeAnimationDetails(element,oldAnimation,newAnimation){var target=oldAnimation.options||{},newOptions=newAnimation.options||{},toAdd=(target.addClass||"")+" "+(newOptions.addClass||""),toRemove=(target.removeClass||"")+" "+(newOptions.removeClass||""),classes=resolveElementClasses(element.attr("class"),toAdd,toRemove);newOptions.preparationClasses&&(target.preparationClasses=concatWithSpace(newOptions.preparationClasses,target.preparationClasses),delete newOptions.preparationClasses);var realDomOperation=target.domOperation!==noop?target.domOperation:null;return extend(target,newOptions),realDomOperation&&(target.domOperation=realDomOperation),classes.addClass?target.addClass=classes.addClass:target.addClass=null,classes.removeClass?target.removeClass=classes.removeClass:target.removeClass=null,oldAnimation.addClass=target.addClass,oldAnimation.removeClass=target.removeClass,target}function resolveElementClasses(existing,toAdd,toRemove){var ADD_CLASS=1,REMOVE_CLASS=-1,flags={};existing=splitClassesToLookup(existing),toAdd=splitClassesToLookup(toAdd),forEach(toAdd,(function(value,key){flags[key]=1})),toRemove=splitClassesToLookup(toRemove),forEach(toRemove,(function(value,key){flags[key]=1===flags[key]?null:-1}));var classes={addClass:"",removeClass:""};function splitClassesToLookup(classes){isString(classes)&&(classes=classes.split(" "));var obj={};return forEach(classes,(function(klass){klass.length&&(obj[klass]=!0)})),obj}return forEach(flags,(function(val,klass){var prop,allow;1===val?(prop="addClass",allow=!existing[klass]||existing[klass+"-remove"]):-1===val&&(prop="removeClass",allow=existing[klass]||existing[klass+"-add"]),allow&&(classes[prop].length&&(classes[prop]+=" "),classes[prop]+=klass)})),classes}function getDomNode(element){return element instanceof jqLite?element[0]:element}function applyGeneratedPreparationClasses(element,event,options){var classes="";event&&(classes=pendClasses(event,"ng-",!0)),options.addClass&&(classes=concatWithSpace(classes,pendClasses(options.addClass,"-add"))),options.removeClass&&(classes=concatWithSpace(classes,pendClasses(options.removeClass,"-remove"))),classes.length&&(options.preparationClasses=classes,element.addClass(classes))}function clearGeneratedClasses(element,options){options.preparationClasses&&(element.removeClass(options.preparationClasses),options.preparationClasses=null),options.activeClasses&&(element.removeClass(options.activeClasses),options.activeClasses=null)}function blockTransitions(node,duration){var value=duration?"-"+duration+"s":"";return applyInlineStyle(node,[TRANSITION_DELAY_PROP,value]),[TRANSITION_DELAY_PROP,value]}function blockKeyframeAnimations(node,applyBlock){var value=applyBlock?"paused":"",key=ANIMATION_PROP+"PlayState";return applyInlineStyle(node,[key,value]),[key,value]}function applyInlineStyle(node,styleTuple){var prop=styleTuple[0],value=styleTuple[1];node.style[prop]=value}function concatWithSpace(a,b){return a?b?a+" "+b:a:b}var $$rAFSchedulerFactory=["$$rAF",function($$rAF){var queue,cancelFn;function scheduler(tasks){queue=queue.concat(tasks),nextTick()}return queue=scheduler.queue=[],scheduler.waitUntilQuiet=function(fn){cancelFn&&cancelFn(),cancelFn=$$rAF((function(){cancelFn=null,fn(),nextTick()}))},scheduler;function nextTick(){if(queue.length){for(var items=queue.shift(),i=0;i<items.length;i++)items[i]();cancelFn||$$rAF((function(){cancelFn||nextTick()}))}}}],$$AnimateChildrenDirective=["$interpolate",function($interpolate){return{link:function(scope,element,attrs){var val=attrs.ngAnimateChildren;function setData(value){value="on"===value||"true"===value,element.data("$$ngAnimateChildren",value)}isString(val)&&0===val.length?element.data("$$ngAnimateChildren",!0):(setData($interpolate(val)(scope)),attrs.$observe("ngAnimateChildren",setData))}}}],ANIMATE_TIMER_KEY="$$animateCss",ONE_SECOND=1e3,ELAPSED_TIME_MAX_DECIMAL_PLACES=3,CLOSING_TIME_BUFFER=1.5,DETECT_CSS_PROPERTIES={transitionDuration:TRANSITION_DURATION_PROP,transitionDelay:TRANSITION_DELAY_PROP,transitionProperty:TRANSITION_PROP+"Property",animationDuration:ANIMATION_DURATION_PROP,animationDelay:ANIMATION_DELAY_PROP,animationIterationCount:ANIMATION_PROP+"IterationCount"},DETECT_STAGGER_CSS_PROPERTIES={transitionDuration:TRANSITION_DURATION_PROP,transitionDelay:TRANSITION_DELAY_PROP,animationDuration:ANIMATION_DURATION_PROP,animationDelay:ANIMATION_DELAY_PROP};function getCssKeyframeDurationStyle(duration){return[ANIMATION_DURATION_PROP,duration+"s"]}function getCssDelayStyle(delay,isKeyframeAnimation){var prop;return[isKeyframeAnimation?ANIMATION_DELAY_PROP:TRANSITION_DELAY_PROP,delay+"s"]}function computeCssStyles($window,element,properties){var styles=Object.create(null),detectedStyles=$window.getComputedStyle(element)||{};return forEach(properties,(function(formalStyleName,actualStyleName){var val=detectedStyles[formalStyleName];if(val){var c=val.charAt(0);("-"===c||"+"===c||c>=0)&&(val=parseMaxTime(val)),0===val&&(val=null),styles[actualStyleName]=val}})),styles}function parseMaxTime(str){var maxValue=0,values=str.split(/\s*,\s*/);return forEach(values,(function(value){"s"===value.charAt(value.length-1)&&(value=value.substring(0,value.length-1)),value=parseFloat(value)||0,maxValue=maxValue?Math.max(value,maxValue):value})),maxValue}function truthyTimingValue(val){return 0===val||null!=val}function getCssTransitionDurationStyle(duration,applyOnlyDuration){var style=TRANSITION_PROP,value=duration+"s";return applyOnlyDuration?style+="Duration":value+=" linear all",[style,value]}function createLocalCacheLookup(){var cache=Object.create(null);return{flush:function(){cache=Object.create(null)},count:function(key){var entry=cache[key];return entry?entry.total:0},get:function(key){var entry=cache[key];return entry&&entry.value},put:function(key,value){cache[key]?cache[key].total++:cache[key]={total:1,value:value}}}}function registerRestorableStyles(backup,node,properties){forEach(properties,(function(prop){backup[prop]=isDefined(backup[prop])?backup[prop]:node.style.getPropertyValue(prop)}))}var $AnimateCssProvider=["$animateProvider",function($animateProvider){var gcsLookup=createLocalCacheLookup(),gcsStaggerLookup=createLocalCacheLookup();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function($window,$$jqLite,$$AnimateRunner,$timeout,$$forceReflow,$sniffer,$$rAFScheduler,$$animateQueue){var applyAnimationClasses=applyAnimationClassesFactory($$jqLite),parentCounter=0;function gcsHashFn(node,extraClasses){var KEY="$$ngAnimateParentKey",parentNode=node.parentNode,parentID;return(parentNode[KEY]||(parentNode[KEY]=++parentCounter))+"-"+node.getAttribute("class")+"-"+extraClasses}function computeCachedCssStyles(node,className,cacheKey,properties){var timings=gcsLookup.get(cacheKey);return timings||"infinite"===(timings=computeCssStyles($window,node,properties)).animationIterationCount&&(timings.animationIterationCount=1),gcsLookup.put(cacheKey,timings),timings}function computeCachedCssStaggerStyles(node,className,cacheKey,properties){var stagger;if(gcsLookup.count(cacheKey)>0&&!(stagger=gcsStaggerLookup.get(cacheKey))){var staggerClassName=pendClasses(className,"-stagger");$$jqLite.addClass(node,staggerClassName),(stagger=computeCssStyles($window,node,properties)).animationDuration=Math.max(stagger.animationDuration,0),stagger.transitionDuration=Math.max(stagger.transitionDuration,0),$$jqLite.removeClass(node,staggerClassName),gcsStaggerLookup.put(cacheKey,stagger)}return stagger||{}}var rafWaitQueue=[];function waitUntilQuiet(callback){rafWaitQueue.push(callback),$$rAFScheduler.waitUntilQuiet((function(){gcsLookup.flush(),gcsStaggerLookup.flush();for(var pageWidth=$$forceReflow(),i=0;i<rafWaitQueue.length;i++)rafWaitQueue[i](pageWidth);rafWaitQueue.length=0}))}function computeTimings(node,className,cacheKey){var timings=computeCachedCssStyles(node,className,cacheKey,DETECT_CSS_PROPERTIES),aD=timings.animationDelay,tD=timings.transitionDelay;return timings.maxDelay=aD&&tD?Math.max(aD,tD):aD||tD,timings.maxDuration=Math.max(timings.animationDuration*timings.animationIterationCount,timings.transitionDuration),timings}return function init(element,initialOptions){var options=initialOptions||{};options.$$prepared||(options=prepareAnimationOptions(copy(options)));var restoreStyles={},node=getDomNode(element);if(!node||!node.parentNode||!$$animateQueue.enabled())return closeAndReturnNoopAnimator();var temporaryStyles=[],classes=element.attr("class"),styles=packageStyles(options),animationClosed,animationPaused,animationCompleted,runner,runnerHost,maxDelay,maxDelayTime,maxDuration,maxDurationTime,startTime,events=[];if(0===options.duration||!$sniffer.animations&&!$sniffer.transitions)return closeAndReturnNoopAnimator();var method=options.event&&isArray(options.event)?options.event.join(" "):options.event,isStructural,structuralClassName="",addRemoveClassName="";method&&options.structural?structuralClassName=pendClasses(method,"ng-",!0):method&&(structuralClassName=method),options.addClass&&(addRemoveClassName+=pendClasses(options.addClass,"-add")),options.removeClass&&(addRemoveClassName.length&&(addRemoveClassName+=" "),addRemoveClassName+=pendClasses(options.removeClass,"-remove")),options.applyClassesEarly&&addRemoveClassName.length&&applyAnimationClasses(element,options);var preparationClasses=[structuralClassName,addRemoveClassName].join(" ").trim(),fullClassName=classes+" "+preparationClasses,activeClasses=pendClasses(preparationClasses,"-active"),hasToStyles=styles.to&&Object.keys(styles.to).length>0,containsKeyframeAnimation,cacheKey,stagger,applyOnlyDuration;if(!((options.keyframeStyle||"").length>0)&&!hasToStyles&&!preparationClasses)return closeAndReturnNoopAnimator();if(options.stagger>0){var staggerVal=parseFloat(options.stagger);stagger={transitionDelay:staggerVal,animationDelay:staggerVal,transitionDuration:0,animationDuration:0}}else cacheKey=gcsHashFn(node,fullClassName),stagger=computeCachedCssStaggerStyles(node,preparationClasses,cacheKey,DETECT_STAGGER_CSS_PROPERTIES);if(options.$$skipPreparationClasses||$$jqLite.addClass(element,preparationClasses),options.transitionStyle){var transitionStyle=[TRANSITION_PROP,options.transitionStyle];applyInlineStyle(node,transitionStyle),temporaryStyles.push(transitionStyle)}if(options.duration>=0){applyOnlyDuration=node.style[TRANSITION_PROP].length>0;var durationStyle=getCssTransitionDurationStyle(options.duration,applyOnlyDuration);applyInlineStyle(node,durationStyle),temporaryStyles.push(durationStyle)}if(options.keyframeStyle){var keyframeStyle=[ANIMATION_PROP,options.keyframeStyle];applyInlineStyle(node,keyframeStyle),temporaryStyles.push(keyframeStyle)}var itemIndex=stagger?options.staggerIndex>=0?options.staggerIndex:gcsLookup.count(cacheKey):0,isFirst=0===itemIndex;isFirst&&!options.skipBlocking&&blockTransitions(node,9999);var timings=computeTimings(node,fullClassName,cacheKey),relativeDelay=timings.maxDelay;maxDelay=Math.max(relativeDelay,0),maxDuration=timings.maxDuration;var flags={},delayStyle;if(flags.hasTransitions=timings.transitionDuration>0,flags.hasAnimations=timings.animationDuration>0,flags.hasTransitionAll=flags.hasTransitions&&"all"===timings.transitionProperty,flags.applyTransitionDuration=hasToStyles&&(flags.hasTransitions&&!flags.hasTransitionAll||flags.hasAnimations&&!flags.hasTransitions),flags.applyAnimationDuration=options.duration&&flags.hasAnimations,flags.applyTransitionDelay=truthyTimingValue(options.delay)&&(flags.applyTransitionDuration||flags.hasTransitions),flags.applyAnimationDelay=truthyTimingValue(options.delay)&&flags.hasAnimations,flags.recalculateTimingStyles=addRemoveClassName.length>0,(flags.applyTransitionDuration||flags.applyAnimationDuration)&&(maxDuration=options.duration?parseFloat(options.duration):maxDuration,flags.applyTransitionDuration&&(flags.hasTransitions=!0,timings.transitionDuration=maxDuration,applyOnlyDuration=node.style[TRANSITION_PROP+"Property"].length>0,temporaryStyles.push(getCssTransitionDurationStyle(maxDuration,applyOnlyDuration))),flags.applyAnimationDuration&&(flags.hasAnimations=!0,timings.animationDuration=maxDuration,temporaryStyles.push(getCssKeyframeDurationStyle(maxDuration)))),0===maxDuration&&!flags.recalculateTimingStyles)return closeAndReturnNoopAnimator();null!=options.delay&&("boolean"!=typeof options.delay&&(delayStyle=parseFloat(options.delay),maxDelay=Math.max(delayStyle,0)),flags.applyTransitionDelay&&temporaryStyles.push(getCssDelayStyle(delayStyle)),flags.applyAnimationDelay&&temporaryStyles.push(getCssDelayStyle(delayStyle,!0)));return null==options.duration&&timings.transitionDuration>0&&(flags.recalculateTimingStyles=flags.recalculateTimingStyles||isFirst),maxDelayTime=1e3*maxDelay,maxDurationTime=1e3*maxDuration,options.skipBlocking||(flags.blockTransition=timings.transitionDuration>0,flags.blockKeyframeAnimation=timings.animationDuration>0&&stagger.animationDelay>0&&0===stagger.animationDuration),options.from&&(options.cleanupStyles&&registerRestorableStyles(restoreStyles,node,Object.keys(options.from)),applyAnimationFromStyles(element,options)),flags.blockTransition||flags.blockKeyframeAnimation?applyBlocking(maxDuration):options.skipBlocking||blockTransitions(node,!1),{$$willAnimate:!0,end:endFn,start:function(){if(!animationClosed)return runner=new $$AnimateRunner(runnerHost={end:endFn,cancel:cancelFn,resume:null,pause:null}),waitUntilQuiet(start),runner}};function endFn(){close()}function cancelFn(){close(!0)}function close(rejected){if(!(animationClosed||animationCompleted&&animationPaused)){animationClosed=!0,animationPaused=!1,options.$$skipPreparationClasses||$$jqLite.removeClass(element,preparationClasses),$$jqLite.removeClass(element,activeClasses),blockKeyframeAnimations(node,!1),blockTransitions(node,!1),forEach(temporaryStyles,(function(entry){node.style[entry[0]]=""})),applyAnimationClasses(element,options),applyAnimationStyles(element,options),Object.keys(restoreStyles).length&&forEach(restoreStyles,(function(value,prop){value?node.style.setProperty(prop,value):node.style.removeProperty(prop)})),options.onDone&&options.onDone(),events&&events.length&&element.off(events.join(" "),onAnimationProgress);var animationTimerData=element.data("$$animateCss");animationTimerData&&($timeout.cancel(animationTimerData[0].timer),element.removeData("$$animateCss")),runner&&runner.complete(!rejected)}}function applyBlocking(duration){flags.blockTransition&&blockTransitions(node,duration),flags.blockKeyframeAnimation&&blockKeyframeAnimations(node,!!duration)}function closeAndReturnNoopAnimator(){return runner=new $$AnimateRunner({end:endFn,cancel:cancelFn}),waitUntilQuiet(noop),close(),{$$willAnimate:!1,start:function(){return runner},end:endFn}}function onAnimationProgress(event){event.stopPropagation();var ev=event.originalEvent||event,timeStamp=ev.$manualTimeStamp||Date.now(),elapsedTime=parseFloat(ev.elapsedTime.toFixed(3));Math.max(timeStamp-startTime,0)>=maxDelayTime&&elapsedTime>=maxDuration&&(animationCompleted=!0,close())}function start(){if(!animationClosed)if(node.parentNode){var playPause=function(playAnimation){if(animationCompleted)animationPaused&&playAnimation&&(animationPaused=!1,close());else if(animationPaused=!playAnimation,timings.animationDuration){var value=blockKeyframeAnimations(node,animationPaused);animationPaused?temporaryStyles.push(value):removeFromArray(temporaryStyles,value)}},maxStagger=itemIndex>0&&(timings.transitionDuration&&0===stagger.transitionDuration||timings.animationDuration&&0===stagger.animationDuration)&&Math.max(stagger.animationDelay,stagger.transitionDelay);maxStagger?$timeout(triggerAnimationStart,Math.floor(maxStagger*itemIndex*1e3),!1):triggerAnimationStart(),runnerHost.resume=function(){playPause(!0)},runnerHost.pause=function(){playPause(!1)}}else close();function triggerAnimationStart(){if(!animationClosed){if(applyBlocking(!1),forEach(temporaryStyles,(function(entry){var key=entry[0],value=entry[1];node.style[key]=value})),applyAnimationClasses(element,options),$$jqLite.addClass(element,activeClasses),flags.recalculateTimingStyles){if(fullClassName=node.getAttribute("class")+" "+preparationClasses,cacheKey=gcsHashFn(node,fullClassName),timings=computeTimings(node,fullClassName,cacheKey),relativeDelay=timings.maxDelay,maxDelay=Math.max(relativeDelay,0),0===(maxDuration=timings.maxDuration))return void close();flags.hasTransitions=timings.transitionDuration>0,flags.hasAnimations=timings.animationDuration>0}if(flags.applyAnimationDelay&&(relativeDelay="boolean"!=typeof options.delay&&truthyTimingValue(options.delay)?parseFloat(options.delay):relativeDelay,maxDelay=Math.max(relativeDelay,0),timings.animationDelay=relativeDelay,delayStyle=getCssDelayStyle(relativeDelay,!0),temporaryStyles.push(delayStyle),node.style[delayStyle[0]]=delayStyle[1]),maxDelayTime=1e3*maxDelay,maxDurationTime=1e3*maxDuration,options.easing){var easeProp,easeVal=options.easing;flags.hasTransitions&&(easeProp=TRANSITION_PROP+TIMING_KEY,temporaryStyles.push([easeProp,easeVal]),node.style[easeProp]=easeVal),flags.hasAnimations&&(easeProp=ANIMATION_PROP+TIMING_KEY,temporaryStyles.push([easeProp,easeVal]),node.style[easeProp]=easeVal)}timings.transitionDuration&&events.push(TRANSITIONEND_EVENT),timings.animationDuration&&events.push(ANIMATIONEND_EVENT),startTime=Date.now();var timerTime=maxDelayTime+1.5*maxDurationTime,endTime=startTime+timerTime,animationsData=element.data("$$animateCss")||[],setupFallbackTimer=!0;if(animationsData.length){var currentTimerData=animationsData[0];(setupFallbackTimer=endTime>currentTimerData.expectedEndTime)?$timeout.cancel(currentTimerData.timer):animationsData.push(close)}if(setupFallbackTimer){var timer=$timeout(onAnimationExpired,timerTime,!1);animationsData[0]={timer:timer,expectedEndTime:endTime},animationsData.push(close),element.data("$$animateCss",animationsData)}events.length&&element.on(events.join(" "),onAnimationProgress),options.to&&(options.cleanupStyles&&registerRestorableStyles(restoreStyles,node,Object.keys(options.to)),applyAnimationToStyles(element,options))}}function onAnimationExpired(){var animationsData=element.data("$$animateCss");if(animationsData){for(var i=1;i<animationsData.length;i++)animationsData[i]();element.removeData("$$animateCss")}}}}}]}],$$AnimateCssDriverProvider=["$$animationProvider",function($$animationProvider){$$animationProvider.drivers.push("$$animateCssDriver");var NG_ANIMATE_SHIM_CLASS_NAME="ng-animate-shim",NG_ANIMATE_ANCHOR_CLASS_NAME="ng-anchor",NG_OUT_ANCHOR_CLASS_NAME="ng-anchor-out",NG_IN_ANCHOR_CLASS_NAME="ng-anchor-in";function isDocumentFragment(node){return node.parentNode&&11===node.parentNode.nodeType}this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function($animateCss,$rootScope,$$AnimateRunner,$rootElement,$sniffer,$$jqLite,$document){if(!$sniffer.animations&&!$sniffer.transitions)return noop;var bodyNode=$document[0].body,rootNode=getDomNode($rootElement),rootBodyElement=jqLite(isDocumentFragment(rootNode)||bodyNode.contains(rootNode)?rootNode:bodyNode);return function initDriverFn(animationDetails){return animationDetails.from&&animationDetails.to?prepareFromToAnchorAnimation(animationDetails.from,animationDetails.to,animationDetails.classes,animationDetails.anchors):prepareRegularAnimation(animationDetails)};function filterCssClasses(classes){return classes.replace(/\bng-\S+\b/g,"")}function getUniqueValues(a,b){return isString(a)&&(a=a.split(" ")),isString(b)&&(b=b.split(" ")),a.filter((function(val){return-1===b.indexOf(val)})).join(" ")}function prepareAnchoredAnimation(classes,outAnchor,inAnchor){var clone=jqLite(getDomNode(outAnchor).cloneNode(!0)),startingClasses=filterCssClasses(getClassVal(clone));outAnchor.addClass("ng-animate-shim"),inAnchor.addClass("ng-animate-shim"),clone.addClass("ng-anchor"),rootBodyElement.append(clone);var animatorIn,animatorOut=prepareOutAnimation();if(!animatorOut&&!(animatorIn=prepareInAnimation()))return end();var startingAnimator=animatorOut||animatorIn;return{start:function(){var runner,currentAnimation=startingAnimator.start();return currentAnimation.done((function(){if(currentAnimation=null,!animatorIn&&(animatorIn=prepareInAnimation()))return(currentAnimation=animatorIn.start()).done((function(){currentAnimation=null,end(),runner.complete()})),currentAnimation;end(),runner.complete()})),runner=new $$AnimateRunner({end:endFn,cancel:endFn});function endFn(){currentAnimation&&currentAnimation.end()}}};function calculateAnchorStyles(anchor){var styles={},coords=getDomNode(anchor).getBoundingClientRect();return forEach(["width","height","top","left"],(function(key){var value=coords[key];switch(key){case"top":value+=bodyNode.scrollTop;break;case"left":value+=bodyNode.scrollLeft}styles[key]=Math.floor(value)+"px"})),styles}function prepareOutAnimation(){var animator=$animateCss(clone,{addClass:"ng-anchor-out",delay:!0,from:calculateAnchorStyles(outAnchor)});return animator.$$willAnimate?animator:null}function getClassVal(element){return element.attr("class")||""}function prepareInAnimation(){var endingClasses=filterCssClasses(getClassVal(inAnchor)),toAdd=getUniqueValues(endingClasses,startingClasses),toRemove=getUniqueValues(startingClasses,endingClasses),animator=$animateCss(clone,{to:calculateAnchorStyles(inAnchor),addClass:"ng-anchor-in "+toAdd,removeClass:"ng-anchor-out "+toRemove,delay:!0});return animator.$$willAnimate?animator:null}function end(){clone.remove(),outAnchor.removeClass("ng-animate-shim"),inAnchor.removeClass("ng-animate-shim")}}function prepareFromToAnchorAnimation(from,to,classes,anchors){var fromAnimation=prepareRegularAnimation(from,noop),toAnimation=prepareRegularAnimation(to,noop),anchorAnimations=[];if(forEach(anchors,(function(anchor){var outElement=anchor.out,inElement=anchor.in,animator=prepareAnchoredAnimation(classes,outElement,inElement);animator&&anchorAnimations.push(animator)})),fromAnimation||toAnimation||0!==anchorAnimations.length)return{start:function(){var animationRunners=[];fromAnimation&&animationRunners.push(fromAnimation.start()),toAnimation&&animationRunners.push(toAnimation.start()),forEach(anchorAnimations,(function(animation){animationRunners.push(animation.start())}));var runner=new $$AnimateRunner({end:endFn,cancel:endFn});return $$AnimateRunner.all(animationRunners,(function(status){runner.complete(status)})),runner;function endFn(){forEach(animationRunners,(function(runner){runner.end()}))}}}}function prepareRegularAnimation(animationDetails){var element=animationDetails.element,options=animationDetails.options||{};animationDetails.structural&&(options.event=animationDetails.event,options.structural=!0,options.applyClassesEarly=!0,"leave"===animationDetails.event&&(options.onDone=options.domOperation)),options.preparationClasses&&(options.event=concatWithSpace(options.event,options.preparationClasses));var animator=$animateCss(element,options);return animator.$$willAnimate?animator:null}}]}],$$AnimateJsProvider=["$animateProvider",function($animateProvider){this.$get=["$injector","$$AnimateRunner","$$jqLite",function($injector,$$AnimateRunner,$$jqLite){var applyAnimationClasses=applyAnimationClassesFactory($$jqLite);return function(element,event,classes,options){var animationClosed=!1;3===arguments.length&&isObject(classes)&&(options=classes,classes=null),options=prepareAnimationOptions(options),classes||(classes=element.attr("class")||"",options.addClass&&(classes+=" "+options.addClass),options.removeClass&&(classes+=" "+options.removeClass));var classesToAdd=options.addClass,classesToRemove=options.removeClass,animations=lookupAnimations(classes),before,after,afterFn,beforeFn,runner;animations.length&&("leave"===event?(beforeFn="leave",afterFn="afterLeave"):(beforeFn="before"+event.charAt(0).toUpperCase()+event.substr(1),afterFn=event),"enter"!==event&&"move"!==event&&(before=packageAnimations(element,event,options,animations,beforeFn)),after=packageAnimations(element,event,options,animations,afterFn));if(before||after)return{$$willAnimate:!0,end:function(){return runner?runner.end():(close(),(runner=new $$AnimateRunner).complete(!0)),runner},start:function(){if(runner)return runner;var closeActiveAnimations;runner=new $$AnimateRunner;var chain=[];return before&&chain.push((function(fn){closeActiveAnimations=before(fn)})),chain.length?chain.push((function(fn){applyOptions(),fn(!0)})):applyOptions(),after&&chain.push((function(fn){closeActiveAnimations=after(fn)})),runner.setHost({end:function(){endAnimations()},cancel:function(){endAnimations(!0)}}),$$AnimateRunner.chain(chain,onComplete),runner;function onComplete(success){close(success),runner.complete(success)}function endAnimations(cancelled){animationClosed||((closeActiveAnimations||noop)(cancelled),onComplete(cancelled))}}};function applyOptions(){options.domOperation(),applyAnimationClasses(element,options)}function close(){animationClosed=!0,applyOptions(),applyAnimationStyles(element,options)}function executeAnimationFn(fn,element,event,options,onDone){var args;switch(event){case"animate":args=[element,options.from,options.to,onDone];break;case"setClass":args=[element,classesToAdd,classesToRemove,onDone];break;case"addClass":args=[element,classesToAdd,onDone];break;case"removeClass":args=[element,classesToRemove,onDone];break;default:args=[element,onDone]}args.push(options);var value=fn.apply(fn,args);if(value)if(isFunction(value.start)&&(value=value.start()),value instanceof $$AnimateRunner)value.done(onDone);else if(isFunction(value))return value;return noop}function groupEventedAnimations(element,event,options,animations,fnName){var operations=[];return forEach(animations,(function(ani){var animation=ani[fnName];animation&&operations.push((function(){var runner,endProgressCb,resolved=!1,onAnimationComplete=function(rejected){resolved||(resolved=!0,(endProgressCb||noop)(rejected),runner.complete(!rejected))};return runner=new $$AnimateRunner({end:function(){onAnimationComplete()},cancel:function(){onAnimationComplete(!0)}}),endProgressCb=executeAnimationFn(animation,element,event,options,(function(result){var cancelled;onAnimationComplete(!1===result)})),runner}))})),operations}function packageAnimations(element,event,options,animations,fnName){var operations=groupEventedAnimations(element,event,options,animations,fnName),a,b;0===operations.length&&("beforeSetClass"===fnName?(a=groupEventedAnimations(element,"removeClass",options,animations,"beforeRemoveClass"),b=groupEventedAnimations(element,"addClass",options,animations,"beforeAddClass")):"setClass"===fnName&&(a=groupEventedAnimations(element,"removeClass",options,animations,"removeClass"),b=groupEventedAnimations(element,"addClass",options,animations,"addClass")),a&&(operations=operations.concat(a)),b&&(operations=operations.concat(b)));if(0!==operations.length)return function startAnimation(callback){var runners=[];return operations.length&&forEach(operations,(function(animateFn){runners.push(animateFn())})),runners.length?$$AnimateRunner.all(runners,callback):callback(),function endFn(reject){forEach(runners,(function(runner){reject?runner.cancel():runner.end()}))}}}};function lookupAnimations(classes){classes=isArray(classes)?classes:classes.split(" ");for(var matches=[],flagMap={},i=0;i<classes.length;i++){var klass=classes[i],animationFactory=$animateProvider.$$registeredAnimations[klass];animationFactory&&!flagMap[klass]&&(matches.push($injector.get(animationFactory)),flagMap[klass]=!0)}return matches}}]}],$$AnimateJsDriverProvider=["$$animationProvider",function($$animationProvider){$$animationProvider.drivers.push("$$animateJsDriver"),this.$get=["$$animateJs","$$AnimateRunner",function($$animateJs,$$AnimateRunner){return function initDriverFn(animationDetails){if(animationDetails.from&&animationDetails.to){var fromAnimation=prepareAnimation(animationDetails.from),toAnimation=prepareAnimation(animationDetails.to);if(!fromAnimation&&!toAnimation)return;return{start:function(){var animationRunners=[];fromAnimation&&animationRunners.push(fromAnimation.start()),toAnimation&&animationRunners.push(toAnimation.start()),$$AnimateRunner.all(animationRunners,done);var runner=new $$AnimateRunner({end:endFnFactory(),cancel:endFnFactory()});return runner;function endFnFactory(){return function(){forEach(animationRunners,(function(runner){runner.end()}))}}function done(status){runner.complete(status)}}}}return prepareAnimation(animationDetails)};function prepareAnimation(animationDetails){var element=animationDetails.element,event=animationDetails.event,options=animationDetails.options,classes=animationDetails.classes;return $$animateJs(element,event,classes,options)}}]}],NG_ANIMATE_ATTR_NAME="data-ng-animate",NG_ANIMATE_PIN_DATA="$ngAnimatePin",$$AnimateQueueProvider=["$animateProvider",function($animateProvider){var PRE_DIGEST_STATE=1,RUNNING_STATE=2,ONE_SPACE=" ",rules=this.rules={skip:[],cancel:[],join:[]};function makeTruthyCssClassMap(classString){if(!classString)return null;var keys=classString.split(" "),map=Object.create(null);return forEach(keys,(function(key){map[key]=!0})),map}function hasMatchingClasses(newClassString,currentClassString){if(newClassString&&currentClassString){var currentClassMap=makeTruthyCssClassMap(currentClassString);return newClassString.split(" ").some((function(className){return currentClassMap[className]}))}}function isAllowed(ruleType,currentAnimation,previousAnimation){return rules[ruleType].some((function(fn){return fn(currentAnimation,previousAnimation)}))}function hasAnimationClasses(animation,and){var a=(animation.addClass||"").length>0,b=(animation.removeClass||"").length>0;return and?a&&b:a||b}rules.join.push((function(newAnimation,currentAnimation){return!newAnimation.structural&&hasAnimationClasses(newAnimation)})),rules.skip.push((function(newAnimation,currentAnimation){return!newAnimation.structural&&!hasAnimationClasses(newAnimation)})),rules.skip.push((function(newAnimation,currentAnimation){return"leave"===currentAnimation.event&&newAnimation.structural})),rules.skip.push((function(newAnimation,currentAnimation){return currentAnimation.structural&&2===currentAnimation.state&&!newAnimation.structural})),rules.cancel.push((function(newAnimation,currentAnimation){return currentAnimation.structural&&newAnimation.structural})),rules.cancel.push((function(newAnimation,currentAnimation){return 2===currentAnimation.state&&newAnimation.structural})),rules.cancel.push((function(newAnimation,currentAnimation){if(currentAnimation.structural)return!1;var nA=newAnimation.addClass,nR=newAnimation.removeClass,cA=currentAnimation.addClass,cR=currentAnimation.removeClass;return!(isUndefined(nA)&&isUndefined(nR)||isUndefined(cA)&&isUndefined(cR))&&(hasMatchingClasses(nA,cR)||hasMatchingClasses(nR,cA))})),this.$get=["$$rAF","$rootScope","$rootElement","$document","$$Map","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow","$$isDocumentHidden",function($$rAF,$rootScope,$rootElement,$document,$$Map,$$animation,$$AnimateRunner,$templateRequest,$$jqLite,$$forceReflow,$$isDocumentHidden){var activeAnimationsLookup=new $$Map,disabledElementsLookup=new $$Map,animationsEnabled=null;function postDigestTaskFactory(){var postDigestCalled=!1;return function(fn){postDigestCalled?fn():$rootScope.$$postDigest((function(){postDigestCalled=!0,fn()}))}}var deregisterWatch=$rootScope.$watch((function(){return 0===$templateRequest.totalPendingRequests}),(function(isEmpty){isEmpty&&(deregisterWatch(),$rootScope.$$postDigest((function(){$rootScope.$$postDigest((function(){null===animationsEnabled&&(animationsEnabled=!0)}))})))})),callbackRegistry=Object.create(null),customFilter=$animateProvider.customFilter(),classNameFilter=$animateProvider.classNameFilter(),returnTrue=function(){return!0},isAnimatableByFilter=customFilter||returnTrue,isAnimatableClassName=classNameFilter?function(node,options){var className=[node.getAttribute("class"),options.addClass,options.removeClass].join(" ");return classNameFilter.test(className)}:returnTrue,applyAnimationClasses=applyAnimationClassesFactory($$jqLite);function normalizeAnimationDetails(element,animation){return mergeAnimationDetails(element,animation,{})}var contains=window.Node.prototype.contains||function(arg){return this===arg||!!(16&this.compareDocumentPosition(arg))};function findCallbacks(targetParentNode,targetNode,event){var matches=[],entries=callbackRegistry[event];return entries&&forEach(entries,(function(entry){contains.call(entry.node,targetNode)?matches.push(entry.callback):"leave"===event&&contains.call(entry.node,targetParentNode)&&matches.push(entry.callback)})),matches}function filterFromRegistry(list,matchContainer,matchCallback){var containerNode=extractElementNode(matchContainer);return list.filter((function(entry){var isMatch;return!(entry.node===containerNode&&(!matchCallback||entry.callback===matchCallback))}))}function cleanupEventListeners(phase,node){"close"!==phase||node.parentNode||$animate.off(node)}var $animate={on:function(event,container,callback){var node=extractElementNode(container);callbackRegistry[event]=callbackRegistry[event]||[],callbackRegistry[event].push({node:node,callback:callback}),jqLite(container).on("$destroy",(function(){var animationDetails;activeAnimationsLookup.get(node)||$animate.off(event,container,callback)}))},off:function(event,container,callback){if(1!==arguments.length||isString(arguments[0])){var entries=callbackRegistry[event];entries&&(callbackRegistry[event]=1===arguments.length?null:filterFromRegistry(entries,container,callback))}else for(var eventType in container=arguments[0],callbackRegistry)callbackRegistry[eventType]=filterFromRegistry(callbackRegistry[eventType],container)},pin:function(element,parentElement){assertArg(isElement(element),"element","not an element"),assertArg(isElement(parentElement),"parentElement","not an element"),element.data("$ngAnimatePin",parentElement)},push:function(element,event,options,domOperation){return(options=options||{}).domOperation=domOperation,queueAnimation(element,event,options)},enabled:function(element,bool){var argCount=arguments.length;if(0===argCount)bool=!!animationsEnabled;else{var hasElement=isElement(element);if(hasElement){var node=getDomNode(element);1===argCount?bool=!disabledElementsLookup.get(node):disabledElementsLookup.set(node,!bool)}else bool=animationsEnabled=!!element}return bool}};return $animate;function queueAnimation(originalElement,event,initialOptions){var options=copy(initialOptions),element=stripCommentsFromElement(originalElement),node=getDomNode(element),parentNode=node&&node.parentNode;options=prepareAnimationOptions(options);var runner=new $$AnimateRunner,runInNextPostDigestOrNow=postDigestTaskFactory();if(isArray(options.addClass)&&(options.addClass=options.addClass.join(" ")),options.addClass&&!isString(options.addClass)&&(options.addClass=null),isArray(options.removeClass)&&(options.removeClass=options.removeClass.join(" ")),options.removeClass&&!isString(options.removeClass)&&(options.removeClass=null),options.from&&!isObject(options.from)&&(options.from=null),options.to&&!isObject(options.to)&&(options.to=null),!(animationsEnabled&&node&&isAnimatableByFilter(node,event,initialOptions)&&isAnimatableClassName(node,options)))return close(),runner;var isStructural=["enter","move","leave"].indexOf(event)>=0,documentHidden=$$isDocumentHidden(),skipAnimations=documentHidden||disabledElementsLookup.get(node),existingAnimation=!skipAnimations&&activeAnimationsLookup.get(node)||{},hasExistingAnimation=!!existingAnimation.state;if(skipAnimations||hasExistingAnimation&&1===existingAnimation.state||(skipAnimations=!areAnimationsAllowed(node,parentNode,event)),skipAnimations)return documentHidden&&notifyProgress(runner,event,"start"),close(),documentHidden&&notifyProgress(runner,event,"close"),runner;isStructural&&closeChildAnimations(node);var newAnimation={structural:isStructural,element:element,event:event,addClass:options.addClass,removeClass:options.removeClass,close:close,options:options,runner:runner};if(hasExistingAnimation){var skipAnimationFlag,cancelAnimationFlag,joinAnimationFlag;if(isAllowed("skip",newAnimation,existingAnimation))return 2===existingAnimation.state?(close(),runner):(mergeAnimationDetails(element,existingAnimation,newAnimation),existingAnimation.runner);if(isAllowed("cancel",newAnimation,existingAnimation))if(2===existingAnimation.state)existingAnimation.runner.end();else{if(!existingAnimation.structural)return mergeAnimationDetails(element,existingAnimation,newAnimation),existingAnimation.runner;existingAnimation.close()}else if(isAllowed("join",newAnimation,existingAnimation)){if(2!==existingAnimation.state)return applyGeneratedPreparationClasses(element,isStructural?event:null,options),event=newAnimation.event=existingAnimation.event,options=mergeAnimationDetails(element,existingAnimation,newAnimation),existingAnimation.runner;normalizeAnimationDetails(element,newAnimation)}}else normalizeAnimationDetails(element,newAnimation);var isValidAnimation=newAnimation.structural;if(isValidAnimation||(isValidAnimation="animate"===newAnimation.event&&Object.keys(newAnimation.options.to||{}).length>0||hasAnimationClasses(newAnimation)),!isValidAnimation)return close(),clearElementAnimationState(node),runner;var counter=(existingAnimation.counter||0)+1;return newAnimation.counter=counter,markElementAnimationState(node,1,newAnimation),$rootScope.$$postDigest((function(){element=stripCommentsFromElement(originalElement);var animationDetails=activeAnimationsLookup.get(node),animationCancelled=!animationDetails;animationDetails=animationDetails||{};var parentElement,isValidAnimation=(element.parent()||[]).length>0&&("animate"===animationDetails.event||animationDetails.structural||hasAnimationClasses(animationDetails));if(animationCancelled||animationDetails.counter!==counter||!isValidAnimation)return animationCancelled&&(applyAnimationClasses(element,options),applyAnimationStyles(element,options)),(animationCancelled||isStructural&&animationDetails.event!==event)&&(options.domOperation(),runner.end()),void(isValidAnimation||clearElementAnimationState(node));event=!animationDetails.structural&&hasAnimationClasses(animationDetails,!0)?"setClass":animationDetails.event,markElementAnimationState(node,2);var realRunner=$$animation(element,event,animationDetails.options);runner.setHost(realRunner),notifyProgress(runner,event,"start",{}),realRunner.done((function(status){close(!status);var animationDetails=activeAnimationsLookup.get(node);animationDetails&&animationDetails.counter===counter&&clearElementAnimationState(node),notifyProgress(runner,event,"close",{})}))})),runner;function notifyProgress(runner,event,phase,data){runInNextPostDigestOrNow((function(){var callbacks=findCallbacks(parentNode,node,event);callbacks.length?$$rAF((function(){forEach(callbacks,(function(callback){callback(element,phase,data)})),cleanupEventListeners(phase,node)})):cleanupEventListeners(phase,node)})),runner.progress(event,phase,data)}function close(reject){clearGeneratedClasses(element,options),applyAnimationClasses(element,options),applyAnimationStyles(element,options),options.domOperation(),runner.complete(!reject)}}function closeChildAnimations(node){var children=node.querySelectorAll("[data-ng-animate]");forEach(children,(function(child){var state=parseInt(child.getAttribute("data-ng-animate"),10),animationDetails=activeAnimationsLookup.get(child);if(animationDetails)switch(state){case 2:animationDetails.runner.end();case 1:activeAnimationsLookup.delete(child)}}))}function clearElementAnimationState(node){node.removeAttribute("data-ng-animate"),activeAnimationsLookup.delete(node)}function areAnimationsAllowed(node,parentNode,event){var bodyNode=$document[0].body,rootNode=getDomNode($rootElement),bodyNodeDetected=node===bodyNode||"HTML"===node.nodeName,rootNodeDetected=node===rootNode,parentAnimationDetected=!1,elementDisabled=disabledElementsLookup.get(node),animateChildren,parentHost=jqLite.data(node,"$ngAnimatePin"),allowAnimation;for(parentHost&&(parentNode=getDomNode(parentHost));parentNode&&(rootNodeDetected||(rootNodeDetected=parentNode===rootNode),1===parentNode.nodeType);){var details=activeAnimationsLookup.get(parentNode)||{};if(!parentAnimationDetected){var parentNodeDisabled=disabledElementsLookup.get(parentNode);if(!0===parentNodeDisabled&&!1!==elementDisabled){elementDisabled=!0;break}!1===parentNodeDisabled&&(elementDisabled=!1),parentAnimationDetected=details.structural}if(isUndefined(animateChildren)||!0===animateChildren){var value=jqLite.data(parentNode,"$$ngAnimateChildren");isDefined(value)&&(animateChildren=value)}if(parentAnimationDetected&&!1===animateChildren)break;if(bodyNodeDetected||(bodyNodeDetected=parentNode===bodyNode),bodyNodeDetected&&rootNodeDetected)break;parentNode=rootNodeDetected||!(parentHost=jqLite.data(parentNode,"$ngAnimatePin"))?parentNode.parentNode:getDomNode(parentHost)}return(!parentAnimationDetected||animateChildren)&&!0!==elementDisabled&&rootNodeDetected&&bodyNodeDetected}function markElementAnimationState(node,state,details){(details=details||{}).state=state,node.setAttribute("data-ng-animate",state);var oldValue=activeAnimationsLookup.get(node),newValue=oldValue?extend(oldValue,details):details;activeAnimationsLookup.set(node,newValue)}}]}],$$AnimationProvider=["$animateProvider",function($animateProvider){var NG_ANIMATE_REF_ATTR="ng-animate-ref",drivers=this.drivers=[],RUNNER_STORAGE_KEY="$$animationRunner";function setRunner(element,runner){element.data(RUNNER_STORAGE_KEY,runner)}function removeRunner(element){element.removeData(RUNNER_STORAGE_KEY)}function getRunner(element){return element.data(RUNNER_STORAGE_KEY)}this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$Map","$$rAFScheduler",function($$jqLite,$rootScope,$injector,$$AnimateRunner,$$Map,$$rAFScheduler){var animationQueue=[],applyAnimationClasses=applyAnimationClassesFactory($$jqLite);function sortAnimations(animations){var tree={children:[]},i,lookup=new $$Map;for(i=0;i<animations.length;i++){var animation=animations[i];lookup.set(animation.domNode,animations[i]={domNode:animation.domNode,fn:animation.fn,children:[]})}for(i=0;i<animations.length;i++)processNode(animations[i]);return flatten(tree);function processNode(entry){if(entry.processed)return entry;entry.processed=!0;var elementNode=entry.domNode,parentNode=elementNode.parentNode,parentEntry;for(lookup.set(elementNode,entry);parentNode;){if(parentEntry=lookup.get(parentNode)){parentEntry.processed||(parentEntry=processNode(parentEntry));break}parentNode=parentNode.parentNode}return(parentEntry||tree).children.push(entry),entry}function flatten(tree){var result=[],queue=[],i;for(i=0;i<tree.children.length;i++)queue.push(tree.children[i]);var remainingLevelEntries=queue.length,nextLevelEntries=0,row=[];for(i=0;i<queue.length;i++){var entry=queue[i];remainingLevelEntries<=0&&(remainingLevelEntries=nextLevelEntries,nextLevelEntries=0,result.push(row),row=[]),row.push(entry.fn),entry.children.forEach((function(childEntry){nextLevelEntries++,queue.push(childEntry)})),remainingLevelEntries--}return row.length&&result.push(row),result}}return function(element,event,options){options=prepareAnimationOptions(options);var isStructural=["enter","move","leave"].indexOf(event)>=0,runner=new $$AnimateRunner({end:function(){close()},cancel:function(){close(!0)}});if(!drivers.length)return close(),runner;setRunner(element,runner);var classes=mergeClasses(element.attr("class"),mergeClasses(options.addClass,options.removeClass)),tempClasses=options.tempClasses,prepareClassName;return tempClasses&&(classes+=" "+tempClasses,options.tempClasses=null),isStructural&&(prepareClassName="ng-"+event+"-prepare",$$jqLite.addClass(element,prepareClassName)),animationQueue.push({element:element,classes:classes,event:event,structural:isStructural,options:options,beforeStart:beforeStart,close:close}),element.on("$destroy",handleDestroyedElement),animationQueue.length>1?runner:($rootScope.$$postDigest((function(){var animations=[];forEach(animationQueue,(function(entry){getRunner(entry.element)?animations.push(entry):entry.close()})),animationQueue.length=0;var groupedAnimations=groupAnimations(animations),toBeSortedAnimations=[];forEach(groupedAnimations,(function(animationEntry){toBeSortedAnimations.push({domNode:getDomNode(animationEntry.from?animationEntry.from.element:animationEntry.element),fn:function triggerAnimationStart(){animationEntry.beforeStart();var startAnimationFn,closeFn=animationEntry.close,targetElement;if(getRunner(animationEntry.anchors?animationEntry.from.element||animationEntry.to.element:animationEntry.element)){var operation=invokeFirstDriver(animationEntry);operation&&(startAnimationFn=operation.start)}if(startAnimationFn){var animationRunner=startAnimationFn();animationRunner.done((function(status){closeFn(!status)})),updateAnimationRunners(animationEntry,animationRunner)}else closeFn()}})})),$$rAFScheduler(sortAnimations(toBeSortedAnimations))})),runner);function getAnchorNodes(node){var SELECTOR="[ng-animate-ref]",items=node.hasAttribute("ng-animate-ref")?[node]:node.querySelectorAll(SELECTOR),anchors=[];return forEach(items,(function(node){var attr=node.getAttribute("ng-animate-ref");attr&&attr.length&&anchors.push(node)})),anchors}function groupAnimations(animations){var preparedAnimations=[],refLookup={};forEach(animations,(function(animation,index){var element,node=getDomNode(animation.element),event=animation.event,enterOrMove=["enter","move"].indexOf(event)>=0,anchorNodes=animation.structural?getAnchorNodes(node):[];if(anchorNodes.length){var direction=enterOrMove?"to":"from";forEach(anchorNodes,(function(anchor){var key=anchor.getAttribute("ng-animate-ref");refLookup[key]=refLookup[key]||{},refLookup[key][direction]={animationID:index,element:jqLite(anchor)}}))}else preparedAnimations.push(animation)}));var usedIndicesLookup={},anchorGroups={};return forEach(refLookup,(function(operations,key){var from=operations.from,to=operations.to;if(from&&to){var fromAnimation=animations[from.animationID],toAnimation=animations[to.animationID],lookupKey=from.animationID.toString();if(!anchorGroups[lookupKey]){var group=anchorGroups[lookupKey]={structural:!0,beforeStart:function(){fromAnimation.beforeStart(),toAnimation.beforeStart()},close:function(){fromAnimation.close(),toAnimation.close()},classes:cssClassesIntersection(fromAnimation.classes,toAnimation.classes),from:fromAnimation,to:toAnimation,anchors:[]};group.classes.length?preparedAnimations.push(group):(preparedAnimations.push(fromAnimation),preparedAnimations.push(toAnimation))}anchorGroups[lookupKey].anchors.push({out:from.element,in:to.element})}else{var index=from?from.animationID:to.animationID,indexKey=index.toString();usedIndicesLookup[indexKey]||(usedIndicesLookup[indexKey]=!0,preparedAnimations.push(animations[index]))}})),preparedAnimations}function cssClassesIntersection(a,b){a=a.split(" "),b=b.split(" ");for(var matches=[],i=0;i<a.length;i++){var aa=a[i];if("ng-"!==aa.substring(0,3))for(var j=0;j<b.length;j++)if(aa===b[j]){matches.push(aa);break}}return matches.join(" ")}function invokeFirstDriver(animationDetails){for(var i=drivers.length-1;i>=0;i--){var driverName=drivers[i],factory,driver=$injector.get(driverName)(animationDetails);if(driver)return driver}}function beforeStart(){element.addClass("ng-animate"),tempClasses&&$$jqLite.addClass(element,tempClasses),prepareClassName&&($$jqLite.removeClass(element,prepareClassName),prepareClassName=null)}function updateAnimationRunners(animation,newRunner){function update(element){var runner=getRunner(element);runner&&runner.setHost(newRunner)}animation.from&&animation.to?(update(animation.from.element),update(animation.to.element)):update(animation.element)}function handleDestroyedElement(){var runner=getRunner(element);!runner||"leave"===event&&options.$$domOperationFired||runner.end()}function close(rejected){element.off("$destroy",handleDestroyedElement),removeRunner(element),applyAnimationClasses(element,options),applyAnimationStyles(element,options),options.domOperation(),tempClasses&&$$jqLite.removeClass(element,tempClasses),element.removeClass("ng-animate"),runner.complete(!rejected)}}}]}],ngAnimateSwapDirective=["$animate","$rootScope",function($animate,$rootScope){return{restrict:"A",transclude:"element",terminal:!0,priority:600,link:function(scope,$element,attrs,ctrl,$transclude){var previousElement,previousScope;scope.$watchCollection(attrs.ngAnimateSwap||attrs.for,(function(value){previousElement&&$animate.leave(previousElement),previousScope&&(previousScope.$destroy(),previousScope=null),(value||0===value)&&(previousScope=scope.$new(),$transclude(previousScope,(function(element){previousElement=element,$animate.enter(element,null,$element)})))}))}}}],copy,extend,forEach,isArray,isDefined,isElement,isFunction,isObject,isString,isUndefined,jqLite,noop;angular.module("ngAnimate",[],(function initAngularHelpers(){noop=angular.noop,copy=angular.copy,extend=angular.extend,jqLite=angular.element,forEach=angular.forEach,isArray=angular.isArray,isString=angular.isString,isObject=angular.isObject,isUndefined=angular.isUndefined,isDefined=angular.isDefined,isFunction=angular.isFunction,isElement=angular.isElement})).info({angularVersion:"1.6.6"}).directive("ngAnimateSwap",ngAnimateSwapDirective).directive("ngAnimateChildren",$$AnimateChildrenDirective).factory("$$rAFScheduler",$$rAFSchedulerFactory).provider("$$animateQueue",$$AnimateQueueProvider).provider("$$animation",$$AnimationProvider).provider("$animateCss",$AnimateCssProvider).provider("$$animateCssDriver",$$AnimateCssDriverProvider).provider("$$animateJs",$$AnimateJsProvider).provider("$$animateJsDriver",$$AnimateJsDriverProvider)}(window,window.angular),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.tabindex","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.isClass","ui.bootstrap.datepicker","ui.bootstrap.position","ui.bootstrap.datepickerPopup","ui.bootstrap.debounce","ui.bootstrap.multiMap","ui.bootstrap.dropdown","ui.bootstrap.stackedMap","ui.bootstrap.modal","ui.bootstrap.paging","ui.bootstrap.pager","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["uib/template/accordion/accordion-group.html","uib/template/accordion/accordion.html","uib/template/alert/alert.html","uib/template/carousel/carousel.html","uib/template/carousel/slide.html","uib/template/datepicker/datepicker.html","uib/template/datepicker/day.html","uib/template/datepicker/month.html","uib/template/datepicker/year.html","uib/template/datepickerPopup/popup.html","uib/template/modal/window.html","uib/template/pager/pager.html","uib/template/pagination/pagination.html","uib/template/tooltip/tooltip-html-popup.html","uib/template/tooltip/tooltip-popup.html","uib/template/tooltip/tooltip-template-popup.html","uib/template/popover/popover-html.html","uib/template/popover/popover-template.html","uib/template/popover/popover.html","uib/template/progressbar/bar.html","uib/template/progressbar/progress.html","uib/template/progressbar/progressbar.html","uib/template/rating/rating.html","uib/template/tabs/tab.html","uib/template/tabs/tabset.html","uib/template/timepicker/timepicker.html","uib/template/typeahead/typeahead-match.html","uib/template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.collapse",[]).directive("uibCollapse",["$animate","$q","$parse","$injector",function($animate,$q,$parse,$injector){var $animateCss=$injector.has("$animateCss")?$injector.get("$animateCss"):null;return{link:function(scope,element,attrs){var expandingExpr=$parse(attrs.expanding),expandedExpr=$parse(attrs.expanded),collapsingExpr=$parse(attrs.collapsing),collapsedExpr=$parse(attrs.collapsed),horizontal=!1,css={},cssTo={};function init(){(horizontal=!!("horizontal"in attrs))?(css={width:""},cssTo={width:"0"}):(css={height:""},cssTo={height:"0"}),scope.$eval(attrs.uibCollapse)||element.addClass("in").addClass("collapse").attr("aria-expanded",!0).attr("aria-hidden",!1).css(css)}function getScrollFromElement(element){return horizontal?{width:element.scrollWidth+"px"}:{height:element.scrollHeight+"px"}}function expand(){element.hasClass("collapse")&&element.hasClass("in")||$q.resolve(expandingExpr(scope)).then((function(){element.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),$animateCss?$animateCss(element,{addClass:"in",easing:"ease",css:{overflow:"hidden"},to:getScrollFromElement(element[0])}).start().finally(expandDone):$animate.addClass(element,"in",{css:{overflow:"hidden"},to:getScrollFromElement(element[0])}).then(expandDone)}),angular.noop)}function expandDone(){element.removeClass("collapsing").addClass("collapse").css(css),expandedExpr(scope)}function collapse(){if(!element.hasClass("collapse")&&!element.hasClass("in"))return collapseDone();$q.resolve(collapsingExpr(scope)).then((function(){element.css(getScrollFromElement(element[0])).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),$animateCss?$animateCss(element,{removeClass:"in",to:cssTo}).start().finally(collapseDone):$animate.removeClass(element,"in",{to:cssTo}).then(collapseDone)}),angular.noop)}function collapseDone(){element.css(cssTo),element.removeClass("collapsing").addClass("collapse"),collapsedExpr(scope)}init(),scope.$watch(attrs.uibCollapse,(function(shouldCollapse){shouldCollapse?collapse():expand()}))}}}]),angular.module("ui.bootstrap.tabindex",[]).directive("uibTabindexToggle",(function(){return{restrict:"A",link:function(scope,elem,attrs){attrs.$observe("disabled",(function(disabled){attrs.$set("tabindex",disabled?-1:null)}))}}})),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse","ui.bootstrap.tabindex"]).constant("uibAccordionConfig",{closeOthers:!0}).controller("UibAccordionController",["$scope","$attrs","uibAccordionConfig",function($scope,$attrs,accordionConfig){this.groups=[],this.closeOthers=function(openGroup){var closeOthers;(angular.isDefined($attrs.closeOthers)?$scope.$eval($attrs.closeOthers):accordionConfig.closeOthers)&&angular.forEach(this.groups,(function(group){group!==openGroup&&(group.isOpen=!1)}))},this.addGroup=function(groupScope){var that=this;this.groups.push(groupScope),groupScope.$on("$destroy",(function(event){that.removeGroup(groupScope)}))},this.removeGroup=function(group){var index=this.groups.indexOf(group);-1!==index&&this.groups.splice(index,1)}}]).directive("uibAccordion",(function(){return{controller:"UibAccordionController",controllerAs:"accordion",transclude:!0,templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/accordion/accordion.html"}}})).directive("uibAccordionGroup",(function(){return{require:"^uibAccordion",transclude:!0,restrict:"A",templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/accordion/accordion-group.html"},scope:{heading:"@",panelClass:"@?",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(element){this.heading=element}},link:function(scope,element,attrs,accordionCtrl){element.addClass("panel"),accordionCtrl.addGroup(scope),scope.openClass=attrs.openClass||"panel-open",scope.panelClass=attrs.panelClass||"panel-default",scope.$watch("isOpen",(function(value){element.toggleClass(scope.openClass,!!value),value&&accordionCtrl.closeOthers(scope)})),scope.toggleOpen=function($event){scope.isDisabled||$event&&32!==$event.which||(scope.isOpen=!scope.isOpen)};var id="accordiongroup-"+scope.$id+"-"+Math.floor(1e4*Math.random());scope.headingId=id+"-tab",scope.panelId=id+"-panel"}}})).directive("uibAccordionHeading",(function(){return{transclude:!0,template:"",replace:!0,require:"^uibAccordionGroup",link:function(scope,element,attrs,accordionGroupCtrl,transclude){accordionGroupCtrl.setHeading(transclude(scope,angular.noop))}}})).directive("uibAccordionTransclude",(function(){return{require:"^uibAccordionGroup",link:function(scope,element,attrs,controller){scope.$watch((function(){return controller[attrs.uibAccordionTransclude]}),(function(heading){if(heading){var elem=angular.element(element[0].querySelector("uib-accordion-header,data-uib-accordion-header,x-uib-accordion-header,uib\\:accordion-header,[uib-accordion-header],[data-uib-accordion-header],[x-uib-accordion-header]"));elem.html(""),elem.append(heading)}}))}};function getHeaderSelectors(){return"uib-accordion-header,data-uib-accordion-header,x-uib-accordion-header,uib\\:accordion-header,[uib-accordion-header],[data-uib-accordion-header],[x-uib-accordion-header]"}})),angular.module("ui.bootstrap.alert",[]).controller("UibAlertController",["$scope","$element","$attrs","$interpolate","$timeout",function($scope,$element,$attrs,$interpolate,$timeout){$scope.closeable=!!$attrs.close,$element.addClass("alert"),$attrs.$set("role","alert"),$scope.closeable&&$element.addClass("alert-dismissible");var dismissOnTimeout=angular.isDefined($attrs.dismissOnTimeout)?$interpolate($attrs.dismissOnTimeout)($scope.$parent):null;dismissOnTimeout&&$timeout((function(){$scope.close()}),parseInt(dismissOnTimeout,10))}]).directive("uibAlert",(function(){return{controller:"UibAlertController",controllerAs:"alert",restrict:"A",templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/alert/alert.html"},transclude:!0,scope:{close:"&"}}})),angular.module("ui.bootstrap.buttons",[]).constant("uibButtonConfig",{activeClass:"active",toggleEvent:"click"}).controller("UibButtonsController",["uibButtonConfig",function(buttonConfig){this.activeClass=buttonConfig.activeClass||"active",this.toggleEvent=buttonConfig.toggleEvent||"click"}]).directive("uibBtnRadio",["$parse",function($parse){return{require:["uibBtnRadio","ngModel"],controller:"UibButtonsController",controllerAs:"buttons",link:function(scope,element,attrs,ctrls){var buttonsCtrl=ctrls[0],ngModelCtrl=ctrls[1],uncheckableExpr=$parse(attrs.uibUncheckable);element.find("input").css({display:"none"}),ngModelCtrl.$render=function(){element.toggleClass(buttonsCtrl.activeClass,angular.equals(ngModelCtrl.$modelValue,scope.$eval(attrs.uibBtnRadio)))},element.on(buttonsCtrl.toggleEvent,(function(){if(!attrs.disabled){var isActive=element.hasClass(buttonsCtrl.activeClass);isActive&&!angular.isDefined(attrs.uncheckable)||scope.$apply((function(){ngModelCtrl.$setViewValue(isActive?null:scope.$eval(attrs.uibBtnRadio)),ngModelCtrl.$render()}))}})),attrs.uibUncheckable&&scope.$watch(uncheckableExpr,(function(uncheckable){attrs.$set("uncheckable",uncheckable?"":void 0)}))}}}]).directive("uibBtnCheckbox",(function(){return{require:["uibBtnCheckbox","ngModel"],controller:"UibButtonsController",controllerAs:"button",link:function(scope,element,attrs,ctrls){var buttonsCtrl=ctrls[0],ngModelCtrl=ctrls[1];function getTrueValue(){return getCheckboxValue(attrs.btnCheckboxTrue,!0)}function getFalseValue(){return getCheckboxValue(attrs.btnCheckboxFalse,!1)}function getCheckboxValue(attribute,defaultValue){return angular.isDefined(attribute)?scope.$eval(attribute):defaultValue}element.find("input").css({display:"none"}),ngModelCtrl.$render=function(){element.toggleClass(buttonsCtrl.activeClass,angular.equals(ngModelCtrl.$modelValue,getTrueValue()))},element.on(buttonsCtrl.toggleEvent,(function(){attrs.disabled||scope.$apply((function(){ngModelCtrl.$setViewValue(element.hasClass(buttonsCtrl.activeClass)?getFalseValue():getTrueValue()),ngModelCtrl.$render()}))}))}}})),angular.module("ui.bootstrap.carousel",[]).controller("UibCarouselController",["$scope","$element","$interval","$timeout","$animate",function($scope,$element,$interval,$timeout,$animate){var self=this,slides=self.slides=$scope.slides=[],SLIDE_DIRECTION="uib-slideDirection",currentIndex=$scope.active,currentInterval,isPlaying,destroyed=!1;function getSlideByIndex(index){for(var i=0,l=slides.length;i<l;++i)if(slides[i].index===index)return slides[i]}function setActive(index){for(var i=0;i<slides.length;i++)slides[i].slide.active=i===index}function goNext(slide,index,direction){if(!destroyed){if(angular.extend(slide,{direction:direction}),angular.extend(slides[currentIndex].slide||{},{direction:direction}),$animate.enabled($element)&&!$scope.$currentTransition&&slides[index].element&&self.slides.length>1){slides[index].element.data(SLIDE_DIRECTION,slide.direction);var currentIdx=self.getCurrentIndex();angular.isNumber(currentIdx)&&slides[currentIdx].element&&slides[currentIdx].element.data(SLIDE_DIRECTION,slide.direction),$scope.$currentTransition=!0,$animate.on("addClass",slides[index].element,(function(element,phase){"close"===phase&&($scope.$currentTransition=null,$animate.off("addClass",element))}))}$scope.active=slide.index,currentIndex=slide.index,setActive(index),restartTimer()}}function findSlideIndex(slide){for(var i=0;i<slides.length;i++)if(slides[i].slide===slide)return i}function resetTimer(){currentInterval&&($interval.cancel(currentInterval),currentInterval=null)}function resetTransition(slides){slides.length||($scope.$currentTransition=null)}function restartTimer(){resetTimer();var interval=+$scope.interval;!isNaN(interval)&&interval>0&&(currentInterval=$interval(timerFn,interval))}function timerFn(){var interval=+$scope.interval;isPlaying&&!isNaN(interval)&&interval>0&&slides.length?$scope.next():$scope.pause()}$element.addClass("carousel"),self.addSlide=function(slide,element){slides.push({slide:slide,element:element}),slides.sort((function(a,b){return+a.slide.index-+b.slide.index})),(slide.index===$scope.active||1===slides.length&&!angular.isNumber($scope.active))&&($scope.$currentTransition&&($scope.$currentTransition=null),currentIndex=slide.index,$scope.active=slide.index,setActive(currentIndex),self.select(slides[findSlideIndex(slide)]),1===slides.length&&$scope.play())},self.getCurrentIndex=function(){for(var i=0;i<slides.length;i++)if(slides[i].slide.index===currentIndex)return i},self.next=$scope.next=function(){var newIndex=(self.getCurrentIndex()+1)%slides.length;if(0!==newIndex||!$scope.noWrap())return self.select(slides[newIndex],"next");$scope.pause()},self.prev=$scope.prev=function(){var newIndex=self.getCurrentIndex()-1<0?slides.length-1:self.getCurrentIndex()-1;if(!$scope.noWrap()||newIndex!==slides.length-1)return self.select(slides[newIndex],"prev");$scope.pause()},self.removeSlide=function(slide){var index=findSlideIndex(slide);slides.splice(index,1),slides.length>0&&currentIndex===index?index>=slides.length?(currentIndex=slides.length-1,$scope.active=currentIndex,setActive(currentIndex),self.select(slides[slides.length-1])):(currentIndex=index,$scope.active=currentIndex,setActive(currentIndex),self.select(slides[index])):currentIndex>index&&(currentIndex--,$scope.active=currentIndex),0===slides.length&&(currentIndex=null,$scope.active=null)},self.select=$scope.select=function(nextSlide,direction){var nextIndex=findSlideIndex(nextSlide.slide);void 0===direction&&(direction=nextIndex>self.getCurrentIndex()?"next":"prev"),nextSlide.slide.index===currentIndex||$scope.$currentTransition||goNext(nextSlide.slide,nextIndex,direction)},$scope.indexOfSlide=function(slide){return+slide.slide.index},$scope.isActive=function(slide){return $scope.active===slide.slide.index},$scope.isPrevDisabled=function(){return 0===$scope.active&&$scope.noWrap()},$scope.isNextDisabled=function(){return $scope.active===slides.length-1&&$scope.noWrap()},$scope.pause=function(){$scope.noPause||(isPlaying=!1,resetTimer())},$scope.play=function(){isPlaying||(isPlaying=!0,restartTimer())},$element.on("mouseenter",$scope.pause),$element.on("mouseleave",$scope.play),$scope.$on("$destroy",(function(){destroyed=!0,resetTimer()})),$scope.$watch("noTransition",(function(noTransition){$animate.enabled($element,!noTransition)})),$scope.$watch("interval",restartTimer),$scope.$watchCollection("slides",resetTransition),$scope.$watch("active",(function(index){if(angular.isNumber(index)&&currentIndex!==index){for(var i=0;i<slides.length;i++)if(slides[i].slide.index===index){index=i;break}var slide;slides[index]&&(setActive(index),self.select(slides[index]),currentIndex=index)}}))}]).directive("uibCarousel",(function(){return{transclude:!0,controller:"UibCarouselController",controllerAs:"carousel",restrict:"A",templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/carousel/carousel.html"},scope:{active:"=",interval:"=",noTransition:"=",noPause:"=",noWrap:"&"}}})).directive("uibSlide",["$animate",function($animate){return{require:"^uibCarousel",restrict:"A",transclude:!0,templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/carousel/slide.html"},scope:{actual:"=?",index:"=?"},link:function(scope,element,attrs,carouselCtrl){element.addClass("item"),carouselCtrl.addSlide(scope,element),scope.$on("$destroy",(function(){carouselCtrl.removeSlide(scope)})),scope.$watch("active",(function(active){$animate[active?"addClass":"removeClass"](element,"active")}))}}}]).animation(".item",["$animateCss",function($animateCss){var SLIDE_DIRECTION="uib-slideDirection";function removeClass(element,className,callback){element.removeClass(className),callback&&callback()}return{beforeAddClass:function(element,className,done){if("active"===className){var stopped=!1,direction=element.data(SLIDE_DIRECTION),directionClass="next"===direction?"left":"right",removeClassFn=removeClass.bind(this,element,directionClass+" "+direction,done);return element.addClass(direction),$animateCss(element,{addClass:directionClass}).start().done(removeClassFn),function(){stopped=!0}}done()},beforeRemoveClass:function(element,className,done){if("active"===className){var stopped=!1,direction,directionClass="next"===element.data(SLIDE_DIRECTION)?"left":"right",removeClassFn=removeClass.bind(this,element,directionClass,done);return $animateCss(element,{addClass:directionClass}).start().done(removeClassFn),function(){stopped=!0}}done()}}}]),angular.module("ui.bootstrap.dateparser",[]).service("uibDateParser",["$log","$locale","dateFilter","orderByFilter","filterFilter",function($log,$locale,dateFilter,orderByFilter,filterFilter){var SPECIAL_CHARACTERS_REGEXP=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,localeId,formatCodeToRegex;function getFormatCodeToRegex(key){return filterFilter(formatCodeToRegex,{key:key},!0)[0]}function createParser(format){var map=[],regex=format.split(""),quoteIndex=format.indexOf("'");if(quoteIndex>-1){var inLiteral=!1;format=format.split("");for(var i=quoteIndex;i<format.length;i++)inLiteral?("'"===format[i]&&(i+1<format.length&&"'"===format[i+1]?(format[i+1]="$",regex[i+1]=""):(regex[i]="",inLiteral=!1)),format[i]="$"):"'"===format[i]&&(format[i]="$",regex[i]="",inLiteral=!0);format=format.join("")}return angular.forEach(formatCodeToRegex,(function(data){var index=format.indexOf(data.key);if(index>-1){format=format.split(""),regex[index]="("+data.regex+")",format[index]="$";for(var i=index+1,n=index+data.key.length;i<n;i++)regex[i]="",format[i]="$";format=format.join(""),map.push({index:index,key:data.key,apply:data.apply,matcher:data.regex})}})),{regex:new RegExp("^"+regex.join("")+"$"),map:orderByFilter(map,"index")}}function createFormatter(format){for(var formatters=[],i=0,formatter,literalIdx;i<format.length;)if(angular.isNumber(literalIdx)){if("'"===format.charAt(i))(i+1>=format.length||"'"!==format.charAt(i+1))&&(formatters.push(constructLiteralFormatter(format,literalIdx,i)),literalIdx=null);else if(i===format.length)for(;literalIdx<format.length;)formatter=constructFormatterFromIdx(format,literalIdx),formatters.push(formatter),literalIdx=formatter.endIdx;i++}else"'"!==format.charAt(i)?(formatter=constructFormatterFromIdx(format,i),formatters.push(formatter.parser),i=formatter.endIdx):(literalIdx=i,i++);return formatters}function constructLiteralFormatter(format,literalIdx,endIdx){return function(){return format.substr(literalIdx+1,endIdx-literalIdx-1)}}function constructFormatterFromIdx(format,i){for(var currentPosStr=format.substr(i),j=0;j<formatCodeToRegex.length;j++)if(new RegExp("^"+formatCodeToRegex[j].key).test(currentPosStr)){var data=formatCodeToRegex[j];return{endIdx:i+data.key.length,parser:data.formatter}}return{endIdx:i+1,parser:function(){return currentPosStr.charAt(0)}}}function isValid(year,month,date){return!(date<1)&&(1===month&&date>28?29===date&&(year%4==0&&year%100!=0||year%400==0):3!==month&&5!==month&&8!==month&&10!==month||date<31)}function toInt(str){return parseInt(str,10)}function toTimezone(date,timezone){return date&&timezone?convertTimezoneToLocal(date,timezone):date}function fromTimezone(date,timezone){return date&&timezone?convertTimezoneToLocal(date,timezone,!0):date}function timezoneToOffset(timezone,fallback){timezone=timezone.replace(/:/g,"");var requestedTimezoneOffset=Date.parse("Jan 01, 1970 00:00:00 "+timezone)/6e4;return isNaN(requestedTimezoneOffset)?fallback:requestedTimezoneOffset}function addDateMinutes(date,minutes){return(date=new Date(date.getTime())).setMinutes(date.getMinutes()+minutes),date}function convertTimezoneToLocal(date,timezone,reverse){reverse=reverse?-1:1;var dateTimezoneOffset=date.getTimezoneOffset(),timezoneOffset;return addDateMinutes(date,reverse*(timezoneToOffset(timezone,dateTimezoneOffset)-dateTimezoneOffset))}this.init=function(){localeId=$locale.id,this.parsers={},this.formatters={},formatCodeToRegex=[{key:"yyyy",regex:"\\d{4}",apply:function(value){this.year=+value},formatter:function(date){var _date=new Date;return _date.setFullYear(Math.abs(date.getFullYear())),dateFilter(_date,"yyyy")}},{key:"yy",regex:"\\d{2}",apply:function(value){value=+value,this.year=value<69?value+2e3:value+1900},formatter:function(date){var _date=new Date;return _date.setFullYear(Math.abs(date.getFullYear())),dateFilter(_date,"yy")}},{key:"y",regex:"\\d{1,4}",apply:function(value){this.year=+value},formatter:function(date){var _date=new Date;return _date.setFullYear(Math.abs(date.getFullYear())),dateFilter(_date,"y")}},{key:"M!",regex:"0?[1-9]|1[0-2]",apply:function(value){this.month=value-1},formatter:function(date){var value=date.getMonth();return/^[0-9]$/.test(value)?dateFilter(date,"MM"):dateFilter(date,"M")}},{key:"MMMM",regex:$locale.DATETIME_FORMATS.MONTH.join("|"),apply:function(value){this.month=$locale.DATETIME_FORMATS.MONTH.indexOf(value)},formatter:function(date){return dateFilter(date,"MMMM")}},{key:"MMM",regex:$locale.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(value){this.month=$locale.DATETIME_FORMATS.SHORTMONTH.indexOf(value)},formatter:function(date){return dateFilter(date,"MMM")}},{key:"MM",regex:"0[1-9]|1[0-2]",apply:function(value){this.month=value-1},formatter:function(date){return dateFilter(date,"MM")}},{key:"M",regex:"[1-9]|1[0-2]",apply:function(value){this.month=value-1},formatter:function(date){return dateFilter(date,"M")}},{key:"d!",regex:"[0-2]?[0-9]{1}|3[0-1]{1}",apply:function(value){this.date=+value},formatter:function(date){var value=date.getDate();return/^[1-9]$/.test(value)?dateFilter(date,"dd"):dateFilter(date,"d")}},{key:"dd",regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(value){this.date=+value},formatter:function(date){return dateFilter(date,"dd")}},{key:"d",regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(value){this.date=+value},formatter:function(date){return dateFilter(date,"d")}},{key:"EEEE",regex:$locale.DATETIME_FORMATS.DAY.join("|"),formatter:function(date){return dateFilter(date,"EEEE")}},{key:"EEE",regex:$locale.DATETIME_FORMATS.SHORTDAY.join("|"),formatter:function(date){return dateFilter(date,"EEE")}},{key:"HH",regex:"(?:0|1)[0-9]|2[0-3]",apply:function(value){this.hours=+value},formatter:function(date){return dateFilter(date,"HH")}},{key:"hh",regex:"0[0-9]|1[0-2]",apply:function(value){this.hours=+value},formatter:function(date){return dateFilter(date,"hh")}},{key:"H",regex:"1?[0-9]|2[0-3]",apply:function(value){this.hours=+value},formatter:function(date){return dateFilter(date,"H")}},{key:"h",regex:"[0-9]|1[0-2]",apply:function(value){this.hours=+value},formatter:function(date){return dateFilter(date,"h")}},{key:"mm",regex:"[0-5][0-9]",apply:function(value){this.minutes=+value},formatter:function(date){return dateFilter(date,"mm")}},{key:"m",regex:"[0-9]|[1-5][0-9]",apply:function(value){this.minutes=+value},formatter:function(date){return dateFilter(date,"m")}},{key:"sss",regex:"[0-9][0-9][0-9]",apply:function(value){this.milliseconds=+value},formatter:function(date){return dateFilter(date,"sss")}},{key:"ss",regex:"[0-5][0-9]",apply:function(value){this.seconds=+value},formatter:function(date){return dateFilter(date,"ss")}},{key:"s",regex:"[0-9]|[1-5][0-9]",apply:function(value){this.seconds=+value},formatter:function(date){return dateFilter(date,"s")}},{key:"a",regex:$locale.DATETIME_FORMATS.AMPMS.join("|"),apply:function(value){12===this.hours&&(this.hours=0),"PM"===value&&(this.hours+=12)},formatter:function(date){return dateFilter(date,"a")}},{key:"Z",regex:"[+-]\\d{4}",apply:function(value){var matches=value.match(/([+-])(\d{2})(\d{2})/),sign=matches[1],hours=matches[2],minutes=matches[3];this.hours+=toInt(sign+hours),this.minutes+=toInt(sign+minutes)},formatter:function(date){return dateFilter(date,"Z")}},{key:"ww",regex:"[0-4][0-9]|5[0-3]",formatter:function(date){return dateFilter(date,"ww")}},{key:"w",regex:"[0-9]|[1-4][0-9]|5[0-3]",formatter:function(date){return dateFilter(date,"w")}},{key:"GGGG",regex:$locale.DATETIME_FORMATS.ERANAMES.join("|").replace(/\s/g,"\\s"),formatter:function(date){return dateFilter(date,"GGGG")}},{key:"GGG",regex:$locale.DATETIME_FORMATS.ERAS.join("|"),formatter:function(date){return dateFilter(date,"GGG")}},{key:"GG",regex:$locale.DATETIME_FORMATS.ERAS.join("|"),formatter:function(date){return dateFilter(date,"GG")}},{key:"G",regex:$locale.DATETIME_FORMATS.ERAS.join("|"),formatter:function(date){return dateFilter(date,"G")}}],angular.version.major>=1&&angular.version.minor>4&&formatCodeToRegex.push({key:"LLLL",regex:$locale.DATETIME_FORMATS.STANDALONEMONTH.join("|"),apply:function(value){this.month=$locale.DATETIME_FORMATS.STANDALONEMONTH.indexOf(value)},formatter:function(date){return dateFilter(date,"LLLL")}})},this.init(),this.getParser=function(key){var f=getFormatCodeToRegex(key);return f&&f.apply||null},this.overrideParser=function(key,parser){var f=getFormatCodeToRegex(key);f&&angular.isFunction(parser)&&(this.parsers={},f.apply=parser)}.bind(this),this.filter=function(date,format){return angular.isDate(date)&&!isNaN(date)&&format?(format=$locale.DATETIME_FORMATS[format]||format,$locale.id!==localeId&&this.init(),this.formatters[format]||(this.formatters[format]=createFormatter(format)),this.formatters[format].reduce((function(str,formatter){return str+formatter(date)}),"")):"";var formatters},this.parse=function(input,format,baseDate){if(!angular.isString(input)||!format)return input;format=(format=$locale.DATETIME_FORMATS[format]||format).replace(SPECIAL_CHARACTERS_REGEXP,"\\$&"),$locale.id!==localeId&&this.init(),this.parsers[format]||(this.parsers[format]=createParser(format,"apply"));var parser=this.parsers[format],regex=parser.regex,map=parser.map,results=input.match(regex),tzOffset=!1;if(results&&results.length){var fields,dt;angular.isDate(baseDate)&&!isNaN(baseDate.getTime())?fields={year:baseDate.getFullYear(),month:baseDate.getMonth(),date:baseDate.getDate(),hours:baseDate.getHours(),minutes:baseDate.getMinutes(),seconds:baseDate.getSeconds(),milliseconds:baseDate.getMilliseconds()}:(baseDate&&$log.warn("dateparser:","baseDate is not a valid date"),fields={year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0});for(var i=1,n=results.length;i<n;i++){var mapper=map[i-1];"Z"===mapper.matcher&&(tzOffset=!0),mapper.apply&&mapper.apply.call(fields,results[i])}var datesetter=tzOffset?Date.prototype.setUTCFullYear:Date.prototype.setFullYear,timesetter=tzOffset?Date.prototype.setUTCHours:Date.prototype.setHours;return isValid(fields.year,fields.month,fields.date)&&(!angular.isDate(baseDate)||isNaN(baseDate.getTime())||tzOffset?(dt=new Date(0),datesetter.call(dt,fields.year,fields.month,fields.date),timesetter.call(dt,fields.hours||0,fields.minutes||0,fields.seconds||0,fields.milliseconds||0)):(dt=new Date(baseDate),datesetter.call(dt,fields.year,fields.month,fields.date),timesetter.call(dt,fields.hours,fields.minutes,fields.seconds,fields.milliseconds))),dt}},this.toTimezone=toTimezone,this.fromTimezone=fromTimezone,this.timezoneToOffset=timezoneToOffset,this.addDateMinutes=addDateMinutes,this.convertTimezoneToLocal=convertTimezoneToLocal}]),angular.module("ui.bootstrap.isClass",[]).directive("uibIsClass",["$animate",function($animate){var ON_REGEXP=/^\s*([\s\S]+?)\s+on\s+([\s\S]+?)\s*$/,IS_REGEXP=/^\s*([\s\S]+?)\s+for\s+([\s\S]+?)\s*$/;return{restrict:"A",compile:function(tElement,tAttrs){var linkedScopes=[],instances=[],expToData={},lastActivated=null,onExpMatches=tAttrs.uibIsClass.match(ON_REGEXP),onExp=onExpMatches[2],expsStr,exps=onExpMatches[1].split(",");return linkFn;function linkFn(scope,element,attrs){linkedScopes.push(scope),instances.push({scope:scope,element:element}),exps.forEach((function(exp,k){addForExp(exp,scope)})),scope.$on("$destroy",removeScope)}function addForExp(exp,scope){var matches=exp.match(IS_REGEXP),clazz=scope.$eval(matches[1]),compareWithExp=matches[2],data=expToData[exp];if(!data){var watchFn=function(compareWithVal){var newActivated=null;instances.some((function(instance){var thisVal;if(instance.scope.$eval(onExp)===compareWithVal)return newActivated=instance,!0})),data.lastActivated!==newActivated&&(data.lastActivated&&$animate.removeClass(data.lastActivated.element,clazz),newActivated&&$animate.addClass(newActivated.element,clazz),data.lastActivated=newActivated)};expToData[exp]=data={lastActivated:null,scope:scope,watchFn:watchFn,compareWithExp:compareWithExp,watcher:scope.$watch(compareWithExp,watchFn)}}data.watchFn(scope.$eval(compareWithExp))}function removeScope(e){var removedScope=e.targetScope,index=linkedScopes.indexOf(removedScope);if(linkedScopes.splice(index,1),instances.splice(index,1),linkedScopes.length){var newWatchScope=linkedScopes[0];angular.forEach(expToData,(function(data){data.scope===removedScope&&(data.watcher=newWatchScope.$watch(data.compareWithExp,data.watchFn),data.scope=newWatchScope)}))}else expToData={}}}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.isClass"]).value("$datepickerSuppressError",!1).value("$datepickerLiteralWarning",!0).constant("uibDatepickerConfig",{datepickerMode:"day",formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",maxDate:null,maxMode:"year",minDate:null,minMode:"day",monthColumns:3,ngModelOptions:{},shortcutPropagation:!1,showWeeks:!0,yearColumns:5,yearRows:4}).controller("UibDatepickerController",["$scope","$element","$attrs","$parse","$interpolate","$locale","$log","dateFilter","uibDatepickerConfig","$datepickerLiteralWarning","$datepickerSuppressError","uibDateParser",function($scope,$element,$attrs,$parse,$interpolate,$locale,$log,dateFilter,datepickerConfig,$datepickerLiteralWarning,$datepickerSuppressError,dateParser){var self=this,ngModelCtrl={$setViewValue:angular.noop},ngModelOptions={},watchListeners=[];$element.addClass("uib-datepicker"),$attrs.$set("role","application"),$scope.datepickerOptions||($scope.datepickerOptions={}),this.modes=["day","month","year"],["customClass","dateDisabled","datepickerMode","formatDay","formatDayHeader","formatDayTitle","formatMonth","formatMonthTitle","formatYear","maxDate","maxMode","minDate","minMode","monthColumns","showWeeks","shortcutPropagation","startingDay","yearColumns","yearRows"].forEach((function(key){switch(key){case"customClass":case"dateDisabled":$scope[key]=$scope.datepickerOptions[key]||angular.noop;break;case"datepickerMode":$scope.datepickerMode=angular.isDefined($scope.datepickerOptions.datepickerMode)?$scope.datepickerOptions.datepickerMode:datepickerConfig.datepickerMode;break;case"formatDay":case"formatDayHeader":case"formatDayTitle":case"formatMonth":case"formatMonthTitle":case"formatYear":self[key]=angular.isDefined($scope.datepickerOptions[key])?$interpolate($scope.datepickerOptions[key])($scope.$parent):datepickerConfig[key];break;case"monthColumns":case"showWeeks":case"shortcutPropagation":case"yearColumns":case"yearRows":self[key]=angular.isDefined($scope.datepickerOptions[key])?$scope.datepickerOptions[key]:datepickerConfig[key];break;case"startingDay":angular.isDefined($scope.datepickerOptions.startingDay)?self.startingDay=$scope.datepickerOptions.startingDay:angular.isNumber(datepickerConfig.startingDay)?self.startingDay=datepickerConfig.startingDay:self.startingDay=($locale.DATETIME_FORMATS.FIRSTDAYOFWEEK+8)%7;break;case"maxDate":case"minDate":$scope.$watch("datepickerOptions."+key,(function(value){value?angular.isDate(value)?self[key]=dateParser.fromTimezone(new Date(value),ngModelOptions.getOption("timezone")):($datepickerLiteralWarning&&$log.warn("Literal date support has been deprecated, please switch to date object usage"),self[key]=new Date(dateFilter(value,"medium"))):self[key]=datepickerConfig[key]?dateParser.fromTimezone(new Date(datepickerConfig[key]),ngModelOptions.getOption("timezone")):null,self.refreshView()}));break;case"maxMode":case"minMode":$scope.datepickerOptions[key]?$scope.$watch((function(){return $scope.datepickerOptions[key]}),(function(value){self[key]=$scope[key]=angular.isDefined(value)?value:$scope.datepickerOptions[key],("minMode"===key&&self.modes.indexOf($scope.datepickerOptions.datepickerMode)<self.modes.indexOf(self[key])||"maxMode"===key&&self.modes.indexOf($scope.datepickerOptions.datepickerMode)>self.modes.indexOf(self[key]))&&($scope.datepickerMode=self[key],$scope.datepickerOptions.datepickerMode=self[key])})):self[key]=$scope[key]=datepickerConfig[key]||null}})),$scope.uniqueId="datepicker-"+$scope.$id+"-"+Math.floor(1e4*Math.random()),$scope.disabled=angular.isDefined($attrs.disabled)||!1,angular.isDefined($attrs.ngDisabled)&&watchListeners.push($scope.$parent.$watch($attrs.ngDisabled,(function(disabled){$scope.disabled=disabled,self.refreshView()}))),$scope.isActive=function(dateObject){return 0===self.compare(dateObject.date,self.activeDate)&&($scope.activeDateId=dateObject.uid,!0)},this.init=function(ngModelCtrl_){ngModelOptions=extractOptions(ngModelCtrl=ngModelCtrl_),$scope.datepickerOptions.initDate?(self.activeDate=dateParser.fromTimezone($scope.datepickerOptions.initDate,ngModelOptions.getOption("timezone"))||new Date,$scope.$watch("datepickerOptions.initDate",(function(initDate){initDate&&(ngModelCtrl.$isEmpty(ngModelCtrl.$modelValue)||ngModelCtrl.$invalid)&&(self.activeDate=dateParser.fromTimezone(initDate,ngModelOptions.getOption("timezone")),self.refreshView())}))):self.activeDate=new Date;var date=ngModelCtrl.$modelValue?new Date(ngModelCtrl.$modelValue):new Date;this.activeDate=isNaN(date)?dateParser.fromTimezone(new Date,ngModelOptions.getOption("timezone")):dateParser.fromTimezone(date,ngModelOptions.getOption("timezone")),ngModelCtrl.$render=function(){self.render()}},this.render=function(){if(ngModelCtrl.$viewValue){var date=new Date(ngModelCtrl.$viewValue),isValid;!isNaN(date)?this.activeDate=dateParser.fromTimezone(date,ngModelOptions.getOption("timezone")):$datepickerSuppressError||$log.error('Datepicker directive: "ng-model" value must be a Date object')}this.refreshView()},this.refreshView=function(){if(this.element){$scope.selectedDt=null,this._refreshView(),$scope.activeDt&&($scope.activeDateId=$scope.activeDt.uid);var date=ngModelCtrl.$viewValue?new Date(ngModelCtrl.$viewValue):null;date=dateParser.fromTimezone(date,ngModelOptions.getOption("timezone")),ngModelCtrl.$setValidity("dateDisabled",!date||this.element&&!this.isDisabled(date))}},this.createDateObject=function(date,format){var model=ngModelCtrl.$viewValue?new Date(ngModelCtrl.$viewValue):null;model=dateParser.fromTimezone(model,ngModelOptions.getOption("timezone"));var today=new Date;today=dateParser.fromTimezone(today,ngModelOptions.getOption("timezone"));var time=this.compare(date,today),dt={date:date,label:dateParser.filter(date,format),selected:model&&0===this.compare(date,model),disabled:this.isDisabled(date),past:time<0,current:0===time,future:time>0,customClass:this.customClass(date)||null};return model&&0===this.compare(date,model)&&($scope.selectedDt=dt),self.activeDate&&0===this.compare(dt.date,self.activeDate)&&($scope.activeDt=dt),dt},this.isDisabled=function(date){return $scope.disabled||this.minDate&&this.compare(date,this.minDate)<0||this.maxDate&&this.compare(date,this.maxDate)>0||$scope.dateDisabled&&$scope.dateDisabled({date:date,mode:$scope.datepickerMode})},this.customClass=function(date){return $scope.customClass({date:date,mode:$scope.datepickerMode})},this.split=function(arr,size){for(var arrays=[];arr.length>0;)arrays.push(arr.splice(0,size));return arrays},$scope.select=function(date){if($scope.datepickerMode===self.minMode){var dt=ngModelCtrl.$viewValue?dateParser.fromTimezone(new Date(ngModelCtrl.$viewValue),ngModelOptions.getOption("timezone")):new Date(0,0,0,0,0,0,0);dt.setFullYear(date.getFullYear(),date.getMonth(),date.getDate()),dt=dateParser.toTimezone(dt,ngModelOptions.getOption("timezone")),ngModelCtrl.$setViewValue(dt),ngModelCtrl.$render()}else self.activeDate=date,setMode(self.modes[self.modes.indexOf($scope.datepickerMode)-1]),$scope.$emit("uib:datepicker.mode");$scope.$broadcast("uib:datepicker.focus")},$scope.move=function(direction){var year=self.activeDate.getFullYear()+direction*(self.step.years||0),month=self.activeDate.getMonth()+direction*(self.step.months||0);self.activeDate.setFullYear(year,month,1),self.refreshView()},$scope.toggleMode=function(direction){direction=direction||1,$scope.datepickerMode===self.maxMode&&1===direction||$scope.datepickerMode===self.minMode&&-1===direction||(setMode(self.modes[self.modes.indexOf($scope.datepickerMode)+direction]),$scope.$emit("uib:datepicker.mode"))},$scope.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var focusElement=function(){self.element[0].focus()};function setMode(mode){$scope.datepickerMode=mode,$scope.datepickerOptions.datepickerMode=mode}function extractOptions(ngModelCtrl){var ngModelOptions;if(angular.version.minor<6)(ngModelOptions=ngModelCtrl.$options||$scope.datepickerOptions.ngModelOptions||datepickerConfig.ngModelOptions||{}).getOption=function(key){return ngModelOptions[key]};else{var timezone=ngModelCtrl.$options.getOption("timezone")||($scope.datepickerOptions.ngModelOptions?$scope.datepickerOptions.ngModelOptions.timezone:null)||(datepickerConfig.ngModelOptions?datepickerConfig.ngModelOptions.timezone:null);ngModelOptions=ngModelCtrl.$options.createChild(datepickerConfig.ngModelOptions).createChild($scope.datepickerOptions.ngModelOptions).createChild(ngModelCtrl.$options).createChild({timezone:timezone})}return ngModelOptions}$scope.$on("uib:datepicker.focus",focusElement),$scope.keydown=function(evt){var key=$scope.keys[evt.which];if(key&&!evt.shiftKey&&!evt.altKey&&!$scope.disabled)if(evt.preventDefault(),self.shortcutPropagation||evt.stopPropagation(),"enter"===key||"space"===key){if(self.isDisabled(self.activeDate))return;$scope.select(self.activeDate)}else!evt.ctrlKey||"up"!==key&&"down"!==key?(self.handleKeyDown(key,evt),self.refreshView()):$scope.toggleMode("up"===key?1:-1)},$element.on("keydown",(function(evt){$scope.$apply((function(){$scope.keydown(evt)}))})),$scope.$on("$destroy",(function(){for(;watchListeners.length;)watchListeners.shift()()}))}]).controller("UibDaypickerController",["$scope","$element","dateFilter",function(scope,$element,dateFilter){var DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31];function getDaysInMonth(year,month){return 1!==month||year%4!=0||year%100==0&&year%400!=0?DAYS_IN_MONTH[month]:29}function getISO8601WeekNumber(date){var checkDate=new Date(date);checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));var time=checkDate.getTime();return checkDate.setMonth(0),checkDate.setDate(1),Math.floor(Math.round((time-checkDate)/864e5)/7)+1}this.step={months:1},this.element=$element,this.init=function(ctrl){angular.extend(ctrl,this),scope.showWeeks=ctrl.showWeeks,ctrl.refreshView()},this.getDates=function(startDate,n){for(var dates=new Array(n),current=new Date(startDate),i=0,date;i<n;)date=new Date(current),dates[i++]=date,current.setDate(current.getDate()+1);return dates},this._refreshView=function(){var year=this.activeDate.getFullYear(),month=this.activeDate.getMonth(),firstDayOfMonth=new Date(this.activeDate);firstDayOfMonth.setFullYear(year,month,1);var difference=this.startingDay-firstDayOfMonth.getDay(),numDisplayedFromPreviousMonth=difference>0?7-difference:-difference,firstDate=new Date(firstDayOfMonth);numDisplayedFromPreviousMonth>0&&firstDate.setDate(1-numDisplayedFromPreviousMonth);for(var days=this.getDates(firstDate,42),i=0;i<42;i++)days[i]=angular.extend(this.createDateObject(days[i],this.formatDay),{secondary:days[i].getMonth()!==month,uid:scope.uniqueId+"-"+i});scope.labels=new Array(7);for(var j=0;j<7;j++)scope.labels[j]={abbr:dateFilter(days[j].date,this.formatDayHeader),full:dateFilter(days[j].date,"EEEE")};if(scope.title=dateFilter(this.activeDate,this.formatDayTitle),scope.rows=this.split(days,7),scope.showWeeks){scope.weekNumbers=[];for(var thursdayIndex=(11-this.startingDay)%7,numWeeks=scope.rows.length,curWeek=0;curWeek<numWeeks;curWeek++)scope.weekNumbers.push(getISO8601WeekNumber(scope.rows[curWeek][thursdayIndex].date))}},this.compare=function(date1,date2){var _date1=new Date(date1.getFullYear(),date1.getMonth(),date1.getDate()),_date2=new Date(date2.getFullYear(),date2.getMonth(),date2.getDate());return _date1.setFullYear(date1.getFullYear()),_date2.setFullYear(date2.getFullYear()),_date1-_date2},this.handleKeyDown=function(key,evt){var date=this.activeDate.getDate();if("left"===key)date-=1;else if("up"===key)date-=7;else if("right"===key)date+=1;else if("down"===key)date+=7;else if("pageup"===key||"pagedown"===key){var month=this.activeDate.getMonth()+("pageup"===key?-1:1);this.activeDate.setMonth(month,1),date=Math.min(getDaysInMonth(this.activeDate.getFullYear(),this.activeDate.getMonth()),date)}else"home"===key?date=1:"end"===key&&(date=getDaysInMonth(this.activeDate.getFullYear(),this.activeDate.getMonth()));this.activeDate.setDate(date)}}]).controller("UibMonthpickerController",["$scope","$element","dateFilter",function(scope,$element,dateFilter){this.step={years:1},this.element=$element,this.init=function(ctrl){angular.extend(ctrl,this),ctrl.refreshView()},this._refreshView=function(){for(var months=new Array(12),year=this.activeDate.getFullYear(),date,i=0;i<12;i++)(date=new Date(this.activeDate)).setFullYear(year,i,1),months[i]=angular.extend(this.createDateObject(date,this.formatMonth),{uid:scope.uniqueId+"-"+i});scope.title=dateFilter(this.activeDate,this.formatMonthTitle),scope.rows=this.split(months,this.monthColumns),scope.yearHeaderColspan=this.monthColumns>3?this.monthColumns-2:1},this.compare=function(date1,date2){var _date1=new Date(date1.getFullYear(),date1.getMonth()),_date2=new Date(date2.getFullYear(),date2.getMonth());return _date1.setFullYear(date1.getFullYear()),_date2.setFullYear(date2.getFullYear()),_date1-_date2},this.handleKeyDown=function(key,evt){var date=this.activeDate.getMonth();if("left"===key)date-=1;else if("up"===key)date-=this.monthColumns;else if("right"===key)date+=1;else if("down"===key)date+=this.monthColumns;else if("pageup"===key||"pagedown"===key){var year=this.activeDate.getFullYear()+("pageup"===key?-1:1);this.activeDate.setFullYear(year)}else"home"===key?date=0:"end"===key&&(date=11);this.activeDate.setMonth(date)}}]).controller("UibYearpickerController",["$scope","$element","dateFilter",function(scope,$element,dateFilter){var columns,range;function getStartingYear(year){return parseInt((year-1)/range,10)*range+1}this.element=$element,this.yearpickerInit=function(){columns=this.yearColumns,range=this.yearRows*columns,this.step={years:range}},this._refreshView=function(){for(var years=new Array(range),date,i=0,start=getStartingYear(this.activeDate.getFullYear());i<range;i++)(date=new Date(this.activeDate)).setFullYear(start+i,0,1),years[i]=angular.extend(this.createDateObject(date,this.formatYear),{uid:scope.uniqueId+"-"+i});scope.title=[years[0].label,years[range-1].label].join(" - "),scope.rows=this.split(years,columns),scope.columns=columns},this.compare=function(date1,date2){return date1.getFullYear()-date2.getFullYear()},this.handleKeyDown=function(key,evt){var date=this.activeDate.getFullYear();"left"===key?date-=1:"up"===key?date-=columns:"right"===key?date+=1:"down"===key?date+=columns:"pageup"===key||"pagedown"===key?date+=("pageup"===key?-1:1)*range:"home"===key?date=getStartingYear(this.activeDate.getFullYear()):"end"===key&&(date=getStartingYear(this.activeDate.getFullYear())+range-1),this.activeDate.setFullYear(date)}}]).directive("uibDatepicker",(function(){return{templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/datepicker/datepicker.html"},scope:{datepickerOptions:"=?"},require:["uibDatepicker","^ngModel"],restrict:"A",controller:"UibDatepickerController",controllerAs:"datepicker",link:function(scope,element,attrs,ctrls){var datepickerCtrl=ctrls[0],ngModelCtrl=ctrls[1];datepickerCtrl.init(ngModelCtrl)}}})).directive("uibDaypicker",(function(){return{templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/datepicker/day.html"},require:["^uibDatepicker","uibDaypicker"],restrict:"A",controller:"UibDaypickerController",link:function(scope,element,attrs,ctrls){var datepickerCtrl=ctrls[0],daypickerCtrl;ctrls[1].init(datepickerCtrl)}}})).directive("uibMonthpicker",(function(){return{templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/datepicker/month.html"},require:["^uibDatepicker","uibMonthpicker"],restrict:"A",controller:"UibMonthpickerController",link:function(scope,element,attrs,ctrls){var datepickerCtrl=ctrls[0],monthpickerCtrl;ctrls[1].init(datepickerCtrl)}}})).directive("uibYearpicker",(function(){return{templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/datepicker/year.html"},require:["^uibDatepicker","uibYearpicker"],restrict:"A",controller:"UibYearpickerController",link:function(scope,element,attrs,ctrls){var ctrl=ctrls[0];angular.extend(ctrl,ctrls[1]),ctrl.yearpickerInit(),ctrl.refreshView()}}})),angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function($document,$window){var SCROLLBAR_WIDTH,BODY_SCROLLBAR_WIDTH,OVERFLOW_REGEX={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/},PLACEMENT_REGEX={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/},BODY_REGEX=/(HTML|BODY)/;return{getRawNode:function(elem){return elem.nodeName?elem:elem[0]||elem},parseStyle:function(value){return value=parseFloat(value),isFinite(value)?value:0},offsetParent:function(elem){var offsetParent=(elem=this.getRawNode(elem)).offsetParent||$document[0].documentElement;function isStaticPositioned(el){return"static"===($window.getComputedStyle(el).position||"static")}for(;offsetParent&&offsetParent!==$document[0].documentElement&&isStaticPositioned(offsetParent);)offsetParent=offsetParent.offsetParent;return offsetParent||$document[0].documentElement},scrollbarWidth:function(isBody){if(isBody){if(angular.isUndefined(BODY_SCROLLBAR_WIDTH)){var bodyElem=$document.find("body");bodyElem.addClass("uib-position-body-scrollbar-measure"),BODY_SCROLLBAR_WIDTH=$window.innerWidth-bodyElem[0].clientWidth,BODY_SCROLLBAR_WIDTH=isFinite(BODY_SCROLLBAR_WIDTH)?BODY_SCROLLBAR_WIDTH:0,bodyElem.removeClass("uib-position-body-scrollbar-measure")}return BODY_SCROLLBAR_WIDTH}if(angular.isUndefined(SCROLLBAR_WIDTH)){var scrollElem=angular.element('<div class="uib-position-scrollbar-measure"></div>');$document.find("body").append(scrollElem),SCROLLBAR_WIDTH=scrollElem[0].offsetWidth-scrollElem[0].clientWidth,SCROLLBAR_WIDTH=isFinite(SCROLLBAR_WIDTH)?SCROLLBAR_WIDTH:0,scrollElem.remove()}return SCROLLBAR_WIDTH},scrollbarPadding:function(elem){elem=this.getRawNode(elem);var elemStyle=$window.getComputedStyle(elem),paddingRight=this.parseStyle(elemStyle.paddingRight),paddingBottom=this.parseStyle(elemStyle.paddingBottom),scrollParent=this.scrollParent(elem,!1,!0),scrollbarWidth=this.scrollbarWidth(BODY_REGEX.test(scrollParent.tagName));return{scrollbarWidth:scrollbarWidth,widthOverflow:scrollParent.scrollWidth>scrollParent.clientWidth,right:paddingRight+scrollbarWidth,originalRight:paddingRight,heightOverflow:scrollParent.scrollHeight>scrollParent.clientHeight,bottom:paddingBottom+scrollbarWidth,originalBottom:paddingBottom}},isScrollable:function(elem,includeHidden){elem=this.getRawNode(elem);var overflowRegex=includeHidden?OVERFLOW_REGEX.hidden:OVERFLOW_REGEX.normal,elemStyle=$window.getComputedStyle(elem);return overflowRegex.test(elemStyle.overflow+elemStyle.overflowY+elemStyle.overflowX)},scrollParent:function(elem,includeHidden,includeSelf){elem=this.getRawNode(elem);var overflowRegex=includeHidden?OVERFLOW_REGEX.hidden:OVERFLOW_REGEX.normal,documentEl=$document[0].documentElement,elemStyle=$window.getComputedStyle(elem);if(includeSelf&&overflowRegex.test(elemStyle.overflow+elemStyle.overflowY+elemStyle.overflowX))return elem;var excludeStatic="absolute"===elemStyle.position,scrollParent=elem.parentElement||documentEl;if(scrollParent===documentEl||"fixed"===elemStyle.position)return documentEl;for(;scrollParent.parentElement&&scrollParent!==documentEl;){var spStyle=$window.getComputedStyle(scrollParent);if(excludeStatic&&"static"!==spStyle.position&&(excludeStatic=!1),!excludeStatic&&overflowRegex.test(spStyle.overflow+spStyle.overflowY+spStyle.overflowX))break;scrollParent=scrollParent.parentElement}return scrollParent},position:function(elem,includeMagins){elem=this.getRawNode(elem);var elemOffset=this.offset(elem);if(includeMagins){var elemStyle=$window.getComputedStyle(elem);elemOffset.top-=this.parseStyle(elemStyle.marginTop),elemOffset.left-=this.parseStyle(elemStyle.marginLeft)}var parent=this.offsetParent(elem),parentOffset={top:0,left:0};return parent!==$document[0].documentElement&&((parentOffset=this.offset(parent)).top+=parent.clientTop-parent.scrollTop,parentOffset.left+=parent.clientLeft-parent.scrollLeft),{width:Math.round(angular.isNumber(elemOffset.width)?elemOffset.width:elem.offsetWidth),height:Math.round(angular.isNumber(elemOffset.height)?elemOffset.height:elem.offsetHeight),top:Math.round(elemOffset.top-parentOffset.top),left:Math.round(elemOffset.left-parentOffset.left)}},offset:function(elem){var elemBCR=(elem=this.getRawNode(elem)).getBoundingClientRect();return{width:Math.round(angular.isNumber(elemBCR.width)?elemBCR.width:elem.offsetWidth),height:Math.round(angular.isNumber(elemBCR.height)?elemBCR.height:elem.offsetHeight),top:Math.round(elemBCR.top+($window.pageYOffset||$document[0].documentElement.scrollTop)),left:Math.round(elemBCR.left+($window.pageXOffset||$document[0].documentElement.scrollLeft))}},viewportOffset:function(elem,useDocument,includePadding){includePadding=!1!==includePadding;var elemBCR=(elem=this.getRawNode(elem)).getBoundingClientRect(),offsetBCR={top:0,left:0,bottom:0,right:0},offsetParent=useDocument?$document[0].documentElement:this.scrollParent(elem),offsetParentBCR=offsetParent.getBoundingClientRect();if(offsetBCR.top=offsetParentBCR.top+offsetParent.clientTop,offsetBCR.left=offsetParentBCR.left+offsetParent.clientLeft,offsetParent===$document[0].documentElement&&(offsetBCR.top+=$window.pageYOffset,offsetBCR.left+=$window.pageXOffset),offsetBCR.bottom=offsetBCR.top+offsetParent.clientHeight,offsetBCR.right=offsetBCR.left+offsetParent.clientWidth,includePadding){var offsetParentStyle=$window.getComputedStyle(offsetParent);offsetBCR.top+=this.parseStyle(offsetParentStyle.paddingTop),offsetBCR.bottom-=this.parseStyle(offsetParentStyle.paddingBottom),offsetBCR.left+=this.parseStyle(offsetParentStyle.paddingLeft),offsetBCR.right-=this.parseStyle(offsetParentStyle.paddingRight)}return{top:Math.round(elemBCR.top-offsetBCR.top),bottom:Math.round(offsetBCR.bottom-elemBCR.bottom),left:Math.round(elemBCR.left-offsetBCR.left),right:Math.round(offsetBCR.right-elemBCR.right)}},parsePlacement:function(placement){var autoPlace=PLACEMENT_REGEX.auto.test(placement);return autoPlace&&(placement=placement.replace(PLACEMENT_REGEX.auto,"")),(placement=placement.split("-"))[0]=placement[0]||"top",PLACEMENT_REGEX.primary.test(placement[0])||(placement[0]="top"),placement[1]=placement[1]||"center",PLACEMENT_REGEX.secondary.test(placement[1])||(placement[1]="center"),placement[2]=!!autoPlace,placement},positionElements:function(hostElem,targetElem,placement,appendToBody){hostElem=this.getRawNode(hostElem),targetElem=this.getRawNode(targetElem);var targetWidth=angular.isDefined(targetElem.offsetWidth)?targetElem.offsetWidth:targetElem.prop("offsetWidth"),targetHeight=angular.isDefined(targetElem.offsetHeight)?targetElem.offsetHeight:targetElem.prop("offsetHeight");placement=this.parsePlacement(placement);var hostElemPos=appendToBody?this.offset(hostElem):this.position(hostElem),targetElemPos={top:0,left:0,placement:""};if(placement[2]){var viewportOffset=this.viewportOffset(hostElem,appendToBody),targetElemStyle=$window.getComputedStyle(targetElem),adjustedSize={width:targetWidth+Math.round(Math.abs(this.parseStyle(targetElemStyle.marginLeft)+this.parseStyle(targetElemStyle.marginRight))),height:targetHeight+Math.round(Math.abs(this.parseStyle(targetElemStyle.marginTop)+this.parseStyle(targetElemStyle.marginBottom)))};if(placement[0]="top"===placement[0]&&adjustedSize.height>viewportOffset.top&&adjustedSize.height<=viewportOffset.bottom?"bottom":"bottom"===placement[0]&&adjustedSize.height>viewportOffset.bottom&&adjustedSize.height<=viewportOffset.top?"top":"left"===placement[0]&&adjustedSize.width>viewportOffset.left&&adjustedSize.width<=viewportOffset.right?"right":"right"===placement[0]&&adjustedSize.width>viewportOffset.right&&adjustedSize.width<=viewportOffset.left?"left":placement[0],placement[1]="top"===placement[1]&&adjustedSize.height-hostElemPos.height>viewportOffset.bottom&&adjustedSize.height-hostElemPos.height<=viewportOffset.top?"bottom":"bottom"===placement[1]&&adjustedSize.height-hostElemPos.height>viewportOffset.top&&adjustedSize.height-hostElemPos.height<=viewportOffset.bottom?"top":"left"===placement[1]&&adjustedSize.width-hostElemPos.width>viewportOffset.right&&adjustedSize.width-hostElemPos.width<=viewportOffset.left?"right":"right"===placement[1]&&adjustedSize.width-hostElemPos.width>viewportOffset.left&&adjustedSize.width-hostElemPos.width<=viewportOffset.right?"left":placement[1],"center"===placement[1])if(PLACEMENT_REGEX.vertical.test(placement[0])){var xOverflow=hostElemPos.width/2-targetWidth/2;viewportOffset.left+xOverflow<0&&adjustedSize.width-hostElemPos.width<=viewportOffset.right?placement[1]="left":viewportOffset.right+xOverflow<0&&adjustedSize.width-hostElemPos.width<=viewportOffset.left&&(placement[1]="right")}else{var yOverflow=hostElemPos.height/2-adjustedSize.height/2;viewportOffset.top+yOverflow<0&&adjustedSize.height-hostElemPos.height<=viewportOffset.bottom?placement[1]="top":viewportOffset.bottom+yOverflow<0&&adjustedSize.height-hostElemPos.height<=viewportOffset.top&&(placement[1]="bottom")}}switch(placement[0]){case"top":targetElemPos.top=hostElemPos.top-targetHeight;break;case"bottom":targetElemPos.top=hostElemPos.top+hostElemPos.height;break;case"left":targetElemPos.left=hostElemPos.left-targetWidth;break;case"right":targetElemPos.left=hostElemPos.left+hostElemPos.width}switch(placement[1]){case"top":targetElemPos.top=hostElemPos.top;break;case"bottom":targetElemPos.top=hostElemPos.top+hostElemPos.height-targetHeight;break;case"left":targetElemPos.left=hostElemPos.left;break;case"right":targetElemPos.left=hostElemPos.left+hostElemPos.width-targetWidth;break;case"center":PLACEMENT_REGEX.vertical.test(placement[0])?targetElemPos.left=hostElemPos.left+hostElemPos.width/2-targetWidth/2:targetElemPos.top=hostElemPos.top+hostElemPos.height/2-targetHeight/2}return targetElemPos.top=Math.round(targetElemPos.top),targetElemPos.left=Math.round(targetElemPos.left),targetElemPos.placement="center"===placement[1]?placement[0]:placement[0]+"-"+placement[1],targetElemPos},adjustTop:function(placementClasses,containerPosition,initialHeight,currentHeight){if(-1!==placementClasses.indexOf("top")&&initialHeight!==currentHeight)return{top:containerPosition.top-currentHeight+"px"}},positionArrow:function(elem,placement){var innerElem=(elem=this.getRawNode(elem)).querySelector(".tooltip-inner, .popover-inner");if(innerElem){var isTooltip=angular.element(innerElem).hasClass("tooltip-inner"),arrowElem=isTooltip?elem.querySelector(".tooltip-arrow"):elem.querySelector(".arrow");if(arrowElem){var arrowCss={top:"",bottom:"",left:"",right:""};if("center"!==(placement=this.parsePlacement(placement))[1]){var borderProp="border-"+placement[0]+"-width",borderWidth=$window.getComputedStyle(arrowElem)[borderProp],borderRadiusProp="border-";PLACEMENT_REGEX.vertical.test(placement[0])?borderRadiusProp+=placement[0]+"-"+placement[1]:borderRadiusProp+=placement[1]+"-"+placement[0],borderRadiusProp+="-radius";var borderRadius=$window.getComputedStyle(isTooltip?innerElem:elem)[borderRadiusProp];switch(placement[0]){case"top":arrowCss.bottom=isTooltip?"0":"-"+borderWidth;break;case"bottom":arrowCss.top=isTooltip?"0":"-"+borderWidth;break;case"left":arrowCss.right=isTooltip?"0":"-"+borderWidth;break;case"right":arrowCss.left=isTooltip?"0":"-"+borderWidth}arrowCss[placement[1]]=borderRadius,angular.element(arrowElem).css(arrowCss)}else angular.element(arrowElem).css(arrowCss)}}}}}]),angular.module("ui.bootstrap.datepickerPopup",["ui.bootstrap.datepicker","ui.bootstrap.position"]).value("$datepickerPopupLiteralWarning",!0).constant("uibDatepickerPopupConfig",{altInputFormats:[],appendToBody:!1,clearText:"Clear",closeOnDateSelection:!0,closeText:"Done",currentText:"Today",datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"uib/template/datepickerPopup/popup.html",datepickerTemplateUrl:"uib/template/datepicker/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},onOpenFocus:!0,showButtonBar:!0,placement:"auto bottom-left"}).controller("UibDatepickerPopupController",["$scope","$element","$attrs","$compile","$log","$parse","$window","$document","$rootScope","$uibPosition","dateFilter","uibDateParser","uibDatepickerPopupConfig","$timeout","uibDatepickerConfig","$datepickerPopupLiteralWarning",function($scope,$element,$attrs,$compile,$log,$parse,$window,$document,$rootScope,$position,dateFilter,dateParser,datepickerPopupConfig,$timeout,datepickerConfig,$datepickerPopupLiteralWarning){var isHtml5DateInput=!1,dateFormat,closeOnDateSelection,appendToBody,onOpenFocus,datepickerPopupTemplateUrl,datepickerTemplateUrl,popupEl,datepickerEl,scrollParentEl,ngModel,ngModelOptions,$popup,altInputFormats,watchListeners=[];function cameltoDash(string){return string.replace(/([A-Z])/g,(function($1){return"-"+$1.toLowerCase()}))}function parseDateString(viewValue){var date=dateParser.parse(viewValue,dateFormat,$scope.date);if(isNaN(date))for(var i=0;i<altInputFormats.length;i++)if(date=dateParser.parse(viewValue,altInputFormats[i],$scope.date),!isNaN(date))return date;return date}function parseDate(viewValue){if(angular.isNumber(viewValue)&&(viewValue=new Date(viewValue)),!viewValue)return null;if(angular.isDate(viewValue)&&!isNaN(viewValue))return viewValue;if(angular.isString(viewValue)){var date=parseDateString(viewValue);if(!isNaN(date))return dateParser.toTimezone(date,ngModelOptions.getOption("timezone"))}return ngModelOptions.getOption("allowInvalid")?viewValue:void 0}function validator(modelValue,viewValue){var value=modelValue||viewValue;return!$attrs.ngRequired&&!value||(angular.isNumber(value)&&(value=new Date(value)),!value||(!(!angular.isDate(value)||isNaN(value))||!!angular.isString(value)&&!isNaN(parseDateString(value))))}function documentClickBind(event){if($scope.isOpen||!$scope.disabled){var popup=$popup[0],dpContainsTarget=$element[0].contains(event.target),popupContainsTarget=void 0!==popup.contains&&popup.contains(event.target);!$scope.isOpen||dpContainsTarget||popupContainsTarget||$scope.$apply((function(){$scope.isOpen=!1}))}}function inputKeydownBind(evt){27===evt.which&&$scope.isOpen?(evt.preventDefault(),evt.stopPropagation(),$scope.$apply((function(){$scope.isOpen=!1})),$element[0].focus()):40!==evt.which||$scope.isOpen||(evt.preventDefault(),evt.stopPropagation(),$scope.$apply((function(){$scope.isOpen=!0})))}function positionPopup(){if($scope.isOpen){var dpElement=angular.element($popup[0].querySelector(".uib-datepicker-popup")),placement=$attrs.popupPlacement?$attrs.popupPlacement:datepickerPopupConfig.placement,position=$position.positionElements($element,dpElement,placement,appendToBody);dpElement.css({top:position.top+"px",left:position.left+"px"}),dpElement.hasClass("uib-position-measure")&&dpElement.removeClass("uib-position-measure")}}function extractOptions(ngModelCtrl){var ngModelOptions;return angular.version.minor<6?(ngModelOptions=angular.isObject(ngModelCtrl.$options)?ngModelCtrl.$options:{timezone:null}).getOption=function(key){return ngModelOptions[key]}:ngModelOptions=ngModelCtrl.$options,ngModelOptions}this.init=function(_ngModel_){if(ngModelOptions=extractOptions(ngModel=_ngModel_),closeOnDateSelection=angular.isDefined($attrs.closeOnDateSelection)?$scope.$parent.$eval($attrs.closeOnDateSelection):datepickerPopupConfig.closeOnDateSelection,appendToBody=angular.isDefined($attrs.datepickerAppendToBody)?$scope.$parent.$eval($attrs.datepickerAppendToBody):datepickerPopupConfig.appendToBody,onOpenFocus=angular.isDefined($attrs.onOpenFocus)?$scope.$parent.$eval($attrs.onOpenFocus):datepickerPopupConfig.onOpenFocus,datepickerPopupTemplateUrl=angular.isDefined($attrs.datepickerPopupTemplateUrl)?$attrs.datepickerPopupTemplateUrl:datepickerPopupConfig.datepickerPopupTemplateUrl,datepickerTemplateUrl=angular.isDefined($attrs.datepickerTemplateUrl)?$attrs.datepickerTemplateUrl:datepickerPopupConfig.datepickerTemplateUrl,altInputFormats=angular.isDefined($attrs.altInputFormats)?$scope.$parent.$eval($attrs.altInputFormats):datepickerPopupConfig.altInputFormats,$scope.showButtonBar=angular.isDefined($attrs.showButtonBar)?$scope.$parent.$eval($attrs.showButtonBar):datepickerPopupConfig.showButtonBar,datepickerPopupConfig.html5Types[$attrs.type]?(dateFormat=datepickerPopupConfig.html5Types[$attrs.type],isHtml5DateInput=!0):(dateFormat=$attrs.uibDatepickerPopup||datepickerPopupConfig.datepickerPopup,$attrs.$observe("uibDatepickerPopup",(function(value,oldValue){var newDateFormat=value||datepickerPopupConfig.datepickerPopup;if(newDateFormat!==dateFormat&&(dateFormat=newDateFormat,ngModel.$modelValue=null,!dateFormat))throw new Error("uibDatepickerPopup must have a date format specified.")}))),!dateFormat)throw new Error("uibDatepickerPopup must have a date format specified.");if(isHtml5DateInput&&$attrs.uibDatepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");(popupEl=angular.element("<div uib-datepicker-popup-wrap><div uib-datepicker></div></div>")).attr({"ng-model":"date","ng-change":"dateSelection(date)","template-url":datepickerPopupTemplateUrl}),(datepickerEl=angular.element(popupEl.children()[0])).attr("template-url",datepickerTemplateUrl),$scope.datepickerOptions||($scope.datepickerOptions={}),isHtml5DateInput&&"month"===$attrs.type&&($scope.datepickerOptions.datepickerMode="month",$scope.datepickerOptions.minMode="month"),datepickerEl.attr("datepicker-options","datepickerOptions"),isHtml5DateInput?ngModel.$formatters.push((function(value){return $scope.date=dateParser.fromTimezone(value,ngModelOptions.getOption("timezone")),value})):(ngModel.$$parserName="date",ngModel.$validators.date=validator,ngModel.$parsers.unshift(parseDate),ngModel.$formatters.push((function(value){return ngModel.$isEmpty(value)?($scope.date=value,value):(angular.isNumber(value)&&(value=new Date(value)),$scope.date=dateParser.fromTimezone(value,ngModelOptions.getOption("timezone")),dateParser.filter($scope.date,dateFormat))}))),ngModel.$viewChangeListeners.push((function(){$scope.date=parseDateString(ngModel.$viewValue)})),$element.on("keydown",inputKeydownBind),$popup=$compile(popupEl)($scope),popupEl.remove(),appendToBody?$document.find("body").append($popup):$element.after($popup),$scope.$on("$destroy",(function(){for(!0===$scope.isOpen&&($rootScope.$$phase||$scope.$apply((function(){$scope.isOpen=!1}))),$popup.remove(),$element.off("keydown",inputKeydownBind),$document.off("click",documentClickBind),scrollParentEl&&scrollParentEl.off("scroll",positionPopup),angular.element($window).off("resize",positionPopup);watchListeners.length;)watchListeners.shift()()}))},$scope.getText=function(key){return $scope[key+"Text"]||datepickerPopupConfig[key+"Text"]},$scope.isDisabled=function(date){"today"===date&&(date=dateParser.fromTimezone(new Date,ngModelOptions.getOption("timezone")));var dates={};return angular.forEach(["minDate","maxDate"],(function(key){$scope.datepickerOptions[key]?angular.isDate($scope.datepickerOptions[key])?dates[key]=new Date($scope.datepickerOptions[key]):($datepickerPopupLiteralWarning&&$log.warn("Literal date support has been deprecated, please switch to date object usage"),dates[key]=new Date(dateFilter($scope.datepickerOptions[key],"medium"))):dates[key]=null})),$scope.datepickerOptions&&dates.minDate&&$scope.compare(date,dates.minDate)<0||dates.maxDate&&$scope.compare(date,dates.maxDate)>0},$scope.compare=function(date1,date2){return new Date(date1.getFullYear(),date1.getMonth(),date1.getDate())-new Date(date2.getFullYear(),date2.getMonth(),date2.getDate())},$scope.dateSelection=function(dt){$scope.date=dt;var date=$scope.date?dateParser.filter($scope.date,dateFormat):null;$element.val(date),ngModel.$setViewValue(date),closeOnDateSelection&&($scope.isOpen=!1,$element[0].focus())},$scope.keydown=function(evt){27===evt.which&&(evt.stopPropagation(),$scope.isOpen=!1,$element[0].focus())},$scope.select=function(date,evt){if(evt.stopPropagation(),"today"===date){var today=new Date;angular.isDate($scope.date)?(date=new Date($scope.date)).setFullYear(today.getFullYear(),today.getMonth(),today.getDate()):(date=dateParser.fromTimezone(today,ngModelOptions.getOption("timezone"))).setHours(0,0,0,0)}$scope.dateSelection(date)},$scope.close=function(evt){evt.stopPropagation(),$scope.isOpen=!1,$element[0].focus()},$scope.disabled=angular.isDefined($attrs.disabled)||!1,$attrs.ngDisabled&&watchListeners.push($scope.$parent.$watch($parse($attrs.ngDisabled),(function(disabled){$scope.disabled=disabled}))),$scope.$watch("isOpen",(function(value){value?$scope.disabled?$scope.isOpen=!1:$timeout((function(){positionPopup(),onOpenFocus&&$scope.$broadcast("uib:datepicker.focus"),$document.on("click",documentClickBind);var placement=$attrs.popupPlacement?$attrs.popupPlacement:datepickerPopupConfig.placement;appendToBody||$position.parsePlacement(placement)[2]?(scrollParentEl=scrollParentEl||angular.element($position.scrollParent($element)))&&scrollParentEl.on("scroll",positionPopup):scrollParentEl=null,angular.element($window).on("resize",positionPopup)}),0,!1):($document.off("click",documentClickBind),scrollParentEl&&scrollParentEl.off("scroll",positionPopup),angular.element($window).off("resize",positionPopup))})),$scope.$on("uib:datepicker.mode",(function(){$timeout(positionPopup,0,!1)}))}]).directive("uibDatepickerPopup",(function(){return{require:["ngModel","uibDatepickerPopup"],controller:"UibDatepickerPopupController",scope:{datepickerOptions:"=?",isOpen:"=?",currentText:"@",clearText:"@",closeText:"@"},link:function(scope,element,attrs,ctrls){var ngModel=ctrls[0],ctrl;ctrls[1].init(ngModel)}}})).directive("uibDatepickerPopupWrap",(function(){return{restrict:"A",transclude:!0,templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/datepickerPopup/popup.html"}}})),angular.module("ui.bootstrap.debounce",[]).factory("$$debounce",["$timeout",function($timeout){return function(callback,debounceTime){var timeoutPromise;return function(){var self=this,args=Array.prototype.slice.call(arguments);timeoutPromise&&$timeout.cancel(timeoutPromise),timeoutPromise=$timeout((function(){callback.apply(self,args)}),debounceTime)}}}]),angular.module("ui.bootstrap.multiMap",[]).factory("$$multiMap",(function(){return{createNew:function(){var map={};return{entries:function(){return Object.keys(map).map((function(key){return{key:key,value:map[key]}}))},get:function(key){return map[key]},hasKey:function(key){return!!map[key]},keys:function(){return Object.keys(map)},put:function(key,value){map[key]||(map[key]=[]),map[key].push(value)},remove:function(key,value){var values=map[key];if(values){var idx=values.indexOf(value);-1!==idx&&values.splice(idx,1),values.length||delete map[key]}}}}}})),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.multiMap","ui.bootstrap.position"]).constant("uibDropdownConfig",{appendToOpenClass:"uib-dropdown-open",openClass:"open"}).service("uibDropdownService",["$document","$rootScope","$$multiMap",function($document,$rootScope,$$multiMap){var openScope=null,openedContainers=$$multiMap.createNew();this.isOnlyOpen=function(dropdownScope,appendTo){var openedDropdowns=openedContainers.get(appendTo),openDropdown;if(openedDropdowns&&openedDropdowns.reduce((function(toClose,dropdown){return dropdown.scope===dropdownScope?dropdown:toClose}),{}))return 1===openedDropdowns.length;return!1},this.open=function(dropdownScope,element,appendTo){if(openScope||$document.on("click",closeDropdown),openScope&&openScope!==dropdownScope&&(openScope.isOpen=!1),openScope=dropdownScope,appendTo){var openedDropdowns=openedContainers.get(appendTo),openedScopes;if(openedDropdowns)-1===openedDropdowns.map((function(dropdown){return dropdown.scope})).indexOf(dropdownScope)&&openedContainers.put(appendTo,{scope:dropdownScope});else openedContainers.put(appendTo,{scope:dropdownScope})}},this.close=function(dropdownScope,element,appendTo){if(openScope===dropdownScope&&($document.off("click",closeDropdown),$document.off("keydown",this.keybindFilter),openScope=null),appendTo){var openedDropdowns=openedContainers.get(appendTo);if(openedDropdowns){var dropdownToClose=openedDropdowns.reduce((function(toClose,dropdown){return dropdown.scope===dropdownScope?dropdown:toClose}),{});dropdownToClose&&openedContainers.remove(appendTo,dropdownToClose)}}};var closeDropdown=function(evt){if(openScope&&openScope.isOpen&&!(evt&&"disabled"===openScope.getAutoClose()||evt&&3===evt.which)){var toggleElement=openScope.getToggleElement();if(!(evt&&toggleElement&&toggleElement[0].contains(evt.target))){var dropdownElement=openScope.getDropdownElement();evt&&"outsideClick"===openScope.getAutoClose()&&dropdownElement&&dropdownElement[0].contains(evt.target)||(openScope.focusToggleElement(),openScope.isOpen=!1,$rootScope.$$phase||openScope.$apply())}}};this.keybindFilter=function(evt){if(openScope){var dropdownElement=openScope.getDropdownElement(),toggleElement=openScope.getToggleElement(),dropdownElementTargeted=dropdownElement&&dropdownElement[0].contains(evt.target),toggleElementTargeted=toggleElement&&toggleElement[0].contains(evt.target);27===evt.which?(evt.stopPropagation(),openScope.focusToggleElement(),closeDropdown()):openScope.isKeynavEnabled()&&-1!==[38,40].indexOf(evt.which)&&openScope.isOpen&&(dropdownElementTargeted||toggleElementTargeted)&&(evt.preventDefault(),evt.stopPropagation(),openScope.focusDropdownEntry(evt.which))}}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function($scope,$element,$attrs,$parse,dropdownConfig,uibDropdownService,$animate,$position,$document,$compile,$templateRequest){var self=this,scope=$scope.$new(),templateScope,appendToOpenClass=dropdownConfig.appendToOpenClass,openClass=dropdownConfig.openClass,getIsOpen,setIsOpen=angular.noop,toggleInvoker=$attrs.onToggle?$parse($attrs.onToggle):angular.noop,keynavEnabled=!1,selectedOption=null,body=$document.find("body");function removeDropdownMenu(){$element.append(self.dropdownMenu)}$element.addClass("dropdown"),this.init=function(){$attrs.isOpen&&(getIsOpen=$parse($attrs.isOpen),setIsOpen=getIsOpen.assign,$scope.$watch(getIsOpen,(function(value){scope.isOpen=!!value}))),keynavEnabled=angular.isDefined($attrs.keyboardNav)},this.toggle=function(open){return scope.isOpen=arguments.length?!!open:!scope.isOpen,angular.isFunction(setIsOpen)&&setIsOpen(scope,scope.isOpen),scope.isOpen},this.isOpen=function(){return scope.isOpen},scope.getToggleElement=function(){return self.toggleElement},scope.getAutoClose=function(){return $attrs.autoClose||"always"},scope.getElement=function(){return $element},scope.isKeynavEnabled=function(){return keynavEnabled},scope.focusDropdownEntry=function(keyCode){var elems=self.dropdownMenu?angular.element(self.dropdownMenu).find("a"):$element.find("ul").eq(0).find("a");switch(keyCode){case 40:angular.isNumber(self.selectedOption)?self.selectedOption=self.selectedOption===elems.length-1?self.selectedOption:self.selectedOption+1:self.selectedOption=0;break;case 38:angular.isNumber(self.selectedOption)?self.selectedOption=0===self.selectedOption?0:self.selectedOption-1:self.selectedOption=elems.length-1}elems[self.selectedOption].focus()},scope.getDropdownElement=function(){return self.dropdownMenu},scope.focusToggleElement=function(){self.toggleElement&&self.toggleElement[0].focus()},scope.$watch("isOpen",(function(isOpen,wasOpen){var appendTo=null,appendToBody=!1,appendToBodyValue;if(angular.isDefined($attrs.dropdownAppendTo)){var appendToEl=$parse($attrs.dropdownAppendTo)(scope);appendToEl&&(appendTo=angular.element(appendToEl))}angular.isDefined($attrs.dropdownAppendToBody)&&(!1!==$parse($attrs.dropdownAppendToBody)(scope)&&(appendToBody=!0));if(appendToBody&&!appendTo&&(appendTo=body),appendTo&&self.dropdownMenu&&(isOpen?(appendTo.append(self.dropdownMenu),$element.on("$destroy",removeDropdownMenu)):($element.off("$destroy",removeDropdownMenu),removeDropdownMenu())),appendTo&&self.dropdownMenu){var pos=$position.positionElements($element,self.dropdownMenu,"bottom-left",!0),css,rightalign,scrollbarPadding,scrollbarWidth=0;if(css={top:pos.top+"px",display:isOpen?"block":"none"},(rightalign=self.dropdownMenu.hasClass("dropdown-menu-right"))?(css.left="auto",(scrollbarPadding=$position.scrollbarPadding(appendTo)).heightOverflow&&scrollbarPadding.scrollbarWidth&&(scrollbarWidth=scrollbarPadding.scrollbarWidth),css.right=window.innerWidth-scrollbarWidth-(pos.left+$element.prop("offsetWidth"))+"px"):(css.left=pos.left+"px",css.right="auto"),!appendToBody){var appendOffset=$position.offset(appendTo);css.top=pos.top-appendOffset.top+"px",rightalign?css.right=window.innerWidth-(pos.left-appendOffset.left+$element.prop("offsetWidth"))+"px":css.left=pos.left-appendOffset.left+"px"}self.dropdownMenu.css(css)}var openContainer=appendTo||$element,dropdownOpenClass=appendTo?appendToOpenClass:openClass,hasOpenClass=openContainer.hasClass(dropdownOpenClass),isOnlyOpen=uibDropdownService.isOnlyOpen($scope,appendTo),toggleClass;hasOpenClass===!isOpen&&$animate[toggleClass=appendTo?isOnlyOpen?"removeClass":"addClass":isOpen?"addClass":"removeClass"](openContainer,dropdownOpenClass).then((function(){angular.isDefined(isOpen)&&isOpen!==wasOpen&&toggleInvoker($scope,{open:!!isOpen})}));if(isOpen)self.dropdownMenuTemplateUrl?$templateRequest(self.dropdownMenuTemplateUrl).then((function(tplContent){templateScope=scope.$new(),$compile(tplContent.trim())(templateScope,(function(dropdownElement){var newEl=dropdownElement;self.dropdownMenu.replaceWith(newEl),self.dropdownMenu=newEl,$document.on("keydown",uibDropdownService.keybindFilter)}))})):$document.on("keydown",uibDropdownService.keybindFilter),scope.focusToggleElement(),uibDropdownService.open(scope,$element,appendTo);else{if(uibDropdownService.close(scope,$element,appendTo),self.dropdownMenuTemplateUrl){templateScope&&templateScope.$destroy();var newEl=angular.element('<ul class="dropdown-menu"></ul>');self.dropdownMenu.replaceWith(newEl),self.dropdownMenu=newEl}self.selectedOption=null}angular.isFunction(setIsOpen)&&setIsOpen($scope,isOpen)}))}]).directive("uibDropdown",(function(){return{controller:"UibDropdownController",link:function(scope,element,attrs,dropdownCtrl){dropdownCtrl.init()}}})).directive("uibDropdownMenu",(function(){return{restrict:"A",require:"?^uibDropdown",link:function(scope,element,attrs,dropdownCtrl){if(dropdownCtrl&&!angular.isDefined(attrs.dropdownNested)){element.addClass("dropdown-menu");var tplUrl=attrs.templateUrl;tplUrl&&(dropdownCtrl.dropdownMenuTemplateUrl=tplUrl),dropdownCtrl.dropdownMenu||(dropdownCtrl.dropdownMenu=element)}}}})).directive("uibDropdownToggle",(function(){return{require:"?^uibDropdown",link:function(scope,element,attrs,dropdownCtrl){if(dropdownCtrl){element.addClass("dropdown-toggle"),dropdownCtrl.toggleElement=element;var toggleDropdown=function(event){event.preventDefault(),element.hasClass("disabled")||attrs.disabled||scope.$apply((function(){dropdownCtrl.toggle()}))};element.on("click",toggleDropdown),element.attr({"aria-haspopup":!0,"aria-expanded":!1}),scope.$watch(dropdownCtrl.isOpen,(function(isOpen){element.attr("aria-expanded",!!isOpen)})),scope.$on("$destroy",(function(){element.off("click",toggleDropdown)}))}}}})),angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",(function(){return{createNew:function(){var stack=[];return{add:function(key,value){stack.push({key:key,value:value})},get:function(key){for(var i=0;i<stack.length;i++)if(key===stack[i].key)return stack[i]},keys:function(){for(var keys=[],i=0;i<stack.length;i++)keys.push(stack[i].key);return keys},top:function(){return stack[stack.length-1]},remove:function(key){for(var idx=-1,i=0;i<stack.length;i++)if(key===stack[i].key){idx=i;break}return stack.splice(idx,1)[0]},removeTop:function(){return stack.pop()},length:function(){return stack.length}}}}})),angular.module("ui.bootstrap.modal",["ui.bootstrap.multiMap","ui.bootstrap.stackedMap","ui.bootstrap.position"]).provider("$uibResolve",(function(){var resolve=this;this.resolver=null,this.setResolver=function(resolver){this.resolver=resolver},this.$get=["$injector","$q",function($injector,$q){var resolver=resolve.resolver?$injector.get(resolve.resolver):null;return{resolve:function(invocables,locals,parent,self){if(resolver)return resolver.resolve(invocables,locals,parent,self);var promises=[];return angular.forEach(invocables,(function(value){angular.isFunction(value)||angular.isArray(value)?promises.push($q.resolve($injector.invoke(value))):angular.isString(value)?promises.push($q.resolve($injector.get(value))):promises.push($q.resolve(value))})),$q.all(promises).then((function(resolves){var resolveObj={},resolveIter=0;return angular.forEach(invocables,(function(value,key){resolveObj[key]=resolves[resolveIter++]})),resolveObj}))}}}]})).directive("uibModalBackdrop",["$animate","$injector","$uibModalStack",function($animate,$injector,$modalStack){return{restrict:"A",compile:function(tElement,tAttrs){return tElement.addClass(tAttrs.backdropClass),linkFn}};function linkFn(scope,element,attrs){attrs.modalInClass&&($animate.addClass(element,attrs.modalInClass),scope.$on($modalStack.NOW_CLOSING_EVENT,(function(e,setIsAsync){var done=setIsAsync();scope.modalOptions.animation?$animate.removeClass(element,attrs.modalInClass).then(done):done()})))}}]).directive("uibModalWindow",["$uibModalStack","$q","$animateCss","$document",function($modalStack,$q,$animateCss,$document){return{scope:{index:"@"},restrict:"A",transclude:!0,templateUrl:function(tElement,tAttrs){return tAttrs.templateUrl||"uib/template/modal/window.html"},link:function(scope,element,attrs){element.addClass(attrs.windowTopClass||""),scope.size=attrs.size,scope.close=function(evt){var modal=$modalStack.getTop();modal&&modal.value.backdrop&&"static"!==modal.value.backdrop&&evt.target===evt.currentTarget&&(evt.preventDefault(),evt.stopPropagation(),$modalStack.dismiss(modal.key,"backdrop click"))},element.on("click",scope.close),scope.$isRendered=!0;var modalRenderDeferObj=$q.defer();scope.$$postDigest((function(){modalRenderDeferObj.resolve()})),modalRenderDeferObj.promise.then((function(){var animationPromise=null;attrs.modalInClass&&(animationPromise=$animateCss(element,{addClass:attrs.modalInClass}).start(),scope.$on($modalStack.NOW_CLOSING_EVENT,(function(e,setIsAsync){var done=setIsAsync();$animateCss(element,{removeClass:attrs.modalInClass}).start().then(done)}))),$q.when(animationPromise).then((function(){var modal=$modalStack.getTop();if(modal&&$modalStack.modalRendered(modal.key),!$document[0].activeElement||!element[0].contains($document[0].activeElement)){var inputWithAutofocus=element[0].querySelector("[autofocus]");inputWithAutofocus?inputWithAutofocus.focus():element[0].focus()}}))}))}}}]).directive("uibModalAnimationClass",(function(){return{compile:function(tElement,tAttrs){tAttrs.modalAnimation&&tElement.addClass(tAttrs.uibModalAnimationClass)}}})).directive("uibModalTransclude",["$animate",function($animate){return{link:function(scope,element,attrs,controller,transclude){transclude(scope.$parent,(function(clone){element.empty(),$animate.enter(clone,element)}))}}}]).factory("$uibModalStack",["$animate","$animateCss","$document","$compile","$rootScope","$q","$$multiMap","$$stackedMap","$uibPosition",function($animate,$animateCss,$document,$compile,$rootScope,$q,$$multiMap,$$stackedMap,$uibPosition){var OPENED_MODAL_CLASS="modal-open",backdropDomEl,backdropScope,openedWindows=$$stackedMap.createNew(),openedClasses=$$multiMap.createNew(),$modalStack={NOW_CLOSING_EVENT:"modal.stack.now-closing"},topModalIndex=0,previousTopOpenedModal=null,ARIA_HIDDEN_ATTRIBUTE_NAME="data-bootstrap-modal-aria-hidden-count",tabbableSelector="a[href], area[href], input:not([disabled]):not([tabindex='-1']), button:not([disabled]):not([tabindex='-1']),select:not([disabled]):not([tabindex='-1']), textarea:not([disabled]):not([tabindex='-1']), iframe, object, embed, *[tabindex]:not([tabindex='-1']), *[contenteditable=true]",scrollbarPadding,SNAKE_CASE_REGEXP=/[A-Z]/g;function snake_case(name){var separator="-";return name.replace(SNAKE_CASE_REGEXP,(function(letter,pos){return(pos?"-":"")+letter.toLowerCase()}))}function isVisible(element){return!!(element.offsetWidth||element.offsetHeight||element.getClientRects().length)}function backdropIndex(){for(var topBackdropIndex=-1,opened=openedWindows.keys(),i=0;i<opened.length;i++)openedWindows.get(opened[i]).value.backdrop&&(topBackdropIndex=i);return topBackdropIndex>-1&&topBackdropIndex<topModalIndex&&(topBackdropIndex=topModalIndex),topBackdropIndex}function removeModalWindow(modalInstance,elementToReceiveFocus){var modalWindow=openedWindows.get(modalInstance).value,appendToElement=modalWindow.appendTo;openedWindows.remove(modalInstance),(previousTopOpenedModal=openedWindows.top())&&(topModalIndex=parseInt(previousTopOpenedModal.value.modalDomEl.attr("index"),10)),removeAfterAnimate(modalWindow.modalDomEl,modalWindow.modalScope,(function(){var modalBodyClass=modalWindow.openedClass||"modal-open";openedClasses.remove(modalBodyClass,modalInstance);var areAnyOpen=openedClasses.hasKey(modalBodyClass);appendToElement.toggleClass(modalBodyClass,areAnyOpen),!areAnyOpen&&scrollbarPadding&&scrollbarPadding.heightOverflow&&scrollbarPadding.scrollbarWidth&&(scrollbarPadding.originalRight?appendToElement.css({paddingRight:scrollbarPadding.originalRight+"px"}):appendToElement.css({paddingRight:""}),scrollbarPadding=null),toggleTopWindowClass(!0)}),modalWindow.closedDeferred),checkRemoveBackdrop(),elementToReceiveFocus&&elementToReceiveFocus.focus?elementToReceiveFocus.focus():appendToElement.focus&&appendToElement.focus()}function toggleTopWindowClass(toggleSwitch){var modalWindow;openedWindows.length()>0&&(modalWindow=openedWindows.top().value).modalDomEl.toggleClass(modalWindow.windowTopClass||"",toggleSwitch)}function checkRemoveBackdrop(){if(backdropDomEl&&-1===backdropIndex()){var backdropScopeRef=backdropScope;removeAfterAnimate(backdropDomEl,backdropScope,(function(){backdropScopeRef=null})),backdropDomEl=void 0,backdropScope=void 0}}function removeAfterAnimate(domEl,scope,done,closedDeferred){var asyncDeferred,asyncPromise=null,setIsAsync=function(){return asyncDeferred||(asyncDeferred=$q.defer(),asyncPromise=asyncDeferred.promise),function asyncDone(){asyncDeferred.resolve()}};return scope.$broadcast($modalStack.NOW_CLOSING_EVENT,setIsAsync),$q.when(asyncPromise).then(afterAnimating);function afterAnimating(){afterAnimating.done||(afterAnimating.done=!0,$animate.leave(domEl).then((function(){done&&done(),domEl.remove(),closedDeferred&&closedDeferred.resolve()})),scope.$destroy())}}function keydownListener(evt){if(evt.isDefaultPrevented())return evt;var modal=openedWindows.top();if(modal)switch(evt.which){case 27:modal.value.keyboard&&(evt.preventDefault(),$rootScope.$apply((function(){$modalStack.dismiss(modal.key,"escape key press")})));break;case 9:var list=$modalStack.loadFocusElementList(modal),focusChanged=!1;evt.shiftKey?($modalStack.isFocusInFirstItem(evt,list)||$modalStack.isModalFocused(evt,modal))&&(focusChanged=$modalStack.focusLastFocusableElement(list)):$modalStack.isFocusInLastItem(evt,list)&&(focusChanged=$modalStack.focusFirstFocusableElement(list)),focusChanged&&(evt.preventDefault(),evt.stopPropagation())}}function broadcastClosing(modalWindow,resultOrReason,closing){return!modalWindow.value.modalScope.$broadcast("modal.closing",resultOrReason,closing).defaultPrevented}function unhideBackgroundElements(){Array.prototype.forEach.call(document.querySelectorAll("["+ARIA_HIDDEN_ATTRIBUTE_NAME+"]"),(function(hiddenEl){var ariaHiddenCount,newHiddenCount=parseInt(hiddenEl.getAttribute(ARIA_HIDDEN_ATTRIBUTE_NAME),10)-1;hiddenEl.setAttribute(ARIA_HIDDEN_ATTRIBUTE_NAME,newHiddenCount),newHiddenCount||(hiddenEl.removeAttribute(ARIA_HIDDEN_ATTRIBUTE_NAME),hiddenEl.removeAttribute("aria-hidden"))}))}return $rootScope.$watch(backdropIndex,(function(newBackdropIndex){backdropScope&&(backdropScope.index=newBackdropIndex)})),$document.on("keydown",keydownListener),$rootScope.$on("$destroy",(function(){$document.off("keydown",keydownListener)})),$modalStack.open=function(modalInstance,modal){var modalOpener=$document[0].activeElement,modalBodyClass=modal.openedClass||"modal-open";toggleTopWindowClass(!1),previousTopOpenedModal=openedWindows.top(),openedWindows.add(modalInstance,{deferred:modal.deferred,renderDeferred:modal.renderDeferred,closedDeferred:modal.closedDeferred,modalScope:modal.scope,backdrop:modal.backdrop,keyboard:modal.keyboard,openedClass:modal.openedClass,windowTopClass:modal.windowTopClass,animation:modal.animation,appendTo:modal.appendTo}),openedClasses.put(modalBodyClass,modalInstance);var appendToElement=modal.appendTo,currBackdropIndex=backdropIndex(),content;currBackdropIndex>=0&&!backdropDomEl&&((backdropScope=$rootScope.$new(!0)).modalOptions=modal,backdropScope.index=currBackdropIndex,(backdropDomEl=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>')).attr({class:"modal-backdrop","ng-style":"{'z-index': 1040 + (index && 1 || 0) + index*10}","uib-modal-animation-class":"fade","modal-in-class":"in"}),modal.backdropClass&&backdropDomEl.addClass(modal.backdropClass),modal.animation&&backdropDomEl.attr("modal-animation","true"),$compile(backdropDomEl)(backdropScope),$animate.enter(backdropDomEl,appendToElement),$uibPosition.isScrollable(appendToElement)&&(scrollbarPadding=$uibPosition.scrollbarPadding(appendToElement)).heightOverflow&&scrollbarPadding.scrollbarWidth&&appendToElement.css({paddingRight:scrollbarPadding.right+"px"})),modal.component?(content=document.createElement(snake_case(modal.component.name)),(content=angular.element(content)).attr({resolve:"$resolve","modal-instance":"$uibModalInstance",close:"$close($value)",dismiss:"$dismiss($value)"})):content=modal.content,topModalIndex=previousTopOpenedModal?parseInt(previousTopOpenedModal.value.modalDomEl.attr("index"),10)+1:0;var angularDomEl=angular.element('<div uib-modal-window="modal-window"></div>');function applyAriaHidden(el){if(el&&"BODY"!==el[0].tagName)return getSiblings(el).forEach((function(sibling){var elemIsAlreadyHidden="true"===sibling.getAttribute("aria-hidden"),ariaHiddenCount=parseInt(sibling.getAttribute(ARIA_HIDDEN_ATTRIBUTE_NAME),10);ariaHiddenCount||(ariaHiddenCount=elemIsAlreadyHidden?1:0),sibling.setAttribute(ARIA_HIDDEN_ATTRIBUTE_NAME,ariaHiddenCount+1),sibling.setAttribute("aria-hidden","true")})),applyAriaHidden(el.parent());function getSiblings(el){var children=el.parent()?el.parent().children():[];return Array.prototype.filter.call(children,(function(child){return child!==el[0]}))}}angularDomEl.attr({class:"modal","template-url":modal.windowTemplateUrl,"window-top-class":modal.windowTopClass,role:"dialog","aria-labelledby":modal.ariaLabelledBy,"aria-describedby":modal.ariaDescribedBy,size:modal.size,index:topModalIndex,animate:"animate","ng-style":"{'z-index': 1050 + $$topModalIndex*10, display: 'block'}",tabindex:-1,"uib-modal-animation-class":"fade","modal-in-class":"in"}).append(content),modal.windowClass&&angularDomEl.addClass(modal.windowClass),modal.animation&&angularDomEl.attr("modal-animation","true"),appendToElement.addClass(modalBodyClass),modal.scope&&(modal.scope.$$topModalIndex=topModalIndex),$animate.enter($compile(angularDomEl)(modal.scope),appendToElement),openedWindows.top().value.modalDomEl=angularDomEl,openedWindows.top().value.modalOpener=modalOpener,applyAriaHidden(angularDomEl)},$modalStack.close=function(modalInstance,result){var modalWindow=openedWindows.get(modalInstance);return unhideBackgroundElements(),modalWindow&&broadcastClosing(modalWindow,result,!0)?(modalWindow.value.modalScope.$$uibDestructionScheduled=!0,modalWindow.value.deferred.resolve(result),removeModalWindow(modalInstance,modalWindow.value.modalOpener),!0):!modalWindow},$modalStack.dismiss=function(modalInstance,reason){var modalWindow=openedWindows.get(modalInstance);return unhideBackgroundElements(),modalWindow&&broadcastClosing(modalWindow,reason,!1)?(modalWindow.value.modalScope.$$uibDestructionScheduled=!0,modalWindow.value.deferred.reject(reason),removeModalWindow(modalInstance,modalWindow.value.modalOpener),!0):!modalWindow},$modalStack.dismissAll=function(reason){for(var topModal=this.getTop();topModal&&this.dismiss(topModal.key,reason);)topModal=this.getTop()},$modalStack.getTop=function(){return openedWindows.top()},$modalStack.modalRendered=function(modalInstance){var modalWindow=openedWindows.get(modalInstance);modalWindow&&modalWindow.value.renderDeferred.resolve()},$modalStack.focusFirstFocusableElement=function(list){return list.length>0&&(list[0].focus(),!0)},$modalStack.focusLastFocusableElement=function(list){return list.length>0&&(list[list.length-1].focus(),!0)},$modalStack.isModalFocused=function(evt,modalWindow){if(evt&&modalWindow){var modalDomEl=modalWindow.value.modalDomEl;if(modalDomEl&&modalDomEl.length)return(evt.target||evt.srcElement)===modalDomEl[0]}return!1},$modalStack.isFocusInFirstItem=function(evt,list){return list.length>0&&(evt.target||evt.srcElement)===list[0]},$modalStack.isFocusInLastItem=function(evt,list){return list.length>0&&(evt.target||evt.srcElement)===list[list.length-1]},$modalStack.loadFocusElementList=function(modalWindow){if(modalWindow){var modalDomE1=modalWindow.value.modalDomEl;if(modalDomE1&&modalDomE1.length){var elements=modalDomE1[0].querySelectorAll(tabbableSelector);return elements?Array.prototype.filter.call(elements,(function(element){return isVisible(element)})):elements}}},$modalStack}]).provider("$uibModal",(function(){var $modalProvider={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$rootScope","$q","$document","$templateRequest","$controller","$uibResolve","$uibModalStack",function($rootScope,$q,$document,$templateRequest,$controller,$uibResolve,$modalStack){var $modal={};function getTemplatePromise(options){return options.template?$q.when(options.template):$templateRequest(angular.isFunction(options.templateUrl)?options.templateUrl():options.templateUrl)}var promiseChain=null;return $modal.getPromiseChain=function(){return promiseChain},$modal.open=function(modalOptions){var modalResultDeferred=$q.defer(),modalOpenedDeferred=$q.defer(),modalClosedDeferred=$q.defer(),modalRenderDeferred=$q.defer(),modalInstance={result:modalResultDeferred.promise,opened:modalOpenedDeferred.promise,closed:modalClosedDeferred.promise,rendered:modalRenderDeferred.promise,close:function(result){return $modalStack.close(modalInstance,result)},dismiss:function(reason){return $modalStack.dismiss(modalInstance,reason)}},templateAndResolvePromise,samePromise;if((modalOptions=angular.extend({},$modalProvider.options,modalOptions)).resolve=modalOptions.resolve||{},modalOptions.appendTo=modalOptions.appendTo||$document.find("body").eq(0),!modalOptions.appendTo.length)throw new Error("appendTo element not found. Make sure that the element passed is in DOM.");if(!modalOptions.component&&!modalOptions.template&&!modalOptions.templateUrl)throw new Error("One of component or template or templateUrl options is required.");function resolveWithTemplate(){return templateAndResolvePromise}return templateAndResolvePromise=modalOptions.component?$q.when($uibResolve.resolve(modalOptions.resolve,{},null,null)):$q.all([getTemplatePromise(modalOptions),$uibResolve.resolve(modalOptions.resolve,{},null,null)]),samePromise=promiseChain=$q.all([promiseChain]).then(resolveWithTemplate,resolveWithTemplate).then((function resolveSuccess(tplAndVars){var providedScope=modalOptions.scope||$rootScope,modalScope=providedScope.$new();modalScope.$close=modalInstance.close,modalScope.$dismiss=modalInstance.dismiss,modalScope.$on("$destroy",(function(){modalScope.$$uibDestructionScheduled||modalScope.$dismiss("$uibUnscheduledDestruction")}));var modal={scope:modalScope,deferred:modalResultDeferred,renderDeferred:modalRenderDeferred,closedDeferred:modalClosedDeferred,animation:modalOptions.animation,backdrop:modalOptions.backdrop,keyboard:modalOptions.keyboard,backdropClass:modalOptions.backdropClass,windowTopClass:modalOptions.windowTopClass,windowClass:modalOptions.windowClass,windowTemplateUrl:modalOptions.windowTemplateUrl,ariaLabelledBy:modalOptions.ariaLabelledBy,ariaDescribedBy:modalOptions.ariaDescribedBy,size:modalOptions.size,openedClass:modalOptions.openedClass,appendTo:modalOptions.appendTo},component={},ctrlInstance,ctrlInstantiate,ctrlLocals={};function constructLocals(obj,template,instanceOnScope,injectable){obj.$scope=modalScope,obj.$scope.$resolve={},instanceOnScope?obj.$scope.$uibModalInstance=modalInstance:obj.$uibModalInstance=modalInstance;var resolves=template?tplAndVars[1]:tplAndVars;angular.forEach(resolves,(function(value,key){injectable&&(obj[key]=value),obj.$scope.$resolve[key]=value}))}modalOptions.component?(constructLocals(component,!1,!0,!1),component.name=modalOptions.component,modal.component=component):modalOptions.controller&&(constructLocals(ctrlLocals,!0,!1,!0),ctrlInstantiate=$controller(modalOptions.controller,ctrlLocals,!0,modalOptions.controllerAs),modalOptions.controllerAs&&modalOptions.bindToController&&((ctrlInstance=ctrlInstantiate.instance).$close=modalScope.$close,ctrlInstance.$dismiss=modalScope.$dismiss,angular.extend(ctrlInstance,{$resolve:ctrlLocals.$scope.$resolve},providedScope)),ctrlInstance=ctrlInstantiate(),angular.isFunction(ctrlInstance.$onInit)&&ctrlInstance.$onInit()),modalOptions.component||(modal.content=tplAndVars[0]),$modalStack.open(modalInstance,modal),modalOpenedDeferred.resolve(!0)}),(function resolveError(reason){modalOpenedDeferred.reject(reason),modalResultDeferred.reject(reason)})).finally((function(){promiseChain===samePromise&&(promiseChain=null)})),modalInstance},$modal}]};return $modalProvider})),angular.module("ui.bootstrap.paging",[]).factory("uibPaging",["$parse",function($parse){return{create:function(ctrl,$scope,$attrs){ctrl.setNumPages=$attrs.numPages?$parse($attrs.numPages).assign:angular.noop,ctrl.ngModelCtrl={$setViewValue:angular.noop},ctrl._watchers=[],ctrl.init=function(ngModelCtrl,config){ctrl.ngModelCtrl=ngModelCtrl,ctrl.config=config,ngModelCtrl.$render=function(){ctrl.render()},$attrs.itemsPerPage?ctrl._watchers.push($scope.$parent.$watch($attrs.itemsPerPage,(function(value){ctrl.itemsPerPage=parseInt(value,10),$scope.totalPages=ctrl.calculateTotalPages(),ctrl.updatePage()}))):ctrl.itemsPerPage=config.itemsPerPage,$scope.$watch("totalItems",(function(newTotal,oldTotal){(angular.isDefined(newTotal)||newTotal!==oldTotal)&&($scope.totalPages=ctrl.calculateTotalPages(),ctrl.updatePage())}))},ctrl.calculateTotalPages=function(){var totalPages=ctrl.itemsPerPage<1?1:Math.ceil($scope.totalItems/ctrl.itemsPerPage);return Math.max(totalPages||0,1)},ctrl.render=function(){$scope.page=parseInt(ctrl.ngModelCtrl.$viewValue,10)||1},$scope.selectPage=function(page,evt){var clickAllowed;evt&&evt.preventDefault(),(!$scope.ngDisabled||!evt)&&$scope.page!==page&&page>0&&page<=$scope.totalPages&&(evt&&evt.target&&evt.target.blur(),ctrl.ngModelCtrl.$setViewValue(page),ctrl.ngModelCtrl.$render())},$scope.getText=function(key){return $scope[key+"Text"]||ctrl.config[key+"Text"]},$scope.noPrevious=function(){return 1===$scope.page},$scope.noNext=function(){return $scope.page===$scope.totalPages},ctrl.updatePage=function(){ctrl.setNumPages($scope.$parent,$scope.totalPages),$scope.page>$scope.totalPages?$scope.selectPage($scope.totalPages):ctrl.ngModelCtrl.$render()},$scope.$on("$destroy",(function(){for(;ctrl._watchers.length;)ctrl._watchers.shift()()}))}}}]),angular.module("ui.bootstrap.pager",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPagerController",["$scope","$attrs","uibPaging","uibPagerConfig",function($scope,$attrs,uibPaging,uibPagerConfig){$scope.align=angular.isDefined($attrs.align)?$scope.$parent.$eval($attrs.align):uibPagerConfig.align,uibPaging.create(this,$scope,$attrs)}]).constant("uibPagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("uibPager",["uibPagerConfig",function(uibPagerConfig){return{scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["uibPager","?ngModel"],restrict:"A",controller:"UibPagerController",controllerAs:"pager",templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/pager/pager.html"},link:function(scope,element,attrs,ctrls){element.addClass("pager");var paginationCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl&&paginationCtrl.init(ngModelCtrl,uibPagerConfig)}}}]),angular.module("ui.bootstrap.pagination",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPaginationController",["$scope","$attrs","$parse","uibPaging","uibPaginationConfig",function($scope,$attrs,$parse,uibPaging,uibPaginationConfig){var ctrl=this,maxSize=angular.isDefined($attrs.maxSize)?$scope.$parent.$eval($attrs.maxSize):uibPaginationConfig.maxSize,rotate=angular.isDefined($attrs.rotate)?$scope.$parent.$eval($attrs.rotate):uibPaginationConfig.rotate,forceEllipses=angular.isDefined($attrs.forceEllipses)?$scope.$parent.$eval($attrs.forceEllipses):uibPaginationConfig.forceEllipses,boundaryLinkNumbers=angular.isDefined($attrs.boundaryLinkNumbers)?$scope.$parent.$eval($attrs.boundaryLinkNumbers):uibPaginationConfig.boundaryLinkNumbers,pageLabel=angular.isDefined($attrs.pageLabel)?function(idx){return $scope.$parent.$eval($attrs.pageLabel,{$page:idx})}:angular.identity;function makePage(number,text,isActive){return{number:number,text:text,active:isActive}}function getPages(currentPage,totalPages){var pages=[],startPage=1,endPage=totalPages,isMaxSized=angular.isDefined(maxSize)&&maxSize<totalPages;isMaxSized&&(rotate?(endPage=(startPage=Math.max(currentPage-Math.floor(maxSize/2),1))+maxSize-1)>totalPages&&(startPage=(endPage=totalPages)-maxSize+1):(startPage=(Math.ceil(currentPage/maxSize)-1)*maxSize+1,endPage=Math.min(startPage+maxSize-1,totalPages)));for(var number=startPage;number<=endPage;number++){var page=makePage(number,pageLabel(number),number===currentPage);pages.push(page)}if(isMaxSized&&maxSize>0&&(!rotate||forceEllipses||boundaryLinkNumbers)){if(startPage>1){if(!boundaryLinkNumbers||startPage>3){var previousPageSet=makePage(startPage-1,"...",!1);pages.unshift(previousPageSet)}if(boundaryLinkNumbers){if(3===startPage){var secondPageLink=makePage(2,"2",!1);pages.unshift(secondPageLink)}var firstPageLink=makePage(1,"1",!1);pages.unshift(firstPageLink)}}if(endPage<totalPages){if(!boundaryLinkNumbers||endPage<totalPages-2){var nextPageSet=makePage(endPage+1,"...",!1);pages.push(nextPageSet)}if(boundaryLinkNumbers){if(endPage===totalPages-2){var secondToLastPageLink=makePage(totalPages-1,totalPages-1,!1);pages.push(secondToLastPageLink)}var lastPageLink=makePage(totalPages,totalPages,!1);pages.push(lastPageLink)}}}return pages}$scope.boundaryLinks=angular.isDefined($attrs.boundaryLinks)?$scope.$parent.$eval($attrs.boundaryLinks):uibPaginationConfig.boundaryLinks,$scope.directionLinks=angular.isDefined($attrs.directionLinks)?$scope.$parent.$eval($attrs.directionLinks):uibPaginationConfig.directionLinks,$attrs.$set("role","menu"),uibPaging.create(this,$scope,$attrs),$attrs.maxSize&&ctrl._watchers.push($scope.$parent.$watch($parse($attrs.maxSize),(function(value){maxSize=parseInt(value,10),ctrl.render()})));var originalRender=this.render;this.render=function(){originalRender(),$scope.page>0&&$scope.page<=$scope.totalPages&&($scope.pages=getPages($scope.page,$scope.totalPages))}}]).constant("uibPaginationConfig",{itemsPerPage:10,boundaryLinks:!1,boundaryLinkNumbers:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0,forceEllipses:!1}).directive("uibPagination",["$parse","uibPaginationConfig",function($parse,uibPaginationConfig){return{scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["uibPagination","?ngModel"],restrict:"A",controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/pagination/pagination.html"},link:function(scope,element,attrs,ctrls){element.addClass("pagination");var paginationCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl&&paginationCtrl.init(ngModelCtrl,uibPaginationConfig)}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.stackedMap"]).provider("$uibTooltip",(function(){var defaultOptions={placement:"top",placementClassPrefix:"",animation:!0,popupDelay:0,popupCloseDelay:0,useContentExp:!1},triggerMap={mouseenter:"mouseleave",click:"click",outsideClick:"outsideClick",focus:"blur",none:""},globalOptions={};function snake_case(name){var regexp=/[A-Z]/g,separator="-";return name.replace(regexp,(function(letter,pos){return(pos?"-":"")+letter.toLowerCase()}))}this.options=function(value){angular.extend(globalOptions,value)},this.setTriggers=function setTriggers(triggers){angular.extend(triggerMap,triggers)},this.$get=["$window","$compile","$timeout","$document","$uibPosition","$interpolate","$rootScope","$parse","$$stackedMap",function($window,$compile,$timeout,$document,$position,$interpolate,$rootScope,$parse,$$stackedMap){var openedTooltips=$$stackedMap.createNew();function keypressListener(e){if(27===e.which){var last=openedTooltips.top();last&&(last.value.close(),last=null)}}return $document.on("keyup",keypressListener),$rootScope.$on("$destroy",(function(){$document.off("keyup",keypressListener)})),function $tooltip(ttType,prefix,defaultTriggerShow,options){function getTriggers(trigger){var show=(trigger||options.trigger||defaultTriggerShow).split(" "),hide=show.map((function(trigger){return triggerMap[trigger]||trigger}));return{show:show,hide:hide}}options=angular.extend({},defaultOptions,globalOptions,options);var directiveName=snake_case(ttType),startSym=$interpolate.startSymbol(),endSym=$interpolate.endSymbol(),template="<div "+directiveName+'-popup uib-title="'+startSym+"title"+endSym+'" '+(options.useContentExp?'content-exp="contentExp()" ':'content="'+startSym+"content"+endSym+'" ')+'origin-scope="origScope" class="uib-position-measure '+prefix+'" tooltip-animation-class="fade"uib-tooltip-classes ng-class="{ in: isOpen }" ></div>';return{compile:function(tElem,tAttrs){var tooltipLinker=$compile(template);return function link(scope,element,attrs,tooltipCtrl){var tooltip,tooltipLinkedScope,transitionTimeout,showTimeout,hideTimeout,positionTimeout,adjustmentTimeout,appendToBody=!!angular.isDefined(options.appendToBody)&&options.appendToBody,triggers=getTriggers(void 0),hasEnableExp=angular.isDefined(attrs[prefix+"Enable"]),ttScope=scope.$new(!0),repositionScheduled=!1,isOpenParse=!!angular.isDefined(attrs[prefix+"IsOpen"])&&$parse(attrs[prefix+"IsOpen"]),contentParse=!!options.useContentExp&&$parse(attrs[ttType]),observers=[],lastPlacement,positionTooltip=function(){tooltip&&tooltip.html()&&(positionTimeout||(positionTimeout=$timeout((function(){var ttPosition=$position.positionElements(element,tooltip,ttScope.placement,appendToBody),initialHeight=angular.isDefined(tooltip.offsetHeight)?tooltip.offsetHeight:tooltip.prop("offsetHeight"),elementPos=appendToBody?$position.offset(element):$position.position(element);tooltip.css({top:ttPosition.top+"px",left:ttPosition.left+"px"});var placementClasses=ttPosition.placement.split("-");tooltip.hasClass(placementClasses[0])||(tooltip.removeClass(lastPlacement.split("-")[0]),tooltip.addClass(placementClasses[0])),tooltip.hasClass(options.placementClassPrefix+ttPosition.placement)||(tooltip.removeClass(options.placementClassPrefix+lastPlacement),tooltip.addClass(options.placementClassPrefix+ttPosition.placement)),adjustmentTimeout=$timeout((function(){var currentHeight=angular.isDefined(tooltip.offsetHeight)?tooltip.offsetHeight:tooltip.prop("offsetHeight"),adjustment=$position.adjustTop(placementClasses,elementPos,initialHeight,currentHeight);adjustment&&tooltip.css(adjustment),adjustmentTimeout=null}),0,!1),tooltip.hasClass("uib-position-measure")?($position.positionArrow(tooltip,ttPosition.placement),tooltip.removeClass("uib-position-measure")):lastPlacement!==ttPosition.placement&&$position.positionArrow(tooltip,ttPosition.placement),lastPlacement=ttPosition.placement,positionTimeout=null}),0,!1)))};function toggleTooltipBind(){ttScope.isOpen?hideTooltipBind():showTooltipBind()}function showTooltipBind(){hasEnableExp&&!scope.$eval(attrs[prefix+"Enable"])||(cancelHide(),prepareTooltip(),ttScope.popupDelay?showTimeout||(showTimeout=$timeout(show,ttScope.popupDelay,!1)):show())}function hideTooltipBind(){cancelShow(),ttScope.popupCloseDelay?hideTimeout||(hideTimeout=$timeout(hide,ttScope.popupCloseDelay,!1)):hide()}function show(){if(cancelShow(),cancelHide(),!ttScope.content)return angular.noop;createTooltip(),ttScope.$evalAsync((function(){ttScope.isOpen=!0,assignIsOpen(!0),positionTooltip()}))}function cancelShow(){showTimeout&&($timeout.cancel(showTimeout),showTimeout=null),positionTimeout&&($timeout.cancel(positionTimeout),positionTimeout=null)}function hide(){ttScope&&ttScope.$evalAsync((function(){ttScope&&(ttScope.isOpen=!1,assignIsOpen(!1),ttScope.animation?transitionTimeout||(transitionTimeout=$timeout(removeTooltip,150,!1)):removeTooltip())}))}function cancelHide(){hideTimeout&&($timeout.cancel(hideTimeout),hideTimeout=null),transitionTimeout&&($timeout.cancel(transitionTimeout),transitionTimeout=null)}function createTooltip(){tooltip||(tooltipLinkedScope=ttScope.$new(),tooltip=tooltipLinker(tooltipLinkedScope,(function(tooltip){appendToBody?$document.find("body").append(tooltip):element.after(tooltip)})),openedTooltips.add(ttScope,{close:hide}),prepObservers())}function removeTooltip(){cancelShow(),cancelHide(),unregisterObservers(),tooltip&&(tooltip.remove(),tooltip=null,adjustmentTimeout&&$timeout.cancel(adjustmentTimeout)),openedTooltips.remove(ttScope),tooltipLinkedScope&&(tooltipLinkedScope.$destroy(),tooltipLinkedScope=null)}function prepareTooltip(){ttScope.title=attrs[prefix+"Title"],ttScope.content=contentParse?contentParse(scope):attrs[ttType],ttScope.popupClass=attrs[prefix+"Class"],ttScope.placement=angular.isDefined(attrs[prefix+"Placement"])?attrs[prefix+"Placement"]:options.placement;var placement=$position.parsePlacement(ttScope.placement);lastPlacement=placement[1]?placement[0]+"-"+placement[1]:placement[0];var delay=parseInt(attrs[prefix+"PopupDelay"],10),closeDelay=parseInt(attrs[prefix+"PopupCloseDelay"],10);ttScope.popupDelay=isNaN(delay)?options.popupDelay:delay,ttScope.popupCloseDelay=isNaN(closeDelay)?options.popupCloseDelay:closeDelay}function assignIsOpen(isOpen){isOpenParse&&angular.isFunction(isOpenParse.assign)&&isOpenParse.assign(scope,isOpen)}function prepObservers(){observers.length=0,contentParse?(observers.push(scope.$watch(contentParse,(function(val){ttScope.content=val,!val&&ttScope.isOpen&&hide()}))),observers.push(tooltipLinkedScope.$watch((function(){repositionScheduled||(repositionScheduled=!0,tooltipLinkedScope.$$postDigest((function(){repositionScheduled=!1,ttScope&&ttScope.isOpen&&positionTooltip()})))})))):observers.push(attrs.$observe(ttType,(function(val){ttScope.content=val,!val&&ttScope.isOpen?hide():positionTooltip()}))),observers.push(attrs.$observe(prefix+"Title",(function(val){ttScope.title=val,ttScope.isOpen&&positionTooltip()}))),observers.push(attrs.$observe(prefix+"Placement",(function(val){ttScope.placement=val||options.placement,ttScope.isOpen&&positionTooltip()})))}function unregisterObservers(){observers.length&&(angular.forEach(observers,(function(observer){observer()})),observers.length=0)}function bodyHideTooltipBind(e){ttScope&&ttScope.isOpen&&tooltip&&(element[0].contains(e.target)||tooltip[0].contains(e.target)||hideTooltipBind())}function hideOnEscapeKey(e){27===e.which&&hideTooltipBind()}ttScope.origScope=scope,ttScope.isOpen=!1,ttScope.contentExp=function(){return ttScope.content},attrs.$observe("disabled",(function(val){val&&cancelShow(),val&&ttScope.isOpen&&hide()})),isOpenParse&&scope.$watch(isOpenParse,(function(val){ttScope&&!val===ttScope.isOpen&&toggleTooltipBind()}));var unregisterTriggers=function(){triggers.show.forEach((function(trigger){"outsideClick"===trigger?element.off("click",toggleTooltipBind):(element.off(trigger,showTooltipBind),element.off(trigger,toggleTooltipBind)),element.off("keypress",hideOnEscapeKey)})),triggers.hide.forEach((function(trigger){"outsideClick"===trigger?$document.off("click",bodyHideTooltipBind):element.off(trigger,hideTooltipBind)}))};function prepTriggers(){var showTriggers=[],hideTriggers=[],val=scope.$eval(attrs[prefix+"Trigger"]);unregisterTriggers(),angular.isObject(val)?(Object.keys(val).forEach((function(key){showTriggers.push(key),hideTriggers.push(val[key])})),triggers={show:showTriggers,hide:hideTriggers}):triggers=getTriggers(val),"none"!==triggers.show&&triggers.show.forEach((function(trigger,idx){"outsideClick"===trigger?(element.on("click",toggleTooltipBind),$document.on("click",bodyHideTooltipBind)):trigger===triggers.hide[idx]?element.on(trigger,toggleTooltipBind):trigger&&(element.on(trigger,showTooltipBind),element.on(triggers.hide[idx],hideTooltipBind)),element.on("keypress",hideOnEscapeKey)}))}prepTriggers();var animation=scope.$eval(attrs[prefix+"Animation"]),appendToBodyVal;ttScope.animation=angular.isDefined(animation)?!!animation:options.animation;var appendKey=prefix+"AppendToBody";appendToBodyVal=appendKey in attrs&&void 0===attrs[appendKey]||scope.$eval(attrs[appendKey]),appendToBody=angular.isDefined(appendToBodyVal)?appendToBodyVal:appendToBody,scope.$on("$destroy",(function onDestroyTooltip(){unregisterTriggers(),removeTooltip(),ttScope=null}))}}}}}]})).directive("uibTooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function($animate,$sce,$compile,$templateRequest){return{link:function(scope,elem,attrs){var origScope=scope.$eval(attrs.tooltipTemplateTranscludeScope),changeCounter=0,currentScope,previousElement,currentElement,cleanupLastIncludeContent=function(){previousElement&&(previousElement.remove(),previousElement=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentElement&&($animate.leave(currentElement).then((function(){previousElement=null})),previousElement=currentElement,currentElement=null)};scope.$watch($sce.parseAsResourceUrl(attrs.uibTooltipTemplateTransclude),(function(src){var thisChangeId=++changeCounter;src?($templateRequest(src,!0).then((function(response){if(thisChangeId===changeCounter){var newScope=origScope.$new(),template,clone=$compile(response)(newScope,(function(clone){cleanupLastIncludeContent(),$animate.enter(clone,elem)}));currentElement=clone,(currentScope=newScope).$emit("$includeContentLoaded",src)}}),(function(){thisChangeId===changeCounter&&(cleanupLastIncludeContent(),scope.$emit("$includeContentError",src))})),scope.$emit("$includeContentRequested",src)):cleanupLastIncludeContent()})),scope.$on("$destroy",cleanupLastIncludeContent)}}}]).directive("uibTooltipClasses",["$uibPosition",function($uibPosition){return{restrict:"A",link:function(scope,element,attrs){if(scope.placement){var position=$uibPosition.parsePlacement(scope.placement);element.addClass(position[0])}scope.popupClass&&element.addClass(scope.popupClass),scope.animation&&element.addClass(attrs.tooltipAnimationClass)}}}]).directive("uibTooltipPopup",(function(){return{restrict:"A",scope:{content:"@"},templateUrl:"uib/template/tooltip/tooltip-popup.html"}})).directive("uibTooltip",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibTooltip","tooltip","mouseenter")}]).directive("uibTooltipTemplatePopup",(function(){return{restrict:"A",scope:{contentExp:"&",originScope:"&"},templateUrl:"uib/template/tooltip/tooltip-template-popup.html"}})).directive("uibTooltipTemplate",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibTooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("uibTooltipHtmlPopup",(function(){return{restrict:"A",scope:{contentExp:"&"},templateUrl:"uib/template/tooltip/tooltip-html-popup.html"}})).directive("uibTooltipHtml",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibTooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("uibPopoverTemplatePopup",(function(){return{restrict:"A",scope:{uibTitle:"@",contentExp:"&",originScope:"&"},templateUrl:"uib/template/popover/popover-template.html"}})).directive("uibPopoverTemplate",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibPopoverTemplate","popover","click",{useContentExp:!0})}]).directive("uibPopoverHtmlPopup",(function(){return{restrict:"A",scope:{contentExp:"&",uibTitle:"@"},templateUrl:"uib/template/popover/popover-html.html"}})).directive("uibPopoverHtml",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibPopoverHtml","popover","click",{useContentExp:!0})}]).directive("uibPopoverPopup",(function(){return{restrict:"A",scope:{uibTitle:"@",content:"@"},templateUrl:"uib/template/popover/popover.html"}})).directive("uibPopover",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibPopover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("uibProgressConfig",{animate:!0,max:100}).controller("UibProgressController",["$scope","$attrs","uibProgressConfig",function($scope,$attrs,progressConfig){var self=this,animate=angular.isDefined($attrs.animate)?$scope.$parent.$eval($attrs.animate):progressConfig.animate;function getMaxOrDefault(){return angular.isDefined($scope.maxParam)?$scope.maxParam:progressConfig.max}this.bars=[],$scope.max=getMaxOrDefault(),this.addBar=function(bar,element,attrs){animate||element.css({transition:"none"}),this.bars.push(bar),bar.max=getMaxOrDefault(),bar.title=attrs&&angular.isDefined(attrs.title)?attrs.title:"progressbar",bar.$watch("value",(function(value){bar.recalculatePercentage()})),bar.recalculatePercentage=function(){var totalPercentage=self.bars.reduce((function(total,bar){return bar.percent=+(100*bar.value/bar.max).toFixed(2),total+bar.percent}),0);totalPercentage>100&&(bar.percent-=totalPercentage-100)},bar.$on("$destroy",(function(){element=null,self.removeBar(bar)}))},this.removeBar=function(bar){this.bars.splice(this.bars.indexOf(bar),1),this.bars.forEach((function(bar){bar.recalculatePercentage()}))},$scope.$watch("maxParam",(function(maxParam){self.bars.forEach((function(bar){bar.max=getMaxOrDefault(),bar.recalculatePercentage()}))}))}]).directive("uibProgress",(function(){return{replace:!0,transclude:!0,controller:"UibProgressController",require:"uibProgress",scope:{maxParam:"=?max"},templateUrl:"uib/template/progressbar/progress.html"}})).directive("uibBar",(function(){return{replace:!0,transclude:!0,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"uib/template/progressbar/bar.html",link:function(scope,element,attrs,progressCtrl){progressCtrl.addBar(scope,element,attrs)}}})).directive("uibProgressbar",(function(){return{replace:!0,transclude:!0,controller:"UibProgressController",scope:{value:"=",maxParam:"=?max",type:"@"},templateUrl:"uib/template/progressbar/progressbar.html",link:function(scope,element,attrs,progressCtrl){progressCtrl.addBar(scope,angular.element(element.children()[0]),{title:attrs.title})}}})),angular.module("ui.bootstrap.rating",[]).constant("uibRatingConfig",{max:5,stateOn:null,stateOff:null,enableReset:!0,titles:["one","two","three","four","five"]}).controller("UibRatingController",["$scope","$attrs","uibRatingConfig",function($scope,$attrs,ratingConfig){var ngModelCtrl={$setViewValue:angular.noop},self=this;this.init=function(ngModelCtrl_){(ngModelCtrl=ngModelCtrl_).$render=this.render,ngModelCtrl.$formatters.push((function(value){return angular.isNumber(value)&&value<<0!==value&&(value=Math.round(value)),value})),this.stateOn=angular.isDefined($attrs.stateOn)?$scope.$parent.$eval($attrs.stateOn):ratingConfig.stateOn,this.stateOff=angular.isDefined($attrs.stateOff)?$scope.$parent.$eval($attrs.stateOff):ratingConfig.stateOff,this.enableReset=angular.isDefined($attrs.enableReset)?$scope.$parent.$eval($attrs.enableReset):ratingConfig.enableReset;var tmpTitles=angular.isDefined($attrs.titles)?$scope.$parent.$eval($attrs.titles):ratingConfig.titles;this.titles=angular.isArray(tmpTitles)&&tmpTitles.length>0?tmpTitles:ratingConfig.titles;var ratingStates=angular.isDefined($attrs.ratingStates)?$scope.$parent.$eval($attrs.ratingStates):new Array(angular.isDefined($attrs.max)?$scope.$parent.$eval($attrs.max):ratingConfig.max);$scope.range=this.buildTemplateObjects(ratingStates)},this.buildTemplateObjects=function(states){for(var i=0,n=states.length;i<n;i++)states[i]=angular.extend({index:i},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(i)},states[i]);return states},this.getTitle=function(index){return index>=this.titles.length?index+1:this.titles[index]},$scope.rate=function(value){if(!$scope.readonly&&value>=0&&value<=$scope.range.length){var newViewValue=self.enableReset&&ngModelCtrl.$viewValue===value?0:value;ngModelCtrl.$setViewValue(newViewValue),ngModelCtrl.$render()}},$scope.enter=function(value){$scope.readonly||($scope.value=value),$scope.onHover({value:value})},$scope.reset=function(){$scope.value=ngModelCtrl.$viewValue,$scope.onLeave()},$scope.onKeydown=function(evt){/(37|38|39|40)/.test(evt.which)&&(evt.preventDefault(),evt.stopPropagation(),$scope.rate($scope.value+(38===evt.which||39===evt.which?1:-1)))},this.render=function(){$scope.value=ngModelCtrl.$viewValue,$scope.title=self.getTitle($scope.value-1)}}]).directive("uibRating",(function(){return{require:["uibRating","ngModel"],restrict:"A",scope:{readonly:"=?readOnly",onHover:"&",onLeave:"&"},controller:"UibRatingController",templateUrl:"uib/template/rating/rating.html",link:function(scope,element,attrs,ctrls){var ratingCtrl=ctrls[0],ngModelCtrl=ctrls[1];ratingCtrl.init(ngModelCtrl)}}})),angular.module("ui.bootstrap.tabs",[]).controller("UibTabsetController",["$scope",function($scope){var ctrl=this,oldIndex,destroyed;function findTabIndex(index){for(var i=0;i<ctrl.tabs.length;i++)if(ctrl.tabs[i].index===index)return i}ctrl.tabs=[],ctrl.select=function(index,evt){if(!destroyed){var previousIndex=findTabIndex(oldIndex),previousSelected=ctrl.tabs[previousIndex];if(previousSelected){if(previousSelected.tab.onDeselect({$event:evt,$selectedIndex:index}),evt&&evt.isDefaultPrevented())return;previousSelected.tab.active=!1}var selected=ctrl.tabs[index];selected?(selected.tab.onSelect({$event:evt}),selected.tab.active=!0,ctrl.active=selected.index,oldIndex=selected.index):!selected&&angular.isDefined(oldIndex)&&(ctrl.active=null,oldIndex=null)}},ctrl.addTab=function addTab(tab){if(ctrl.tabs.push({tab:tab,index:tab.index}),ctrl.tabs.sort((function(t1,t2){return t1.index>t2.index?1:t1.index<t2.index?-1:0})),tab.index===ctrl.active||!angular.isDefined(ctrl.active)&&1===ctrl.tabs.length){var newActiveIndex=findTabIndex(tab.index);ctrl.select(newActiveIndex)}},ctrl.removeTab=function removeTab(tab){for(var index,i=0;i<ctrl.tabs.length;i++)if(ctrl.tabs[i].tab===tab){index=i;break}if(ctrl.tabs[index].index===ctrl.active){var newActiveTabIndex=index===ctrl.tabs.length-1?index-1:index+1%ctrl.tabs.length;ctrl.select(newActiveTabIndex)}ctrl.tabs.splice(index,1)},$scope.$watch("tabset.active",(function(val){angular.isDefined(val)&&val!==oldIndex&&ctrl.select(findTabIndex(val))})),$scope.$on("$destroy",(function(){destroyed=!0}))}]).directive("uibTabset",(function(){return{transclude:!0,replace:!0,scope:{},bindToController:{active:"=?",type:"@"},controller:"UibTabsetController",controllerAs:"tabset",templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/tabs/tabset.html"},link:function(scope,element,attrs){scope.vertical=!!angular.isDefined(attrs.vertical)&&scope.$parent.$eval(attrs.vertical),scope.justified=!!angular.isDefined(attrs.justified)&&scope.$parent.$eval(attrs.justified)}}})).directive("uibTab",["$parse",function($parse){return{require:"^uibTabset",replace:!0,templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/tabs/tab.html"},transclude:!0,scope:{heading:"@",index:"=?",classes:"@?",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},controllerAs:"tab",link:function(scope,elm,attrs,tabsetCtrl,transclude){scope.disabled=!1,attrs.disable&&scope.$parent.$watch($parse(attrs.disable),(function(value){scope.disabled=!!value})),angular.isUndefined(attrs.index)&&(tabsetCtrl.tabs&&tabsetCtrl.tabs.length?scope.index=Math.max.apply(null,tabsetCtrl.tabs.map((function(t){return t.index})))+1:scope.index=0),angular.isUndefined(attrs.classes)&&(scope.classes=""),scope.select=function(evt){if(!scope.disabled){for(var index,i=0;i<tabsetCtrl.tabs.length;i++)if(tabsetCtrl.tabs[i].tab===scope){index=i;break}tabsetCtrl.select(index,evt)}},tabsetCtrl.addTab(scope),scope.$on("$destroy",(function(){tabsetCtrl.removeTab(scope)})),scope.$transcludeFn=transclude}}}]).directive("uibTabHeadingTransclude",(function(){return{restrict:"A",require:"^uibTab",link:function(scope,elm){scope.$watch("headingElement",(function updateHeadingElement(heading){heading&&(elm.html(""),elm.append(heading))}))}}})).directive("uibTabContentTransclude",(function(){return{restrict:"A",require:"^uibTabset",link:function(scope,elm,attrs){var tab=scope.$eval(attrs.uibTabContentTransclude).tab;tab.$transcludeFn(tab.$parent,(function(contents){angular.forEach(contents,(function(node){isTabHeading(node)?tab.headingElement=node:elm.append(node)}))}))}};function isTabHeading(node){return node.tagName&&(node.hasAttribute("uib-tab-heading")||node.hasAttribute("data-uib-tab-heading")||node.hasAttribute("x-uib-tab-heading")||"uib-tab-heading"===node.tagName.toLowerCase()||"data-uib-tab-heading"===node.tagName.toLowerCase()||"x-uib-tab-heading"===node.tagName.toLowerCase()||"uib:tab-heading"===node.tagName.toLowerCase())}})),angular.module("ui.bootstrap.timepicker",[]).constant("uibTimepickerConfig",{hourStep:1,minuteStep:1,secondStep:1,showMeridian:!0,showSeconds:!1,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0,showSpinners:!0,templateUrl:"uib/template/timepicker/timepicker.html"}).controller("UibTimepickerController",["$scope","$element","$attrs","$parse","$log","$locale","uibTimepickerConfig",function($scope,$element,$attrs,$parse,$log,$locale,timepickerConfig){var hoursModelCtrl,minutesModelCtrl,secondsModelCtrl,selected=new Date,watchers=[],ngModelCtrl={$setViewValue:angular.noop},meridians=angular.isDefined($attrs.meridians)?$scope.$parent.$eval($attrs.meridians):timepickerConfig.meridians||$locale.DATETIME_FORMATS.AMPMS,padHours=!angular.isDefined($attrs.padHours)||$scope.$parent.$eval($attrs.padHours);$scope.tabindex=angular.isDefined($attrs.tabindex)?$attrs.tabindex:0,$element.removeAttr("tabindex"),this.init=function(ngModelCtrl_,inputs){(ngModelCtrl=ngModelCtrl_).$render=this.render,ngModelCtrl.$formatters.unshift((function(modelValue){return modelValue?new Date(modelValue):null}));var hoursInputEl=inputs.eq(0),minutesInputEl=inputs.eq(1),secondsInputEl=inputs.eq(2),mousewheel,arrowkeys;hoursModelCtrl=hoursInputEl.controller("ngModel"),minutesModelCtrl=minutesInputEl.controller("ngModel"),secondsModelCtrl=secondsInputEl.controller("ngModel"),(angular.isDefined($attrs.mousewheel)?$scope.$parent.$eval($attrs.mousewheel):timepickerConfig.mousewheel)&&this.setupMousewheelEvents(hoursInputEl,minutesInputEl,secondsInputEl),(angular.isDefined($attrs.arrowkeys)?$scope.$parent.$eval($attrs.arrowkeys):timepickerConfig.arrowkeys)&&this.setupArrowkeyEvents(hoursInputEl,minutesInputEl,secondsInputEl),$scope.readonlyInput=angular.isDefined($attrs.readonlyInput)?$scope.$parent.$eval($attrs.readonlyInput):timepickerConfig.readonlyInput,this.setupInputEvents(hoursInputEl,minutesInputEl,secondsInputEl)};var hourStep=timepickerConfig.hourStep;$attrs.hourStep&&watchers.push($scope.$parent.$watch($parse($attrs.hourStep),(function(value){hourStep=+value})));var minuteStep=timepickerConfig.minuteStep,min,max;$attrs.minuteStep&&watchers.push($scope.$parent.$watch($parse($attrs.minuteStep),(function(value){minuteStep=+value}))),watchers.push($scope.$parent.$watch($parse($attrs.min),(function(value){var dt=new Date(value);min=isNaN(dt)?void 0:dt}))),watchers.push($scope.$parent.$watch($parse($attrs.max),(function(value){var dt=new Date(value);max=isNaN(dt)?void 0:dt})));var disabled=!1;$attrs.ngDisabled&&watchers.push($scope.$parent.$watch($parse($attrs.ngDisabled),(function(value){disabled=value}))),$scope.noIncrementHours=function(){var incrementedSelected=addMinutes(selected,60*hourStep);return disabled||incrementedSelected>max||incrementedSelected<selected&&incrementedSelected<min},$scope.noDecrementHours=function(){var decrementedSelected=addMinutes(selected,60*-hourStep);return disabled||decrementedSelected<min||decrementedSelected>selected&&decrementedSelected>max},$scope.noIncrementMinutes=function(){var incrementedSelected=addMinutes(selected,minuteStep);return disabled||incrementedSelected>max||incrementedSelected<selected&&incrementedSelected<min},$scope.noDecrementMinutes=function(){var decrementedSelected=addMinutes(selected,-minuteStep);return disabled||decrementedSelected<min||decrementedSelected>selected&&decrementedSelected>max},$scope.noIncrementSeconds=function(){var incrementedSelected=addSeconds(selected,secondStep);return disabled||incrementedSelected>max||incrementedSelected<selected&&incrementedSelected<min},$scope.noDecrementSeconds=function(){var decrementedSelected=addSeconds(selected,-secondStep);return disabled||decrementedSelected<min||decrementedSelected>selected&&decrementedSelected>max},$scope.noToggleMeridian=function(){return selected.getHours()<12?disabled||addMinutes(selected,720)>max:disabled||addMinutes(selected,-720)<min};var secondStep=timepickerConfig.secondStep;function getHoursFromTemplate(){var hours=+$scope.hours,valid;if(($scope.showMeridian?hours>0&&hours<13:hours>=0&&hours<24)&&""!==$scope.hours)return $scope.showMeridian&&(12===hours&&(hours=0),$scope.meridian===meridians[1]&&(hours+=12)),hours}function getMinutesFromTemplate(){var minutes=+$scope.minutes,valid;if(minutes>=0&&minutes<60&&""!==$scope.minutes)return minutes}function getSecondsFromTemplate(){var seconds=+$scope.seconds;return seconds>=0&&seconds<60?seconds:void 0}function pad(value,noPad){return null===value?"":angular.isDefined(value)&&value.toString().length<2&&!noPad?"0"+value:value.toString()}function refresh(keyboardChange){makeValid(),ngModelCtrl.$setViewValue(new Date(selected)),updateTemplate(keyboardChange)}function makeValid(){hoursModelCtrl&&hoursModelCtrl.$setValidity("hours",!0),minutesModelCtrl&&minutesModelCtrl.$setValidity("minutes",!0),secondsModelCtrl&&secondsModelCtrl.$setValidity("seconds",!0),ngModelCtrl.$setValidity("time",!0),$scope.invalidHours=!1,$scope.invalidMinutes=!1,$scope.invalidSeconds=!1}function updateTemplate(keyboardChange){if(ngModelCtrl.$modelValue){var hours=selected.getHours(),minutes=selected.getMinutes(),seconds=selected.getSeconds();$scope.showMeridian&&(hours=0===hours||12===hours?12:hours%12),$scope.hours="h"===keyboardChange?hours:pad(hours,!padHours),"m"!==keyboardChange&&($scope.minutes=pad(minutes)),$scope.meridian=selected.getHours()<12?meridians[0]:meridians[1],"s"!==keyboardChange&&($scope.seconds=pad(seconds)),$scope.meridian=selected.getHours()<12?meridians[0]:meridians[1]}else $scope.hours=null,$scope.minutes=null,$scope.seconds=null,$scope.meridian=meridians[0]}function addSecondsToSelected(seconds){selected=addSeconds(selected,seconds),refresh()}function addMinutes(selected,minutes){return addSeconds(selected,60*minutes)}function addSeconds(date,seconds){var dt=new Date(date.getTime()+1e3*seconds),newDate=new Date(date);return newDate.setHours(dt.getHours(),dt.getMinutes(),dt.getSeconds()),newDate}function modelIsEmpty(){return(null===$scope.hours||""===$scope.hours)&&(null===$scope.minutes||""===$scope.minutes)&&(!$scope.showSeconds||$scope.showSeconds&&(null===$scope.seconds||""===$scope.seconds))}$attrs.secondStep&&watchers.push($scope.$parent.$watch($parse($attrs.secondStep),(function(value){secondStep=+value}))),$scope.showSeconds=timepickerConfig.showSeconds,$attrs.showSeconds&&watchers.push($scope.$parent.$watch($parse($attrs.showSeconds),(function(value){$scope.showSeconds=!!value}))),$scope.showMeridian=timepickerConfig.showMeridian,$attrs.showMeridian&&watchers.push($scope.$parent.$watch($parse($attrs.showMeridian),(function(value){if($scope.showMeridian=!!value,ngModelCtrl.$error.time){var hours=getHoursFromTemplate(),minutes=getMinutesFromTemplate();angular.isDefined(hours)&&angular.isDefined(minutes)&&(selected.setHours(hours),refresh())}else updateTemplate()}))),this.setupMousewheelEvents=function(hoursInputEl,minutesInputEl,secondsInputEl){var isScrollingUp=function(e){e.originalEvent&&(e=e.originalEvent);var delta=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||delta>0};hoursInputEl.on("mousewheel wheel",(function(e){disabled||$scope.$apply(isScrollingUp(e)?$scope.incrementHours():$scope.decrementHours()),e.preventDefault()})),minutesInputEl.on("mousewheel wheel",(function(e){disabled||$scope.$apply(isScrollingUp(e)?$scope.incrementMinutes():$scope.decrementMinutes()),e.preventDefault()})),secondsInputEl.on("mousewheel wheel",(function(e){disabled||$scope.$apply(isScrollingUp(e)?$scope.incrementSeconds():$scope.decrementSeconds()),e.preventDefault()}))},this.setupArrowkeyEvents=function(hoursInputEl,minutesInputEl,secondsInputEl){hoursInputEl.on("keydown",(function(e){disabled||(38===e.which?(e.preventDefault(),$scope.incrementHours(),$scope.$apply()):40===e.which&&(e.preventDefault(),$scope.decrementHours(),$scope.$apply()))})),minutesInputEl.on("keydown",(function(e){disabled||(38===e.which?(e.preventDefault(),$scope.incrementMinutes(),$scope.$apply()):40===e.which&&(e.preventDefault(),$scope.decrementMinutes(),$scope.$apply()))})),secondsInputEl.on("keydown",(function(e){disabled||(38===e.which?(e.preventDefault(),$scope.incrementSeconds(),$scope.$apply()):40===e.which&&(e.preventDefault(),$scope.decrementSeconds(),$scope.$apply()))}))},this.setupInputEvents=function(hoursInputEl,minutesInputEl,secondsInputEl){if($scope.readonlyInput)return $scope.updateHours=angular.noop,$scope.updateMinutes=angular.noop,void($scope.updateSeconds=angular.noop);var invalidate=function(invalidHours,invalidMinutes,invalidSeconds){ngModelCtrl.$setViewValue(null),ngModelCtrl.$setValidity("time",!1),angular.isDefined(invalidHours)&&($scope.invalidHours=invalidHours,hoursModelCtrl&&hoursModelCtrl.$setValidity("hours",!1)),angular.isDefined(invalidMinutes)&&($scope.invalidMinutes=invalidMinutes,minutesModelCtrl&&minutesModelCtrl.$setValidity("minutes",!1)),angular.isDefined(invalidSeconds)&&($scope.invalidSeconds=invalidSeconds,secondsModelCtrl&&secondsModelCtrl.$setValidity("seconds",!1))};$scope.updateHours=function(){var hours=getHoursFromTemplate(),minutes=getMinutesFromTemplate();ngModelCtrl.$setDirty(),angular.isDefined(hours)&&angular.isDefined(minutes)?(selected.setHours(hours),selected.setMinutes(minutes),selected<min||selected>max?invalidate(!0):refresh("h")):invalidate(!0)},hoursInputEl.on("blur",(function(e){ngModelCtrl.$setTouched(),modelIsEmpty()?makeValid():null===$scope.hours||""===$scope.hours?invalidate(!0):!$scope.invalidHours&&$scope.hours<10&&$scope.$apply((function(){$scope.hours=pad($scope.hours,!padHours)}))})),$scope.updateMinutes=function(){var minutes=getMinutesFromTemplate(),hours=getHoursFromTemplate();ngModelCtrl.$setDirty(),angular.isDefined(minutes)&&angular.isDefined(hours)?(selected.setHours(hours),selected.setMinutes(minutes),selected<min||selected>max?invalidate(void 0,!0):refresh("m")):invalidate(void 0,!0)},minutesInputEl.on("blur",(function(e){ngModelCtrl.$setTouched(),modelIsEmpty()?makeValid():null===$scope.minutes?invalidate(void 0,!0):!$scope.invalidMinutes&&$scope.minutes<10&&$scope.$apply((function(){$scope.minutes=pad($scope.minutes)}))})),$scope.updateSeconds=function(){var seconds=getSecondsFromTemplate();ngModelCtrl.$setDirty(),angular.isDefined(seconds)?(selected.setSeconds(seconds),refresh("s")):invalidate(void 0,void 0,!0)},secondsInputEl.on("blur",(function(e){modelIsEmpty()?makeValid():!$scope.invalidSeconds&&$scope.seconds<10&&$scope.$apply((function(){$scope.seconds=pad($scope.seconds)}))}))},this.render=function(){var date=ngModelCtrl.$viewValue;isNaN(date)?(ngModelCtrl.$setValidity("time",!1),$log.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(date&&(selected=date),selected<min||selected>max?(ngModelCtrl.$setValidity("time",!1),$scope.invalidHours=!0,$scope.invalidMinutes=!0):makeValid(),updateTemplate())},$scope.showSpinners=angular.isDefined($attrs.showSpinners)?$scope.$parent.$eval($attrs.showSpinners):timepickerConfig.showSpinners,$scope.incrementHours=function(){$scope.noIncrementHours()||addSecondsToSelected(60*hourStep*60)},$scope.decrementHours=function(){$scope.noDecrementHours()||addSecondsToSelected(60*-hourStep*60)},$scope.incrementMinutes=function(){$scope.noIncrementMinutes()||addSecondsToSelected(60*minuteStep)},$scope.decrementMinutes=function(){$scope.noDecrementMinutes()||addSecondsToSelected(60*-minuteStep)},$scope.incrementSeconds=function(){$scope.noIncrementSeconds()||addSecondsToSelected(secondStep)},$scope.decrementSeconds=function(){$scope.noDecrementSeconds()||addSecondsToSelected(-secondStep)},$scope.toggleMeridian=function(){var minutes=getMinutesFromTemplate(),hours=getHoursFromTemplate();$scope.noToggleMeridian()||(angular.isDefined(minutes)&&angular.isDefined(hours)?addSecondsToSelected(720*(selected.getHours()<12?60:-60)):$scope.meridian=$scope.meridian===meridians[0]?meridians[1]:meridians[0])},$scope.blur=function(){ngModelCtrl.$setTouched()},$scope.$on("$destroy",(function(){for(;watchers.length;)watchers.shift()()}))}]).directive("uibTimepicker",["uibTimepickerConfig",function(uibTimepickerConfig){return{require:["uibTimepicker","?^ngModel"],restrict:"A",controller:"UibTimepickerController",controllerAs:"timepicker",scope:{},templateUrl:function(element,attrs){return attrs.templateUrl||uibTimepickerConfig.templateUrl},link:function(scope,element,attrs,ctrls){var timepickerCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl&&timepickerCtrl.init(ngModelCtrl,element.find("input"))}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.debounce","ui.bootstrap.position"]).factory("uibTypeaheadParser",["$parse",function($parse){var TYPEAHEAD_REGEXP=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(input){var match=input.match(TYPEAHEAD_REGEXP);if(!match)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+input+'".');return{itemName:match[3],source:$parse(match[4]),viewMapper:$parse(match[2]||match[1]),modelMapper:$parse(match[1])}}}}]).controller("UibTypeaheadController",["$scope","$element","$attrs","$compile","$parse","$q","$timeout","$document","$window","$rootScope","$$debounce","$uibPosition","uibTypeaheadParser",function(originalScope,element,attrs,$compile,$parse,$q,$timeout,$document,$window,$rootScope,$$debounce,$position,typeaheadParser){var HOT_KEYS=[9,13,27,38,40],eventDebounceTime=200,modelCtrl,ngModelOptions,minLength=originalScope.$eval(attrs.typeaheadMinLength);minLength||0===minLength||(minLength=1),originalScope.$watch(attrs.typeaheadMinLength,(function(newVal){minLength=newVal||0===newVal?newVal:1}));var waitTime=originalScope.$eval(attrs.typeaheadWaitMs)||0,isEditable=!1!==originalScope.$eval(attrs.typeaheadEditable);originalScope.$watch(attrs.typeaheadEditable,(function(newVal){isEditable=!1!==newVal}));var isLoadingSetter=$parse(attrs.typeaheadLoading).assign||angular.noop,isSelectEvent=attrs.typeaheadShouldSelect?$parse(attrs.typeaheadShouldSelect):function(scope,vals){var evt=vals.$event;return 13===evt.which||9===evt.which},onSelectCallback=$parse(attrs.typeaheadOnSelect),isSelectOnBlur=!!angular.isDefined(attrs.typeaheadSelectOnBlur)&&originalScope.$eval(attrs.typeaheadSelectOnBlur),isNoResultsSetter=$parse(attrs.typeaheadNoResults).assign||angular.noop,inputFormatter=attrs.typeaheadInputFormatter?$parse(attrs.typeaheadInputFormatter):void 0,appendToBody=!!attrs.typeaheadAppendToBody&&originalScope.$eval(attrs.typeaheadAppendToBody),appendTo=attrs.typeaheadAppendTo?originalScope.$eval(attrs.typeaheadAppendTo):null,focusFirst=!1!==originalScope.$eval(attrs.typeaheadFocusFirst),selectOnExact=!!attrs.typeaheadSelectOnExact&&originalScope.$eval(attrs.typeaheadSelectOnExact),isOpenSetter=$parse(attrs.typeaheadIsOpen).assign||angular.noop,showHint=originalScope.$eval(attrs.typeaheadShowHint)||!1,parsedModel=$parse(attrs.ngModel),invokeModelSetter=$parse(attrs.ngModel+"($$$p)"),$setModelValue=function(scope,newValue){return angular.isFunction(parsedModel(originalScope))&&ngModelOptions.getOption("getterSetter")?invokeModelSetter(scope,{$$$p:newValue}):parsedModel.assign(scope,newValue)},parserResult=typeaheadParser.parse(attrs.uibTypeahead),hasFocus,selected,scope=originalScope.$new(),offDestroy=originalScope.$on("$destroy",(function(){scope.$destroy()}));scope.$on("$destroy",offDestroy);var popupId="typeahead-"+scope.$id+"-"+Math.floor(1e4*Math.random()),inputsContainer,hintInputElem;element.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":popupId}),showHint&&((inputsContainer=angular.element("<div></div>")).css("position","relative"),element.after(inputsContainer),(hintInputElem=element.clone()).attr("placeholder",""),hintInputElem.attr("tabindex","-1"),hintInputElem.val(""),hintInputElem.css({position:"absolute",top:"0px",left:"0px","border-color":"transparent","box-shadow":"none",opacity:1,background:"none 0% 0% / auto repeat scroll padding-box border-box rgb(255, 255, 255)",color:"#999"}),element.css({position:"relative","vertical-align":"top","background-color":"transparent"}),hintInputElem.attr("id")&&hintInputElem.removeAttr("id"),inputsContainer.append(hintInputElem),hintInputElem.after(element));var popUpEl=angular.element("<div uib-typeahead-popup></div>");popUpEl.attr({id:popupId,matches:"matches",active:"activeIdx",select:"select(activeIdx, evt)","move-in-progress":"moveInProgress",query:"query",position:"position","assign-is-open":"assignIsOpen(isOpen)",debounce:"debounceUpdate"}),angular.isDefined(attrs.typeaheadTemplateUrl)&&popUpEl.attr("template-url",attrs.typeaheadTemplateUrl),angular.isDefined(attrs.typeaheadPopupTemplateUrl)&&popUpEl.attr("popup-template-url",attrs.typeaheadPopupTemplateUrl);var resetHint=function(){showHint&&hintInputElem.val("")},resetMatches=function(){scope.matches=[],scope.activeIdx=-1,element.attr("aria-expanded",!1),resetHint()},getMatchId=function(index){return popupId+"-option-"+index};scope.$watch("activeIdx",(function(index){index<0?element.removeAttr("aria-activedescendant"):element.attr("aria-activedescendant",getMatchId(index))}));var inputIsExactMatch=function(inputValue,index){return!!(scope.matches.length>index&&inputValue)&&inputValue.toUpperCase()===scope.matches[index].label.toUpperCase()},getMatchesAsync=function(inputValue,evt){var locals={$viewValue:inputValue};isLoadingSetter(originalScope,!0),isNoResultsSetter(originalScope,!1),$q.when(parserResult.source(originalScope,locals)).then((function(matches){var onCurrentRequest=inputValue===modelCtrl.$viewValue;if(onCurrentRequest&&hasFocus)if(matches&&matches.length>0){scope.activeIdx=focusFirst?0:-1,isNoResultsSetter(originalScope,!1),scope.matches.length=0;for(var i=0;i<matches.length;i++)locals[parserResult.itemName]=matches[i],scope.matches.push({id:getMatchId(i),label:parserResult.viewMapper(scope,locals),model:matches[i]});if(scope.query=inputValue,recalculatePosition(),element.attr("aria-expanded",!0),selectOnExact&&1===scope.matches.length&&inputIsExactMatch(inputValue,0)&&(angular.isNumber(scope.debounceUpdate)||angular.isObject(scope.debounceUpdate)?$$debounce((function(){scope.select(0,evt)}),angular.isNumber(scope.debounceUpdate)?scope.debounceUpdate:scope.debounceUpdate.default):scope.select(0,evt)),showHint){var firstLabel=scope.matches[0].label;angular.isString(inputValue)&&inputValue.length>0&&firstLabel.slice(0,inputValue.length).toUpperCase()===inputValue.toUpperCase()?hintInputElem.val(inputValue+firstLabel.slice(inputValue.length)):hintInputElem.val("")}}else resetMatches(),isNoResultsSetter(originalScope,!0);onCurrentRequest&&isLoadingSetter(originalScope,!1)}),(function(){resetMatches(),isLoadingSetter(originalScope,!1),isNoResultsSetter(originalScope,!0)}))};appendToBody&&(angular.element($window).on("resize",fireRecalculating),$document.find("body").on("scroll",fireRecalculating));var debouncedRecalculate=$$debounce((function(){scope.matches.length&&recalculatePosition(),scope.moveInProgress=!1}),200),timeoutPromise;function fireRecalculating(){scope.moveInProgress||(scope.moveInProgress=!0,scope.$digest()),debouncedRecalculate()}function recalculatePosition(){scope.position=appendToBody?$position.offset(element):$position.position(element),scope.position.top+=element.prop("offsetHeight")}scope.moveInProgress=!1,scope.query=void 0;var scheduleSearchWithTimeout=function(inputValue){timeoutPromise=$timeout((function(){getMatchesAsync(inputValue)}),waitTime)},cancelPreviousTimeout=function(){timeoutPromise&&$timeout.cancel(timeoutPromise)};resetMatches(),scope.assignIsOpen=function(isOpen){isOpenSetter(originalScope,isOpen)},scope.select=function(activeIdx,evt){var locals={},model,item;selected=!0,locals[parserResult.itemName]=item=scope.matches[activeIdx].model,model=parserResult.modelMapper(originalScope,locals),$setModelValue(originalScope,model),modelCtrl.$setValidity("editable",!0),modelCtrl.$setValidity("parse",!0),onSelectCallback(originalScope,{$item:item,$model:model,$label:parserResult.viewMapper(originalScope,locals),$event:evt}),resetMatches(),!1!==scope.$eval(attrs.typeaheadFocusOnSelect)&&$timeout((function(){element[0].focus()}),0,!1)},element.on("keydown",(function(evt){if(0!==scope.matches.length&&-1!==HOT_KEYS.indexOf(evt.which)){var shouldSelect=isSelectEvent(originalScope,{$event:evt}),target;if(-1===scope.activeIdx&&shouldSelect||9===evt.which&&evt.shiftKey)return resetMatches(),void scope.$digest();switch(evt.preventDefault(),evt.which){case 27:evt.stopPropagation(),resetMatches(),originalScope.$digest();break;case 38:scope.activeIdx=(scope.activeIdx>0?scope.activeIdx:scope.matches.length)-1,scope.$digest(),(target=popUpEl[0].querySelectorAll(".uib-typeahead-match")[scope.activeIdx]).parentNode.scrollTop=target.offsetTop;break;case 40:scope.activeIdx=(scope.activeIdx+1)%scope.matches.length,scope.$digest(),(target=popUpEl[0].querySelectorAll(".uib-typeahead-match")[scope.activeIdx]).parentNode.scrollTop=target.offsetTop;break;default:shouldSelect&&scope.$apply((function(){angular.isNumber(scope.debounceUpdate)||angular.isObject(scope.debounceUpdate)?$$debounce((function(){scope.select(scope.activeIdx,evt)}),angular.isNumber(scope.debounceUpdate)?scope.debounceUpdate:scope.debounceUpdate.default):scope.select(scope.activeIdx,evt)}))}}})),element.on("focus",(function(evt){hasFocus=!0,0!==minLength||modelCtrl.$viewValue||$timeout((function(){getMatchesAsync(modelCtrl.$viewValue,evt)}),0)})),element.on("blur",(function(evt){isSelectOnBlur&&scope.matches.length&&-1!==scope.activeIdx&&!selected&&(selected=!0,scope.$apply((function(){angular.isObject(scope.debounceUpdate)&&angular.isNumber(scope.debounceUpdate.blur)?$$debounce((function(){scope.select(scope.activeIdx,evt)}),scope.debounceUpdate.blur):scope.select(scope.activeIdx,evt)}))),!isEditable&&modelCtrl.$error.editable&&(modelCtrl.$setViewValue(),scope.$apply((function(){modelCtrl.$setValidity("editable",!0),modelCtrl.$setValidity("parse",!0)})),element.val("")),hasFocus=!1,selected=!1}));var dismissClickHandler=function(evt){element[0]!==evt.target&&3!==evt.which&&0!==scope.matches.length&&(resetMatches(),$rootScope.$$phase||originalScope.$digest())};$document.on("click",dismissClickHandler),originalScope.$on("$destroy",(function(){$document.off("click",dismissClickHandler),(appendToBody||appendTo)&&$popup.remove(),appendToBody&&(angular.element($window).off("resize",fireRecalculating),$document.find("body").off("scroll",fireRecalculating)),popUpEl.remove(),showHint&&inputsContainer.remove()}));var $popup=$compile(popUpEl)(scope);function extractOptions(ngModelCtrl){var ngModelOptions;return angular.version.minor<6?(ngModelOptions=ngModelCtrl.$options||{}).getOption=function(key){return ngModelOptions[key]}:ngModelOptions=ngModelCtrl.$options,ngModelOptions}appendToBody?$document.find("body").append($popup):appendTo?angular.element(appendTo).eq(0).append($popup):element.after($popup),this.init=function(_modelCtrl){ngModelOptions=extractOptions(modelCtrl=_modelCtrl),scope.debounceUpdate=$parse(ngModelOptions.getOption("debounce"))(originalScope),modelCtrl.$parsers.unshift((function(inputValue){return hasFocus=!0,0===minLength||inputValue&&inputValue.length>=minLength?waitTime>0?(cancelPreviousTimeout(),scheduleSearchWithTimeout(inputValue)):getMatchesAsync(inputValue):(isLoadingSetter(originalScope,!1),cancelPreviousTimeout(),resetMatches()),isEditable?inputValue:inputValue?void modelCtrl.$setValidity("editable",!1):(modelCtrl.$setValidity("editable",!0),null)})),modelCtrl.$formatters.push((function(modelValue){var candidateViewValue,emptyViewValue,locals={};return isEditable||modelCtrl.$setValidity("editable",!0),inputFormatter?(locals.$model=modelValue,inputFormatter(originalScope,locals)):(locals[parserResult.itemName]=modelValue,candidateViewValue=parserResult.viewMapper(originalScope,locals),locals[parserResult.itemName]=void 0,candidateViewValue!==(emptyViewValue=parserResult.viewMapper(originalScope,locals))?candidateViewValue:modelValue)}))}}]).directive("uibTypeahead",(function(){return{controller:"UibTypeaheadController",require:["ngModel","uibTypeahead"],link:function(originalScope,element,attrs,ctrls){ctrls[1].init(ctrls[0])}}})).directive("uibTypeaheadPopup",["$$debounce",function($$debounce){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&",assignIsOpen:"&",debounce:"&"},replace:!0,templateUrl:function(element,attrs){return attrs.popupTemplateUrl||"uib/template/typeahead/typeahead-popup.html"},link:function(scope,element,attrs){scope.templateUrl=attrs.templateUrl,scope.isOpen=function(){var isDropdownOpen=scope.matches.length>0;return scope.assignIsOpen({isOpen:isDropdownOpen}),isDropdownOpen},scope.isActive=function(matchIdx){return scope.active===matchIdx},scope.selectActive=function(matchIdx){scope.active=matchIdx},scope.selectMatch=function(activeIdx,evt){var debounce=scope.debounce();angular.isNumber(debounce)||angular.isObject(debounce)?$$debounce((function(){scope.select({activeIdx:activeIdx,evt:evt})}),angular.isNumber(debounce)?debounce:debounce.default):scope.select({activeIdx:activeIdx,evt:evt})}}}}]).directive("uibTypeaheadMatch",["$templateRequest","$compile","$parse",function($templateRequest,$compile,$parse){return{scope:{index:"=",match:"=",query:"="},link:function(scope,element,attrs){var tplUrl=$parse(attrs.templateUrl)(scope.$parent)||"uib/template/typeahead/typeahead-match.html";$templateRequest(tplUrl).then((function(tplContent){var tplEl=angular.element(tplContent.trim());element.replaceWith(tplEl),$compile(tplEl)(scope)}))}}}]).filter("uibTypeaheadHighlight",["$sce","$injector","$log",function($sce,$injector,$log){var isSanitizePresent;function escapeRegexp(queryToEscape){return queryToEscape.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function containsHtml(matchItem){return/<.*>/g.test(matchItem)}return isSanitizePresent=$injector.has("$sanitize"),function(matchItem,query){return!isSanitizePresent&&containsHtml(matchItem)&&$log.warn("Unsafe use of typeahead please use ngSanitize"),matchItem=query?(""+matchItem).replace(new RegExp(escapeRegexp(query),"gi"),"<strong>$&</strong>"):matchItem,isSanitizePresent||(matchItem=$sce.trustAsHtml(matchItem)),matchItem}}]),angular.module("uib/template/accordion/accordion-group.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/accordion/accordion-group.html",'<div role="tab" id="{{::headingId}}" aria-selected="{{isOpen}}" class="panel-heading" ng-keypress="toggleOpen($event)">\n  <h4 class="panel-title">\n    <a role="button" data-toggle="collapse" href aria-expanded="{{isOpen}}" aria-controls="{{::panelId}}" tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" uib-accordion-transclude="heading" ng-disabled="isDisabled" uib-tabindex-toggle><span uib-accordion-header ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n  </h4>\n</div>\n<div id="{{::panelId}}" aria-labelledby="{{::headingId}}" aria-hidden="{{!isOpen}}" role="tabpanel" class="panel-collapse collapse" uib-collapse="!isOpen">\n  <div class="panel-body" ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/accordion/accordion.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/accordion/accordion.html",'<div role="tablist" class="panel-group" ng-transclude></div>')}]),angular.module("uib/template/alert/alert.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/alert/alert.html",'<button ng-show="closeable" type="button" class="close" ng-click="close({$event: $event})">\n  <span aria-hidden="true">&times;</span>\n  <span class="sr-only">Close</span>\n</button>\n<div ng-transclude></div>\n')}]),angular.module("uib/template/carousel/carousel.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/carousel/carousel.html",'<div class="carousel-inner" ng-transclude></div>\n<a role="button" href class="left carousel-control" ng-click="prev()" ng-class="{ disabled: isPrevDisabled() }" ng-show="slides.length > 1">\n  <span aria-hidden="true" class="glyphicon glyphicon-chevron-left"></span>\n  <span class="sr-only">previous</span>\n</a>\n<a role="button" href class="right carousel-control" ng-click="next()" ng-class="{ disabled: isNextDisabled() }" ng-show="slides.length > 1">\n  <span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>\n  <span class="sr-only">next</span>\n</a>\n<ol class="carousel-indicators" ng-show="slides.length > 1">\n  <li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{ active: isActive(slide) }" ng-click="select(slide)">\n    <span class="sr-only">slide {{ $index + 1 }} of {{ slides.length }}<span ng-if="isActive(slide)">, currently active</span></span>\n  </li>\n</ol>\n')}]),angular.module("uib/template/carousel/slide.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/carousel/slide.html",'<div class="text-center" ng-transclude></div>\n')}]),angular.module("uib/template/datepicker/datepicker.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/datepicker/datepicker.html",'<div ng-switch="datepickerMode">\n  <div uib-daypicker ng-switch-when="day" tabindex="0" class="uib-daypicker"></div>\n  <div uib-monthpicker ng-switch-when="month" tabindex="0" class="uib-monthpicker"></div>\n  <div uib-yearpicker ng-switch-when="year" tabindex="0" class="uib-yearpicker"></div>\n</div>\n')}]),angular.module("uib/template/datepicker/day.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/datepicker/day.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></button></th>\n    </tr>\n    <tr>\n      <th ng-if="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-weeks" ng-repeat="row in rows track by $index" role="row">\n      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row" class="uib-day text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default btn-sm"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/month.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/datepicker/month.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::yearHeaderColspan}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-months" ng-repeat="row in rows track by $index" role="row">\n      <td ng-repeat="dt in row" class="uib-month text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/year.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/datepicker/year.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::columns - 2}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-years" ng-repeat="row in rows track by $index" role="row">\n      <td ng-repeat="dt in row" class="uib-year text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepickerPopup/popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/datepickerPopup/popup.html",'<ul role="presentation" class="uib-datepicker-popup dropdown-menu uib-position-measure" dropdown-nested ng-if="isOpen" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n  <li ng-transclude></li>\n  <li ng-if="showButtonBar" class="uib-button-bar">\n    <span class="btn-group pull-left">\n      <button type="button" class="btn btn-sm btn-info uib-datepicker-current" ng-click="select(\'today\', $event)" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>\n      <button type="button" class="btn btn-sm btn-danger uib-clear" ng-click="select(null, $event)">{{ getText(\'clear\') }}</button>\n    </span>\n    <button type="button" class="btn btn-sm btn-success pull-right uib-close" ng-click="close($event)">{{ getText(\'close\') }}</button>\n  </li>\n</ul>\n')}]),angular.module("uib/template/modal/window.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/modal/window.html","<div class=\"modal-dialog {{size ? 'modal-' + size : ''}}\"><div class=\"modal-content\" uib-modal-transclude></div></div>\n")}]),angular.module("uib/template/pager/pager.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/pager/pager.html",'<li ng-class="{disabled: noPrevious()||ngDisabled, previous: align}"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n<li ng-class="{disabled: noNext()||ngDisabled, next: align}"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n')}]),angular.module("uib/template/pagination/pagination.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/pagination/pagination.html",'<li role="menuitem" ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'first\')}}</a></li>\n<li role="menuitem" ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n<li role="menuitem" ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)" ng-disabled="ngDisabled&&!page.active" uib-tabindex-toggle>{{page.text}}</a></li>\n<li role="menuitem" ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n<li role="menuitem" ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'last\')}}</a></li>\n')}]),angular.module("uib/template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/tooltip/tooltip-html-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n')}]),angular.module("uib/template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/tooltip/tooltip-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner" ng-bind="content"></div>\n')}]),angular.module("uib/template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/tooltip/tooltip-template-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner"\n  uib-tooltip-template-transclude="contentExp()"\n  tooltip-template-transclude-scope="originScope()"></div>\n')}]),angular.module("uib/template/popover/popover-html.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/popover/popover-html.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content" ng-bind-html="contentExp()"></div>\n</div>\n')}]),angular.module("uib/template/popover/popover-template.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/popover/popover-template.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content"\n      uib-tooltip-template-transclude="contentExp()"\n      tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')}]),angular.module("uib/template/popover/popover.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/popover/popover.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content" ng-bind="content"></div>\n</div>\n')}]),angular.module("uib/template/progressbar/bar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n')}]),angular.module("uib/template/progressbar/progress.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/progressbar/progress.html",'<div class="progress" ng-transclude aria-labelledby="{{::title}}"></div>')}]),angular.module("uib/template/progressbar/progressbar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/rating/rating.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}" aria-valuetext="{{title}}">\n    <span ng-repeat-start="r in range track by $index" class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    <i ng-repeat-end ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')" ng-attr-title="{{r.title}}"></i>\n</span>\n')}]),angular.module("uib/template/tabs/tab.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/tabs/tab.html",'<li ng-class="[{active: active, disabled: disabled}, classes]" class="uib-tab nav-item">\n  <a href ng-click="select($event)" class="nav-link" uib-tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("uib/template/tabs/tabset.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{tabset.type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane"\n         ng-repeat="tab in tabset.tabs"\n         ng-class="{active: tabset.active === tab.index}"\n         uib-tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("uib/template/timepicker/timepicker.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/timepicker/timepicker.html",'<table class="uib-timepicker">\n  <tbody>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-increment hours"><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link" ng-disabled="noIncrementHours()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-increment minutes"><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link" ng-disabled="noIncrementMinutes()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-increment seconds"><a ng-click="incrementSeconds()" ng-class="{disabled: noIncrementSeconds()}" class="btn btn-link" ng-disabled="noIncrementSeconds()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n    <tr>\n      <td class="form-group uib-time hours" ng-class="{\'has-error\': invalidHours}">\n        <input type="text" placeholder="HH" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementHours()" ng-blur="blur()">\n      </td>\n      <td class="uib-separator">:</td>\n      <td class="form-group uib-time minutes" ng-class="{\'has-error\': invalidMinutes}">\n        <input type="text" placeholder="MM" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementMinutes()" ng-blur="blur()">\n      </td>\n      <td ng-show="showSeconds" class="uib-separator">:</td>\n      <td class="form-group uib-time seconds" ng-class="{\'has-error\': invalidSeconds}" ng-show="showSeconds">\n        <input type="text" placeholder="SS" ng-model="seconds" ng-change="updateSeconds()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementSeconds()" ng-blur="blur()">\n      </td>\n      <td ng-show="showMeridian" class="uib-time am-pm"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()" ng-disabled="noToggleMeridian()" tabindex="{{::tabindex}}">{{meridian}}</button></td>\n    </tr>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-decrement hours"><a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link" ng-disabled="noDecrementHours()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-decrement minutes"><a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link" ng-disabled="noDecrementMinutes()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-decrement seconds"><a ng-click="decrementSeconds()" ng-class="{disabled: noDecrementSeconds()}" class="btn btn-link" ng-disabled="noDecrementSeconds()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/typeahead/typeahead-match.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/typeahead/typeahead-match.html",'<a href\n   tabindex="-1"\n   ng-bind-html="match.label | uibTypeaheadHighlight:query"\n   ng-attr-title="{{match.label}}"></a>\n')}]),angular.module("uib/template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li class="uib-typeahead-match" ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index, $event)" role="option" id="{{::match.id}}">\n        <div uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),angular.module("ui.bootstrap.carousel").run((function(){!angular.$$csp().noInlineStyle&&!angular.$$uibCarouselCss&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>'),angular.$$uibCarouselCss=!0})),angular.module("ui.bootstrap.datepicker").run((function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker .uib-title{width:100%;}.uib-day button,.uib-month button,.uib-year button{min-width:100%;}.uib-left,.uib-right{width:100%}</style>'),angular.$$uibDatepickerCss=!0})),angular.module("ui.bootstrap.position").run((function(){!angular.$$csp().noInlineStyle&&!angular.$$uibPositionCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-position-measure{display:block !important;visibility:hidden !important;position:absolute !important;top:-9999px !important;left:-9999px !important;}.uib-position-scrollbar-measure{position:absolute !important;top:-9999px !important;width:50px !important;height:50px !important;overflow:scroll !important;}.uib-position-body-scrollbar-measure{overflow:scroll !important;}</style>'),angular.$$uibPositionCss=!0})),angular.module("ui.bootstrap.datepickerPopup").run((function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerpopupCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker-popup.dropdown-menu{display:block;float:none;margin:0;}.uib-button-bar{padding:10px 9px 2px;}</style>'),angular.$$uibDatepickerpopupCss=!0})),angular.module("ui.bootstrap.tooltip").run((function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTooltipCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-tooltip-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-bottom > .tooltip-arrow,[uib-popover-popup].popover.top-left > .arrow,[uib-popover-popup].popover.top-right > .arrow,[uib-popover-popup].popover.bottom-left > .arrow,[uib-popover-popup].popover.bottom-right > .arrow,[uib-popover-popup].popover.left-top > .arrow,[uib-popover-popup].popover.left-bottom > .arrow,[uib-popover-popup].popover.right-top > .arrow,[uib-popover-popup].popover.right-bottom > .arrow,[uib-popover-html-popup].popover.top-left > .arrow,[uib-popover-html-popup].popover.top-right > .arrow,[uib-popover-html-popup].popover.bottom-left > .arrow,[uib-popover-html-popup].popover.bottom-right > .arrow,[uib-popover-html-popup].popover.left-top > .arrow,[uib-popover-html-popup].popover.left-bottom > .arrow,[uib-popover-html-popup].popover.right-top > .arrow,[uib-popover-html-popup].popover.right-bottom > .arrow,[uib-popover-template-popup].popover.top-left > .arrow,[uib-popover-template-popup].popover.top-right > .arrow,[uib-popover-template-popup].popover.bottom-left > .arrow,[uib-popover-template-popup].popover.bottom-right > .arrow,[uib-popover-template-popup].popover.left-top > .arrow,[uib-popover-template-popup].popover.left-bottom > .arrow,[uib-popover-template-popup].popover.right-top > .arrow,[uib-popover-template-popup].popover.right-bottom > .arrow{top:auto;bottom:auto;left:auto;right:auto;margin:0;}[uib-popover-popup].popover,[uib-popover-html-popup].popover,[uib-popover-template-popup].popover{display:block !important;}</style>'),angular.$$uibTooltipCss=!0})),angular.module("ui.bootstrap.timepicker").run((function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTimepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-time input{width:50px;}</style>'),angular.$$uibTimepickerCss=!0})),angular.module("ui.bootstrap.typeahead").run((function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTypeaheadCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-typeahead-popup].dropdown-menu{display:block;}</style>'),angular.$$uibTypeaheadCss=!0})),function(root,factory){"function"==typeof define&&define.amd?define(["angular"],factory):"object"==typeof module&&module.exports?module.exports=factory(require("angular")):root.angularClipboard=factory(root.angular)}(this,(function(angular){return angular.module("angular-clipboard",[]).factory("clipboard",["$document","$window",function($document,$window){function createNode(text,context){var node=$document[0].createElement("textarea");return node.style.position="absolute",node.textContent=text,node.style.left="-10000px",node.style.top=($window.pageYOffset||$document[0].documentElement.scrollTop)+"px",node}function copyNode(node){try{$document[0].body.style.webkitUserSelect="initial";var selection=$document[0].getSelection();if(selection.removeAllRanges(),node.select(),!$document[0].execCommand("copy"))throw"failure copy";selection.removeAllRanges()}finally{$document[0].body.style.webkitUserSelect=""}}function copyText(text,context){var node=createNode(text,context);$document[0].body.appendChild(node),copyNode(node),$document[0].body.removeChild(node)}return{copyText:copyText,supported:"queryCommandSupported"in $document[0]&&$document[0].queryCommandSupported("copy")}}]).directive("clipboard",["clipboard",function(clipboard){return{restrict:"A",scope:{onCopied:"&",onError:"&",text:"=",supported:"=?"},link:function(scope,element){scope.supported=clipboard.supported,element.on("click",(function(event){try{clipboard.copyText(scope.text,element[0]),angular.isFunction(scope.onCopied)&&scope.$evalAsync(scope.onCopied())}catch(err){angular.isFunction(scope.onError)&&scope.$evalAsync(scope.onError({err:err}))}}))}}}])})),angular.module("dialogs.default-translations",["pascalprecht.translate"]).config(["$translateProvider",function(O){O.translations("de-DE",{DIALOGS_ERROR:"Error",DIALOGS_ERROR_MSG:"Ein unbekannter Fehler ist aufgetreten.",DIALOGS_CLOSE:"Schließen",DIALOGS_PLEASE_WAIT:"Bitte warten",DIALOGS_PLEASE_WAIT_ELIPS:"Bitte warten...",DIALOGS_PLEASE_WAIT_MSG:"Warte auf Fertigstellung der Operation.",DIALOGS_PERCENT_COMPLETE:"% fertig",DIALOGS_NOTIFICATION:"Benachrichtigung",DIALOGS_NOTIFICATION_MSG:"Unbekannte Anwendungsbenachrichtigung.",DIALOGS_CONFIRMATION:"Bestätigung",DIALOGS_CONFIRMATION_MSG:"Bestätigung erforderlich.",DIALOGS_OK:"OK",DIALOGS_YES:"Ja",DIALOGS_NO:"Nein"}),O.translations("en-US",{DIALOGS_ERROR:"Error",DIALOGS_ERROR_MSG:"An unknown error has occurred.",DIALOGS_CLOSE:"Close",DIALOGS_PLEASE_WAIT:"Please Wait",DIALOGS_PLEASE_WAIT_ELIPS:"Please Wait...",DIALOGS_PLEASE_WAIT_MSG:"Waiting on operation to complete.",DIALOGS_PERCENT_COMPLETE:"% Complete",DIALOGS_NOTIFICATION:"Notification",DIALOGS_NOTIFICATION_MSG:"Unknown application notification.",DIALOGS_CONFIRMATION:"Confirmation",DIALOGS_CONFIRMATION_MSG:"Confirmation required.",DIALOGS_OK:"OK",DIALOGS_YES:"Yes",DIALOGS_NO:"No"}),O.translations("es-ES",{DIALOGS_ERROR:"Error",DIALOGS_ERROR_MSG:"Se ha producido un error.",DIALOGS_CLOSE:"Cerrar",DIALOGS_PLEASE_WAIT:"Espere por favor",DIALOGS_PLEASE_WAIT_ELIPS:"Espere por favor...",DIALOGS_PLEASE_WAIT_MSG:"Completando operación.",DIALOGS_PERCENT_COMPLETE:"% Completado",DIALOGS_NOTIFICATION:"Notificación",DIALOGS_NOTIFICATION_MSG:"Notificación de una aplicación desconocida.",DIALOGS_CONFIRMATION:"Confirmación",DIALOGS_CONFIRMATION_MSG:"Se requiere confirmacion.",DIALOGS_OK:"Aceptar",DIALOGS_YES:"Sí",DIALOGS_NO:"No"}),O.translations("fr-FR",{DIALOGS_ERROR:"Erreur",DIALOGS_ERROR_MSG:"Une erreur inconnue s'est produite.",DIALOGS_CLOSE:"Fermer",DIALOGS_PLEASE_WAIT:"Patientez svp",DIALOGS_PLEASE_WAIT_ELIPS:"Patienter svp...",DIALOGS_PLEASE_WAIT_MSG:"En attente de la fin de l'opération.",DIALOGS_PERCENT_COMPLETE:"% Terminer",DIALOGS_NOTIFICATION:"Notification",DIALOGS_NOTIFICATION_MSG:"Notification de l'application inconnue",DIALOGS_CONFIRMATION:"Confirmer",DIALOGS_CONFIRMATION_MSG:"Merci de confirmer",DIALOGS_OK:"OK",DIALOGS_YES:"Oui",DIALOGS_NO:"Non"}),O.translations("pt-BR",{DIALOGS_ERROR:"Erro",DIALOGS_ERROR_MSG:"Ocorreu um erro inesperado.",DIALOGS_CLOSE:"Fechar",DIALOGS_PLEASE_WAIT:"Por favor aguarde",DIALOGS_PLEASE_WAIT_ELIPS:"Por favor aguarde...",DIALOGS_PLEASE_WAIT_MSG:"Aguardando que a operação termine.",DIALOGS_PERCENT_COMPLETE:"% Completados",DIALOGS_NOTIFICATION:"Notificação",DIALOGS_NOTIFICATION_MSG:"Notificação de aplicação desconhecida.",DIALOGS_CONFIRMATION:"Confirmação",DIALOGS_CONFIRMATION_MSG:"Confirmação requerida.",DIALOGS_OK:"OK",DIALOGS_YES:"Sim",DIALOGS_NO:"Não"}),O.translations("zh-CN",{DIALOGS_ERROR:"错误",DIALOGS_ERROR_MSG:"出现未知错误。",DIALOGS_CLOSE:"关闭",DIALOGS_PLEASE_WAIT:"请稍候",DIALOGS_PLEASE_WAIT_ELIPS:"请稍候...",DIALOGS_PLEASE_WAIT_MSG:"请等待操作完成。",DIALOGS_PERCENT_COMPLETE:"% 已完成",DIALOGS_NOTIFICATION:"通知",DIALOGS_NOTIFICATION_MSG:"未知应用程序的通知。",DIALOGS_CONFIRMATION:"确认",DIALOGS_CONFIRMATION_MSG:"确认要求。",DIALOGS_OK:"确定",DIALOGS_YES:"确认",DIALOGS_NO:"取消"}),O.preferredLanguage("zh-CN")}]),
/**
 * angular-dialog-service - A service to handle common dialog types in a web application.  Built on top of Angular-Bootstrap's modal
 * @version v5.3.0
 * @author Michael Conroy, michael.e.conroy@gmail.com
 * @license MIT, http://www.opensource.org/licenses/MIT
 */
function(){"use strict";var translateSubMod=angular.module("translate.sub",[]),ctrlrs;translateSubMod.provider("$translate",[function(){var _translations=[],_current="zh-CN";this.translations=function(lang,obj){angular.isDefined(lang)&&angular.isDefined(obj)&&(_translations[lang]=angular.copy(obj),_current=lang)},this.$get=[function(){return{instant:function(what){return angular.isDefined(what)&&angular.isDefined(_translations[_current][what])?_translations[_current][what]:""}}}]}]),translateSubMod.filter("translate",["$translate",function($translate){return function(what){return $translate.instant(what)}}]);try{angular.module("pascalprecht.translate"),ctrlrs=angular.module("dialogs.controllers",["ui.bootstrap.modal","pascalprecht.translate"])}catch(err){ctrlrs=angular.module("dialogs.controllers",["ui.bootstrap.modal","translate.sub"])}ctrlrs.controller("errorDialogCtrl",["$scope","$uibModalInstance","$translate","data",function($scope,$uibModalInstance,$translate,data){$scope.header=angular.isDefined(data.header)?data.header:$translate.instant("DIALOGS_ERROR"),$scope.msg=angular.isDefined(data.msg)?data.msg:$translate.instant("DIALOGS_ERROR_MSG"),$scope.icon=angular.isDefined(data.fa)&&angular.equals(data.fa,!0)?"fa fa-warning":"glyphicon glyphicon-warning-sign",$scope.close=function(){$uibModalInstance.close(),$scope.$destroy()}}]),ctrlrs.controller("waitDialogCtrl",["$scope","$uibModalInstance","$translate","$timeout","data",function($scope,$uibModalInstance,$translate,$timeout,data){$scope.header=angular.isDefined(data.header)?data.header:$translate.instant("DIALOGS_PLEASE_WAIT_ELIPS"),$scope.msg=angular.isDefined(data.msg)?data.msg:$translate.instant("DIALOGS_PLEASE_WAIT_MSG"),$scope.progress=angular.isDefined(data.progress)?data.progress:100,$scope.icon=angular.isDefined(data.fa)&&angular.equals(data.fa,!0)?"fa fa-clock-o":"glyphicon glyphicon-time",$scope.$on("dialogs.wait.complete",(function(){$timeout((function(){$uibModalInstance.close(),$scope.$destroy()}))})),$scope.$on("dialogs.wait.message",(function(evt,args){$scope.msg=angular.isDefined(args.msg)?args.msg:$scope.msg})),$scope.$on("dialogs.wait.progress",(function(evt,args){$scope.msg=angular.isDefined(args.msg)?args.msg:$scope.msg,$scope.progress=angular.isDefined(args.progress)?args.progress:$scope.progress})),$scope.getProgress=function(){return{width:$scope.progress+"%"}}}]),ctrlrs.controller("notifyDialogCtrl",["$scope","$uibModalInstance","$translate","data",function($scope,$uibModalInstance,$translate,data){$scope.header=angular.isDefined(data.header)?data.header:$translate.instant("DIALOGS_NOTIFICATION"),$scope.msg=angular.isDefined(data.msg)?data.msg:$translate.instant("DIALOGS_NOTIFICATION_MSG"),$scope.icon=angular.isDefined(data.fa)&&angular.equals(data.fa,!0)?"fa fa-info":"glyphicon glyphicon-info-sign",$scope.close=function(){$uibModalInstance.close(),$scope.$destroy()}}]),ctrlrs.controller("confirmDialogCtrl",["$scope","$uibModalInstance","$translate","data",function($scope,$uibModalInstance,$translate,data){$scope.header=angular.isDefined(data.header)?data.header:$translate.instant("DIALOGS_CONFIRMATION"),$scope.msg=angular.isDefined(data.msg)?data.msg:$translate.instant("DIALOGS_CONFIRMATION_MSG"),$scope.icon=angular.isDefined(data.fa)&&angular.equals(data.fa,!0)?"fa fa-check":"glyphicon glyphicon-check",$scope.no=function(){$uibModalInstance.dismiss("no")},$scope.yes=function(){$uibModalInstance.close("yes")}}]),angular.module("dialogs.services",["ui.bootstrap.modal","dialogs.controllers"]).provider("dialogs",[function(){var _b=!0,_k=!0,_w="dialogs-default",_bdc="dialogs-backdrop-default",_copy=!0,_wTmpl=null,_wSize="lg",_animation=!1,_fa=!1,_setOpts=function(opts){var _opts={};return opts=opts||{},_opts.kb=angular.isDefined(opts.keyboard)?!!opts.keyboard:_k,_opts.bd=angular.isDefined(opts.backdrop)?opts.backdrop:_b,_opts.bdc=angular.isDefined(opts.backdropClass)?opts.backdropClass:_bdc,_opts.ws=!angular.isDefined(opts.size)||"sm"!==opts.size&&"lg"!==opts.size&&"md"!==opts.size?_wSize:opts.size,_opts.wc=angular.isDefined(opts.windowClass)?opts.windowClass:_w,_opts.anim=angular.isDefined(opts.animation)?!!opts.animation:_animation,_opts};this.useBackdrop=function(val){angular.isDefined(val)&&(_b=val)},this.useEscClose=function(val){angular.isDefined(val)&&(_k=!(angular.equals(val,0)||angular.equals(val,"false")||angular.equals(val,"no")||angular.equals(val,null)||angular.equals(val,!1)))},this.useClass=function(val){angular.isDefined(val)&&(_w=val)},this.useCopy=function(val){angular.isDefined(val)&&(_copy=!(angular.equals(val,0)||angular.equals(val,"false")||angular.equals(val,"no")||angular.equals(val,null)||angular.equals(val,!1)))},this.setWindowTmpl=function(val){angular.isDefined(val)&&(_wTmpl=val)},this.setSize=function(val){angular.isDefined(val)&&(_wSize=angular.equals(val,"sm")||angular.equals(val,"lg")||angular.equals(val,"md")?val:_wSize)},this.useAnimation=function(){_animation=!0},this.useFontAwesome=function(){_fa=!0},this.$get=["$uibModal",function($uibModal){return{error:function(header,msg,opts){return opts=_setOpts(opts),$uibModal.open({templateUrl:"/dialogs/error.html",controller:"errorDialogCtrl",backdrop:opts.bd,backdropClass:opts.bdc,keyboard:opts.kb,windowClass:opts.wc,size:opts.ws,animation:opts.anim,resolve:{data:function(){return{header:angular.copy(header),msg:angular.copy(msg),fa:_fa}}}})},wait:function(header,msg,progress,opts){return opts=_setOpts(opts),$uibModal.open({templateUrl:"/dialogs/wait.html",controller:"waitDialogCtrl",backdrop:opts.bd,backdropClass:opts.bdc,keyboard:opts.kb,windowClass:opts.wc,size:opts.ws,animation:opts.anim,resolve:{data:function(){return{header:angular.copy(header),msg:angular.copy(msg),progress:angular.copy(progress),fa:_fa}}}})},notify:function(header,msg,opts){return opts=_setOpts(opts),$uibModal.open({templateUrl:"/dialogs/notify.html",controller:"notifyDialogCtrl",backdrop:opts.bd,backdropClass:opts.bdc,keyboard:opts.kb,windowClass:opts.wc,size:opts.ws,animation:opts.anim,resolve:{data:function(){return{header:angular.copy(header),msg:angular.copy(msg),fa:_fa}}}})},confirm:function(header,msg,opts){return opts=_setOpts(opts),$uibModal.open({templateUrl:"/dialogs/confirm.html",controller:"confirmDialogCtrl",backdrop:opts.bd,backdropClass:opts.bdc,keyboard:opts.kb,windowClass:opts.wc,size:opts.ws,animation:opts.anim,resolve:{data:function(){return{header:angular.copy(header),msg:angular.copy(msg),fa:_fa}}}})},create:function(url,ctrlr,data,opts,ctrlAs){var copy=opts&&angular.isDefined(opts.copy)?opts.copy:_copy;return opts=_setOpts(opts),$uibModal.open({templateUrl:url,controller:ctrlr,controllerAs:ctrlAs,keyboard:opts.kb,backdrop:opts.bd,backdropClass:opts.bdc,windowClass:opts.wc,size:opts.ws,animation:opts.anim,resolve:{data:function(){return copy?angular.copy(data):data}}})}}}]}]),angular.module("dialogs.main",["dialogs.services","ngSanitize"]).config(["$translateProvider","dialogsProvider",function($translateProvider,dialogsProvider){try{angular.module("pascalprecht.translate")}catch(err){$translateProvider.translations("en-US",{DIALOGS_ERROR:"Error",DIALOGS_ERROR_MSG:"An unknown error has occurred.",DIALOGS_CLOSE:"Close",DIALOGS_PLEASE_WAIT:"Please Wait",DIALOGS_PLEASE_WAIT_ELIPS:"Please Wait...",DIALOGS_PLEASE_WAIT_MSG:"Waiting on operation to complete.",DIALOGS_PERCENT_COMPLETE:"% Complete",DIALOGS_NOTIFICATION:"Notification",DIALOGS_NOTIFICATION_MSG:"Unknown application notification.",DIALOGS_CONFIRMATION:"Confirmation",DIALOGS_CONFIRMATION_MSG:"Confirmation required.",DIALOGS_OK:"OK",DIALOGS_YES:"Yes",DIALOGS_NO:"No"})}try{var _sheets=document.styleSheets;sheetLoop:for(var i=_sheets.length-1;i>=0;i--){var _matches=null,_rules=null;if(!_sheets[i].disabled){if(null!==_sheets[i].href&&(_matches=_sheets[i].href.match(/font\-*awesome/i)),angular.isArray(_matches)){dialogsProvider.useFontAwesome();break}for(var x=(_rules=_sheets[i].cssRules).length-1;x>=0;x--)if("string"==typeof _rules[x].selectorText&&".fa"===_rules[x].selectorText.toLowerCase()){dialogsProvider.useFontAwesome();break sheetLoop}}}}catch(err){}}]).run(["$templateCache","$interpolate",function($templateCache,$interpolate){var startSym=$interpolate.startSymbol(),endSym=$interpolate.endSymbol();$templateCache.put("/dialogs/error.html",'<div class="modal-header dialog-header-error"><button type="button" class="close" ng-click="close()">&times;</button><h4 class="modal-title text-danger"><span class="'+startSym+"icon"+endSym+'"></span> <span ng-bind-html="header"></span></h4></div><div class="modal-body text-danger" ng-bind-html="msg"></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="close()">'+startSym+'"DIALOGS_CLOSE" | translate'+endSym+"</button></div>"),$templateCache.put("/dialogs/wait.html",'<div class="modal-header dialog-header-wait"><h4 class="modal-title"><span class="'+startSym+"icon"+endSym+'"></span> '+startSym+"header"+endSym+'</h4></div><div class="modal-body"><p ng-bind-html="msg"></p><div class="progress progress-striped active"><div class="progress-bar progress-bar-info" ng-style="getProgress()"></div><span class="sr-only">'+startSym+"progress"+endSym+startSym+'"DIALOGS_PERCENT_COMPLETE" | translate'+endSym+"</span></div></div>"),$templateCache.put("/dialogs/notify.html",'<div class="modal-header dialog-header-notify"><button type="button" class="close" ng-click="close()" class="pull-right">&times;</button><h4 class="modal-title text-info"><span class="'+startSym+"icon"+endSym+'"></span> '+startSym+"header"+endSym+'</h4></div><div class="modal-body text-info" ng-bind-html="msg"></div><div class="modal-footer"><button type="button" class="btn btn-primary" ng-click="close()">'+startSym+'"DIALOGS_OK" | translate'+endSym+"</button></div>"),$templateCache.put("/dialogs/confirm.html",'<div class="modal-header dialog-header-confirm"><button type="button" class="close" ng-click="no()">&times;</button><h4 class="modal-title"><span class="'+startSym+"icon"+endSym+'"></span> '+startSym+"header"+endSym+'</h4></div><div class="modal-body" ng-bind-html="msg"></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="yes()">'+startSym+'"DIALOGS_YES" | translate'+endSym+'</button><button type="button" class="btn btn-primary" ng-click="no()">'+startSym+'"DIALOGS_NO" | translate'+endSym+"</button></div>")}])}(),
/**
 * Bunch of useful filters for angularJS(with no external dependencies!)
 * @version v0.5.16 - 2017-04-07 * @link https://github.com/a8m/angular-filter
 * @author Ariel Mashraki <ariel@mashraki.co.il>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
function(window,angular,undefined){"use strict";var isDefined=angular.isDefined,isUndefined=angular.isUndefined,isFunction=angular.isFunction,isString=angular.isString,isNumber=angular.isNumber,isObject=angular.isObject,isArray=angular.isArray,forEach=angular.forEach,extend=angular.extend,copy=angular.copy,equals=angular.equals;function toArray(object){return isArray(object)?object:Object.keys(object).map((function(key){return object[key]}))}function isNull(value){return null===value}function objectContains(partial,object){var keys;return-1==Object.keys(partial).map((function(el){return void 0!==object[el]&&object[el]==partial[el]})).indexOf(!1)}function hasApproxPattern(word,pattern){function indexOf(word,p,c){for(var j=0;p+j<=word.length;){if(word.charAt(p+j)==c)return j;j++}return-1}for(var p=0,i=0;i<=pattern.length;i++){var index=indexOf(word,p,pattern.charAt(i));if(-1==index)return!1;p+=index+1}return!0}function getFirstMatches(array,n,expression){var count=0;return array.filter((function(elm){var rest=isDefined(expression)?count<n&&expression(elm):count<n;return count=rest?count+1:count,rest}))}function convertToDecimal(num,decimal){return Math.round(num*Math.pow(10,decimal))/Math.pow(10,decimal)}function deepKeys(obj,stack,parent){var keys;return stack=stack||[],Object.keys(obj).forEach((function(el){if(isObject(obj[el])&&!isArray(obj[el])){var p=parent?parent+"."+el:parent;deepKeys(obj[el],stack,p||el)}else{var key=parent?parent+"."+el:el;stack.push(key)}})),stack}function isScope(obj){return obj&&obj.$evalAsync&&obj.$watch}function isGreaterThanFilter(){return function(input,check){return input>check}}function isGreaterThanOrEqualToFilter(){return function(input,check){return input>=check}}function isLessThanFilter(){return function(input,check){return input<check}}function isLessThanOrEqualToFilter(){return function(input,check){return input<=check}}function isEqualToFilter(){return function(input,check){return input==check}}function isNotEqualToFilter(){return function(input,check){return input!=check}}function isIdenticalToFilter(){return function(input,check){return input===check}}function isNotIdenticalToFilter(){return function(input,check){return input!==check}}function containsFilter($parse){return function(collection,expression){return collection=isObject(collection)?toArray(collection):collection,!(!isArray(collection)||isUndefined(expression))&&collection.some((function(elm){return isString(expression)&&isObject(elm)||isFunction(expression)?$parse(expression)(elm):elm===expression}))}}function flatten(array,i){return(i=i||0)>=array.length?array:isArray(array[i])?flatten(array.slice(0,i).concat(array[i],array.slice(i+1)),i):flatten(array,i+1)}function uniqFilter($parse){return function(collection,property){if(collection=isObject(collection)?toArray(collection):collection,!isArray(collection))return collection;var uniqueItems=[],get=$parse(property);return isUndefined(property)?collection.filter((function(elm,pos,self){return self.indexOf(elm)===pos})):collection.filter((function(elm){var prop=get(elm);return!some(uniqueItems,prop)&&(uniqueItems.push(prop),!0)}));function some(array,member){return!isUndefined(member)&&array.some((function(el){return equals(el,member)}))}}}function strRepeat(str,n,sep){return n?str+sep+strRepeat(str,--n,sep):str}function ucfirstFilter(){return function(input){return isString(input)?input.split(" ").map((function(ch){return ch.charAt(0).toUpperCase()+ch.substring(1)})).join(" "):input}}String.prototype.contains||(String.prototype.contains=function(){return-1!==String.prototype.indexOf.apply(this,arguments)}),angular.module("a8m.angular",[]).filter("isUndefined",(function(){return function(input){return angular.isUndefined(input)}})).filter("isDefined",(function(){return function(input){return angular.isDefined(input)}})).filter("isFunction",(function(){return function(input){return angular.isFunction(input)}})).filter("isString",(function(){return function(input){return angular.isString(input)}})).filter("isNumber",(function(){return function(input){return angular.isNumber(input)}})).filter("isArray",(function(){return function(input){return angular.isArray(input)}})).filter("isObject",(function(){return function(input){return angular.isObject(input)}})).filter("isEqual",(function(){return function(o1,o2){return angular.equals(o1,o2)}})),angular.module("a8m.conditions",[]).filter({isGreaterThan:isGreaterThanFilter,">":isGreaterThanFilter,isGreaterThanOrEqualTo:isGreaterThanOrEqualToFilter,">=":isGreaterThanOrEqualToFilter,isLessThan:isLessThanFilter,"<":isLessThanFilter,isLessThanOrEqualTo:isLessThanOrEqualToFilter,"<=":isLessThanOrEqualToFilter,isEqualTo:isEqualToFilter,"==":isEqualToFilter,isNotEqualTo:isNotEqualToFilter,"!=":isNotEqualToFilter,isIdenticalTo:isIdenticalToFilter,"===":isIdenticalToFilter,isNotIdenticalTo:isNotIdenticalToFilter,"!==":isNotIdenticalToFilter}),angular.module("a8m.is-null",[]).filter("isNull",(function(){return function(input){return isNull(input)}})),angular.module("a8m.after-where",[]).filter("afterWhere",(function(){return function(collection,object){if(collection=isObject(collection)?toArray(collection):collection,!isArray(collection)||isUndefined(object))return collection;var index=collection.map((function(elm){return objectContains(object,elm)})).indexOf(!0);return collection.slice(-1===index?0:index)}})),angular.module("a8m.after",[]).filter("after",(function(){return function(collection,count){return collection=isObject(collection)?toArray(collection):collection,isArray(collection)?collection.slice(count):collection}})),angular.module("a8m.before-where",[]).filter("beforeWhere",(function(){return function(collection,object){if(collection=isObject(collection)?toArray(collection):collection,!isArray(collection)||isUndefined(object))return collection;var index=collection.map((function(elm){return objectContains(object,elm)})).indexOf(!0);return collection.slice(0,-1===index?collection.length:++index)}})),angular.module("a8m.before",[]).filter("before",(function(){return function(collection,count){return collection=isObject(collection)?toArray(collection):collection,isArray(collection)?collection.slice(0,count?--count:count):collection}})),angular.module("a8m.chunk-by",["a8m.filter-watcher"]).filter("chunkBy",["filterWatcher",function(filterWatcher){return function(array,n,fillVal){return filterWatcher.isMemoized("chunkBy",arguments)||filterWatcher.memoize("chunkBy",arguments,this,_chunkBy(array,n,fillVal));function fill(n,val){for(var ret=[];n--;)ret[n]=val;return ret}function _chunkBy(array,n,fillVal){return isArray(array)?array.map((function(el,i,self){return i*=n,el=self.slice(i,i+n),!isUndefined(fillVal)&&el.length<n?el.concat(fill(n-el.length,fillVal)):el})).slice(0,Math.ceil(array.length/n)):array}}}]),angular.module("a8m.concat",[]).filter("concat",[function(){return function(collection,joined){if(isUndefined(joined))return collection;if(isArray(collection))return isObject(joined)?collection.concat(toArray(joined)):collection.concat(joined);if(isObject(collection)){var array=toArray(collection);return isObject(joined)?array.concat(toArray(joined)):array.concat(joined)}return collection}}]),angular.module("a8m.contains",[]).filter({contains:["$parse",containsFilter],some:["$parse",containsFilter]}),angular.module("a8m.count-by",[]).filter("countBy",["$parse",function($parse){return function(collection,property){var result={},get=$parse(property),prop;return collection=isObject(collection)?toArray(collection):collection,!isArray(collection)||isUndefined(property)?collection:(collection.forEach((function(elm){prop=get(elm),result[prop]||(result[prop]=0),result[prop]++})),result)}}]),angular.module("a8m.defaults",[]).filter("defaults",["$parse",function($parse){return function(collection,defaults){if(collection=isObject(collection)?toArray(collection):collection,!isArray(collection)||!isObject(defaults))return collection;var keys=deepKeys(defaults);return collection.forEach((function(elm){keys.forEach((function(key){var getter=$parse(key),setter=getter.assign;isUndefined(getter(elm))&&setter(elm,getter(defaults))}))})),collection}}]),angular.module("a8m.every",[]).filter("every",["$parse",function($parse){return function(collection,expression){return collection=isObject(collection)?toArray(collection):collection,!(isArray(collection)&&!isUndefined(expression))||collection.every((function(elm){return isObject(elm)||isFunction(expression)?$parse(expression)(elm):elm===expression}))}}]),angular.module("a8m.filter-by",[]).filter("filterBy",["$parse",function($parse){return function(collection,properties,search,strict){var comparator;return search=isString(search)||isNumber(search)?String(search).toLowerCase():void 0,collection=isObject(collection)?toArray(collection):collection,!isArray(collection)||isUndefined(search)?collection:collection.filter((function(elm){return properties.some((function(prop){if(~prop.indexOf("+")){var propList=prop.replace(/\s+/g,"").split("+");comparator=propList.map((function(prop){return $parse(prop)(elm)})).join(" ")}else comparator=$parse(prop)(elm);return!(!isString(comparator)&&!isNumber(comparator))&&(comparator=String(comparator).toLowerCase(),strict?comparator===search:comparator.contains(search))}))}))}}]),angular.module("a8m.first",[]).filter("first",["$parse",function($parse){return function(collection){var n,getter,args;return collection=isObject(collection)?toArray(collection):collection,isArray(collection)?(args=Array.prototype.slice.call(arguments,1),n=isNumber(args[0])?args[0]:1,getter=isNumber(args[0])?isNumber(args[1])?void 0:args[1]:args[0],args.length?getFirstMatches(collection,n,getter?$parse(getter):getter):collection[0]):collection}}]),angular.module("a8m.flatten",[]).filter("flatten",(function(){return function(collection,shallow){return shallow=shallow||!1,collection=isObject(collection)?toArray(collection):collection,isArray(collection)?shallow?[].concat.apply([],collection):flatten(collection,0):collection}})),angular.module("a8m.fuzzy-by",[]).filter("fuzzyBy",["$parse",function($parse){return function(collection,property,search,csensitive){var sensitive=csensitive||!1,prop,getter;return collection=isObject(collection)?toArray(collection):collection,!isArray(collection)||isUndefined(property)||isUndefined(search)?collection:(getter=$parse(property),collection.filter((function(elm){return prop=getter(elm),!!isString(prop)&&(prop=sensitive?prop:prop.toLowerCase(),search=sensitive?search:search.toLowerCase(),!1!==hasApproxPattern(prop,search))})))}}]),angular.module("a8m.fuzzy",[]).filter("fuzzy",(function(){return function(collection,search,csensitive){var sensitive=csensitive||!1;return collection=isObject(collection)?toArray(collection):collection,!isArray(collection)||isUndefined(search)?collection:(search=sensitive?search:search.toLowerCase(),collection.filter((function(elm){return isString(elm)?!1!==hasApproxPattern(elm=sensitive?elm:elm.toLowerCase(),search):!!isObject(elm)&&_hasApproximateKey(elm,search)})));function _hasApproximateKey(object,search){var properties,prop,flag;return 0<Object.keys(object).filter((function(elm){return prop=object[elm],!!flag||!!isString(prop)&&(prop=sensitive?prop:prop.toLowerCase(),flag=!1!==hasApproxPattern(prop,search))})).length}}})),angular.module("a8m.group-by",["a8m.filter-watcher"]).filter("groupBy",["$parse","filterWatcher",function($parse,filterWatcher){return function(collection,property){return!isObject(collection)||isUndefined(property)?collection:filterWatcher.isMemoized("groupBy",arguments)||filterWatcher.memoize("groupBy",arguments,this,_groupBy(collection,$parse(property)));function _groupBy(collection,getter){var result={},prop;return forEach(collection,(function(elm){prop=getter(elm),result[prop]||(result[prop]=[]),result[prop].push(elm)})),result}}}]),angular.module("a8m.is-empty",[]).filter("isEmpty",(function(){return function(collection){return isObject(collection)?!toArray(collection).length:!collection.length}})),angular.module("a8m.join",[]).filter("join",(function(){return function(input,delimiter){return isUndefined(input)||!isArray(input)?input:(isUndefined(delimiter)&&(delimiter=" "),input.join(delimiter))}})),angular.module("a8m.last",[]).filter("last",["$parse",function($parse){return function(collection){var n,getter,args,reversed=copy(collection);return reversed=isObject(reversed)?toArray(reversed):reversed,isArray(reversed)?(args=Array.prototype.slice.call(arguments,1),n=isNumber(args[0])?args[0]:1,getter=isNumber(args[0])?isNumber(args[1])?void 0:args[1]:args[0],args.length?getFirstMatches(reversed.reverse(),n,getter?$parse(getter):getter).reverse():reversed[reversed.length-1]):reversed}}]),angular.module("a8m.map",[]).filter("map",["$parse",function($parse){return function(collection,expression){return collection=isObject(collection)?toArray(collection):collection,!isArray(collection)||isUndefined(expression)?collection:collection.map((function(elm){return $parse(expression)(elm)}))}}]),angular.module("a8m.omit",[]).filter("omit",["$parse",function($parse){return function(collection,expression){return collection=isObject(collection)?toArray(collection):collection,!isArray(collection)||isUndefined(expression)?collection:collection.filter((function(elm){return!$parse(expression)(elm)}))}}]),angular.module("a8m.pick",[]).filter("pick",["$parse",function($parse){return function(collection,expression){return collection=isObject(collection)?toArray(collection):collection,!isArray(collection)||isUndefined(expression)?collection:collection.filter((function(elm){return $parse(expression)(elm)}))}}]),angular.module("a8m.range",[]).filter("range",(function(){return function(input,total,start,increment,cb){start=start||0,increment=increment||1;for(var i=0;i<parseInt(total);i++){var j=start+i*increment;input.push(isFunction(cb)?cb(j):j)}return input}})),angular.module("a8m.remove-with",[]).filter("removeWith",(function(){return function(collection,object){return isUndefined(object)?collection:(collection=isObject(collection)?toArray(collection):collection).filter((function(elm){return!objectContains(object,elm)}))}})),angular.module("a8m.remove",[]).filter("remove",(function(){return function(collection){collection=isObject(collection)?toArray(collection):collection;var args=Array.prototype.slice.call(arguments,1);return isArray(collection)?collection.filter((function(member){return!args.some((function(nest){return equals(nest,member)}))})):collection}})),angular.module("a8m.reverse",[]).filter("reverse",[function(){return function(input){return input=isObject(input)?toArray(input):input,isString(input)?input.split("").reverse().join(""):isArray(input)?input.slice().reverse():input}}]),angular.module("a8m.search-field",[]).filter("searchField",["$parse",function($parse){return function(collection){var get,field;collection=isObject(collection)?toArray(collection):collection;var args=Array.prototype.slice.call(arguments,1);return isArray(collection)&&args.length?collection.map((function(member){return field=args.map((function(field){return(get=$parse(field))(member)})).join(" "),extend(member,{searchField:field})})):collection}}]),angular.module("a8m.to-array",[]).filter("toArray",(function(){return function(collection,addKey){return isObject(collection)?addKey?Object.keys(collection).map((function(key){return extend(collection[key],{$key:key})})):toArray(collection):collection}})),angular.module("a8m.unique",[]).filter({unique:["$parse",uniqFilter],uniq:["$parse",uniqFilter]}),angular.module("a8m.where",[]).filter("where",(function(){return function(collection,object){return isUndefined(object)?collection:(collection=isObject(collection)?toArray(collection):collection).filter((function(elm){return objectContains(object,elm)}))}})),angular.module("a8m.xor",[]).filter("xor",["$parse",function($parse){return function(col1,col2,expression){return expression=expression||!1,col1=isObject(col1)?toArray(col1):col1,col2=isObject(col2)?toArray(col2):col2,isArray(col1)&&isArray(col2)?col1.concat(col2).filter((function(elm){return!(some(elm,col1)&&some(elm,col2))})):col1;function some(el,col){var getter=$parse(expression);return col.some((function(dElm){return expression?equals(getter(dElm),getter(el)):equals(dElm,el)}))}}}]),angular.module("a8m.math.abs",[]).filter("abs",(function(){return function(input){return Math.abs(input)}})),angular.module("a8m.math.byteFmt",[]).filter("byteFmt",(function(){var compared=[{str:"B",val:1024}];return["KB","MB","GB","TB","PB","EB","ZB","YB"].forEach((function(el,i){compared.push({str:el,val:1024*compared[i].val})})),function(bytes,decimal){if(isNumber(decimal)&&isFinite(decimal)&&decimal%1==0&&decimal>=0&&isNumber(bytes)&&isFinite(bytes)){for(var i=0;i<compared.length-1&&bytes>=compared[i].val;)i++;return convertToDecimal(bytes/=i>0?compared[i-1].val:1,decimal)+" "+compared[i].str}return"NaN"}})),angular.module("a8m.math.degrees",[]).filter("degrees",(function(){return function(radians,decimal){if(isNumber(decimal)&&isFinite(decimal)&&decimal%1==0&&decimal>=0&&isNumber(radians)&&isFinite(radians)){var degrees=180*radians/Math.PI;return Math.round(degrees*Math.pow(10,decimal))/Math.pow(10,decimal)}return"NaN"}})),angular.module("a8m.math.kbFmt",[]).filter("kbFmt",(function(){var compared=[{str:"KB",val:1024}];return["MB","GB","TB","PB","EB","ZB","YB"].forEach((function(el,i){compared.push({str:el,val:1024*compared[i].val})})),function(bytes,decimal){if(isNumber(decimal)&&isFinite(decimal)&&decimal%1==0&&decimal>=0&&isNumber(bytes)&&isFinite(bytes)){for(var i=0;i<compared.length-1&&bytes>=compared[i].val;)i++;return convertToDecimal(bytes/=i>0?compared[i-1].val:1,decimal)+" "+compared[i].str}return"NaN"}})),angular.module("a8m.math.max",[]).filter("max",["$parse",function($parse){return function(input,expression){return isArray(input)?isUndefined(expression)?Math.max.apply(Math,input):input[indexByMax(input,expression)]:input};function indexByMax(array,exp){var mappedArray=array.map((function(elm){return $parse(exp)(elm)}));return mappedArray.indexOf(Math.max.apply(Math,mappedArray))}}]),angular.module("a8m.math.min",[]).filter("min",["$parse",function($parse){return function(input,expression){return isArray(input)?isUndefined(expression)?Math.min.apply(Math,input):input[indexByMin(input,expression)]:input};function indexByMin(array,exp){var mappedArray=array.map((function(elm){return $parse(exp)(elm)}));return mappedArray.indexOf(Math.min.apply(Math,mappedArray))}}]),angular.module("a8m.math.percent",[]).filter("percent",(function(){return function(input,divided,round){var divider=isString(input)?Number(input):input;return divided=divided||100,round=round||!1,!isNumber(divider)||isNaN(divider)?input:round?Math.round(divider/divided*100):divider/divided*100}})),angular.module("a8m.math.radians",[]).filter("radians",(function(){return function(degrees,decimal){if(isNumber(decimal)&&isFinite(decimal)&&decimal%1==0&&decimal>=0&&isNumber(degrees)&&isFinite(degrees)){var radians=3.14159265359*degrees/180;return Math.round(radians*Math.pow(10,decimal))/Math.pow(10,decimal)}return"NaN"}})),angular.module("a8m.math.radix",[]).filter("radix",(function(){return function(input,radix){var RANGE=/^[2-9]$|^[1-2]\d$|^3[0-6]$/;return isNumber(input)&&RANGE.test(radix)?input.toString(radix).toUpperCase():input}})),angular.module("a8m.math.shortFmt",[]).filter("shortFmt",(function(){return function(number,decimal){return isNumber(decimal)&&isFinite(decimal)&&decimal%1==0&&decimal>=0&&isNumber(number)&&isFinite(number)?number<1e3?""+number:number<1e6?convertToDecimal(number/1e3,decimal)+" K":number<1e9?convertToDecimal(number/1e6,decimal)+" M":convertToDecimal(number/1e9,decimal)+" B":"NaN"}})),angular.module("a8m.math.sum",[]).filter("sum",(function(){return function(input,initial){return isArray(input)?input.reduce((function(prev,curr){return prev+curr}),initial||0):input}})),angular.module("a8m.ends-with",[]).filter("endsWith",(function(){return function(input,ends,csensitive){var sensitive=csensitive||!1,position;return!isString(input)||isUndefined(ends)?input:(position=(input=sensitive?input:input.toLowerCase()).length-ends.length,-1!==input.indexOf(sensitive?ends:ends.toLowerCase(),position))}})),angular.module("a8m.latinize",[]).filter("latinize",[function(){for(var defaultDiacriticsRemovalap=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"OE",letters:"Œ"},{base:"oe",letters:"œ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],diacriticsMap={},i=0;i<defaultDiacriticsRemovalap.length;i++)for(var letters=defaultDiacriticsRemovalap[i].letters.split(""),j=0;j<letters.length;j++)diacriticsMap[letters[j]]=defaultDiacriticsRemovalap[i].base;function removeDiacritics(str){return str.replace(/[^\u0000-\u007E]/g,(function(a){return diacriticsMap[a]||a}))}return function(input){return isString(input)?removeDiacritics(input):input}}]),angular.module("a8m.ltrim",[]).filter("ltrim",(function(){return function(input,chars){var trim=chars||"\\s";return isString(input)?input.replace(new RegExp("^"+trim+"+"),""):input}})),angular.module("a8m.match",[]).filter("match",(function(){return function(input,pattern,flag){var reg=new RegExp(pattern,flag);return isString(input)?input.match(reg):null}})),angular.module("a8m.phoneUS",[]).filter("phoneUS",(function(){return function(num){return"("+(num+="").slice(0,3)+") "+num.slice(3,6)+"-"+num.slice(6)}})),angular.module("a8m.repeat",[]).filter("repeat",[function(){return function(input,n,separator){var times=~~n;return isString(input)&&times?strRepeat(input,--n,separator||""):input}}]),angular.module("a8m.rtrim",[]).filter("rtrim",(function(){return function(input,chars){var trim=chars||"\\s";return isString(input)?input.replace(new RegExp(trim+"+$"),""):input}})),angular.module("a8m.slugify",[]).filter("slugify",[function(){return function(input,sub){var replace=isUndefined(sub)?"-":sub;return isString(input)?input.toLowerCase().replace(/\s+/g,replace):input}}]),angular.module("a8m.split",[]).filter("split",(function(){function escapeRegExp(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}return function(input,delimiter,skip){var _regexp,_matches,_splitted,_temp;return isUndefined(input)||!isString(input)?null:(isUndefined(delimiter)&&(delimiter=""),isNaN(skip)&&(skip=0),_regexp=new RegExp(escapeRegExp(delimiter),"g"),isNull(_matches=input.match(_regexp))||skip>=_matches.length?[input]:0===skip?input.split(delimiter):(_temp=(_splitted=input.split(delimiter)).splice(0,skip+1),_splitted.unshift(_temp.join(delimiter)),_splitted))}})),angular.module("a8m.starts-with",[]).filter("startsWith",(function(){return function(input,start,csensitive){var sensitive=csensitive||!1;return!isString(input)||isUndefined(start)?input:!(input=sensitive?input:input.toLowerCase()).indexOf(sensitive?start:start.toLowerCase())}})),angular.module("a8m.stringular",[]).filter("stringular",(function(){return function(input){var args=Array.prototype.slice.call(arguments,1);return input.replace(/{(\d+)}/g,(function(match,number){return isUndefined(args[number])?match:args[number]}))}})),angular.module("a8m.strip-tags",[]).filter("stripTags",(function(){return function(input){return isString(input)?input.replace(/<\S[^><]*>/g,""):input}})),angular.module("a8m.test",[]).filter("test",(function(){return function(input,pattern,flag){var reg=new RegExp(pattern,flag);return isString(input)?reg.test(input):input}})),angular.module("a8m.trim",[]).filter("trim",(function(){return function(input,chars){var trim=chars||"\\s";return isString(input)?input.replace(new RegExp("^"+trim+"+|"+trim+"+$","g"),""):input}})),angular.module("a8m.truncate",[]).filter("truncate",(function(){return function(input,length,suffix,preserve){return length=isUndefined(length)?input.length:length,preserve=preserve||!1,suffix=suffix||"",!isString(input)||input.length<=length?input:input.substring(0,preserve?-1===input.indexOf(" ",length)?input.length:input.indexOf(" ",length):length)+suffix}})),angular.module("a8m.ucfirst",[]).filter({ucfirst:ucfirstFilter,titleize:ucfirstFilter}),angular.module("a8m.uri-component-encode",[]).filter("uriComponentEncode",["$window",function($window){return function(input){return isString(input)?$window.encodeURIComponent(input):input}}]),angular.module("a8m.uri-encode",[]).filter("uriEncode",["$window",function($window){return function(input){return isString(input)?$window.encodeURI(input):input}}]),angular.module("a8m.wrap",[]).filter("wrap",(function(){return function(input,wrap,ends){return isString(input)&&isDefined(wrap)?[wrap,input,ends||wrap].join(""):input}})),angular.module("a8m.filter-watcher",[]).provider("filterWatcher",(function(){this.$get=["$window","$rootScope",function($window,$rootScope){var $$cache={},$$listeners={},$$timeout=$window.setTimeout;function getHashKey(fName,args){function replacerFactory(){var cache=[];return function(key,val){if(isObject(val)&&!isNull(val)){if(~cache.indexOf(val))return"[Circular]";cache.push(val)}return $window==val?"$WINDOW":$window.document==val?"$DOCUMENT":isScope(val)?"$SCOPE":val}}return[fName,JSON.stringify(args,replacerFactory())].join("#").replace(/"/g,"")}function removeCache(event){var id=event.targetScope.$id;forEach($$listeners[id],(function(key){delete $$cache[key]})),delete $$listeners[id]}function cleanStateless(){$$timeout((function(){$rootScope.$$phase||($$cache={})}),2e3)}function addListener(scope,hashKey){var id=scope.$id;return isUndefined($$listeners[id])&&(scope.$on("$destroy",removeCache),$$listeners[id]=[]),$$listeners[id].push(hashKey)}function $$isMemoized(filterName,args){var hashKey=getHashKey(filterName,args);return $$cache[hashKey]}function $$memoize(filterName,args,scope,result){var hashKey=getHashKey(filterName,args);return $$cache[hashKey]=result,isScope(scope)?addListener(scope,hashKey):cleanStateless(),result}return{isMemoized:$$isMemoized,memoize:$$memoize}}]})),angular.module("angular.filter",["a8m.ucfirst","a8m.uri-encode","a8m.uri-component-encode","a8m.slugify","a8m.latinize","a8m.strip-tags","a8m.stringular","a8m.truncate","a8m.starts-with","a8m.ends-with","a8m.wrap","a8m.trim","a8m.ltrim","a8m.rtrim","a8m.repeat","a8m.test","a8m.match","a8m.split","a8m.phoneUS","a8m.to-array","a8m.concat","a8m.contains","a8m.unique","a8m.is-empty","a8m.after","a8m.after-where","a8m.before","a8m.before-where","a8m.defaults","a8m.where","a8m.reverse","a8m.remove","a8m.remove-with","a8m.group-by","a8m.count-by","a8m.chunk-by","a8m.search-field","a8m.fuzzy-by","a8m.fuzzy","a8m.omit","a8m.pick","a8m.every","a8m.filter-by","a8m.xor","a8m.map","a8m.first","a8m.last","a8m.flatten","a8m.join","a8m.range","a8m.math.max","a8m.math.min","a8m.math.abs","a8m.math.percent","a8m.math.radix","a8m.math.sum","a8m.math.degrees","a8m.math.radians","a8m.math.byteFmt","a8m.math.kbFmt","a8m.math.shortFmt","a8m.angular","a8m.conditions","a8m.is-null","a8m.filter-watcher"])}(window,window.angular),angular.module("md5",[]).constant("md5",function(){var hexcase=0,b64pad="";function hex_md5(s){return rstr2hex(rstr_md5(str2rstr_utf8(s)))}function b64_md5(s){return rstr2b64(rstr_md5(str2rstr_utf8(s)))}function any_md5(s,e){return rstr2any(rstr_md5(str2rstr_utf8(s)),e)}function hex_hmac_md5(k,d){return rstr2hex(rstr_hmac_md5(str2rstr_utf8(k),str2rstr_utf8(d)))}function b64_hmac_md5(k,d){return rstr2b64(rstr_hmac_md5(str2rstr_utf8(k),str2rstr_utf8(d)))}function any_hmac_md5(k,d,e){return rstr2any(rstr_hmac_md5(str2rstr_utf8(k),str2rstr_utf8(d)),e)}function md5_vm_test(){return"900150983cd24fb0d6963f7d28e17f72"==hex_md5("abc").toLowerCase()}function rstr_md5(s){return binl2rstr(binl_md5(rstr2binl(s),8*s.length))}function rstr_hmac_md5(key,data){var bkey=rstr2binl(key);bkey.length>16&&(bkey=binl_md5(bkey,8*key.length));for(var ipad=Array(16),opad=Array(16),i=0;i<16;i++)ipad[i]=909522486^bkey[i],opad[i]=1549556828^bkey[i];var hash=binl_md5(ipad.concat(rstr2binl(data)),512+8*data.length);return binl2rstr(binl_md5(opad.concat(hash),640))}function rstr2hex(input){for(var hex_tab=hexcase?"0123456789ABCDEF":"0123456789abcdef",output="",x,i=0;i<input.length;i++)x=input.charCodeAt(i),output+=hex_tab.charAt(x>>>4&15)+hex_tab.charAt(15&x);return output}function rstr2b64(input){for(var tab="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",output="",len=input.length,i=0;i<len;i+=3)for(var triplet=input.charCodeAt(i)<<16|(i+1<len?input.charCodeAt(i+1)<<8:0)|(i+2<len?input.charCodeAt(i+2):0),j=0;j<4;j++)8*i+6*j>8*input.length?output+=b64pad:output+=tab.charAt(triplet>>>6*(3-j)&63);return output}function rstr2any(input,encoding){var divisor=encoding.length,i,j,q,x,quotient,dividend=Array(Math.ceil(input.length/2));for(i=0;i<dividend.length;i++)dividend[i]=input.charCodeAt(2*i)<<8|input.charCodeAt(2*i+1);var full_length=Math.ceil(8*input.length/(Math.log(encoding.length)/Math.log(2))),remainders=Array(full_length);for(j=0;j<full_length;j++){for(quotient=Array(),x=0,i=0;i<dividend.length;i++)x=(x<<16)+dividend[i],x-=(q=Math.floor(x/divisor))*divisor,(quotient.length>0||q>0)&&(quotient[quotient.length]=q);remainders[j]=x,dividend=quotient}var output="";for(i=remainders.length-1;i>=0;i--)output+=encoding.charAt(remainders[i]);return output}function str2rstr_utf8(input){for(var output="",i=-1,x,y;++i<input.length;)x=input.charCodeAt(i),y=i+1<input.length?input.charCodeAt(i+1):0,55296<=x&&x<=56319&&56320<=y&&y<=57343&&(x=65536+((1023&x)<<10)+(1023&y),i++),x<=127?output+=String.fromCharCode(x):x<=2047?output+=String.fromCharCode(192|x>>>6&31,128|63&x):x<=65535?output+=String.fromCharCode(224|x>>>12&15,128|x>>>6&63,128|63&x):x<=2097151&&(output+=String.fromCharCode(240|x>>>18&7,128|x>>>12&63,128|x>>>6&63,128|63&x));return output}function str2rstr_utf16le(input){for(var output="",i=0;i<input.length;i++)output+=String.fromCharCode(255&input.charCodeAt(i),input.charCodeAt(i)>>>8&255);return output}function str2rstr_utf16be(input){for(var output="",i=0;i<input.length;i++)output+=String.fromCharCode(input.charCodeAt(i)>>>8&255,255&input.charCodeAt(i));return output}function rstr2binl(input){for(var output=Array(input.length>>2),i=0;i<output.length;i++)output[i]=0;for(var i=0;i<8*input.length;i+=8)output[i>>5]|=(255&input.charCodeAt(i/8))<<i%32;return output}function binl2rstr(input){for(var output="",i=0;i<32*input.length;i+=8)output+=String.fromCharCode(input[i>>5]>>>i%32&255);return output}function binl_md5(x,len){x[len>>5]|=128<<len%32,x[14+(len+64>>>9<<4)]=len;for(var a=1732584193,b=-271733879,c=-1732584194,d=271733878,i=0;i<x.length;i+=16){var olda=a,oldb=b,oldc=c,oldd=d;a=md5_ff(a,b,c,d,x[i+0],7,-680876936),d=md5_ff(d,a,b,c,x[i+1],12,-389564586),c=md5_ff(c,d,a,b,x[i+2],17,606105819),b=md5_ff(b,c,d,a,x[i+3],22,-1044525330),a=md5_ff(a,b,c,d,x[i+4],7,-176418897),d=md5_ff(d,a,b,c,x[i+5],12,1200080426),c=md5_ff(c,d,a,b,x[i+6],17,-1473231341),b=md5_ff(b,c,d,a,x[i+7],22,-45705983),a=md5_ff(a,b,c,d,x[i+8],7,1770035416),d=md5_ff(d,a,b,c,x[i+9],12,-1958414417),c=md5_ff(c,d,a,b,x[i+10],17,-42063),b=md5_ff(b,c,d,a,x[i+11],22,-1990404162),a=md5_ff(a,b,c,d,x[i+12],7,1804603682),d=md5_ff(d,a,b,c,x[i+13],12,-40341101),c=md5_ff(c,d,a,b,x[i+14],17,-1502002290),a=md5_gg(a,b=md5_ff(b,c,d,a,x[i+15],22,1236535329),c,d,x[i+1],5,-165796510),d=md5_gg(d,a,b,c,x[i+6],9,-1069501632),c=md5_gg(c,d,a,b,x[i+11],14,643717713),b=md5_gg(b,c,d,a,x[i+0],20,-373897302),a=md5_gg(a,b,c,d,x[i+5],5,-701558691),d=md5_gg(d,a,b,c,x[i+10],9,38016083),c=md5_gg(c,d,a,b,x[i+15],14,-660478335),b=md5_gg(b,c,d,a,x[i+4],20,-405537848),a=md5_gg(a,b,c,d,x[i+9],5,568446438),d=md5_gg(d,a,b,c,x[i+14],9,-1019803690),c=md5_gg(c,d,a,b,x[i+3],14,-187363961),b=md5_gg(b,c,d,a,x[i+8],20,1163531501),a=md5_gg(a,b,c,d,x[i+13],5,-1444681467),d=md5_gg(d,a,b,c,x[i+2],9,-51403784),c=md5_gg(c,d,a,b,x[i+7],14,1735328473),a=md5_hh(a,b=md5_gg(b,c,d,a,x[i+12],20,-1926607734),c,d,x[i+5],4,-378558),d=md5_hh(d,a,b,c,x[i+8],11,-2022574463),c=md5_hh(c,d,a,b,x[i+11],16,1839030562),b=md5_hh(b,c,d,a,x[i+14],23,-35309556),a=md5_hh(a,b,c,d,x[i+1],4,-1530992060),d=md5_hh(d,a,b,c,x[i+4],11,1272893353),c=md5_hh(c,d,a,b,x[i+7],16,-155497632),b=md5_hh(b,c,d,a,x[i+10],23,-1094730640),a=md5_hh(a,b,c,d,x[i+13],4,681279174),d=md5_hh(d,a,b,c,x[i+0],11,-358537222),c=md5_hh(c,d,a,b,x[i+3],16,-722521979),b=md5_hh(b,c,d,a,x[i+6],23,76029189),a=md5_hh(a,b,c,d,x[i+9],4,-640364487),d=md5_hh(d,a,b,c,x[i+12],11,-421815835),c=md5_hh(c,d,a,b,x[i+15],16,530742520),a=md5_ii(a,b=md5_hh(b,c,d,a,x[i+2],23,-995338651),c,d,x[i+0],6,-198630844),d=md5_ii(d,a,b,c,x[i+7],10,1126891415),c=md5_ii(c,d,a,b,x[i+14],15,-1416354905),b=md5_ii(b,c,d,a,x[i+5],21,-57434055),a=md5_ii(a,b,c,d,x[i+12],6,1700485571),d=md5_ii(d,a,b,c,x[i+3],10,-1894986606),c=md5_ii(c,d,a,b,x[i+10],15,-1051523),b=md5_ii(b,c,d,a,x[i+1],21,-2054922799),a=md5_ii(a,b,c,d,x[i+8],6,1873313359),d=md5_ii(d,a,b,c,x[i+15],10,-30611744),c=md5_ii(c,d,a,b,x[i+6],15,-1560198380),b=md5_ii(b,c,d,a,x[i+13],21,1309151649),a=md5_ii(a,b,c,d,x[i+4],6,-145523070),d=md5_ii(d,a,b,c,x[i+11],10,-1120210379),c=md5_ii(c,d,a,b,x[i+2],15,718787259),b=md5_ii(b,c,d,a,x[i+9],21,-343485551),a=safe_add(a,olda),b=safe_add(b,oldb),c=safe_add(c,oldc),d=safe_add(d,oldd)}return Array(a,b,c,d)}function md5_cmn(q,a,b,x,s,t){return safe_add(bit_rol(safe_add(safe_add(a,q),safe_add(x,t)),s),b)}function md5_ff(a,b,c,d,x,s,t){return md5_cmn(b&c|~b&d,a,b,x,s,t)}function md5_gg(a,b,c,d,x,s,t){return md5_cmn(b&d|c&~d,a,b,x,s,t)}function md5_hh(a,b,c,d,x,s,t){return md5_cmn(b^c^d,a,b,x,s,t)}function md5_ii(a,b,c,d,x,s,t){return md5_cmn(c^(b|~d),a,b,x,s,t)}function safe_add(x,y){var lsw=(65535&x)+(65535&y),msw;return(x>>16)+(y>>16)+(lsw>>16)<<16|65535&lsw}function bit_rol(num,cnt){return num<<cnt|num>>>32-cnt}return hex_md5}()),function(){var gravatarDirectiveFactory;gravatarDirectiveFactory=function(bindOnce){return["gravatarService",function(gravatarService){var filterKeys;return filterKeys=function(prefix,object){var k,retVal,v;for(k in retVal={},object)v=object[k],0===k.indexOf(prefix)&&(k=k.substr(prefix.length).toLowerCase()).length>0&&(retVal[k]=v);return retVal},{restrict:"A",link:function(scope,element,attrs){var directiveName,item,opts,unbind;item=attrs[directiveName=bindOnce?"gravatarSrcOnce":"gravatarSrc"],delete attrs[directiveName],opts=filterKeys("gravatar",attrs),unbind=scope.$watch(item,(function(newVal){if(element.attr("src",gravatarService.url(newVal,opts)),bindOnce){if(null==newVal)return;unbind()}}))}}}]},angular.module("ui.gravatar",["md5"]).provider("gravatarService",["md5",function(md5){var hashRegex,self,serialize;return self=this,hashRegex=/^[0-9a-f]{32}$/i,serialize=function(object){var k,params,v;for(k in params=[],object)v=object[k],params.push(k+"="+encodeURIComponent(v));return params.join("&")},this.defaults={},this.secure=!1,this.protocol=null,this.urlFunc=function(opts){var params,pieces,prefix,src,urlBase;return prefix=opts.protocol?opts.protocol+":":"",pieces=[urlBase=opts.secure?"https://secure":prefix+"//www",".gravatar.com/avatar/",src=hashRegex.test(opts.src)?opts.src:md5(opts.src)],(params=serialize(opts.params)).length>0&&pieces.push("?"+params),pieces.join("")},this.$get=[function(){return{url:function(src,params){return null==src&&(src=""),null==params&&(params={}),self.urlFunc({params:angular.extend(angular.copy(self.defaults),params),protocol:self.protocol,secure:self.secure,src:src})}}}],this}]).directive("gravatarSrc",gravatarDirectiveFactory()).directive("gravatarSrcOnce",gravatarDirectiveFactory(!0))}.call(this),function(){"use strict";angular.module("cfp.hotkeys",[]).provider("hotkeys",["$injector",function($injector){this.includeCheatSheet=!0,this.useNgRoute=$injector.has("ngViewDirective"),this.templateTitle="Keyboard Shortcuts:",this.templateHeader=null,this.templateFooter=null,this.template='<div class="cfp-hotkeys-container fade" ng-class="{in: helpVisible}" style="display: none;"><div class="cfp-hotkeys"><h4 class="cfp-hotkeys-title" ng-if="!header">{{ title }}</h4><div ng-bind-html="header" ng-if="header"></div><table><tbody><tr ng-repeat="hotkey in hotkeys | filter:{ description: \'!$$undefined$$\' }"><td class="cfp-hotkeys-keys"><span ng-repeat="key in hotkey.format() track by $index" class="cfp-hotkeys-key">{{ key }}</span></td><td class="cfp-hotkeys-text">{{ hotkey.description }}</td></tr></tbody></table><div ng-bind-html="footer" ng-if="footer"></div><div class="cfp-hotkeys-close" ng-click="toggleCheatSheet()">&#215;</div></div></div>',this.cheatSheetHotkey="?",this.cheatSheetDescription="Show / hide this help menu",this.$get=["$rootElement","$rootScope","$compile","$window","$document",function($rootElement,$rootScope,$compile,$window,$document){var mouseTrapEnabled=!0;function pause(){mouseTrapEnabled=!1}function unpause(){mouseTrapEnabled=!0}function symbolize(combo){var map={command:"⌘",shift:"⇧",left:"←",right:"→",up:"↑",down:"↓",return:"⏎",backspace:"⌫"};combo=combo.split("+");for(var i=0;i<combo.length;i++)"mod"===combo[i]&&($window.navigator&&$window.navigator.platform.indexOf("Mac")>=0?combo[i]="command":combo[i]="ctrl"),combo[i]=map[combo[i]]||combo[i];return combo.join(" + ")}function Hotkey(combo,description,callback,action,allowIn,persistent){this.combo=combo instanceof Array?combo:[combo],this.description=description,this.callback=callback,this.action=action,this.allowIn=allowIn,this.persistent=persistent,this._formated=null}Mousetrap.prototype.stopCallback=function(event,element){return!mouseTrapEnabled||!((" "+element.className+" ").indexOf(" mousetrap ")>-1)&&(element.contentEditable&&"true"==element.contentEditable)},Hotkey.prototype.format=function(){if(null===this._formated){for(var combo,sequence=this.combo[0].split(/[\s]/),i=0;i<sequence.length;i++)sequence[i]=symbolize(sequence[i]);this._formated=sequence}return this._formated};var scope=$rootScope.$new();scope.hotkeys=[],scope.helpVisible=!1,scope.title=this.templateTitle,scope.header=this.templateHeader,scope.footer=this.templateFooter,scope.toggleCheatSheet=toggleCheatSheet;var boundScopes={};if(this.useNgRoute&&$rootScope.$on("$routeChangeSuccess",(function(event,route){purgeHotkeys(),route&&route.hotkeys&&angular.forEach(route.hotkeys,(function(hotkey){var callback=hotkey[2];("string"==typeof callback||callback instanceof String)&&(hotkey[2]=[callback,route]),hotkey[5]=!1,_add.apply(this,hotkey)}))})),this.includeCheatSheet){var document=$document[0],element=$rootElement[0],helpMenu=angular.element(this.template);_add(this.cheatSheetHotkey,this.cheatSheetDescription,toggleCheatSheet),element!==document&&element!==document.documentElement||(element=document.body),angular.element(element).append($compile(helpMenu)(scope))}function purgeHotkeys(){for(var i=scope.hotkeys.length;i--;){var hotkey=scope.hotkeys[i];hotkey&&!hotkey.persistent&&_del(hotkey)}}var previousEsc=!1,publicApi;function toggleCheatSheet(){scope.helpVisible=!scope.helpVisible,scope.helpVisible?(previousEsc=_get("esc"),_del("esc"),_add("esc",previousEsc.description,toggleCheatSheet,null,["INPUT","SELECT","TEXTAREA"])):(_del("esc"),!1!==previousEsc&&_add(previousEsc))}function _add(combo,description,callback,action,allowIn,persistent){var _callback,preventIn=["INPUT","SELECT","TEXTAREA"],objType;if("[object Object]"===Object.prototype.toString.call(combo)&&(description=combo.description,callback=combo.callback,action=combo.action,persistent=combo.persistent,allowIn=combo.allowIn,combo=combo.combo),_del(combo),description instanceof Function?(action=callback,callback=description,description="$$undefined$$"):angular.isUndefined(description)&&(description="$$undefined$$"),void 0===persistent&&(persistent=!0),"function"==typeof callback){var index;_callback=callback,allowIn instanceof Array||(allowIn=[]);for(var i=0;i<allowIn.length;i++)allowIn[i]=allowIn[i].toUpperCase(),-1!==(index=preventIn.indexOf(allowIn[i]))&&preventIn.splice(index,1);callback=function(event){var shouldExecute=!0;if(event){var target=event.target||event.srcElement,nodeName=target.nodeName.toUpperCase();if((" "+target.className+" ").indexOf(" mousetrap ")>-1)shouldExecute=!0;else for(var i=0;i<preventIn.length;i++)if(preventIn[i]===nodeName){shouldExecute=!1;break}}shouldExecute&&wrapApply(_callback.apply(this,arguments))}}"string"==typeof action?Mousetrap.bind(combo,wrapApply(callback),action):Mousetrap.bind(combo,wrapApply(callback));var hotkey=new Hotkey(combo,description,callback,action,allowIn,persistent);return scope.hotkeys.push(hotkey),hotkey}function _del(hotkey){var combo=hotkey instanceof Hotkey?hotkey.combo:hotkey;if(Mousetrap.unbind(combo),angular.isArray(combo)){for(var retStatus=!0,i=combo.length;i--;)retStatus=_del(combo[i])&&retStatus;return retStatus}var index=scope.hotkeys.indexOf(_get(combo));return index>-1&&(scope.hotkeys[index].combo.length>1?scope.hotkeys[index].combo.splice(scope.hotkeys[index].combo.indexOf(combo),1):(angular.forEach(boundScopes,(function(boundScope){var scopeIndex=boundScope.indexOf(scope.hotkeys[index]);-1!==scopeIndex&&boundScope.splice(scopeIndex,1)})),scope.hotkeys.splice(index,1)),!0)}function _get(combo){if(!combo)return scope.hotkeys;for(var hotkey,i=0;i<scope.hotkeys.length;i++)if((hotkey=scope.hotkeys[i]).combo.indexOf(combo)>-1)return hotkey;return!1}function bindTo(scope){return scope.$id in boundScopes||(boundScopes[scope.$id]=[],scope.$on("$destroy",(function(){for(var i=boundScopes[scope.$id].length;i--;)_del(boundScopes[scope.$id].pop())}))),{add:function(args){var hotkey;return hotkey=arguments.length>1?_add.apply(this,arguments):_add(args),boundScopes[scope.$id].push(hotkey),this}}}function wrapApply(callback){return function(event,combo){if(callback instanceof Array){var funcString=callback[0],route=callback[1];callback=function(event){route.scope.$eval(funcString)}}$rootScope.$apply((function(){callback(event,_get(combo))}))}}return{add:_add,del:_del,get:_get,bindTo:bindTo,template:this.template,toggleCheatSheet:toggleCheatSheet,includeCheatSheet:this.includeCheatSheet,cheatSheetHotkey:this.cheatSheetHotkey,cheatSheetDescription:this.cheatSheetDescription,useNgRoute:this.useNgRoute,purgeHotkeys:purgeHotkeys,templateTitle:this.templateTitle,pause:pause,unpause:unpause}}]}]).directive("hotkey",["hotkeys",function(hotkeys){return{restrict:"A",link:function(scope,el,attrs){var keys=[],allowIn;angular.forEach(scope.$eval(attrs.hotkey),(function(func,hotkey){allowIn="string"==typeof attrs.hotkeyAllowIn?attrs.hotkeyAllowIn.split(/[\s,]+/):[],keys.push(hotkey),hotkeys.add({combo:hotkey,description:attrs.hotkeyDescription,callback:func,action:attrs.hotkeyAction,allowIn:allowIn})})),el.bind("$destroy",(function(){angular.forEach(keys,hotkeys.del)}))}}}]).run(["hotkeys",function(hotkeys){}])}(),
/**
 * angular-input-match
 * ngModel validation for matching model attributes
 * @version v0.0.3
 * @link https://github.com/tdg5/angular-input-match
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"undefined"!=typeof module&&void 0!==exports&&module.exports===exports&&(module.exports="directives.inputMatch"),function(window,angular,undefined){"use strict";var inputMatch;angular.module("directives.inputMatch",[]).directive("match",(function(){function link(scope,elem,attrs,ctrl){ctrl&&scope.$watch((function(){return ctrl.$pristine&&angular.isUndefined(ctrl.$modelValue)||scope.match===ctrl.$modelValue}),(function(currentValue){ctrl.$setValidity("match",currentValue)}))}return{link:link,require:"?ngModel",restrict:"A",scope:{match:"="}}}))}(window,window.angular),
/**
 * @license angular-intercom
 * (c) 2014-2015 PatrickJS gdi2290.com
 * License: MIT
 */
function(root,factory){if("function"==typeof define&&define.amd)define(["angular"],(function(angular){return factory(root,angular,root.Intercom)}));else if("object"==typeof exports){var intercom=null;try{intercom=require("intercom")}catch(error){}module.exports=factory({},require("angular"),intercom)}else angular&&factory(root,root.angular,root.Intercom)}(this,(function(global,angular,Intercom){"use strict";function _capitalize_(string){return string?string.charAt(0).toUpperCase()+string.substring(1).toLowerCase():""}Intercom&&global&&!global.Intercom&&(global.Intercom=Intercom);var intercomSettings=global.IntercomSettings||global.intercomSettings,intercom_exist=!1;if(angular.isFunction(Intercom))global.Intercom("reattach_activator"),intercomSettings&&global.Intercom("update",intercomSettings),intercom_exist=!0;else{var build_intercom=function(){build_intercom.c(arguments)};build_intercom.q=[],build_intercom.c=function(args){build_intercom.q.push(args)},global.Intercom=build_intercom}var instance=!1;function createScript(url,appID){if(document){var script=document.createElement("script"),s;script.type="text/javascript",script.async=!0,script.src=url+appID,document.getElementsByTagName("head")[0].appendChild(script)}}var config={asyncLoading:!1,scriptUrl:"https://widget.intercom.io/widget/",appID:"",development:!1};function $IntercomProvider(){var provider=this;angular.forEach(config,(function(val,key){provider[key]=function(newValue){return config[key]=newValue||val,provider}})),provider.$get=["$rootScope","$log","IntercomSettings",function($rootScope,$log,IntercomSettings){var _options;instance&&$log.warn("Please use consider using either $intercom or Intercom not both"),instance=!0;var initializeOptions=function(){_options={},config.appID&&(_options.app_id=_options.app_id||config.appID),angular.extend(_options,IntercomSettings)};function $intercom(){return global.Intercom.apply(global.Intercom,arguments),$intercom}initializeOptions(),intercom_exist&&(global.Intercom("reattach_activator"),global.Intercom("update",_options)),config.asyncLoading&&createScript(config.scriptUrl,config.appID);var methods={boot:function(options){return angular.extend(_options,options||{}),!_options.app_id&&config.appID&&(_options.app_id=config.appID),options.app_id&&options.app_id!==_options.app_id&&(_options.app_id=options.app_id),global.Intercom("boot",_options),$intercom},update:function(data){return data?(!data.app_id&&config.appID&&(data.app_id=config.appID),data.app_id&&data.app_id!==config.app_id&&(config.app_id=data.app_id),global.Intercom("update",data)):global.Intercom("update"),$intercom},trackEvent:function(eventName,data){return global.Intercom("trackEvent",eventName,data),$intercom},showMessages:function(){return global.Intercom("showMessages"),$intercom},showNewMessage:function(data){return data?global.Intercom("showNewMessage",data):global.Intercom("showNewMessage"),$intercom},hideMessages:function(){return global.Intercom("hideMessages"),$intercom},shutdown:function(){return global.Intercom("shutdown"),initializeOptions(),$intercom},hide:function(){return global.Intercom("hide"),$intercom},show:function(){return global.Intercom("show"),$intercom},reattachActivator:function(){return global.Intercom("reattach_activator"),$intercom}};function buildMethod(func,method){$intercom[method]=func,$intercom["$"+method]=function(){return func.apply(Intercom,arguments),$rootScope.$$phase||$rootScope.$apply(),$intercom}}angular.forEach(methods,buildMethod);var isEvent={show:!0,hide:!0,activatorClick:!0};return $intercom.$on=function(event,callback){if(isEvent[event])return global.Intercom("on"+_capitalize_(event),(function(){$rootScope.$$phase?callback():$rootScope.$apply(callback)})),$intercom},$intercom.on=function(event,callback){if(isEvent[event])return global.Intercom("on"+_capitalize_(event),callback),$intercom},$intercom.$$defineMethod=function(method){method&&buildMethod(method,(function(){var args=Array.prototype.slice.call(arguments);return global.Intercom.apply(global.Intercom,args.unshift(method)),$intercom}))},$intercom}]}return angular.module("ngIntercom",[]).value("IntercomSettings",{}).provider("$intercom",$IntercomProvider).provider("Intercom",$IntercomProvider),angular.module("angular-intercom",["ngIntercom"]),angular.module("ngIntercom")})),function(){"use strict";angular.module("angular-loading-bar",["cfp.loadingBarInterceptor"]),angular.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]),angular.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function($httpProvider){var interceptor=["$q","$cacheFactory","$timeout","$rootScope","$log","cfpLoadingBar",function($q,$cacheFactory,$timeout,$rootScope,$log,cfpLoadingBar){var reqsTotal=0,reqsCompleted=0,latencyThreshold=cfpLoadingBar.latencyThreshold,startTimeout;function setComplete(){$timeout.cancel(startTimeout),cfpLoadingBar.complete(),reqsCompleted=0,reqsTotal=0}function isCached(config){var cache,defaultCache=$cacheFactory.get("$http"),defaults=$httpProvider.defaults;!config.cache&&!defaults.cache||!1===config.cache||"GET"!==config.method&&"JSONP"!==config.method||(cache=angular.isObject(config.cache)?config.cache:angular.isObject(defaults.cache)?defaults.cache:defaultCache);var cached=void 0!==cache&&void 0!==cache.get(config.url);return void 0!==config.cached&&cached!==config.cached?config.cached:(config.cached=cached,cached)}return{request:function(config){return config.ignoreLoadingBar||isCached(config)||($rootScope.$broadcast("cfpLoadingBar:loading",{url:config.url}),0===reqsTotal&&(startTimeout=$timeout((function(){cfpLoadingBar.start()}),latencyThreshold)),reqsTotal++,cfpLoadingBar.set(reqsCompleted/reqsTotal)),config},response:function(response){return response&&response.config?(response.config.ignoreLoadingBar||isCached(response.config)||(reqsCompleted++,$rootScope.$broadcast("cfpLoadingBar:loaded",{url:response.config.url,result:response}),reqsCompleted>=reqsTotal?setComplete():cfpLoadingBar.set(reqsCompleted/reqsTotal)),response):($log.error("Broken interceptor detected: Config object not supplied in response:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),response)},responseError:function(rejection){return rejection&&rejection.config?(rejection.config.ignoreLoadingBar||isCached(rejection.config)||(reqsCompleted++,$rootScope.$broadcast("cfpLoadingBar:loaded",{url:rejection.config.url,result:rejection}),reqsCompleted>=reqsTotal?setComplete():cfpLoadingBar.set(reqsCompleted/reqsTotal)),$q.reject(rejection)):($log.error("Broken interceptor detected: Config object not supplied in rejection:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),$q.reject(rejection))}}}];$httpProvider.interceptors.push(interceptor)}]),angular.module("cfp.loadingBar",[]).provider("cfpLoadingBar",(function(){this.autoIncrement=!0,this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>',this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function($injector,$document,$timeout,$rootScope){var $animate,$parentSelector=this.parentSelector,loadingBarContainer=angular.element(this.loadingBarTemplate),loadingBar=loadingBarContainer.find("div").eq(0),spinner=angular.element(this.spinnerTemplate),incTimeout,completeTimeout,started=!1,status=0,autoIncrement=this.autoIncrement,includeSpinner=this.includeSpinner,includeBar=this.includeBar,startSize=this.startSize;function _start(){if($animate||($animate=$injector.get("$animate")),$timeout.cancel(completeTimeout),!started){var document=$document[0],parent=document.querySelector?document.querySelector($parentSelector):$document.find($parentSelector)[0];parent||(parent=document.getElementsByTagName("body")[0]);var $parent=angular.element(parent),$after=parent.lastChild&&angular.element(parent.lastChild);$rootScope.$broadcast("cfpLoadingBar:started"),started=!0,includeBar&&$animate.enter(loadingBarContainer,$parent,$after),includeSpinner&&$animate.enter(spinner,$parent,loadingBarContainer),_set(startSize)}}function _set(n){if(started){var pct=100*n+"%";loadingBar.css("width",pct),status=n,autoIncrement&&($timeout.cancel(incTimeout),incTimeout=$timeout((function(){_inc()}),250))}}function _inc(){if(!(_status()>=1)){var rnd=0,stat=_status(),pct;rnd=stat>=0&&stat<.25?(3*Math.random()+3)/100:stat>=.25&&stat<.65?3*Math.random()/100:stat>=.65&&stat<.9?2*Math.random()/100:stat>=.9&&stat<.99?.005:0,_set(_status()+rnd)}}function _status(){return status}function _completeAnimation(){status=0,started=!1}function _complete(){$animate||($animate=$injector.get("$animate")),$rootScope.$broadcast("cfpLoadingBar:completed"),_set(1),$timeout.cancel(completeTimeout),completeTimeout=$timeout((function(){var promise=$animate.leave(loadingBarContainer,_completeAnimation);promise&&promise.then&&promise.then(_completeAnimation),$animate.leave(spinner)}),500)}return{start:_start,set:_set,status:_status,inc:_inc,complete:_complete,autoIncrement:this.autoIncrement,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]}))}(),
/**
 * angular-locker
 *
 * A simple & configurable abstraction for local/session storage in angular projects.
 *
 * @link https://github.com/tymondesigns/angular-locker
 * @author Sean Tymon @tymondesigns
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
function(root,factory){"function"==typeof define&&define.amd?define((function(){return factory(root.angular||window&&window.angular)})):"object"==typeof exports?module.exports=factory(root.angular||window&&window.angular):factory(root.angular)}(this,(function(angular){"use strict";return angular.module("angular-locker",[]).provider("locker",(function(){var _value=function(value,param){return angular.isFunction(value)?value(param):value},_defined=function(value){return angular.isDefined(value)&&null!==value},_error=function(msg){throw new Error("[angular-locker] "+msg)},defaults={driver:"local",namespace:"locker",eventsEnabled:!0,separator:".",extend:{}};return{defaults:function(value){if(!_defined(value))return defaults;angular.forEach(value,(function(val,key){defaults.hasOwnProperty(key)&&(defaults[key]=val)}))},$get:["$window","$rootScope","$parse",function($window,$rootScope,$parse){function Locker(options){this._options=options,this._registeredDrivers=angular.extend({local:$window.localStorage,session:$window.sessionStorage},options.extend),this._resolveDriver=function(driver){return this._registeredDrivers.hasOwnProperty(driver)||_error('The driver "'+driver+'" was not found.'),this._registeredDrivers[driver]},this._driver=this._resolveDriver(options.driver),this._namespace=options.namespace,this._separator=options.separator,this._watchers={},this._checkSupport=function(driver){if(!_defined(this._supported)){var l="l";try{this._resolveDriver(driver||options.driver).setItem(l,l),this._resolveDriver(driver||options.driver).removeItem(l),this._supported=!0}catch(e){this._supported=!1}}return this._supported},this._getPrefix=function(key){return this._namespace?this._namespace+this._separator+key:key},this._serialize=function(value){try{return angular.toJson(value)}catch(e){return value}},this._unserialize=function(value){try{return angular.fromJson(value)}catch(e){return value}},this._event=function(name,payload){this._options.eventsEnabled&&$rootScope.$emit("locker."+name,angular.extend(payload,{driver:this._options.driver,namespace:this._namespace}))},this._setItem=function(key,value){this._checkSupport()||_error('The browser does not support the "'+options.driver+'" driver');try{var oldVal=this._getItem(key);this._driver.setItem(this._getPrefix(key),this._serialize(value)),this._exists(key)&&!angular.equals(oldVal,value)?this._event("item.updated",{key:key,oldValue:oldVal,newValue:value}):this._event("item.added",{key:key,value:value})}catch(e){-1!==["QUOTA_EXCEEDED_ERR","NS_ERROR_DOM_QUOTA_REACHED","QuotaExceededError"].indexOf(e.name)?_error("The browser storage quota has been exceeded"):_error('Could not add item with key "'+key+'"')}},this._getItem=function(key){return this._checkSupport()||_error('The browser does not support the "'+options.driver+'" driver'),this._unserialize(this._driver.getItem(this._getPrefix(key)))},this._exists=function(key){return this._checkSupport()||_error('The browser does not support the "'+options.driver+'" driver'),this._driver.hasOwnProperty(this._getPrefix(_value(key)))||!!this._getItem(key)},this._removeItem=function(key){return this._checkSupport()||_error('The browser does not support the "'+options.driver+'" driver'),!!this._exists(key)&&(this._driver.removeItem(this._getPrefix(key)),this._event("item.forgotten",{key:key}),!0)}}return Locker.prototype={put:function(key,value,def){if(!_defined(key))return!1;if(key=_value(key),angular.isObject(key))angular.forEach(key,(function(value,key){this._setItem(key,_defined(value)?value:def)}),this);else{if(!_defined(value))return!1;var val=this._getItem(key);this._setItem(key,_value(value,_defined(val)?val:def))}return this},add:function(key,value,def){return!this.has(key)&&(this.put(key,value,def),!0)},get:function(key,def){if(angular.isArray(key)){var items={};return angular.forEach(key,(function(k){this.has(k)&&(items[k]=this._getItem(k))}),this),items}return this.has(key)?this._getItem(key):2===arguments.length?def:void 0},has:function(key){return this._exists(key)},forget:function(key){return key=_value(key),angular.isArray(key)?key.map(this._removeItem,this):this._removeItem(key),this},pull:function(key,def){var value=this.get(key,def);return this.forget(key),value},all:function(){var items={};return angular.forEach(this._driver,(function(value,key){if(this._namespace){var prefix=this._namespace+this._separator;0===key.indexOf(prefix)&&(key=key.substring(prefix.length))}this.has(key)&&(items[key]=this.get(key))}),this),items},keys:function(){return Object.keys(this.all())},clean:function(){return this.forget(this.keys())},empty:function(){return this._driver.clear(),this},count:function(){return this.keys().length},bind:function($scope,key,def){_defined($scope.$eval(key))||($parse(key).assign($scope,this.get(key,def)),this.add(key,def));var self=this;return this._watchers[key+$scope.$id]=$scope.$watch(key,(function(newVal){self.put(key,newVal)}),angular.isObject($scope[key])),this},unbind:function($scope,key){$parse(key).assign($scope,void 0),this.forget(key);var watchId=key+$scope.$id;return this._watchers[watchId]&&(this._watchers[watchId](),delete this._watchers[watchId]),this},driver:function(driver){return this.instance(angular.extend(this._options,{driver:driver}))},getDriver:function(){return this._driver},namespace:function(namespace){return this.instance(angular.extend(this._options,{namespace:namespace}))},getNamespace:function(){return this._namespace},supported:function(driver){return this._checkSupport(driver)},instance:function(options){return new Locker(options)}},new Locker(defaults)}]}})).name})),
/**
 * @license AngularJS v1.6.6
 * (c) 2010-2017 Google, Inc. http://angularjs.org
 * License: MIT
 */
function(window,angular){"use strict";var forEach,isArray,isString,jqLite;function ngMessageDirectiveFactory(){return["$animate",function($animate){return{restrict:"AE",transclude:"element",priority:1,terminal:!0,require:"^^ngMessages",link:function(scope,element,attrs,ngMessagesCtrl,$transclude){var commentNode=element[0],records,staticExp=attrs.ngMessage||attrs.when,dynamicExp=attrs.ngMessageExp||attrs.whenExp,assignRecords=function(items){records=items?isArray(items)?items:items.split(/[\s,]+/):null,ngMessagesCtrl.reRender()},currentElement,messageCtrl;dynamicExp?(assignRecords(scope.$eval(dynamicExp)),scope.$watchCollection(dynamicExp,assignRecords)):assignRecords(staticExp),ngMessagesCtrl.register(commentNode,messageCtrl={test:function(name){return contains(records,name)},attach:function(){currentElement||$transclude((function(elm,newScope){$animate.enter(elm,null,element);var $$attachId=(currentElement=elm).$$attachId=ngMessagesCtrl.getAttachId();currentElement.on("$destroy",(function(){currentElement&&currentElement.$$attachId===$$attachId&&(ngMessagesCtrl.deregister(commentNode),messageCtrl.detach()),newScope.$destroy()}))}))},detach:function(){if(currentElement){var elm=currentElement;currentElement=null,$animate.leave(elm)}}})}}}];function contains(collection,key){if(collection)return isArray(collection)?collection.indexOf(key)>=0:collection.hasOwnProperty(key)}}angular.module("ngMessages",[],(function initAngularHelpers(){forEach=angular.forEach,isArray=angular.isArray,isString=angular.isString,jqLite=angular.element})).info({angularVersion:"1.6.6"}).directive("ngMessages",["$animate",function($animate){var ACTIVE_CLASS="ng-active",INACTIVE_CLASS="ng-inactive";return{require:"ngMessages",restrict:"AE",controller:["$element","$scope","$attrs",function NgMessagesCtrl($element,$scope,$attrs){var ctrl=this,latestKey=0,nextAttachId=0;this.getAttachId=function getAttachId(){return nextAttachId++};var messages=this.messages={},renderLater,cachedCollection;function findPreviousMessage(parent,comment){for(var prevNode=comment,parentLookup=[];prevNode&&prevNode!==parent;){var prevKey=prevNode.$$ngMessageNode;if(prevKey&&prevKey.length)return messages[prevKey];prevNode.childNodes.length&&-1===parentLookup.indexOf(prevNode)?(parentLookup.push(prevNode),prevNode=prevNode.childNodes[prevNode.childNodes.length-1]):prevNode.previousSibling?prevNode=prevNode.previousSibling:(prevNode=prevNode.parentNode,parentLookup.push(prevNode))}}function insertMessageNode(parent,comment,key){var messageNode=messages[key];if(ctrl.head){var match=findPreviousMessage(parent,comment);match?(messageNode.next=match.next,match.next=messageNode):(messageNode.next=ctrl.head,ctrl.head=messageNode)}else ctrl.head=messageNode}function removeMessageNode(parent,comment,key){var messageNode=messages[key],match=findPreviousMessage(parent,comment);match?match.next=messageNode.next:ctrl.head=messageNode.next}this.render=function(collection){renderLater=!1,cachedCollection=collection=collection||{};for(var multiple=isAttrTruthy($scope,$attrs.ngMessagesMultiple)||isAttrTruthy($scope,$attrs.multiple),unmatchedMessages=[],matchedKeys={},messageItem=ctrl.head,messageFound=!1,totalMessages=0;null!=messageItem;){totalMessages++;var messageCtrl=messageItem.message,messageUsed=!1;messageFound||forEach(collection,(function(value,key){if(!messageUsed&&truthy(value)&&messageCtrl.test(key)){if(matchedKeys[key])return;matchedKeys[key]=!0,messageUsed=!0,messageCtrl.attach()}})),messageUsed?messageFound=!multiple:unmatchedMessages.push(messageCtrl),messageItem=messageItem.next}forEach(unmatchedMessages,(function(messageCtrl){messageCtrl.detach()})),unmatchedMessages.length!==totalMessages?$animate.setClass($element,"ng-active","ng-inactive"):$animate.setClass($element,"ng-inactive","ng-active")},$scope.$watchCollection($attrs.ngMessages||$attrs.for,ctrl.render),$element.on("$destroy",(function(){forEach(messages,(function(item){item.message.detach()}))})),this.reRender=function(){renderLater||(renderLater=!0,$scope.$evalAsync((function(){renderLater&&cachedCollection&&ctrl.render(cachedCollection)})))},this.register=function(comment,messageCtrl){var nextKey=latestKey.toString();messages[nextKey]={message:messageCtrl},insertMessageNode($element[0],comment,nextKey),comment.$$ngMessageNode=nextKey,latestKey++,ctrl.reRender()},this.deregister=function(comment){var key=comment.$$ngMessageNode;delete comment.$$ngMessageNode,removeMessageNode($element[0],comment,key),delete messages[key],ctrl.reRender()}}]};function isAttrTruthy(scope,attr){return isString(attr)&&0===attr.length||truthy(scope.$eval(attr))}function truthy(val){return isString(val)?val.length:!!val}}]).directive("ngMessagesInclude",["$templateRequest","$document","$compile",function($templateRequest,$document,$compile){return{restrict:"AE",require:"^^ngMessages",link:function($scope,element,attrs){var src=attrs.ngMessagesInclude||attrs.src;$templateRequest(src).then((function(html){$scope.$$destroyed||(isString(html)&&!html.trim()?replaceElementWithMarker(element,src):$compile(html)($scope,(function(contents){element.after(contents),replaceElementWithMarker(element,src)})))}))}};function replaceElementWithMarker(element,src){var comment=$compile.$$createComment?$compile.$$createComment("ngMessagesInclude",src):$document[0].createComment(" ngMessagesInclude: "+src+" "),marker=jqLite(comment);element.after(marker),element.remove()}}]).directive("ngMessage",ngMessageDirectiveFactory()).directive("ngMessageExp",ngMessageDirectiveFactory())}(window,window.angular),angular.module("angularPayments",[]),angular.module("angularPayments").factory("Common",[function(){var ret={parseExpiry:function(value){var month,prefix,year,_ref;return month=(_ref=(value=(value=value||"").replace(/\s/g,"")).split("/",2))[0],2===(null!=(year=_ref[1])?year.length:void 0)&&/^\d+$/.test(year)&&(year=(prefix=(prefix=(new Date).getFullYear()).toString().slice(0,2))+year),{month:month=parseInt(month,10),year:year=parseInt(year,10)}}};return ret}]),angular.module("angularPayments").factory("Cards",[function(){var defaultFormat=/(\d{1,4})/g,defaultInputFormat=/(?:^|\s)(\d{4})$/,cards=[{type:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,format:defaultFormat,inputFormat:defaultInputFormat,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"dinersclub",pattern:/^(36|38|30[0-5])/,format:defaultFormat,inputFormat:defaultInputFormat,length:[14],cvcLength:[3],luhn:!0},{type:"laser",pattern:/^(6706|6771|6709)/,format:defaultFormat,inputFormat:defaultInputFormat,length:[16,17,18,19],cvcLength:[3],luhn:!0},{type:"jcb",pattern:/^35/,format:defaultFormat,inputFormat:defaultInputFormat,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",pattern:/^62/,format:defaultFormat,inputFormat:defaultInputFormat,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"discover",pattern:/^(6011|65|64[4-9]|622)/,format:defaultFormat,inputFormat:defaultInputFormat,length:[16],cvcLength:[3],luhn:!0},{type:"mastercard",pattern:/^5[1-5]/,format:defaultFormat,inputFormat:defaultInputFormat,length:[16],cvcLength:[3],luhn:!0},{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,inputFormat:/^(\d{4}|\d{4}\s\d{6})$/,length:[15],cvcLength:[3,4],luhn:!0},{type:"visa",pattern:/^4/,format:defaultFormat,inputFormat:defaultInputFormat,length:[13,14,15,16],cvcLength:[3],luhn:!0}],_fromNumber=function(num){var card,i,len;for(num=(num+"").replace(/\D/g,""),i=0,len=cards.length;i<len;i++)if((card=cards[i]).pattern.test(num))return card},_fromType=function(type){var card,i,len;for(i=0,len=cards.length;i<len;i++)if((card=cards[i]).type===type)return card};return{fromNumber:function(val){return _fromNumber(val)},fromType:function(val){return _fromType(val)},defaultFormat:function(){return defaultFormat},defaultInputFormat:function(){return defaultInputFormat}}}]),angular.module("angularPayments").factory("_Format",["Cards","Common","$filter",function(Cards,Common,$filter){var _formats={},_hasTextSelected=function($target){var ref;return null!=$target.prop("selectionStart")&&$target.prop("selectionStart")!==$target.prop("selectionEnd")||!("undefined"==typeof document||null===document||null==(ref=document.selection)||"function"!=typeof ref.createRange||!ref.createRange().text)},_formatCardNumber=function(e){var $target,card,digit,length,re,upperLength,value;if(digit=String.fromCharCode(e.which),value=($target=angular.element(e.currentTarget)).val(),card=Cards.fromNumber(value+digit),length=(value.replace(/\D/g,"")+digit).length,upperLength=16,card&&(upperLength=card.length[card.length.length-1]),!(length>=upperLength))if(!/^\d+$/.test(digit)&&!e.meta&&e.keyCode>=46)e.preventDefault();else if(null==$target.prop("selectionStart")||$target.prop("selectionStart")===value.length)return re=Cards.defaultInputFormat(),card&&(re=card.inputFormat),re.test(value)?(e.preventDefault(),$target.val(value+" "+digit)):re.test(value+digit)?(e.preventDefault(),$target.val(value+digit+" ")):void 0},_restrictCardNumber=function(e){var $target,card,digit,value;$target=angular.element(e.currentTarget),digit=String.fromCharCode(e.which),/^\d+$/.test(digit)&&(_hasTextSelected($target)||(value=($target.val()+digit).replace(/\D/g,""),(card=Cards.fromNumber(value))?value.length<=card.length[card.length.length-1]||e.preventDefault():value.length<=16||e.preventDefault()))},_formatBackCardNumber=function(e){var $target,value;if(value=($target=angular.element(e.currentTarget)).val(),!e.meta&&8===e.which&&(null==$target.prop("selectionStart")||$target.prop("selectionStart")===value.length))return/\d\s$/.test(value)&&!e.meta&&e.keyCode>=46?(e.preventDefault(),$target.val(value.replace(/\d\s$/,""))):/\s\d?$/.test(value)?(e.preventDefault(),$target.val(value.replace(/\s\d?$/,""))):void 0},_getFormattedCardNumber=function(num){var card,groups,upperLength,ref;return(card=Cards.fromNumber(num))?(upperLength=card.length[card.length.length-1],num=(num=num.replace(/\D/g,"")).slice(0,+upperLength+1||9e9),card.format.global?null!=(ref=num.match(card.format))?ref.join(" "):void 0:(null!=(groups=card.format.exec(num))&&groups.shift(),null!=groups?groups.join(" "):void 0)):num},_reFormatCardNumber=function(e){return setTimeout((function(){var $target,value;return value=($target=angular.element(e.target)).val(),value=_getFormattedCardNumber(value),$target.val(value)}))},_parseCardNumber=function(value){return null!=value?value.replace(/\s/g,""):value};_formats.card=function(elem,ctrl){elem.bind("keypress",_restrictCardNumber),elem.bind("keypress",_formatCardNumber),elem.bind("keydown",_formatBackCardNumber),elem.bind("paste",_reFormatCardNumber),ctrl.$parsers.push(_parseCardNumber),ctrl.$formatters.push(_getFormattedCardNumber)},_formatCVC=function(e){if($target=angular.element(e.currentTarget),digit=String.fromCharCode(e.which),/^\d+$/.test(digit)||e.meta||!(e.keyCode>=46))return val=$target.val()+digit,val.length<=4?void 0:void e.preventDefault();e.preventDefault()},_formats.cvc=function(elem){elem.bind("keypress",_formatCVC)},_restrictExpiry=function(e){var $target,digit,value;$target=angular.element(e.currentTarget),digit=String.fromCharCode(e.which),!/^\d+$/.test(digit)&&!e.meta&&e.keyCode>=46?e.preventDefault():_hasTextSelected($target)||(value=(value=$target.val()+digit).replace(/\D/g,"")).length>6&&e.preventDefault()},_formatExpiry=function(e){var $target,digit,val;if(digit=String.fromCharCode(e.which),/^\d+$/.test(digit)||e.meta||!(e.keyCode>=46))return val=($target=angular.element(e.currentTarget)).val()+digit,/^\d$/.test(val)&&"0"!==val&&"1"!==val?(e.preventDefault(),$target.val("0"+val+" / ")):/^\d\d$/.test(val)?(e.preventDefault(),$target.val(val+" / ")):void 0;e.preventDefault()},_formatForwardExpiry=function(e){var $target,digit,val;if(digit=String.fromCharCode(e.which),/^\d+$/.test(digit)||e.meta||!(e.keyCode>=46))return val=($target=angular.element(e.currentTarget)).val(),/^\d\d$/.test(val)?$target.val(val+" / "):void 0},_formatForwardSlash=function(e){var $target,slash,val;if("/"===(slash=String.fromCharCode(e.which)))return val=($target=angular.element(e.currentTarget)).val(),/^\d$/.test(val)&&"0"!==val?$target.val("0"+val+" / "):void 0},_formatBackExpiry=function(e){var $target,value;if(!e.meta&&(value=($target=angular.element(e.currentTarget)).val(),8===e.which&&(null==$target.prop("selectionStart")||$target.prop("selectionStart")===value.length)))return/\d(\s|\/)+$/.test(value)?(e.preventDefault(),$target.val(value.replace(/\d(\s|\/)*$/,""))):/\s\/\s?\d?$/.test(value)?(e.preventDefault(),$target.val(value.replace(/\s\/\s?\d?$/,""))):void 0};var _parseExpiry=function(value){if(null!=value){var obj=Common.parseExpiry(value),expiry=new Date(obj.year,obj.month-1);return $filter("date")(expiry,"MM/yyyy")}return null},_getFormattedExpiry=function(value){if(null!=value){var obj=Common.parseExpiry(value),expiry=new Date(obj.year,obj.month-1);return $filter("date")(expiry,"MM / yyyy")}return null};return _formats.expiry=function(elem,ctrl){elem.bind("keypress",_restrictExpiry),elem.bind("keypress",_formatExpiry),elem.bind("keypress",_formatForwardSlash),elem.bind("keypress",_formatForwardExpiry),elem.bind("keydown",_formatBackExpiry),ctrl.$parsers.push(_parseExpiry),ctrl.$formatters.push(_getFormattedExpiry)},function(type,elem,ctrl){if(!_formats[type])throw types=Object.keys(_formats),errstr='Unknown type for formatting: "'+type+'". ',errstr+='Should be one of: "'+types.join('", "')+'"',errstr;return _formats[type](elem,ctrl)}}]).directive("paymentsFormat",["$window","_Format",function($window,_Format){return{restrict:"A",require:"ngModel",link:function(scope,elem,attr,ctrl){_Format(attr.paymentsFormat,elem,ctrl)}}}]),angular.module("angularPayments").factory("_Validate",["Cards","Common","$parse",function(Cards,Common,$parse){var __indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1},_luhnCheck=function(num){var digit,digits,odd,sum,i,len;for(odd=!0,sum=0,i=0,len=(digits=(num+"").split("").reverse()).length;i<len;i++)digit=digits[i],digit=parseInt(digit,10),(odd=!odd)&&(digit*=2),digit>9&&(digit-=9),sum+=digit;return sum%10==0},_validators={cvc:function(cvc,ctrl,scope,attr){var ref,ref1,type,typeModel;if(null==cvc||0==cvc.length)return!0;if(!/^\d+$/.test(cvc))return!1;attr.paymentsTypeModel&&(type=$parse(attr.paymentsTypeModel)(scope));return type?(ref=cvc.length,__indexOf.call(null!=(ref1=Cards.fromType(type))?ref1.cvcLength:void 0,ref)>=0):cvc.length>=3&&cvc.length<=4},card:function(num,ctrl,scope,attr){var card,ref,typeModel;attr.paymentsTypeModel&&(typeModel=$parse(attr.paymentsTypeModel));var clearCard=function(){typeModel&&typeModel.assign(scope,null),ctrl.$card=null};return null==num||0==num.length?(clearCard(),!0):(num=(num+"").replace(/\s+|-/g,""),/^\d+$/.test(num)&&(card=Cards.fromNumber(num))?(ctrl.$card=angular.copy(card),typeModel&&typeModel.assign(scope,card.type),ret=(ref=num.length,__indexOf.call(card.length,ref)>=0&&(!1===card.luhn||_luhnCheck(num))),ret):(clearCard(),!1))},expiry:function(val){return null==val||0==val.length||(obj=Common.parseExpiry(val),month=obj.month,year=obj.year,!(!month||!year)&&(!!/^\d+$/.test(month)&&(!!/^\d+$/.test(year)&&(parseInt(month,10)<=12&&(2===year.length&&(prefix=(prefix=(new Date).getFullYear()).toString().slice(0,2),year=prefix+year),expiry=new Date(year,month),currentTime=new Date,expiry.setMonth(expiry.getMonth()-1),expiry.setMonth(expiry.getMonth()+1,1),expiry>currentTime)))));var currentTime,expiry,prefix}};return function(type,val,ctrl,scope,attr){if(!_validators[type])throw types=Object.keys(_validators),errstr='Unknown type for validation: "'+type+'". ',errstr+='Should be one of: "'+types.join('", "')+'"',errstr;return _validators[type](val,ctrl,scope,attr)}}]).factory("_ValidateWatch",["_Validate",function(_Validate){var _validatorWatches={cvc:function(type,ctrl,scope,attr){attr.paymentsTypeModel&&scope.$watch(attr.paymentsTypeModel,(function(newVal,oldVal){if(newVal!=oldVal){var valid=_Validate(type,ctrl.$modelValue,ctrl,scope,attr);ctrl.$setValidity(type,valid)}}))}};return function(type,ctrl,scope,attr){if(_validatorWatches[type])return _validatorWatches[type](type,ctrl,scope,attr)}}]).directive("paymentsValidate",["$window","_Validate","_ValidateWatch",function($window,_Validate,_ValidateWatch){return{restrict:"A",require:"ngModel",link:function(scope,elem,attr,ctrl){var type=attr.paymentsValidate;_ValidateWatch(type,ctrl,scope,attr);var validateFn=function(val){var valid=_Validate(type,val,ctrl,scope,attr);return ctrl.$setValidity(type,valid),valid?val:void 0};ctrl.$formatters.push(validateFn),ctrl.$parsers.push(validateFn)}}}]),angular.module("angularPayments").directive("stripeForm",["$window","$parse","Common",function($window,$parse,Common){return _getDataToSend=function(data){var possibleKeys=["number","expMonth","expYear","cvc","name","addressLine1","addressLine2","addressCity","addressState","addressZip","addressCountry"],camelToSnake=function(str){return str.replace(/([A-Z])/g,(function(m){return"_"+m.toLowerCase()}))},ret={};for(i in possibleKeys)data.hasOwnProperty(possibleKeys[i])&&(ret[camelToSnake(possibleKeys[i])]=angular.copy(data[possibleKeys[i]]));return ret.number=(ret.number||"").replace(/ /g,""),ret},{restrict:"A",link:function(scope,elem,attr){if(!$window.Stripe)throw"stripeForm requires that you have stripe.js installed. Include https://js.stripe.com/v2/ into your html.";var form=angular.element(elem);form.bind("submit",(function(){expMonthUsed=!!scope.expMonth,expYearUsed=!!scope.expYear,expMonthUsed&&expYearUsed||(exp=Common.parseExpiry(scope.expiry),scope.expMonth=exp.month,scope.expYear=exp.year);var button=form.find("button");button.prop("disabled",!0),form.hasClass("ng-valid")?$window.Stripe.createToken(_getDataToSend(scope),(function(){var args=arguments;scope.$apply((function(){scope[attr.stripeForm].apply(scope,args)})),button.prop("disabled",!1)})):(scope.$apply((function(){scope[attr.stripeForm].apply(scope,[400,{error:"Invalid form submitted."}])})),button.prop("disabled",!1)),scope.expMonth=null,scope.expYear=null}))}}}]),
/**
 * @license AngularJS v1.6.6
 * (c) 2010-2017 Google, Inc. http://angularjs.org
 * License: MIT
 */
function(window,angular){"use strict";var $resourceMinErr=angular.$$minErr("$resource"),MEMBER_NAME_REGEX=/^(\.[a-zA-Z_$@][0-9a-zA-Z_$@]*)+$/;function isValidDottedPath(path){return null!=path&&""!==path&&"hasOwnProperty"!==path&&MEMBER_NAME_REGEX.test("."+path)}function lookupDottedPath(obj,path){if(!isValidDottedPath(path))throw $resourceMinErr("badmember",'Dotted member path "@{0}" is invalid.',path);for(var keys=path.split("."),i=0,ii=keys.length;i<ii&&angular.isDefined(obj);i++){var key=keys[i];obj=null!==obj?obj[key]:void 0}return obj}function shallowClearAndCopy(src,dst){for(var key in dst=dst||{},angular.forEach(dst,(function(value,key){delete dst[key]})),src)!src.hasOwnProperty(key)||"$"===key.charAt(0)&&"$"===key.charAt(1)||(dst[key]=src[key]);return dst}angular.module("ngResource",["ng"]).info({angularVersion:"1.6.6"}).provider("$resource",(function ResourceProvider(){var PROTOCOL_AND_IPV6_REGEX=/^https?:\/\/\[[^\]]*][^/]*/,provider=this;this.defaults={stripTrailingSlashes:!0,cancellable:!1,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},delete:{method:"DELETE"}}},this.$get=["$http","$log","$q","$timeout",function($http,$log,$q,$timeout){var noop=angular.noop,forEach=angular.forEach,extend=angular.extend,copy=angular.copy,isArray=angular.isArray,isDefined=angular.isDefined,isFunction=angular.isFunction,isNumber=angular.isNumber,encodeUriQuery=angular.$$encodeUriQuery,encodeUriSegment=angular.$$encodeUriSegment;function Route(template,defaults){this.template=template,this.defaults=extend({},provider.defaults,defaults),this.urlParams={}}function resourceFactory(url,paramDefaults,actions,options){var route=new Route(url,options);function extractParams(data,actionParams){var ids={};return actionParams=extend({},paramDefaults,actionParams),forEach(actionParams,(function(value,key){isFunction(value)&&(value=value(data)),ids[key]=value&&value.charAt&&"@"===value.charAt(0)?lookupDottedPath(data,value.substr(1)):value})),ids}function defaultResponseInterceptor(response){return response.resource}function Resource(value){shallowClearAndCopy(value||{},this)}return actions=extend({},provider.defaults.actions,actions),Resource.prototype.toJSON=function(){var data=extend({},this);return delete data.$promise,delete data.$resolved,delete data.$cancelRequest,data},forEach(actions,(function(action,name){var hasBody=!0===action.hasBody||!1!==action.hasBody&&/^(POST|PUT|PATCH)$/i.test(action.method),numericTimeout=action.timeout,cancellable=isDefined(action.cancellable)?action.cancellable:route.defaults.cancellable;numericTimeout&&!isNumber(numericTimeout)&&($log.debug("ngResource:\n  Only numeric values are allowed as `timeout`.\n  Promises are not supported in $resource, because the same value would be used for multiple requests. If you are looking for a way to cancel requests, you should use the `cancellable` option."),delete action.timeout,numericTimeout=null),Resource[name]=function(a1,a2,a3,a4){var params={},data,success,error;switch(arguments.length){case 4:error=a4,success=a3;case 3:case 2:if(!isFunction(a2)){params=a1,data=a2,success=a3;break}if(isFunction(a1)){success=a1,error=a2;break}success=a2,error=a3;case 1:isFunction(a1)?success=a1:hasBody?data=a1:params=a1;break;case 0:break;default:throw $resourceMinErr("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var isInstanceCall=this instanceof Resource,value=isInstanceCall?data:action.isArray?[]:new Resource(data),httpConfig={},responseInterceptor=action.interceptor&&action.interceptor.response||defaultResponseInterceptor,responseErrorInterceptor=action.interceptor&&action.interceptor.responseError||void 0,hasError=!!error,hasResponseErrorInterceptor=!!responseErrorInterceptor,timeoutDeferred,numericTimeoutPromise;forEach(action,(function(value,key){switch(key){default:httpConfig[key]=copy(value);break;case"params":case"isArray":case"interceptor":case"cancellable":}})),!isInstanceCall&&cancellable&&(timeoutDeferred=$q.defer(),httpConfig.timeout=timeoutDeferred.promise,numericTimeout&&(numericTimeoutPromise=$timeout(timeoutDeferred.resolve,numericTimeout))),hasBody&&(httpConfig.data=data),route.setUrlParams(httpConfig,extend({},extractParams(data,action.params||{}),params),action.url);var promise=$http(httpConfig).then((function(response){var data=response.data;if(data){if(isArray(data)!==!!action.isArray)throw $resourceMinErr("badcfg","Error in resource configuration for action `{0}`. Expected response to contain an {1} but got an {2} (Request: {3} {4})",name,action.isArray?"array":"object",isArray(data)?"array":"object",httpConfig.method,httpConfig.url);if(action.isArray)value.length=0,forEach(data,(function(item){"object"==typeof item?value.push(new Resource(item)):value.push(item)}));else{var promise=value.$promise;shallowClearAndCopy(data,value),value.$promise=promise}}return response.resource=value,response}),(function(response){return response.resource=value,$q.reject(response)}));return promise=(promise=promise.finally((function(){value.$resolved=!0,!isInstanceCall&&cancellable&&(value.$cancelRequest=noop,$timeout.cancel(numericTimeoutPromise),timeoutDeferred=numericTimeoutPromise=httpConfig.timeout=null)}))).then((function(response){var value=responseInterceptor(response);return(success||noop)(value,response.headers,response.status,response.statusText),value}),hasError||hasResponseErrorInterceptor?function(response){return hasError&&!hasResponseErrorInterceptor&&promise.catch(noop),hasError&&error(response),hasResponseErrorInterceptor?responseErrorInterceptor(response):$q.reject(response)}:void 0),isInstanceCall?promise:(value.$promise=promise,value.$resolved=!1,cancellable&&(value.$cancelRequest=cancelRequest),value);function cancelRequest(value){promise.catch(noop),null!==timeoutDeferred&&timeoutDeferred.resolve(value)}},Resource.prototype["$"+name]=function(params,success,error){isFunction(params)&&(error=success,success=params,params={});var result=Resource[name].call(this,params,this,success,error);return result.$promise||result}})),Resource.bind=function(additionalParamDefaults){var extendedParamDefaults=extend({},paramDefaults,additionalParamDefaults);return resourceFactory(url,extendedParamDefaults,actions,options)},Resource}return Route.prototype={setUrlParams:function(config,params,actionUrl){var self=this,url=actionUrl||self.template,val,encodedVal,protocolAndIpv6="",urlParams=self.urlParams=Object.create(null);forEach(url.split(/\W/),(function(param){if("hasOwnProperty"===param)throw $resourceMinErr("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(param)&&param&&new RegExp("(^|[^\\\\]):"+param+"(\\W|$)").test(url)&&(urlParams[param]={isQueryParamValue:new RegExp("\\?.*=:"+param+"(?:\\W|$)").test(url)})})),url=(url=url.replace(/\\:/g,":")).replace(PROTOCOL_AND_IPV6_REGEX,(function(match){return protocolAndIpv6=match,""})),params=params||{},forEach(self.urlParams,(function(paramInfo,urlParam){val=params.hasOwnProperty(urlParam)?params[urlParam]:self.defaults[urlParam],isDefined(val)&&null!==val?(encodedVal=paramInfo.isQueryParamValue?encodeUriQuery(val,!0):encodeUriSegment(val),url=url.replace(new RegExp(":"+urlParam+"(\\W|$)","g"),(function(match,p1){return encodedVal+p1}))):url=url.replace(new RegExp("(/?):"+urlParam+"(\\W|$)","g"),(function(match,leadingSlashes,tail){return"/"===tail.charAt(0)?tail:leadingSlashes+tail}))})),self.defaults.stripTrailingSlashes&&(url=url.replace(/\/+$/,"")||"/"),url=url.replace(/\/\.(?=\w+($|\?))/,"."),config.url=protocolAndIpv6+url.replace(/\/(\\|%5C)\./,"/."),forEach(params,(function(value,key){self.urlParams[key]||(config.params=config.params||{},config.params[key]=value)}))}},resourceFactory}]}))}(window,window.angular),
/**
 * @license AngularJS v1.6.6
 * (c) 2010-2017 Google, Inc. http://angularjs.org
 * License: MIT
 */
function(window,angular){"use strict";var $sanitizeMinErr=angular.$$minErr("$sanitize"),bind,extend,forEach,isDefined,lowercase,noop,nodeContains,htmlParser,htmlSanitizeWriter;function $SanitizeProvider(){var svgEnabled=!1;this.$get=["$$sanitizeUri",function($$sanitizeUri){return svgEnabled&&extend(validElements,svgElements),function(html){var buf=[];return htmlParser(html,htmlSanitizeWriter(buf,(function(uri,isImage){return!/^unsafe:/.test($$sanitizeUri(uri,isImage))}))),buf.join("")}}],this.enableSvg=function(enableSvg){return isDefined(enableSvg)?(svgEnabled=enableSvg,this):svgEnabled},bind=angular.bind,extend=angular.extend,forEach=angular.forEach,isDefined=angular.isDefined,lowercase=angular.lowercase,noop=angular.noop,htmlParser=htmlParserImpl,htmlSanitizeWriter=htmlSanitizeWriterImpl,nodeContains=window.Node.prototype.contains||function(arg){return!!(16&this.compareDocumentPosition(arg))};var SURROGATE_PAIR_REGEXP=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NON_ALPHANUMERIC_REGEXP=/([^#-~ |!])/g,voidElements=toMap("area,br,col,hr,img,wbr"),optionalEndTagBlockElements=toMap("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),optionalEndTagInlineElements=toMap("rp,rt"),optionalEndTagElements=extend({},optionalEndTagInlineElements,optionalEndTagBlockElements),blockElements=extend({},optionalEndTagBlockElements,toMap("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),inlineElements=extend({},optionalEndTagInlineElements,toMap("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),svgElements=toMap("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),blockedElements=toMap("script,style"),validElements=extend({},voidElements,blockElements,inlineElements,optionalEndTagElements),uriAttrs=toMap("background,cite,href,longdesc,src,xlink:href"),htmlAttrs=toMap("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),svgAttrs=toMap("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),validAttrs=extend({},uriAttrs,svgAttrs,htmlAttrs);function toMap(str,lowercaseKeys){var obj={},items=str.split(","),i;for(i=0;i<items.length;i++)obj[lowercaseKeys?lowercase(items[i]):items[i]]=!0;return obj}var getInertBodyElement=function(window,document){var inertDocument;if(!document||!document.implementation)throw $sanitizeMinErr("noinert","Can't create an inert html document");var inertBodyElement=((inertDocument=document.implementation.createHTMLDocument("inert")).documentElement||inertDocument.getDocumentElement()).querySelector("body");return inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',inertBodyElement.querySelector("svg")?(inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',inertBodyElement.querySelector("svg img")?getInertBodyElement_DOMParser:getInertBodyElement_InertDocument):getInertBodyElement_XHR;function getInertBodyElement_XHR(html){html="<remove></remove>"+html;try{html=encodeURI(html)}catch(e){return}var xhr=new window.XMLHttpRequest;xhr.responseType="document",xhr.open("GET","data:text/html;charset=utf-8,"+html,!1),xhr.send(null);var body=xhr.response.body;return body.firstChild.remove(),body}function getInertBodyElement_DOMParser(html){html="<remove></remove>"+html;try{var body=(new window.DOMParser).parseFromString(html,"text/html").body;return body.firstChild.remove(),body}catch(e){return}}function getInertBodyElement_InertDocument(html){return inertBodyElement.innerHTML=html,document.documentMode&&stripCustomNsAttrs(inertBodyElement),inertBodyElement}}(window,window.document);function htmlParserImpl(html,handler){null==html?html="":"string"!=typeof html&&(html=""+html);var inertBodyElement=getInertBodyElement(html);if(!inertBodyElement)return"";var mXSSAttempts=5;do{if(0===mXSSAttempts)throw $sanitizeMinErr("uinput","Failed to sanitize html because the input is unstable");mXSSAttempts--,html=inertBodyElement.innerHTML,inertBodyElement=getInertBodyElement(html)}while(html!==inertBodyElement.innerHTML);for(var node=inertBodyElement.firstChild;node;){switch(node.nodeType){case 1:handler.start(node.nodeName.toLowerCase(),attrToMap(node.attributes));break;case 3:handler.chars(node.textContent)}var nextNode;if(!((nextNode=node.firstChild)||(1===node.nodeType&&handler.end(node.nodeName.toLowerCase()),nextNode=getNonDescendant("nextSibling",node))))for(;null==nextNode&&(node=getNonDescendant("parentNode",node))!==inertBodyElement;)nextNode=getNonDescendant("nextSibling",node),1===node.nodeType&&handler.end(node.nodeName.toLowerCase());node=nextNode}for(;node=inertBodyElement.firstChild;)inertBodyElement.removeChild(node)}function attrToMap(attrs){for(var map={},i=0,ii=attrs.length;i<ii;i++){var attr=attrs[i];map[attr.name]=attr.value}return map}function encodeEntities(value){return value.replace(/&/g,"&amp;").replace(SURROGATE_PAIR_REGEXP,(function(value){var hi,low;return"&#"+(1024*(value.charCodeAt(0)-55296)+(value.charCodeAt(1)-56320)+65536)+";"})).replace(NON_ALPHANUMERIC_REGEXP,(function(value){return"&#"+value.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function htmlSanitizeWriterImpl(buf,uriValidator){var ignoreCurrentElement=!1,out=bind(buf,buf.push);return{start:function(tag,attrs){tag=lowercase(tag),!ignoreCurrentElement&&blockedElements[tag]&&(ignoreCurrentElement=tag),ignoreCurrentElement||!0!==validElements[tag]||(out("<"),out(tag),forEach(attrs,(function(value,key){var lkey=lowercase(key),isImage="img"===tag&&"src"===lkey||"background"===lkey;!0!==validAttrs[lkey]||!0===uriAttrs[lkey]&&!uriValidator(value,isImage)||(out(" "),out(key),out('="'),out(encodeEntities(value)),out('"'))})),out(">"))},end:function(tag){tag=lowercase(tag),ignoreCurrentElement||!0!==validElements[tag]||!0===voidElements[tag]||(out("</"),out(tag),out(">")),tag==ignoreCurrentElement&&(ignoreCurrentElement=!1)},chars:function(chars){ignoreCurrentElement||out(encodeEntities(chars))}}}function stripCustomNsAttrs(node){for(;node;){if(node.nodeType===window.Node.ELEMENT_NODE)for(var attrs=node.attributes,i=0,l=attrs.length;i<l;i++){var attrNode=attrs[i],attrName=attrNode.name.toLowerCase();"xmlns:ns1"!==attrName&&0!==attrName.lastIndexOf("ns1:",0)||(node.removeAttributeNode(attrNode),i--,l--)}var nextNode=node.firstChild;nextNode&&stripCustomNsAttrs(nextNode),node=getNonDescendant("nextSibling",node)}}function getNonDescendant(propName,node){var nextNode=node[propName];if(nextNode&&nodeContains.call(node,nextNode))throw $sanitizeMinErr("elclob","Failed to sanitize html because the element is clobbered: {0}",node.outerHTML||node.outerText);return nextNode}}function sanitizeText(chars){var buf=[],writer;return htmlSanitizeWriter(buf,noop).chars(chars),buf.join("")}angular.module("ngSanitize",[]).provider("$sanitize",$SanitizeProvider).info({angularVersion:"1.6.6"}),angular.module("ngSanitize").filter("linky",["$sanitize",function($sanitize){var LINKY_URL_REGEXP=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,MAILTO_REGEXP=/^mailto:/i,linkyMinErr=angular.$$minErr("linky"),isDefined=angular.isDefined,isFunction=angular.isFunction,isObject=angular.isObject,isString=angular.isString;return function(text,target,attributes){if(null==text||""===text)return text;if(!isString(text))throw linkyMinErr("notstring","Expected string but received: {0}",text);for(var attributesFn=isFunction(attributes)?attributes:isObject(attributes)?function getAttributesObject(){return attributes}:function getEmptyAttributesObject(){return{}},match,raw=text,html=[],url,i;match=raw.match(LINKY_URL_REGEXP);)url=match[0],match[2]||match[4]||(url=(match[3]?"http://":"mailto:")+url),i=match.index,addText(raw.substr(0,i)),addLink(url,match[0].replace(MAILTO_REGEXP,"")),raw=raw.substring(i+match[0].length);return addText(raw),$sanitize(html.join(""));function addText(text){text&&html.push(sanitizeText(text))}function addLink(url,text){var key,linkAttributes=attributesFn(url);for(key in html.push("<a "),linkAttributes)html.push(key+'="'+linkAttributes[key]+'" ');!isDefined(target)||"target"in linkAttributes||html.push('target="',target,'" '),html.push('href="',url.replace(/"/g,"&quot;"),'">'),addText(text),html.push("</a>")}}}])}(window,window.angular),function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;(g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).angularStripe=f()}}((function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,(function(e){var n=t[o][1][e];return s(n||e)}),l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){(function(global){"use strict";var angular="undefined"!=typeof window?window.angular:void 0!==global?global.angular:null;function main($q){return function assertQConstructor(message){if("function"!=typeof $q)throw new Error(message||"$q is not a function")}}module.exports=angular.module("assert-q-constructor",[]).factory("assertQConstructor",main).name,main.$inject=["$q"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(_dereq_,module,exports){"use strict";function isObjOrFn(x){return("object"==typeof x||"function"==typeof x)&&null!==x}module.exports.get=function(obj,path){return isObjOrFn(obj)&&"string"==typeof path?(path.split(".").some((function(path,index){if(void 0===(obj=obj[path]))return!0})),obj):obj;var pathArr},module.exports.set=function(obj,path,value){if(isObjOrFn(obj)&&"string"==typeof path){var pathArr=path.split(".");pathArr.forEach((function(path,index){isObjOrFn(obj[path])||(obj[path]={}),index===pathArr.length-1&&(obj[path]=value),obj=obj[path]}))}}},{}],3:[function(_dereq_,module,exports){"use strict";var extend=_dereq_("xtend/mutable"),dot=_dereq_("dot-prop"),asyncMethods=["card.createToken","bankAccount.createToken","bitcoinReceiver.createReceiver","bitcoinReceiver.pollReceiver","bitcoinReceiver.getReceiver"],helperMethods=["setPublishableKey","card.validateCardNumber","card.validateExpiry","card.validateCVC","card.cardType","bankAccount.validateRoutingNumber","bankAccount.validateAccountNumber","bitcoinReceiver.cancelReceiverPoll"];function promisify(Promise,method,receiver,resolver){return function promisified(){var args=Array.prototype.slice.call(arguments);return new Promise((function(resolve,reject){receiver[method].apply(receiver,args.concat((function promisifiedResolve(){resolver.apply({resolve:resolve,reject:reject},arguments)})))}))}}function stripeResponseHandler(status,response){response.error?this.reject(extend(new Error,response.error)):this.resolve(response)}module.exports=function promisifyStripe(Stripe,Promise){if("function"!=typeof Stripe)throw new Error("Stripe.js must be provided");if("function"!=typeof Promise)throw new Error("Promise constructor must be provided");var stripe={};return asyncMethods.forEach((function(method){var names=method.split("."),receiverName=names[0],methodName=names[1];dot.set(stripe,method,promisify(Promise,methodName,Stripe[receiverName],stripeResponseHandler))})),helperMethods.forEach((function(method){dot.set(stripe,method,dot.get(Stripe,method))})),stripe}},{"dot-prop":2,"xtend/mutable":4}],4:[function(_dereq_,module,exports){module.exports=extend;var hasOwnProperty=Object.prototype.hasOwnProperty;function extend(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}},{}],5:[function(_dereq_,module,exports){"use strict";var service=_dereq_("./service");function stripeProvider(Stripe){if(!Stripe)throw new Error("Stripe must be available as window.Stripe");this.setPublishableKey=Stripe.setPublishableKey,this.$get=service}module.exports=stripeProvider,stripeProvider.$inject=["Stripe"]},{"./service":6}],6:[function(_dereq_,module,exports){"use strict";var stripeAsPromised=_dereq_("stripe-as-promised");function factory(Stripe,$q){return stripeAsPromised(Stripe,$q)}module.exports=factory,factory.$inject=["Stripe","$q"]},{"stripe-as-promised":3}],7:[function(_dereq_,module,exports){(function(global){"use strict";var angular="undefined"!=typeof window?window.angular:void 0!==global?global.angular:null,provider=_dereq_("./provider"),Stripe=window.Stripe;function verifyQ(assertQConstructor){assertQConstructor("angular-stripe: For Angular <= 1.2 support, first load https://github.com/bendrucker/angular-q-constructor")}module.exports=angular.module("angular-stripe",[_dereq_("angular-assert-q-constructor")]).constant("Stripe",Stripe).provider("stripe",provider).run(verifyQ).name,verifyQ.$inject=["assertQConstructor"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./provider":5,"angular-assert-q-constructor":1}]},{},[7])(7)})),
/*!
 * angular-translate - v2.15.2 - 2017-06-22
 * 
 * Copyright (c) 2017 The angular-translate team, Pascal Precht; Licensed MIT
 */
function(root,factory){"function"==typeof define&&define.amd?define([],(function(){return factory()})):"object"==typeof module&&module.exports?module.exports=factory():factory()}(this,(function(){function runTranslate($translate){"use strict";var key=$translate.storageKey(),storage=$translate.storage(),fallbackFromIncorrectStorageValue=function(){var preferred=$translate.preferredLanguage();angular.isString(preferred)?$translate.use(preferred):storage.put(key,$translate.use())};fallbackFromIncorrectStorageValue.displayName="fallbackFromIncorrectStorageValue",storage?storage.get(key)?$translate.use(storage.get(key)).catch(fallbackFromIncorrectStorageValue):fallbackFromIncorrectStorageValue():angular.isString($translate.preferredLanguage())&&$translate.use($translate.preferredLanguage())}function $translateSanitizationProvider(){"use strict";var $sanitize,$sce,currentStrategy=null,hasConfiguredStrategy=!1,hasShownNoStrategyConfiguredWarning=!1,strategies;(strategies={sanitize:function(value,mode){return"text"===mode&&(value=htmlSanitizeValue(value)),value},escape:function(value,mode){return"text"===mode&&(value=htmlEscapeValue(value)),value},sanitizeParameters:function(value,mode){return"params"===mode&&(value=mapInterpolationParameters(value,htmlSanitizeValue)),value},escapeParameters:function(value,mode){return"params"===mode&&(value=mapInterpolationParameters(value,htmlEscapeValue)),value},sce:function(value,mode,context){return"text"===mode?value=htmlTrustValue(value):"params"===mode&&"filter"!==context&&(value=mapInterpolationParameters(value,htmlEscapeValue)),value},sceParameters:function(value,mode){return"params"===mode&&(value=mapInterpolationParameters(value,htmlTrustValue)),value}}).escaped=strategies.escapeParameters,this.addStrategy=function(strategyName,strategyFunction){return strategies[strategyName]=strategyFunction,this},this.removeStrategy=function(strategyName){return delete strategies[strategyName],this},this.useStrategy=function(strategy){return hasConfiguredStrategy=!0,currentStrategy=strategy,this},this.$get=["$injector","$log",function($injector,$log){var cachedStrategyMap={},applyStrategies=function(value,mode,context,selectedStrategies){return angular.forEach(selectedStrategies,(function(selectedStrategy){if(angular.isFunction(selectedStrategy))value=selectedStrategy(value,mode,context);else if(angular.isFunction(strategies[selectedStrategy]))value=strategies[selectedStrategy](value,mode,context);else{if(!angular.isString(strategies[selectedStrategy]))throw new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+selectedStrategy+"'");if(!cachedStrategyMap[strategies[selectedStrategy]])try{cachedStrategyMap[strategies[selectedStrategy]]=$injector.get(strategies[selectedStrategy])}catch(e){throw cachedStrategyMap[strategies[selectedStrategy]]=function(){},new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+selectedStrategy+"'")}value=cachedStrategyMap[strategies[selectedStrategy]](value,mode,context)}})),value},showNoStrategyConfiguredWarning=function(){hasConfiguredStrategy||hasShownNoStrategyConfiguredWarning||($log.warn("pascalprecht.translate.$translateSanitization: No sanitization strategy has been configured. This can have serious security implications. See http://angular-translate.github.io/docs/#/guide/19_security for details."),hasShownNoStrategyConfiguredWarning=!0)};return $injector.has("$sanitize")&&($sanitize=$injector.get("$sanitize")),$injector.has("$sce")&&($sce=$injector.get("$sce")),{useStrategy:function(self){return function(strategy){self.useStrategy(strategy)}}(this),sanitize:function(value,mode,strategy,context){if(currentStrategy||showNoStrategyConfiguredWarning(),strategy||null===strategy||(strategy=currentStrategy),!strategy)return value;context||(context="service");var selectedStrategies=angular.isArray(strategy)?strategy:[strategy];return applyStrategies(value,mode,context,selectedStrategies)}}}];var htmlEscapeValue=function(value){var element=angular.element("<div></div>");return element.text(value),element.html()},htmlSanitizeValue=function(value){if(!$sanitize)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sanitize service. Either include the ngSanitize module (https://docs.angularjs.org/api/ngSanitize) or use a sanitization strategy which does not depend on $sanitize, such as 'escape'.");return $sanitize(value)},htmlTrustValue=function(value){if(!$sce)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sce service.");return $sce.trustAsHtml(value)},mapInterpolationParameters=function(value,iteratee,stack){if(angular.isDate(value))return value;if(angular.isObject(value)){var result=angular.isArray(value)?[]:{};if(stack){if(stack.indexOf(value)>-1)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot interpolate parameter due recursive object")}else stack=[];return stack.push(value),angular.forEach(value,(function(propertyValue,propertyKey){angular.isFunction(propertyValue)||(result[propertyKey]=mapInterpolationParameters(propertyValue,iteratee,stack))})),stack.splice(-1,1),result}return angular.isNumber(value)?value:!0===value||!1===value?value:angular.isUndefined(value)||null===value?value:iteratee(value)}}function $translate($STORAGE_KEY,$windowProvider,$translateSanitizationProvider,pascalprechtTranslateOverrider){"use strict";var $translationTable={},$preferredLanguage,$availableLanguageKeys=[],$languageKeyAliases,$fallbackLanguage,$fallbackWasString,$uses,$nextLang,$storageFactory,$storageKey=$STORAGE_KEY,$storagePrefix,$missingTranslationHandlerFactory,$interpolationFactory,$interpolatorFactories=[],$loaderFactory,$cloakClassName="translate-cloak",$loaderOptions,$notFoundIndicatorLeft,$notFoundIndicatorRight,$postCompilingEnabled=!1,$forceAsyncReloadEnabled=!1,$nestedObjectDelimeter=".",$isReady=!1,$keepContent=!1,loaderCache,directivePriority=0,statefulFilter=!0,postProcessFn,uniformLanguageTagResolver="default",languageTagResolver={default:function(tag){return(tag||"").split("-").join("_")},java:function(tag){var temp=(tag||"").split("-").join("_"),parts=temp.split("_");return parts.length>1?parts[0].toLowerCase()+"_"+parts[1].toUpperCase():temp},bcp47:function(tag){var temp=(tag||"").split("_").join("-"),parts=temp.split("-");return parts.length>1?parts[0].toLowerCase()+"-"+parts[1].toUpperCase():temp},"iso639-1":function(tag){var temp,parts;return(tag||"").split("_").join("-").split("-")[0].toLowerCase()}},version="2.15.2",getFirstBrowserLanguage=function(){if(angular.isFunction(pascalprechtTranslateOverrider.getLocale))return pascalprechtTranslateOverrider.getLocale();var nav=$windowProvider.$get().navigator,browserLanguagePropertyKeys=["language","browserLanguage","systemLanguage","userLanguage"],i,language;if(angular.isArray(nav.languages))for(i=0;i<nav.languages.length;i++)if((language=nav.languages[i])&&language.length)return language;for(i=0;i<browserLanguagePropertyKeys.length;i++)if((language=nav[browserLanguagePropertyKeys[i]])&&language.length)return language;return null};getFirstBrowserLanguage.displayName="angular-translate/service: getFirstBrowserLanguage";var getLocale=function(){var locale=getFirstBrowserLanguage()||"";return languageTagResolver[uniformLanguageTagResolver]&&(locale=languageTagResolver[uniformLanguageTagResolver](locale)),locale};getLocale.displayName="angular-translate/service: getLocale";var indexOf=function(array,searchElement){for(var i=0,len=array.length;i<len;i++)if(array[i]===searchElement)return i;return-1},trim=function(){return this.toString().replace(/^\s+|\s+$/g,"")},negotiateLocale=function(preferred){if(preferred){for(var avail=[],locale=angular.lowercase(preferred),i=0,n=$availableLanguageKeys.length,alias;i<n;i++)avail.push(angular.lowercase($availableLanguageKeys[i]));if(indexOf(avail,locale)>-1)return preferred;if($languageKeyAliases)for(var langKeyAlias in $languageKeyAliases)if($languageKeyAliases.hasOwnProperty(langKeyAlias)){var hasWildcardKey=!1,hasExactKey=Object.prototype.hasOwnProperty.call($languageKeyAliases,langKeyAlias)&&angular.lowercase(langKeyAlias)===angular.lowercase(preferred);if("*"===langKeyAlias.slice(-1)&&(hasWildcardKey=langKeyAlias.slice(0,-1)===preferred.slice(0,langKeyAlias.length-1)),(hasExactKey||hasWildcardKey)&&(alias=$languageKeyAliases[langKeyAlias],indexOf(avail,angular.lowercase(alias))>-1))return alias}var parts=preferred.split("_");return parts.length>1&&indexOf(avail,angular.lowercase(parts[0]))>-1?parts[0]:void 0}},translations=function(langKey,translationTable){if(!langKey&&!translationTable)return $translationTable;if(langKey&&!translationTable){if(angular.isString(langKey))return $translationTable[langKey]}else angular.isObject($translationTable[langKey])||($translationTable[langKey]={}),angular.extend($translationTable[langKey],flatObject(translationTable));return this};this.translations=translations,this.cloakClassName=function(name){return name?($cloakClassName=name,this):$cloakClassName},this.nestedObjectDelimeter=function(delimiter){return delimiter?($nestedObjectDelimeter=delimiter,this):$nestedObjectDelimeter};var flatObject=function(data,path,result,prevKey){var key,keyWithPath,keyWithShortPath,val;for(key in path||(path=[]),result||(result={}),data)Object.prototype.hasOwnProperty.call(data,key)&&(val=data[key],angular.isObject(val)?flatObject(val,path.concat(key),result,key):(keyWithPath=path.length?""+path.join($nestedObjectDelimeter)+$nestedObjectDelimeter+key:key,path.length&&key===prevKey&&(result[keyWithShortPath=""+path.join($nestedObjectDelimeter)]="@:"+keyWithPath),result[keyWithPath]=val));return result};flatObject.displayName="flatObject",this.addInterpolation=function(factory){return $interpolatorFactories.push(factory),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(factory){return $interpolationFactory=factory,this},this.useSanitizeValueStrategy=function(value){return $translateSanitizationProvider.useStrategy(value),this},this.preferredLanguage=function(langKey){return langKey?(setupPreferredLanguage(langKey),this):$preferredLanguage};var setupPreferredLanguage=function(langKey){return langKey&&($preferredLanguage=langKey),$preferredLanguage};this.translationNotFoundIndicator=function(indicator){return this.translationNotFoundIndicatorLeft(indicator),this.translationNotFoundIndicatorRight(indicator),this},this.translationNotFoundIndicatorLeft=function(indicator){return indicator?($notFoundIndicatorLeft=indicator,this):$notFoundIndicatorLeft},this.translationNotFoundIndicatorRight=function(indicator){return indicator?($notFoundIndicatorRight=indicator,this):$notFoundIndicatorRight},this.fallbackLanguage=function(langKey){return fallbackStack(langKey),this};var fallbackStack=function(langKey){return langKey?(angular.isString(langKey)?($fallbackWasString=!0,$fallbackLanguage=[langKey]):angular.isArray(langKey)&&($fallbackWasString=!1,$fallbackLanguage=langKey),angular.isString($preferredLanguage)&&indexOf($fallbackLanguage,$preferredLanguage)<0&&$fallbackLanguage.push($preferredLanguage),this):$fallbackWasString?$fallbackLanguage[0]:$fallbackLanguage};this.use=function(langKey){if(langKey){if(!$translationTable[langKey]&&!$loaderFactory)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+langKey+"'");return $uses=langKey,this}return $uses},this.resolveClientLocale=function(){return getLocale()};var storageKey=function(key){return key?($storageKey=key,this):$storagePrefix?$storagePrefix+$storageKey:$storageKey};this.storageKey=storageKey,this.useUrlLoader=function(url,options){return this.useLoader("$translateUrlLoader",angular.extend({url:url},options))},this.useStaticFilesLoader=function(options){return this.useLoader("$translateStaticFilesLoader",options)},this.useLoader=function(loaderFactory,options){return $loaderFactory=loaderFactory,$loaderOptions=options||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(storageFactory){return $storageFactory=storageFactory,this},this.storagePrefix=function(prefix){return prefix?($storagePrefix=prefix,this):prefix},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(factory){return $missingTranslationHandlerFactory=factory,this},this.usePostCompiling=function(value){return $postCompilingEnabled=!!value,this},this.forceAsyncReload=function(value){return $forceAsyncReloadEnabled=!!value,this},this.uniformLanguageTag=function(options){return options?angular.isString(options)&&(options={standard:options}):options={},uniformLanguageTagResolver=options.standard,this},this.determinePreferredLanguage=function(fn){var locale=fn&&angular.isFunction(fn)?fn():getLocale();return $preferredLanguage=$availableLanguageKeys.length&&negotiateLocale(locale)||locale,this},this.registerAvailableLanguageKeys=function(languageKeys,aliases){return languageKeys?($availableLanguageKeys=languageKeys,aliases&&($languageKeyAliases=aliases),this):$availableLanguageKeys},this.useLoaderCache=function(cache){return!1===cache?loaderCache=void 0:!0===cache?loaderCache=!0:void 0===cache?loaderCache="$translationCache":cache&&(loaderCache=cache),this},this.directivePriority=function(priority){return void 0===priority?directivePriority:(directivePriority=priority,this)},this.statefulFilter=function(state){return void 0===state?statefulFilter:(statefulFilter=state,this)},this.postProcess=function(fn){return postProcessFn=fn||void 0,this},this.keepContent=function(value){return $keepContent=!!value,this},this.$get=["$log","$injector","$rootScope","$q",function($log,$injector,$rootScope,$q){var Storage,defaultInterpolator=$injector.get($interpolationFactory||"$translateDefaultInterpolation"),pendingLoader=!1,interpolatorHashMap={},langPromises={},fallbackIndex,startFallbackIteration,$translate=function(translationId,interpolateParams,interpolationId,defaultTranslationText,forceLanguage){!$uses&&$preferredLanguage&&($uses=$preferredLanguage);var uses=forceLanguage&&forceLanguage!==$uses?negotiateLocale(forceLanguage)||forceLanguage:$uses,translateAll;if(forceLanguage&&loadTranslationsIfMissing(forceLanguage),angular.isArray(translationId))return function(translationIds){for(var results={},promises=[],translate=function(translationId){var deferred=$q.defer(),regardless=function(value){results[translationId]=value,deferred.resolve([translationId,value])};return $translate(translationId,interpolateParams,interpolationId,defaultTranslationText,forceLanguage).then(regardless,regardless),deferred.promise},i=0,c=translationIds.length;i<c;i++)promises.push(translate(translationIds[i]));return $q.all(promises).then((function(){return results}))}(translationId);var deferred=$q.defer();translationId&&(translationId=trim.apply(translationId));var promiseToWaitFor=function(){var promise=$preferredLanguage?langPromises[$preferredLanguage]:langPromises[uses];if(fallbackIndex=0,$storageFactory&&!promise){var langKey=Storage.get($storageKey);if(promise=langPromises[langKey],$fallbackLanguage&&$fallbackLanguage.length){var index=indexOf($fallbackLanguage,langKey);fallbackIndex=0===index?1:0,indexOf($fallbackLanguage,$preferredLanguage)<0&&$fallbackLanguage.push($preferredLanguage)}}return promise}();if(promiseToWaitFor){var promiseResolved=function(){forceLanguage||(uses=$uses),determineTranslation(translationId,interpolateParams,interpolationId,defaultTranslationText,uses).then(deferred.resolve,deferred.reject)};promiseResolved.displayName="promiseResolved",promiseToWaitFor.finally(promiseResolved).catch(angular.noop)}else determineTranslation(translationId,interpolateParams,interpolationId,defaultTranslationText,uses).then(deferred.resolve,deferred.reject);return deferred.promise},applyNotFoundIndicators=function(translationId){return $notFoundIndicatorLeft&&(translationId=[$notFoundIndicatorLeft,translationId].join(" ")),$notFoundIndicatorRight&&(translationId=[translationId,$notFoundIndicatorRight].join(" ")),translationId},useLanguage=function(key){$uses=key,$storageFactory&&Storage.put($translate.storageKey(),$uses),$rootScope.$emit("$translateChangeSuccess",{language:key}),defaultInterpolator.setLocale($uses);var eachInterpolator=function(interpolator,id){interpolatorHashMap[id].setLocale($uses)};eachInterpolator.displayName="eachInterpolatorLocaleSetter",angular.forEach(interpolatorHashMap,eachInterpolator),$rootScope.$emit("$translateChangeEnd",{language:key})},loadAsync=function(key){if(!key)throw"No language key specified for loading.";var deferred=$q.defer();$rootScope.$emit("$translateLoadingStart",{language:key}),pendingLoader=!0;var cache=loaderCache;"string"==typeof cache&&(cache=$injector.get(cache));var loaderOptions=angular.extend({},$loaderOptions,{key:key,$http:angular.extend({},{cache:cache},$loaderOptions.$http)}),onLoaderSuccess=function(data){var translationTable={};$rootScope.$emit("$translateLoadingSuccess",{language:key}),angular.isArray(data)?angular.forEach(data,(function(table){angular.extend(translationTable,flatObject(table))})):angular.extend(translationTable,flatObject(data)),pendingLoader=!1,deferred.resolve({key:key,table:translationTable}),$rootScope.$emit("$translateLoadingEnd",{language:key})};onLoaderSuccess.displayName="onLoaderSuccess";var onLoaderError=function(key){$rootScope.$emit("$translateLoadingError",{language:key}),deferred.reject(key),$rootScope.$emit("$translateLoadingEnd",{language:key})};return onLoaderError.displayName="onLoaderError",$injector.get($loaderFactory)(loaderOptions).then(onLoaderSuccess,onLoaderError),deferred.promise};if($storageFactory&&(!(Storage=$injector.get($storageFactory)).get||!Storage.put))throw new Error("Couldn't use storage '"+$storageFactory+"', missing get() or put() method!");if($interpolatorFactories.length){var eachInterpolationFactory=function(interpolatorFactory){var interpolator=$injector.get(interpolatorFactory);interpolator.setLocale($preferredLanguage||$uses),interpolatorHashMap[interpolator.getInterpolationIdentifier()]=interpolator};eachInterpolationFactory.displayName="interpolationFactoryAdder",angular.forEach($interpolatorFactories,eachInterpolationFactory)}var getTranslationTable=function(langKey){var deferred=$q.defer();if(Object.prototype.hasOwnProperty.call($translationTable,langKey))deferred.resolve($translationTable[langKey]);else if(langPromises[langKey]){var onResolve=function(data){translations(data.key,data.table),deferred.resolve(data.table)};onResolve.displayName="translationTableResolver",langPromises[langKey].then(onResolve,deferred.reject)}else deferred.reject();return deferred.promise},getFallbackTranslation=function(langKey,translationId,interpolateParams,Interpolator,sanitizeStrategy){var deferred=$q.defer(),onResolve=function(translationTable){if(Object.prototype.hasOwnProperty.call(translationTable,translationId)&&null!==translationTable[translationId]){Interpolator.setLocale(langKey);var translation=translationTable[translationId];if("@:"===translation.substr(0,2))getFallbackTranslation(langKey,translation.substr(2),interpolateParams,Interpolator,sanitizeStrategy).then(deferred.resolve,deferred.reject);else{var interpolatedValue=Interpolator.interpolate(translationTable[translationId],interpolateParams,"service",sanitizeStrategy,translationId);interpolatedValue=applyPostProcessing(translationId,translationTable[translationId],interpolatedValue,interpolateParams,langKey),deferred.resolve(interpolatedValue)}Interpolator.setLocale($uses)}else deferred.reject()};return onResolve.displayName="fallbackTranslationResolver",getTranslationTable(langKey).then(onResolve,deferred.reject),deferred.promise},getFallbackTranslationInstant=function(langKey,translationId,interpolateParams,Interpolator,sanitizeStrategy){var result,translationTable=$translationTable[langKey];if(translationTable&&Object.prototype.hasOwnProperty.call(translationTable,translationId)&&null!==translationTable[translationId]){if(Interpolator.setLocale(langKey),result=Interpolator.interpolate(translationTable[translationId],interpolateParams,"filter",sanitizeStrategy,translationId),result=applyPostProcessing(translationId,translationTable[translationId],result,interpolateParams,langKey,sanitizeStrategy),!angular.isString(result)&&angular.isFunction(result.$$unwrapTrustedValue)){var result2=result.$$unwrapTrustedValue();if("@:"===result2.substr(0,2))return getFallbackTranslationInstant(langKey,result2.substr(2),interpolateParams,Interpolator,sanitizeStrategy)}else if("@:"===result.substr(0,2))return getFallbackTranslationInstant(langKey,result.substr(2),interpolateParams,Interpolator,sanitizeStrategy);Interpolator.setLocale($uses)}return result},translateByHandler=function(translationId,interpolateParams,defaultTranslationText,sanitizeStrategy){return $missingTranslationHandlerFactory?$injector.get($missingTranslationHandlerFactory)(translationId,$uses,interpolateParams,defaultTranslationText,sanitizeStrategy):translationId},resolveForFallbackLanguage=function(fallbackLanguageIndex,translationId,interpolateParams,Interpolator,defaultTranslationText,sanitizeStrategy){var deferred=$q.defer();if(fallbackLanguageIndex<$fallbackLanguage.length){var langKey=$fallbackLanguage[fallbackLanguageIndex];getFallbackTranslation(langKey,translationId,interpolateParams,Interpolator,sanitizeStrategy).then((function(data){deferred.resolve(data)}),(function(){return resolveForFallbackLanguage(fallbackLanguageIndex+1,translationId,interpolateParams,Interpolator,defaultTranslationText,sanitizeStrategy).then(deferred.resolve,deferred.reject)}))}else if(defaultTranslationText)deferred.resolve(defaultTranslationText);else{var missingTranslationHandlerTranslation=translateByHandler(translationId,interpolateParams,defaultTranslationText);$missingTranslationHandlerFactory&&missingTranslationHandlerTranslation?deferred.resolve(missingTranslationHandlerTranslation):deferred.reject(applyNotFoundIndicators(translationId))}return deferred.promise},resolveForFallbackLanguageInstant=function(fallbackLanguageIndex,translationId,interpolateParams,Interpolator,sanitizeStrategy){var result;if(fallbackLanguageIndex<$fallbackLanguage.length){var langKey=$fallbackLanguage[fallbackLanguageIndex];(result=getFallbackTranslationInstant(langKey,translationId,interpolateParams,Interpolator,sanitizeStrategy))||""===result||(result=resolveForFallbackLanguageInstant(fallbackLanguageIndex+1,translationId,interpolateParams,Interpolator))}return result},fallbackTranslation=function(translationId,interpolateParams,Interpolator,defaultTranslationText,sanitizeStrategy){return resolveForFallbackLanguage(startFallbackIteration>0?startFallbackIteration:fallbackIndex,translationId,interpolateParams,Interpolator,defaultTranslationText,sanitizeStrategy)},fallbackTranslationInstant=function(translationId,interpolateParams,Interpolator,sanitizeStrategy){return resolveForFallbackLanguageInstant(startFallbackIteration>0?startFallbackIteration:fallbackIndex,translationId,interpolateParams,Interpolator,sanitizeStrategy)},determineTranslation=function(translationId,interpolateParams,interpolationId,defaultTranslationText,uses,sanitizeStrategy){var deferred=$q.defer(),table=uses?$translationTable[uses]:$translationTable,Interpolator=interpolationId?interpolatorHashMap[interpolationId]:defaultInterpolator;if(table&&Object.prototype.hasOwnProperty.call(table,translationId)&&null!==table[translationId]){var translation=table[translationId];if("@:"===translation.substr(0,2))$translate(translation.substr(2),interpolateParams,interpolationId,defaultTranslationText,uses).then(deferred.resolve,deferred.reject);else{var resolvedTranslation=Interpolator.interpolate(translation,interpolateParams,"service",sanitizeStrategy,translationId);resolvedTranslation=applyPostProcessing(translationId,translation,resolvedTranslation,interpolateParams,uses),deferred.resolve(resolvedTranslation)}}else{var missingTranslationHandlerTranslation;$missingTranslationHandlerFactory&&!pendingLoader&&(missingTranslationHandlerTranslation=translateByHandler(translationId,interpolateParams,defaultTranslationText)),uses&&$fallbackLanguage&&$fallbackLanguage.length?fallbackTranslation(translationId,interpolateParams,Interpolator,defaultTranslationText,sanitizeStrategy).then((function(translation){deferred.resolve(translation)}),(function(_translationId){deferred.reject(applyNotFoundIndicators(_translationId))})):$missingTranslationHandlerFactory&&!pendingLoader&&missingTranslationHandlerTranslation?defaultTranslationText?deferred.resolve(defaultTranslationText):deferred.resolve(missingTranslationHandlerTranslation):defaultTranslationText?deferred.resolve(defaultTranslationText):deferred.reject(applyNotFoundIndicators(translationId))}return deferred.promise},determineTranslationInstant=function(translationId,interpolateParams,interpolationId,uses,sanitizeStrategy){var result,table=uses?$translationTable[uses]:$translationTable,Interpolator=defaultInterpolator;if(interpolatorHashMap&&Object.prototype.hasOwnProperty.call(interpolatorHashMap,interpolationId)&&(Interpolator=interpolatorHashMap[interpolationId]),table&&Object.prototype.hasOwnProperty.call(table,translationId)&&null!==table[translationId]){var translation=table[translationId];"@:"===translation.substr(0,2)?result=determineTranslationInstant(translation.substr(2),interpolateParams,interpolationId,uses,sanitizeStrategy):(result=Interpolator.interpolate(translation,interpolateParams,"filter",sanitizeStrategy,translationId),result=applyPostProcessing(translationId,translation,result,interpolateParams,uses,sanitizeStrategy))}else{var missingTranslationHandlerTranslation;$missingTranslationHandlerFactory&&!pendingLoader&&(missingTranslationHandlerTranslation=translateByHandler(translationId,interpolateParams,sanitizeStrategy)),uses&&$fallbackLanguage&&$fallbackLanguage.length?(fallbackIndex=0,result=fallbackTranslationInstant(translationId,interpolateParams,Interpolator,sanitizeStrategy)):result=$missingTranslationHandlerFactory&&!pendingLoader&&missingTranslationHandlerTranslation?missingTranslationHandlerTranslation:applyNotFoundIndicators(translationId)}return result},clearNextLangAndPromise=function(key){$nextLang===key&&($nextLang=void 0),langPromises[key]=void 0},applyPostProcessing=function(translationId,translation,resolvedTranslation,interpolateParams,uses,sanitizeStrategy){var fn=postProcessFn;return fn&&("string"==typeof fn&&(fn=$injector.get(fn)),fn)?fn(translationId,translation,resolvedTranslation,interpolateParams,uses,sanitizeStrategy):resolvedTranslation},loadTranslationsIfMissing=function(key){$translationTable[key]||!$loaderFactory||langPromises[key]||(langPromises[key]=loadAsync(key).then((function(translation){return translations(translation.key,translation.table),translation})))};$translate.preferredLanguage=function(langKey){return langKey&&setupPreferredLanguage(langKey),$preferredLanguage},$translate.cloakClassName=function(){return $cloakClassName},$translate.nestedObjectDelimeter=function(){return $nestedObjectDelimeter},$translate.fallbackLanguage=function(langKey){if(null!=langKey){if(fallbackStack(langKey),$loaderFactory&&$fallbackLanguage&&$fallbackLanguage.length)for(var i=0,len=$fallbackLanguage.length;i<len;i++)langPromises[$fallbackLanguage[i]]||(langPromises[$fallbackLanguage[i]]=loadAsync($fallbackLanguage[i]));$translate.use($translate.use())}return $fallbackWasString?$fallbackLanguage[0]:$fallbackLanguage},$translate.useFallbackLanguage=function(langKey){if(null!=langKey)if(langKey){var langKeyPosition=indexOf($fallbackLanguage,langKey);langKeyPosition>-1&&(startFallbackIteration=langKeyPosition)}else startFallbackIteration=0},$translate.proposedLanguage=function(){return $nextLang},$translate.storage=function(){return Storage},$translate.negotiateLocale=negotiateLocale,$translate.use=function(key){if(!key)return $uses;var deferred=$q.defer();deferred.promise.then(null,angular.noop),$rootScope.$emit("$translateChangeStart",{language:key});var aliasedKey=negotiateLocale(key);return $availableLanguageKeys.length>0&&!aliasedKey?$q.reject(key):(aliasedKey&&(key=aliasedKey),$nextLang=key,!$forceAsyncReloadEnabled&&$translationTable[key]||!$loaderFactory||langPromises[key]?langPromises[key]?langPromises[key].then((function(translation){return $nextLang===translation.key&&useLanguage(translation.key),deferred.resolve(translation.key),translation}),(function(key){return!$uses&&$fallbackLanguage&&$fallbackLanguage.length>0&&$fallbackLanguage[0]!==key?$translate.use($fallbackLanguage[0]).then(deferred.resolve,deferred.reject):deferred.reject(key)})):(deferred.resolve(key),useLanguage(key)):(langPromises[key]=loadAsync(key).then((function(translation){return translations(translation.key,translation.table),deferred.resolve(translation.key),$nextLang===key&&useLanguage(translation.key),translation}),(function(key){return $rootScope.$emit("$translateChangeError",{language:key}),deferred.reject(key),$rootScope.$emit("$translateChangeEnd",{language:key}),$q.reject(key)})),langPromises[key].finally((function(){clearNextLangAndPromise(key)})).catch(angular.noop)),deferred.promise)},$translate.resolveClientLocale=function(){return getLocale()},$translate.storageKey=function(){return storageKey()},$translate.isPostCompilingEnabled=function(){return $postCompilingEnabled},$translate.isForceAsyncReloadEnabled=function(){return $forceAsyncReloadEnabled},$translate.isKeepContent=function(){return $keepContent},$translate.refresh=function(langKey){if(!$loaderFactory)throw new Error("Couldn't refresh translation table, no loader registered!");$rootScope.$emit("$translateRefreshStart",{language:langKey});var deferred=$q.defer(),updatedLanguages={};function loadNewData(languageKey){var promise=loadAsync(languageKey);return langPromises[languageKey]=promise,promise.then((function(data){$translationTable[languageKey]={},translations(languageKey,data.table),updatedLanguages[languageKey]=!0}),angular.noop),promise}if(deferred.promise.then((function(){for(var key in $translationTable)$translationTable.hasOwnProperty(key)&&(key in updatedLanguages||delete $translationTable[key]);$uses&&useLanguage($uses)}),angular.noop).finally((function(){$rootScope.$emit("$translateRefreshEnd",{language:langKey})})),langKey)$translationTable[langKey]?loadNewData(langKey).then(deferred.resolve,deferred.reject):deferred.reject();else{var languagesToReload=$fallbackLanguage&&$fallbackLanguage.slice()||[];$uses&&-1===languagesToReload.indexOf($uses)&&languagesToReload.push($uses),$q.all(languagesToReload.map(loadNewData)).then(deferred.resolve,deferred.reject)}return deferred.promise},$translate.instant=function(translationId,interpolateParams,interpolationId,forceLanguage,sanitizeStrategy){var uses=forceLanguage&&forceLanguage!==$uses?negotiateLocale(forceLanguage)||forceLanguage:$uses;if(null===translationId||angular.isUndefined(translationId))return translationId;if(forceLanguage&&loadTranslationsIfMissing(forceLanguage),angular.isArray(translationId)){for(var results={},i=0,c=translationId.length;i<c;i++)results[translationId[i]]=$translate.instant(translationId[i],interpolateParams,interpolationId,forceLanguage,sanitizeStrategy);return results}if(angular.isString(translationId)&&translationId.length<1)return translationId;translationId&&(translationId=trim.apply(translationId));var result,possibleLangKeys=[],missingTranslationHandlerTranslation;$preferredLanguage&&possibleLangKeys.push($preferredLanguage),uses&&possibleLangKeys.push(uses),$fallbackLanguage&&$fallbackLanguage.length&&(possibleLangKeys=possibleLangKeys.concat($fallbackLanguage));for(var j=0,d=possibleLangKeys.length;j<d;j++){var possibleLangKey=possibleLangKeys[j];if($translationTable[possibleLangKey]&&void 0!==$translationTable[possibleLangKey][translationId]&&(result=determineTranslationInstant(translationId,interpolateParams,interpolationId,uses,sanitizeStrategy)),void 0!==result)break}result||""===result||($notFoundIndicatorLeft||$notFoundIndicatorRight?result=applyNotFoundIndicators(translationId):(result=defaultInterpolator.interpolate(translationId,interpolateParams,"filter",sanitizeStrategy),$missingTranslationHandlerFactory&&!pendingLoader&&(missingTranslationHandlerTranslation=translateByHandler(translationId,interpolateParams,sanitizeStrategy)),$missingTranslationHandlerFactory&&!pendingLoader&&missingTranslationHandlerTranslation&&(result=missingTranslationHandlerTranslation)));return result},$translate.versionInfo=function(){return version},$translate.loaderCache=function(){return loaderCache},$translate.directivePriority=function(){return directivePriority},$translate.statefulFilter=function(){return statefulFilter},$translate.isReady=function(){return $isReady};var $onReadyDeferred=$q.defer();$onReadyDeferred.promise.then((function(){$isReady=!0})),$translate.onReady=function(fn){var deferred=$q.defer();return angular.isFunction(fn)&&deferred.promise.then(fn),$isReady?deferred.resolve():$onReadyDeferred.promise.then(deferred.resolve),deferred.promise},$translate.getAvailableLanguageKeys=function(){return $availableLanguageKeys.length>0?$availableLanguageKeys:null},$translate.getTranslationTable=function(langKey){return(langKey=langKey||$translate.use())&&$translationTable[langKey]?angular.copy($translationTable[langKey]):null};var globalOnReadyListener=$rootScope.$on("$translateReady",(function(){$onReadyDeferred.resolve(),globalOnReadyListener(),globalOnReadyListener=null})),globalOnChangeListener=$rootScope.$on("$translateChangeEnd",(function(){$onReadyDeferred.resolve(),globalOnChangeListener(),globalOnChangeListener=null}));if($loaderFactory){if(angular.equals($translationTable,{})&&$translate.use()&&$translate.use($translate.use()),$fallbackLanguage&&$fallbackLanguage.length)for(var processAsyncResult=function(translation){return translations(translation.key,translation.table),$rootScope.$emit("$translateChangeEnd",{language:translation.key}),translation},i=0,len=$fallbackLanguage.length;i<len;i++){var fallbackLanguageId=$fallbackLanguage[i];!$forceAsyncReloadEnabled&&$translationTable[fallbackLanguageId]||(langPromises[fallbackLanguageId]=loadAsync(fallbackLanguageId).then(processAsyncResult))}}else $rootScope.$emit("$translateReady",{language:$translate.use()});return $translate}]}function $translateDefaultInterpolation($interpolate,$translateSanitization){"use strict";var $translateInterpolator={},$locale,$identifier="default";return $translateInterpolator.setLocale=function(locale){$locale=locale},$translateInterpolator.getInterpolationIdentifier=function(){return"default"},$translateInterpolator.useSanitizeValueStrategy=function(value){return $translateSanitization.useStrategy(value),this},$translateInterpolator.interpolate=function(value,interpolationParams,context,sanitizeStrategy,translationId){var interpolatedText;return interpolationParams=interpolationParams||{},interpolationParams=$translateSanitization.sanitize(interpolationParams,"params",sanitizeStrategy,context),angular.isNumber(value)?interpolatedText=""+value:angular.isString(value)?(interpolatedText=$interpolate(value)(interpolationParams),interpolatedText=$translateSanitization.sanitize(interpolatedText,"text",sanitizeStrategy,context)):interpolatedText="",interpolatedText},$translateInterpolator}function translateDirective($translate,$interpolate,$compile,$parse,$rootScope){"use strict";var trim=function(){return this.toString().replace(/^\s+|\s+$/g,"")};return{restrict:"AE",scope:!0,priority:$translate.directivePriority(),compile:function(tElement,tAttr){var translateValuesExist=tAttr.translateValues?tAttr.translateValues:void 0,translateInterpolation=tAttr.translateInterpolation?tAttr.translateInterpolation:void 0,translateValueExist=tElement[0].outerHTML.match(/translate-value-+/i),interpolateRegExp="^(.*)("+$interpolate.startSymbol()+".*"+$interpolate.endSymbol()+")(.*)",watcherRegExp="^(.*)"+$interpolate.startSymbol()+"(.*)"+$interpolate.endSymbol()+"(.*)";return function linkFn(scope,iElement,iAttr){scope.interpolateParams={},scope.preText="",scope.postText="",scope.translateNamespace=getTranslateNamespace(scope);var translationIds={},initInterpolationParams,observeElementTranslation=function(translationId){if(angular.isFunction(observeElementTranslation._unwatchOld)&&(observeElementTranslation._unwatchOld(),observeElementTranslation._unwatchOld=void 0),angular.equals(translationId,"")||!angular.isDefined(translationId)){var iElementText=trim.apply(iElement.text()),interpolateMatches=iElementText.match(interpolateRegExp);if(angular.isArray(interpolateMatches)){scope.preText=interpolateMatches[1],scope.postText=interpolateMatches[3],translationIds.translate=$interpolate(interpolateMatches[2])(scope.$parent);var watcherMatches=iElementText.match(watcherRegExp);angular.isArray(watcherMatches)&&watcherMatches[2]&&watcherMatches[2].length&&(observeElementTranslation._unwatchOld=scope.$watch(watcherMatches[2],(function(newValue){translationIds.translate=newValue,updateTranslations()})))}else translationIds.translate=iElementText||void 0}else translationIds.translate=translationId;updateTranslations()},observeAttributeTranslation=function(translateAttr){iAttr.$observe(translateAttr,(function(translationId){translationIds[translateAttr]=translationId,updateTranslations()}))};(function(interpolateParams,iAttr,tAttr){if(iAttr.translateValues&&angular.extend(interpolateParams,$parse(iAttr.translateValues)(scope.$parent)),translateValueExist)for(var attr in tAttr){var attributeName;if(Object.prototype.hasOwnProperty.call(iAttr,attr)&&"translateValue"===attr.substr(0,14)&&"translateValues"!==attr)interpolateParams[angular.lowercase(attr.substr(14,1))+attr.substr(15)]=tAttr[attr]}})(scope.interpolateParams,iAttr,tAttr);var firstAttributeChangedEvent=!0;for(var translateAttr in iAttr.$observe("translate",(function(translationId){void 0===translationId?observeElementTranslation(""):""===translationId&&firstAttributeChangedEvent||(translationIds.translate=translationId,updateTranslations()),firstAttributeChangedEvent=!1})),iAttr)iAttr.hasOwnProperty(translateAttr)&&"translateAttr"===translateAttr.substr(0,13)&&translateAttr.length>13&&observeAttributeTranslation(translateAttr);if(iAttr.$observe("translateDefault",(function(value){scope.defaultText=value,updateTranslations()})),translateValuesExist&&iAttr.$observe("translateValues",(function(interpolateParams){interpolateParams&&scope.$parent.$watch((function(){angular.extend(scope.interpolateParams,$parse(interpolateParams)(scope.$parent))}))})),translateValueExist){var observeValueAttribute=function(attrName){iAttr.$observe(attrName,(function(value){var attributeName=angular.lowercase(attrName.substr(14,1))+attrName.substr(15);scope.interpolateParams[attributeName]=value}))};for(var attr in iAttr)Object.prototype.hasOwnProperty.call(iAttr,attr)&&"translateValue"===attr.substr(0,14)&&"translateValues"!==attr&&observeValueAttribute(attr)}var updateTranslations=function(){for(var key in translationIds)translationIds.hasOwnProperty(key)&&void 0!==translationIds[key]&&updateTranslation(key,translationIds[key],scope,scope.interpolateParams,scope.defaultText,scope.translateNamespace)},updateTranslation=function(translateAttr,translationId,scope,interpolateParams,defaultTranslationText,translateNamespace){translationId?(translateNamespace&&"."===translationId.charAt(0)&&(translationId=translateNamespace+translationId),$translate(translationId,interpolateParams,translateInterpolation,defaultTranslationText,scope.translateLanguage).then((function(translation){applyTranslation(translation,scope,!0,translateAttr)}),(function(translationId){applyTranslation(translationId,scope,!1,translateAttr)}))):applyTranslation(translationId,scope,!1,translateAttr)},applyTranslation=function(value,scope,successful,translateAttr){if(successful||void 0!==scope.defaultText&&(value=scope.defaultText),"translate"===translateAttr){(successful||!successful&&!$translate.isKeepContent()&&void 0===iAttr.translateKeepContent)&&iElement.empty().append(scope.preText+value+scope.postText);var globallyEnabled=$translate.isPostCompilingEnabled(),locallyDefined=void 0!==tAttr.translateCompile,locallyEnabled=locallyDefined&&"false"!==tAttr.translateCompile;(globallyEnabled&&!locallyDefined||locallyEnabled)&&$compile(iElement.contents())(scope)}else{var attributeName=iAttr.$attr[translateAttr];"data-"===attributeName.substr(0,5)&&(attributeName=attributeName.substr(5)),attributeName=attributeName.substr(15),iElement.attr(attributeName,value)}};(translateValuesExist||translateValueExist||iAttr.translateDefault)&&scope.$watch("interpolateParams",updateTranslations,!0),scope.$on("translateLanguageChanged",updateTranslations);var unbind=$rootScope.$on("$translateChangeSuccess",updateTranslations);iElement.text().length?iAttr.translate?observeElementTranslation(iAttr.translate):observeElementTranslation(""):iAttr.translate&&observeElementTranslation(iAttr.translate),updateTranslations(),scope.$on("$destroy",unbind)}}}}function getTranslateNamespace(scope){"use strict";return scope.translateNamespace?scope.translateNamespace:scope.$parent?getTranslateNamespace(scope.$parent):void 0}function translateAttrDirective($translate,$rootScope){"use strict";return{restrict:"A",priority:$translate.directivePriority(),link:function linkFn(scope,element,attr){var translateAttr,translateValues,previousAttributes={},updateTranslations=function(){angular.forEach(translateAttr,(function(translationId,attributeName){translationId&&(previousAttributes[attributeName]=!0,scope.translateNamespace&&"."===translationId.charAt(0)&&(translationId=scope.translateNamespace+translationId),$translate(translationId,translateValues,attr.translateInterpolation,void 0,scope.translateLanguage).then((function(translation){element.attr(attributeName,translation)}),(function(translationId){element.attr(attributeName,translationId)})))})),angular.forEach(previousAttributes,(function(flag,attributeName){translateAttr[attributeName]||(element.removeAttr(attributeName),delete previousAttributes[attributeName])}))};watchAttribute(scope,attr.translateAttr,(function(newValue){translateAttr=newValue}),updateTranslations),watchAttribute(scope,attr.translateValues,(function(newValue){translateValues=newValue}),updateTranslations),attr.translateValues&&scope.$watch(attr.translateValues,updateTranslations,!0),scope.$on("translateLanguageChanged",updateTranslations);var unbind=$rootScope.$on("$translateChangeSuccess",updateTranslations);updateTranslations(),scope.$on("$destroy",unbind)}}}function watchAttribute(scope,attribute,valueCallback,changeCallback){"use strict";attribute&&("::"===attribute.substr(0,2)?attribute=attribute.substr(2):scope.$watch(attribute,(function(newValue){valueCallback(newValue),changeCallback()}),!0),valueCallback(scope.$eval(attribute)))}function translateCloakDirective($translate,$rootScope){"use strict";return{compile:function(tElement){var applyCloak=function(element){element.addClass($translate.cloakClassName())},removeCloak=function(element){element.removeClass($translate.cloakClassName())};return applyCloak(tElement),function linkFn(scope,iElement,iAttr){var iRemoveCloak=removeCloak.bind(this,iElement),iApplyCloak=applyCloak.bind(this,iElement);iAttr.translateCloak&&iAttr.translateCloak.length?(iAttr.$observe("translateCloak",(function(translationId){$translate(translationId).then(iRemoveCloak,iApplyCloak)})),$rootScope.$on("$translateChangeSuccess",(function(){$translate(iAttr.translateCloak).then(iRemoveCloak,iApplyCloak)}))):$translate.onReady(iRemoveCloak)}}}}function translateNamespaceDirective(){"use strict";return{restrict:"A",scope:!0,compile:function(){return{pre:function(scope,iElement,iAttrs){scope.translateNamespace=getTranslateNamespace(scope),scope.translateNamespace&&"."===iAttrs.translateNamespace.charAt(0)?scope.translateNamespace+=iAttrs.translateNamespace:scope.translateNamespace=iAttrs.translateNamespace}}}}}function getTranslateNamespace(scope){"use strict";return scope.translateNamespace?scope.translateNamespace:scope.$parent?getTranslateNamespace(scope.$parent):void 0}function translateLanguageDirective(){"use strict";return{restrict:"A",scope:!0,compile:function(){return function linkFn(scope,iElement,iAttrs){iAttrs.$observe("translateLanguage",(function(newTranslateLanguage){scope.translateLanguage=newTranslateLanguage})),scope.$watch("translateLanguage",(function(){scope.$broadcast("translateLanguageChanged")}))}}}}function translateFilterFactory($parse,$translate){"use strict";var translateFilter=function(translationId,interpolateParams,interpolation,forceLanguage){if(!angular.isObject(interpolateParams)){var ctx=this||{__SCOPE_IS_NOT_AVAILABLE:"More info at https://github.com/angular/angular.js/commit/8863b9d04c722b278fa93c5d66ad1e578ad6eb1f"};interpolateParams=$parse(interpolateParams)(ctx)}return $translate.instant(translationId,interpolateParams,interpolation,forceLanguage)};return $translate.statefulFilter()&&(translateFilter.$stateful=!0),translateFilter}function $translationCache($cacheFactory){"use strict";return $cacheFactory("translations")}return runTranslate.$inject=["$translate"],$translate.$inject=["$STORAGE_KEY","$windowProvider","$translateSanitizationProvider","pascalprechtTranslateOverrider"],$translateDefaultInterpolation.$inject=["$interpolate","$translateSanitization"],translateDirective.$inject=["$translate","$interpolate","$compile","$parse","$rootScope"],translateAttrDirective.$inject=["$translate","$rootScope"],translateCloakDirective.$inject=["$translate","$rootScope"],translateFilterFactory.$inject=["$parse","$translate"],$translationCache.$inject=["$cacheFactory"],angular.module("pascalprecht.translate",["ng"]).run(runTranslate),runTranslate.displayName="runTranslate",angular.module("pascalprecht.translate").provider("$translateSanitization",$translateSanitizationProvider),angular.module("pascalprecht.translate").constant("pascalprechtTranslateOverrider",{}).provider("$translate",$translate),$translate.displayName="displayName",angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",$translateDefaultInterpolation),$translateDefaultInterpolation.displayName="$translateDefaultInterpolation",angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",translateDirective),translateDirective.displayName="translateDirective",angular.module("pascalprecht.translate").directive("translateAttr",translateAttrDirective),translateAttrDirective.displayName="translateAttrDirective",angular.module("pascalprecht.translate").directive("translateCloak",translateCloakDirective),translateCloakDirective.displayName="translateCloakDirective",angular.module("pascalprecht.translate").directive("translateNamespace",translateNamespaceDirective),translateNamespaceDirective.displayName="translateNamespaceDirective",angular.module("pascalprecht.translate").directive("translateLanguage",translateLanguageDirective),translateLanguageDirective.displayName="translateLanguageDirective",angular.module("pascalprecht.translate").filter("translate",translateFilterFactory),translateFilterFactory.displayName="translateFilterFactory",angular.module("pascalprecht.translate").factory("$translationCache",$translationCache),$translationCache.displayName="$translationCache","pascalprecht.translate"})),
/**
 * State-based routing for AngularJS
 * @version v0.4.2
 * @link http://angular-ui.github.com/
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"undefined"!=typeof module&&void 0!==exports&&module.exports===exports&&(module.exports="ui.router"),function(window,angular,undefined){"use strict";var isDefined=angular.isDefined,isFunction=angular.isFunction,isString=angular.isString,isObject=angular.isObject,isArray=angular.isArray,forEach=angular.forEach,extend=angular.extend,copy=angular.copy,toJson=angular.toJson,$$UMFP;function inherit(parent,extra){return extend(new(extend((function(){}),{prototype:parent})),extra)}function merge(dst){return forEach(arguments,(function(obj){obj!==dst&&forEach(obj,(function(value,key){dst.hasOwnProperty(key)||(dst[key]=value)}))})),dst}function ancestors(first,second){var path=[];for(var n in first.path){if(first.path[n]!==second.path[n])break;path.push(first.path[n])}return path}function objectKeys(object){if(Object.keys)return Object.keys(object);var result=[];return forEach(object,(function(val,key){result.push(key)})),result}function indexOf(array,value){if(Array.prototype.indexOf)return array.indexOf(value,Number(arguments[2])||0);var len=array.length>>>0,from=Number(arguments[2])||0;for((from=from<0?Math.ceil(from):Math.floor(from))<0&&(from+=len);from<len;from++)if(from in array&&array[from]===value)return from;return-1}function inheritParams(currentParams,newParams,$current,$to){var parents=ancestors($current,$to),parentParams,inherited={},inheritList=[];for(var i in parents)if(parents[i]&&parents[i].params&&(parentParams=objectKeys(parents[i].params)).length)for(var j in parentParams)indexOf(inheritList,parentParams[j])>=0||(inheritList.push(parentParams[j]),inherited[parentParams[j]]=currentParams[parentParams[j]]);return extend({},inherited,newParams)}function equalForKeys(a,b,keys){if(!keys)for(var n in keys=[],a)keys.push(n);for(var i=0;i<keys.length;i++){var k=keys[i];if(a[k]!=b[k])return!1}return!0}function filterByKeys(keys,values){var filtered={};return forEach(keys,(function(name){filtered[name]=values[name]})),filtered}function indexBy(array,propName){var result={};return forEach(array,(function(item){result[item[propName]]=item})),result}function pick(obj){var copy={},keys=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return forEach(keys,(function(key){key in obj&&(copy[key]=obj[key])})),copy}function omit(obj){var copy={},keys=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var key in obj)-1==indexOf(keys,key)&&(copy[key]=obj[key]);return copy}function pluck(collection,key){var result=isArray(collection)?[]:{};return forEach(collection,(function(val,i){result[i]=isFunction(key)?key(val):val[key]})),result}function filter(collection,callback){var array=isArray(collection),result=array?[]:{};return forEach(collection,(function(val,i){callback(val,i)&&(result[array?result.length:i]=val)})),result}function map(collection,callback){var result=isArray(collection)?[]:{};return forEach(collection,(function(val,i){result[i]=callback(val,i)})),result}function silenceUncaughtInPromise(promise){return promise.then(void 0,(function(){}))&&promise}function $Resolve($q,$injector){var VISIT_IN_PROGRESS=1,VISIT_DONE=2,NOTHING={},NO_DEPENDENCIES=[],NO_LOCALS=NOTHING,NO_PARENT=extend($q.when(NOTHING),{$$promises:NOTHING,$$values:NOTHING});this.study=function(invocables){if(!isObject(invocables))throw new Error("'invocables' must be an object");var invocableKeys=objectKeys(invocables||{}),plan=[],cycle=[],visited={};function visit(value,key){if(2!==visited[key]){if(cycle.push(key),1===visited[key])throw cycle.splice(0,indexOf(cycle,key)),new Error("Cyclic dependency: "+cycle.join(" -> "));if(visited[key]=1,isString(value))plan.push(key,[function(){return $injector.get(value)}],NO_DEPENDENCIES);else{var params=$injector.annotate(value);forEach(params,(function(param){param!==key&&invocables.hasOwnProperty(param)&&visit(invocables[param],param)})),plan.push(key,value,params)}cycle.pop(),visited[key]=2}}function isResolve(value){return isObject(value)&&value.then&&value.$$promises}return forEach(invocables,visit),invocables=cycle=visited=null,function(locals,parent,self){if(isResolve(locals)&&void 0===self&&(self=parent,parent=locals,locals=null),locals){if(!isObject(locals))throw new Error("'locals' must be an object")}else locals=NO_LOCALS;if(parent){if(!isResolve(parent))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else parent=NO_PARENT;var resolution=$q.defer(),result=silenceUncaughtInPromise(resolution.promise),promises=result.$$promises={},values=extend({},locals),wait=1+plan.length/3,merged=!1;function done(){--wait||(merged||merge(values,parent.$$values),result.$$values=values,result.$$promises=result.$$promises||!0,delete result.$$inheritedValues,resolution.resolve(values))}function fail(reason){result.$$failure=reason,resolution.reject(reason)}if(silenceUncaughtInPromise(result),isDefined(parent.$$failure))return fail(parent.$$failure),result;parent.$$inheritedValues&&merge(values,omit(parent.$$inheritedValues,invocableKeys)),extend(promises,parent.$$promises),parent.$$values?(merged=merge(values,omit(parent.$$values,invocableKeys)),result.$$inheritedValues=omit(parent.$$values,invocableKeys),done()):(parent.$$inheritedValues&&(result.$$inheritedValues=omit(parent.$$inheritedValues,invocableKeys)),parent.then(done,fail));for(var i=0,ii=plan.length;i<ii;i+=3)locals.hasOwnProperty(plan[i])?done():invoke(plan[i],plan[i+1],plan[i+2]);function invoke(key,invocable,params){var invocation=$q.defer(),waitParams=0;function onfailure(reason){invocation.reject(reason),fail(reason)}function proceed(){if(!isDefined(result.$$failure))try{invocation.resolve($injector.invoke(invocable,self,values)),invocation.promise.then((function(result){values[key]=result,done()}),onfailure)}catch(e){onfailure(e)}}forEach(params,(function(dep){promises.hasOwnProperty(dep)&&!locals.hasOwnProperty(dep)&&(waitParams++,promises[dep].then((function(result){values[dep]=result,--waitParams||proceed()}),onfailure))})),waitParams||proceed(),promises[key]=silenceUncaughtInPromise(invocation.promise)}return result}},this.resolve=function(invocables,locals,parent,self){return this.study(invocables)(locals,parent,self)}}function TemplateFactoryProvider(){var shouldUnsafelyUseHttp=angular.version.minor<3;this.shouldUnsafelyUseHttp=function(value){shouldUnsafelyUseHttp=!!value},this.$get=["$http","$templateCache","$injector",function($http,$templateCache,$injector){return new TemplateFactory($http,$templateCache,$injector,shouldUnsafelyUseHttp)}]}function TemplateFactory($http,$templateCache,$injector,shouldUnsafelyUseHttp){this.fromConfig=function(config,params,locals){return isDefined(config.template)?this.fromString(config.template,params):isDefined(config.templateUrl)?this.fromUrl(config.templateUrl,params):isDefined(config.templateProvider)?this.fromProvider(config.templateProvider,params,locals):null},this.fromString=function(template,params){return isFunction(template)?template(params):template},this.fromUrl=function(url,params){return isFunction(url)&&(url=url(params)),null==url?null:shouldUnsafelyUseHttp?$http.get(url,{cache:$templateCache,headers:{Accept:"text/html"}}).then((function(response){return response.data})):$injector.get("$templateRequest")(url)},this.fromProvider=function(provider,params,locals){return $injector.invoke(provider,null,locals||{params:params})}}function UrlMatcher(pattern,config,parentMatcher){config=extend({params:{}},isObject(config)?config:{});var placeholder=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,searchPlaceholder=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,compiled="^",last=0,m,segments=this.segments=[],parentParams=parentMatcher?parentMatcher.params:{},params=this.params=parentMatcher?parentMatcher.params.$$new():new $$UMFP.ParamSet,paramNames=[],p,param,segment;function addParameter(id,type,config,location){if(paramNames.push(id),parentParams[id])return parentParams[id];if(!/^\w+([-.]+\w+)*(?:\[\])?$/.test(id))throw new Error("Invalid parameter name '"+id+"' in pattern '"+pattern+"'");if(params[id])throw new Error("Duplicate parameter name '"+id+"' in pattern '"+pattern+"'");return params[id]=new $$UMFP.Param(id,type,config,location),params[id]}function quoteRegExp(string,pattern,squash,optional){var surroundPattern=["",""],result=string.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!pattern)return result;switch(squash){case!1:surroundPattern=["(",")"+(optional?"?":"")];break;case!0:result=result.replace(/\/$/,""),surroundPattern=["(?:/(",")|/)?"];break;default:surroundPattern=["("+squash+"|",")?"]}return result+surroundPattern[0]+pattern+surroundPattern[1]}function matchDetails(m,isSearch){var id,regexp,segment,type,cfg,arrayMode;return id=m[2]||m[3],cfg=config.params[id],segment=pattern.substring(last,m.index),(regexp=isSearch?m[4]:m[4]||("*"==m[1]?".*":null))&&(type=$$UMFP.type(regexp)||inherit($$UMFP.type("string"),{pattern:new RegExp(regexp,config.caseInsensitive?"i":void 0)})),{id:id,regexp:regexp,segment:segment,type:type,cfg:cfg}}for(this.source=pattern;(m=placeholder.exec(pattern))&&!((p=matchDetails(m,!1)).segment.indexOf("?")>=0);)param=addParameter(p.id,p.type,p.cfg,"path"),compiled+=quoteRegExp(p.segment,param.type.pattern.source,param.squash,param.isOptional),segments.push(p.segment),last=placeholder.lastIndex;var i=(segment=pattern.substring(last)).indexOf("?");if(i>=0){var search=this.sourceSearch=segment.substring(i);if(segment=segment.substring(0,i),this.sourcePath=pattern.substring(0,last+i),search.length>0)for(last=0;m=searchPlaceholder.exec(search);)param=addParameter((p=matchDetails(m,!0)).id,p.type,p.cfg,"search"),last=placeholder.lastIndex}else this.sourcePath=pattern,this.sourceSearch="";compiled+=quoteRegExp(segment)+(!1===config.strict?"/?":"")+"$",segments.push(segment),this.regexp=new RegExp(compiled,config.caseInsensitive?"i":void 0),this.prefix=segments[0],this.$$paramNames=paramNames}function Type(config){extend(this,config)}function $UrlMatcherFactory(){$$UMFP=this;var isCaseInsensitive=!1,isStrictMode=!0,defaultSquashPolicy=!1;function valToString(val){return null!=val?val.toString().replace(/(~|\/)/g,(function(m){return{"~":"~~","/":"~2F"}[m]})):val}function valFromString(val){return null!=val?val.toString().replace(/(~~|~2F)/g,(function(m){return{"~~":"~","~2F":"/"}[m]})):val}var $types={},enqueue=!0,typeQueue=[],injector,defaultTypes={string:{encode:valToString,decode:valFromString,is:function(val){return null==val||!isDefined(val)||"string"==typeof val},pattern:/[^/]*/},int:{encode:valToString,decode:function(val){return parseInt(val,10)},is:function(val){return null!=val&&this.decode(val.toString())===val},pattern:/\d+/},bool:{encode:function(val){return val?1:0},decode:function(val){return 0!==parseInt(val,10)},is:function(val){return!0===val||!1===val},pattern:/0|1/},date:{encode:function(val){if(this.is(val))return[val.getFullYear(),("0"+(val.getMonth()+1)).slice(-2),("0"+val.getDate()).slice(-2)].join("-")},decode:function(val){if(this.is(val))return val;var match=this.capture.exec(val);return match?new Date(match[1],match[2]-1,match[3]):void 0},is:function(val){return val instanceof Date&&!isNaN(val.valueOf())},equals:function(a,b){return this.is(a)&&this.is(b)&&a.toISOString()===b.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:angular.toJson,decode:angular.fromJson,is:angular.isObject,equals:angular.equals,pattern:/[^/]*/},any:{encode:angular.identity,decode:angular.identity,equals:angular.equals,pattern:/.*/}};function getDefaultConfig(){return{strict:isStrictMode,caseInsensitive:isCaseInsensitive}}function isInjectable(value){return isFunction(value)||isArray(value)&&isFunction(value[value.length-1])}function flushTypeQueue(){for(;typeQueue.length;){var type=typeQueue.shift();if(type.pattern)throw new Error("You cannot override a type's .pattern at runtime.");angular.extend($types[type.name],injector.invoke(type.def))}}function ParamSet(params){extend(this,params||{})}$UrlMatcherFactory.$$getDefaultValue=function(config){if(!isInjectable(config.value))return config.value;if(!injector)throw new Error("Injectable functions cannot be called at configuration time");return injector.invoke(config.value)},this.caseInsensitive=function(value){return isDefined(value)&&(isCaseInsensitive=value),isCaseInsensitive},this.strictMode=function(value){return isDefined(value)&&(isStrictMode=value),isStrictMode},this.defaultSquashPolicy=function(value){if(!isDefined(value))return defaultSquashPolicy;if(!0!==value&&!1!==value&&!isString(value))throw new Error("Invalid squash policy: "+value+". Valid policies: false, true, arbitrary-string");return defaultSquashPolicy=value,value},this.compile=function(pattern,config){return new UrlMatcher(pattern,extend(getDefaultConfig(),config))},this.isMatcher=function(o){if(!isObject(o))return!1;var result=!0;return forEach(UrlMatcher.prototype,(function(val,name){isFunction(val)&&(result=result&&isDefined(o[name])&&isFunction(o[name]))})),result},this.type=function(name,definition,definitionFn){if(!isDefined(definition))return $types[name];if($types.hasOwnProperty(name))throw new Error("A type named '"+name+"' has already been defined.");return $types[name]=new Type(extend({name:name},definition)),definitionFn&&(typeQueue.push({name:name,def:definitionFn}),enqueue||flushTypeQueue()),this},forEach(defaultTypes,(function(type,name){$types[name]=new Type(extend({name:name},type))})),$types=inherit($types,{}),this.$get=["$injector",function($injector){return injector=$injector,enqueue=!1,flushTypeQueue(),forEach(defaultTypes,(function(type,name){$types[name]||($types[name]=new Type(type))})),this}],this.Param=function Param(id,type,config,location){var self=this;config=unwrapShorthand(config),type=getType(config,type,location);var arrayMode=getArrayMode();"string"!==(type=arrayMode?type.$asArray(arrayMode,"search"===location):type).name||arrayMode||"path"!==location||void 0!==config.value||(config.value="");var isOptional=void 0!==config.value,squash=getSquashPolicy(config,isOptional),replace=getReplace(config,arrayMode,isOptional,squash);function unwrapShorthand(config){var keys=isObject(config)?objectKeys(config):[],isShorthand;return-1===indexOf(keys,"value")&&-1===indexOf(keys,"type")&&-1===indexOf(keys,"squash")&&-1===indexOf(keys,"array")&&(config={value:config}),config.$$fn=isInjectable(config.value)?config.value:function(){return config.value},config}function getType(config,urlType,location){if(config.type&&urlType)throw new Error("Param '"+id+"' has two type configurations.");return urlType||(config.type?angular.isString(config.type)?$types[config.type]:config.type instanceof Type?config.type:new Type(config.type):"config"===location?$types.any:$types.string)}function getArrayMode(){var arrayDefaults={array:"search"===location&&"auto"},arrayParamNomenclature=id.match(/\[\]$/)?{array:!0}:{};return extend(arrayDefaults,arrayParamNomenclature,config).array}function getSquashPolicy(config,isOptional){var squash=config.squash;if(!isOptional||!1===squash)return!1;if(!isDefined(squash)||null==squash)return defaultSquashPolicy;if(!0===squash||isString(squash))return squash;throw new Error("Invalid squash policy: '"+squash+"'. Valid policies: false, true, or arbitrary string")}function getReplace(config,arrayMode,isOptional,squash){var replace,configuredKeys,defaultPolicy=[{from:"",to:isOptional||arrayMode?void 0:""},{from:null,to:isOptional||arrayMode?void 0:""}];return replace=isArray(config.replace)?config.replace:[],isString(squash)&&replace.push({from:squash,to:void 0}),configuredKeys=map(replace,(function(item){return item.from})),filter(defaultPolicy,(function(item){return-1===indexOf(configuredKeys,item.from)})).concat(replace)}function $$getDefaultValue(){if(!injector)throw new Error("Injectable functions cannot be called at configuration time");var defaultValue=injector.invoke(config.$$fn);if(null!=defaultValue&&!self.type.is(defaultValue))throw new Error("Default value ("+defaultValue+") for parameter '"+self.id+"' is not an instance of Type ("+self.type.name+")");return defaultValue}function $value(value){function hasReplaceVal(val){return function(obj){return obj.from===val}}function $replace(value){var replacement=map(filter(self.replace,hasReplaceVal(value)),(function(obj){return obj.to}));return replacement.length?replacement[0]:value}return value=$replace(value),isDefined(value)?self.type.$normalize(value):$$getDefaultValue()}function toString(){return"{Param:"+id+" "+type+" squash: '"+squash+"' optional: "+isOptional+"}"}extend(this,{id:id,type:type,location:location,array:arrayMode,squash:squash,replace:replace,isOptional:isOptional,value:$value,dynamic:void 0,config:config,toString:toString})},ParamSet.prototype={$$new:function(){return inherit(this,extend(new ParamSet,{$$parent:this}))},$$keys:function(){for(var keys=[],chain=[],parent=this,ignore=objectKeys(ParamSet.prototype);parent;)chain.push(parent),parent=parent.$$parent;return chain.reverse(),forEach(chain,(function(paramset){forEach(objectKeys(paramset),(function(key){-1===indexOf(keys,key)&&-1===indexOf(ignore,key)&&keys.push(key)}))})),keys},$$values:function(paramValues){var values={},self=this;return forEach(self.$$keys(),(function(key){values[key]=self[key].value(paramValues&&paramValues[key])})),values},$$equals:function(paramValues1,paramValues2){var equal=!0,self=this;return forEach(self.$$keys(),(function(key){var left=paramValues1&&paramValues1[key],right=paramValues2&&paramValues2[key];self[key].type.equals(left,right)||(equal=!1)})),equal},$$validates:function $$validate(paramValues){var keys=this.$$keys(),i,param,rawVal,normalized,encoded;for(i=0;i<keys.length&&(param=this[keys[i]],null!=(rawVal=paramValues[keys[i]])||!param.isOptional);i++){if(normalized=param.type.$normalize(rawVal),!param.type.is(normalized))return!1;if(encoded=param.type.encode(normalized),angular.isString(encoded)&&!param.type.pattern.exec(encoded))return!1}return!0},$$parent:void 0},this.ParamSet=ParamSet}function $UrlRouterProvider($locationProvider,$urlMatcherFactory){var rules=[],otherwise=null,interceptDeferred=!1,listener;function regExpPrefix(re){var prefix=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(re.source);return null!=prefix?prefix[1].replace(/\\(.)/g,"$1"):""}function interpolate(pattern,match){return pattern.replace(/\$(\$|\d{1,2})/,(function(m,what){return match["$"===what?0:Number(what)]}))}function handleIfMatch($injector,handler,match){if(!match)return!1;var result=$injector.invoke(handler,handler,{$match:match});return!isDefined(result)||result}function $get($location,$rootScope,$injector,$browser,$sniffer){var baseHref=$browser.baseHref(),location=$location.url(),lastPushedUrl;function appendBasePath(url,isHtml5,absolute){return"/"===baseHref?url:isHtml5?baseHref.slice(0,-1)+url:absolute?baseHref.slice(1)+url:url}function update(evt){if(!evt||!evt.defaultPrevented){var ignoreUpdate=lastPushedUrl&&$location.url()===lastPushedUrl;lastPushedUrl=void 0;var n=rules.length,i;for(i=0;i<n;i++)if(check(rules[i]))return;otherwise&&check(otherwise)}function check(rule){var handled=rule($injector,$location);return!!handled&&(isString(handled)&&$location.replace().url(handled),!0)}}function listen(){return listener=listener||$rootScope.$on("$locationChangeSuccess",update)}return interceptDeferred||listen(),{sync:function(){update()},listen:function(){return listen()},update:function(read){read?location=$location.url():$location.url()!==location&&($location.url(location),$location.replace())},push:function(urlMatcher,params,options){var url=urlMatcher.format(params||{});null!==url&&params&&params["#"]&&(url+="#"+params["#"]),$location.url(url),lastPushedUrl=options&&options.$$avoidResync?$location.url():void 0,options&&options.replace&&$location.replace()},href:function(urlMatcher,params,options){if(!urlMatcher.validates(params))return null;var isHtml5=$locationProvider.html5Mode();angular.isObject(isHtml5)&&(isHtml5=isHtml5.enabled),isHtml5=isHtml5&&$sniffer.history;var url=urlMatcher.format(params);if(options=options||{},isHtml5||null===url||(url="#"+$locationProvider.hashPrefix()+url),null!==url&&params&&params["#"]&&(url+="#"+params["#"]),url=appendBasePath(url,isHtml5,options.absolute),!options.absolute||!url)return url;var slash=!isHtml5&&url?"/":"",port=$location.port();return port=80===port||443===port?"":":"+port,[$location.protocol(),"://",$location.host(),port,slash,url].join("")}}}this.rule=function(rule){if(!isFunction(rule))throw new Error("'rule' must be a function");return rules.push(rule),this},this.otherwise=function(rule){if(isString(rule)){var redirect=rule;rule=function(){return redirect}}else if(!isFunction(rule))throw new Error("'rule' must be a function");return otherwise=rule,this},this.when=function(what,handler){var redirect,handlerIsString=isString(handler);if(isString(what)&&(what=$urlMatcherFactory.compile(what)),!handlerIsString&&!isFunction(handler)&&!isArray(handler))throw new Error("invalid 'handler' in when()");var strategies={matcher:function(what,handler){return handlerIsString&&(redirect=$urlMatcherFactory.compile(handler),handler=["$match",function($match){return redirect.format($match)}]),extend((function($injector,$location){return handleIfMatch($injector,handler,what.exec($location.path(),$location.search()))}),{prefix:isString(what.prefix)?what.prefix:""})},regex:function(what,handler){if(what.global||what.sticky)throw new Error("when() RegExp must not be global or sticky");return handlerIsString&&(redirect=handler,handler=["$match",function($match){return interpolate(redirect,$match)}]),extend((function($injector,$location){return handleIfMatch($injector,handler,what.exec($location.path()))}),{prefix:regExpPrefix(what)})}},check={matcher:$urlMatcherFactory.isMatcher(what),regex:what instanceof RegExp};for(var n in check)if(check[n])return this.rule(strategies[n](what,handler));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(defer){void 0===defer&&(defer=!0),interceptDeferred=defer},this.$get=$get,$get.$inject=["$location","$rootScope","$injector","$browser","$sniffer"]}function $StateProvider($urlRouterProvider,$urlMatcherFactory){var root,states={},$state,queue={},abstractKey="abstract",stateBuilder={parent:function(state){if(isDefined(state.parent)&&state.parent)return findState(state.parent);var compositeName=/^(.+)\.[^.]+$/.exec(state.name);return compositeName?findState(compositeName[1]):root},data:function(state){return state.parent&&state.parent.data&&(state.data=state.self.data=inherit(state.parent.data,state.data)),state.data},url:function(state){var url=state.url,config={params:state.params||{}};if(isString(url))return"^"==url.charAt(0)?$urlMatcherFactory.compile(url.substring(1),config):(state.parent.navigable||root).url.concat(url,config);if(!url||$urlMatcherFactory.isMatcher(url))return url;throw new Error("Invalid url '"+url+"' in state '"+state+"'")},navigable:function(state){return state.url?state:state.parent?state.parent.navigable:null},ownParams:function(state){var params=state.url&&state.url.params||new $$UMFP.ParamSet;return forEach(state.params||{},(function(config,id){params[id]||(params[id]=new $$UMFP.Param(id,null,config,"config"))})),params},params:function(state){var ownParams=pick(state.ownParams,state.ownParams.$$keys());return state.parent&&state.parent.params?extend(state.parent.params.$$new(),ownParams):new $$UMFP.ParamSet},views:function(state){var views={};return forEach(isDefined(state.views)?state.views:{"":state},(function(view,name){name.indexOf("@")<0&&(name+="@"+state.parent.name),view.resolveAs=view.resolveAs||state.resolveAs||"$resolve",views[name]=view})),views},path:function(state){return state.parent?state.parent.path.concat(state):[]},includes:function(state){var includes=state.parent?extend({},state.parent.includes):{};return includes[state.name]=!0,includes},$delegates:{}};function isRelative(stateName){return 0===stateName.indexOf(".")||0===stateName.indexOf("^")}function findState(stateOrName,base){if(stateOrName){var isStr=isString(stateOrName),name=isStr?stateOrName:stateOrName.name,path;if(isRelative(name)){if(!base)throw new Error("No reference point given for path '"+name+"'");base=findState(base);for(var rel=name.split("."),i=0,pathLength=rel.length,current=base;i<pathLength;i++)if(""!==rel[i]||0!==i){if("^"!==rel[i])break;if(!current.parent)throw new Error("Path '"+name+"' not valid for state '"+base.name+"'");current=current.parent}else current=base;rel=rel.slice(i).join("."),name=current.name+(current.name&&rel?".":"")+rel}var state=states[name];return!state||!isStr&&(isStr||state!==stateOrName&&state.self!==stateOrName)?void 0:state}}function queueState(parentName,state){queue[parentName]||(queue[parentName]=[]),queue[parentName].push(state)}function flushQueuedChildren(parentName){for(var queued=queue[parentName]||[];queued.length;)registerState(queued.shift())}function registerState(state){var name=(state=inherit(state,{self:state,resolve:state.resolve||{},toString:function(){return this.name}})).name;if(!isString(name)||name.indexOf("@")>=0)throw new Error("State must have a valid name");if(states.hasOwnProperty(name))throw new Error("State '"+name+"' is already defined");var parentName=-1!==name.indexOf(".")?name.substring(0,name.lastIndexOf(".")):isString(state.parent)?state.parent:isObject(state.parent)&&isString(state.parent.name)?state.parent.name:"";if(parentName&&!states[parentName])return queueState(parentName,state.self);for(var key in stateBuilder)isFunction(stateBuilder[key])&&(state[key]=stateBuilder[key](state,stateBuilder.$delegates[key]));return states[name]=state,!state.abstract&&state.url&&$urlRouterProvider.when(state.url,["$match","$stateParams",function($match,$stateParams){$state.$current.navigable==state&&equalForKeys($match,$stateParams)||$state.transitionTo(state,$match,{inherit:!0,location:!1})}]),flushQueuedChildren(name),state}function isGlob(text){return text.indexOf("*")>-1}function doesStateMatchGlob(glob){for(var globSegments=glob.split("."),segments=$state.$current.name.split("."),i=0,l=globSegments.length;i<l;i++)"*"===globSegments[i]&&(segments[i]="*");return"**"===globSegments[0]&&(segments=segments.slice(indexOf(segments,globSegments[1]))).unshift("**"),"**"===globSegments[globSegments.length-1]&&(segments.splice(indexOf(segments,globSegments[globSegments.length-2])+1,Number.MAX_VALUE),segments.push("**")),globSegments.length==segments.length&&segments.join("")===globSegments.join("")}function decorator(name,func){return isString(name)&&!isDefined(func)?stateBuilder[name]:isFunction(func)&&isString(name)?(stateBuilder[name]&&!stateBuilder.$delegates[name]&&(stateBuilder.$delegates[name]=stateBuilder[name]),stateBuilder[name]=func,this):this}function state(name,definition){return isObject(name)?definition=name:definition.name=name,registerState(definition),this}function $get($rootScope,$q,$view,$injector,$resolve,$stateParams,$urlRouter,$location,$urlMatcherFactory){var TransitionSupersededError=new Error("transition superseded"),TransitionSuperseded=silenceUncaughtInPromise($q.reject(TransitionSupersededError)),TransitionPrevented=silenceUncaughtInPromise($q.reject(new Error("transition prevented"))),TransitionAborted=silenceUncaughtInPromise($q.reject(new Error("transition aborted"))),TransitionFailed=silenceUncaughtInPromise($q.reject(new Error("transition failed")));function handleRedirect(redirect,state,params,options){var evt=$rootScope.$broadcast("$stateNotFound",redirect,state,params);if(evt.defaultPrevented)return $urlRouter.update(),TransitionAborted;if(!evt.retry)return null;if(options.$retry)return $urlRouter.update(),TransitionFailed;var retryTransition=$state.transition=$q.when(evt.retry);return retryTransition.then((function(){return retryTransition!==$state.transition?($rootScope.$broadcast("$stateChangeCancel",redirect.to,redirect.toParams,state,params),TransitionSuperseded):(redirect.options.$retry=!0,$state.transitionTo(redirect.to,redirect.toParams,redirect.options))}),(function(){return TransitionAborted})),$urlRouter.update(),retryTransition}function resolveState(state,params,paramsAreFiltered,inherited,dst,options){var $stateParams=paramsAreFiltered?params:filterByKeys(state.params.$$keys(),params),locals={$stateParams:$stateParams};dst.resolve=$resolve.resolve(state.resolve,locals,dst.resolve,state);var promises=[dst.resolve.then((function(globals){dst.globals=globals}))];function resolveViews(){var viewsPromises=[];return forEach(state.views,(function(view,name){var injectables=view.resolve&&view.resolve!==state.resolve?view.resolve:{};injectables.$template=[function(){return $view.load(name,{view:view,locals:dst.globals,params:$stateParams,notify:options.notify})||""}],viewsPromises.push($resolve.resolve(injectables,dst.globals,dst.resolve,state).then((function(result){if(isFunction(view.controllerProvider)||isArray(view.controllerProvider)){var injectLocals=angular.extend({},injectables,dst.globals);result.$$controller=$injector.invoke(view.controllerProvider,null,injectLocals)}else result.$$controller=view.controller;result.$$state=state,result.$$controllerAs=view.controllerAs,result.$$resolveAs=view.resolveAs,dst[name]=result})))})),$q.all(viewsPromises).then((function(){return dst.globals}))}return inherited&&promises.push(inherited),$q.all(promises).then(resolveViews).then((function(values){return dst}))}return root.locals={resolve:null,globals:{$stateParams:{}}},($state={params:{},current:root.self,$current:root,transition:null}).reload=function reload(state){return $state.transitionTo($state.current,$stateParams,{reload:state||!0,inherit:!1,notify:!0})},$state.go=function go(to,params,options){return $state.transitionTo(to,params,extend({inherit:!0,relative:$state.$current},options))},$state.transitionTo=function transitionTo(to,toParams,options){toParams=toParams||{},options=extend({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},options||{});var from=$state.$current,fromParams=$state.params,fromPath=from.path,evt,toState=findState(to,options.relative),hash=toParams["#"];if(!isDefined(toState)){var redirect={to:to,toParams:toParams,options:options},redirectResult=handleRedirect(redirect,from.self,fromParams,options);if(redirectResult)return redirectResult;if(toParams=redirect.toParams,toState=findState(to=redirect.to,(options=redirect.options).relative),!isDefined(toState)){if(!options.relative)throw new Error("No such state '"+to+"'");throw new Error("Could not resolve '"+to+"' from state '"+options.relative+"'")}}if(toState.abstract)throw new Error("Cannot transition to abstract state '"+to+"'");if(options.inherit&&(toParams=inheritParams($stateParams,toParams||{},$state.$current,toState)),!toState.params.$$validates(toParams))return TransitionFailed;toParams=toState.params.$$values(toParams);var toPath=(to=toState).path,keep=0,state=toPath[keep],locals=root.locals,toLocals=[];if(options.reload){if(isString(options.reload)||isObject(options.reload)){if(isObject(options.reload)&&!options.reload.name)throw new Error("Invalid reload state object");var reloadState=!0===options.reload?fromPath[0]:findState(options.reload);if(options.reload&&!reloadState)throw new Error("No such reload state '"+(isString(options.reload)?options.reload:options.reload.name)+"'");for(;state&&state===fromPath[keep]&&state!==reloadState;)locals=toLocals[keep]=state.locals,keep++,state=toPath[keep]}}else for(;state&&state===fromPath[keep]&&state.ownParams.$$equals(toParams,fromParams);)locals=toLocals[keep]=state.locals,keep++,state=toPath[keep];if(shouldSkipReload(to,toParams,from,fromParams,locals,options))return hash&&(toParams["#"]=hash),$state.params=toParams,copy($state.params,$stateParams),copy(filterByKeys(to.params.$$keys(),$stateParams),to.locals.globals.$stateParams),options.location&&to.navigable&&to.navigable.url&&($urlRouter.push(to.navigable.url,toParams,{$$avoidResync:!0,replace:"replace"===options.location}),$urlRouter.update(!0)),$state.transition=null,$q.when($state.current);if(toParams=filterByKeys(to.params.$$keys(),toParams||{}),hash&&(toParams["#"]=hash),options.notify&&$rootScope.$broadcast("$stateChangeStart",to.self,toParams,from.self,fromParams,options).defaultPrevented)return $rootScope.$broadcast("$stateChangeCancel",to.self,toParams,from.self,fromParams),null==$state.transition&&$urlRouter.update(),TransitionPrevented;for(var resolved=$q.when(locals),l=keep;l<toPath.length;l++,state=toPath[l])locals=toLocals[l]=inherit(locals),resolved=resolveState(state,toParams,state===to,resolved,locals,options);var transition=$state.transition=resolved.then((function(){var l,entering,exiting;if($state.transition!==transition)return $rootScope.$broadcast("$stateChangeCancel",to.self,toParams,from.self,fromParams),TransitionSuperseded;for(l=fromPath.length-1;l>=keep;l--)(exiting=fromPath[l]).self.onExit&&$injector.invoke(exiting.self.onExit,exiting.self,exiting.locals.globals),exiting.locals=null;for(l=keep;l<toPath.length;l++)(entering=toPath[l]).locals=toLocals[l],entering.self.onEnter&&$injector.invoke(entering.self.onEnter,entering.self,entering.locals.globals);return $state.transition!==transition?($rootScope.$broadcast("$stateChangeCancel",to.self,toParams,from.self,fromParams),TransitionSuperseded):($state.$current=to,$state.current=to.self,$state.params=toParams,copy($state.params,$stateParams),$state.transition=null,options.location&&to.navigable&&$urlRouter.push(to.navigable.url,to.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===options.location}),options.notify&&$rootScope.$broadcast("$stateChangeSuccess",to.self,toParams,from.self,fromParams),$urlRouter.update(!0),$state.current)})).then(null,(function(error){return error===TransitionSupersededError?TransitionSuperseded:$state.transition!==transition?($rootScope.$broadcast("$stateChangeCancel",to.self,toParams,from.self,fromParams),TransitionSuperseded):($state.transition=null,(evt=$rootScope.$broadcast("$stateChangeError",to.self,toParams,from.self,fromParams,error)).defaultPrevented||$urlRouter.update(),$q.reject(error))}));return silenceUncaughtInPromise(transition),transition},$state.is=function is(stateOrName,params,options){var state=findState(stateOrName,(options=extend({relative:$state.$current},options||{})).relative);if(isDefined(state))return $state.$current===state&&(!params||objectKeys(params).reduce((function(acc,key){var paramDef=state.params[key];return acc&&!paramDef||paramDef.type.equals($stateParams[key],params[key])}),!0))},$state.includes=function includes(stateOrName,params,options){if(options=extend({relative:$state.$current},options||{}),isString(stateOrName)&&isGlob(stateOrName)){if(!doesStateMatchGlob(stateOrName))return!1;stateOrName=$state.$current.name}var state=findState(stateOrName,options.relative);if(isDefined(state)){if(!isDefined($state.$current.includes[state.name]))return!1;if(!params)return!0;for(var keys=objectKeys(params),i=0;i<keys.length;i++){var key=keys[i],paramDef=state.params[key];if(paramDef&&!paramDef.type.equals($stateParams[key],params[key]))return!1}return objectKeys(params).reduce((function(acc,key){var paramDef=state.params[key];return acc&&!paramDef||paramDef.type.equals($stateParams[key],params[key])}),!0)}},$state.href=function href(stateOrName,params,options){var state=findState(stateOrName,(options=extend({lossy:!0,inherit:!0,absolute:!1,relative:$state.$current},options||{})).relative);if(!isDefined(state))return null;options.inherit&&(params=inheritParams($stateParams,params||{},$state.$current,state));var nav=state&&options.lossy?state.navigable:state;return nav&&void 0!==nav.url&&null!==nav.url?$urlRouter.href(nav.url,filterByKeys(state.params.$$keys().concat("#"),params||{}),{absolute:options.absolute}):null},$state.get=function(stateOrName,context){if(0===arguments.length)return map(objectKeys(states),(function(name){return states[name].self}));var state=findState(stateOrName,context||$state.$current);return state&&state.self?state.self:null},$state}function shouldSkipReload(to,toParams,from,fromParams,locals,options){function nonSearchParamsEqual(fromAndToState,fromParams,toParams){function notSearchParam(key){return"search"!=fromAndToState.params[key].location}var nonQueryParamKeys=fromAndToState.params.$$keys().filter(notSearchParam),nonQueryParams=pick.apply({},[fromAndToState.params].concat(nonQueryParamKeys)),nonQueryParamSet;return new $$UMFP.ParamSet(nonQueryParams).$$equals(fromParams,toParams)}if(!options.reload&&to===from&&(locals===from.locals||!1===to.self.reloadOnSearch&&nonSearchParamsEqual(from,fromParams,toParams)))return!0}(root=registerState({name:"",url:"^",views:null,abstract:!0})).navigable=null,this.decorator=decorator,this.state=state,this.$get=$get,$get.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function $ViewProvider(){function $get($rootScope,$templateFactory){return{load:function load(name,options){var result,defaults;return(options=extend({template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}},options)).view&&(result=$templateFactory.fromConfig(options.view,options.params,options.locals)),result}}}this.$get=$get,$get.$inject=["$rootScope","$templateFactory"]}function $ViewScrollProvider(){var useAnchorScroll=!1;this.useAnchorScroll=function(){useAnchorScroll=!0},this.$get=["$anchorScroll","$timeout",function($anchorScroll,$timeout){return useAnchorScroll?$anchorScroll:function($element){return $timeout((function(){$element[0].scrollIntoView()}),0,!1)}}]}function $ViewDirective($state,$injector,$uiViewScroll,$interpolate,$q){function getService(){return $injector.has?function(service){return $injector.has(service)?$injector.get(service):null}:function(service){try{return $injector.get(service)}catch(e){return null}}}var service=getService(),$animator=service("$animator"),$animate=service("$animate"),directive;function getRenderer(attrs,scope){var statics=function(){return{enter:function(element,target,cb){target.after(element),cb()},leave:function(element,cb){element.remove(),cb()}}};if($animate)return{enter:function(element,target,cb){angular.version.minor>2?$animate.enter(element,null,target).then(cb):$animate.enter(element,null,target,cb)},leave:function(element,cb){angular.version.minor>2?$animate.leave(element).then(cb):$animate.leave(element,cb)}};if($animator){var animate=$animator&&$animator(scope,attrs);return{enter:function(element,target,cb){animate.enter(element,null,target),cb()},leave:function(element,cb){animate.leave(element),cb()}}}return{enter:function(element,target,cb){target.after(element),cb()},leave:function(element,cb){element.remove(),cb()}}}return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(tElement,tAttrs,$transclude){return function(scope,$element,attrs){var previousEl,currentEl,currentScope,latestLocals,onloadExp=attrs.onload||"",autoScrollExp=attrs.autoscroll,renderer=getRenderer(attrs,scope),inherited=$element.inheritedData("$uiView");function cleanupLastView(){if(previousEl&&(previousEl.remove(),previousEl=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentEl){var $uiViewData=currentEl.data("$uiViewAnim");renderer.leave(currentEl,(function(){$uiViewData.$$animLeave.resolve(),previousEl=null})),previousEl=currentEl,currentEl=null}}function updateView(firstTime){var newScope,name=getUiViewName(scope,attrs,$element,$interpolate),previousLocals=name&&$state.$current&&$state.$current.locals[name];if(firstTime||previousLocals!==latestLocals){newScope=scope.$new(),latestLocals=$state.$current.locals[name],newScope.$emit("$viewContentLoading",name);var clone=$transclude(newScope,(function(clone){var animEnter=$q.defer(),animLeave=$q.defer(),viewAnimData={$animEnter:animEnter.promise,$animLeave:animLeave.promise,$$animLeave:animLeave};clone.data("$uiViewAnim",viewAnimData),renderer.enter(clone,$element,(function onUiViewEnter(){animEnter.resolve(),currentScope&&currentScope.$emit("$viewContentAnimationEnded"),(angular.isDefined(autoScrollExp)&&!autoScrollExp||scope.$eval(autoScrollExp))&&$uiViewScroll(clone)})),cleanupLastView()}));currentEl=clone,(currentScope=newScope).$emit("$viewContentLoaded",name),currentScope.$eval(onloadExp)}}scope.$on("$stateChangeSuccess",(function(){updateView(!1)})),updateView(!0)}}}}function $ViewDirectiveFill($compile,$controller,$state,$interpolate){return{restrict:"ECA",priority:-400,compile:function(tElement){var initial=tElement.html();return tElement.empty?tElement.empty():tElement[0].innerHTML=null,function(scope,$element,attrs){var current=$state.$current,name=getUiViewName(scope,attrs,$element,$interpolate),locals=current&&current.locals[name];if(!locals)return $element.html(initial),void $compile($element.contents())(scope);$element.data("$uiView",{name:name,state:locals.$$state}),$element.html(locals.$template?locals.$template:initial);var resolveData=angular.extend({},locals);scope[locals.$$resolveAs]=resolveData;var link=$compile($element.contents());if(locals.$$controller){locals.$scope=scope,locals.$element=$element;var controller=$controller(locals.$$controller,locals);locals.$$controllerAs&&(scope[locals.$$controllerAs]=controller,scope[locals.$$controllerAs][locals.$$resolveAs]=resolveData),isFunction(controller.$onInit)&&controller.$onInit(),$element.data("$ngControllerController",controller),$element.children().data("$ngControllerController",controller)}link(scope)}}}}function getUiViewName(scope,attrs,element,$interpolate){var name=$interpolate(attrs.uiView||attrs.name||"")(scope),uiViewCreatedBy=element.inheritedData("$uiView");return name.indexOf("@")>=0?name:name+"@"+(uiViewCreatedBy?uiViewCreatedBy.state.name:"")}function parseStateRef(ref,current){var preparsed=ref.match(/^\s*({[^}]*})\s*$/),parsed;if(preparsed&&(ref=current+"("+preparsed[1]+")"),!(parsed=ref.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/))||4!==parsed.length)throw new Error("Invalid state ref '"+ref+"'");return{state:parsed[1],paramExpr:parsed[3]||null}}function stateContext(el){var stateData=el.parent().inheritedData("$uiView");if(stateData&&stateData.state&&stateData.state.name)return stateData.state}function getTypeInfo(el){var isSvg="[object SVGAnimatedString]"===Object.prototype.toString.call(el.prop("href")),isForm="FORM"===el[0].nodeName;return{attr:isForm?"action":isSvg?"xlink:href":"href",isAnchor:"A"===el.prop("tagName").toUpperCase(),clickable:!isForm}}function clickHook(el,$state,$timeout,type,current){return function(e){var button=e.which||e.button,target=current();if(!(button>1||e.ctrlKey||e.metaKey||e.shiftKey||el.attr("target"))){var transition=$timeout((function(){$state.go(target.state,target.params,target.options)}));e.preventDefault();var ignorePreventDefaultCount=type.isAnchor&&!target.href?1:0;e.preventDefault=function(){ignorePreventDefaultCount--<=0&&$timeout.cancel(transition)}}}}function defaultOpts(el,$state){return{relative:stateContext(el)||$state.$current,inherit:!0}}function $StateRefDirective($state,$timeout){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(scope,element,attrs,uiSrefActive){var ref=parseStateRef(attrs.uiSref,$state.current.name),def={state:ref.state,href:null,params:null},type=getTypeInfo(element),active=uiSrefActive[1]||uiSrefActive[0],unlinkInfoFn=null,hookFn;def.options=extend(defaultOpts(element,$state),attrs.uiSrefOpts?scope.$eval(attrs.uiSrefOpts):{});var update=function(val){val&&(def.params=angular.copy(val)),def.href=$state.href(ref.state,def.params,def.options),unlinkInfoFn&&unlinkInfoFn(),active&&(unlinkInfoFn=active.$$addStateInfo(ref.state,def.params)),null!==def.href&&attrs.$set(type.attr,def.href)};ref.paramExpr&&(scope.$watch(ref.paramExpr,(function(val){val!==def.params&&update(val)}),!0),def.params=angular.copy(scope.$eval(ref.paramExpr))),update(),type.clickable&&(hookFn=clickHook(element,$state,$timeout,type,(function(){return def})),element[element.on?"on":"bind"]("click",hookFn),scope.$on("$destroy",(function(){element[element.off?"off":"unbind"]("click",hookFn)})))}}}function $StateRefDynamicDirective($state,$timeout){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(scope,element,attrs,uiSrefActive){var type=getTypeInfo(element),active=uiSrefActive[1]||uiSrefActive[0],group,watch="["+[attrs.uiState,attrs.uiStateParams||null,attrs.uiStateOpts||null].map((function(val){return val||"null"})).join(", ")+"]",def={state:null,params:null,options:null,href:null},unlinkInfoFn=null,hookFn;function runStateRefLink(group){def.state=group[0],def.params=group[1],def.options=group[2],def.href=$state.href(def.state,def.params,def.options),unlinkInfoFn&&unlinkInfoFn(),active&&(unlinkInfoFn=active.$$addStateInfo(def.state,def.params)),def.href&&attrs.$set(type.attr,def.href)}scope.$watch(watch,runStateRefLink,!0),runStateRefLink(scope.$eval(watch)),type.clickable&&(hookFn=clickHook(element,$state,$timeout,type,(function(){return def})),element[element.on?"on":"bind"]("click",hookFn),scope.$on("$destroy",(function(){element[element.off?"off":"unbind"]("click",hookFn)})))}}}function $StateRefActiveDirective($state,$stateParams,$interpolate){return{restrict:"A",controller:["$scope","$element","$attrs","$timeout",function($scope,$element,$attrs,$timeout){var states=[],activeClasses={},activeEqClass,uiSrefActive;activeEqClass=$interpolate($attrs.uiSrefActiveEq||"",!1)($scope);try{uiSrefActive=$scope.$eval($attrs.uiSrefActive)}catch(e){}function addState(stateName,stateParams,activeClass){var state=$state.get(stateName,stateContext($element)),stateHash=createStateHash(stateName,stateParams),stateInfo={state:state||{name:stateName},params:stateParams,hash:stateHash};return states.push(stateInfo),activeClasses[stateHash]=activeClass,function removeState(){var idx=states.indexOf(stateInfo);-1!==idx&&states.splice(idx,1)}}function createStateHash(state,params){if(!isString(state))throw new Error("state should be a string");return isObject(params)?state+toJson(params):(params=$scope.$eval(params),isObject(params)?state+toJson(params):state)}function update(){for(var i=0;i<states.length;i++)anyMatch(states[i].state,states[i].params)?addClass($element,activeClasses[states[i].hash]):removeClass($element,activeClasses[states[i].hash]),exactMatch(states[i].state,states[i].params)?addClass($element,activeEqClass):removeClass($element,activeEqClass)}function addClass(el,className){$timeout((function(){el.addClass(className)}))}function removeClass(el,className){el.removeClass(className)}function anyMatch(state,params){return $state.includes(state.name,params)}function exactMatch(state,params){return $state.is(state.name,params)}uiSrefActive=uiSrefActive||$interpolate($attrs.uiSrefActive||"",!1)($scope),isObject(uiSrefActive)&&forEach(uiSrefActive,(function(stateOrName,activeClass){if(isString(stateOrName)){var ref=parseStateRef(stateOrName,$state.current.name);addState(ref.state,$scope.$eval(ref.paramExpr),activeClass)}})),this.$$addStateInfo=function(newState,newParams){if(!(isObject(uiSrefActive)&&states.length>0)){var deregister=addState(newState,newParams,uiSrefActive);return update(),deregister}},$scope.$on("$stateChangeSuccess",update),update()}]}}function $IsStateFilter($state){var isFilter=function(state,params){return $state.is(state,params)};return isFilter.$stateful=!0,isFilter}function $IncludedByStateFilter($state){var includesFilter=function(state,params,options){return $state.includes(state,params,options)};return includesFilter.$stateful=!0,includesFilter}angular.module("ui.router.util",["ng"]),angular.module("ui.router.router",["ui.router.util"]),angular.module("ui.router.state",["ui.router.router","ui.router.util"]),angular.module("ui.router",["ui.router.state"]),angular.module("ui.router.compat",["ui.router"]),$Resolve.$inject=["$q","$injector"],angular.module("ui.router.util").service("$resolve",$Resolve),angular.module("ui.router.util").provider("$templateFactory",TemplateFactoryProvider),UrlMatcher.prototype.concat=function(pattern,config){var defaultConfig={caseInsensitive:$$UMFP.caseInsensitive(),strict:$$UMFP.strictMode(),squash:$$UMFP.defaultSquashPolicy()};return new UrlMatcher(this.sourcePath+pattern+this.sourceSearch,extend(defaultConfig,config),this)},UrlMatcher.prototype.toString=function(){return this.source},UrlMatcher.prototype.exec=function(path,searchParams){var m=this.regexp.exec(path);if(!m)return null;searchParams=searchParams||{};var paramNames=this.parameters(),nTotal=paramNames.length,nPath=this.segments.length-1,values={},i,j,cfg,paramName,param,paramVal;if(nPath!==m.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");function decodePathArray(string){function reverseString(str){return str.split("").reverse().join("")}function unquoteDashes(str){return str.replace(/\\-/g,"-")}var split,allReversed=map(reverseString(string).split(/-(?!\\)/),reverseString);return map(allReversed,unquoteDashes).reverse()}for(i=0;i<nPath;i++){for(paramName=paramNames[i],param=this.params[paramName],paramVal=m[i+1],j=0;j<param.replace.length;j++)param.replace[j].from===paramVal&&(paramVal=param.replace[j].to);paramVal&&!0===param.array&&(paramVal=decodePathArray(paramVal)),isDefined(paramVal)&&(paramVal=param.type.decode(paramVal)),values[paramName]=param.value(paramVal)}for(;i<nTotal;i++){for(values[paramName=paramNames[i]]=this.params[paramName].value(searchParams[paramName]),param=this.params[paramName],paramVal=searchParams[paramName],j=0;j<param.replace.length;j++)param.replace[j].from===paramVal&&(paramVal=param.replace[j].to);isDefined(paramVal)&&(paramVal=param.type.decode(paramVal)),values[paramName]=param.value(paramVal)}return values},UrlMatcher.prototype.parameters=function(param){return isDefined(param)?this.params[param]||null:this.$$paramNames},UrlMatcher.prototype.validates=function(params){return this.params.$$validates(params)},UrlMatcher.prototype.format=function(values){values=values||{};var segments=this.segments,params=this.parameters(),paramset=this.params;if(!this.validates(values))return null;var i,search=!1,nPath=segments.length-1,nTotal=params.length,result=segments[0];function encodeDashes(str){return encodeURIComponent(str).replace(/-/g,(function(c){return"%5C%"+c.charCodeAt(0).toString(16).toUpperCase()}))}for(i=0;i<nTotal;i++){var isPathParam=i<nPath,name=params[i],param=paramset[name],value=param.value(values[name]),isDefaultValue=param.isOptional&&param.type.equals(param.value(),value),squash=!!isDefaultValue&&param.squash,encoded=param.type.encode(value);if(isPathParam){var nextSegment=segments[i+1],isFinalPathParam=i+1===nPath;if(!1===squash)null!=encoded&&(isArray(encoded)?result+=map(encoded,encodeDashes).join("-"):result+=encodeURIComponent(encoded)),result+=nextSegment;else if(!0===squash){var capture=result.match(/\/$/)?/\/?(.*)/:/(.*)/;result+=nextSegment.match(capture)[1]}else isString(squash)&&(result+=squash+nextSegment);isFinalPathParam&&!0===param.squash&&"/"===result.slice(-1)&&(result=result.slice(0,-1))}else{if(null==encoded||isDefaultValue&&!1!==squash)continue;if(isArray(encoded)||(encoded=[encoded]),0===encoded.length)continue;result+=(search?"&":"?")+name+"="+(encoded=map(encoded,encodeURIComponent).join("&"+name+"=")),search=!0}}return result},Type.prototype.is=function(val,key){return!0},Type.prototype.encode=function(val,key){return val},Type.prototype.decode=function(val,key){return val},Type.prototype.equals=function(a,b){return a==b},Type.prototype.$subPattern=function(){var sub=this.pattern.toString();return sub.substr(1,sub.length-2)},Type.prototype.pattern=/.*/,Type.prototype.toString=function(){return"{Type:"+this.name+"}"},Type.prototype.$normalize=function(val){return this.is(val)?val:this.decode(val)},Type.prototype.$asArray=function(mode,isSearch){if(!mode)return this;if("auto"===mode&&!isSearch)throw new Error("'auto' array mode is for query parameters only");function ArrayType(type,mode){function bindTo(type,callbackName){return function(){return type[callbackName].apply(type,arguments)}}function arrayWrap(val){return isArray(val)?val:isDefined(val)?[val]:[]}function arrayUnwrap(val){switch(val.length){case 0:return;case 1:return"auto"===mode?val[0]:val;default:return val}}function falsey(val){return!val}function arrayHandler(callback,allTruthyMode){return function handleArray(val){if(isArray(val)&&0===val.length)return val;var result=map(val=arrayWrap(val),callback);return!0===allTruthyMode?0===filter(result,falsey).length:arrayUnwrap(result)}}function arrayEqualsHandler(callback){return function handleArray(val1,val2){var left=arrayWrap(val1),right=arrayWrap(val2);if(left.length!==right.length)return!1;for(var i=0;i<left.length;i++)if(!callback(left[i],right[i]))return!1;return!0}}this.encode=arrayHandler(bindTo(type,"encode")),this.decode=arrayHandler(bindTo(type,"decode")),this.is=arrayHandler(bindTo(type,"is"),!0),this.equals=arrayEqualsHandler(bindTo(type,"equals")),this.pattern=type.pattern,this.$normalize=arrayHandler(bindTo(type,"$normalize")),this.name=type.name,this.$arrayMode=mode}return new ArrayType(this,mode)},angular.module("ui.router.util").provider("$urlMatcherFactory",$UrlMatcherFactory),angular.module("ui.router.util").run(["$urlMatcherFactory",function($urlMatcherFactory){}]),$UrlRouterProvider.$inject=["$locationProvider","$urlMatcherFactoryProvider"],angular.module("ui.router.router").provider("$urlRouter",$UrlRouterProvider),$StateProvider.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],angular.module("ui.router.state").factory("$stateParams",(function(){return{}})).constant("$state.runtime",{autoinject:!0}).provider("$state",$StateProvider).run(["$injector",function($injector){$injector.get("$state.runtime").autoinject&&$injector.get("$state")}]),$ViewProvider.$inject=[],angular.module("ui.router.state").provider("$view",$ViewProvider),angular.module("ui.router.state").provider("$uiViewScroll",$ViewScrollProvider),$ViewDirective.$inject=["$state","$injector","$uiViewScroll","$interpolate","$q"],$ViewDirectiveFill.$inject=["$compile","$controller","$state","$interpolate"],angular.module("ui.router.state").directive("uiView",$ViewDirective),angular.module("ui.router.state").directive("uiView",$ViewDirectiveFill),$StateRefDirective.$inject=["$state","$timeout"],$StateRefDynamicDirective.$inject=["$state","$timeout"],$StateRefActiveDirective.$inject=["$state","$stateParams","$interpolate"],angular.module("ui.router.state").directive("uiSref",$StateRefDirective).directive("uiSrefActive",$StateRefActiveDirective).directive("uiSrefActiveEq",$StateRefActiveDirective).directive("uiState",$StateRefDynamicDirective),$IsStateFilter.$inject=["$state"],$IncludedByStateFilter.$inject=["$state"],angular.module("ui.router.state").filter("isState",$IsStateFilter).filter("includedByState",$IncludedByStateFilter)}(window,window.angular),
/*!
angular-xeditable - 0.8.0
Edit-in-place for angular.js
Build date: 2017-06-06 
*/
angular.module("xeditable",[]).value("editableOptions",{theme:"default",icon_set:"default",buttons:"right",blurElem:"cancel",blurForm:"ignore",activate:"focus",isDisabled:!1,activationEvent:"click",submitButtonTitle:"Submit",submitButtonAriaLabel:"Submit",cancelButtonTitle:"Cancel",cancelButtonAriaLabel:"Cancel",clearButtonTitle:"Clear",clearButtonAriaLabel:"Clear",displayClearButton:!1}),angular.module("xeditable").directive("editableBsdate",["editableDirectiveFactory","$injector","$parse",function(editableDirectiveFactory,$injector,$parse){uibDatepickerConfig=$injector.get("uibDatepickerConfig"),uibDatepickerPopupConfig=$injector.get("uibDatepickerPopupConfig");var popupAttrNames=[["eIsOpen","is-open"],["eDateDisabled","date-disabled"],["eDatepickerPopup","uib-datepicker-popup"],["eShowButtonBar","show-button-bar"],["eCurrentText","current-text"],["eClearText","clear-text"],["eCloseText","close-text"],["eCloseOnDateSelection","close-on-date-selection"],["eDatepickerAppendToBody","datepicker-append-to-body"],["eOnOpenFocus","on-open-focus"],["eName","name"],["eDateDisabled","date-disabled"],["eAltInputFormats","alt-input-formats"]],dateOptionsNames=[["eFormatDay","formatDay"],["eFormatMonth","formatMonth"],["eFormatYear","formatYear"],["eFormatDayHeader","formatDayHeader"],["eFormatDayTitle","formatDayTitle"],["eFormatMonthTitle","formatMonthTitle"],["eMaxMode","maxMode"],["eMinMode","minMode"],["eDatepickerMode","datepickerMode"]];return editableDirectiveFactory({directiveName:"editableBsdate",inputTpl:"<div></div>",render:function(){this.parent.render.call(this);var attrs=this.attrs,scope=this.scope,inputDatePicker=angular.element('<input type="text" class="form-control" ng-model="$parent.$data"/>');inputDatePicker.attr("uib-datepicker-popup",attrs.eDatepickerPopupXEditable||uibDatepickerPopupConfig.datepickerPopup),inputDatePicker.attr("year-range",attrs.eYearRange||20),inputDatePicker.attr("ng-readonly",attrs.eReadonly||!1);for(var i=popupAttrNames.length-1;i>=0;i--){var popupAttr=attrs[popupAttrNames[i][0]];void 0!==popupAttr&&inputDatePicker.attr(popupAttrNames[i][1],popupAttr)}attrs.eNgChange&&(inputDatePicker.attr("ng-change",attrs.eNgChange),this.inputEl.removeAttr("ng-change")),attrs.eStyle&&(inputDatePicker.attr("style",attrs.eStyle),this.inputEl.removeAttr("style"));var dateOptions={maxDate:scope.$eval(attrs.eMaxDate)||uibDatepickerConfig.maxDate,minDate:scope.$eval(attrs.eMinDate)||uibDatepickerConfig.minDate,showWeeks:attrs.eShowWeeks?"true"===attrs.eShowWeeks.toLowerCase():uibDatepickerConfig.showWeeks,startingDay:attrs.eStartingDay||0,initDate:scope.$eval(attrs.eInitDate)||new Date},showCalendarButton;if(attrs.eDatepickerOptions){var eDatepickerOptions=$parse(attrs.eDatepickerOptions)(scope);angular.extend(dateOptions,eDatepickerOptions)}for(var z=dateOptionsNames.length-1;z>=0;z--){var doAttr=attrs[dateOptionsNames[z][0]];void 0!==doAttr&&(dateOptions[dateOptionsNames[z][1]]=doAttr)}if(scope.dateOptions=dateOptions,"true"===(angular.isDefined(attrs.eShowCalendarButton)?attrs.eShowCalendarButton:"true")){var buttonDatePicker=angular.element('<button type="button" class="btn btn-default"><i class="glyphicon glyphicon-calendar"></i></button>'),buttonWrapper=angular.element('<span class="input-group-btn"></span>');buttonDatePicker.attr("ng-click",attrs.eNgClick),buttonWrapper.append(buttonDatePicker),this.inputEl.append(buttonWrapper)}else inputDatePicker.attr("ng-click",attrs.eNgClick);inputDatePicker.attr("datepicker-options","dateOptions"),this.inputEl.prepend(inputDatePicker),this.inputEl.removeAttr("class"),this.inputEl.removeAttr("ng-click"),this.inputEl.removeAttr("is-open"),this.inputEl.removeAttr("init-date"),this.inputEl.removeAttr("datepicker-popup"),this.inputEl.removeAttr("required"),this.inputEl.removeAttr("ng-model"),this.inputEl.removeAttr("date-picker-append-to-body"),this.inputEl.removeAttr("name"),this.inputEl.attr("class","input-group")},autosubmit:function(){var self=this;self.inputEl.bind("change",(function(){setTimeout((function(){self.scope.$apply((function(){self.scope.$form.$submit()}))}),500)})),self.inputEl.bind("keydown",(function(e){9===e.keyCode&&"submit"===self.editorEl.attr("blur")&&self.scope.$apply((function(){self.scope.$form.$submit()}))}))}})}]),angular.module("xeditable").directive("editableBstime",["editableDirectiveFactory",function(editableDirectiveFactory){return editableDirectiveFactory({directiveName:"editableBstime",inputTpl:"<div uib-timepicker></div>",render:function(){this.parent.render.call(this);var div=angular.element('<div class="well well-small" style="display:inline-block;"></div>');div.attr("ng-model",this.inputEl.attr("ng-model")),this.inputEl.removeAttr("ng-model"),this.attrs.eNgChange&&(div.attr("ng-change",this.inputEl.attr("ng-change")),this.inputEl.removeAttr("ng-change")),this.inputEl.wrap(div)}})}]),angular.module("xeditable").directive("editableCheckbox",["editableDirectiveFactory",function(editableDirectiveFactory){return editableDirectiveFactory({directiveName:"editableCheckbox",inputTpl:'<input type="checkbox">',render:function(){this.parent.render.call(this),this.inputEl.wrap("<label></label>"),this.attrs.eTitle&&this.inputEl.parent().append("<span>"+this.attrs.eTitle+"</span>")},autosubmit:function(){var self=this;self.inputEl.bind("change",(function(){setTimeout((function(){self.scope.$apply((function(){self.scope.$form.$submit()}))}),500)}))}})}]),angular.module("xeditable").directive("editableChecklist",["editableDirectiveFactory","editableNgOptionsParser",function(editableDirectiveFactory,editableNgOptionsParser){return editableDirectiveFactory({directiveName:"editableChecklist",inputTpl:"<span></span>",useCopy:!0,render:function(){this.parent.render.call(this);var parsed=editableNgOptionsParser(this.attrs.eNgOptions),ngChangeHtml="",ngChecklistComparatorHtml="";this.attrs.eNgChange&&(ngChangeHtml=' ng-change="'+this.attrs.eNgChange+'"'),this.attrs.eChecklistComparator&&(ngChecklistComparatorHtml=' checklist-comparator="'+this.attrs.eChecklistComparator+'"');var html='<label ng-repeat="'+parsed.ngRepeat+'"><input type="checkbox" checklist-model="$parent.$parent.$data" checklist-value="'+parsed.locals.valueFn+'"'+ngChangeHtml+ngChecklistComparatorHtml+'><span ng-bind="'+parsed.locals.displayFn+'"></span></label>';this.inputEl.removeAttr("ng-model"),this.inputEl.removeAttr("ng-options"),this.inputEl.removeAttr("ng-change"),this.inputEl.removeAttr("checklist-comparator"),this.inputEl.html(html)}})}]),angular.module("xeditable").directive("editableCombodate",["editableDirectiveFactory","editableCombodate",function(editableDirectiveFactory,editableCombodate){return editableDirectiveFactory({directiveName:"editableCombodate",inputTpl:'<input type="text">',render:function(){this.parent.render.call(this);var options={value:new Date(this.scope.$data)},self=this;angular.forEach(["format","template","minYear","maxYear","yearDescending","minuteStep","secondStep","firstItem","errorClass","customClass","roundTime","smartDays"],(function(name){var attrName="e"+name.charAt(0).toUpperCase()+name.slice(1);attrName in self.attrs&&(options[name]="minYear"==name||"maxYear"==name||"minuteStep"==name||"secondStep"==name?parseInt(self.attrs[attrName],10):self.attrs[attrName])}));var combodate=editableCombodate.getInstance(this.inputEl,options);combodate.$widget.find("select").bind("change",(function(e){self.scope.$data=combodate.getValue()?new Date(combodate.getValue().replace(/-/g,"/")).toISOString():null}))}})}]),function(){var camelCase=function(dashDelimitedString){return dashDelimitedString.toLowerCase().replace(/-(.)/g,(function(match,word){return word.toUpperCase()}))},types="text|password|email|tel|number|url|search|color|date|datetime|datetime-local|time|month|week|file".split("|");angular.forEach(types,(function(type){var directiveName=camelCase("editable-"+type);angular.module("xeditable").directive(directiveName,["editableDirectiveFactory",function(editableDirectiveFactory){return editableDirectiveFactory({directiveName:directiveName,inputTpl:'<input type="'+type+'">',render:function(){if(this.parent.render.call(this),this.attrs.eInputgroupleft||this.attrs.eInputgroupright){if(this.inputEl.wrap('<div class="input-group"></div>'),this.attrs.eInputgroupleft){var inputGroupLeft=angular.element('<span class="input-group-addon">'+this.attrs.eInputgroupleft+"</span>");this.inputEl.parent().prepend(inputGroupLeft)}if(this.attrs.eInputgroupright){var inputGroupRight=angular.element('<span class="input-group-addon">'+this.attrs.eInputgroupright+"</span>");this.inputEl.parent().append(inputGroupRight)}}if(this.attrs.eLabel){var label=angular.element("<label>"+this.attrs.eLabel+"</label>");this.attrs.eInputgroupleft||this.attrs.eInputgroupright?this.inputEl.parent().parent().prepend(label):this.inputEl.parent().prepend(label)}this.attrs.eFormclass&&this.editorEl.addClass(this.attrs.eFormclass)},autosubmit:function(){var self=this;self.inputEl.bind("keydown",(function(e){9===e.keyCode&&"submit"===self.editorEl.attr("blur")&&self.scope.$apply((function(){self.scope.$form.$submit()}))}))}})}])})),angular.module("xeditable").directive("editableRange",["editableDirectiveFactory","$interpolate",function(editableDirectiveFactory,$interpolate){return editableDirectiveFactory({directiveName:"editableRange",inputTpl:'<input type="range" id="range" name="range">',render:function(){this.parent.render.call(this),this.inputEl.after("<output>"+$interpolate.startSymbol()+"$data"+$interpolate.endSymbol()+"</output>")}})}])}(),angular.module("xeditable").directive("editableTagsInput",["editableDirectiveFactory","editableUtils",function(editableDirectiveFactory,editableUtils){var dir=editableDirectiveFactory({directiveName:"editableTagsInput",inputTpl:"<tags-input></tags-input>",useCopy:!0,render:function(){this.parent.render.call(this),this.inputEl.append(editableUtils.rename("auto-complete",this.attrs.$autoCompleteElement)),this.inputEl.removeAttr("ng-model"),this.inputEl.attr("ng-model","$parent.$data")}}),linkOrg=dir.link;return dir.link=function(scope,el,attrs,ctrl){var autoCompleteEl=el.find("editable-tags-input-auto-complete");return attrs.$autoCompleteElement=autoCompleteEl.clone(),autoCompleteEl.remove(),linkOrg(scope,el,attrs,ctrl)},dir}]),angular.module("xeditable").directive("editableRadiolist",["editableDirectiveFactory","editableNgOptionsParser","$interpolate",function(editableDirectiveFactory,editableNgOptionsParser,$interpolate){return editableDirectiveFactory({directiveName:"editableRadiolist",inputTpl:"<span></span>",render:function(){this.parent.render.call(this);var parsed=editableNgOptionsParser(this.attrs.eNgOptions),ngChangeHtml="",ngNameHtml="";this.attrs.eNgChange&&(ngChangeHtml=' ng-change="'+this.attrs.eNgChange+'"'),this.attrs.eName&&(ngNameHtml=' name="'+this.attrs.eName+'"');var html='<label data-ng-repeat="'+parsed.ngRepeat+'"><input type="radio" data-ng-disabled="::'+this.attrs.eNgDisabled+'" data-ng-model="$parent.$parent.$data" data-ng-value="'+$interpolate.startSymbol()+"::"+parsed.locals.valueFn+$interpolate.endSymbol()+'"'+ngChangeHtml+ngNameHtml+'><span data-ng-bind="::'+parsed.locals.displayFn+'"></span></label>';this.inputEl.removeAttr("ng-model"),this.inputEl.removeAttr("ng-options"),this.inputEl.removeAttr("ng-change"),this.inputEl.html(html)},autosubmit:function(){var self=this;self.inputEl.bind("change",(function(){setTimeout((function(){self.scope.$apply((function(){self.scope.$form.$submit()}))}),500)}))}})}]),angular.module("xeditable").directive("editableSelect",["editableDirectiveFactory",function(editableDirectiveFactory){return editableDirectiveFactory({directiveName:"editableSelect",inputTpl:"<select></select>",render:function(){if(this.parent.render.call(this),this.attrs.ePlaceholder){var placeholder=angular.element('<option value="">'+this.attrs.ePlaceholder+"</option>");this.inputEl.append(placeholder)}},autosubmit:function(){var self=this;self.attrs.hasOwnProperty("eMultiple")||self.inputEl.bind("change",(function(){self.scope.$apply((function(){self.scope.$form.$submit()}))}))}})}]),angular.module("xeditable").directive("editableTextarea",["editableDirectiveFactory",function(editableDirectiveFactory){return editableDirectiveFactory({directiveName:"editableTextarea",inputTpl:"<textarea></textarea>",addListeners:function(){var self=this;this.parent.addListeners.call(this),this.single&&"no"!==this.buttons&&this.autosubmit()},autosubmit:function(){var self=this;self.inputEl.bind("keydown",(function(e){self.attrs.submitOnEnter?13!==e.keyCode||e.shiftKey||self.scope.$apply((function(){self.scope.$form.$submit()})):((e.ctrlKey||e.metaKey)&&13===e.keyCode||9===e.keyCode&&"submit"===self.editorEl.attr("blur"))&&self.scope.$apply((function(){self.scope.$form.$submit()}))}))}})}]),angular.module("xeditable").directive("editableUidate",["editableDirectiveFactory",function(editableDirectiveFactory){return editableDirectiveFactory({directiveName:"editableUidate",inputTpl:'<input class="form-control" />',render:function(){this.parent.render.call(this),this.inputEl.attr("ui-date",this.attrs.eUiDate),this.inputEl.attr("placeholder",this.attrs.ePlaceholder)}})}]),angular.module("xeditable").directive("editableUiSelect",["editableDirectiveFactory","editableUtils",function(editableDirectiveFactory,editableUtils){var dir=editableDirectiveFactory({directiveName:"editableUiSelect",inputTpl:"<ui-select></ui-select>",render:function(){this.parent.render.call(this),this.inputEl.append(editableUtils.rename("ui-select-match",this.attrs.$matchElement)),this.inputEl.append(editableUtils.rename("ui-select-choices",this.attrs.$choicesElement)),this.inputEl.removeAttr("ng-model"),this.inputEl.attr("ng-model","$parent.$parent.$data")},autosubmit:function(){var self=this;self.inputEl.bind("change",(function(){setTimeout((function(){self.scope.$apply((function(){self.scope.$form.$submit()}))}),500)})),self.inputEl.bind("keydown",(function(e){9===e.keyCode&&"submit"===self.editorEl.attr("blur")&&self.scope.$apply((function(){self.scope.$form.$submit()}))}))}}),linkOrg=dir.link;return dir.link=function(scope,el,attrs,ctrl){var matchEl=el.find("editable-ui-select-match"),choicesEl=el.find("editable-ui-select-choices");return attrs.$matchElement=matchEl.clone(),attrs.$choicesElement=choicesEl.clone(),matchEl.remove(),choicesEl.remove(),linkOrg(scope,el,attrs,ctrl)},dir}]),angular.module("xeditable").factory("editableController",["$q","editableUtils",function($q,editableUtils){function EditableController($scope,$attrs,$element,$parse,editableThemes,editableIcons,editableOptions,$rootScope,$compile,$q,$sce,$templateCache){var valueGetter,inWaiting,self=this;self.scope=$scope,self.elem=$element,self.attrs=$attrs,self.inputEl=null,self.editorEl=null,self.single=!0,self.error="",self.theme=editableThemes[$attrs.editableTheme]||editableThemes[editableOptions.theme]||editableThemes.default,self.parent={};var theme_name=$attrs.editableTheme||editableOptions.theme||"default",icon_set_option=$attrs.editableIconSet||editableOptions.icon_set;self.icon_set="default"===icon_set_option?editableIcons.default[theme_name]:editableIcons.external[icon_set_option],self.inputTpl="",self.directiveName="",self.useCopy=!1,self.single=null,self.buttons="right",self.popover=!1,self.init=function(single){if(self.single=single,self.name=$attrs.eName||$attrs[self.directiveName],!$attrs[self.directiveName])throw"You should provide value for `"+self.directiveName+"` in editable element!";valueGetter=$parse($attrs[self.directiveName]),self.single?self.buttons=self.attrs.buttons||editableOptions.buttons:self.buttons="no",$attrs.eName&&self.scope.$watch("$data",(function(newVal){self.scope.$form.$data[$attrs.eName]=newVal})),$attrs.onshow&&(self.onshow=function(){return self.catchError($parse($attrs.onshow)($scope))}),$attrs.onhide&&(self.onhide=function(){return $parse($attrs.onhide)($scope)}),$attrs.oncancel&&(self.oncancel=function(){return $parse($attrs.oncancel)($scope)}),$attrs.onbeforesave&&(self.onbeforesave=function(){return self.catchError($parse($attrs.onbeforesave)($scope))}),$attrs.onaftersave&&(self.onaftersave=function(){return self.catchError($parse($attrs.onaftersave)($scope))}),$attrs.popover&&(self.popover=self.attrs.popover),$scope.$parent.$watch($attrs[self.directiveName],(function(newVal,oldVal){self.setLocalValue(),self.handleEmpty()}))},self.render=function(){var theme=self.theme;for(var k in self.inputEl=angular.element(self.inputTpl),self.controlsEl=angular.element(theme.controlsTpl),self.controlsEl.append(self.inputEl),"no"!==self.buttons&&(self.buttonsEl=angular.element(theme.buttonsTpl),self.submitEl=angular.element(theme.submitTpl),self.resetEl=angular.element(theme.resetTpl),self.cancelEl=angular.element(theme.cancelTpl),self.submitEl.attr("title",editableOptions.submitButtonTitle),self.submitEl.attr("aria-label",editableOptions.submitButtonAriaLabel),self.cancelEl.attr("title",editableOptions.cancelButtonTitle),self.cancelEl.attr("aria-label",editableOptions.cancelButtonAriaLabel),self.resetEl.attr("title",editableOptions.clearButtonTitle),self.resetEl.attr("aria-label",editableOptions.clearButtonAriaLabel),self.icon_set&&(self.submitEl.find("span").addClass(self.icon_set.ok),self.cancelEl.find("span").addClass(self.icon_set.cancel),self.resetEl.find("span").addClass(self.icon_set.clear)),self.buttonsEl.append(self.submitEl).append(self.cancelEl),editableOptions.displayClearButton&&self.buttonsEl.append(self.resetEl),self.controlsEl.append(self.buttonsEl),self.inputEl.addClass("editable-has-buttons")),self.errorEl=angular.element(theme.errorTpl),self.controlsEl.append(self.errorEl),self.editorEl=angular.element(self.single?theme.formTpl:theme.noformTpl),self.editorEl.append(self.controlsEl),$attrs.$attr)if(!(k.length<=1)){var transferAttr=!1,nextLetter=k.substring(1,2);if("e"===k.substring(0,1)&&nextLetter===nextLetter.toUpperCase()&&"Form"!==(transferAttr=k.substring(1))&&"NgSubmit"!==transferAttr){var firstLetter=transferAttr.substring(0,1),secondLetter=transferAttr.substring(1,2),attrValue="value"!==(transferAttr=secondLetter===secondLetter.toUpperCase()&&firstLetter===firstLetter.toUpperCase()?firstLetter.toLowerCase()+"-"+editableUtils.camelToDash(transferAttr.substring(1)):firstLetter.toLowerCase()+editableUtils.camelToDash(transferAttr.substring(1)))&&""===$attrs[k]?transferAttr:$attrs[k];self.inputEl.attr(transferAttr,attrValue)}}if(self.inputEl.addClass("editable-input"),self.inputEl.attr("ng-model","$parent.$data"),self.editorEl.addClass(editableUtils.camelToDash(self.directiveName)),self.single&&(self.editorEl.attr("editable-form","$form"),self.editorEl.attr("blur",self.attrs.blur||editableOptions.blurElem)),self.popover){var wrapper=angular.element("<div></div>");wrapper.append(self.editorEl),self.editorEl=wrapper,$templateCache.put("popover.html",self.editorEl[0].outerHTML)}angular.isFunction(theme.postrender)&&theme.postrender.call(self)},self.setLocalValue=function(){self.scope.$data=self.useCopy?angular.copy(valueGetter($scope.$parent)):valueGetter($scope.$parent)};var newScope=null;self.show=function(){return self.setLocalValue(),self.render(),$element.after(self.editorEl),newScope=$scope.$new(),$compile(self.editorEl)(newScope),self.addListeners(),$element.addClass("editable-hide"),self.onshow()},self.hide=function(){return newScope.$destroy(),self.controlsEl.remove(),self.editorEl.remove(),$element.removeClass("editable-hide"),self.popover&&$templateCache.remove("popover.html"),self.onhide()},self.cancel=function(){self.oncancel()},self.addListeners=function(){self.inputEl.bind("keyup",(function(e){if(self.single)switch(e.keyCode){case 27:self.scope.$apply((function(){self.scope.$form.$cancel()}))}})),self.single&&"no"===self.buttons&&self.autosubmit(),self.editorEl.bind("click",(function(e){e.which&&1!==e.which||self.scope.$form.$visible&&(self.scope.$form._clicked=!0)}))},self.setWaiting=function(value){value?(inWaiting=!self.inputEl.attr("disabled")&&!self.inputEl.attr("ng-disabled")&&!self.inputEl.attr("ng-enabled"))&&(self.inputEl.attr("disabled","disabled"),self.buttonsEl&&self.buttonsEl.find("button").attr("disabled","disabled")):inWaiting&&(self.inputEl.removeAttr("disabled"),self.buttonsEl&&self.buttonsEl.find("button").removeAttr("disabled"))},self.activate=function(start,end){setTimeout((function(){var el=self.inputEl[0];"focus"===editableOptions.activate&&el.focus?(void 0!==start&&""!==start&&el.setSelectionRange&&(end=end||start,el.onfocus=function(){setTimeout(function(){try{this.setSelectionRange(start,end)}catch(e){}}.bind(this))}),"editableRadiolist"==self.directiveName||"editableChecklist"==self.directiveName||"editableBsdate"==self.directiveName||"editableTagsInput"==self.directiveName?el.querySelector(".ng-pristine").focus():el.focus()):"select"===editableOptions.activate&&(el.select?el.select():el.focus&&el.focus())}),0)},self.setError=function(msg){angular.isObject(msg)||($scope.$error=$sce.trustAsHtml(msg),self.error=msg)},self.catchError=function(result,noPromise){return angular.isObject(result)&&!0!==noPromise?$q.when(result).then(angular.bind(this,(function(r){this.catchError(r,!0)})),angular.bind(this,(function(r){this.catchError(r,!0)}))):noPromise&&angular.isObject(result)&&result.status&&200!==result.status&&result.data&&angular.isString(result.data)?(this.setError(result.data),result=result.data):angular.isString(result)&&this.setError(result),result},self.save=function(){valueGetter.assign($scope.$parent,self.useCopy?angular.copy(self.scope.$data):self.scope.$data)},self.handleEmpty=function(){var val=valueGetter($scope.$parent),isEmpty=null==val||""===val||angular.isArray(val)&&0===val.length;$element.toggleClass("editable-empty",isEmpty)},self.autosubmit=angular.noop,self.onshow=angular.noop,self.onhide=angular.noop,self.oncancel=angular.noop,self.onbeforesave=angular.noop,self.onaftersave=angular.noop}return(EditableController.$inject=["$scope","$attrs","$element","$parse","editableThemes","editableIcons","editableOptions","$rootScope","$compile","$q","$sce","$templateCache"],EditableController)}]),angular.module("xeditable").factory("editableDirectiveFactory",["$parse","$compile","editableThemes","$rootScope","$document","editableController","editableFormController","editableOptions",function($parse,$compile,editableThemes,$rootScope,$document,editableController,editableFormController,editableOptions){return function(overwrites){return{restrict:"A",scope:!0,require:[overwrites.directiveName,"?^form"],controller:editableController,link:function(scope,elem,attrs,ctrl){var eCtrl=ctrl[0],eFormCtrl,hasForm=!1;if(ctrl[1])eFormCtrl=ctrl[1],hasForm=void 0===attrs.eSingle;else if(attrs.eForm){var getter=$parse(attrs.eForm)(scope);if(getter)eFormCtrl=getter,hasForm=!0;else if(elem&&"function"==typeof elem.parents&&elem.parents().last().find("form[name="+attrs.eForm+"]").length)eFormCtrl=null,hasForm=!0;else for(var i=0;i<$document[0].forms.length;i++)if($document[0].forms[i].name===attrs.eForm){eFormCtrl=null,hasForm=!0;break}}angular.forEach(overwrites,(function(v,k){void 0!==eCtrl[k]&&(eCtrl.parent[k]=eCtrl[k])})),angular.extend(eCtrl,overwrites);var is_disabled=function(){return angular.isDefined(attrs.editDisabled)?scope.$eval(attrs.editDisabled):editableOptions.isDisabled};if(eCtrl.init(!hasForm),scope.$editable=eCtrl,elem.addClass("editable"),hasForm)if(eFormCtrl){if(scope.$form=eFormCtrl,!scope.$form.$addEditable)throw"Form with editable elements should have `editable-form` attribute.";scope.$form.$addEditable(eCtrl)}else $rootScope.$$editableBuffer=$rootScope.$$editableBuffer||{},$rootScope.$$editableBuffer[attrs.eForm]=$rootScope.$$editableBuffer[attrs.eForm]||[],$rootScope.$$editableBuffer[attrs.eForm].push(eCtrl),scope.$form=null;else scope.$form=editableFormController(),scope.$form.$addEditable(eCtrl),attrs.eForm&&($parse(attrs.eForm).assign||angular.noop)(scope.$parent,scope.$form),attrs.eForm&&!attrs.eClickable||(elem.addClass("editable-click"),elem.bind(editableOptions.activationEvent,(function(e){e.preventDefault(),e.editable=eCtrl,is_disabled()||scope.$apply((function(){scope.$form.$show()}))})))}}}}]),angular.module("xeditable").factory("editableFormController",["$parse","$document","$rootScope","editablePromiseCollection","editableUtils",function($parse,$document,$rootScope,editablePromiseCollection,editableUtils){var shown=[],isSelfOrDescendant=function(parent,child){if(child==parent)return!0;for(var node=child.parentNode;null!==node;){if(node==parent)return!0;node=node.parentNode}return!1},isBlur=function(shown,event){var isBlur=!0,editables=shown.$editables;return angular.forEach(editables,(function(v){var element=v.editorEl[0];isSelfOrDescendant(element,event.target)&&(isBlur=!1)})),isBlur};$document.bind("click",(function(e){if(!e.which||1===e.which){for(var toCancel=[],toSubmit=[],i=0;i<shown.length;i++)shown[i]._clicked?shown[i]._clicked=!1:shown[i].$waiting||("cancel"===shown[i]._blur&&isBlur(shown[i],e)&&toCancel.push(shown[i]),"submit"===shown[i]._blur&&isBlur(shown[i],e)&&toSubmit.push(shown[i]));(toCancel.length||toSubmit.length)&&$rootScope.$apply((function(){angular.forEach(toCancel,(function(v){v.$cancel()})),angular.forEach(toSubmit,(function(v){v.$submit()}))}))}})),$rootScope.$on("closeEdit",(function(){for(var i=0;i<shown.length;i++)shown[i].$hide()}));var base={$addEditable:function(editable){this.$editables.push(editable),editable.elem.bind("$destroy",angular.bind(this,this.$removeEditable,editable)),editable.scope.$form||(editable.scope.$form=this),this.$visible&&editable.catchError(editable.show()),editable.catchError(editable.setWaiting(this.$waiting))},$removeEditable:function(editable){for(var i=0;i<this.$editables.length;i++)if(this.$editables[i]===editable)return void this.$editables.splice(i,1)},$show:function(){if(!this.$visible){this.$visible=!0;var pc=editablePromiseCollection();pc.when(this.$onshow()),this.$setError(null,""),angular.forEach(this.$editables,(function(editable){pc.when(editable.show())})),pc.then({onWait:angular.bind(this,this.$setWaiting),onTrue:angular.bind(this,this.$activate),onFalse:angular.bind(this,this.$activate),onString:angular.bind(this,this.$activate)}),setTimeout(angular.bind(this,(function(){this._clicked=!1,-1===editableUtils.indexOf(shown,this)&&shown.push(this)})),0)}},$activate:function(name){var i,selectionStart,selectionEnd;if(this.$editables.length){if(angular.isString(name))for(i=0;i<this.$editables.length;i++)if(this.$editables[i].name===name)return void this.$editables[i].activate();for(i=0;i<this.$editables.length;i++)if(this.$editables[i].error)return void this.$editables[i].activate();selectionStart=this.$editables[0].elem[0].selectionStart?this.$editables[0].elem[0].selectionStart:this.$editables[0].elem[0].text?this.$editables[0].elem[0].text.length:this.$editables[0].elem[0].innerHTML?this.$editables[0].elem[0].innerHTML.length:0,selectionEnd=this.$editables[0].elem[0].selectionEnd?this.$editables[0].elem[0].selectionEnd:this.$editables[0].elem[0].text?this.$editables[0].elem[0].text.length:this.$editables[0].elem[0].innerHTML?this.$editables[0].elem[0].innerHTML.length:0,this.$editables[0].activate(selectionStart,selectionEnd)}},$hide:function(){this.$visible&&(this.$visible=!1,this.$onhide(),angular.forEach(this.$editables,(function(editable){editable.hide()})),editableUtils.arrayRemove(shown,this))},$cancel:function(){this.$visible&&(this.$oncancel(),angular.forEach(this.$editables,(function(editable){editable.cancel()})),this.$hide())},$setWaiting:function(value){this.$waiting=!!value,angular.forEach(this.$editables,(function(editable){editable.setWaiting(!!value)}))},$setError:function(name,msg){angular.forEach(this.$editables,(function(editable){name&&editable.name!==name||editable.setError(msg)}))},$submit:function(){if(!this.$waiting){this.$setError(null,"");var pc=editablePromiseCollection();angular.forEach(this.$editables,(function(editable){pc.when(editable.onbeforesave())})),pc.then({onWait:angular.bind(this,this.$setWaiting),onTrue:angular.bind(this,checkSelf,!0),onFalse:angular.bind(this,checkSelf,!1),onString:angular.bind(this,this.$activate)})}function checkSelf(childrenTrue){var pc=editablePromiseCollection();pc.when(this.$onbeforesave()),pc.then({onWait:angular.bind(this,this.$setWaiting),onTrue:childrenTrue?angular.bind(this,this.$save):angular.bind(this,this.$hide),onFalse:angular.bind(this,this.$hide),onString:angular.bind(this,this.$activate)})}},$save:function(){angular.forEach(this.$editables,(function(editable){editable.save()}));var pc=editablePromiseCollection();pc.when(this.$onaftersave()),angular.forEach(this.$editables,(function(editable){pc.when(editable.onaftersave())})),pc.then({onWait:angular.bind(this,this.$setWaiting),onTrue:angular.bind(this,this.$hide),onFalse:angular.bind(this,this.$hide),onString:angular.bind(this,this.$activate)})},$onshow:angular.noop,$oncancel:angular.noop,$onhide:angular.noop,$onbeforesave:angular.noop,$onaftersave:angular.noop};return function(){return angular.extend({$editables:[],$visible:!1,$waiting:!1,$data:{},_clicked:!1,_blur:null},base)}}]),angular.module("xeditable").directive("editableForm",["$rootScope","$parse","editableFormController","editableOptions",function($rootScope,$parse,editableFormController,editableOptions){return{restrict:"A",require:["form"],compile:function(){return{pre:function(scope,elem,attrs,ctrl){var form=ctrl[0],eForm;attrs.editableForm?scope[attrs.editableForm]&&scope[attrs.editableForm].$show?(eForm=scope[attrs.editableForm],angular.extend(form,eForm)):(eForm=editableFormController(),scope[attrs.editableForm]=eForm,angular.extend(eForm,form)):(eForm=editableFormController(),angular.extend(form,eForm));var buf=$rootScope.$$editableBuffer,name=form.$name;name&&buf&&buf[name]&&(angular.forEach(buf[name],(function(editable){eForm.$addEditable(editable)})),delete buf[name])},post:function(scope,elem,attrs,ctrl){var eForm;eForm=attrs.editableForm&&scope[attrs.editableForm]&&scope[attrs.editableForm].$show?scope[attrs.editableForm]:ctrl[0],attrs.onshow&&(eForm.$onshow=angular.bind(eForm,$parse(attrs.onshow),scope)),attrs.onhide&&(eForm.$onhide=angular.bind(eForm,$parse(attrs.onhide),scope)),attrs.oncancel&&(eForm.$oncancel=angular.bind(eForm,$parse(attrs.oncancel),scope)),attrs.shown&&$parse(attrs.shown)(scope)&&eForm.$show(),eForm._blur=attrs.blur||editableOptions.blurForm,attrs.ngSubmit||attrs.submit||(attrs.onbeforesave&&(eForm.$onbeforesave=function(){return $parse(attrs.onbeforesave)(scope,{$data:eForm.$data})}),attrs.onaftersave&&(eForm.$onaftersave=function(){return $parse(attrs.onaftersave)(scope,{$data:eForm.$data})}),elem.bind("submit",(function(event){event.preventDefault(),scope.$apply((function(){eForm.$submit()}))}))),elem.bind("click",(function(e){e.which&&1!==e.which||eForm.$visible&&(eForm._clicked=!0)}))}}}}}]),angular.module("xeditable").factory("editablePromiseCollection",["$q",function($q){function promiseCollection(){return{promises:[],hasFalse:!1,hasString:!1,when:function(result,noPromise){if(!1===result)this.hasFalse=!0;else if(!noPromise&&angular.isObject(result))this.promises.push($q.when(result));else{if(!angular.isString(result))return;this.hasString=!0}},then:function(callbacks){var onTrue=(callbacks=callbacks||{}).onTrue||angular.noop,onFalse=callbacks.onFalse||angular.noop,onString=callbacks.onString||angular.noop,onWait=callbacks.onWait||angular.noop,self=this;function applyCallback(){self.hasString||self.hasFalse?!self.hasString&&self.hasFalse?onFalse():onString():onTrue()}this.promises.length?(onWait(!0),$q.all(this.promises).then((function(results){onWait(!1),angular.forEach(results,(function(result){self.when(result,!0)})),applyCallback()}),(function(error){onWait(!1),onString()}))):applyCallback()}}}return promiseCollection}]),angular.module("xeditable").factory("editableUtils",[function(){return{indexOf:function(array,obj){if(array.indexOf)return array.indexOf(obj);for(var i=0;i<array.length;i++)if(obj===array[i])return i;return-1},arrayRemove:function(array,value){var index=this.indexOf(array,value);return index>=0&&array.splice(index,1),value},camelToDash:function(str){var SNAKE_CASE_REGEXP=/[A-Z]/g;return str.replace(SNAKE_CASE_REGEXP,(function(letter,pos){return(pos?"-":"")+letter.toLowerCase()}))},dashToCamel:function(str){var SPECIAL_CHARS_REGEXP=/([\:\-\_]+(.))/g,MOZ_HACK_REGEXP=/^moz([A-Z])/;return str.replace(SPECIAL_CHARS_REGEXP,(function(_,separator,letter,offset){return offset?letter.toUpperCase():letter})).replace(MOZ_HACK_REGEXP,"Moz$1")},rename:function(tag,el){if(el[0]&&el[0].attributes){var newEl=angular.element("<"+tag+"/>");newEl.html(el.html());for(var attrs=el[0].attributes,i=0;i<attrs.length;++i)newEl.attr(attrs.item(i).nodeName,attrs.item(i).value);return newEl}}}}]),angular.module("xeditable").factory("editableNgOptionsParser",[function(){var NG_OPTIONS_REGEXP=/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/;function parser(optionsExp){var match;if(!(match=optionsExp.match(NG_OPTIONS_REGEXP)))throw"ng-options parse error";var displayFn=match[2]||match[1],valueName=match[4]||match[6],keyName=match[5],groupByFn=match[3]||"",valueFn=match[2]?match[1]:valueName,valuesFn=match[7],track=match[8],trackFn=track?match[8]:null,ngRepeat;return void 0===keyName?(ngRepeat=valueName+" in "+valuesFn,void 0!==track&&(ngRepeat+=" track by "+trackFn)):ngRepeat="("+keyName+", "+valueName+") in "+valuesFn,{ngRepeat:ngRepeat,locals:{valueName:valueName,keyName:keyName,valueFn:valueFn,displayFn:displayFn}}}return parser}]),angular.module("xeditable").factory("editableCombodate",[function(){function Combodate(element,options){if(this.$element=angular.element(element),"INPUT"!=this.$element[0].nodeName)throw"Combodate should be applied to INPUT element";var currentYear=(new Date).getFullYear();this.defaults={format:"YYYY-MM-DD HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:currentYear,yearDescending:!0,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null,customClass:"",roundTime:!0,smartDays:!0},this.options=angular.extend({},this.defaults,options),this.init()}return Combodate.prototype={constructor:Combodate,init:function(){if(this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]},this.$widget=angular.element('<span class="combodate"></span>').html(this.getTemplate()),this.initCombos(),this.options.smartDays){var combo=this;this.$widget.find("select").bind("change",(function(e){(angular.element(e.target).hasClass("month")||angular.element(e.target).hasClass("year"))&&combo.fillCombo("day")}))}this.$widget.find("select").css("width","auto"),this.$element.css("display","none").after(this.$widget),this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var tpl=this.options.template,customClass=this.options.customClass;return angular.forEach(this.map,(function(v,k){v=v[0];var r=new RegExp(v+"+"),token=v.length>1?v.substring(1,2):v;tpl=tpl.replace(r,"{"+token+"}")})),tpl=tpl.replace(/ /g,"&nbsp;"),angular.forEach(this.map,(function(v,k){var token=(v=v[0]).length>1?v.substring(1,2):v;tpl=tpl.replace("{"+token+"}",'<select class="'+k+" "+customClass+'"></select>')})),tpl},initCombos:function(){for(var k in this.map){var c=this.$widget[0].querySelectorAll("."+k);this["$"+k]=c.length?angular.element(c):null,this.fillCombo(k)}},fillCombo:function(k){var $combo=this["$"+k];if($combo){var f,items=this["fill"+k.charAt(0).toUpperCase()+k.slice(1)](),value=$combo.val();$combo.html("");for(var i=0;i<items.length;i++)$combo.append('<option value="'+items[i][0]+'">'+items[i][1]+"</option>");$combo.val(value)}},fillCommon:function(key){var values=[],relTime;if("name"===this.options.firstItem){var header="function"==typeof(relTime=moment.relativeTime||moment.langData()._relativeTime)[key]?relTime[key](1,!0,key,!1):relTime[key];header=header.split(" ").reverse()[0],values.push(["",header])}else"empty"===this.options.firstItem&&values.push(["",""]);return values},fillDay:function(){var items=this.fillCommon("d"),name,i,twoDigit=-1!==this.options.template.indexOf("DD"),daysCount=31;if(this.options.smartDays&&this.$month&&this.$year){var month=parseInt(this.$month.val(),10),year=parseInt(this.$year.val(),10);isNaN(month)||isNaN(year)||(daysCount=moment([year,month]).daysInMonth())}for(i=1;i<=daysCount;i++)name=twoDigit?this.leadZero(i):i,items.push([i,name]);return items},fillMonth:function(){var items=this.fillCommon("M"),name,i,longNames=-1!==this.options.template.indexOf("MMMM"),shortNames=-1!==this.options.template.indexOf("MMM"),twoDigit=-1!==this.options.template.indexOf("MM");for(i=0;i<=11;i++)name=longNames?moment().date(1).month(i).format("MMMM"):shortNames?moment().date(1).month(i).format("MMM"):twoDigit?this.leadZero(i+1):i+1,items.push([i,name]);return items},fillYear:function(){var items=[],name,i,longNames=-1!==this.options.template.indexOf("YYYY");for(i=this.options.maxYear;i>=this.options.minYear;i--)name=longNames?i:(i+"").substring(2),items[this.options.yearDescending?"push":"unshift"]([i,name]);return items=this.fillCommon("y").concat(items)},fillHour:function(){var items=this.fillCommon("h"),name,i,h12=-1!==this.options.template.indexOf("h"),h24=-1!==this.options.template.indexOf("H"),twoDigit=-1!==this.options.template.toLowerCase().indexOf("hh"),min,max=h12?12:23;for(i=h12?1:0;i<=max;i++)name=twoDigit?this.leadZero(i):i,items.push([i,name]);return items},fillMinute:function(){var items=this.fillCommon("m"),name,i,twoDigit=-1!==this.options.template.indexOf("mm");for(i=0;i<=59;i+=this.options.minuteStep)name=twoDigit?this.leadZero(i):i,items.push([i,name]);return items},fillSecond:function(){var items=this.fillCommon("s"),name,i,twoDigit=-1!==this.options.template.indexOf("ss");for(i=0;i<=59;i+=this.options.secondStep)name=twoDigit?this.leadZero(i):i,items.push([i,name]);return items},fillAmpm:function(){var ampmL=-1!==this.options.template.indexOf("a"),ampmU=-1!==this.options.template.indexOf("A"),items;return[["am",ampmL?"am":"AM"],["pm",ampmL?"pm":"PM"]]},getValue:function(format){var dt,values={},that=this,notSelected=!1;return angular.forEach(this.map,(function(v,k){if("ampm"!==k){var def="day"===k?1:0;return values[k]=that["$"+k]?parseInt(that["$"+k].val(),10):def,isNaN(values[k])?(notSelected=!0,!1):void 0}})),notSelected?"":(this.$ampm&&(12===values.hour?values.hour="am"===this.$ampm.val()?0:12:values.hour="am"===this.$ampm.val()?values.hour:values.hour+12),dt=moment([values.year,values.month,values.day,values.hour,values.minute,values.second]),this.highlight(dt),null===(format=void 0===format?this.options.format:format)?dt.isValid()?dt:null:dt.isValid()?dt.format(format):"")},setValue:function(value){if(value){var dt="string"==typeof value?moment(value,this.options.format,!0):moment(value),that=this,values={};dt.isValid()&&(angular.forEach(this.map,(function(v,k){"ampm"!==k&&(values[k]=dt[v[1]]())})),this.$ampm&&(values.hour>=12?(values.ampm="pm",values.hour>12&&(values.hour-=12)):(values.ampm="am",0===values.hour&&(values.hour=12))),angular.forEach(values,(function(v,k){that["$"+k]&&("minute"===k&&that.options.minuteStep>1&&that.options.roundTime&&(v=getNearest(that["$"+k],v)),"second"===k&&that.options.secondStep>1&&that.options.roundTime&&(v=getNearest(that["$"+k],v)),that["$"+k].val(v))})),this.options.smartDays&&this.fillCombo("day"),this.$element.val(dt.format(this.options.format)).triggerHandler("change"))}function getNearest($select,value){var delta={};return angular.forEach($select.children("option"),(function(opt,i){var optValue=angular.element(opt).attr("value");if(""!==optValue){var distance=Math.abs(optValue-value);(void 0===delta.distance||distance<delta.distance)&&(delta={value:optValue,distance:distance})}})),delta.value}},highlight:function(dt){dt.isValid()?this.options.errorClass?this.$widget.removeClass(this.options.errorClass):this.$widget.find("select").css("border-color",this.borderColor):this.options.errorClass?this.$widget.addClass(this.options.errorClass):(this.borderColor||(this.borderColor=this.$widget.find("select").css("border-color")),this.$widget.find("select").css("border-color","red"))},leadZero:function(v){return v<=9?"0"+v:v},destroy:function(){this.$widget.remove(),this.$element.removeData("combodate").show()}},{getInstance:function(element,options){return new Combodate(element,options)}}}]),angular.module("xeditable").factory("editableIcons",(function(){var icons;return{default:{bs2:{ok:"icon-ok icon-white",cancel:"icon-remove",clear:"icon-trash"},bs3:{ok:"glyphicon glyphicon-ok",cancel:"glyphicon glyphicon-remove",clear:"glyphicon glyphicon-trash"}},external:{"font-awesome":{ok:"fa fa-check",cancel:"fa fa-times",clear:"fa fa-trash"}}}})),angular.module("xeditable").factory("editableThemes",(function(){var themes;return{default:{formTpl:'<form class="editable-wrap"></form>',noformTpl:'<span class="editable-wrap"></span>',controlsTpl:'<span class="editable-controls"></span>',inputTpl:"",errorTpl:'<div class="editable-error" data-ng-if="$error" data-ng-bind-html="$error"></div>',buttonsTpl:'<span class="editable-buttons"></span>',submitTpl:'<button type="submit">save</button>',cancelTpl:'<button type="button" ng-click="$form.$cancel()">cancel</button>',resetTpl:'<button type="reset">clear</button>'},bs2:{formTpl:'<form class="form-inline editable-wrap" role="form"></form>',noformTpl:'<span class="editable-wrap"></span>',controlsTpl:'<div class="editable-controls controls control-group" ng-class="{\'error\': $error}"></div>',inputTpl:"",errorTpl:'<div class="editable-error help-block" data-ng-if="$error" data-ng-bind-html="$error"></div>',buttonsTpl:'<span class="editable-buttons"></span>',submitTpl:'<button type="submit" class="btn btn-primary"><span></span></button>',cancelTpl:'<button type="button" class="btn" ng-click="$form.$cancel()"><span></span></button>',resetTpl:'<button type="reset" class="btn btn-danger">clear</button>'},bs3:{formTpl:'<form class="form-inline editable-wrap" role="form"></form>',noformTpl:'<span class="editable-wrap"></span>',controlsTpl:'<div class="editable-controls form-group" ng-class="{\'has-error\': $error}"></div>',inputTpl:"",errorTpl:'<div class="editable-error help-block" data-ng-if="$error" data-ng-bind-html="$error"></div>',buttonsTpl:'<span class="editable-buttons"></span>',submitTpl:'<button type="submit" class="btn btn-primary"><span></span></button>',cancelTpl:'<button type="button" class="btn btn-default" ng-click="$form.$cancel()"><span></span></button>',resetTpl:'<button type="reset" class="btn btn-danger">clear</button>',buttonsClass:"",inputClass:"",postrender:function(){switch(this.directiveName){case"editableText":case"editableSelect":case"editableTextarea":case"editableEmail":case"editableTel":case"editableNumber":case"editableUrl":case"editableSearch":case"editableDate":case"editableDatetime":case"editableBsdate":case"editableTime":case"editableMonth":case"editableWeek":case"editablePassword":case"editableDatetimeLocal":if(this.inputEl.addClass("form-control"),this.theme.inputClass){if(this.inputEl.attr("multiple")&&("input-sm"===this.theme.inputClass||"input-lg"===this.theme.inputClass))break;this.inputEl.addClass(this.theme.inputClass)}break;case"editableCheckbox":this.editorEl.addClass("checkbox")}this.buttonsEl&&this.theme.buttonsClass&&this.buttonsEl.find("button").addClass(this.theme.buttonsClass)}},semantic:{formTpl:'<form class="editable-wrap ui form" ng-class="{\'error\': $error}" role="form"></form>',noformTpl:'<span class="editable-wrap"></span>',controlsTpl:'<div class="editable-controls ui fluid input" ng-class="{\'error\': $error}"></div>',inputTpl:"",errorTpl:'<div class="editable-error ui error message" data-ng-if="$error" data-ng-bind-html="$error"></div>',buttonsTpl:'<span class="mini ui buttons"></span>',submitTpl:'<button type="submit" class="ui primary button"><i class="ui check icon"></i></button>',cancelTpl:'<button type="button" class="ui button" ng-click="$form.$cancel()"><i class="ui cancel icon"></i></button>',resetTpl:'<button type="reset" class="ui button">clear</button>'}}})),function(window,document){"use strict";angular.module("toaster",[]).constant("toasterConfig",{limit:0,"tap-to-dismiss":!0,"close-button":!1,"close-html":'<button class="toast-close-button" type="button">&times;</button>',"newest-on-top":!0,"time-out":5e3,"icon-classes":{error:"toast-error",info:"toast-info",wait:"toast-wait",success:"toast-success",warning:"toast-warning"},"body-output-type":"","body-template":"toasterBodyTmpl.html","icon-class":"toast-info","position-class":"toast-top-right","title-class":"toast-title","message-class":"toast-message","prevent-duplicates":!1,"mouseover-timer-stop":!0}).run(["$templateCache",function($templateCache){$templateCache.put("angularjs-toaster/toast.html",'<div id="toast-container" ng-class="[config.position, config.animation]"><div ng-repeat="toaster in toasters" class="toast" ng-class="toaster.type" ng-click="click($event, toaster)" ng-mouseover="stopTimer(toaster)" ng-mouseout="restartTimer(toaster)"><div ng-if="toaster.showCloseButton" ng-click="click($event, toaster, true)" ng-bind-html="toaster.closeHtml"></div><div ng-class="config.title">{{toaster.title}}</div><div ng-class="config.message" ng-switch on="toaster.bodyOutputType"><div ng-switch-when="trustedHtml" ng-bind-html="toaster.html"></div><div ng-switch-when="template"><div ng-include="toaster.bodyTemplate"></div></div><div ng-switch-when="templateWithData"><div ng-include="toaster.bodyTemplate"></div></div><div ng-switch-when="directive"><div directive-template directive-name="{{toaster.html}}" directive-data="{{toaster.directiveData}}"></div></div><div ng-switch-default >{{toaster.body}}</div></div></div></div>')}]).service("toaster",["$rootScope","toasterConfig",function($rootScope,toasterConfig){var Guid=function(){var Guid={newGuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(c){var r=16*Math.random()|0,v;return("x"==c?r:3&r|8).toString(16)}))}};return Guid}();for(var type in this.pop=function(type,title,body,timeout,bodyOutputType,clickHandler,toasterId,showCloseButton,toastId,onHideCallback){if(angular.isObject(type)){var params=type;this.toast={type:params.type,title:params.title,body:params.body,timeout:params.timeout,bodyOutputType:params.bodyOutputType,clickHandler:params.clickHandler,showCloseButton:params.showCloseButton,closeHtml:params.closeHtml,toastId:params.toastId,onShowCallback:params.onShowCallback,onHideCallback:params.onHideCallback,directiveData:params.directiveData,tapToDismiss:params.tapToDismiss},toasterId=params.toasterId}else this.toast={type:type,title:title,body:body,timeout:timeout,bodyOutputType:bodyOutputType,clickHandler:clickHandler,showCloseButton:showCloseButton,toastId:toastId,onHideCallback:onHideCallback};return this.toast.toastId&&this.toast.toastId.length||(this.toast.toastId=Guid.newGuid()),$rootScope.$emit("toaster-newToast",toasterId,this.toast.toastId),{toasterId:toasterId,toastId:this.toast.toastId}},this.clear=function(toasterId,toastId){angular.isObject(toasterId)?$rootScope.$emit("toaster-clearToasts",toasterId.toasterId,toasterId.toastId):$rootScope.$emit("toaster-clearToasts",toasterId,toastId)},toasterConfig["icon-classes"])this[type]=createTypeMethod(type);function createTypeMethod(toasterType){return function(title,body,timeout,bodyOutputType,clickHandler,toasterId,showCloseButton,toastId,onHideCallback){return angular.isString(title)?this.pop(toasterType,title,body,timeout,bodyOutputType,clickHandler,toasterId,showCloseButton,toastId,onHideCallback):this.pop(angular.extend(title,{type:toasterType}))}}}]).factory("toasterEventRegistry",["$rootScope",function($rootScope){var deregisterNewToast=null,deregisterClearToasts=null,newToastEventSubscribers=[],clearToastsEventSubscribers=[],toasterFactory;return{setup:(toasterFactory={setup:function(){deregisterNewToast||(deregisterNewToast=$rootScope.$on("toaster-newToast",(function(event,toasterId,toastId){for(var i=0,len=newToastEventSubscribers.length;i<len;i++)newToastEventSubscribers[i](event,toasterId,toastId)}))),deregisterClearToasts||(deregisterClearToasts=$rootScope.$on("toaster-clearToasts",(function(event,toasterId,toastId){for(var i=0,len=clearToastsEventSubscribers.length;i<len;i++)clearToastsEventSubscribers[i](event,toasterId,toastId)})))},subscribeToNewToastEvent:function(onNewToast){newToastEventSubscribers.push(onNewToast)},subscribeToClearToastsEvent:function(onClearToasts){clearToastsEventSubscribers.push(onClearToasts)},unsubscribeToNewToastEvent:function(onNewToast){var index=newToastEventSubscribers.indexOf(onNewToast);index>=0&&newToastEventSubscribers.splice(index,1),0===newToastEventSubscribers.length&&(deregisterNewToast(),deregisterNewToast=null)},unsubscribeToClearToastsEvent:function(onClearToasts){var index=clearToastsEventSubscribers.indexOf(onClearToasts);index>=0&&clearToastsEventSubscribers.splice(index,1),0===clearToastsEventSubscribers.length&&(deregisterClearToasts(),deregisterClearToasts=null)}}).setup,subscribeToNewToastEvent:toasterFactory.subscribeToNewToastEvent,subscribeToClearToastsEvent:toasterFactory.subscribeToClearToastsEvent,unsubscribeToNewToastEvent:toasterFactory.unsubscribeToNewToastEvent,unsubscribeToClearToastsEvent:toasterFactory.unsubscribeToClearToastsEvent}}]).directive("directiveTemplate",["$compile","$injector",function($compile,$injector){return{restrict:"A",scope:{directiveName:"@directiveName",directiveData:"@directiveData"},replace:!0,link:function(scope,elm,attrs){scope.$watch("directiveName",(function(directiveName){if(angular.isUndefined(directiveName)||directiveName.length<=0)throw new Error("A valid directive name must be provided via the toast body argument when using bodyOutputType: directive");var directive;try{directive=$injector.get(attrs.$normalize(directiveName)+"Directive")}catch(e){throw new Error(directiveName+" could not be found. The name should appear as it exists in the markup, not camelCased as it would appear in the directive declaration, e.g. directive-name not directiveName.")}var directiveDetails=directive[0];if(!0!==directiveDetails.scope&&directiveDetails.scope)throw new Error("Cannot use a directive with an isolated scope. The scope must be either true or falsy (e.g. false/null/undefined). Occurred for directive "+directiveName+".");if(directiveDetails.restrict.indexOf("A")<0)throw new Error('Directives must be usable as attributes. Add "A" to the restrict option (or remove the option entirely). Occurred for directive '+directiveName+".");scope.directiveData&&(scope.directiveData=angular.fromJson(scope.directiveData));var template=$compile("<div "+directiveName+"></div>")(scope);elm.append(template)}))}}}]).directive("toasterContainer",["$parse","$rootScope","$interval","$sce","toasterConfig","toaster","toasterEventRegistry",function($parse,$rootScope,$interval,$sce,toasterConfig,toaster,toasterEventRegistry){return{replace:!0,restrict:"EA",scope:!0,link:function(scope,elm,attrs){var mergedConfig;function setTimeout(toast,time){toast.timeoutPromise=$interval((function(){scope.removeToast(toast.toastId)}),time,1)}function addToast(toast,toastId){if(toast.type=mergedConfig["icon-classes"][toast.type],toast.type||(toast.type=mergedConfig["icon-class"]),!0===mergedConfig["prevent-duplicates"]&&scope.toasters.length){if(scope.toasters[scope.toasters.length-1].body===toast.body)return;var i,len,dupFound=!1;for(i=0,len=scope.toasters.length;i<len;i++)if(scope.toasters[i].toastId===toastId){dupFound=!0;break}if(dupFound)return}var closeButton=mergedConfig["close-button"];if("boolean"==typeof toast.showCloseButton);else if("boolean"==typeof closeButton)toast.showCloseButton=closeButton;else if("object"==typeof closeButton){var closeButtonForType=closeButton[toast.type];null!=closeButtonForType&&(toast.showCloseButton=closeButtonForType)}else toast.showCloseButton=!1;switch(toast.showCloseButton&&(toast.closeHtml=$sce.trustAsHtml(toast.closeHtml||scope.config.closeHtml)),toast.bodyOutputType=toast.bodyOutputType||mergedConfig["body-output-type"],toast.bodyOutputType){case"trustedHtml":toast.html=$sce.trustAsHtml(toast.body);break;case"template":toast.bodyTemplate=toast.body||mergedConfig["body-template"];break;case"templateWithData":var fcGet,templateWithData=$parse(toast.body||mergedConfig["body-template"])(scope);toast.bodyTemplate=templateWithData.template,toast.data=templateWithData.data;break;case"directive":toast.html=toast.body}scope.configureTimer(toast),!0===mergedConfig["newest-on-top"]?(scope.toasters.unshift(toast),mergedConfig.limit>0&&scope.toasters.length>mergedConfig.limit&&scope.toasters.pop()):(scope.toasters.push(toast),mergedConfig.limit>0&&scope.toasters.length>mergedConfig.limit&&scope.toasters.shift()),angular.isFunction(toast.onShowCallback)&&toast.onShowCallback(toast)}function removeToast(toastIndex){var toast=scope.toasters[toastIndex];toast.timeoutPromise&&$interval.cancel(toast.timeoutPromise),scope.toasters.splice(toastIndex,1),angular.isFunction(toast.onHideCallback)&&toast.onHideCallback(toast)}function removeAllToasts(toastId){for(var i=scope.toasters.length-1;i>=0;i--)isUndefinedOrNull(toastId)?removeToast(i):scope.toasters[i].toastId==toastId&&removeToast(i)}function isUndefinedOrNull(val){return angular.isUndefined(val)||null===val}mergedConfig=angular.extend({},toasterConfig,scope.$eval(attrs.toasterOptions)),scope.config={toasterId:mergedConfig["toaster-id"],position:mergedConfig["position-class"],title:mergedConfig["title-class"],message:mergedConfig["message-class"],tap:mergedConfig["tap-to-dismiss"],closeButton:mergedConfig["close-button"],closeHtml:mergedConfig["close-html"],animation:mergedConfig["animation-class"],mouseoverTimer:mergedConfig["mouseover-timer-stop"]},scope.$on("$destroy",(function(){toasterEventRegistry.unsubscribeToNewToastEvent(scope._onNewToast),toasterEventRegistry.unsubscribeToClearToastsEvent(scope._onClearToasts)})),scope.configureTimer=function(toast){var timeout=angular.isNumber(toast.timeout)?toast.timeout:mergedConfig["time-out"];"object"==typeof timeout&&(timeout=timeout[toast.type]),timeout>0&&setTimeout(toast,timeout)},scope.removeToast=function(toastId){var i,len;for(i=0,len=scope.toasters.length;i<len;i++)if(scope.toasters[i].toastId===toastId){removeToast(i);break}},scope.toasters=[],scope._onNewToast=function(event,toasterId,toastId){(isUndefinedOrNull(scope.config.toasterId)&&isUndefinedOrNull(toasterId)||!isUndefinedOrNull(scope.config.toasterId)&&!isUndefinedOrNull(toasterId)&&scope.config.toasterId==toasterId)&&addToast(toaster.toast,toastId)},scope._onClearToasts=function(event,toasterId,toastId){("*"==toasterId||isUndefinedOrNull(scope.config.toasterId)&&isUndefinedOrNull(toasterId)||!isUndefinedOrNull(scope.config.toasterId)&&!isUndefinedOrNull(toasterId)&&scope.config.toasterId==toasterId)&&removeAllToasts(toastId)},toasterEventRegistry.setup(),toasterEventRegistry.subscribeToNewToastEvent(scope._onNewToast),toasterEventRegistry.subscribeToClearToastsEvent(scope._onClearToasts)},controller:["$scope","$element","$attrs",function($scope,$element,$attrs){$scope.stopTimer=function(toast){!0===$scope.config.mouseoverTimer&&toast.timeoutPromise&&($interval.cancel(toast.timeoutPromise),toast.timeoutPromise=null)},$scope.restartTimer=function(toast){!0===$scope.config.mouseoverTimer?toast.timeoutPromise||$scope.configureTimer(toast):null===toast.timeoutPromise&&$scope.removeToast(toast.toastId)},$scope.click=function(event,toast,isCloseButton){var tapToDismiss;if(event.stopPropagation(),!0===("boolean"==typeof toast.tapToDismiss?toast.tapToDismiss:$scope.config.tap)||!0===toast.showCloseButton&&!0===isCloseButton){var removeToast=!0;toast.clickHandler&&(angular.isFunction(toast.clickHandler)?removeToast=toast.clickHandler(toast,isCloseButton):angular.isFunction($scope.$parent.$eval(toast.clickHandler))?removeToast=$scope.$parent.$eval(toast.clickHandler)(toast,isCloseButton):console.log("TOAST-NOTE: Your click handler is not inside a parent scope of toaster-container.")),removeToast&&$scope.removeToast(toast.toastId)}}}],templateUrl:"angularjs-toaster/toast.html"}}])}(window,document),
/**
 * @license Angulartics
 * (c) 2013 Luis Farzati http://angulartics.github.io/
 * License: MIT
 */
function(angular,analytics){"use strict";var angulartics=window.angulartics||(window.angulartics={});function $analytics(){var vm=this,settings={pageTracking:{autoTrackFirstPage:!0,autoTrackVirtualPages:!0,trackRelativePath:!1,trackRoutes:!0,trackStates:!0,autoBasePath:!1,basePath:"",excludedRoutes:[],queryKeysWhitelisted:[],queryKeysBlacklisted:[]},eventTracking:{},bufferFlushDelay:1e3,trackExceptions:!1,optOut:!1,developerMode:!1},knownHandlers=["pageTrack","eventTrack","exceptionTrack","transactionTrack","setAlias","setUsername","setUserProperties","setUserPropertiesOnce","setSuperProperties","setSuperPropertiesOnce","incrementProperty","userTimings","clearCookies"],cache={},handlers={},handlerOptions={};function bufferedHandler(handlerName){return function(){angulartics.waitForVendorCount&&(cache[handlerName]||(cache[handlerName]=[]),cache[handlerName].push(arguments))}}function updateHandlers(handlerName,fn,options){return handlers[handlerName]||(handlers[handlerName]=[]),handlers[handlerName].push(fn),handlerOptions[fn]=options,function(){if(!this.settings.optOut){var handlerArgs=Array.prototype.slice.apply(arguments);return this.$inject(["$q",angular.bind(this,(function($q){return $q.all(handlers[handlerName].map((function(handlerFn){var options;if((handlerOptions[handlerFn]||{}).async){var deferred=$q.defer(),currentArgs=angular.copy(handlerArgs);return currentArgs.unshift(deferred.resolve),handlerFn.apply(this,currentArgs),deferred.promise}return $q.when(handlerFn.apply(this,handlerArgs))}),this))}))])}}}var api={settings:settings};function onTimeout(fn,delay){delay?setTimeout(fn,delay):fn()}api.setOptOut=function(optOut){this.settings.optOut=optOut,triggerRegister()},api.getOptOut=function(){return this.settings.optOut};var provider={$get:["$injector",function($injector){return apiWithInjector($injector)}],api:api,settings:settings,virtualPageviews:function(value){this.settings.pageTracking.autoTrackVirtualPages=value},trackStates:function(value){this.settings.pageTracking.trackStates=value},trackRoutes:function(value){this.settings.pageTracking.trackRoutes=value},excludeRoutes:function(routes){this.settings.pageTracking.excludedRoutes=routes},queryKeysWhitelist:function(keys){this.settings.pageTracking.queryKeysWhitelisted=keys},queryKeysBlacklist:function(keys){this.settings.pageTracking.queryKeysBlacklisted=keys},firstPageview:function(value){this.settings.pageTracking.autoTrackFirstPage=value},withBase:function(value){this.settings.pageTracking.basePath=value?angular.element(document).find("base").attr("href"):""},withAutoBase:function(value){this.settings.pageTracking.autoBasePath=value},trackExceptions:function(value){this.settings.trackExceptions=value},developerMode:function(value){this.settings.developerMode=value}};function register(handlerName,fn,options){if(!settings.developerMode){api[handlerName]=updateHandlers(handlerName,fn,options);var handlerSettings=settings[handlerName],handlerDelay=handlerSettings?handlerSettings.bufferFlushDelay:null,delay=null!==handlerDelay?handlerDelay:settings.bufferFlushDelay;angular.forEach(cache[handlerName],(function(args,index){onTimeout((function(){fn.apply(this,args)}),index*delay)}))}}function capitalize(input){return input.replace(/^./,(function(match){return match.toUpperCase()}))}var apiWithInjector=function(injector){return angular.extend(api,{$inject:injector.invoke})};function installHandlerRegisterFunction(handlerName){var registerName="register"+capitalize(handlerName);provider[registerName]=function(fn,options){register(handlerName,fn,options)},api[handlerName]=updateHandlers(handlerName,bufferedHandler(handlerName))}function startRegistering(_provider,_knownHandlers,_installHandlerRegisterFunction){for(var key in angular.forEach(_knownHandlers,_installHandlerRegisterFunction),_provider)vm[key]=_provider[key]}var triggerRegister=function(){startRegistering(provider,knownHandlers,installHandlerRegisterFunction)};startRegistering(provider,knownHandlers,installHandlerRegisterFunction)}function $analyticsRun($rootScope,$window,$analytics,$injector){function matchesExcludedRoute(url){for(var i=0;i<$analytics.settings.pageTracking.excludedRoutes.length;i++){var excludedRoute=$analytics.settings.pageTracking.excludedRoutes[i];if(excludedRoute instanceof RegExp&&excludedRoute.test(url)||url.indexOf(excludedRoute)>-1)return!0}return!1}function arrayDifference(a1,a2){for(var result=[],i=0;i<a1.length;i++)-1===a2.indexOf(a1[i])&&result.push(a1[i]);return result}function filterQueryString(url,keysMatchArr,thisType){if(/\?/.test(url)&&keysMatchArr.length>0){for(var urlArr=url.split("?"),urlBase=urlArr[0],pairs=urlArr[1].split("&"),matchedPairs=[],i=0;i<keysMatchArr.length;i++)for(var listedKey=keysMatchArr[i],j=0;j<pairs.length;j++)(listedKey instanceof RegExp&&listedKey.test(pairs[j])||pairs[j].indexOf(listedKey)>-1)&&matchedPairs.push(pairs[j]);var matchedPairsArr="white"==thisType?matchedPairs:arrayDifference(pairs,matchedPairs);return matchedPairsArr.length>0?urlBase+"?"+matchedPairsArr.join("&"):urlBase}return url}function whitelistQueryString(url){return filterQueryString(url,$analytics.settings.pageTracking.queryKeysWhitelisted,"white")}function blacklistQueryString(url){return filterQueryString(url,$analytics.settings.pageTracking.queryKeysBlacklisted,"black")}function pageTrack(url,$location){matchesExcludedRoute(url)||(url=blacklistQueryString(url=whitelistQueryString(url)),$analytics.pageTrack(url,$location))}$analytics.settings.pageTracking.autoTrackFirstPage&&$injector.invoke(["$location",function($location){var noRoutesOrStates=!0,url;if($injector.has("$route")){var $route=$injector.get("$route");if($route)for(var route in $route.routes){noRoutesOrStates=!1;break}else null===$route&&(noRoutesOrStates=!1)}else if($injector.has("$state")){var $state=$injector.get("$state");for(var state in $state.get()){noRoutesOrStates=!1;break}}noRoutesOrStates&&($analytics.settings.pageTracking.autoBasePath&&($analytics.settings.pageTracking.basePath=$window.location.pathname),$analytics.settings.pageTracking.trackRelativePath?pageTrack($analytics.settings.pageTracking.basePath+$location.url(),$location):pageTrack($location.absUrl(),$location))}]),$analytics.settings.pageTracking.autoTrackVirtualPages&&$injector.invoke(["$location",function($location){$analytics.settings.pageTracking.autoBasePath&&($analytics.settings.pageTracking.basePath=$window.location.pathname+"#");var noRoutesOrStates=!0;if($analytics.settings.pageTracking.trackRoutes&&$injector.has("$route")){var $route=$injector.get("$route");if($route)for(var route in $route.routes){noRoutesOrStates=!1;break}else null===$route&&(noRoutesOrStates=!1);$rootScope.$on("$routeChangeSuccess",(function(event,current){var url;current&&(current.$$route||current).redirectTo||pageTrack($analytics.settings.pageTracking.basePath+$location.url(),$location)}))}$analytics.settings.pageTracking.trackStates&&($injector.has("$state")&&!$injector.has("$transitions")&&(noRoutesOrStates=!1,$rootScope.$on("$stateChangeSuccess",(function(event,current){var url;pageTrack($analytics.settings.pageTracking.basePath+$location.url(),$location)}))),$injector.has("$state")&&$injector.has("$transitions")&&(noRoutesOrStates=!1,$injector.invoke(["$transitions",function($transitions){$transitions.onSuccess({},(function($transition$){var transitionOptions,url;$transition$.options().notify&&pageTrack($analytics.settings.pageTracking.basePath+$location.url(),$location)}))}]))),noRoutesOrStates&&$rootScope.$on("$locationChangeSuccess",(function(event,current){var url;current&&(current.$$route||current).redirectTo||($analytics.settings.pageTracking.trackRelativePath?pageTrack($analytics.settings.pageTracking.basePath+$location.url(),$location):pageTrack($location.absUrl(),$location))}))}]),$analytics.settings.developerMode&&angular.forEach($analytics,(function(attr,name){"function"==typeof attr&&($analytics[name]=function(){})}))}function analyticsOn($analytics){return{restrict:"A",link:function($scope,$element,$attrs){var eventType=$attrs.analyticsOn||"click",trackingData={};angular.forEach($attrs.$attr,(function(attr,name){isProperty(name)&&(trackingData[propertyName(name)]=$attrs[name],$attrs.$observe(name,(function(value){trackingData[propertyName(name)]=value})))})),angular.element($element[0]).bind(eventType,(function($event){var eventName=$attrs.analyticsEvent||inferEventName($element[0]);trackingData.eventType=$event.type,$attrs.analyticsIf&&!$scope.$eval($attrs.analyticsIf)||($attrs.analyticsProperties&&angular.extend(trackingData,$scope.$eval($attrs.analyticsProperties)),$analytics.eventTrack(eventName,trackingData))}))}}}function exceptionTrack($provide){$provide.decorator("$exceptionHandler",["$delegate","$injector",function($delegate,$injector){return function(error,cause){var result=$delegate(error,cause),$analytics=$injector.get("$analytics");return $analytics.settings.trackExceptions&&$analytics.exceptionTrack(error,cause),result}}])}function isCommand(element){return["a:","button:","button:button","button:submit","input:button","input:submit"].indexOf(element.tagName.toLowerCase()+":"+(element.type||""))>=0}function inferEventType(element){return isCommand(element),"click"}function inferEventName(element){return isCommand(element)?element.innerText||element.value:element.id||element.name||element.tagName}function isProperty(name){return"analytics"===name.substr(0,9)&&-1===["On","Event","If","Properties","EventType"].indexOf(name.substr(9))}function propertyName(name){var s=name.slice(9);return null!=s&&s.length>0?s.substring(0,1).toLowerCase()+s.substring(1):s}angulartics.waitForVendorCount=0,angulartics.waitForVendorApi=function(objectName,delay,containsField,registerFn,onTimeout){onTimeout||angulartics.waitForVendorCount++,registerFn||(registerFn=containsField,containsField=void 0),!Object.prototype.hasOwnProperty.call(window,objectName)||void 0!==containsField&&void 0===window[objectName][containsField]?setTimeout((function(){angulartics.waitForVendorApi(objectName,delay,containsField,registerFn,!0)}),delay):(angulartics.waitForVendorCount--,registerFn(window[objectName]))},angular.module("angulartics",[]).provider("$analytics",$analytics).run(["$rootScope","$window","$analytics","$injector",$analyticsRun]).directive("analyticsOn",["$analytics",analyticsOn]).config(["$provide",exceptionTrack])}(angular),
/**
 * @license Angulartics
 * (c) 2013 Luis Farzati http://luisfarzati.github.io/angulartics
 * Google Tag Manager Plugin Contributed by http://github.com/danrowe49
 * License: MIT
 */
function(angular){"use strict";angular.module("angulartics.google.tagmanager",["angulartics"]).config(["$analyticsProvider",function($analyticsProvider){$analyticsProvider.registerPageTrack((function(path){var dataLayer;(window.dataLayer=window.dataLayer||[]).push({event:"content-view","content-name":path})})),$analyticsProvider.registerEventTrack((function(action,properties){var dataLayer;properties=properties||{},(window.dataLayer=window.dataLayer||[]).push({event:properties.event||"interaction",target:properties.category,action:action,"target-properties":properties.label,value:properties.value,"interaction-type":properties.noninteraction})})),$analyticsProvider.registerSetUsername((function(username,properties){var dataLayer;properties=properties||{},(window.dataLayer=window.dataLayer||[]).push({username:username,user:properties})}))}])}(angular),"undefined"!=typeof module&&void 0!==exports&&module.exports===exports&&(module.exports="checklist-model"),angular.module("checklist-model",[]).directive("checklistModel",["$parse","$compile",function($parse,$compile){function contains(arr,item,comparator){if(angular.isArray(arr))for(var i=arr.length;i--;)if(comparator(arr[i],item))return!0;return!1}function add(arr,item,comparator){return contains(arr=angular.isArray(arr)?arr:[],item,comparator)||arr.push(item),arr}function remove(arr,item,comparator){if(angular.isArray(arr))for(var i=arr.length;i--;)if(comparator(arr[i],item)){arr.splice(i,1);break}return arr}function postLinkFn(scope,elem,attrs){var checklistModel=attrs.checklistModel;attrs.$set("checklistModel",null),$compile(elem)(scope),attrs.$set("checklistModel",checklistModel);var checklistModelGetter=$parse(checklistModel),checklistChange=$parse(attrs.checklistChange),checklistBeforeChange=$parse(attrs.checklistBeforeChange),ngModelGetter=$parse(attrs.ngModel),comparator=function(a,b){return isNaN(a)||isNaN(b)?angular.equals(a,b):String(a)===String(b)};if(attrs.hasOwnProperty("checklistComparator"))if("."==attrs.checklistComparator[0]){var comparatorExpression=attrs.checklistComparator.substring(1);comparator=function(a,b){return a[comparatorExpression]===b[comparatorExpression]}}else comparator=$parse(attrs.checklistComparator)(scope.$parent);var unbindModel=scope.$watch(attrs.ngModel,(function(newValue,oldValue){newValue!==oldValue&&(checklistBeforeChange&&!1===checklistBeforeChange(scope)?ngModelGetter.assign(scope,contains(checklistModelGetter(scope.$parent),getChecklistValue(),comparator)):(setValueInChecklistModel(getChecklistValue(),newValue),checklistChange&&checklistChange(scope)))})),unbindCheckListValue=scope.$watch(getChecklistValue,(function(newValue,oldValue){if(newValue!=oldValue&&angular.isDefined(oldValue)&&!0===scope[attrs.ngModel]){var current=checklistModelGetter(scope.$parent);checklistModelGetter.assign(scope.$parent,remove(current,oldValue,comparator)),checklistModelGetter.assign(scope.$parent,add(current,newValue,comparator))}}),!0),unbindDestroy=scope.$on("$destroy",destroy);function destroy(){unbindModel(),unbindCheckListValue(),unbindDestroy()}function getChecklistValue(){return attrs.checklistValue?$parse(attrs.checklistValue)(scope.$parent):attrs.value}function setValueInChecklistModel(value,checked){var current=checklistModelGetter(scope.$parent);angular.isFunction(checklistModelGetter.assign)&&(!0===checked?checklistModelGetter.assign(scope.$parent,add(current,value,comparator)):checklistModelGetter.assign(scope.$parent,remove(current,value,comparator)))}function setChecked(newArr,oldArr){checklistBeforeChange&&!1===checklistBeforeChange(scope)?setValueInChecklistModel(getChecklistValue(),ngModelGetter(scope)):ngModelGetter.assign(scope,contains(newArr,getChecklistValue(),comparator))}angular.isFunction(scope.$parent.$watchCollection)?scope.$parent.$watchCollection(checklistModel,setChecked):scope.$parent.$watch(checklistModel,setChecked,!0)}return{restrict:"A",priority:1e3,terminal:!0,scope:!0,compile:function(tElement,tAttrs){if(!tAttrs.checklistValue&&!tAttrs.value)throw"You should provide `value` or `checklist-value`.";return tAttrs.ngModel||tAttrs.$set("ngModel","checked"),postLinkFn}}}]),function(window,document,undefined){if(window){for(var _MAP={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},_KEYCODE_MAP={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},_SHIFT_MAP={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},_SPECIAL_ALIASES={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},_REVERSE_MAP,_EMPTY_FUNCTION=function(){},i=1;i<20;++i)_MAP[111+i]="f"+i;for(i=0;i<=9;++i)_MAP[i+96]=i.toString();Mousetrap.prototype.bind=function(keys,callback,action,append){var self=this;return keys=keys instanceof Array?keys:[keys],this._bindMultiple.call(this,keys,callback,action,append),this},Mousetrap.prototype.unbind=function(keys,action,removeCallback){var self=this;return keys=keys instanceof Array?keys:[keys],this._unbindMultiple.call(this,keys,action,removeCallback),this},Mousetrap.prototype.trigger=function(keys,action){var self=this;return this._directMap[keys+":"+action]&&this._directMap[keys+":"+action]({},keys),this},Mousetrap.prototype.reset=function(){var self=this;return this._callbacks={},this._directMap={},this},Mousetrap.prototype.stopCallback=function(e,element){var self=this;return!((" "+element.className+" ").indexOf(" mousetrap ")>-1)&&(!_belongsTo(element,this.target)&&("INPUT"==element.tagName||"SELECT"==element.tagName||"TEXTAREA"==element.tagName||element.isContentEditable))},Mousetrap.prototype.handleKey=function(){var self=this;return self._handleKey.apply(self,arguments)},Mousetrap.addKeycodes=function(object){for(var key in object)object.hasOwnProperty(key)&&(_MAP[key]=object[key]);_REVERSE_MAP=null},Mousetrap.init=function(){var documentMousetrap=Mousetrap(document);for(var method in documentMousetrap)"_"!==method.charAt(0)&&(Mousetrap[method]=function(method){return function(){return documentMousetrap[method].apply(documentMousetrap,arguments)}}(method))},Mousetrap.init(),window.Mousetrap=Mousetrap,"undefined"!=typeof module&&module.exports&&(module.exports=Mousetrap),"function"==typeof define&&define.amd&&define((function(){return Mousetrap}))}function _addEvent(object,type,callback){object.addEventListener?object.addEventListener(type,callback,!1):object.attachEvent("on"+type,callback)}function _characterFromEvent(e){if("keypress"==e.type){var character=String.fromCharCode(e.which);return e.shiftKey||(character=character.toLowerCase()),character}return _MAP[e.which]?_MAP[e.which]:_KEYCODE_MAP[e.which]?_KEYCODE_MAP[e.which]:String.fromCharCode(e.which).toLowerCase()}function _modifiersMatch(arr1,arr2){var i,len=arr1.length;if(len!==arr2.length)return!1;for(arr1=arr1.sort(),arr2=arr2.sort(),i=0;i<len;i++)if(arr1[i]!==arr2[i])return!1;return!0}function _eventModifiers(e){var modifiers=[];return e.shiftKey&&modifiers.push("shift"),e.altKey&&modifiers.push("alt"),e.ctrlKey&&modifiers.push("ctrl"),e.metaKey&&modifiers.push("meta"),modifiers}function _preventDefault(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function _stopPropagation(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function _isModifier(key){return"shift"==key||"ctrl"==key||"alt"==key||"meta"==key}function _getReverseMap(){if(!_REVERSE_MAP)for(var key in _REVERSE_MAP={},_MAP)key>95&&key<112||_MAP.hasOwnProperty(key)&&(_REVERSE_MAP[_MAP[key]]=key);return _REVERSE_MAP}function _pickBestAction(key,modifiers,action){return action||(action=_getReverseMap()[key]?"keydown":"keypress"),"keypress"==action&&modifiers.length&&(action="keydown"),action}function _keysFromString(combination){return"+"===combination?["+"]:(combination=combination.replace(/\+{2}/g,"+plus")).split("+")}function _getKeyInfo(combination,action){var keys,key,i,modifiers=[];for(keys=_keysFromString(combination),i=0;i<keys.length;++i)key=keys[i],_SPECIAL_ALIASES[key]&&(key=_SPECIAL_ALIASES[key]),action&&"keypress"!=action&&_SHIFT_MAP[key]&&(key=_SHIFT_MAP[key],modifiers.push("shift")),_isModifier(key)&&modifiers.push(key);return{key:key,modifiers:modifiers,action:action=_pickBestAction(key,modifiers,action)}}function _belongsTo(element,ancestor){return null!==element&&element!==document&&(element===ancestor||_belongsTo(element.parentNode,ancestor))}function Mousetrap(targetElement){var self=this;if(targetElement=targetElement||document,!(self instanceof Mousetrap))return new Mousetrap(targetElement);self.target=targetElement,self._callbacks={},self._directMap={};var _sequenceLevels={},_resetTimer,_ignoreNextKeyup=!1,_ignoreNextKeypress=!1,_nextExpectedAction=!1;function _resetSequences(doNotReset){doNotReset=doNotReset||{};var activeSequences=!1,key;for(key in _sequenceLevels)doNotReset[key]?activeSequences=!0:_sequenceLevels[key]=0;activeSequences||(_nextExpectedAction=!1)}function _getMatches(character,modifiers,e,sequenceName,combination,level,removeCallback){var i,callback,matches=[],action=e.type;if(!self._callbacks[character])return[];for("keyup"==action&&_isModifier(character)&&(modifiers=[character]),i=0;i<self._callbacks[character].length;++i)if(callback=self._callbacks[character][i],(sequenceName||!callback.seq||_sequenceLevels[callback.seq]==callback.level)&&action==callback.action&&("keypress"==action&&!e.metaKey&&!e.ctrlKey||_modifiersMatch(modifiers,callback.modifiers))){var deleteCombo=!sequenceName&&callback.combo==combination,deleteSequence=sequenceName&&callback.seq==sequenceName&&callback.level==level,deleteSpecificCallback;(!removeCallback||removeCallback&&callback.callback===removeCallback)&&(deleteCombo||deleteSequence)&&self._callbacks[character].splice(i,1),matches.push(callback)}return matches}function _fireCallback(callback,e,combo,sequence){self.stopCallback(e,e.target||e.srcElement,combo,sequence)||!1===callback(e,combo)&&(_preventDefault(e),_stopPropagation(e))}function _handleKeyEvent(e){"number"!=typeof e.which&&(e.which=e.keyCode);var character=_characterFromEvent(e);character&&("keyup"!=e.type||_ignoreNextKeyup!==character?self.handleKey(character,_eventModifiers(e),e):_ignoreNextKeyup=!1)}function _resetSequenceTimer(){clearTimeout(_resetTimer),_resetTimer=setTimeout(_resetSequences,1e3)}function _bindSequence(combo,keys,callback,action){function _increaseSequence(nextAction){return function(){_nextExpectedAction=nextAction,++_sequenceLevels[combo],_resetSequenceTimer()}}function _callbackAndReset(e){_fireCallback(callback,e,combo),"keyup"!==action&&(_ignoreNextKeyup=_characterFromEvent(e)),setTimeout(_resetSequences,10)}_sequenceLevels[combo]=0;for(var i=0;i<keys.length;++i){var isFinal,wrappedCallback=i+1===keys.length?_callbackAndReset:_increaseSequence(action||_getKeyInfo(keys[i+1]).action);_bindSingle(keys[i],wrappedCallback,action,combo,i)}}function _prepareSearchData(combination,action,callback){self._directMap[combination+":"+action]=callback;var sequence=(combination=combination.replace(/\s+/g," ")).split(" "),info;return sequence.length>1?{combination:combination,sequence:sequence,isBindSequence:!0}:(info=_getKeyInfo(combination,action),self._callbacks[info.key]=self._callbacks[info.key]||[],{combination:combination,sequence:sequence,isBindSequence:!1,info:info})}function _unbind(combination,action,removeCallback){var oSearchedData=_prepareSearchData(combination,action,_EMPTY_FUNCTION);oSearchedData.isBindSequence?_bindSequence(combination,oSearchedData.sequence,_EMPTY_FUNCTION,action):_getMatches(oSearchedData.info.key,oSearchedData.info.modifiers,{type:oSearchedData.info.action},void 0,oSearchedData.combination,void 0,removeCallback)}function _bindSingle(combination,callback,action,sequenceName,level,append){var oSearchedData=_prepareSearchData(combination,action,callback);oSearchedData.isBindSequence?_bindSequence(combination,oSearchedData.sequence,callback,action):(append||_getMatches(oSearchedData.info.key,oSearchedData.info.modifiers,{type:oSearchedData.info.action},sequenceName,combination,level),self._callbacks[oSearchedData.info.key][sequenceName?"unshift":"push"]({callback:callback,modifiers:oSearchedData.info.modifiers,action:oSearchedData.info.action,seq:sequenceName,level:level,combo:combination}))}self._handleKey=function(character,modifiers,e){var callbacks=_getMatches(character,modifiers,e),i,doNotReset={},maxLevel=0,processedSequenceCallback=!1;for(i=0;i<callbacks.length;++i)callbacks[i].seq&&(maxLevel=Math.max(maxLevel,callbacks[i].level));for(i=0;i<callbacks.length;++i)if(callbacks[i].seq){if(callbacks[i].level!=maxLevel)continue;processedSequenceCallback=!0,doNotReset[callbacks[i].seq]=1,_fireCallback(callbacks[i].callback,e,callbacks[i].combo,callbacks[i].seq)}else processedSequenceCallback||_fireCallback(callbacks[i].callback,e,callbacks[i].combo);var ignoreThisKeypress="keypress"==e.type&&_ignoreNextKeypress;e.type!=_nextExpectedAction||_isModifier(character)||ignoreThisKeypress||_resetSequences(doNotReset),_ignoreNextKeypress=processedSequenceCallback&&"keydown"==e.type},self._bindMultiple=function(combinations,callback,action,append){for(var i=0;i<combinations.length;++i)_bindSingle(combinations[i],callback,action,void 0,void 0,append)},self._unbindMultiple=function(combinations,action,removeCallback){for(var i=0;i<combinations.length;++i)_unbind(combinations[i],action,removeCallback)},_addEvent(targetElement,"keypress",_handleKeyEvent),_addEvent(targetElement,"keydown",_handleKeyEvent),_addEvent(targetElement,"keyup",_handleKeyEvent)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null),angular.module("debounce",[]).service("debounce",["$timeout",function($timeout){return function(func,wait,immediate,invokeApply){var timeout,args,context,result;function debounce(){context=this,args=arguments;var later=function(){timeout=null,immediate||(result=func.apply(context,args))},callNow=immediate&&!timeout;return timeout&&$timeout.cancel(timeout),timeout=$timeout(later,wait,invokeApply),callNow&&(result=func.apply(context,args)),result}return debounce.cancel=function(){$timeout.cancel(timeout),timeout=null},debounce}}]).directive("debounce",["debounce","$parse",function(debounce,$parse){return{require:"ngModel",priority:999,link:function($scope,$element,$attrs,ngModelController){var debounceDuration=$parse($attrs.debounce)($scope),immediate=!!$parse($attrs.immediate)($scope),debouncedValue,pass,prevRender=ngModelController.$render.bind(ngModelController),commitSoon=debounce((function(viewValue){pass=!0,ngModelController.$$lastCommittedViewValue=debouncedValue,ngModelController.$setViewValue(viewValue),pass=!1}),parseInt(debounceDuration,10),immediate);ngModelController.$render=function(){prevRender(),commitSoon.cancel(),debouncedValue=this.$viewValue},ngModelController.$parsers.unshift((function(value){return pass?(debouncedValue=value,value):(commitSoon(ngModelController.$viewValue),debouncedValue)}))}}}]),
/**
 * Useful filters for AngularJS
 * @version v1.3.1 - 2016-09-26 * @link https://github.com/exceptionless/ng-filters
 * @author Blake Niemyjski <biemyjski@gmail.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
function(){"use strict";angular.module("angular-filters",[])}(),function(){"use strict";angular.module("angular-filters").filter("bytes",[function(){return function(bytes,precision){if("number"!=typeof bytes&&(bytes=parseFloat(bytes)),0===bytes)return"0 B";if(isNaN(bytes)||!isFinite(bytes))return"-";var isNegative=bytes<0;isNegative&&(bytes=-bytes),"number"!=typeof precision&&(precision=parseFloat(precision)),!isNaN(precision)&&isFinite(precision)||(precision=1);var units=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],exponent=Math.min(Math.floor(Math.log(bytes)/Math.log(1024)),units.length-1),number;return(isNegative?"-":"")+(bytes/Math.pow(1024,Math.floor(exponent))).toFixed(precision)+" "+units[exponent]}}])}(),function(){"use strict";angular.module("angular-filters").filter("join",[function(){return function(input,separator){if(!Array.isArray(input))return input;var filtered=[];return input.forEach((function(item){item&&filtered.push(item)})),filtered.join(separator||",")}}])}(),function(){"use strict";angular.module("angular-filters").filter("percentage",["$filter",function($filter){function roundUpToNextTenth(input){return input=(input=parseFloat(input.toFixed(5))).toString().split("e"),+((input=(input=Math.ceil(+(input[0]+"e"+(input[1]?+input[1]+1:1)))).toString().split("e"))[0]+"e"+(input[1]?+input[1]-1:-1))}return function(input,max){return input=parseFloat(input),isFinite(input)?(input=Math.floor(input)+roundUpToNextTenth(input-Math.floor(input)),max=parseFloat(max),isFinite(max)&&input>max?max+"%":parseFloat($filter("number")(input,input%1==0?0:1))+"%"):"0%"}}])}(),function(){"use strict";angular.module("angular-filters").filter("replace",[function(){function isString(input){return"string"==typeof input||input instanceof String}return function(input,searchValue,newValue){return isString(input)&&isString(searchValue)&&isString(newValue)?input.split(searchValue).join(newValue):input}}])}(),function(){"use strict";angular.module("angular-filters").filter("reverse",[function(){function reverseArray(items){return items.slice().reverse()}function reverseString(input){for(var result="",i=0;i<input.length;i++)result=input.charAt(i)+result;return result}return function(input){return Array.isArray(input)?reverseArray(input):"string"==typeof input||input instanceof String?reverseString(input):input}}])}(),function(){"use strict";angular.module("angular-filters").filter("toSpacedWords",[function(){function toSpacedWords(input){return input.match(/\d+|__/g)||(input=(input=input.replace(/([a-z])([A-Z])/g,"$1 $2")).length>1?input.charAt(0).toUpperCase()+input.slice(1):input),input}return function(input){return input&&("string"==typeof input||input instanceof String)?toSpacedWords(input):input}}])}(),
/**
 * Restful Resources service for AngularJS apps
 * @version v1.6.1 - 2017-01-06 * @link https://github.com/mgonto/restangular
 * @author Martin Gontovnikas <martin@gon.to>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
function(root,factory){"function"==typeof define&&define.amd?define(["lodash","angular"],factory):"object"==typeof module&&module.exports?module.exports=factory(require("lodash"),require("angular")):factory(root._,root.angular)}(this,(function(_,angular){var restangular=angular.module("restangular",[]);return restangular.provider("Restangular",(function(){var Configurer={init:function(object,config){object.configuration=config;var safeMethods=["get","head","options","trace","getlist"];config.isSafe=function(operation){return _.includes(safeMethods,operation.toLowerCase())};var absolutePattern=/^https?:\/\//i;config.isAbsoluteUrl=function(string){return _.isUndefined(config.absoluteUrl)||_.isNull(config.absoluteUrl)?string&&absolutePattern.test(string):config.absoluteUrl},config.absoluteUrl=!!_.isUndefined(config.absoluteUrl)||config.absoluteUrl,object.setSelfLinkAbsoluteUrl=function(value){config.absoluteUrl=value},config.baseUrl=_.isUndefined(config.baseUrl)?"":config.baseUrl,object.setBaseUrl=function(newBaseUrl){return config.baseUrl=/\/$/.test(newBaseUrl)?newBaseUrl.substring(0,newBaseUrl.length-1):newBaseUrl,this},config.extraFields=config.extraFields||[],object.setExtraFields=function(newExtraFields){return config.extraFields=newExtraFields,this},config.defaultHttpFields=config.defaultHttpFields||{},object.setDefaultHttpFields=function(values){return config.defaultHttpFields=values,this},config.plainByDefault=config.plainByDefault||!1,object.setPlainByDefault=function(value){return config.plainByDefault=!0===value,this},config.withHttpValues=function(httpLocalConfig,obj){return _.defaults(obj,httpLocalConfig,config.defaultHttpFields)},config.encodeIds=!!_.isUndefined(config.encodeIds)||config.encodeIds,object.setEncodeIds=function(encode){config.encodeIds=encode},config.defaultRequestParams=config.defaultRequestParams||{get:{},post:{},put:{},remove:{},common:{}},object.setDefaultRequestParams=function(param1,param2){var methods=[],params=param2||param1;return _.isUndefined(param2)?methods.push("common"):_.isArray(param1)?methods=param1:methods.push(param1),_.each(methods,(function(method){config.defaultRequestParams[method]=params})),this},object.requestParams=config.defaultRequestParams,config.defaultHeaders=config.defaultHeaders||{},object.setDefaultHeaders=function(headers){return config.defaultHeaders=headers,object.defaultHeaders=config.defaultHeaders,this},object.defaultHeaders=config.defaultHeaders,config.methodOverriders=config.methodOverriders||[],object.setMethodOverriders=function(values){var overriders=_.extend([],values);return config.isOverridenMethod("delete",overriders)&&overriders.push("remove"),config.methodOverriders=overriders,this},config.jsonp=!_.isUndefined(config.jsonp)&&config.jsonp,object.setJsonp=function(active){config.jsonp=active},config.isOverridenMethod=function(method,values){var search=values||config.methodOverriders;return!_.isUndefined(_.find(search,(function(one){return one.toLowerCase()===method.toLowerCase()})))},config.urlCreator=config.urlCreator||"path",object.setUrlCreator=function(name){if(!_.has(config.urlCreatorFactory,name))throw new Error("URL Path selected isn't valid");return config.urlCreator=name,this},config.restangularFields=config.restangularFields||{id:"id",route:"route",parentResource:"parentResource",restangularCollection:"restangularCollection",cannonicalId:"__cannonicalId",etag:"restangularEtag",selfLink:"href",get:"get",getList:"getList",put:"put",post:"post",remove:"remove",head:"head",trace:"trace",options:"options",patch:"patch",getRestangularUrl:"getRestangularUrl",getRequestedUrl:"getRequestedUrl",putElement:"putElement",addRestangularMethod:"addRestangularMethod",getParentList:"getParentList",clone:"clone",ids:"ids",httpConfig:"_$httpConfig",reqParams:"reqParams",one:"one",all:"all",several:"several",oneUrl:"oneUrl",allUrl:"allUrl",customPUT:"customPUT",customPATCH:"customPATCH",customPOST:"customPOST",customDELETE:"customDELETE",customGET:"customGET",customGETLIST:"customGETLIST",customOperation:"customOperation",doPUT:"doPUT",doPATCH:"doPATCH",doPOST:"doPOST",doDELETE:"doDELETE",doGET:"doGET",doGETLIST:"doGETLIST",fromServer:"fromServer",withConfig:"withConfig",withHttpConfig:"withHttpConfig",singleOne:"singleOne",plain:"plain",save:"save",restangularized:"restangularized"},object.setRestangularFields=function(resFields){return config.restangularFields=_.extend(config.restangularFields,resFields),this},config.isRestangularized=function(obj){return!!obj[config.restangularFields.restangularized]},config.setFieldToElem=function(field,elem,value){var properties=field.split("."),idValue=elem;return _.each(_.initial(properties),(function(prop){idValue[prop]={},idValue=idValue[prop]})),idValue[_.last(properties)]=value,this},config.getFieldFromElem=function(field,elem){var properties=field.split("."),idValue=elem;return _.each(properties,(function(prop){idValue&&(idValue=idValue[prop])})),angular.copy(idValue)},config.setIdToElem=function(elem,id){return config.setFieldToElem(config.restangularFields.id,elem,id),this},config.getIdFromElem=function(elem){return config.getFieldFromElem(config.restangularFields.id,elem)},config.isValidId=function(elemId){return""!==elemId&&!_.isUndefined(elemId)&&!_.isNull(elemId)},config.setUrlToElem=function(elem,url){return config.setFieldToElem(config.restangularFields.selfLink,elem,url),this},config.getUrlFromElem=function(elem){return config.getFieldFromElem(config.restangularFields.selfLink,elem)},config.useCannonicalId=!_.isUndefined(config.useCannonicalId)&&config.useCannonicalId,object.setUseCannonicalId=function(value){return config.useCannonicalId=value,this},config.getCannonicalIdFromElem=function(elem){var cannonicalId=elem[config.restangularFields.cannonicalId],actualId;return config.isValidId(cannonicalId)?cannonicalId:config.getIdFromElem(elem)},config.responseInterceptors=config.responseInterceptors||[],config.defaultResponseInterceptor=function(data){return data},config.responseExtractor=function(data,operation,what,url,response,deferred){var interceptors=angular.copy(config.responseInterceptors);interceptors.push(config.defaultResponseInterceptor);var theData=data;return _.each(interceptors,(function(interceptor){theData=interceptor(theData,operation,what,url,response,deferred)})),theData},object.addResponseInterceptor=function(extractor){return config.responseInterceptors.push(extractor),this},config.errorInterceptors=config.errorInterceptors||[],object.addErrorInterceptor=function(interceptor){return config.errorInterceptors.push(interceptor),this},object.setResponseInterceptor=object.addResponseInterceptor,object.setResponseExtractor=object.addResponseInterceptor,object.setErrorInterceptor=object.addErrorInterceptor,config.requestInterceptors=config.requestInterceptors||[],config.defaultInterceptor=function(element,operation,path,url,headers,params,httpConfig){return{element:element,headers:headers,params:params,httpConfig:httpConfig}},config.fullRequestInterceptor=function(element,operation,path,url,headers,params,httpConfig){var interceptors=angular.copy(config.requestInterceptors),defaultRequest=config.defaultInterceptor(element,operation,path,url,headers,params,httpConfig);return _.reduce(interceptors,(function(request,interceptor){return _.extend(request,interceptor(request.element,operation,path,url,request.headers,request.params,request.httpConfig))}),defaultRequest)},object.addRequestInterceptor=function(interceptor){return config.requestInterceptors.push((function(elem,operation,path,url,headers,params,httpConfig){return{headers:headers,params:params,element:interceptor(elem,operation,path,url),httpConfig:httpConfig}})),this},object.setRequestInterceptor=object.addRequestInterceptor,object.addFullRequestInterceptor=function(interceptor){return config.requestInterceptors.push(interceptor),this},object.setFullRequestInterceptor=object.addFullRequestInterceptor,config.onBeforeElemRestangularized=config.onBeforeElemRestangularized||function(elem){return elem},object.setOnBeforeElemRestangularized=function(post){return config.onBeforeElemRestangularized=post,this},object.setRestangularizePromiseInterceptor=function(interceptor){return config.restangularizePromiseInterceptor=interceptor,this},config.onElemRestangularized=config.onElemRestangularized||function(elem){return elem},object.setOnElemRestangularized=function(post){return config.onElemRestangularized=post,this},config.shouldSaveParent=config.shouldSaveParent||function(){return!0},object.setParentless=function(values){return _.isArray(values)?config.shouldSaveParent=function(route){return!_.includes(values,route)}:_.isBoolean(values)&&(config.shouldSaveParent=function(){return!values}),this},config.suffix=_.isUndefined(config.suffix)?null:config.suffix,object.setRequestSuffix=function(newSuffix){return config.suffix=newSuffix,this},config.transformers=config.transformers||{},config.matchTransformers=config.matchTransformers||[],object.addElementTransformer=function(type,secondArg,thirdArg){var isCollection=null,transformer=null;2===arguments.length?transformer=secondArg:(transformer=thirdArg,isCollection=secondArg);var transformerFn=function(coll,elem){return _.isNull(isCollection)||coll===isCollection?transformer(elem):elem};return _.isRegExp(type)?config.matchTransformers.push({regexp:type,transformer:transformerFn}):(config.transformers[type]||(config.transformers[type]=[]),config.transformers[type].push(transformerFn)),object},object.extendCollection=function(route,fn){return object.addElementTransformer(route,!0,fn)},object.extendModel=function(route,fn){return object.addElementTransformer(route,!1,fn)},config.transformElem=function(elem,isCollection,route,Restangular,force){if(!force&&!config.transformLocalElements&&!elem[config.restangularFields.fromServer])return elem;var changedElem=elem,matchTransformers=config.matchTransformers;matchTransformers&&_.each(matchTransformers,(function(transformer){transformer.regexp.test(route)&&(changedElem=transformer.transformer(isCollection,changedElem))}));var typeTransformers=config.transformers[route];return typeTransformers&&_.each(typeTransformers,(function(transformer){changedElem=transformer(isCollection,changedElem)})),config.onElemRestangularized(changedElem,isCollection,route,Restangular)},config.transformLocalElements=!_.isUndefined(config.transformLocalElements)&&config.transformLocalElements,object.setTransformOnlyServerElements=function(active){config.transformLocalElements=!active},config.fullResponse=!_.isUndefined(config.fullResponse)&&config.fullResponse,object.setFullResponse=function(full){return config.fullResponse=full,this},config.urlCreatorFactory={};var BaseCreator=function(){};function RestangularResource(config,$http,url,configurer){var resource={};return _.each(_.keys(configurer),(function(key){var value=configurer[key];value.params=_.extend({},value.params,config.defaultRequestParams[value.method.toLowerCase()]),_.isEmpty(value.params)&&delete value.params,config.isSafe(value.method)?resource[key]=function(){return $http(_.extend(value,{url:url}))}:resource[key]=function(data){return $http(_.extend(value,{url:url,data:data}))}})),resource}BaseCreator.prototype.setConfig=function(config){return this.config=config,this},BaseCreator.prototype.parentsArray=function(current){for(var parents=[];current;)parents.push(current),current=current[this.config.restangularFields.parentResource];return parents.reverse()},BaseCreator.prototype.resource=function(current,$http,localHttpConfig,callHeaders,callParams,what,etag,operation){var params=_.defaults(callParams||{},this.config.defaultRequestParams.common),headers=_.defaults(callHeaders||{},this.config.defaultHeaders);etag&&(config.isSafe(operation)?headers["If-None-Match"]=etag:headers["If-Match"]=etag);var url=this.base(current);if(what||0===what){var add="";/\/$/.test(url)||(add+="/"),url+=add+=what}return this.config.suffix&&-1===url.indexOf(this.config.suffix,url.length-this.config.suffix.length)&&!this.config.getUrlFromElem(current)&&(url+=this.config.suffix),current[this.config.restangularFields.httpConfig]=void 0,RestangularResource(this.config,$http,url,{getList:this.config.withHttpValues(localHttpConfig,{method:"GET",params:params,headers:headers}),get:this.config.withHttpValues(localHttpConfig,{method:"GET",params:params,headers:headers}),jsonp:this.config.withHttpValues(localHttpConfig,{method:"jsonp",params:params,headers:headers}),put:this.config.withHttpValues(localHttpConfig,{method:"PUT",params:params,headers:headers}),post:this.config.withHttpValues(localHttpConfig,{method:"POST",params:params,headers:headers}),remove:this.config.withHttpValues(localHttpConfig,{method:"DELETE",params:params,headers:headers}),head:this.config.withHttpValues(localHttpConfig,{method:"HEAD",params:params,headers:headers}),trace:this.config.withHttpValues(localHttpConfig,{method:"TRACE",params:params,headers:headers}),options:this.config.withHttpValues(localHttpConfig,{method:"OPTIONS",params:params,headers:headers}),patch:this.config.withHttpValues(localHttpConfig,{method:"PATCH",params:params,headers:headers})})};var Path=function(){};(Path.prototype=new BaseCreator).normalizeUrl=function(url){var parts=/((?:http[s]?:)?\/\/)?(.*)?/.exec(url);return parts[2]=parts[2].replace(/[\\\/]+/g,"/"),void 0!==parts[1]?parts[1]+parts[2]:parts[2]},Path.prototype.base=function(current){var __this=this;return _.reduce(this.parentsArray(current),(function(acum,elem){var elemUrl,elemSelfLink=__this.config.getUrlFromElem(elem);if(elemSelfLink){if(__this.config.isAbsoluteUrl(elemSelfLink))return elemSelfLink;elemUrl=elemSelfLink}else if(elemUrl=elem[__this.config.restangularFields.route],elem[__this.config.restangularFields.restangularCollection]){var ids=elem[__this.config.restangularFields.ids];ids&&(elemUrl+="/"+ids.join(","))}else{var elemId;elemId=__this.config.useCannonicalId?__this.config.getCannonicalIdFromElem(elem):__this.config.getIdFromElem(elem),config.isValidId(elemId)&&!elem.singleOne&&(elemUrl+="/"+(__this.config.encodeIds?encodeURIComponent(elemId):elemId))}return acum=acum.replace(/\/$/,"")+"/"+elemUrl,__this.normalizeUrl(acum)}),this.config.baseUrl)},Path.prototype.fetchUrl=function(current,what){var baseUrl=this.base(current);return what&&(baseUrl+="/"+what),baseUrl},Path.prototype.fetchRequestedUrl=function(current,what){var url=this.fetchUrl(current,what),params=current[config.restangularFields.reqParams];function sortedKeys(obj){var keys=[];for(var key in obj)obj.hasOwnProperty(key)&&keys.push(key);return keys.sort()}function forEachSorted(obj,iterator,context){for(var keys=sortedKeys(obj),i=0;i<keys.length;i++)iterator.call(context,obj[keys[i]],keys[i]);return keys}function encodeUriQuery(val,pctEncodeSpaces){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,pctEncodeSpaces?"%20":"+")}if(!params)return url+(this.config.suffix||"");var parts=[];return forEachSorted(params,(function(value,key){null!=value&&(angular.isArray(value)||(value=[value]),angular.forEach(value,(function(v){angular.isObject(v)&&(v=angular.toJson(v)),parts.push(encodeUriQuery(key)+"="+encodeUriQuery(v))})))})),url+(this.config.suffix||"")+(-1===url.indexOf("?")?"?":"&")+parts.join("&")},config.urlCreatorFactory.path=Path}},globalConfiguration={};Configurer.init(this,globalConfiguration),this.$get=["$http","$q",function($http,$q){function createServiceForConfiguration(config){var service={},urlHandler=new config.urlCreatorFactory[config.urlCreator];function restangularizeBase(parent,elem,route,reqParams,fromServer){if(elem[config.restangularFields.route]=route,elem[config.restangularFields.getRestangularUrl]=_.bind(urlHandler.fetchUrl,urlHandler,elem),elem[config.restangularFields.getRequestedUrl]=_.bind(urlHandler.fetchRequestedUrl,urlHandler,elem),elem[config.restangularFields.addRestangularMethod]=_.bind(addRestangularMethodFunction,elem),elem[config.restangularFields.clone]=_.bind(copyRestangularizedElement,elem,elem),elem[config.restangularFields.reqParams]=_.isEmpty(reqParams)?null:reqParams,elem[config.restangularFields.withHttpConfig]=_.bind(withHttpConfig,elem),elem[config.restangularFields.plain]=_.bind(stripRestangular,elem,elem),elem[config.restangularFields.restangularized]=!0,elem[config.restangularFields.one]=_.bind(one,elem,elem),elem[config.restangularFields.all]=_.bind(all,elem,elem),elem[config.restangularFields.several]=_.bind(several,elem,elem),elem[config.restangularFields.oneUrl]=_.bind(oneUrl,elem,elem),elem[config.restangularFields.allUrl]=_.bind(allUrl,elem,elem),elem[config.restangularFields.fromServer]=!!fromServer,parent&&config.shouldSaveParent(route)){var parentId=config.getIdFromElem(parent),parentUrl=config.getUrlFromElem(parent),restangularFieldsForParent=_.union(_.values(_.pick(config.restangularFields,["route","singleOne","parentResource"])),config.extraFields),parentResource=_.pick(parent,restangularFieldsForParent);config.isValidId(parentId)&&config.setIdToElem(parentResource,parentId,route),config.isValidId(parentUrl)&&config.setUrlToElem(parentResource,parentUrl,route),elem[config.restangularFields.parentResource]=parentResource}else elem[config.restangularFields.parentResource]=null;return elem}function one(parent,route,id,singleOne){var error;if(_.isNumber(route)||_.isNumber(parent))throw error="You're creating a Restangular entity with the number ",error+="instead of the route or the parent. For example, you can't call .one(12).",new Error(error);if(_.isUndefined(route))throw error="You're creating a Restangular entity either without the path. ",error+="For example you can't call .one(). Please check if your arguments are valid.",new Error(error);var elem={};return config.setIdToElem(elem,id,route),config.setFieldToElem(config.restangularFields.singleOne,elem,singleOne),restangularizeElem(parent,elem,route,!1)}function all(parent,route){return restangularizeCollection(parent,[],route,!1)}function several(parent,route){var collection=[];return collection[config.restangularFields.ids]=Array.prototype.splice.call(arguments,2),restangularizeCollection(parent,collection,route,!1)}function oneUrl(parent,route,url){if(!route)throw new Error("Route is mandatory when creating new Restangular objects.");var elem={};return config.setUrlToElem(elem,url,route),restangularizeElem(parent,elem,route,!1)}function allUrl(parent,route,url){if(!route)throw new Error("Route is mandatory when creating new Restangular objects.");var elem={};return config.setUrlToElem(elem,url,route),restangularizeCollection(parent,elem,route,!1)}function restangularizePromise(promise,isCollection,valueToFill){return promise.call=_.bind(promiseCall,promise),promise.get=_.bind(promiseGet,promise),promise[config.restangularFields.restangularCollection]=isCollection,isCollection&&(promise.push=_.bind(promiseCall,promise,"push")),promise.$object=valueToFill,config.restangularizePromiseInterceptor&&config.restangularizePromiseInterceptor(promise),promise}function promiseCall(method){var deferred=$q.defer(),callArgs=arguments,filledValue={};return this.then((function(val){var params=Array.prototype.slice.call(callArgs,1),func;val[method].apply(val,params),filledValue=val,deferred.resolve(val)})),restangularizePromise(deferred.promise,this[config.restangularFields.restangularCollection],filledValue)}function promiseGet(what){var deferred=$q.defer(),filledValue={};return this.then((function(val){filledValue=val[what],deferred.resolve(filledValue)})),restangularizePromise(deferred.promise,this[config.restangularFields.restangularCollection],filledValue)}function resolvePromise(deferred,response,data,filledValue){if(_.extend(filledValue,data),config.fullResponse)return deferred.resolve(_.extend(response,{data:data}));deferred.resolve(data)}function stripRestangular(elem){if(_.isArray(elem)){var array=[];return _.each(elem,(function(value){array.push(config.isRestangularized(value)?stripRestangular(value):value)})),array}return _.omit(elem,_.values(_.omit(config.restangularFields,"id")))}function addCustomOperation(elem){elem[config.restangularFields.customOperation]=_.bind(customFunction,elem);var requestMethods={get:customFunction,delete:customFunction};_.each(["put","patch","post"],(function(name){requestMethods[name]=function(operation,elem,path,params,headers){return _.bind(customFunction,this)(operation,path,params,headers,elem)}})),_.each(requestMethods,(function(requestFunc,name){var callOperation="delete"===name?"remove":name;_.each(["do","custom"],(function(alias){elem[alias+name.toUpperCase()]=_.bind(requestFunc,elem,callOperation)}))})),elem[config.restangularFields.customGETLIST]=_.bind(fetchFunction,elem),elem[config.restangularFields.doGETLIST]=elem[config.restangularFields.customGETLIST]}function copyRestangularizedElement(element){var copiedElement=angular.copy(element);return _.isArray(element)?restangularizeCollection(element[config.restangularFields.parentResource],copiedElement,element[config.restangularFields.route],element[config.restangularFields.fromServer],element[config.restangularFields.reqParams]):restangularizeElem(element[config.restangularFields.parentResource],copiedElement,element[config.restangularFields.route],element[config.restangularFields.fromServer],element[config.restangularFields.restangularCollection],element[config.restangularFields.reqParams])}function restangularizeElem(parent,element,route,fromServer,collection,reqParams){var elem,localElem=restangularizeBase(parent,config.onBeforeElemRestangularized(element,!1,route),route,reqParams,fromServer);return config.useCannonicalId&&(localElem[config.restangularFields.cannonicalId]=config.getIdFromElem(localElem)),collection&&(localElem[config.restangularFields.getParentList]=function(){return collection}),localElem[config.restangularFields.restangularCollection]=!1,localElem[config.restangularFields.get]=_.bind(getFunction,localElem),localElem[config.restangularFields.getList]=_.bind(fetchFunction,localElem),localElem[config.restangularFields.put]=_.bind(putFunction,localElem),localElem[config.restangularFields.post]=_.bind(postFunction,localElem),localElem[config.restangularFields.remove]=_.bind(deleteFunction,localElem),localElem[config.restangularFields.head]=_.bind(headFunction,localElem),localElem[config.restangularFields.trace]=_.bind(traceFunction,localElem),localElem[config.restangularFields.options]=_.bind(optionsFunction,localElem),localElem[config.restangularFields.patch]=_.bind(patchFunction,localElem),localElem[config.restangularFields.save]=_.bind(save,localElem),addCustomOperation(localElem),config.transformElem(localElem,!1,route,service,!0)}function restangularizeCollection(parent,element,route,fromServer,reqParams){var elem,localElem=restangularizeBase(parent,config.onBeforeElemRestangularized(element,!0,route),route,reqParams,fromServer);return localElem[config.restangularFields.restangularCollection]=!0,localElem[config.restangularFields.post]=_.bind(postFunction,localElem,null),localElem[config.restangularFields.remove]=_.bind(deleteFunction,localElem),localElem[config.restangularFields.head]=_.bind(headFunction,localElem),localElem[config.restangularFields.trace]=_.bind(traceFunction,localElem),localElem[config.restangularFields.putElement]=_.bind(putElementFunction,localElem),localElem[config.restangularFields.options]=_.bind(optionsFunction,localElem),localElem[config.restangularFields.patch]=_.bind(patchFunction,localElem),localElem[config.restangularFields.get]=_.bind(getById,localElem),localElem[config.restangularFields.getList]=_.bind(fetchFunction,localElem,null),addCustomOperation(localElem),config.transformElem(localElem,!0,route,service,!0)}function restangularizeCollectionAndElements(parent,element,route,fromServer){var collection=restangularizeCollection(parent,element,route,fromServer);return _.each(collection,(function(elem){elem&&restangularizeElem(parent,elem,route,fromServer)})),collection}function getById(id,reqParams,headers){return this.customGET(id.toString(),reqParams,headers)}function putElementFunction(idx,params,headers){var __this=this,elemToPut=this[idx],deferred=$q.defer(),filledArray=[];return filledArray=config.transformElem(filledArray,!0,elemToPut[config.restangularFields.route],service),elemToPut.put(params,headers).then((function(serverElem){var newArray=copyRestangularizedElement(__this);newArray[idx]=serverElem,filledArray=newArray,deferred.resolve(newArray)}),(function(response){deferred.reject(response)})),restangularizePromise(deferred.promise,!0,filledArray)}function parseResponse(resData,operation,route,fetchUrl,response,deferred){var data=config.responseExtractor(resData,operation,route,fetchUrl,response,deferred),etag=response.headers("ETag");return data&&etag&&(data[config.restangularFields.etag]=etag),data}function fetchFunction(what,reqParams,headers){var __this=this,deferred=$q.defer(),operation="getList",url=urlHandler.fetchUrl(this,what),whatFetched=what||__this[config.restangularFields.route],request=config.fullRequestInterceptor(null,"getList",whatFetched,url,headers||{},reqParams||{},this[config.restangularFields.httpConfig]||{}),filledArray=[];filledArray=config.transformElem(filledArray,!0,whatFetched,service);var method="getList";config.jsonp&&(method="jsonp");var okCallback=function(response){var resData=response.data,fullParams=response.config.params,data=parseResponse(resData,"getList",whatFetched,url,response,deferred);if((_.isUndefined(data)||""===data)&&(data=[]),!_.isArray(data))throw new Error("Response for getList SHOULD be an array and not an object or something else");if(!0===config.plainByDefault)return resolvePromise(deferred,response,data,filledArray);var processedData=_.map(data,(function(elem){return __this[config.restangularFields.restangularCollection]?restangularizeElem(__this[config.restangularFields.parentResource],elem,__this[config.restangularFields.route],!0,data):restangularizeElem(__this,elem,what,!0,data)}));processedData=_.extend(data,processedData),__this[config.restangularFields.restangularCollection]?resolvePromise(deferred,response,restangularizeCollection(__this[config.restangularFields.parentResource],processedData,__this[config.restangularFields.route],!0,fullParams),filledArray):resolvePromise(deferred,response,restangularizeCollection(__this,processedData,what,!0,fullParams),filledArray)};return urlHandler.resource(this,$http,request.httpConfig,request.headers,request.params,what,this[config.restangularFields.etag],"getList")[method]().then(okCallback,(function error(response){304===response.status&&__this[config.restangularFields.restangularCollection]?resolvePromise(deferred,response,__this,filledArray):_.every(config.errorInterceptors,(function(cb){return!1!==cb(response,deferred,okCallback)}))&&deferred.reject(response)})),restangularizePromise(deferred.promise,!0,filledArray)}function withHttpConfig(httpConfig){return this[config.restangularFields.httpConfig]=httpConfig,this}function save(params,headers){return this[config.restangularFields.fromServer]?this[config.restangularFields.put](params,headers):_.bind(elemFunction,this)("post",void 0,params,void 0,headers)}function elemFunction(operation,what,params,obj,headers){var __this=this,deferred=$q.defer(),resParams=params||{},route=what||this[config.restangularFields.route],fetchUrl=urlHandler.fetchUrl(this,what),callObj=obj||this,etag=callObj[config.restangularFields.etag]||("post"!==operation?this[config.restangularFields.etag]:null);_.isObject(callObj)&&config.isRestangularized(callObj)&&(callObj=stripRestangular(callObj));var request=config.fullRequestInterceptor(callObj,operation,route,fetchUrl,headers||{},resParams||{},this[config.restangularFields.httpConfig]||{}),filledObject={};filledObject=config.transformElem(filledObject,!1,route,service);var okCallback=function(response){var resData=response.data,fullParams=response.config.params,elem=parseResponse(resData,operation,route,fetchUrl,response,deferred);if(null!=elem&&""!==elem){var data;if(!0===config.plainByDefault)return resolvePromise(deferred,response,elem,filledObject);"post"!==operation||__this[config.restangularFields.restangularCollection]?((data=restangularizeElem(__this[config.restangularFields.parentResource],elem,__this[config.restangularFields.route],!0,null,fullParams))[config.restangularFields.singleOne]=__this[config.restangularFields.singleOne],resolvePromise(deferred,response,data,filledObject)):(data=restangularizeElem(__this[config.restangularFields.parentResource],elem,route,!0,null,fullParams),resolvePromise(deferred,response,data,filledObject))}else resolvePromise(deferred,response,void 0,filledObject)},errorCallback=function(response){304===response.status&&config.isSafe(operation)?resolvePromise(deferred,response,__this,filledObject):_.every(config.errorInterceptors,(function(cb){return!1!==cb(response,deferred,okCallback)}))&&deferred.reject(response)},callOperation=operation,callHeaders=_.extend({},request.headers),isOverrideOperation=config.isOverridenMethod(operation);return isOverrideOperation?(callOperation="post",callHeaders=_.extend(callHeaders,{"X-HTTP-Method-Override":"remove"===operation?"DELETE":operation.toUpperCase()})):config.jsonp&&"get"===callOperation&&(callOperation="jsonp"),config.isSafe(operation)?isOverrideOperation?urlHandler.resource(this,$http,request.httpConfig,callHeaders,request.params,what,etag,callOperation)[callOperation]({}).then(okCallback,errorCallback):urlHandler.resource(this,$http,request.httpConfig,callHeaders,request.params,what,etag,callOperation)[callOperation]().then(okCallback,errorCallback):urlHandler.resource(this,$http,request.httpConfig,callHeaders,request.params,what,etag,callOperation)[callOperation](request.element).then(okCallback,errorCallback),restangularizePromise(deferred.promise,!1,filledObject)}function getFunction(params,headers){return _.bind(elemFunction,this)("get",void 0,params,void 0,headers)}function deleteFunction(params,headers){return _.bind(elemFunction,this)("remove",void 0,params,void 0,headers)}function putFunction(params,headers){return _.bind(elemFunction,this)("put",void 0,params,void 0,headers)}function postFunction(what,elem,params,headers){return _.bind(elemFunction,this)("post",what,params,elem,headers)}function headFunction(params,headers){return _.bind(elemFunction,this)("head",void 0,params,void 0,headers)}function traceFunction(params,headers){return _.bind(elemFunction,this)("trace",void 0,params,void 0,headers)}function optionsFunction(params,headers){return _.bind(elemFunction,this)("options",void 0,params,void 0,headers)}function patchFunction(elem,params,headers){return _.bind(elemFunction,this)("patch",void 0,params,elem,headers)}function customFunction(operation,path,params,headers,elem){return _.bind(elemFunction,this)(operation,path,params,elem,headers)}function addRestangularMethodFunction(name,operation,path,defaultParams,defaultHeaders,defaultElem){var bindedFunction;bindedFunction="getList"===operation?_.bind(fetchFunction,this,path):_.bind(customFunction,this,operation,path);var createdFunction=function(params,headers,elem){var callParams=_.defaults({params:params,headers:headers,elem:elem},{params:defaultParams,headers:defaultHeaders,elem:defaultElem});return bindedFunction(callParams.params,callParams.headers,callParams.elem)};config.isSafe(operation)?this[name]=createdFunction:this[name]=function(elem,params,headers){return createdFunction(params,headers,elem)}}function withConfigurationFunction(configurer){var newConfig=angular.copy(_.omit(config,"configuration"));return Configurer.init(newConfig,newConfig),configurer(newConfig),createServiceForConfiguration(newConfig)}function toService(route,parent){var knownCollectionMethods=_.values(config.restangularFields),serv={},collection=(parent||service).all(route);for(var prop in serv.one=_.bind(one,parent||service,parent,route),serv.post=_.bind(collection.post,collection),serv.getList=_.bind(collection.getList,collection),serv.withHttpConfig=_.bind(collection.withHttpConfig,collection),serv.get=_.bind(collection.get,collection),collection)collection.hasOwnProperty(prop)&&_.isFunction(collection[prop])&&!_.includes(knownCollectionMethods,prop)&&(serv[prop]=_.bind(collection[prop],collection));return serv}return urlHandler.setConfig(config),Configurer.init(service,config),service.copy=_.bind(copyRestangularizedElement,service),service.service=_.bind(toService,service),service.withConfig=_.bind(withConfigurationFunction,service),service.one=_.bind(one,service,null),service.all=_.bind(all,service,null),service.several=_.bind(several,service,null),service.oneUrl=_.bind(oneUrl,service,null),service.allUrl=_.bind(allUrl,service,null),service.stripRestangular=_.bind(stripRestangular,service),service.restangularizeElement=_.bind(restangularizeElem,service),service.restangularizeCollection=_.bind(restangularizeCollectionAndElements,service),service}return createServiceForConfiguration(globalConfiguration)}]})),restangular.name})),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):global.satellizer=factory()}(this,(function(){"use strict";var Config=function(){function Config(){this.baseUrl="/",this.loginUrl="/auth/login",this.signupUrl="/auth/signup",this.unlinkUrl="/auth/unlink/",this.tokenName="token",this.tokenPrefix="satellizer",this.tokenHeader="Authorization",this.tokenType="Bearer",this.storageType="localStorage",this.tokenRoot=null,this.withCredentials=!1,this.providers={facebook:{name:"facebook",url:"/auth/facebook",authorizationEndpoint:"https://www.facebook.com/v2.5/dialog/oauth",redirectUri:window.location.origin+"/",requiredUrlParams:["display","scope"],scope:["email"],scopeDelimiter:",",display:"popup",oauthType:"2.0",popupOptions:{width:580,height:400}},google:{name:"google",url:"/auth/google",authorizationEndpoint:"https://accounts.google.com/o/oauth2/auth",redirectUri:window.location.origin,requiredUrlParams:["scope"],optionalUrlParams:["display","state"],scope:["profile","email"],scopePrefix:"openid",scopeDelimiter:" ",display:"popup",oauthType:"2.0",popupOptions:{width:452,height:633},state:function(){return encodeURIComponent(Math.random().toString(36).substr(2))}},github:{name:"github",url:"/auth/github",authorizationEndpoint:"https://github.com/login/oauth/authorize",redirectUri:window.location.origin,optionalUrlParams:["scope"],scope:["user:email"],scopeDelimiter:" ",oauthType:"2.0",popupOptions:{width:1020,height:618}},instagram:{name:"instagram",url:"/auth/instagram",authorizationEndpoint:"https://api.instagram.com/oauth/authorize",redirectUri:window.location.origin,requiredUrlParams:["scope"],scope:["basic"],scopeDelimiter:"+",oauthType:"2.0"},linkedin:{name:"linkedin",url:"/auth/linkedin",authorizationEndpoint:"https://www.linkedin.com/uas/oauth2/authorization",redirectUri:window.location.origin,requiredUrlParams:["state"],scope:["r_emailaddress"],scopeDelimiter:" ",state:"STATE",oauthType:"2.0",popupOptions:{width:527,height:582}},twitter:{name:"twitter",url:"/auth/twitter",authorizationEndpoint:"https://api.twitter.com/oauth/authenticate",redirectUri:window.location.origin,oauthType:"1.0",popupOptions:{width:495,height:645}},twitch:{name:"twitch",url:"/auth/twitch",authorizationEndpoint:"https://api.twitch.tv/kraken/oauth2/authorize",redirectUri:window.location.origin,requiredUrlParams:["scope"],scope:["user_read"],scopeDelimiter:" ",display:"popup",oauthType:"2.0",popupOptions:{width:500,height:560}},live:{name:"live",url:"/auth/live",authorizationEndpoint:"https://login.live.com/oauth20_authorize.srf",redirectUri:window.location.origin,requiredUrlParams:["display","scope"],scope:["wl.emails"],scopeDelimiter:" ",display:"popup",oauthType:"2.0",popupOptions:{width:500,height:560}},yahoo:{name:"yahoo",url:"/auth/yahoo",authorizationEndpoint:"https://api.login.yahoo.com/oauth2/request_auth",redirectUri:window.location.origin,scope:[],scopeDelimiter:",",oauthType:"2.0",popupOptions:{width:559,height:519}},bitbucket:{name:"bitbucket",url:"/auth/bitbucket",authorizationEndpoint:"https://bitbucket.org/site/oauth2/authorize",redirectUri:window.location.origin+"/",requiredUrlParams:["scope"],scope:["email"],scopeDelimiter:" ",oauthType:"2.0",popupOptions:{width:1028,height:529}},spotify:{name:"spotify",url:"/auth/spotify",authorizationEndpoint:"https://accounts.spotify.com/authorize",redirectUri:window.location.origin,optionalUrlParams:["state"],requiredUrlParams:["scope"],scope:["user-read-email"],scopePrefix:"",scopeDelimiter:",",oauthType:"2.0",popupOptions:{width:500,height:530},state:function(){return encodeURIComponent(Math.random().toString(36).substr(2))}}},this.httpInterceptor=function(){return!0}}return Object.defineProperty(Config,"getConstant",{get:function(){return new Config},enumerable:!0,configurable:!0}),Config}(),AuthProvider=function(){function AuthProvider(SatellizerConfig){this.SatellizerConfig=SatellizerConfig}return Object.defineProperty(AuthProvider.prototype,"baseUrl",{get:function(){return this.SatellizerConfig.baseUrl},set:function(value){this.SatellizerConfig.baseUrl=value},enumerable:!0,configurable:!0}),Object.defineProperty(AuthProvider.prototype,"loginUrl",{get:function(){return this.SatellizerConfig.loginUrl},set:function(value){this.SatellizerConfig.loginUrl=value},enumerable:!0,configurable:!0}),Object.defineProperty(AuthProvider.prototype,"signupUrl",{get:function(){return this.SatellizerConfig.signupUrl},set:function(value){this.SatellizerConfig.signupUrl=value},enumerable:!0,configurable:!0}),Object.defineProperty(AuthProvider.prototype,"unlinkUrl",{get:function(){return this.SatellizerConfig.unlinkUrl},set:function(value){this.SatellizerConfig.unlinkUrl=value},enumerable:!0,configurable:!0}),Object.defineProperty(AuthProvider.prototype,"tokenRoot",{get:function(){return this.SatellizerConfig.tokenRoot},set:function(value){this.SatellizerConfig.tokenRoot=value},enumerable:!0,configurable:!0}),Object.defineProperty(AuthProvider.prototype,"tokenName",{get:function(){return this.SatellizerConfig.tokenName},set:function(value){this.SatellizerConfig.tokenName=value},enumerable:!0,configurable:!0}),Object.defineProperty(AuthProvider.prototype,"tokenPrefix",{get:function(){return this.SatellizerConfig.tokenPrefix},set:function(value){this.SatellizerConfig.tokenPrefix=value},enumerable:!0,configurable:!0}),Object.defineProperty(AuthProvider.prototype,"tokenHeader",{get:function(){return this.SatellizerConfig.tokenHeader},set:function(value){this.SatellizerConfig.tokenHeader=value},enumerable:!0,configurable:!0}),Object.defineProperty(AuthProvider.prototype,"tokenType",{get:function(){return this.SatellizerConfig.tokenType},set:function(value){this.SatellizerConfig.tokenType=value},enumerable:!0,configurable:!0}),Object.defineProperty(AuthProvider.prototype,"withCredentials",{get:function(){return this.SatellizerConfig.withCredentials},set:function(value){this.SatellizerConfig.withCredentials=value},enumerable:!0,configurable:!0}),Object.defineProperty(AuthProvider.prototype,"storageType",{get:function(){return this.SatellizerConfig.storageType},set:function(value){this.SatellizerConfig.storageType=value},enumerable:!0,configurable:!0}),Object.defineProperty(AuthProvider.prototype,"httpInterceptor",{get:function(){return this.SatellizerConfig.httpInterceptor},set:function(value){this.SatellizerConfig.httpInterceptor="function"==typeof value?value:function(){return value}},enumerable:!0,configurable:!0}),AuthProvider.prototype.facebook=function(options){angular.extend(this.SatellizerConfig.providers.facebook,options)},AuthProvider.prototype.google=function(options){angular.extend(this.SatellizerConfig.providers.google,options)},AuthProvider.prototype.github=function(options){angular.extend(this.SatellizerConfig.providers.github,options)},AuthProvider.prototype.instagram=function(options){angular.extend(this.SatellizerConfig.providers.instagram,options)},AuthProvider.prototype.linkedin=function(options){angular.extend(this.SatellizerConfig.providers.linkedin,options)},AuthProvider.prototype.twitter=function(options){angular.extend(this.SatellizerConfig.providers.twitter,options)},AuthProvider.prototype.twitch=function(options){angular.extend(this.SatellizerConfig.providers.twitch,options)},AuthProvider.prototype.live=function(options){angular.extend(this.SatellizerConfig.providers.live,options)},AuthProvider.prototype.yahoo=function(options){angular.extend(this.SatellizerConfig.providers.yahoo,options)},AuthProvider.prototype.bitbucket=function(options){angular.extend(this.SatellizerConfig.providers.bitbucket,options)},AuthProvider.prototype.spotify=function(options){angular.extend(this.SatellizerConfig.providers.spotify,options)},AuthProvider.prototype.oauth1=function(options){this.SatellizerConfig.providers[options.name]=angular.extend(options,{oauthType:"1.0"})},AuthProvider.prototype.oauth2=function(options){this.SatellizerConfig.providers[options.name]=angular.extend(options,{oauthType:"2.0"})},AuthProvider.prototype.$get=function(SatellizerShared,SatellizerLocal,SatellizerOAuth){return{login:function(user,options){return SatellizerLocal.login(user,options)},signup:function(user,options){return SatellizerLocal.signup(user,options)},logout:function(){return SatellizerShared.logout()},authenticate:function(name,data){return SatellizerOAuth.authenticate(name,data)},link:function(name,data){return console.log(this),SatellizerOAuth.authenticate(name,data)},unlink:function(name,options){return SatellizerOAuth.unlink(name,options)},isAuthenticated:function(){return SatellizerShared.isAuthenticated()},getPayload:function(){return SatellizerShared.getPayload()},getToken:function(){return SatellizerShared.getToken()},setToken:function(token){return SatellizerShared.setToken({access_token:token})},removeToken:function(){return SatellizerShared.removeToken()},setStorageType:function(type){return SatellizerShared.setStorageType(type)}}},AuthProvider.$inject=["SatellizerConfig"],AuthProvider}();function joinUrl(baseUrl,url){return/^(?:[a-z]+:)?\/\//i.test(url)?url:function(str){return str.replace(/[\/]+/g,"/").replace(/\/\?/g,"?").replace(/\/\#/g,"#").replace(/\:\//g,"://")}([baseUrl,url].join("/"));var joined,normalize}function getFullUrlPath(location){var isHttps="https:"===location.protocol;return location.protocol+"//"+location.hostname+":"+(location.port||(isHttps?"443":"80"))+(/^\//.test(location.pathname)?location.pathname:"/"+location.pathname)}function parseQueryString(str){var obj={},key,value;return angular.forEach((str||"").split("&"),(function(keyValue){keyValue&&(value=keyValue.split("="),key=decodeURIComponent(value[0]),obj[key]=!angular.isDefined(value[1])||decodeURIComponent(value[1]))})),obj}function decodeBase64(str){var buffer;if("undefined"!=typeof module&&module.exports)try{buffer=require("buffer").Buffer}catch(err){}var fromCharCode=String.fromCharCode,re_btou=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),cb_btou=function(cccc){switch(cccc.length){case 4:var cp,offset=((7&cccc.charCodeAt(0))<<18|(63&cccc.charCodeAt(1))<<12|(63&cccc.charCodeAt(2))<<6|63&cccc.charCodeAt(3))-65536;return fromCharCode(55296+(offset>>>10))+fromCharCode(56320+(1023&offset));case 3:return fromCharCode((15&cccc.charCodeAt(0))<<12|(63&cccc.charCodeAt(1))<<6|63&cccc.charCodeAt(2));default:return fromCharCode((31&cccc.charCodeAt(0))<<6|63&cccc.charCodeAt(1))}},btou=function(b){return b.replace(re_btou,cb_btou)},_decode;return(buffer?function(a){return(a.constructor===buffer.constructor?a:new buffer(a,"base64")).toString()}:function(a){return btou(atob(a))})(String(str).replace(/[-_]/g,(function(m0){return"-"===m0?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,""))}AuthProvider.prototype.$get.$inject=["SatellizerShared","SatellizerLocal","SatellizerOAuth"];var Shared=function(){function Shared($q,$window,SatellizerConfig,SatellizerStorage){this.$q=$q,this.$window=$window,this.SatellizerConfig=SatellizerConfig,this.SatellizerStorage=SatellizerStorage;var _a=this.SatellizerConfig,tokenName=_a.tokenName,tokenPrefix=_a.tokenPrefix;this.prefixedTokenName=tokenPrefix?[tokenPrefix,tokenName].join("_"):tokenName}return Shared.prototype.getToken=function(){return this.SatellizerStorage.get(this.prefixedTokenName)},Shared.prototype.getPayload=function(){var token=this.SatellizerStorage.get(this.prefixedTokenName);if(token&&3===token.split(".").length)try{var base64Url,base64=token.split(".")[1].replace("-","+").replace("_","/");return JSON.parse(decodeBase64(base64))}catch(e){}},Shared.prototype.setToken=function(response){var tokenRoot=this.SatellizerConfig.tokenRoot,tokenName=this.SatellizerConfig.tokenName,accessToken=response&&response.access_token,token;if(accessToken&&(angular.isObject(accessToken)&&angular.isObject(accessToken.data)?response=accessToken:angular.isString(accessToken)&&(token=accessToken)),!token&&response){var tokenRootData=tokenRoot&&tokenRoot.split(".").reduce((function(o,x){return o[x]}),response.data);token=tokenRootData?tokenRootData[tokenName]:response.data&&response.data[tokenName]}token&&this.SatellizerStorage.set(this.prefixedTokenName,token)},Shared.prototype.removeToken=function(){this.SatellizerStorage.remove(this.prefixedTokenName)},Shared.prototype.isAuthenticated=function(){var token=this.SatellizerStorage.get(this.prefixedTokenName);if(token){if(3===token.split(".").length)try{var base64Url,base64=token.split(".")[1].replace("-","+").replace("_","/"),exp=JSON.parse(this.$window.atob(base64)).exp;if("number"==typeof exp)return Math.round((new Date).getTime()/1e3)<exp}catch(e){return!0}return!0}return!1},Shared.prototype.logout=function(){return this.SatellizerStorage.remove(this.prefixedTokenName),this.$q.when()},Shared.prototype.setStorageType=function(type){this.SatellizerConfig.storageType=type},Shared.$inject=["$q","$window","SatellizerConfig","SatellizerStorage"],Shared}(),Local=function(){function Local($http,SatellizerConfig,SatellizerShared){this.$http=$http,this.SatellizerConfig=SatellizerConfig,this.SatellizerShared=SatellizerShared}return Local.prototype.login=function(user,options){var _this=this;return void 0===options&&(options={}),options.url=options.url?options.url:joinUrl(this.SatellizerConfig.baseUrl,this.SatellizerConfig.loginUrl),options.data=user||options.data,options.method=options.method||"POST",options.withCredentials=options.withCredentials||this.SatellizerConfig.withCredentials,this.$http(options).then((function(response){return _this.SatellizerShared.setToken(response),response}))},Local.prototype.signup=function(user,options){return void 0===options&&(options={}),options.url=options.url?options.url:joinUrl(this.SatellizerConfig.baseUrl,this.SatellizerConfig.signupUrl),options.data=user||options.data,options.method=options.method||"POST",options.withCredentials=options.withCredentials||this.SatellizerConfig.withCredentials,this.$http(options)},Local.$inject=["$http","SatellizerConfig","SatellizerShared"],Local}(),Popup=function(){function Popup($interval,$window,$q){this.$interval=$interval,this.$window=$window,this.$q=$q,this.popup=null,this.defaults={redirectUri:null}}return Popup.prototype.stringifyOptions=function(options){var parts=[];return angular.forEach(options,(function(value,key){parts.push(key+"="+value)})),parts.join(",")},Popup.prototype.open=function(url,name,popupOptions,redirectUri,dontPoll){var width=popupOptions.width||500,height=popupOptions.height||500,options=this.stringifyOptions({width:width,height:height,top:this.$window.screenY+(this.$window.outerHeight-height)/2.5,left:this.$window.screenX+(this.$window.outerWidth-width)/2}),popupName=this.$window.cordova||this.$window.navigator.userAgent.indexOf("CriOS")>-1?"_blank":name;if(this.popup=this.$window.open(url,popupName,options),this.popup&&this.popup.focus&&this.popup.focus(),!dontPoll)return this.$window.cordova?this.eventListener(redirectUri):("about:blank"===url&&(this.popup.location=url),this.polling(redirectUri))},Popup.prototype.polling=function(redirectUri){var _this=this;return this.$q((function(resolve,reject){var redirectUriParser=document.createElement("a");redirectUriParser.href=redirectUri;var redirectUriPath=getFullUrlPath(redirectUriParser),polling=_this.$interval((function(){_this.popup&&!_this.popup.closed&&void 0!==_this.popup.closed||(_this.$interval.cancel(polling),reject(new Error("The popup window was closed")));try{var popupWindowPath;if(getFullUrlPath(_this.popup.location)===redirectUriPath){if(_this.popup.location.search||_this.popup.location.hash){var query=parseQueryString(_this.popup.location.search.substring(1).replace(/\/$/,"")),hash=parseQueryString(_this.popup.location.hash.substring(1).replace(/[\/$]/,"")),params=angular.extend({},query,hash);params.error?reject(new Error(params.error)):resolve(params)}else reject(new Error("OAuth redirect has occurred but no query or hash parameters were found. They were either not set during the redirect, or were removed—typically by a routing library—before Satellizer could read it."));_this.$interval.cancel(polling),_this.popup.close()}}catch(error){}}),500)}))},Popup.prototype.eventListener=function(redirectUri){var _this=this;return this.$q((function(resolve,reject){_this.popup.addEventListener("loadstart",(function(event){if(0===event.url.indexOf(redirectUri)){var parser=document.createElement("a");if(parser.href=event.url,parser.search||parser.hash){var query=parseQueryString(parser.search.substring(1).replace(/\/$/,"")),hash=parseQueryString(parser.hash.substring(1).replace(/[\/$]/,"")),params=angular.extend({},query,hash);params.error?reject(new Error(params.error)):resolve(params),_this.popup.close()}}})),_this.popup.addEventListener("loaderror",(function(){reject(new Error("Authorization failed"))})),_this.popup.addEventListener("exit",(function(){reject(new Error("The popup window was closed"))}))}))},Popup.$inject=["$interval","$window","$q"],Popup}(),OAuth1=function(){function OAuth1($http,$window,SatellizerConfig,SatellizerPopup){this.$http=$http,this.$window=$window,this.SatellizerConfig=SatellizerConfig,this.SatellizerPopup=SatellizerPopup,this.defaults={name:null,url:null,authorizationEndpoint:null,scope:null,scopePrefix:null,scopeDelimiter:null,redirectUri:null,requiredUrlParams:null,defaultUrlParams:null,oauthType:"1.0",popupOptions:{width:null,height:null}}}return OAuth1.prototype.init=function(options,userData){var _this=this;angular.extend(this.defaults,options);var name=options.name,popupOptions=options.popupOptions,redirectUri=this.defaults.redirectUri;return this.$window.cordova||this.SatellizerPopup.open("about:blank",name,popupOptions,redirectUri,!0),this.getRequestToken().then((function(response){return _this.openPopup(options,response).then((function(popupResponse){return _this.exchangeForToken(popupResponse,userData)}))}))},OAuth1.prototype.openPopup=function(options,response){var url=[options.authorizationEndpoint,this.buildQueryString(response.data)].join("?"),redirectUri=this.defaults.redirectUri;return this.$window.cordova?this.SatellizerPopup.open(url,options.name,options.popupOptions,redirectUri):(this.SatellizerPopup.popup.location=url,this.SatellizerPopup.polling(redirectUri))},OAuth1.prototype.getRequestToken=function(){var url=this.SatellizerConfig.baseUrl?joinUrl(this.SatellizerConfig.baseUrl,this.defaults.url):this.defaults.url;return this.$http.post(url,this.defaults)},OAuth1.prototype.exchangeForToken=function(oauthData,userData){var payload=angular.extend({},userData,oauthData),exchangeForTokenUrl=this.SatellizerConfig.baseUrl?joinUrl(this.SatellizerConfig.baseUrl,this.defaults.url):this.defaults.url;return this.$http.post(exchangeForTokenUrl,payload,{withCredentials:this.SatellizerConfig.withCredentials})},OAuth1.prototype.buildQueryString=function(obj){var str=[];return angular.forEach(obj,(function(value,key){str.push(encodeURIComponent(key)+"="+encodeURIComponent(value))})),str.join("&")},OAuth1.$inject=["$http","$window","SatellizerConfig","SatellizerPopup"],OAuth1}(),OAuth2=function(){function OAuth2($http,$window,$timeout,$q,SatellizerConfig,SatellizerPopup,SatellizerStorage){this.$http=$http,this.$window=$window,this.$timeout=$timeout,this.$q=$q,this.SatellizerConfig=SatellizerConfig,this.SatellizerPopup=SatellizerPopup,this.SatellizerStorage=SatellizerStorage,this.defaults={name:null,url:null,clientId:null,authorizationEndpoint:null,redirectUri:null,scope:null,scopePrefix:null,scopeDelimiter:null,state:null,requiredUrlParams:null,defaultUrlParams:["response_type","client_id","redirect_uri"],responseType:"code",responseParams:{code:"code",clientId:"clientId",redirectUri:"redirectUri"},oauthType:"2.0",popupOptions:{width:null,height:null}}}return OAuth2.camelCase=function(name){return name.replace(/([\:\-\_]+(.))/g,(function(_,separator,letter,offset){return offset?letter.toUpperCase():letter}))},OAuth2.prototype.init=function(options,userData){var _this=this;return this.$q((function(resolve,reject){angular.extend(_this.defaults,options);var stateName=_this.defaults.name+"_state",_a=_this.defaults,name=_a.name,state=_a.state,popupOptions=_a.popupOptions,redirectUri=_a.redirectUri,responseType=_a.responseType;"function"==typeof state?_this.SatellizerStorage.set(stateName,state()):"string"==typeof state&&_this.SatellizerStorage.set(stateName,state);var url=[_this.defaults.authorizationEndpoint,_this.buildQueryString()].join("?");_this.SatellizerPopup.open(url,name,popupOptions,redirectUri).then((function(oauth){return"token"!==responseType&&url?oauth.state&&oauth.state!==_this.SatellizerStorage.get(stateName)?reject(new Error("The value returned in the state parameter does not match the state value from your original authorization code request.")):void resolve(_this.exchangeForToken(oauth,userData)):resolve(oauth)})).catch((function(error){return reject(error)}))}))},OAuth2.prototype.exchangeForToken=function(oauthData,userData){var _this=this,payload=angular.extend({},userData);if(angular.forEach(this.defaults.responseParams,(function(value,key){switch(key){case"code":payload[value]=oauthData.code;break;case"clientId":payload[value]=_this.defaults.clientId;break;case"redirectUri":payload[value]=_this.defaults.redirectUri;break;default:payload[value]=oauthData[key]}})),oauthData.state&&(payload.state=oauthData.state),!this.defaults.url)return payload;var exchangeForTokenUrl=this.SatellizerConfig.baseUrl?joinUrl(this.SatellizerConfig.baseUrl,this.defaults.url):this.defaults.url;return this.$http.post(exchangeForTokenUrl,payload,{withCredentials:this.SatellizerConfig.withCredentials})},OAuth2.prototype.buildQueryString=function(){var _this=this,keyValuePairs=[],urlParamsCategories=["defaultUrlParams","requiredUrlParams","optionalUrlParams"];return angular.forEach(urlParamsCategories,(function(paramsCategory){angular.forEach(_this.defaults[paramsCategory],(function(paramName){var camelizedName=OAuth2.camelCase(paramName),paramValue=angular.isFunction(_this.defaults[paramName])?_this.defaults[paramName]():_this.defaults[camelizedName];if("redirect_uri"!==paramName||paramValue){if("state"===paramName){var stateName=_this.defaults.name+"_state";paramValue=encodeURIComponent(_this.SatellizerStorage.get(stateName))}"scope"===paramName&&Array.isArray(paramValue)&&(paramValue=paramValue.join(_this.defaults.scopeDelimiter),_this.defaults.scopePrefix&&(paramValue=[_this.defaults.scopePrefix,paramValue].join(_this.defaults.scopeDelimiter))),keyValuePairs.push([paramName,paramValue])}}))})),keyValuePairs.map((function(pair){return pair.join("=")})).join("&")},OAuth2.$inject=["$http","$window","$timeout","$q","SatellizerConfig","SatellizerPopup","SatellizerStorage"],OAuth2}(),OAuth=function(){function OAuth($http,$window,$timeout,$q,SatellizerConfig,SatellizerPopup,SatellizerStorage,SatellizerShared,SatellizerOAuth1,SatellizerOAuth2){this.$http=$http,this.$window=$window,this.$timeout=$timeout,this.$q=$q,this.SatellizerConfig=SatellizerConfig,this.SatellizerPopup=SatellizerPopup,this.SatellizerStorage=SatellizerStorage,this.SatellizerShared=SatellizerShared,this.SatellizerOAuth1=SatellizerOAuth1,this.SatellizerOAuth2=SatellizerOAuth2}return OAuth.prototype.authenticate=function(name,userData){var _this=this;return this.$q((function(resolve,reject){var provider=_this.SatellizerConfig.providers[name],oauth=null;switch(provider.oauthType){case"1.0":oauth=new OAuth1(_this.$http,_this.$window,_this.SatellizerConfig,_this.SatellizerPopup);break;case"2.0":oauth=new OAuth2(_this.$http,_this.$window,_this.$timeout,_this.$q,_this.SatellizerConfig,_this.SatellizerPopup,_this.SatellizerStorage);break;default:return reject(new Error("Invalid OAuth Type"))}return oauth.init(provider,userData).then((function(response){provider.url&&_this.SatellizerShared.setToken(response),resolve(response)})).catch((function(error){reject(error)}))}))},OAuth.prototype.unlink=function(provider,httpOptions){return void 0===httpOptions&&(httpOptions={}),httpOptions.url=httpOptions.url?httpOptions.url:joinUrl(this.SatellizerConfig.baseUrl,this.SatellizerConfig.unlinkUrl),httpOptions.data={provider:provider}||httpOptions.data,httpOptions.method=httpOptions.method||"POST",httpOptions.withCredentials=httpOptions.withCredentials||this.SatellizerConfig.withCredentials,this.$http(httpOptions)},OAuth.$inject=["$http","$window","$timeout","$q","SatellizerConfig","SatellizerPopup","SatellizerStorage","SatellizerShared","SatellizerOAuth1","SatellizerOAuth2"],OAuth}(),Storage=function(){function Storage($window,SatellizerConfig){this.$window=$window,this.SatellizerConfig=SatellizerConfig,this.memoryStore={}}return Storage.prototype.get=function(key){try{return this.$window[this.SatellizerConfig.storageType].getItem(key)}catch(e){return this.memoryStore[key]}},Storage.prototype.set=function(key,value){try{this.$window[this.SatellizerConfig.storageType].setItem(key,value)}catch(e){this.memoryStore[key]=value}},Storage.prototype.remove=function(key){try{this.$window[this.SatellizerConfig.storageType].removeItem(key)}catch(e){delete this.memoryStore[key]}},Storage.$inject=["$window","SatellizerConfig"],Storage}(),Interceptor=function(){function Interceptor(SatellizerConfig,SatellizerShared,SatellizerStorage){var _this=this;this.SatellizerConfig=SatellizerConfig,this.SatellizerShared=SatellizerShared,this.SatellizerStorage=SatellizerStorage,this.request=function(config){if(config.skipAuthorization)return config;if(_this.SatellizerShared.isAuthenticated()&&_this.SatellizerConfig.httpInterceptor()){var tokenName=_this.SatellizerConfig.tokenPrefix?[_this.SatellizerConfig.tokenPrefix,_this.SatellizerConfig.tokenName].join("_"):_this.SatellizerConfig.tokenName,token=_this.SatellizerStorage.get(tokenName);_this.SatellizerConfig.tokenHeader&&_this.SatellizerConfig.tokenType&&(token=_this.SatellizerConfig.tokenType+" "+token),config.headers[_this.SatellizerConfig.tokenHeader]=token}return config}}return Interceptor.Factory=function(SatellizerConfig,SatellizerShared,SatellizerStorage){return new Interceptor(SatellizerConfig,SatellizerShared,SatellizerStorage)},Interceptor.$inject=["SatellizerConfig","SatellizerShared","SatellizerStorage"],Interceptor}();Interceptor.Factory.$inject=["SatellizerConfig","SatellizerShared","SatellizerStorage"];var HttpProviderConfig=function(){function HttpProviderConfig($httpProvider){this.$httpProvider=$httpProvider,$httpProvider.interceptors.push(Interceptor.Factory)}return HttpProviderConfig.$inject=["$httpProvider"],HttpProviderConfig}(),ng1;return angular.module("satellizer",[]).provider("$auth",["SatellizerConfig",function(SatellizerConfig){return new AuthProvider(SatellizerConfig)}]).constant("SatellizerConfig",Config.getConstant).service("SatellizerShared",Shared).service("SatellizerLocal",Local).service("SatellizerPopup",Popup).service("SatellizerOAuth",OAuth).service("SatellizerOAuth2",OAuth2).service("SatellizerOAuth1",OAuth1).service("SatellizerStorage",Storage).service("SatellizerInterceptor",Interceptor).config(["$httpProvider",function($httpProvider){return new HttpProviderConfig($httpProvider)}]),"satellizer"})),
/*!
 * ASP.NET SignalR JavaScript Library v2.2.2
 * http://signalr.net/
 *
 * Copyright (c) .NET Foundation. All rights reserved.
 * Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.
 *
 */
function($,window,undefined){var resources={nojQuery:"jQuery was not found. Please ensure jQuery is referenced before the SignalR client JavaScript file.",noTransportOnInit:"No transport could be initialized successfully. Try specifying a different transport or none at all for auto initialization.",errorOnNegotiate:"Error during negotiation request.",stoppedWhileLoading:"The connection was stopped during page load.",stoppedWhileNegotiating:"The connection was stopped during the negotiate request.",errorParsingNegotiateResponse:"Error parsing negotiate response.",errorDuringStartRequest:"Error during start request. Stopping the connection.",stoppedDuringStartRequest:"The connection was stopped during the start request.",errorParsingStartResponse:"Error parsing start response: '{0}'. Stopping the connection.",invalidStartResponse:"Invalid start response: '{0}'. Stopping the connection.",protocolIncompatible:"You are using a version of the client that isn't compatible with the server. Client version {0}, server version {1}.",sendFailed:"Send failed.",parseFailed:"Failed at parsing response: {0}",longPollFailed:"Long polling request failed.",eventSourceFailedToConnect:"EventSource failed to connect.",eventSourceError:"Error raised by EventSource",webSocketClosed:"WebSocket closed.",pingServerFailedInvalidResponse:"Invalid ping response when pinging server: '{0}'.",pingServerFailed:"Failed to ping server.",pingServerFailedStatusCode:"Failed to ping server.  Server responded with status code {0}, stopping the connection.",pingServerFailedParse:"Failed to parse ping server response, stopping the connection.",noConnectionTransport:"Connection is in an invalid state, there is no transport active.",webSocketsInvalidState:"The Web Socket transport is in an invalid state, transitioning into reconnecting.",reconnectTimeout:"Couldn't reconnect within the configured timeout of {0} ms, disconnecting.",reconnectWindowTimeout:"The client has been inactive since {0} and it has exceeded the inactivity timeout of {1} ms. Stopping the connection."};if("function"!=typeof $)throw new Error(resources.nojQuery);var signalR,_connection,_pageLoaded="complete"===window.document.readyState,_pageWindow=$(window),_negotiateAbortText="__Negotiate Aborted__",events={onStart:"onStart",onStarting:"onStarting",onReceived:"onReceived",onError:"onError",onConnectionSlow:"onConnectionSlow",onReconnecting:"onReconnecting",onReconnect:"onReconnect",onStateChanged:"onStateChanged",onDisconnect:"onDisconnect"},ajaxDefaults={processData:!0,timeout:null,async:!0,global:!1,cache:!1},log=function(msg,logging){var m;!1!==logging&&(void 0!==window.console&&(m="["+(new Date).toTimeString()+"] SignalR: "+msg,window.console.debug?window.console.debug(m):window.console.log&&window.console.log(m)))},changeState=function(connection,expectedState,newState){return expectedState===connection.state&&(connection.state=newState,$(connection).triggerHandler(events.onStateChanged,[{oldState:expectedState,newState:newState}]),!0)},isDisconnecting=function(connection){return connection.state===signalR.connectionState.disconnected},supportsKeepAlive=function(connection){return connection._.keepAliveData.activated&&connection.transport.supportsKeepAlive(connection)},configureStopReconnectingTimeout=function(connection){var stopReconnectingTimeout,onReconnectTimeout;connection._.configuredStopReconnectingTimeout||(onReconnectTimeout=function(connection){var message=signalR._.format(signalR.resources.reconnectTimeout,connection.disconnectTimeout);connection.log(message),$(connection).triggerHandler(events.onError,[signalR._.error(message,"TimeoutException")]),connection.stop(!1,!1)},connection.reconnecting((function(){var connection=this;connection.state===signalR.connectionState.reconnecting&&(stopReconnectingTimeout=window.setTimeout((function(){onReconnectTimeout(connection)}),connection.disconnectTimeout))})),connection.stateChanged((function(data){data.oldState===signalR.connectionState.reconnecting&&window.clearTimeout(stopReconnectingTimeout)})),connection._.configuredStopReconnectingTimeout=!0)},version,matches;function validateTransport(requestedTransport,connection){if($.isArray(requestedTransport)){for(var i=requestedTransport.length-1;i>=0;i--){var transport=requestedTransport[i];"string"===$.type(transport)&&signalR.transports[transport]||(connection.log("Invalid transport: "+transport+", removing it from the transports list."),requestedTransport.splice(i,1))}0===requestedTransport.length&&(connection.log("No transports remain within the specified transport array."),requestedTransport=null)}else if(signalR.transports[requestedTransport]||"auto"===requestedTransport){if("auto"===requestedTransport&&signalR._.ieVersion<=8)return["longPolling"]}else connection.log("Invalid transport: "+requestedTransport.toString()+"."),requestedTransport=null;return requestedTransport}function getDefaultPort(protocol){return"http:"===protocol?80:"https:"===protocol?443:void 0}function addDefaultPort(protocol,url){return url.match(/:\d+$/)?url:url+":"+getDefaultPort(protocol)}function ConnectingMessageBuffer(connection,drainCallback){var that=this,buffer=[];this.tryBuffer=function(message){return connection.state===$.signalR.connectionState.connecting&&(buffer.push(message),!0)},this.drain=function(){if(connection.state===$.signalR.connectionState.connected)for(;buffer.length>0;)drainCallback(buffer.shift())},this.clear=function(){buffer=[]}}(signalR=function(url,qs,logging){return new signalR.fn.init(url,qs,logging)})._={defaultContentType:"application/x-www-form-urlencoded; charset=UTF-8",ieVersion:("Microsoft Internet Explorer"===window.navigator.appName&&(matches=/MSIE ([0-9]+\.[0-9]+)/.exec(window.navigator.userAgent))&&(version=window.parseFloat(matches[1])),version),error:function(message,source,context){var e=new Error(message);return e.source=source,void 0!==context&&(e.context=context),e},transportError:function(message,transport,source,context){var e=this.error(message,source,context);return e.transport=transport?transport.name:void 0,e},format:function(){for(var s=arguments[0],i=0;i<arguments.length-1;i++)s=s.replace("{"+i+"}",arguments[i+1]);return s},firefoxMajorVersion:function(userAgent){var matches=userAgent.match(/Firefox\/(\d+)/);return!matches||!matches.length||matches.length<2?0:parseInt(matches[1],10)},configurePingInterval:function(connection){var config=connection._.config,onFail=function(error){$(connection).triggerHandler(events.onError,[error])};config&&!connection._.pingIntervalId&&config.pingInterval&&(connection._.pingIntervalId=window.setInterval((function(){signalR.transports._logic.pingServer(connection).fail(onFail)}),config.pingInterval))}},signalR.events=events,signalR.resources=resources,signalR.ajaxDefaults=ajaxDefaults,signalR.changeState=changeState,signalR.isDisconnecting=isDisconnecting,signalR.connectionState={connecting:0,connected:1,reconnecting:2,disconnected:4},signalR.hub={start:function(){throw new Error("SignalR: Error loading hubs. Ensure your hubs reference is correct, e.g. <script src='/signalr/js'><\/script>.")}},"function"==typeof _pageWindow.on?_pageWindow.on("load",(function(){_pageLoaded=!0})):_pageWindow.load((function(){_pageLoaded=!0})),signalR.fn=signalR.prototype={init:function(url,qs,logging){var $connection=$(this);this.url=url,this.qs=qs,this.lastError=null,this._={keepAliveData:{},connectingMessageBuffer:new ConnectingMessageBuffer(this,(function(message){$connection.triggerHandler(events.onReceived,[message])})),lastMessageAt:(new Date).getTime(),lastActiveAt:(new Date).getTime(),beatInterval:5e3,beatHandle:null,totalTransportConnectTimeout:0},"boolean"==typeof logging&&(this.logging=logging)},_parseResponse:function(response){var that=this;return response&&"string"==typeof response?this.json.parse(response):response},_originalJson:window.JSON,json:window.JSON,isCrossDomain:function(url,against){var link;return url=$.trim(url),against=against||window.location,0===url.indexOf("http")&&((link=window.document.createElement("a")).href=url,link.protocol+addDefaultPort(link.protocol,link.host)!==against.protocol+addDefaultPort(against.protocol,against.host))},ajaxDataType:"text",contentType:"application/json; charset=UTF-8",logging:!1,state:signalR.connectionState.disconnected,clientProtocol:"1.5",reconnectDelay:2e3,transportConnectTimeout:0,disconnectTimeout:3e4,reconnectWindow:3e4,keepAliveWarnAt:2/3,start:function(options,callback){var connection=this,config={pingInterval:3e5,waitForPageLoad:!0,transport:"auto",jsonp:!1},initialize,deferred=connection._deferral||$.Deferred(),parser=window.document.createElement("a");if(connection.lastError=null,connection._deferral=deferred,!connection.json)throw new Error("SignalR: No JSON parser found. Please ensure json2.js is referenced before the SignalR.js file if you need to support clients without native JSON parsing support, e.g. IE<8.");if("function"===$.type(options)?callback=options:"object"===$.type(options)&&($.extend(config,options),"function"===$.type(config.callback)&&(callback=config.callback)),config.transport=validateTransport(config.transport,connection),!config.transport)throw new Error("SignalR: Invalid transport(s) specified, aborting start.");if(connection._.config=config,!_pageLoaded&&!0===config.waitForPageLoad)return connection._.deferredStartHandler=function(){connection.start(options,callback)},_pageWindow.bind("load",connection._.deferredStartHandler),deferred.promise();if(connection.state===signalR.connectionState.connecting)return deferred.promise();if(!1===changeState(connection,signalR.connectionState.disconnected,signalR.connectionState.connecting))return deferred.resolve(connection),deferred.promise();configureStopReconnectingTimeout(connection),parser.href=connection.url,parser.protocol&&":"!==parser.protocol?(connection.protocol=parser.protocol,connection.host=parser.host):(connection.protocol=window.document.location.protocol,connection.host=parser.host||window.document.location.host),connection.baseUrl=connection.protocol+"//"+connection.host,connection.wsProtocol="https:"===connection.protocol?"wss://":"ws://","auto"===config.transport&&!0===config.jsonp&&(config.transport="longPolling"),0===connection.url.indexOf("//")&&(connection.url=window.location.protocol+connection.url,connection.log("Protocol relative URL detected, normalizing it to '"+connection.url+"'.")),this.isCrossDomain(connection.url)&&(connection.log("Auto detected cross domain url."),"auto"===config.transport&&(config.transport=["webSockets","serverSentEvents","longPolling"]),void 0===config.withCredentials&&(config.withCredentials=!0),config.jsonp||(config.jsonp=!$.support.cors,config.jsonp&&connection.log("Using jsonp because this browser doesn't support CORS.")),connection.contentType=signalR._.defaultContentType),connection.withCredentials=config.withCredentials,connection.ajaxDataType=config.jsonp?"jsonp":"text",$(connection).bind(events.onStart,(function(e,data){"function"===$.type(callback)&&callback.call(connection),deferred.resolve(connection)})),connection._.initHandler=signalR.transports._logic.initHandler(connection),initialize=function(transports,index){var noTransportError=signalR._.error(resources.noTransportOnInit);if((index=index||0)>=transports.length)return 0===index?connection.log("No transports supported by the server were selected."):1===index?connection.log("No fallback transports were selected."):connection.log("Fallback transports exhausted."),$(connection).triggerHandler(events.onError,[noTransportError]),deferred.reject(noTransportError),void connection.stop();if(connection.state!==signalR.connectionState.disconnected){var transportName=transports[index],transport=signalR.transports[transportName],onFallback=function(){initialize(transports,index+1)};connection.transport=transport;try{connection._.initHandler.start(transport,(function(){var isFirefox11OrGreater=signalR._.firefoxMajorVersion(window.navigator.userAgent)>=11,asyncAbort=!!connection.withCredentials&&isFirefox11OrGreater;connection.log("The start request succeeded. Transitioning to the connected state."),supportsKeepAlive(connection)&&signalR.transports._logic.monitorKeepAlive(connection),signalR.transports._logic.startHeartbeat(connection),signalR._.configurePingInterval(connection),changeState(connection,signalR.connectionState.connecting,signalR.connectionState.connected)||connection.log("WARNING! The connection was not in the connecting state."),connection._.connectingMessageBuffer.drain(),$(connection).triggerHandler(events.onStart),_pageWindow.bind("unload",(function(){connection.log("Window unloading, stopping the connection."),connection.stop(asyncAbort)})),isFirefox11OrGreater&&_pageWindow.bind("beforeunload",(function(){window.setTimeout((function(){connection.stop(asyncAbort)}),0)}))}),onFallback)}catch(error){connection.log(transport.name+" transport threw '"+error.message+"' when attempting to start."),onFallback()}}};var url=connection.url+"/negotiate",onFailed=function(error,connection){var err=signalR._.error(resources.errorOnNegotiate,error,connection._.negotiateRequest);$(connection).triggerHandler(events.onError,err),deferred.reject(err),connection.stop()};return $(connection).triggerHandler(events.onStarting),url=signalR.transports._logic.prepareQueryString(connection,url),connection.log("Negotiating with '"+url+"'."),connection._.negotiateRequest=signalR.transports._logic.ajax(connection,{url:url,error:function(error,statusText){statusText!==_negotiateAbortText?onFailed(error,connection):deferred.reject(signalR._.error(resources.stoppedWhileNegotiating,null,connection._.negotiateRequest))},success:function(result){var res,keepAliveData,protocolError,transports=[],supportedTransports=[];try{res=connection._parseResponse(result)}catch(error){return void onFailed(signalR._.error(resources.errorParsingNegotiateResponse,error),connection)}if(keepAliveData=connection._.keepAliveData,connection.appRelativeUrl=res.Url,connection.id=res.ConnectionId,connection.token=res.ConnectionToken,connection.webSocketServerUrl=res.WebSocketServerUrl,connection._.pollTimeout=1e3*res.ConnectionTimeout+1e4,connection.disconnectTimeout=1e3*res.DisconnectTimeout,connection._.totalTransportConnectTimeout=connection.transportConnectTimeout+1e3*res.TransportConnectTimeout,res.KeepAliveTimeout?(keepAliveData.activated=!0,keepAliveData.timeout=1e3*res.KeepAliveTimeout,keepAliveData.timeoutWarning=keepAliveData.timeout*connection.keepAliveWarnAt,connection._.beatInterval=(keepAliveData.timeout-keepAliveData.timeoutWarning)/3):keepAliveData.activated=!1,connection.reconnectWindow=connection.disconnectTimeout+(keepAliveData.timeout||0),!res.ProtocolVersion||res.ProtocolVersion!==connection.clientProtocol)return protocolError=signalR._.error(signalR._.format(resources.protocolIncompatible,connection.clientProtocol,res.ProtocolVersion)),$(connection).triggerHandler(events.onError,[protocolError]),void deferred.reject(protocolError);$.each(signalR.transports,(function(key){if(0===key.indexOf("_")||"webSockets"===key&&!res.TryWebSockets)return!0;supportedTransports.push(key)})),$.isArray(config.transport)?$.each(config.transport,(function(_,transport){$.inArray(transport,supportedTransports)>=0&&transports.push(transport)})):"auto"===config.transport?transports=supportedTransports:$.inArray(config.transport,supportedTransports)>=0&&transports.push(config.transport),initialize(transports)}}),deferred.promise()},starting:function(callback){var connection=this;return $(connection).bind(events.onStarting,(function(e,data){callback.call(connection)})),connection},send:function(data){var connection=this;if(this.state===signalR.connectionState.disconnected)throw new Error("SignalR: Connection must be started before data can be sent. Call .start() before .send()");if(this.state===signalR.connectionState.connecting)throw new Error("SignalR: Connection has not been fully initialized. Use .start().done() or .start().fail() to run logic after the connection has started.");return this.transport.send(this,data),this},received:function(callback){var connection=this;return $(connection).bind(events.onReceived,(function(e,data){callback.call(connection,data)})),connection},stateChanged:function(callback){var connection=this;return $(connection).bind(events.onStateChanged,(function(e,data){callback.call(connection,data)})),connection},error:function(callback){var connection=this;return $(connection).bind(events.onError,(function(e,errorData,sendData){connection.lastError=errorData,callback.call(connection,errorData,sendData)})),connection},disconnected:function(callback){var connection=this;return $(connection).bind(events.onDisconnect,(function(e,data){callback.call(connection)})),connection},connectionSlow:function(callback){var connection=this;return $(connection).bind(events.onConnectionSlow,(function(e,data){callback.call(connection)})),connection},reconnecting:function(callback){var connection=this;return $(connection).bind(events.onReconnecting,(function(e,data){callback.call(connection)})),connection},reconnected:function(callback){var connection=this;return $(connection).bind(events.onReconnect,(function(e,data){callback.call(connection)})),connection},stop:function(async,notifyServer){var connection=this,deferral=this._deferral;return this._.deferredStartHandler&&_pageWindow.unbind("load",this._.deferredStartHandler),delete this._.config,delete this._.deferredStartHandler,_pageLoaded||this._.config&&!0!==this._.config.waitForPageLoad?this.state!==signalR.connectionState.disconnected?(this.log("Stopping connection."),window.clearTimeout(this._.beatHandle),window.clearInterval(this._.pingIntervalId),this.transport&&(this.transport.stop(this),!1!==notifyServer&&this.transport.abort(this,async),supportsKeepAlive(this)&&signalR.transports._logic.stopMonitoringKeepAlive(this),this.transport=null),this._.negotiateRequest&&(this._.negotiateRequest.abort(_negotiateAbortText),delete this._.negotiateRequest),this._.initHandler&&this._.initHandler.stop(),delete this._deferral,delete this.messageId,delete this.groupsToken,delete this.id,delete this._.pingIntervalId,delete this._.lastMessageAt,delete this._.lastActiveAt,this._.connectingMessageBuffer.clear(),$(this).unbind(events.onStart),changeState(this,this.state,signalR.connectionState.disconnected),$(this).triggerHandler(events.onDisconnect),this):void 0:(this.log("Stopping connection prior to negotiate."),void(deferral&&deferral.reject(signalR._.error(resources.stoppedWhileLoading))))},log:function(msg){log(msg,this.logging)}},signalR.fn.init.prototype=signalR.fn,signalR.noConflict=function(){return $.connection===signalR&&($.connection=_connection),signalR},$.connection&&(_connection=$.connection),$.connection=$.signalR=signalR}(window.jQuery,window),function($,window,undefined){var signalR=$.signalR,events=$.signalR.events,changeState=$.signalR.changeState,startAbortText="__Start Aborted__",transportLogic;function beat(connection){connection._.keepAliveData.monitoring&&checkIfAlive(connection),transportLogic.markActive(connection)&&(connection._.beatHandle=window.setTimeout((function(){beat(connection)}),connection._.beatInterval))}function checkIfAlive(connection){var keepAliveData=connection._.keepAliveData,timeElapsed;connection.state===signalR.connectionState.connected&&((timeElapsed=(new Date).getTime()-connection._.lastMessageAt)>=keepAliveData.timeout?(connection.log("Keep alive timed out.  Notifying transport that connection has been lost."),connection.transport.lostConnection(connection)):timeElapsed>=keepAliveData.timeoutWarning?keepAliveData.userNotified||(connection.log("Keep alive has been missed, connection may be dead/slow."),$(connection).triggerHandler(events.onConnectionSlow),keepAliveData.userNotified=!0):keepAliveData.userNotified=!1)}function getAjaxUrl(connection,path){var url=connection.url+path;return connection.transport&&(url+="?transport="+connection.transport.name),transportLogic.prepareQueryString(connection,url)}function InitHandler(connection){this.connection=connection,this.startRequested=!1,this.startCompleted=!1,this.connectionStopped=!1}signalR.transports={},InitHandler.prototype={start:function(transport,onSuccess,onFallback){var that=this,connection=that.connection,failCalled=!1;that.startRequested||that.connectionStopped?connection.log("WARNING! "+transport.name+" transport cannot be started. Initialization ongoing or completed."):(connection.log(transport.name+" transport starting."),transport.start(connection,(function(){failCalled||that.initReceived(transport,onSuccess)}),(function(error){return failCalled||(failCalled=!0,that.transportFailed(transport,error,onFallback)),!that.startCompleted||that.connectionStopped})),that.transportTimeoutHandle=window.setTimeout((function(){failCalled||(failCalled=!0,connection.log(transport.name+" transport timed out when trying to connect."),that.transportFailed(transport,void 0,onFallback))}),connection._.totalTransportConnectTimeout))},stop:function(){this.connectionStopped=!0,window.clearTimeout(this.transportTimeoutHandle),signalR.transports._logic.tryAbortStartRequest(this.connection)},initReceived:function(transport,onSuccess){var that=this,connection=that.connection;that.startRequested?connection.log("WARNING! The client received multiple init messages."):that.connectionStopped||(that.startRequested=!0,window.clearTimeout(that.transportTimeoutHandle),connection.log(transport.name+" transport connected. Initiating start request."),signalR.transports._logic.ajaxStart(connection,(function(){that.startCompleted=!0,onSuccess()})))},transportFailed:function(transport,error,onFallback){var connection=this.connection,deferred=connection._deferral,wrappedError;this.connectionStopped||(window.clearTimeout(this.transportTimeoutHandle),this.startRequested?this.startCompleted||(wrappedError=signalR._.error(signalR.resources.errorDuringStartRequest,error),connection.log(transport.name+" transport failed during the start request. Stopping the connection."),$(connection).triggerHandler(events.onError,[wrappedError]),deferred&&deferred.reject(wrappedError),connection.stop()):(transport.stop(connection),connection.log(transport.name+" transport failed to connect. Attempting to fall back."),onFallback()))}},transportLogic=signalR.transports._logic={ajax:function(connection,options){return $.ajax($.extend(!0,{},$.signalR.ajaxDefaults,{type:"GET",data:{},xhrFields:{withCredentials:connection.withCredentials},contentType:connection.contentType,dataType:connection.ajaxDataType},options))},pingServer:function(connection){var url,xhr,deferral=$.Deferred();return connection.transport?(url=connection.url+"/ping",url=transportLogic.addQs(url,connection.qs),xhr=transportLogic.ajax(connection,{url:url,success:function(result){var data;try{data=connection._parseResponse(result)}catch(error){return deferral.reject(signalR._.transportError(signalR.resources.pingServerFailedParse,connection.transport,error,xhr)),void connection.stop()}"pong"===data.Response?deferral.resolve():deferral.reject(signalR._.transportError(signalR._.format(signalR.resources.pingServerFailedInvalidResponse,result),connection.transport,null,xhr))},error:function(error){401===error.status||403===error.status?(deferral.reject(signalR._.transportError(signalR._.format(signalR.resources.pingServerFailedStatusCode,error.status),connection.transport,error,xhr)),connection.stop()):deferral.reject(signalR._.transportError(signalR.resources.pingServerFailed,connection.transport,error,xhr))}})):deferral.reject(signalR._.transportError(signalR.resources.noConnectionTransport,connection.transport)),deferral.promise()},prepareQueryString:function(connection,url){var preparedUrl;return preparedUrl=transportLogic.addQs(url,"clientProtocol="+connection.clientProtocol),preparedUrl=transportLogic.addQs(preparedUrl,connection.qs),connection.token&&(preparedUrl+="&connectionToken="+window.encodeURIComponent(connection.token)),connection.data&&(preparedUrl+="&connectionData="+window.encodeURIComponent(connection.data)),preparedUrl},addQs:function(url,qs){var appender=-1!==url.indexOf("?")?"&":"?",firstChar;if(!qs)return url;if("object"==typeof qs)return url+appender+$.param(qs);if("string"==typeof qs)return"?"!==(firstChar=qs.charAt(0))&&"&"!==firstChar||(appender=""),url+appender+qs;throw new Error("Query string property must be either a string or object.")},getUrl:function(connection,transport,reconnecting,poll,ajaxPost){var baseUrl,url=("webSockets"===transport?"":connection.baseUrl)+connection.appRelativeUrl,qs="transport="+transport;return!ajaxPost&&connection.groupsToken&&(qs+="&groupsToken="+window.encodeURIComponent(connection.groupsToken)),reconnecting?(url+=poll?"/poll":"/reconnect",!ajaxPost&&connection.messageId&&(qs+="&messageId="+window.encodeURIComponent(connection.messageId))):url+="/connect",url+="?"+qs,url=transportLogic.prepareQueryString(connection,url),ajaxPost||(url+="&tid="+Math.floor(11*Math.random())),url},maximizePersistentResponse:function(minPersistentResponse){return{MessageId:minPersistentResponse.C,Messages:minPersistentResponse.M,Initialized:void 0!==minPersistentResponse.S,ShouldReconnect:void 0!==minPersistentResponse.T,LongPollDelay:minPersistentResponse.L,GroupsToken:minPersistentResponse.G}},updateGroups:function(connection,groupsToken){groupsToken&&(connection.groupsToken=groupsToken)},stringifySend:function(connection,message){return"string"==typeof message||null==message?message:connection.json.stringify(message)},ajaxSend:function(connection,data){var payload=transportLogic.stringifySend(connection,data),url=getAjaxUrl(connection,"/send"),xhr,onFail=function(error,connection){$(connection).triggerHandler(events.onError,[signalR._.transportError(signalR.resources.sendFailed,connection.transport,error,xhr),data])};return xhr=transportLogic.ajax(connection,{url:url,type:"jsonp"===connection.ajaxDataType?"GET":"POST",contentType:signalR._.defaultContentType,data:{data:payload},success:function(result){var res;if(result){try{res=connection._parseResponse(result)}catch(error){return onFail(error,connection),void connection.stop()}transportLogic.triggerReceived(connection,res)}},error:function(error,textStatus){"abort"!==textStatus&&"parsererror"!==textStatus&&onFail(error,connection)}})},ajaxAbort:function(connection,async){if(void 0!==connection.transport){async=void 0===async||async;var url=getAjaxUrl(connection,"/abort");transportLogic.ajax(connection,{url:url,async:async,timeout:1e3,type:"POST"}),connection.log("Fired ajax abort async = "+async+".")}},ajaxStart:function(connection,onSuccess){var rejectDeferred=function(error){var deferred=connection._deferral;deferred&&deferred.reject(error)},triggerStartError=function(error){connection.log("The start request failed. Stopping the connection."),$(connection).triggerHandler(events.onError,[error]),rejectDeferred(error),connection.stop()};connection._.startRequest=transportLogic.ajax(connection,{url:getAjaxUrl(connection,"/start"),success:function(result,statusText,xhr){var data;try{data=connection._parseResponse(result)}catch(error){return void triggerStartError(signalR._.error(signalR._.format(signalR.resources.errorParsingStartResponse,result),error,xhr))}"started"===data.Response?onSuccess():triggerStartError(signalR._.error(signalR._.format(signalR.resources.invalidStartResponse,result),null,xhr))},error:function(xhr,statusText,error){statusText!==startAbortText?triggerStartError(signalR._.error(signalR.resources.errorDuringStartRequest,error,xhr)):(connection.log("The start request aborted because connection.stop() was called."),rejectDeferred(signalR._.error(signalR.resources.stoppedDuringStartRequest,null,xhr)))}})},tryAbortStartRequest:function(connection){connection._.startRequest&&(connection._.startRequest.abort(startAbortText),delete connection._.startRequest)},tryInitialize:function(connection,persistentResponse,onInitialized){persistentResponse.Initialized&&onInitialized?onInitialized():persistentResponse.Initialized&&connection.log("WARNING! The client received an init message after reconnecting.")},triggerReceived:function(connection,data){connection._.connectingMessageBuffer.tryBuffer(data)||$(connection).triggerHandler(events.onReceived,[data])},processMessages:function(connection,minData,onInitialized){var data;transportLogic.markLastMessage(connection),minData&&(data=transportLogic.maximizePersistentResponse(minData),transportLogic.updateGroups(connection,data.GroupsToken),data.MessageId&&(connection.messageId=data.MessageId),data.Messages&&($.each(data.Messages,(function(index,message){transportLogic.triggerReceived(connection,message)})),transportLogic.tryInitialize(connection,data,onInitialized)))},monitorKeepAlive:function(connection){var keepAliveData=connection._.keepAliveData;keepAliveData.monitoring?connection.log("Tried to monitor keep alive but it's already being monitored."):(keepAliveData.monitoring=!0,transportLogic.markLastMessage(connection),connection._.keepAliveData.reconnectKeepAliveUpdate=function(){transportLogic.markLastMessage(connection)},$(connection).bind(events.onReconnect,connection._.keepAliveData.reconnectKeepAliveUpdate),connection.log("Now monitoring keep alive with a warning timeout of "+keepAliveData.timeoutWarning+", keep alive timeout of "+keepAliveData.timeout+" and disconnecting timeout of "+connection.disconnectTimeout))},stopMonitoringKeepAlive:function(connection){var keepAliveData=connection._.keepAliveData;keepAliveData.monitoring&&(keepAliveData.monitoring=!1,$(connection).unbind(events.onReconnect,connection._.keepAliveData.reconnectKeepAliveUpdate),connection._.keepAliveData={},connection.log("Stopping the monitoring of the keep alive."))},startHeartbeat:function(connection){connection._.lastActiveAt=(new Date).getTime(),beat(connection)},markLastMessage:function(connection){connection._.lastMessageAt=(new Date).getTime()},markActive:function(connection){return!!transportLogic.verifyLastActive(connection)&&(connection._.lastActiveAt=(new Date).getTime(),!0)},isConnectedOrReconnecting:function(connection){return connection.state===signalR.connectionState.connected||connection.state===signalR.connectionState.reconnecting},ensureReconnectingState:function(connection){return!0===changeState(connection,signalR.connectionState.connected,signalR.connectionState.reconnecting)&&$(connection).triggerHandler(events.onReconnecting),connection.state===signalR.connectionState.reconnecting},clearReconnectTimeout:function(connection){connection&&connection._.reconnectTimeout&&(window.clearTimeout(connection._.reconnectTimeout),delete connection._.reconnectTimeout)},verifyLastActive:function(connection){if((new Date).getTime()-connection._.lastActiveAt>=connection.reconnectWindow){var message=signalR._.format(signalR.resources.reconnectWindowTimeout,new Date(connection._.lastActiveAt),connection.reconnectWindow);return connection.log(message),$(connection).triggerHandler(events.onError,[signalR._.error(message,"TimeoutException")]),connection.stop(!1,!1),!1}return!0},reconnect:function(connection,transportName){var transport=signalR.transports[transportName];if(transportLogic.isConnectedOrReconnecting(connection)&&!connection._.reconnectTimeout){if(!transportLogic.verifyLastActive(connection))return;connection._.reconnectTimeout=window.setTimeout((function(){transportLogic.verifyLastActive(connection)&&(transport.stop(connection),transportLogic.ensureReconnectingState(connection)&&(connection.log(transportName+" reconnecting."),transport.start(connection)))}),connection.reconnectDelay)}},handleParseFailure:function(connection,result,error,onFailed,context){var wrappedError=signalR._.transportError(signalR._.format(signalR.resources.parseFailed,result),connection.transport,error,context);onFailed&&onFailed(wrappedError)?connection.log("Failed to parse server response while attempting to connect."):($(connection).triggerHandler(events.onError,[wrappedError]),connection.stop())},initHandler:function(connection){return new InitHandler(connection)},foreverFrame:{count:0,connections:{}}}}(window.jQuery,window),function($,window,undefined){var signalR=$.signalR,events=$.signalR.events,changeState=$.signalR.changeState,transportLogic=signalR.transports._logic;signalR.transports.webSockets={name:"webSockets",supportsKeepAlive:function(){return!0},send:function(connection,data){var payload=transportLogic.stringifySend(connection,data);try{connection.socket.send(payload)}catch(ex){$(connection).triggerHandler(events.onError,[signalR._.transportError(signalR.resources.webSocketsInvalidState,connection.transport,ex,connection.socket),data])}},start:function(connection,onSuccess,onFailed){var url,opened=!1,that=this,reconnecting=!onSuccess,$connection=$(connection);window.WebSocket?connection.socket||(url=connection.webSocketServerUrl?connection.webSocketServerUrl:connection.wsProtocol+connection.host,url+=transportLogic.getUrl(connection,this.name,reconnecting),connection.log("Connecting to websocket endpoint '"+url+"'."),connection.socket=new window.WebSocket(url),connection.socket.onopen=function(){opened=!0,connection.log("Websocket opened."),transportLogic.clearReconnectTimeout(connection),!0===changeState(connection,signalR.connectionState.reconnecting,signalR.connectionState.connected)&&$connection.triggerHandler(events.onReconnect)},connection.socket.onclose=function(event){var error;this===connection.socket&&(opened&&void 0!==event.wasClean&&!1===event.wasClean?(error=signalR._.transportError(signalR.resources.webSocketClosed,connection.transport,event),connection.log("Unclean disconnect from websocket: "+(event.reason||"[no reason given]."))):connection.log("Websocket closed."),onFailed&&onFailed(error)||(error&&$(connection).triggerHandler(events.onError,[error]),that.reconnect(connection)))},connection.socket.onmessage=function(event){var data;try{data=connection._parseResponse(event.data)}catch(error){return void transportLogic.handleParseFailure(connection,event.data,error,onFailed,event)}data&&($.isEmptyObject(data)||data.M?transportLogic.processMessages(connection,data,onSuccess):transportLogic.triggerReceived(connection,data))}):onFailed()},reconnect:function(connection){transportLogic.reconnect(connection,this.name)},lostConnection:function(connection){this.reconnect(connection)},stop:function(connection){transportLogic.clearReconnectTimeout(connection),connection.socket&&(connection.log("Closing the Websocket."),connection.socket.close(),connection.socket=null)},abort:function(connection,async){transportLogic.ajaxAbort(connection,async)}}}(window.jQuery,window),function($,window,undefined){var signalR=$.signalR,events=$.signalR.events,changeState=$.signalR.changeState,transportLogic=signalR.transports._logic,clearReconnectAttemptTimeout=function(connection){window.clearTimeout(connection._.reconnectAttemptTimeoutHandle),delete connection._.reconnectAttemptTimeoutHandle};signalR.transports.serverSentEvents={name:"serverSentEvents",supportsKeepAlive:function(){return!0},timeOut:3e3,start:function(connection,onSuccess,onFailed){var that=this,opened=!1,$connection=$(connection),reconnecting=!onSuccess,url;if(connection.eventSource&&(connection.log("The connection already has an event source. Stopping it."),connection.stop()),window.EventSource){url=transportLogic.getUrl(connection,this.name,reconnecting);try{connection.log("Attempting to connect to SSE endpoint '"+url+"'."),connection.eventSource=new window.EventSource(url,{withCredentials:connection.withCredentials})}catch(e){return connection.log("EventSource failed trying to connect with error "+e.Message+"."),void(onFailed?onFailed():($connection.triggerHandler(events.onError,[signalR._.transportError(signalR.resources.eventSourceFailedToConnect,connection.transport,e)]),reconnecting&&that.reconnect(connection)))}reconnecting&&(connection._.reconnectAttemptTimeoutHandle=window.setTimeout((function(){!1===opened&&connection.eventSource.readyState!==window.EventSource.OPEN&&that.reconnect(connection)}),that.timeOut)),connection.eventSource.addEventListener("open",(function(e){connection.log("EventSource connected."),clearReconnectAttemptTimeout(connection),transportLogic.clearReconnectTimeout(connection),!1===opened&&(opened=!0,!0===changeState(connection,signalR.connectionState.reconnecting,signalR.connectionState.connected)&&$connection.triggerHandler(events.onReconnect))}),!1),connection.eventSource.addEventListener("message",(function(e){var res;if("initialized"!==e.data){try{res=connection._parseResponse(e.data)}catch(error){return void transportLogic.handleParseFailure(connection,e.data,error,onFailed,e)}transportLogic.processMessages(connection,res,onSuccess)}}),!1),connection.eventSource.addEventListener("error",(function(e){var error=signalR._.transportError(signalR.resources.eventSourceError,connection.transport,e);this===connection.eventSource&&(onFailed&&onFailed(error)||(connection.log("EventSource readyState: "+connection.eventSource.readyState+"."),e.eventPhase===window.EventSource.CLOSED?(connection.log("EventSource reconnecting due to the server connection ending."),that.reconnect(connection)):(connection.log("EventSource error."),$connection.triggerHandler(events.onError,[error]))))}),!1)}else onFailed&&(connection.log("This browser doesn't support SSE."),onFailed())},reconnect:function(connection){transportLogic.reconnect(connection,this.name)},lostConnection:function(connection){this.reconnect(connection)},send:function(connection,data){transportLogic.ajaxSend(connection,data)},stop:function(connection){clearReconnectAttemptTimeout(connection),transportLogic.clearReconnectTimeout(connection),connection&&connection.eventSource&&(connection.log("EventSource calling close()."),connection.eventSource.close(),connection.eventSource=null,delete connection.eventSource)},abort:function(connection,async){transportLogic.ajaxAbort(connection,async)}}}(window.jQuery,window),function($,window,undefined){var signalR=$.signalR,events=$.signalR.events,changeState=$.signalR.changeState,transportLogic=signalR.transports._logic,createFrame=function(){var frame=window.document.createElement("iframe");return frame.setAttribute("style","position:absolute;top:0;left:0;width:0;height:0;visibility:hidden;"),frame},loadPreventer=(loadingFixIntervalId=null,loadingFixInterval=1e3,attachedTo=0,{prevent:function(){signalR._.ieVersion<=8&&(0===attachedTo&&(loadingFixIntervalId=window.setInterval((function(){var tempFrame=createFrame();window.document.body.appendChild(tempFrame),window.document.body.removeChild(tempFrame),tempFrame=null}),1e3)),attachedTo++)},cancel:function(){1===attachedTo&&window.clearInterval(loadingFixIntervalId),attachedTo>0&&attachedTo--}}),loadingFixIntervalId,loadingFixInterval,attachedTo;signalR.transports.foreverFrame={name:"foreverFrame",supportsKeepAlive:function(){return!0},iframeClearThreshold:50,start:function(connection,onSuccess,onFailed){var that=this,frameId=transportLogic.foreverFrame.count+=1,url,frame=createFrame(),frameLoadHandler=function(){connection.log("Forever frame iframe finished loading and is no longer receiving messages."),onFailed&&onFailed()||that.reconnect(connection)};window.EventSource?onFailed&&(connection.log("Forever Frame is not supported by SignalR on browsers with SSE support."),onFailed()):(frame.setAttribute("data-signalr-connection-id",connection.id),loadPreventer.prevent(),url=transportLogic.getUrl(connection,this.name),url+="&frameId="+frameId,window.document.documentElement.appendChild(frame),connection.log("Binding to iframe's load event."),frame.addEventListener?frame.addEventListener("load",frameLoadHandler,!1):frame.attachEvent&&frame.attachEvent("onload",frameLoadHandler),frame.src=url,transportLogic.foreverFrame.connections[frameId]=connection,connection.frame=frame,connection.frameId=frameId,onSuccess&&(connection.onSuccess=function(){connection.log("Iframe transport started."),onSuccess()}))},reconnect:function(connection){var that=this;transportLogic.isConnectedOrReconnecting(connection)&&transportLogic.verifyLastActive(connection)&&window.setTimeout((function(){if(transportLogic.verifyLastActive(connection)&&connection.frame&&transportLogic.ensureReconnectingState(connection)){var frame=connection.frame,src=transportLogic.getUrl(connection,that.name,!0)+"&frameId="+connection.frameId;connection.log("Updating iframe src to '"+src+"'."),frame.src=src}}),connection.reconnectDelay)},lostConnection:function(connection){this.reconnect(connection)},send:function(connection,data){transportLogic.ajaxSend(connection,data)},receive:function(connection,data){var cw,body,response;if(connection.json!==connection._originalJson&&(data=connection._originalJson.stringify(data)),response=connection._parseResponse(data),transportLogic.processMessages(connection,response,connection.onSuccess),connection.state===$.signalR.connectionState.connected&&(connection.frameMessageCount=(connection.frameMessageCount||0)+1,connection.frameMessageCount>signalR.transports.foreverFrame.iframeClearThreshold&&(connection.frameMessageCount=0,(cw=connection.frame.contentWindow||connection.frame.contentDocument)&&cw.document&&cw.document.body)))for(body=cw.document.body;body.firstChild;)body.removeChild(body.firstChild)},stop:function(connection){var cw=null;if(loadPreventer.cancel(),connection.frame){if(connection.frame.stop)connection.frame.stop();else try{(cw=connection.frame.contentWindow||connection.frame.contentDocument).document&&cw.document.execCommand&&cw.document.execCommand("Stop")}catch(e){connection.log("Error occurred when stopping foreverFrame transport. Message = "+e.message+".")}connection.frame.parentNode===window.document.documentElement&&window.document.documentElement.removeChild(connection.frame),delete transportLogic.foreverFrame.connections[connection.frameId],connection.frame=null,connection.frameId=null,delete connection.frame,delete connection.frameId,delete connection.onSuccess,delete connection.frameMessageCount,connection.log("Stopping forever frame.")}},abort:function(connection,async){transportLogic.ajaxAbort(connection,async)},getConnection:function(id){return transportLogic.foreverFrame.connections[id]},started:function(connection){!0===changeState(connection,signalR.connectionState.reconnecting,signalR.connectionState.connected)&&$(connection).triggerHandler(events.onReconnect)}}}(window.jQuery,window),function($,window,undefined){var signalR=$.signalR,events=$.signalR.events,changeState=$.signalR.changeState,isDisconnecting=$.signalR.isDisconnecting,transportLogic=signalR.transports._logic;signalR.transports.longPolling={name:"longPolling",supportsKeepAlive:function(){return!1},reconnectDelay:3e3,start:function(connection,onSuccess,onFailed){var that=this,fireConnect=function(){fireConnect=$.noop,connection.log("LongPolling connected."),onSuccess?onSuccess():connection.log("WARNING! The client received an init message after reconnecting.")},tryFailConnect=function(error){return!!onFailed(error)&&(connection.log("LongPolling failed to connect."),!0)},privateData=connection._,reconnectErrors=0,fireReconnected=function(instance){window.clearTimeout(privateData.reconnectTimeoutId),privateData.reconnectTimeoutId=null,!0===changeState(instance,signalR.connectionState.reconnecting,signalR.connectionState.connected)&&(instance.log("Raising the reconnect event"),$(instance).triggerHandler(events.onReconnect))},maxFireReconnectedTimeout=36e5;connection.pollXhr&&(connection.log("Polling xhr requests already exists, aborting."),connection.stop()),connection.messageId=null,privateData.reconnectTimeoutId=null,privateData.pollTimeoutId=window.setTimeout((function(){!function poll(instance,raiseReconnect){var messageId,connect,reconnecting=!(null===instance.messageId),polling=!raiseReconnect,url=transportLogic.getUrl(instance,that.name,reconnecting,polling,!0),postData={};instance.messageId&&(postData.messageId=instance.messageId),instance.groupsToken&&(postData.groupsToken=instance.groupsToken),!0!==isDisconnecting(instance)&&(connection.log("Opening long polling request to '"+url+"'."),instance.pollXhr=transportLogic.ajax(connection,{xhrFields:{onprogress:function(){transportLogic.markLastMessage(connection)}},url:url,type:"POST",contentType:signalR._.defaultContentType,data:postData,timeout:connection._.pollTimeout,success:function(result){var minData,delay=0,data,shouldReconnect;connection.log("Long poll complete."),reconnectErrors=0;try{minData=connection._parseResponse(result)}catch(error){return void transportLogic.handleParseFailure(instance,result,error,tryFailConnect,instance.pollXhr)}null!==privateData.reconnectTimeoutId&&fireReconnected(instance),minData&&(data=transportLogic.maximizePersistentResponse(minData)),transportLogic.processMessages(instance,minData,fireConnect),data&&"number"===$.type(data.LongPollDelay)&&(delay=data.LongPollDelay),!0!==isDisconnecting(instance)&&((shouldReconnect=data&&data.ShouldReconnect)&&!transportLogic.ensureReconnectingState(instance)||(delay>0?privateData.pollTimeoutId=window.setTimeout((function(){poll(instance,shouldReconnect)}),delay):poll(instance,shouldReconnect)))},error:function(data,textStatus){var error=signalR._.transportError(signalR.resources.longPollFailed,connection.transport,data,instance.pollXhr);if(window.clearTimeout(privateData.reconnectTimeoutId),privateData.reconnectTimeoutId=null,"abort"!==textStatus){if(!tryFailConnect(error)){if(reconnectErrors++,connection.state!==signalR.connectionState.reconnecting&&(connection.log("An error occurred using longPolling. Status = "+textStatus+".  Response = "+data.responseText+"."),$(instance).triggerHandler(events.onError,[error])),(connection.state===signalR.connectionState.connected||connection.state===signalR.connectionState.reconnecting)&&!transportLogic.verifyLastActive(connection))return;if(!transportLogic.ensureReconnectingState(instance))return;privateData.pollTimeoutId=window.setTimeout((function(){poll(instance,!0)}),that.reconnectDelay)}}else connection.log("Aborted xhr request.")}}),reconnecting&&!0===raiseReconnect&&(privateData.reconnectTimeoutId=window.setTimeout((function(){fireReconnected(instance)}),Math.min(1e3*(Math.pow(2,reconnectErrors)-1),36e5))))}(connection)}),250)},lostConnection:function(connection){connection.pollXhr&&connection.pollXhr.abort("lostConnection")},send:function(connection,data){transportLogic.ajaxSend(connection,data)},stop:function(connection){window.clearTimeout(connection._.pollTimeoutId),window.clearTimeout(connection._.reconnectTimeoutId),delete connection._.pollTimeoutId,delete connection._.reconnectTimeoutId,connection.pollXhr&&(connection.pollXhr.abort(),connection.pollXhr=null,delete connection.pollXhr)},abort:function(connection,async){transportLogic.ajaxAbort(connection,async)}}}(window.jQuery,window),function($,window,undefined){var eventNamespace=".hubProxy",signalR=$.signalR;function makeEventName(event){return event+".hubProxy"}function map(arr,fun,thisp){var i,length=arr.length,result=[];for(i=0;i<length;i+=1)arr.hasOwnProperty(i)&&(result[i]=fun.call(thisp,arr[i],i,arr));return result}function getArgValue(a){return $.isFunction(a)?null:"undefined"===$.type(a)?null:a}function hasMembers(obj){for(var key in obj)if(obj.hasOwnProperty(key))return!0;return!1}function clearInvocationCallbacks(connection,error){var callbacks=connection._.invocationCallbacks,callback;for(var callbackId in hasMembers(callbacks)&&connection.log("Clearing hub invocation callbacks with error: "+error+"."),connection._.invocationCallbackId=0,delete connection._.invocationCallbacks,connection._.invocationCallbacks={},callbacks)(callback=callbacks[callbackId]).method.call(callback.scope,{E:error})}function hubProxy(hubConnection,hubName){return new hubProxy.fn.init(hubConnection,hubName)}function hubConnection(url,options){var settings={qs:null,logging:!1,useDefaultPath:!0};return $.extend(settings,options),url&&!settings.useDefaultPath||(url=(url||"")+"/signalr"),new hubConnection.fn.init(url,settings)}hubProxy.fn=hubProxy.prototype={init:function(connection,hubName){this.state={},this.connection=connection,this.hubName=hubName,this._={callbackMap:{}}},constructor:hubProxy,hasSubscriptions:function(){return hasMembers(this._.callbackMap)},on:function(eventName,callback){var that=this,callbackMap=that._.callbackMap;return callbackMap[eventName=eventName.toLowerCase()]||(callbackMap[eventName]={}),callbackMap[eventName][callback]=function(e,data){callback.apply(that,data)},$(that).bind(makeEventName(eventName),callbackMap[eventName][callback]),that},off:function(eventName,callback){var that=this,callbackMap=this._.callbackMap,callbackSpace;return(callbackSpace=callbackMap[eventName=eventName.toLowerCase()])&&(callbackSpace[callback]?($(this).unbind(makeEventName(eventName),callbackSpace[callback]),delete callbackSpace[callback],hasMembers(callbackSpace)||delete callbackMap[eventName]):callback||($(this).unbind(makeEventName(eventName)),delete callbackMap[eventName])),this},invoke:function(methodName){var that=this,connection=that.connection,args=$.makeArray(arguments).slice(1),argValues=map(args,getArgValue),data={H:that.hubName,M:methodName,A:argValues,I:connection._.invocationCallbackId},d=$.Deferred(),callback=function(minResult){var result=that._maximizeHubResponse(minResult),source,error;$.extend(that.state,result.State),result.Progress?d.notifyWith?d.notifyWith(that,[result.Progress.Data]):connection._.progressjQueryVersionLogged||(connection.log("A hub method invocation progress update was received but the version of jQuery in use ("+$.prototype.jquery+") does not support progress updates. Upgrade to jQuery 1.7+ to receive progress notifications."),connection._.progressjQueryVersionLogged=!0):result.Error?(result.StackTrace&&connection.log(result.Error+"\n"+result.StackTrace+"."),source=result.IsHubException?"HubException":"Exception",(error=signalR._.error(result.Error,source)).data=result.ErrorData,connection.log(that.hubName+"."+methodName+" failed to execute. Error: "+error.message),d.rejectWith(that,[error])):(connection.log("Invoked "+that.hubName+"."+methodName),d.resolveWith(that,[result.Result]))};return connection._.invocationCallbacks[connection._.invocationCallbackId.toString()]={scope:that,method:callback},connection._.invocationCallbackId+=1,$.isEmptyObject(that.state)||(data.S=that.state),connection.log("Invoking "+that.hubName+"."+methodName),connection.send(data),d.promise()},_maximizeHubResponse:function(minHubResponse){return{State:minHubResponse.S,Result:minHubResponse.R,Progress:minHubResponse.P?{Id:minHubResponse.P.I,Data:minHubResponse.P.D}:null,Id:minHubResponse.I,IsHubException:minHubResponse.H,Error:minHubResponse.E,StackTrace:minHubResponse.T,ErrorData:minHubResponse.D}}},hubProxy.fn.init.prototype=hubProxy.fn,hubConnection.fn=hubConnection.prototype=$.connection(),hubConnection.fn.init=function(url,options){var settings={qs:null,logging:!1,useDefaultPath:!0},connection=this;$.extend(settings,options),$.signalR.fn.init.call(connection,url,settings.qs,settings.logging),connection.proxies={},connection._.invocationCallbackId=0,connection._.invocationCallbacks={},connection.received((function(minData){var data,proxy,dataCallbackId,callback,hubName,eventName;minData&&(void 0!==minData.P?(dataCallbackId=minData.P.I.toString(),(callback=connection._.invocationCallbacks[dataCallbackId])&&callback.method.call(callback.scope,minData)):void 0!==minData.I?(dataCallbackId=minData.I.toString(),(callback=connection._.invocationCallbacks[dataCallbackId])&&(connection._.invocationCallbacks[dataCallbackId]=null,delete connection._.invocationCallbacks[dataCallbackId],callback.method.call(callback.scope,minData))):(data=this._maximizeClientHubInvocation(minData),connection.log("Triggering client hub event '"+data.Method+"' on hub '"+data.Hub+"'."),hubName=data.Hub.toLowerCase(),eventName=data.Method.toLowerCase(),proxy=this.proxies[hubName],$.extend(proxy.state,data.State),$(proxy).triggerHandler(makeEventName(eventName),[data.Args])))})),connection.error((function(errData,origData){var callbackId,callback;origData&&(callbackId=origData.I,(callback=connection._.invocationCallbacks[callbackId])&&(connection._.invocationCallbacks[callbackId]=null,delete connection._.invocationCallbacks[callbackId],callback.method.call(callback.scope,{E:errData})))})),connection.reconnecting((function(){connection.transport&&"webSockets"===connection.transport.name&&clearInvocationCallbacks(connection,"Connection started reconnecting before invocation result was received.")})),connection.disconnected((function(){clearInvocationCallbacks(connection,"Connection was disconnected before invocation result was received.")}))},hubConnection.fn._maximizeClientHubInvocation=function(minClientHubInvocation){return{Hub:minClientHubInvocation.H,Method:minClientHubInvocation.M,Args:minClientHubInvocation.A,State:minClientHubInvocation.S}},hubConnection.fn._registerSubscribedHubs=function(){var connection=this;connection._subscribedToHubs||(connection._subscribedToHubs=!0,connection.starting((function(){var subscribedHubs=[];$.each(connection.proxies,(function(key){this.hasSubscriptions()&&(subscribedHubs.push({name:key}),connection.log("Client subscribed to hub '"+key+"'."))})),0===subscribedHubs.length&&connection.log("No hubs have been subscribed to.  The client will not receive data from hubs.  To fix, declare at least one client side function prior to connection start for each hub you wish to subscribe to."),connection.data=connection.json.stringify(subscribedHubs)})))},hubConnection.fn.createHubProxy=function(hubName){hubName=hubName.toLowerCase();var proxy=this.proxies[hubName];return proxy||(proxy=hubProxy(this,hubName),this.proxies[hubName]=proxy),this._registerSubscribedHubs(),proxy},hubConnection.fn.init.prototype=hubConnection.fn,$.hubConnection=hubConnection}(window.jQuery,window),function($,undefined){$.signalR.version="2.2.2"}(window.jQuery),function(){var d3={version:"3.5.17"},d3_arraySlice=[].slice,d3_array=function(list){return d3_arraySlice.call(list)},d3_document=this.document;function d3_documentElement(node){return node&&(node.ownerDocument||node.document||node).documentElement}function d3_window(node){return node&&(node.ownerDocument&&node.ownerDocument.defaultView||node.document&&node||node.defaultView)}if(d3_document)try{d3_array(d3_document.documentElement.childNodes)[0].nodeType}catch(e){d3_array=function(list){for(var i=list.length,array=new Array(i);i--;)array[i]=list[i];return array}}if(Date.now||(Date.now=function(){return+new Date}),d3_document)try{d3_document.createElement("DIV").style.setProperty("opacity",0,"")}catch(error){var d3_element_prototype=this.Element.prototype,d3_element_setAttribute=d3_element_prototype.setAttribute,d3_element_setAttributeNS=d3_element_prototype.setAttributeNS,d3_style_prototype=this.CSSStyleDeclaration.prototype,d3_style_setProperty=d3_style_prototype.setProperty;d3_element_prototype.setAttribute=function(name,value){d3_element_setAttribute.call(this,name,value+"")},d3_element_prototype.setAttributeNS=function(space,local,value){d3_element_setAttributeNS.call(this,space,local,value+"")},d3_style_prototype.setProperty=function(name,value,priority){d3_style_setProperty.call(this,name,value+"",priority)}}function d3_ascending(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function d3_number(x){return null===x?NaN:+x}function d3_numeric(x){return!isNaN(x)}function d3_bisector(compare){return{left:function(a,x,lo,hi){for(arguments.length<3&&(lo=0),arguments.length<4&&(hi=a.length);lo<hi;){var mid=lo+hi>>>1;compare(a[mid],x)<0?lo=mid+1:hi=mid}return lo},right:function(a,x,lo,hi){for(arguments.length<3&&(lo=0),arguments.length<4&&(hi=a.length);lo<hi;){var mid=lo+hi>>>1;compare(a[mid],x)>0?hi=mid:lo=mid+1}return lo}}}d3.ascending=d3_ascending,d3.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN},d3.min=function(array,f){var i=-1,n=array.length,a,b;if(1===arguments.length){for(;++i<n;)if(null!=(b=array[i])&&b>=b){a=b;break}for(;++i<n;)null!=(b=array[i])&&a>b&&(a=b)}else{for(;++i<n;)if(null!=(b=f.call(array,array[i],i))&&b>=b){a=b;break}for(;++i<n;)null!=(b=f.call(array,array[i],i))&&a>b&&(a=b)}return a},d3.max=function(array,f){var i=-1,n=array.length,a,b;if(1===arguments.length){for(;++i<n;)if(null!=(b=array[i])&&b>=b){a=b;break}for(;++i<n;)null!=(b=array[i])&&b>a&&(a=b)}else{for(;++i<n;)if(null!=(b=f.call(array,array[i],i))&&b>=b){a=b;break}for(;++i<n;)null!=(b=f.call(array,array[i],i))&&b>a&&(a=b)}return a},d3.extent=function(array,f){var i=-1,n=array.length,a,b,c;if(1===arguments.length){for(;++i<n;)if(null!=(b=array[i])&&b>=b){a=c=b;break}for(;++i<n;)null!=(b=array[i])&&(a>b&&(a=b),c<b&&(c=b))}else{for(;++i<n;)if(null!=(b=f.call(array,array[i],i))&&b>=b){a=c=b;break}for(;++i<n;)null!=(b=f.call(array,array[i],i))&&(a>b&&(a=b),c<b&&(c=b))}return[a,c]},d3.sum=function(array,f){var s=0,n=array.length,a,i=-1;if(1===arguments.length)for(;++i<n;)d3_numeric(a=+array[i])&&(s+=a);else for(;++i<n;)d3_numeric(a=+f.call(array,array[i],i))&&(s+=a);return s},d3.mean=function(array,f){var s=0,n=array.length,a,i=-1,j=n;if(1===arguments.length)for(;++i<n;)d3_numeric(a=d3_number(array[i]))?s+=a:--j;else for(;++i<n;)d3_numeric(a=d3_number(f.call(array,array[i],i)))?s+=a:--j;if(j)return s/j},d3.quantile=function(values,p){var H=(values.length-1)*p+1,h=Math.floor(H),v=+values[h-1],e=H-h;return e?v+e*(values[h]-v):v},d3.median=function(array,f){var numbers=[],n=array.length,a,i=-1;if(1===arguments.length)for(;++i<n;)d3_numeric(a=d3_number(array[i]))&&numbers.push(a);else for(;++i<n;)d3_numeric(a=d3_number(f.call(array,array[i],i)))&&numbers.push(a);if(numbers.length)return d3.quantile(numbers.sort(d3_ascending),.5)},d3.variance=function(array,f){var n=array.length,m=0,a,d,s=0,i=-1,j=0;if(1===arguments.length)for(;++i<n;)d3_numeric(a=d3_number(array[i]))&&(s+=(d=a-m)*(a-(m+=d/++j)));else for(;++i<n;)d3_numeric(a=d3_number(f.call(array,array[i],i)))&&(s+=(d=a-m)*(a-(m+=d/++j)));if(j>1)return s/(j-1)},d3.deviation=function(){var v=d3.variance.apply(this,arguments);return v?Math.sqrt(v):v};var d3_bisect=d3_bisector(d3_ascending);function d3_transposeLength(d){return d.length}d3.bisectLeft=d3_bisect.left,d3.bisect=d3.bisectRight=d3_bisect.right,d3.bisector=function(f){return d3_bisector(1===f.length?function(d,x){return d3_ascending(f(d),x)}:f)},d3.shuffle=function(array,i0,i1){(m=arguments.length)<3&&(i1=array.length,m<2&&(i0=0));for(var m=i1-i0,t,i;m;)i=Math.random()*m--|0,t=array[m+i0],array[m+i0]=array[i+i0],array[i+i0]=t;return array},d3.permute=function(array,indexes){for(var i=indexes.length,permutes=new Array(i);i--;)permutes[i]=array[indexes[i]];return permutes},d3.pairs=function(array){for(var i=0,n=array.length-1,p0,p1=array[0],pairs=new Array(n<0?0:n);i<n;)pairs[i]=[p0=p1,p1=array[++i]];return pairs},d3.transpose=function(matrix){if(!(n=matrix.length))return[];for(var i=-1,m=d3.min(matrix,d3_transposeLength),transpose=new Array(m);++i<m;)for(var j=-1,n,row=transpose[i]=new Array(n);++j<n;)row[j]=matrix[j][i];return transpose},d3.zip=function(){return d3.transpose(arguments)},d3.keys=function(map){var keys=[];for(var key in map)keys.push(key);return keys},d3.values=function(map){var values=[];for(var key in map)values.push(map[key]);return values},d3.entries=function(map){var entries=[];for(var key in map)entries.push({key:key,value:map[key]});return entries},d3.merge=function(arrays){for(var n=arrays.length,m,i=-1,j=0,merged,array;++i<n;)j+=arrays[i].length;for(merged=new Array(j);--n>=0;)for(m=(array=arrays[n]).length;--m>=0;)merged[--j]=array[m];return merged};var abs=Math.abs;function d3_range_integerScale(x){for(var k=1;x*k%1;)k*=10;return k}function d3_class(ctor,properties){for(var key in properties)Object.defineProperty(ctor.prototype,key,{value:properties[key],enumerable:!1})}function d3_Map(){this._=Object.create(null)}d3.range=function(start,stop,step){if(arguments.length<3&&(step=1,arguments.length<2&&(stop=start,start=0)),(stop-start)/step==1/0)throw new Error("infinite range");var range=[],k=d3_range_integerScale(abs(step)),i=-1,j;if(start*=k,stop*=k,(step*=k)<0)for(;(j=start+step*++i)>stop;)range.push(j/k);else for(;(j=start+step*++i)<stop;)range.push(j/k);return range},d3.map=function(object,f){var map=new d3_Map;if(object instanceof d3_Map)object.forEach((function(key,value){map.set(key,value)}));else if(Array.isArray(object)){var i=-1,n=object.length,o;if(1===arguments.length)for(;++i<n;)map.set(i,object[i]);else for(;++i<n;)map.set(f.call(object,o=object[i],i),o)}else for(var key in object)map.set(key,object[key]);return map};var d3_map_proto="__proto__",d3_map_zero="\0";function d3_map_escape(key){return"__proto__"==(key+="")||"\0"===key[0]?"\0"+key:key}function d3_map_unescape(key){return"\0"===(key+="")[0]?key.slice(1):key}function d3_map_has(key){return d3_map_escape(key)in this._}function d3_map_remove(key){return(key=d3_map_escape(key))in this._&&delete this._[key]}function d3_map_keys(){var keys=[];for(var key in this._)keys.push(d3_map_unescape(key));return keys}function d3_map_size(){var size=0;for(var key in this._)++size;return size}function d3_map_empty(){for(var key in this._)return!1;return!0}function d3_Set(){this._=Object.create(null)}function d3_identity(d){return d}function d3_rebind(target,source,method){return function(){var value=method.apply(source,arguments);return value===source?target:value}}function d3_vendorSymbol(object,name){if(name in object)return name;name=name.charAt(0).toUpperCase()+name.slice(1);for(var i=0,n=d3_vendorPrefixes.length;i<n;++i){var prefixName=d3_vendorPrefixes[i]+name;if(prefixName in object)return prefixName}}d3_class(d3_Map,{has:d3_map_has,get:function(key){return this._[d3_map_escape(key)]},set:function(key,value){return this._[d3_map_escape(key)]=value},remove:d3_map_remove,keys:d3_map_keys,values:function(){var values=[];for(var key in this._)values.push(this._[key]);return values},entries:function(){var entries=[];for(var key in this._)entries.push({key:d3_map_unescape(key),value:this._[key]});return entries},size:d3_map_size,empty:d3_map_empty,forEach:function(f){for(var key in this._)f.call(this,d3_map_unescape(key),this._[key])}}),d3.nest=function(){var nest={},keys=[],sortKeys=[],sortValues,rollup;function map(mapType,array,depth){if(depth>=keys.length)return rollup?rollup.call(nest,array):sortValues?array.sort(sortValues):array;for(var i=-1,n=array.length,key=keys[depth++],keyValue,object,setter,valuesByKey=new d3_Map,values;++i<n;)(values=valuesByKey.get(keyValue=key(object=array[i])))?values.push(object):valuesByKey.set(keyValue,[object]);return mapType?(object=mapType(),setter=function(keyValue,values){object.set(keyValue,map(mapType,values,depth))}):(object={},setter=function(keyValue,values){object[keyValue]=map(mapType,values,depth)}),valuesByKey.forEach(setter),object}function entries(map,depth){if(depth>=keys.length)return map;var array=[],sortKey=sortKeys[depth++];return map.forEach((function(key,keyMap){array.push({key:key,values:entries(keyMap,depth)})})),sortKey?array.sort((function(a,b){return sortKey(a.key,b.key)})):array}return nest.map=function(array,mapType){return map(mapType,array,0)},nest.entries=function(array){return entries(map(d3.map,array,0),0)},nest.key=function(d){return keys.push(d),nest},nest.sortKeys=function(order){return sortKeys[keys.length-1]=order,nest},nest.sortValues=function(order){return sortValues=order,nest},nest.rollup=function(f){return rollup=f,nest},nest},d3.set=function(array){var set=new d3_Set;if(array)for(var i=0,n=array.length;i<n;++i)set.add(array[i]);return set},d3_class(d3_Set,{has:d3_map_has,add:function(key){return this._[d3_map_escape(key+="")]=!0,key},remove:d3_map_remove,values:d3_map_keys,size:d3_map_size,empty:d3_map_empty,forEach:function(f){for(var key in this._)f.call(this,d3_map_unescape(key))}}),d3.behavior={},d3.rebind=function(target,source){for(var i=1,n=arguments.length,method;++i<n;)target[method=arguments[i]]=d3_rebind(target,source,source[method]);return target};var d3_vendorPrefixes=["webkit","ms","moz","Moz","o","O"];function d3_noop(){}function d3_dispatch(){}function d3_dispatch_event(dispatch){var listeners=[],listenerByName=new d3_Map;function event(){for(var z=listeners,i=-1,n=z.length,l;++i<n;)(l=z[i].on)&&l.apply(this,arguments);return dispatch}return event.on=function(name,listener){var l=listenerByName.get(name),i;return arguments.length<2?l&&l.on:(l&&(l.on=null,listeners=listeners.slice(0,i=listeners.indexOf(l)).concat(listeners.slice(i+1)),listenerByName.remove(name)),listener&&listeners.push(listenerByName.set(name,{on:listener})),dispatch)},event}function d3_eventPreventDefault(){d3.event.preventDefault()}function d3_eventSource(){for(var e=d3.event,s;s=e.sourceEvent;)e=s;return e}function d3_eventDispatch(target){for(var dispatch=new d3_dispatch,i=0,n=arguments.length;++i<n;)dispatch[arguments[i]]=d3_dispatch_event(dispatch);return dispatch.of=function(thiz,argumentz){return function(e1){try{var e0=e1.sourceEvent=d3.event;e1.target=target,d3.event=e1,dispatch[e1.type].apply(thiz,argumentz)}finally{d3.event=e0}}},dispatch}d3.dispatch=function(){for(var dispatch=new d3_dispatch,i=-1,n=arguments.length;++i<n;)dispatch[arguments[i]]=d3_dispatch_event(dispatch);return dispatch},d3_dispatch.prototype.on=function(type,listener){var i=type.indexOf("."),name="";if(i>=0&&(name=type.slice(i+1),type=type.slice(0,i)),type)return arguments.length<2?this[type].on(name):this[type].on(name,listener);if(2===arguments.length){if(null==listener)for(type in this)this.hasOwnProperty(type)&&this[type].on(name,null);return this}},d3.event=null,d3.requote=function(s){return s.replace(d3_requote_re,"\\$&")};var d3_requote_re=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,d3_subclass={}.__proto__?function(object,prototype){object.__proto__=prototype}:function(object,prototype){for(var property in prototype)object[property]=prototype[property]};function d3_selection(groups){return d3_subclass(groups,d3_selectionPrototype),groups}var d3_select=function(s,n){return n.querySelector(s)},d3_selectAll=function(s,n){return n.querySelectorAll(s)},d3_selectMatches=function(n,s){var d3_selectMatcher=n.matches||n[d3_vendorSymbol(n,"matchesSelector")];return(d3_selectMatches=function(n,s){return d3_selectMatcher.call(n,s)})(n,s)};"function"==typeof Sizzle&&(d3_select=function(s,n){return Sizzle(s,n)[0]||null},d3_selectAll=Sizzle,d3_selectMatches=Sizzle.matchesSelector),d3.selection=function(){return d3.select(d3_document.documentElement)};var d3_selectionPrototype=d3.selection.prototype=[];function d3_selection_selector(selector){return"function"==typeof selector?selector:function(){return d3_select(selector,this)}}function d3_selection_selectorAll(selector){return"function"==typeof selector?selector:function(){return d3_selectAll(selector,this)}}d3_selectionPrototype.select=function(selector){var subgroups=[],subgroup,subnode,group,node;selector=d3_selection_selector(selector);for(var j=-1,m=this.length;++j<m;){subgroups.push(subgroup=[]),subgroup.parentNode=(group=this[j]).parentNode;for(var i=-1,n=group.length;++i<n;)(node=group[i])?(subgroup.push(subnode=selector.call(node,node.__data__,i,j)),subnode&&"__data__"in node&&(subnode.__data__=node.__data__)):subgroup.push(null)}return d3_selection(subgroups)},d3_selectionPrototype.selectAll=function(selector){var subgroups=[],subgroup,node;selector=d3_selection_selectorAll(selector);for(var j=-1,m=this.length;++j<m;)for(var group=this[j],i=-1,n=group.length;++i<n;)(node=group[i])&&(subgroups.push(subgroup=d3_array(selector.call(node,node.__data__,i,j))),subgroup.parentNode=node);return d3_selection(subgroups)};var d3_nsXhtml="http://www.w3.org/1999/xhtml",d3_nsPrefix={svg:"http://www.w3.org/2000/svg",xhtml:d3_nsXhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function d3_selection_attr(name,value){function attrNull(){this.removeAttribute(name)}function attrNullNS(){this.removeAttributeNS(name.space,name.local)}function attrConstant(){this.setAttribute(name,value)}function attrConstantNS(){this.setAttributeNS(name.space,name.local,value)}function attrFunction(){var x=value.apply(this,arguments);null==x?this.removeAttribute(name):this.setAttribute(name,x)}function attrFunctionNS(){var x=value.apply(this,arguments);null==x?this.removeAttributeNS(name.space,name.local):this.setAttributeNS(name.space,name.local,x)}return name=d3.ns.qualify(name),null==value?name.local?attrNullNS:attrNull:"function"==typeof value?name.local?attrFunctionNS:attrFunction:name.local?attrConstantNS:attrConstant}function d3_collapse(s){return s.trim().replace(/\s+/g," ")}function d3_selection_classedRe(name){return new RegExp("(?:^|\\s+)"+d3.requote(name)+"(?:\\s+|$)","g")}function d3_selection_classes(name){return(name+"").trim().split(/^|\s+/)}function d3_selection_classed(name,value){var n=(name=d3_selection_classes(name).map(d3_selection_classedName)).length;function classedConstant(){for(var i=-1;++i<n;)name[i](this,value)}function classedFunction(){for(var i=-1,x=value.apply(this,arguments);++i<n;)name[i](this,x)}return"function"==typeof value?classedFunction:classedConstant}function d3_selection_classedName(name){var re=d3_selection_classedRe(name);return function(node,value){if(c=node.classList)return value?c.add(name):c.remove(name);var c=node.getAttribute("class")||"";value?(re.lastIndex=0,re.test(c)||node.setAttribute("class",d3_collapse(c+" "+name))):node.setAttribute("class",d3_collapse(c.replace(re," ")))}}function d3_selection_style(name,value,priority){function styleNull(){this.style.removeProperty(name)}function styleConstant(){this.style.setProperty(name,value,priority)}function styleFunction(){var x=value.apply(this,arguments);null==x?this.style.removeProperty(name):this.style.setProperty(name,x,priority)}return null==value?styleNull:"function"==typeof value?styleFunction:styleConstant}function d3_selection_property(name,value){function propertyNull(){delete this[name]}function propertyConstant(){this[name]=value}function propertyFunction(){var x=value.apply(this,arguments);null==x?delete this[name]:this[name]=x}return null==value?propertyNull:"function"==typeof value?propertyFunction:propertyConstant}function d3_selection_creator(name){function create(){var document=this.ownerDocument,namespace=this.namespaceURI;return namespace===d3_nsXhtml&&document.documentElement.namespaceURI===d3_nsXhtml?document.createElement(name):document.createElementNS(namespace,name)}function createNS(){return this.ownerDocument.createElementNS(name.space,name.local)}return"function"==typeof name?name:(name=d3.ns.qualify(name)).local?createNS:create}function d3_selectionRemove(){var parent=this.parentNode;parent&&parent.removeChild(this)}function d3_selection_dataNode(data){return{__data__:data}}function d3_selection_filter(selector){return function(){return d3_selectMatches(this,selector)}}function d3_selection_sortComparator(comparator){return arguments.length||(comparator=d3_ascending),function(a,b){return a&&b?comparator(a.__data__,b.__data__):!a-!b}}function d3_selection_each(groups,callback){for(var j=0,m=groups.length;j<m;j++)for(var group=groups[j],i=0,n=group.length,node;i<n;i++)(node=group[i])&&callback(node,i,j);return groups}function d3_selection_enter(selection){return d3_subclass(selection,d3_selection_enterPrototype),selection}d3.ns={prefix:d3_nsPrefix,qualify:function(name){var i=name.indexOf(":"),prefix=name;return i>=0&&"xmlns"!==(prefix=name.slice(0,i))&&(name=name.slice(i+1)),d3_nsPrefix.hasOwnProperty(prefix)?{space:d3_nsPrefix[prefix],local:name}:name}},d3_selectionPrototype.attr=function(name,value){if(arguments.length<2){if("string"==typeof name){var node=this.node();return(name=d3.ns.qualify(name)).local?node.getAttributeNS(name.space,name.local):node.getAttribute(name)}for(value in name)this.each(d3_selection_attr(value,name[value]));return this}return this.each(d3_selection_attr(name,value))},d3_selectionPrototype.classed=function(name,value){if(arguments.length<2){if("string"==typeof name){var node=this.node(),n=(name=d3_selection_classes(name)).length,i=-1;if(value=node.classList){for(;++i<n;)if(!value.contains(name[i]))return!1}else for(value=node.getAttribute("class");++i<n;)if(!d3_selection_classedRe(name[i]).test(value))return!1;return!0}for(value in name)this.each(d3_selection_classed(value,name[value]));return this}return this.each(d3_selection_classed(name,value))},d3_selectionPrototype.style=function(name,value,priority){var n=arguments.length;if(n<3){if("string"!=typeof name){for(priority in n<2&&(value=""),name)this.each(d3_selection_style(priority,name[priority],value));return this}if(n<2){var node=this.node();return d3_window(node).getComputedStyle(node,null).getPropertyValue(name)}priority=""}return this.each(d3_selection_style(name,value,priority))},d3_selectionPrototype.property=function(name,value){if(arguments.length<2){if("string"==typeof name)return this.node()[name];for(value in name)this.each(d3_selection_property(value,name[value]));return this}return this.each(d3_selection_property(name,value))},d3_selectionPrototype.text=function(value){return arguments.length?this.each("function"==typeof value?function(){var v=value.apply(this,arguments);this.textContent=null==v?"":v}:null==value?function(){this.textContent=""}:function(){this.textContent=value}):this.node().textContent},d3_selectionPrototype.html=function(value){return arguments.length?this.each("function"==typeof value?function(){var v=value.apply(this,arguments);this.innerHTML=null==v?"":v}:null==value?function(){this.innerHTML=""}:function(){this.innerHTML=value}):this.node().innerHTML},d3_selectionPrototype.append=function(name){return name=d3_selection_creator(name),this.select((function(){return this.appendChild(name.apply(this,arguments))}))},d3_selectionPrototype.insert=function(name,before){return name=d3_selection_creator(name),before=d3_selection_selector(before),this.select((function(){return this.insertBefore(name.apply(this,arguments),before.apply(this,arguments)||null)}))},d3_selectionPrototype.remove=function(){return this.each(d3_selectionRemove)},d3_selectionPrototype.data=function(value,key){var i=-1,n=this.length,group,node;if(!arguments.length){for(value=new Array(n=(group=this[0]).length);++i<n;)(node=group[i])&&(value[i]=node.__data__);return value}function bind(group,groupData){var i,n=group.length,m=groupData.length,n0=Math.min(n,m),updateNodes=new Array(m),enterNodes=new Array(m),exitNodes=new Array(n),node,nodeData;if(key){var nodeByKeyValue=new d3_Map,keyValues=new Array(n),keyValue;for(i=-1;++i<n;)(node=group[i])&&(nodeByKeyValue.has(keyValue=key.call(node,node.__data__,i))?exitNodes[i]=node:nodeByKeyValue.set(keyValue,node),keyValues[i]=keyValue);for(i=-1;++i<m;)(node=nodeByKeyValue.get(keyValue=key.call(groupData,nodeData=groupData[i],i)))?!0!==node&&(updateNodes[i]=node,node.__data__=nodeData):enterNodes[i]=d3_selection_dataNode(nodeData),nodeByKeyValue.set(keyValue,!0);for(i=-1;++i<n;)i in keyValues&&!0!==nodeByKeyValue.get(keyValues[i])&&(exitNodes[i]=group[i])}else{for(i=-1;++i<n0;)node=group[i],nodeData=groupData[i],node?(node.__data__=nodeData,updateNodes[i]=node):enterNodes[i]=d3_selection_dataNode(nodeData);for(;i<m;++i)enterNodes[i]=d3_selection_dataNode(groupData[i]);for(;i<n;++i)exitNodes[i]=group[i]}enterNodes.update=updateNodes,enterNodes.parentNode=updateNodes.parentNode=exitNodes.parentNode=group.parentNode,enter.push(enterNodes),update.push(updateNodes),exit.push(exitNodes)}var enter=d3_selection_enter([]),update=d3_selection([]),exit=d3_selection([]);if("function"==typeof value)for(;++i<n;)bind(group=this[i],value.call(group,group.parentNode.__data__,i));else for(;++i<n;)bind(group=this[i],value);return update.enter=function(){return enter},update.exit=function(){return exit},update},d3_selectionPrototype.datum=function(value){return arguments.length?this.property("__data__",value):this.property("__data__")},d3_selectionPrototype.filter=function(filter){var subgroups=[],subgroup,group,node;"function"!=typeof filter&&(filter=d3_selection_filter(filter));for(var j=0,m=this.length;j<m;j++){subgroups.push(subgroup=[]),subgroup.parentNode=(group=this[j]).parentNode;for(var i=0,n=group.length;i<n;i++)(node=group[i])&&filter.call(node,node.__data__,i,j)&&subgroup.push(node)}return d3_selection(subgroups)},d3_selectionPrototype.order=function(){for(var j=-1,m=this.length;++j<m;)for(var group=this[j],i=group.length-1,next=group[i],node;--i>=0;)(node=group[i])&&(next&&next!==node.nextSibling&&next.parentNode.insertBefore(node,next),next=node);return this},d3_selectionPrototype.sort=function(comparator){comparator=d3_selection_sortComparator.apply(this,arguments);for(var j=-1,m=this.length;++j<m;)this[j].sort(comparator);return this.order()},d3_selectionPrototype.each=function(callback){return d3_selection_each(this,(function(node,i,j){callback.call(node,node.__data__,i,j)}))},d3_selectionPrototype.call=function(callback){var args=d3_array(arguments);return callback.apply(args[0]=this,args),this},d3_selectionPrototype.empty=function(){return!this.node()},d3_selectionPrototype.node=function(){for(var j=0,m=this.length;j<m;j++)for(var group=this[j],i=0,n=group.length;i<n;i++){var node=group[i];if(node)return node}return null},d3_selectionPrototype.size=function(){var n=0;return d3_selection_each(this,(function(){++n})),n};var d3_selection_enterPrototype=[];function d3_selection_enterInsertBefore(enter){var i0,j0;return function(d,i,j){var group=enter[j].update,n=group.length,node;for(j!=j0&&(j0=j,i0=0),i>=i0&&(i0=i+1);!(node=group[i0])&&++i0<n;);return node}}function d3_selection_on(type,listener,capture){var name="__on"+type,i=type.indexOf("."),wrap=d3_selection_onListener;i>0&&(type=type.slice(0,i));var filter=d3_selection_onFilters.get(type);function onRemove(){var l=this[name];l&&(this.removeEventListener(type,l,l.$),delete this[name])}function onAdd(){var l=wrap(listener,d3_array(arguments));onRemove.call(this),this.addEventListener(type,this[name]=l,l.$=capture),l._=listener}function removeAll(){var re=new RegExp("^__on([^.]+)"+d3.requote(type)+"$"),match;for(var name in this)if(match=name.match(re)){var l=this[name];this.removeEventListener(match[1],l,l.$),delete this[name]}}return filter&&(type=filter,wrap=d3_selection_onFilter),i?listener?onAdd:onRemove:listener?d3_noop:removeAll}d3.selection.enter=d3_selection_enter,d3.selection.enter.prototype=d3_selection_enterPrototype,d3_selection_enterPrototype.append=d3_selectionPrototype.append,d3_selection_enterPrototype.empty=d3_selectionPrototype.empty,d3_selection_enterPrototype.node=d3_selectionPrototype.node,d3_selection_enterPrototype.call=d3_selectionPrototype.call,d3_selection_enterPrototype.size=d3_selectionPrototype.size,d3_selection_enterPrototype.select=function(selector){for(var subgroups=[],subgroup,subnode,upgroup,group,node,j=-1,m=this.length;++j<m;){upgroup=(group=this[j]).update,subgroups.push(subgroup=[]),subgroup.parentNode=group.parentNode;for(var i=-1,n=group.length;++i<n;)(node=group[i])?(subgroup.push(upgroup[i]=subnode=selector.call(group.parentNode,node.__data__,i,j)),subnode.__data__=node.__data__):subgroup.push(null)}return d3_selection(subgroups)},d3_selection_enterPrototype.insert=function(name,before){return arguments.length<2&&(before=d3_selection_enterInsertBefore(this)),d3_selectionPrototype.insert.call(this,name,before)},d3.select=function(node){var group;return"string"==typeof node?(group=[d3_select(node,d3_document)]).parentNode=d3_document.documentElement:(group=[node]).parentNode=d3_documentElement(node),d3_selection([group])},d3.selectAll=function(nodes){var group;return"string"==typeof nodes?(group=d3_array(d3_selectAll(nodes,d3_document))).parentNode=d3_document.documentElement:(group=d3_array(nodes)).parentNode=null,d3_selection([group])},d3_selectionPrototype.on=function(type,listener,capture){var n=arguments.length;if(n<3){if("string"!=typeof type){for(capture in n<2&&(listener=!1),type)this.each(d3_selection_on(capture,type[capture],listener));return this}if(n<2)return(n=this.node()["__on"+type])&&n._;capture=!1}return this.each(d3_selection_on(type,listener,capture))};var d3_selection_onFilters=d3.map({mouseenter:"mouseover",mouseleave:"mouseout"});function d3_selection_onListener(listener,argumentz){return function(e){var o=d3.event;d3.event=e,argumentz[0]=this.__data__;try{listener.apply(this,argumentz)}finally{d3.event=o}}}function d3_selection_onFilter(listener,argumentz){var l=d3_selection_onListener(listener,argumentz);return function(e){var target=this,related=e.relatedTarget;related&&(related===this||8&related.compareDocumentPosition(this))||l.call(this,e)}}d3_document&&d3_selection_onFilters.forEach((function(k){"on"+k in d3_document&&d3_selection_onFilters.remove(k)}));var d3_event_dragSelect,d3_event_dragId=0;function d3_event_dragSuppress(node){var name=".dragsuppress-"+ ++d3_event_dragId,click="click"+name,w=d3.select(d3_window(node)).on("touchmove"+name,d3_eventPreventDefault).on("dragstart"+name,d3_eventPreventDefault).on("selectstart"+name,d3_eventPreventDefault);if(null==d3_event_dragSelect&&(d3_event_dragSelect=!("onselectstart"in node)&&d3_vendorSymbol(node.style,"userSelect")),d3_event_dragSelect){var style=d3_documentElement(node).style,select=style[d3_event_dragSelect];style[d3_event_dragSelect]="none"}return function(suppressClick){if(w.on(name,null),d3_event_dragSelect&&(style[d3_event_dragSelect]=select),suppressClick){var off=function(){w.on(click,null)};w.on(click,(function(){d3_eventPreventDefault(),off()}),!0),setTimeout(off,0)}}}d3.mouse=function(container){return d3_mousePoint(container,d3_eventSource())};var d3_mouse_bug44083=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function d3_mousePoint(container,e){e.changedTouches&&(e=e.changedTouches[0]);var svg=container.ownerSVGElement||container;if(svg.createSVGPoint){var point=svg.createSVGPoint();if(d3_mouse_bug44083<0){var window=d3_window(container);if(window.scrollX||window.scrollY){var ctm=(svg=d3.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();d3_mouse_bug44083=!(ctm.f||ctm.e),svg.remove()}}return d3_mouse_bug44083?(point.x=e.pageX,point.y=e.pageY):(point.x=e.clientX,point.y=e.clientY),[(point=point.matrixTransform(container.getScreenCTM().inverse())).x,point.y]}var rect=container.getBoundingClientRect();return[e.clientX-rect.left-container.clientLeft,e.clientY-rect.top-container.clientTop]}function d3_behavior_dragTouchId(){return d3.event.changedTouches[0].identifier}d3.touch=function(container,touches,identifier){if(arguments.length<3&&(identifier=touches,touches=d3_eventSource().changedTouches),touches)for(var i=0,n=touches.length,touch;i<n;++i)if((touch=touches[i]).identifier===identifier)return d3_mousePoint(container,touch)},d3.behavior.drag=function(){var event=d3_eventDispatch(drag,"drag","dragstart","dragend"),origin=null,mousedown=dragstart(d3_noop,d3.mouse,d3_window,"mousemove","mouseup"),touchstart=dragstart(d3_behavior_dragTouchId,d3.touch,d3_identity,"touchmove","touchend");function drag(){this.on("mousedown.drag",mousedown).on("touchstart.drag",touchstart)}function dragstart(id,position,subject,move,end){return function(){var that=this,target=d3.event.target.correspondingElement||d3.event.target,parent=that.parentNode,dispatch=event.of(that,arguments),dragged=0,dragId=id(),dragName=".drag"+(null==dragId?"":"-"+dragId),dragOffset,dragSubject=d3.select(subject(target)).on(move+dragName,moved).on(end+dragName,ended),dragRestore=d3_event_dragSuppress(target),position0=position(parent,dragId);function moved(){var position1=position(parent,dragId),dx,dy;position1&&(dx=position1[0]-position0[0],dy=position1[1]-position0[1],dragged|=dx|dy,position0=position1,dispatch({type:"drag",x:position1[0]+dragOffset[0],y:position1[1]+dragOffset[1],dx:dx,dy:dy}))}function ended(){position(parent,dragId)&&(dragSubject.on(move+dragName,null).on(end+dragName,null),dragRestore(dragged),dispatch({type:"dragend"}))}dragOffset=origin?[(dragOffset=origin.apply(that,arguments)).x-position0[0],dragOffset.y-position0[1]]:[0,0],dispatch({type:"dragstart"})}}return drag.origin=function(x){return arguments.length?(origin=x,drag):origin},d3.rebind(drag,event,"on")},d3.touches=function(container,touches){return arguments.length<2&&(touches=d3_eventSource().touches),touches?d3_array(touches).map((function(touch){var point=d3_mousePoint(container,touch);return point.identifier=touch.identifier,point})):[]};var ε=1e-6,ε2=ε*ε,π=Math.PI,τ=2*π,τε=τ-ε,halfπ=π/2,d3_radians=π/180,d3_degrees=180/π;function d3_sgn(x){return x>0?1:x<0?-1:0}function d3_cross2d(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function d3_acos(x){return x>1?0:x<-1?π:Math.acos(x)}function d3_asin(x){return x>1?halfπ:x<-1?-halfπ:Math.asin(x)}function d3_sinh(x){return((x=Math.exp(x))-1/x)/2}function d3_cosh(x){return((x=Math.exp(x))+1/x)/2}function d3_tanh(x){return((x=Math.exp(2*x))-1)/(x+1)}function d3_haversin(x){return(x=Math.sin(x/2))*x}var ρ=Math.SQRT2,ρ2=2,ρ4=4;d3.interpolateZoom=function(p0,p1){var ux0=p0[0],uy0=p0[1],w0=p0[2],ux1=p1[0],uy1=p1[1],w1=p1[2],dx=ux1-ux0,dy=uy1-uy0,d2=dx*dx+dy*dy,i,S;if(d2<ε2)S=Math.log(w1/w0)/ρ,i=function(t){return[ux0+t*dx,uy0+t*dy,w0*Math.exp(ρ*t*S)]};else{var d1=Math.sqrt(d2),b0=(w1*w1-w0*w0+4*d2)/(2*w0*2*d1),b1=(w1*w1-w0*w0-4*d2)/(2*w1*2*d1),r0=Math.log(Math.sqrt(b0*b0+1)-b0),r1=Math.log(Math.sqrt(b1*b1+1)-b1);S=(r1-r0)/ρ,i=function(t){var s=t*S,coshr0=d3_cosh(r0),u=w0/(2*d1)*(coshr0*d3_tanh(ρ*s+r0)-d3_sinh(r0));return[ux0+u*dx,uy0+u*dy,w0*coshr0/d3_cosh(ρ*s+r0)]}}return i.duration=1e3*S,i},d3.behavior.zoom=function(){var view={x:0,y:0,k:1},translate0,center0,center,size=[960,500],scaleExtent=d3_behavior_zoomInfinity,duration=250,zooming=0,mousedown="mousedown.zoom",mousemove="mousemove.zoom",mouseup="mouseup.zoom",mousewheelTimer,touchstart="touchstart.zoom",touchtime,event=d3_eventDispatch(zoom,"zoomstart","zoom","zoomend"),x0,x1,y0,y1;function zoom(g){g.on(mousedown,mousedowned).on(d3_behavior_zoomWheel+".zoom",mousewheeled).on("dblclick.zoom",dblclicked).on(touchstart,touchstarted)}function location(p){return[(p[0]-view.x)/view.k,(p[1]-view.y)/view.k]}function point(l){return[l[0]*view.k+view.x,l[1]*view.k+view.y]}function scaleTo(s){view.k=Math.max(scaleExtent[0],Math.min(scaleExtent[1],s))}function translateTo(p,l){l=point(l),view.x+=p[0]-l[0],view.y+=p[1]-l[1]}function zoomTo(that,p,l,k){that.__chart__={x:view.x,y:view.y,k:view.k},scaleTo(Math.pow(2,k)),translateTo(center0=p,l),that=d3.select(that),duration>0&&(that=that.transition().duration(duration)),that.call(zoom.event)}function rescale(){x1&&x1.domain(x0.range().map((function(x){return(x-view.x)/view.k})).map(x0.invert)),y1&&y1.domain(y0.range().map((function(y){return(y-view.y)/view.k})).map(y0.invert))}function zoomstarted(dispatch){zooming++||dispatch({type:"zoomstart"})}function zoomed(dispatch){rescale(),dispatch({type:"zoom",scale:view.k,translate:[view.x,view.y]})}function zoomended(dispatch){--zooming||(dispatch({type:"zoomend"}),center0=null)}function mousedowned(){var that=this,dispatch=event.of(that,arguments),dragged=0,subject=d3.select(d3_window(that)).on(mousemove,moved).on(mouseup,ended),location0=location(d3.mouse(that)),dragRestore=d3_event_dragSuppress(that);function moved(){dragged=1,translateTo(d3.mouse(that),location0),zoomed(dispatch)}function ended(){subject.on(mousemove,null).on(mouseup,null),dragRestore(dragged),zoomended(dispatch)}d3_selection_interrupt.call(that),zoomstarted(dispatch)}function touchstarted(){var that=this,dispatch=event.of(that,arguments),locations0={},distance0=0,scale0,zoomName=".zoom-"+d3.event.changedTouches[0].identifier,touchmove="touchmove"+zoomName,touchend="touchend"+zoomName,targets=[],subject=d3.select(that),dragRestore=d3_event_dragSuppress(that);function relocate(){var touches=d3.touches(that);return scale0=view.k,touches.forEach((function(t){t.identifier in locations0&&(locations0[t.identifier]=location(t))})),touches}function started(){var target=d3.event.target;d3.select(target).on(touchmove,moved).on(touchend,ended),targets.push(target);for(var changed=d3.event.changedTouches,i=0,n=changed.length;i<n;++i)locations0[changed[i].identifier]=null;var touches=relocate(),now=Date.now();if(1===touches.length){if(now-touchtime<500){var p=touches[0];zoomTo(that,p,locations0[p.identifier],Math.floor(Math.log(view.k)/Math.LN2)+1),d3_eventPreventDefault()}touchtime=now}else if(touches.length>1){var p=touches[0],q=touches[1],dx=p[0]-q[0],dy=p[1]-q[1];distance0=dx*dx+dy*dy}}function moved(){var touches=d3.touches(that),p0,l0,p1,l1;d3_selection_interrupt.call(that);for(var i=0,n=touches.length;i<n;++i,l1=null)if(p1=touches[i],l1=locations0[p1.identifier]){if(l0)break;p0=p1,l0=l1}if(l1){var distance1=(distance1=p1[0]-p0[0])*distance1+(distance1=p1[1]-p0[1])*distance1,scale1=distance0&&Math.sqrt(distance1/distance0);p0=[(p0[0]+p1[0])/2,(p0[1]+p1[1])/2],l0=[(l0[0]+l1[0])/2,(l0[1]+l1[1])/2],scaleTo(scale1*scale0)}touchtime=null,translateTo(p0,l0),zoomed(dispatch)}function ended(){if(d3.event.touches.length){for(var changed=d3.event.changedTouches,i=0,n=changed.length;i<n;++i)delete locations0[changed[i].identifier];for(var identifier in locations0)return void relocate()}d3.selectAll(targets).on(zoomName,null),subject.on(mousedown,mousedowned).on(touchstart,touchstarted),dragRestore(),zoomended(dispatch)}started(),zoomstarted(dispatch),subject.on(mousedown,null).on(touchstart,started)}function mousewheeled(){var dispatch=event.of(this,arguments);mousewheelTimer?clearTimeout(mousewheelTimer):(d3_selection_interrupt.call(this),translate0=location(center0=center||d3.mouse(this)),zoomstarted(dispatch)),mousewheelTimer=setTimeout((function(){mousewheelTimer=null,zoomended(dispatch)}),50),d3_eventPreventDefault(),scaleTo(Math.pow(2,.002*d3_behavior_zoomDelta())*view.k),translateTo(center0,translate0),zoomed(dispatch)}function dblclicked(){var p=d3.mouse(this),k=Math.log(view.k)/Math.LN2;zoomTo(this,p,location(p),d3.event.shiftKey?Math.ceil(k)-1:Math.floor(k)+1)}return d3_behavior_zoomWheel||(d3_behavior_zoomWheel="onwheel"in d3_document?(d3_behavior_zoomDelta=function(){return-d3.event.deltaY*(d3.event.deltaMode?120:1)},"wheel"):"onmousewheel"in d3_document?(d3_behavior_zoomDelta=function(){return d3.event.wheelDelta},"mousewheel"):(d3_behavior_zoomDelta=function(){return-d3.event.detail},"MozMousePixelScroll")),zoom.event=function(g){g.each((function(){var dispatch=event.of(this,arguments),view1=view;d3_transitionInheritId?d3.select(this).transition().each("start.zoom",(function(){view=this.__chart__||{x:0,y:0,k:1},zoomstarted(dispatch)})).tween("zoom:zoom",(function(){var dx=size[0],dy=size[1],cx=center0?center0[0]:dx/2,cy=center0?center0[1]:dy/2,i=d3.interpolateZoom([(cx-view.x)/view.k,(cy-view.y)/view.k,dx/view.k],[(cx-view1.x)/view1.k,(cy-view1.y)/view1.k,dx/view1.k]);return function(t){var l=i(t),k=dx/l[2];this.__chart__=view={x:cx-l[0]*k,y:cy-l[1]*k,k:k},zoomed(dispatch)}})).each("interrupt.zoom",(function(){zoomended(dispatch)})).each("end.zoom",(function(){zoomended(dispatch)})):(this.__chart__=view,zoomstarted(dispatch),zoomed(dispatch),zoomended(dispatch))}))},zoom.translate=function(_){return arguments.length?(view={x:+_[0],y:+_[1],k:view.k},rescale(),zoom):[view.x,view.y]},zoom.scale=function(_){return arguments.length?(view={x:view.x,y:view.y,k:null},scaleTo(+_),rescale(),zoom):view.k},zoom.scaleExtent=function(_){return arguments.length?(scaleExtent=null==_?d3_behavior_zoomInfinity:[+_[0],+_[1]],zoom):scaleExtent},zoom.center=function(_){return arguments.length?(center=_&&[+_[0],+_[1]],zoom):center},zoom.size=function(_){return arguments.length?(size=_&&[+_[0],+_[1]],zoom):size},zoom.duration=function(_){return arguments.length?(duration=+_,zoom):duration},zoom.x=function(z){return arguments.length?(x1=z,x0=z.copy(),view={x:0,y:0,k:1},zoom):x1},zoom.y=function(z){return arguments.length?(y1=z,y0=z.copy(),view={x:0,y:0,k:1},zoom):y1},d3.rebind(zoom,event,"on")};var d3_behavior_zoomInfinity=[0,1/0],d3_behavior_zoomDelta,d3_behavior_zoomWheel;function d3_color(){}function d3_hsl(h,s,l){return this instanceof d3_hsl?(this.h=+h,this.s=+s,void(this.l=+l)):arguments.length<2?h instanceof d3_hsl?new d3_hsl(h.h,h.s,h.l):d3_rgb_parse(""+h,d3_rgb_hsl,d3_hsl):new d3_hsl(h,s,l)}d3.color=d3_color,d3_color.prototype.toString=function(){return this.rgb()+""},d3.hsl=d3_hsl;var d3_hslPrototype=d3_hsl.prototype=new d3_color;function d3_hsl_rgb(h,s,l){var m1,m2;function v(h){return h>360?h-=360:h<0&&(h+=360),h<60?m1+(m2-m1)*h/60:h<180?m2:h<240?m1+(m2-m1)*(240-h)/60:m1}function vv(h){return Math.round(255*v(h))}return h=isNaN(h)?0:(h%=360)<0?h+360:h,s=isNaN(s)?0:s<0?0:s>1?1:s,m1=2*(l=l<0?0:l>1?1:l)-(m2=l<=.5?l*(1+s):l+s-l*s),new d3_rgb(vv(h+120),vv(h),vv(h-120))}function d3_hcl(h,c,l){return this instanceof d3_hcl?(this.h=+h,this.c=+c,void(this.l=+l)):arguments.length<2?h instanceof d3_hcl?new d3_hcl(h.h,h.c,h.l):d3_lab_hcl(h instanceof d3_lab?h.l:(h=d3_rgb_lab((h=d3.rgb(h)).r,h.g,h.b)).l,h.a,h.b):new d3_hcl(h,c,l)}d3_hslPrototype.brighter=function(k){return k=Math.pow(.7,arguments.length?k:1),new d3_hsl(this.h,this.s,this.l/k)},d3_hslPrototype.darker=function(k){return k=Math.pow(.7,arguments.length?k:1),new d3_hsl(this.h,this.s,k*this.l)},d3_hslPrototype.rgb=function(){return d3_hsl_rgb(this.h,this.s,this.l)},d3.hcl=d3_hcl;var d3_hclPrototype=d3_hcl.prototype=new d3_color;function d3_hcl_lab(h,c,l){return isNaN(h)&&(h=0),isNaN(c)&&(c=0),new d3_lab(l,Math.cos(h*=d3_radians)*c,Math.sin(h)*c)}function d3_lab(l,a,b){return this instanceof d3_lab?(this.l=+l,this.a=+a,void(this.b=+b)):arguments.length<2?l instanceof d3_lab?new d3_lab(l.l,l.a,l.b):l instanceof d3_hcl?d3_hcl_lab(l.h,l.c,l.l):d3_rgb_lab((l=d3_rgb(l)).r,l.g,l.b):new d3_lab(l,a,b)}d3_hclPrototype.brighter=function(k){return new d3_hcl(this.h,this.c,Math.min(100,this.l+d3_lab_K*(arguments.length?k:1)))},d3_hclPrototype.darker=function(k){return new d3_hcl(this.h,this.c,Math.max(0,this.l-d3_lab_K*(arguments.length?k:1)))},d3_hclPrototype.rgb=function(){return d3_hcl_lab(this.h,this.c,this.l).rgb()},d3.lab=d3_lab;var d3_lab_K=18,d3_lab_X=.95047,d3_lab_Y=1,d3_lab_Z=1.08883,d3_labPrototype=d3_lab.prototype=new d3_color;function d3_lab_rgb(l,a,b){var y=(l+16)/116,x=y+a/500,z=y-b/200;return new d3_rgb(d3_xyz_rgb(3.2404542*(x=.95047*d3_lab_xyz(x))-1.5371385*(y=1*d3_lab_xyz(y))-.4985314*(z=1.08883*d3_lab_xyz(z))),d3_xyz_rgb(-.969266*x+1.8760108*y+.041556*z),d3_xyz_rgb(.0556434*x-.2040259*y+1.0572252*z))}function d3_lab_hcl(l,a,b){return l>0?new d3_hcl(Math.atan2(b,a)*d3_degrees,Math.sqrt(a*a+b*b),l):new d3_hcl(NaN,NaN,l)}function d3_lab_xyz(x){return x>.206893034?x*x*x:(x-4/29)/7.787037}function d3_xyz_lab(x){return x>.008856?Math.pow(x,1/3):7.787037*x+4/29}function d3_xyz_rgb(r){return Math.round(255*(r<=.00304?12.92*r:1.055*Math.pow(r,1/2.4)-.055))}function d3_rgb(r,g,b){return this instanceof d3_rgb?(this.r=~~r,this.g=~~g,void(this.b=~~b)):arguments.length<2?r instanceof d3_rgb?new d3_rgb(r.r,r.g,r.b):d3_rgb_parse(""+r,d3_rgb,d3_hsl_rgb):new d3_rgb(r,g,b)}function d3_rgbNumber(value){return new d3_rgb(value>>16,value>>8&255,255&value)}function d3_rgbString(value){return d3_rgbNumber(value)+""}d3_labPrototype.brighter=function(k){return new d3_lab(Math.min(100,this.l+d3_lab_K*(arguments.length?k:1)),this.a,this.b)},d3_labPrototype.darker=function(k){return new d3_lab(Math.max(0,this.l-d3_lab_K*(arguments.length?k:1)),this.a,this.b)},d3_labPrototype.rgb=function(){return d3_lab_rgb(this.l,this.a,this.b)},d3.rgb=d3_rgb;var d3_rgbPrototype=d3_rgb.prototype=new d3_color;function d3_rgb_hex(v){return v<16?"0"+Math.max(0,v).toString(16):Math.min(255,v).toString(16)}function d3_rgb_parse(format,rgb,hsl){var r=0,g=0,b=0,m1,m2,color;if(m1=/([a-z]+)\((.*)\)/.exec(format=format.toLowerCase()))switch(m2=m1[2].split(","),m1[1]){case"hsl":return hsl(parseFloat(m2[0]),parseFloat(m2[1])/100,parseFloat(m2[2])/100);case"rgb":return rgb(d3_rgb_parseNumber(m2[0]),d3_rgb_parseNumber(m2[1]),d3_rgb_parseNumber(m2[2]))}return(color=d3_rgb_names.get(format))?rgb(color.r,color.g,color.b):(null==format||"#"!==format.charAt(0)||isNaN(color=parseInt(format.slice(1),16))||(4===format.length?(r=(3840&color)>>4,r|=r>>4,g=240&color,g|=g>>4,b=15&color,b|=b<<4):7===format.length&&(r=(16711680&color)>>16,g=(65280&color)>>8,b=255&color)),rgb(r,g,b))}function d3_rgb_hsl(r,g,b){var min=Math.min(r/=255,g/=255,b/=255),max=Math.max(r,g,b),d=max-min,h,s,l=(max+min)/2;return d?(s=l<.5?d/(max+min):d/(2-max-min),h=r==max?(g-b)/d+(g<b?6:0):g==max?(b-r)/d+2:(r-g)/d+4,h*=60):(h=NaN,s=l>0&&l<1?0:h),new d3_hsl(h,s,l)}function d3_rgb_lab(r,g,b){var x=d3_xyz_lab((.4124564*(r=d3_rgb_xyz(r))+.3575761*(g=d3_rgb_xyz(g))+.1804375*(b=d3_rgb_xyz(b)))/.95047),y=d3_xyz_lab((.2126729*r+.7151522*g+.072175*b)/1),z;return d3_lab(116*y-16,500*(x-y),200*(y-d3_xyz_lab((.0193339*r+.119192*g+.9503041*b)/1.08883)))}function d3_rgb_xyz(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function d3_rgb_parseNumber(c){var f=parseFloat(c);return"%"===c.charAt(c.length-1)?Math.round(2.55*f):f}d3_rgbPrototype.brighter=function(k){k=Math.pow(.7,arguments.length?k:1);var r=this.r,g=this.g,b=this.b,i=30;return r||g||b?(r&&r<i&&(r=i),g&&g<i&&(g=i),b&&b<i&&(b=i),new d3_rgb(Math.min(255,r/k),Math.min(255,g/k),Math.min(255,b/k))):new d3_rgb(i,i,i)},d3_rgbPrototype.darker=function(k){return new d3_rgb((k=Math.pow(.7,arguments.length?k:1))*this.r,k*this.g,k*this.b)},d3_rgbPrototype.hsl=function(){return d3_rgb_hsl(this.r,this.g,this.b)},d3_rgbPrototype.toString=function(){return"#"+d3_rgb_hex(this.r)+d3_rgb_hex(this.g)+d3_rgb_hex(this.b)};var d3_rgb_names=d3.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function d3_functor(v){return"function"==typeof v?v:function(){return v}}function d3_xhrType(response){return function(url,mimeType,callback){return 2===arguments.length&&"function"==typeof mimeType&&(callback=mimeType,mimeType=null),d3_xhr(url,mimeType,response,callback)}}function d3_xhr(url,mimeType,response,callback){var xhr={},dispatch=d3.dispatch("beforesend","progress","load","error"),headers={},request=new XMLHttpRequest,responseType=null;function respond(){var status=request.status,result;if(!status&&d3_xhrHasResponse(request)||status>=200&&status<300||304===status){try{result=response.call(xhr,request)}catch(e){return void dispatch.error.call(xhr,e)}dispatch.load.call(xhr,result)}else dispatch.error.call(xhr,request)}return!this.XDomainRequest||"withCredentials"in request||!/^(http(s)?:)?\/\//.test(url)||(request=new XDomainRequest),"onload"in request?request.onload=request.onerror=respond:request.onreadystatechange=function(){request.readyState>3&&respond()},request.onprogress=function(event){var o=d3.event;d3.event=event;try{dispatch.progress.call(xhr,request)}finally{d3.event=o}},xhr.header=function(name,value){return name=(name+"").toLowerCase(),arguments.length<2?headers[name]:(null==value?delete headers[name]:headers[name]=value+"",xhr)},xhr.mimeType=function(value){return arguments.length?(mimeType=null==value?null:value+"",xhr):mimeType},xhr.responseType=function(value){return arguments.length?(responseType=value,xhr):responseType},xhr.response=function(value){return response=value,xhr},["get","post"].forEach((function(method){xhr[method]=function(){return xhr.send.apply(xhr,[method].concat(d3_array(arguments)))}})),xhr.send=function(method,data,callback){if(2===arguments.length&&"function"==typeof data&&(callback=data,data=null),request.open(method,url,!0),null==mimeType||"accept"in headers||(headers.accept=mimeType+",*/*"),request.setRequestHeader)for(var name in headers)request.setRequestHeader(name,headers[name]);return null!=mimeType&&request.overrideMimeType&&request.overrideMimeType(mimeType),null!=responseType&&(request.responseType=responseType),null!=callback&&xhr.on("error",callback).on("load",(function(request){callback(null,request)})),dispatch.beforesend.call(xhr,request),request.send(null==data?null:data),xhr},xhr.abort=function(){return request.abort(),xhr},d3.rebind(xhr,dispatch,"on"),null==callback?xhr:xhr.get(d3_xhr_fixCallback(callback))}function d3_xhr_fixCallback(callback){return 1===callback.length?function(error,request){callback(null==error?request:null)}:callback}function d3_xhrHasResponse(request){var type=request.responseType;return type&&"text"!==type?request.response:request.responseText}d3_rgb_names.forEach((function(key,value){d3_rgb_names.set(key,d3_rgbNumber(value))})),d3.functor=d3_functor,d3.xhr=d3_xhrType(d3_identity),d3.dsv=function(delimiter,mimeType){var reFormat=new RegExp('["'+delimiter+"\n]"),delimiterCode=delimiter.charCodeAt(0);function dsv(url,row,callback){arguments.length<3&&(callback=row,row=null);var xhr=d3_xhr(url,mimeType,null==row?response:typedResponse(row),callback);return xhr.row=function(_){return arguments.length?xhr.response(null==(row=_)?response:typedResponse(_)):row},xhr}function response(request){return dsv.parse(request.responseText)}function typedResponse(f){return function(request){return dsv.parse(request.responseText,f)}}function formatRow(row){return row.map(formatValue).join(delimiter)}function formatValue(text){return reFormat.test(text)?'"'+text.replace(/\"/g,'""')+'"':text}return dsv.parse=function(text,f){var o;return dsv.parseRows(text,(function(row,i){if(o)return o(row,i-1);var a=new Function("d","return {"+row.map((function(name,i){return JSON.stringify(name)+": d["+i+"]"})).join(",")+"}");o=f?function(row,i){return f(a(row),i)}:a}))},dsv.parseRows=function(text,f){var EOL={},EOF={},rows=[],N=text.length,I=0,n=0,t,eol;function token(){if(I>=N)return EOF;if(eol)return eol=!1,EOL;var j=I;if(34===text.charCodeAt(j)){for(var i=j;i++<N;)if(34===text.charCodeAt(i)){if(34!==text.charCodeAt(i+1))break;++i}var c;return I=i+2,13===(c=text.charCodeAt(i+1))?(eol=!0,10===text.charCodeAt(i+2)&&++I):10===c&&(eol=!0),text.slice(j+1,i).replace(/""/g,'"')}for(;I<N;){var c,k=1;if(10===(c=text.charCodeAt(I++)))eol=!0;else if(13===c)eol=!0,10===text.charCodeAt(I)&&(++I,++k);else if(c!==delimiterCode)continue;return text.slice(j,I-k)}return text.slice(j)}for(;(t=token())!==EOF;){for(var a=[];t!==EOL&&t!==EOF;)a.push(t),t=token();f&&null==(a=f(a,n++))||rows.push(a)}return rows},dsv.format=function(rows){if(Array.isArray(rows[0]))return dsv.formatRows(rows);var fieldSet=new d3_Set,fields=[];return rows.forEach((function(row){for(var field in row)fieldSet.has(field)||fields.push(fieldSet.add(field))})),[fields.map(formatValue).join(delimiter)].concat(rows.map((function(row){return fields.map((function(field){return formatValue(row[field])})).join(delimiter)}))).join("\n")},dsv.formatRows=function(rows){return rows.map(formatRow).join("\n")},dsv},d3.csv=d3.dsv(",","text/csv"),d3.tsv=d3.dsv("\t","text/tab-separated-values");var d3_timer_queueHead,d3_timer_queueTail,d3_timer_interval,d3_timer_timeout,d3_timer_frame=this[d3_vendorSymbol(this,"requestAnimationFrame")]||function(callback){setTimeout(callback,17)};function d3_timer(callback,delay,then){var n=arguments.length;n<2&&(delay=0),n<3&&(then=Date.now());var time=then+delay,timer={c:callback,t:time,n:null};return d3_timer_queueTail?d3_timer_queueTail.n=timer:d3_timer_queueHead=timer,d3_timer_queueTail=timer,d3_timer_interval||(d3_timer_timeout=clearTimeout(d3_timer_timeout),d3_timer_interval=1,d3_timer_frame(d3_timer_step)),timer}function d3_timer_step(){var now=d3_timer_mark(),delay=d3_timer_sweep()-now;delay>24?(isFinite(delay)&&(clearTimeout(d3_timer_timeout),d3_timer_timeout=setTimeout(d3_timer_step,delay)),d3_timer_interval=0):(d3_timer_interval=1,d3_timer_frame(d3_timer_step))}function d3_timer_mark(){for(var now=Date.now(),timer=d3_timer_queueHead;timer;)now>=timer.t&&timer.c(now-timer.t)&&(timer.c=null),timer=timer.n;return now}function d3_timer_sweep(){for(var t0,t1=d3_timer_queueHead,time=1/0;t1;)t1.c?(t1.t<time&&(time=t1.t),t1=(t0=t1).n):t1=t0?t0.n=t1.n:d3_timer_queueHead=t1.n;return d3_timer_queueTail=t0,time}function d3_format_precision(x,p){return p-(x?Math.ceil(Math.log(x)/Math.LN10):1)}d3.timer=function(){d3_timer.apply(this,arguments)},d3.timer.flush=function(){d3_timer_mark(),d3_timer_sweep()},d3.round=function(x,n){return n?Math.round(x*(n=Math.pow(10,n)))/n:Math.round(x)};var d3_formatPrefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(d3_formatPrefix);function d3_formatPrefix(d,i){var k=Math.pow(10,3*abs(8-i));return{scale:i>8?function(d){return d/k}:function(d){return d*k},symbol:d}}function d3_locale_numberFormat(locale){var locale_decimal=locale.decimal,locale_thousands=locale.thousands,locale_grouping=locale.grouping,locale_currency=locale.currency,formatGroup=locale_grouping&&locale_thousands?function(value,width){for(var i=value.length,t=[],j=0,g=locale_grouping[0],length=0;i>0&&g>0&&(length+g+1>width&&(g=Math.max(1,width-length)),t.push(value.substring(i-=g,i+g)),!((length+=g+1)>width));)g=locale_grouping[j=(j+1)%locale_grouping.length];return t.reverse().join(locale_thousands)}:d3_identity;return function(specifier){var match=d3_format_re.exec(specifier),fill=match[1]||" ",align=match[2]||">",sign=match[3]||"-",symbol=match[4]||"",zfill=match[5],width=+match[6],comma=match[7],precision=match[8],type=match[9],scale=1,prefix="",suffix="",integer=!1,exponent=!0;switch(precision&&(precision=+precision.substring(1)),(zfill||"0"===fill&&"="===align)&&(zfill=fill="0",align="="),type){case"n":comma=!0,type="g";break;case"%":scale=100,suffix="%",type="f";break;case"p":scale=100,suffix="%",type="r";break;case"b":case"o":case"x":case"X":"#"===symbol&&(prefix="0"+type.toLowerCase());case"c":exponent=!1;case"d":integer=!0,precision=0;break;case"s":scale=-1,type="r"}"$"===symbol&&(prefix=locale_currency[0],suffix=locale_currency[1]),"r"!=type||precision||(type="g"),null!=precision&&("g"==type?precision=Math.max(1,Math.min(21,precision)):"e"!=type&&"f"!=type||(precision=Math.max(0,Math.min(20,precision)))),type=d3_format_types.get(type)||d3_format_typeDefault;var zcomma=zfill&&comma;return function(value){var fullSuffix=suffix;if(integer&&value%1)return"";var negative=value<0||0===value&&1/value<0?(value=-value,"-"):"-"===sign?"":sign;if(scale<0){var unit=d3.formatPrefix(value,precision);value=unit.scale(value),fullSuffix=unit.symbol+suffix}else value*=scale;var i=(value=type(value,precision)).lastIndexOf("."),before,after;if(i<0){var j=exponent?value.lastIndexOf("e"):-1;j<0?(before=value,after=""):(before=value.substring(0,j),after=value.substring(j))}else before=value.substring(0,i),after=locale_decimal+value.substring(i+1);!zfill&&comma&&(before=formatGroup(before,1/0));var length=prefix.length+before.length+after.length+(zcomma?0:negative.length),padding=length<width?new Array(length=width-length+1).join(fill):"";return zcomma&&(before=formatGroup(padding+before,padding.length?width-after.length:1/0)),negative+=prefix,value=before+after,("<"===align?negative+value+padding:">"===align?padding+negative+value:"^"===align?padding.substring(0,length>>=1)+negative+value+padding.substring(length):negative+(zcomma?value:padding+value))+fullSuffix}}}d3.formatPrefix=function(value,precision){var i=0;return(value=+value)&&(value<0&&(value*=-1),precision&&(value=d3.round(value,d3_format_precision(value,precision))),i=1+Math.floor(1e-12+Math.log(value)/Math.LN10),i=Math.max(-24,Math.min(24,3*Math.floor((i-1)/3)))),d3_formatPrefixes[8+i/3]};var d3_format_re=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,d3_format_types=d3.map({b:function(x){return x.toString(2)},c:function(x){return String.fromCharCode(x)},o:function(x){return x.toString(8)},x:function(x){return x.toString(16)},X:function(x){return x.toString(16).toUpperCase()},g:function(x,p){return x.toPrecision(p)},e:function(x,p){return x.toExponential(p)},f:function(x,p){return x.toFixed(p)},r:function(x,p){return(x=d3.round(x,d3_format_precision(x,p))).toFixed(Math.max(0,Math.min(20,d3_format_precision(x*(1+1e-15),p))))}});function d3_format_typeDefault(x){return x+""}var d3_time=d3.time={},d3_date=Date;function d3_date_utc(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}d3_date_utc.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){d3_time_prototype.setUTCDate.apply(this._,arguments)},setDay:function(){d3_time_prototype.setUTCDay.apply(this._,arguments)},setFullYear:function(){d3_time_prototype.setUTCFullYear.apply(this._,arguments)},setHours:function(){d3_time_prototype.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){d3_time_prototype.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){d3_time_prototype.setUTCMinutes.apply(this._,arguments)},setMonth:function(){d3_time_prototype.setUTCMonth.apply(this._,arguments)},setSeconds:function(){d3_time_prototype.setUTCSeconds.apply(this._,arguments)},setTime:function(){d3_time_prototype.setTime.apply(this._,arguments)}};var d3_time_prototype=Date.prototype;function d3_time_interval(local,step,number){function round(date){var d0=local(date),d1=offset(d0,1);return date-d0<d1-date?d0:d1}function ceil(date){return step(date=local(new d3_date(date-1)),1),date}function offset(date,k){return step(date=new d3_date(+date),k),date}function range(t0,t1,dt){var time=ceil(t0),times=[];if(dt>1)for(;time<t1;)number(time)%dt||times.push(new Date(+time)),step(time,1);else for(;time<t1;)times.push(new Date(+time)),step(time,1);return times}function range_utc(t0,t1,dt){try{d3_date=d3_date_utc;var utc=new d3_date_utc;return utc._=t0,range(utc,t1,dt)}finally{d3_date=Date}}local.floor=local,local.round=round,local.ceil=ceil,local.offset=offset,local.range=range;var utc=local.utc=d3_time_interval_utc(local);return utc.floor=utc,utc.round=d3_time_interval_utc(round),utc.ceil=d3_time_interval_utc(ceil),utc.offset=d3_time_interval_utc(offset),utc.range=range_utc,local}function d3_time_interval_utc(method){return function(date,k){try{d3_date=d3_date_utc;var utc=new d3_date_utc;return utc._=date,method(utc,k)._}finally{d3_date=Date}}}function d3_locale_timeFormat(locale){var locale_dateTime=locale.dateTime,locale_date=locale.date,locale_time=locale.time,locale_periods=locale.periods,locale_days=locale.days,locale_shortDays=locale.shortDays,locale_months=locale.months,locale_shortMonths=locale.shortMonths;function d3_time_format(template){var n=template.length;function format(date){for(var string=[],i=-1,j=0,c,p,f;++i<n;)37===template.charCodeAt(i)&&(string.push(template.slice(j,i)),null!=(p=d3_time_formatPads[c=template.charAt(++i)])&&(c=template.charAt(++i)),(f=d3_time_formats[c])&&(c=f(date,null==p?"e"===c?" ":"0":p)),string.push(c),j=i+1);return string.push(template.slice(j,i)),string.join("")}return format.parse=function(string){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i;if(d3_time_parse(d,template,string,0)!=string.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);var localZ=null!=d.Z&&d3_date!==d3_date_utc,date=new(localZ?d3_date_utc:d3_date);return"j"in d?date.setFullYear(d.y,0,d.j):"W"in d||"U"in d?("w"in d||(d.w="W"in d?1:0),date.setFullYear(d.y,0,1),date.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(date.getDay()+5)%7:d.w+7*d.U-(date.getDay()+6)%7)):date.setFullYear(d.y,d.m,d.d),date.setHours(d.H+(d.Z/100|0),d.M+d.Z%100,d.S,d.L),localZ?date._:date},format.toString=function(){return template},format}function d3_time_parse(date,template,string,j){for(var c,p,t,i=0,n=template.length,m=string.length;i<n;){if(j>=m)return-1;if(37===(c=template.charCodeAt(i++))){if(t=template.charAt(i++),!(p=d3_time_parsers[t in d3_time_formatPads?template.charAt(i++):t])||(j=p(date,string,j))<0)return-1}else if(c!=string.charCodeAt(j++))return-1}return j}d3_time_format.utc=function(template){var local=d3_time_format(template);function format(date){try{var utc=new(d3_date=d3_date_utc);return utc._=date,local(utc)}finally{d3_date=Date}}return format.parse=function(string){try{d3_date=d3_date_utc;var date=local.parse(string);return date&&date._}finally{d3_date=Date}},format.toString=local.toString,format},d3_time_format.multi=d3_time_format.utc.multi=d3_time_formatMulti;var d3_time_periodLookup=d3.map(),d3_time_dayRe=d3_time_formatRe(locale_days),d3_time_dayLookup=d3_time_formatLookup(locale_days),d3_time_dayAbbrevRe=d3_time_formatRe(locale_shortDays),d3_time_dayAbbrevLookup=d3_time_formatLookup(locale_shortDays),d3_time_monthRe=d3_time_formatRe(locale_months),d3_time_monthLookup=d3_time_formatLookup(locale_months),d3_time_monthAbbrevRe=d3_time_formatRe(locale_shortMonths),d3_time_monthAbbrevLookup=d3_time_formatLookup(locale_shortMonths);locale_periods.forEach((function(p,i){d3_time_periodLookup.set(p.toLowerCase(),i)}));var d3_time_formats={a:function(d){return locale_shortDays[d.getDay()]},A:function(d){return locale_days[d.getDay()]},b:function(d){return locale_shortMonths[d.getMonth()]},B:function(d){return locale_months[d.getMonth()]},c:d3_time_format(locale_dateTime),d:function(d,p){return d3_time_formatPad(d.getDate(),p,2)},e:function(d,p){return d3_time_formatPad(d.getDate(),p,2)},H:function(d,p){return d3_time_formatPad(d.getHours(),p,2)},I:function(d,p){return d3_time_formatPad(d.getHours()%12||12,p,2)},j:function(d,p){return d3_time_formatPad(1+d3_time.dayOfYear(d),p,3)},L:function(d,p){return d3_time_formatPad(d.getMilliseconds(),p,3)},m:function(d,p){return d3_time_formatPad(d.getMonth()+1,p,2)},M:function(d,p){return d3_time_formatPad(d.getMinutes(),p,2)},p:function(d){return locale_periods[+(d.getHours()>=12)]},S:function(d,p){return d3_time_formatPad(d.getSeconds(),p,2)},U:function(d,p){return d3_time_formatPad(d3_time.sundayOfYear(d),p,2)},w:function(d){return d.getDay()},W:function(d,p){return d3_time_formatPad(d3_time.mondayOfYear(d),p,2)},x:d3_time_format(locale_date),X:d3_time_format(locale_time),y:function(d,p){return d3_time_formatPad(d.getFullYear()%100,p,2)},Y:function(d,p){return d3_time_formatPad(d.getFullYear()%1e4,p,4)},Z:d3_time_zone,"%":function(){return"%"}},d3_time_parsers={a:d3_time_parseWeekdayAbbrev,A:d3_time_parseWeekday,b:d3_time_parseMonthAbbrev,B:d3_time_parseMonth,c:d3_time_parseLocaleFull,d:d3_time_parseDay,e:d3_time_parseDay,H:d3_time_parseHour24,I:d3_time_parseHour24,j:d3_time_parseDayOfYear,L:d3_time_parseMilliseconds,m:d3_time_parseMonthNumber,M:d3_time_parseMinutes,p:d3_time_parseAmPm,S:d3_time_parseSeconds,U:d3_time_parseWeekNumberSunday,w:d3_time_parseWeekdayNumber,W:d3_time_parseWeekNumberMonday,x:d3_time_parseLocaleDate,X:d3_time_parseLocaleTime,y:d3_time_parseYear,Y:d3_time_parseFullYear,Z:d3_time_parseZone,"%":d3_time_parseLiteralPercent};function d3_time_parseWeekdayAbbrev(date,string,i){d3_time_dayAbbrevRe.lastIndex=0;var n=d3_time_dayAbbrevRe.exec(string.slice(i));return n?(date.w=d3_time_dayAbbrevLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function d3_time_parseWeekday(date,string,i){d3_time_dayRe.lastIndex=0;var n=d3_time_dayRe.exec(string.slice(i));return n?(date.w=d3_time_dayLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function d3_time_parseMonthAbbrev(date,string,i){d3_time_monthAbbrevRe.lastIndex=0;var n=d3_time_monthAbbrevRe.exec(string.slice(i));return n?(date.m=d3_time_monthAbbrevLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function d3_time_parseMonth(date,string,i){d3_time_monthRe.lastIndex=0;var n=d3_time_monthRe.exec(string.slice(i));return n?(date.m=d3_time_monthLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function d3_time_parseLocaleFull(date,string,i){return d3_time_parse(date,d3_time_formats.c.toString(),string,i)}function d3_time_parseLocaleDate(date,string,i){return d3_time_parse(date,d3_time_formats.x.toString(),string,i)}function d3_time_parseLocaleTime(date,string,i){return d3_time_parse(date,d3_time_formats.X.toString(),string,i)}function d3_time_parseAmPm(date,string,i){var n=d3_time_periodLookup.get(string.slice(i,i+=2).toLowerCase());return null==n?-1:(date.p=n,i)}return d3_time_format}d3_time.year=d3_time_interval((function(date){return(date=d3_time.day(date)).setMonth(0,1),date}),(function(date,offset){date.setFullYear(date.getFullYear()+offset)}),(function(date){return date.getFullYear()})),d3_time.years=d3_time.year.range,d3_time.years.utc=d3_time.year.utc.range,d3_time.day=d3_time_interval((function(date){var day=new d3_date(2e3,0);return day.setFullYear(date.getFullYear(),date.getMonth(),date.getDate()),day}),(function(date,offset){date.setDate(date.getDate()+offset)}),(function(date){return date.getDate()-1})),d3_time.days=d3_time.day.range,d3_time.days.utc=d3_time.day.utc.range,d3_time.dayOfYear=function(date){var year=d3_time.year(date);return Math.floor((date-year-6e4*(date.getTimezoneOffset()-year.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach((function(day,i){i=7-i;var interval=d3_time[day]=d3_time_interval((function(date){return(date=d3_time.day(date)).setDate(date.getDate()-(date.getDay()+i)%7),date}),(function(date,offset){date.setDate(date.getDate()+7*Math.floor(offset))}),(function(date){var day=d3_time.year(date).getDay();return Math.floor((d3_time.dayOfYear(date)+(day+i)%7)/7)-(day!==i)}));d3_time[day+"s"]=interval.range,d3_time[day+"s"].utc=interval.utc.range,d3_time[day+"OfYear"]=function(date){var day=d3_time.year(date).getDay();return Math.floor((d3_time.dayOfYear(date)+(day+i)%7)/7)}})),d3_time.week=d3_time.sunday,d3_time.weeks=d3_time.sunday.range,d3_time.weeks.utc=d3_time.sunday.utc.range,d3_time.weekOfYear=d3_time.sundayOfYear;var d3_time_formatPads={"-":"",_:" ",0:"0"},d3_time_numberRe=/^\s*\d+/,d3_time_percentRe=/^%/;function d3_time_formatPad(value,fill,width){var sign=value<0?"-":"",string=(sign?-value:value)+"",length=string.length;return sign+(length<width?new Array(width-length+1).join(fill)+string:string)}function d3_time_formatRe(names){return new RegExp("^(?:"+names.map(d3.requote).join("|")+")","i")}function d3_time_formatLookup(names){for(var map=new d3_Map,i=-1,n=names.length;++i<n;)map.set(names[i].toLowerCase(),i);return map}function d3_time_parseWeekdayNumber(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+1));return n?(date.w=+n[0],i+n[0].length):-1}function d3_time_parseWeekNumberSunday(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i));return n?(date.U=+n[0],i+n[0].length):-1}function d3_time_parseWeekNumberMonday(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i));return n?(date.W=+n[0],i+n[0].length):-1}function d3_time_parseFullYear(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+4));return n?(date.y=+n[0],i+n[0].length):-1}function d3_time_parseYear(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.y=d3_time_expandYear(+n[0]),i+n[0].length):-1}function d3_time_parseZone(date,string,i){return/^[+-]\d{4}$/.test(string=string.slice(i,i+5))?(date.Z=-string,i+5):-1}function d3_time_expandYear(d){return d+(d>68?1900:2e3)}function d3_time_parseMonthNumber(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.m=n[0]-1,i+n[0].length):-1}function d3_time_parseDay(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.d=+n[0],i+n[0].length):-1}function d3_time_parseDayOfYear(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+3));return n?(date.j=+n[0],i+n[0].length):-1}function d3_time_parseHour24(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.H=+n[0],i+n[0].length):-1}function d3_time_parseMinutes(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.M=+n[0],i+n[0].length):-1}function d3_time_parseSeconds(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+2));return n?(date.S=+n[0],i+n[0].length):-1}function d3_time_parseMilliseconds(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.slice(i,i+3));return n?(date.L=+n[0],i+n[0].length):-1}function d3_time_zone(d){var z=d.getTimezoneOffset(),zs=z>0?"-":"+",zh=abs(z)/60|0,zm=abs(z)%60;return zs+d3_time_formatPad(zh,"0",2)+d3_time_formatPad(zm,"0",2)}function d3_time_parseLiteralPercent(date,string,i){d3_time_percentRe.lastIndex=0;var n=d3_time_percentRe.exec(string.slice(i,i+1));return n?i+n[0].length:-1}function d3_time_formatMulti(formats){for(var n=formats.length,i=-1;++i<n;)formats[i][0]=this(formats[i][0]);return function(date){for(var i=0,f=formats[i];!f[1](date);)f=formats[++i];return f[0](date)}}d3.locale=function(locale){return{numberFormat:d3_locale_numberFormat(locale),timeFormat:d3_locale_timeFormat(locale)}};var d3_locale_enUS=d3.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function d3_adder(){}d3.format=d3_locale_enUS.numberFormat,d3.geo={},d3_adder.prototype={s:0,t:0,add:function(y){d3_adderSum(y,this.t,d3_adderTemp),d3_adderSum(d3_adderTemp.s,this.s,this),this.s?this.t+=d3_adderTemp.t:this.s=d3_adderTemp.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var d3_adderTemp=new d3_adder;function d3_adderSum(a,b,o){var x=o.s=a+b,bv=x-a,av=x-bv;o.t=a-av+(b-bv)}function d3_geo_streamGeometry(geometry,listener){geometry&&d3_geo_streamGeometryType.hasOwnProperty(geometry.type)&&d3_geo_streamGeometryType[geometry.type](geometry,listener)}d3.geo.stream=function(object,listener){object&&d3_geo_streamObjectType.hasOwnProperty(object.type)?d3_geo_streamObjectType[object.type](object,listener):d3_geo_streamGeometry(object,listener)};var d3_geo_streamObjectType={Feature:function(feature,listener){d3_geo_streamGeometry(feature.geometry,listener)},FeatureCollection:function(object,listener){for(var features=object.features,i=-1,n=features.length;++i<n;)d3_geo_streamGeometry(features[i].geometry,listener)}},d3_geo_streamGeometryType={Sphere:function(object,listener){listener.sphere()},Point:function(object,listener){object=object.coordinates,listener.point(object[0],object[1],object[2])},MultiPoint:function(object,listener){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)object=coordinates[i],listener.point(object[0],object[1],object[2])},LineString:function(object,listener){d3_geo_streamLine(object.coordinates,listener,0)},MultiLineString:function(object,listener){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)d3_geo_streamLine(coordinates[i],listener,0)},Polygon:function(object,listener){d3_geo_streamPolygon(object.coordinates,listener)},MultiPolygon:function(object,listener){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)d3_geo_streamPolygon(coordinates[i],listener)},GeometryCollection:function(object,listener){for(var geometries=object.geometries,i=-1,n=geometries.length;++i<n;)d3_geo_streamGeometry(geometries[i],listener)}};function d3_geo_streamLine(coordinates,listener,closed){var i=-1,n=coordinates.length-closed,coordinate;for(listener.lineStart();++i<n;)coordinate=coordinates[i],listener.point(coordinate[0],coordinate[1],coordinate[2]);listener.lineEnd()}function d3_geo_streamPolygon(coordinates,listener){var i=-1,n=coordinates.length;for(listener.polygonStart();++i<n;)d3_geo_streamLine(coordinates[i],listener,1);listener.polygonEnd()}d3.geo.area=function(object){return d3_geo_areaSum=0,d3.geo.stream(object,d3_geo_area),d3_geo_areaSum};var d3_geo_areaSum,d3_geo_areaRingSum=new d3_adder,d3_geo_area={sphere:function(){d3_geo_areaSum+=4*π},point:d3_noop,lineStart:d3_noop,lineEnd:d3_noop,polygonStart:function(){d3_geo_areaRingSum.reset(),d3_geo_area.lineStart=d3_geo_areaRingStart},polygonEnd:function(){var area=2*d3_geo_areaRingSum;d3_geo_areaSum+=area<0?4*π+area:area,d3_geo_area.lineStart=d3_geo_area.lineEnd=d3_geo_area.point=d3_noop}},d3_geo_centroidW0,d3_geo_centroidW1,d3_geo_centroidX0,d3_geo_centroidY0,d3_geo_centroidZ0,d3_geo_centroidX1,d3_geo_centroidY1,d3_geo_centroidZ1,d3_geo_centroidX2,d3_geo_centroidY2,d3_geo_centroidZ2;function d3_geo_areaRingStart(){var λ00,φ00,λ0,cosφ0,sinφ0;function nextPoint(λ,φ){φ=φ*d3_radians/2+π/4;var dλ=(λ*=d3_radians)-λ0,sdλ=dλ>=0?1:-1,adλ=sdλ*dλ,cosφ=Math.cos(φ),sinφ=Math.sin(φ),k=sinφ0*sinφ,u=cosφ0*cosφ+k*Math.cos(adλ),v=k*sdλ*Math.sin(adλ);d3_geo_areaRingSum.add(Math.atan2(v,u)),λ0=λ,cosφ0=cosφ,sinφ0=sinφ}d3_geo_area.point=function(λ,φ){d3_geo_area.point=nextPoint,λ0=(λ00=λ)*d3_radians,cosφ0=Math.cos(φ=(φ00=φ)*d3_radians/2+π/4),sinφ0=Math.sin(φ)},d3_geo_area.lineEnd=function(){nextPoint(λ00,φ00)}}function d3_geo_cartesian(spherical){var λ=spherical[0],φ=spherical[1],cosφ=Math.cos(φ);return[cosφ*Math.cos(λ),cosφ*Math.sin(λ),Math.sin(φ)]}function d3_geo_cartesianDot(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function d3_geo_cartesianCross(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function d3_geo_cartesianAdd(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function d3_geo_cartesianScale(vector,k){return[vector[0]*k,vector[1]*k,vector[2]*k]}function d3_geo_cartesianNormalize(d){var l=Math.sqrt(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]);d[0]/=l,d[1]/=l,d[2]/=l}function d3_geo_spherical(cartesian){return[Math.atan2(cartesian[1],cartesian[0]),d3_asin(cartesian[2])]}function d3_geo_sphericalEqual(a,b){return abs(a[0]-b[0])<ε&&abs(a[1]-b[1])<ε}d3.geo.bounds=function(){var λ0,φ0,λ1,φ1,λ_,λ__,φ__,p0,dλSum,ranges,range,bound={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){bound.point=ringPoint,bound.lineStart=ringStart,bound.lineEnd=ringEnd,dλSum=0,d3_geo_area.polygonStart()},polygonEnd:function(){d3_geo_area.polygonEnd(),bound.point=point,bound.lineStart=lineStart,bound.lineEnd=lineEnd,d3_geo_areaRingSum<0?(λ0=-(λ1=180),φ0=-(φ1=90)):dλSum>ε?φ1=90:dλSum<-ε&&(φ0=-90),range[0]=λ0,range[1]=λ1}};function point(λ,φ){ranges.push(range=[λ0=λ,λ1=λ]),φ<φ0&&(φ0=φ),φ>φ1&&(φ1=φ)}function linePoint(λ,φ){var p=d3_geo_cartesian([λ*d3_radians,φ*d3_radians]);if(p0){var normal=d3_geo_cartesianCross(p0,p),equatorial,inflection=d3_geo_cartesianCross([normal[1],-normal[0],0],normal);d3_geo_cartesianNormalize(inflection),inflection=d3_geo_spherical(inflection);var dλ=λ-λ_,s=dλ>0?1:-1,λi=inflection[0]*d3_degrees*s,antimeridian=abs(dλ)>180,φi;if(antimeridian^(s*λ_<λi&&λi<s*λ))(φi=inflection[1]*d3_degrees)>φ1&&(φ1=φi);else if(antimeridian^(s*λ_<(λi=(λi+360)%360-180)&&λi<s*λ)){var φi;(φi=-inflection[1]*d3_degrees)<φ0&&(φ0=φi)}else φ<φ0&&(φ0=φ),φ>φ1&&(φ1=φ);antimeridian?λ<λ_?angle(λ0,λ)>angle(λ0,λ1)&&(λ1=λ):angle(λ,λ1)>angle(λ0,λ1)&&(λ0=λ):λ1>=λ0?(λ<λ0&&(λ0=λ),λ>λ1&&(λ1=λ)):λ>λ_?angle(λ0,λ)>angle(λ0,λ1)&&(λ1=λ):angle(λ,λ1)>angle(λ0,λ1)&&(λ0=λ)}else point(λ,φ);p0=p,λ_=λ}function lineStart(){bound.point=linePoint}function lineEnd(){range[0]=λ0,range[1]=λ1,bound.point=point,p0=null}function ringPoint(λ,φ){if(p0){var dλ=λ-λ_;dλSum+=abs(dλ)>180?dλ+(dλ>0?360:-360):dλ}else λ__=λ,φ__=φ;d3_geo_area.point(λ,φ),linePoint(λ,φ)}function ringStart(){d3_geo_area.lineStart()}function ringEnd(){ringPoint(λ__,φ__),d3_geo_area.lineEnd(),abs(dλSum)>ε&&(λ0=-(λ1=180)),range[0]=λ0,range[1]=λ1,p0=null}function angle(λ0,λ1){return(λ1-=λ0)<0?λ1+360:λ1}function compareRanges(a,b){return a[0]-b[0]}function withinRange(x,range){return range[0]<=range[1]?range[0]<=x&&x<=range[1]:x<range[0]||range[1]<x}return function(feature){var n;if(φ1=λ1=-(λ0=φ0=1/0),ranges=[],d3.geo.stream(feature,bound),n=ranges.length){ranges.sort(compareRanges);for(var i=1,a,b,merged=[a=ranges[0]];i<n;++i)withinRange((b=ranges[i])[0],a)||withinRange(b[1],a)?(angle(a[0],b[1])>angle(a[0],a[1])&&(a[1]=b[1]),angle(b[0],a[1])>angle(a[0],a[1])&&(a[0]=b[0])):merged.push(a=b);for(var best=-1/0,dλ,n,i=0,a=merged[n=merged.length-1],b;i<=n;a=b,++i)b=merged[i],(dλ=angle(a[1],b[0]))>best&&(best=dλ,λ0=b[0],λ1=a[1])}return ranges=range=null,λ0===1/0||φ0===1/0?[[NaN,NaN],[NaN,NaN]]:[[λ0,φ0],[λ1,φ1]]}}(),d3.geo.centroid=function(object){d3_geo_centroidW0=d3_geo_centroidW1=d3_geo_centroidX0=d3_geo_centroidY0=d3_geo_centroidZ0=d3_geo_centroidX1=d3_geo_centroidY1=d3_geo_centroidZ1=d3_geo_centroidX2=d3_geo_centroidY2=d3_geo_centroidZ2=0,d3.geo.stream(object,d3_geo_centroid);var x=d3_geo_centroidX2,y=d3_geo_centroidY2,z=d3_geo_centroidZ2,m=x*x+y*y+z*z;return m<ε2&&(x=d3_geo_centroidX1,y=d3_geo_centroidY1,z=d3_geo_centroidZ1,d3_geo_centroidW1<ε&&(x=d3_geo_centroidX0,y=d3_geo_centroidY0,z=d3_geo_centroidZ0),(m=x*x+y*y+z*z)<ε2)?[NaN,NaN]:[Math.atan2(y,x)*d3_degrees,d3_asin(z/Math.sqrt(m))*d3_degrees]};var d3_geo_centroid={sphere:d3_noop,point:d3_geo_centroidPoint,lineStart:d3_geo_centroidLineStart,lineEnd:d3_geo_centroidLineEnd,polygonStart:function(){d3_geo_centroid.lineStart=d3_geo_centroidRingStart},polygonEnd:function(){d3_geo_centroid.lineStart=d3_geo_centroidLineStart}};function d3_geo_centroidPoint(λ,φ){λ*=d3_radians;var cosφ=Math.cos(φ*=d3_radians);d3_geo_centroidPointXYZ(cosφ*Math.cos(λ),cosφ*Math.sin(λ),Math.sin(φ))}function d3_geo_centroidPointXYZ(x,y,z){++d3_geo_centroidW0,d3_geo_centroidX0+=(x-d3_geo_centroidX0)/d3_geo_centroidW0,d3_geo_centroidY0+=(y-d3_geo_centroidY0)/d3_geo_centroidW0,d3_geo_centroidZ0+=(z-d3_geo_centroidZ0)/d3_geo_centroidW0}function d3_geo_centroidLineStart(){var x0,y0,z0;function nextPoint(λ,φ){λ*=d3_radians;var cosφ=Math.cos(φ*=d3_radians),x=cosφ*Math.cos(λ),y=cosφ*Math.sin(λ),z=Math.sin(φ),w=Math.atan2(Math.sqrt((w=y0*z-z0*y)*w+(w=z0*x-x0*z)*w+(w=x0*y-y0*x)*w),x0*x+y0*y+z0*z);d3_geo_centroidW1+=w,d3_geo_centroidX1+=w*(x0+(x0=x)),d3_geo_centroidY1+=w*(y0+(y0=y)),d3_geo_centroidZ1+=w*(z0+(z0=z)),d3_geo_centroidPointXYZ(x0,y0,z0)}d3_geo_centroid.point=function(λ,φ){λ*=d3_radians;var cosφ=Math.cos(φ*=d3_radians);x0=cosφ*Math.cos(λ),y0=cosφ*Math.sin(λ),z0=Math.sin(φ),d3_geo_centroid.point=nextPoint,d3_geo_centroidPointXYZ(x0,y0,z0)}}function d3_geo_centroidLineEnd(){d3_geo_centroid.point=d3_geo_centroidPoint}function d3_geo_centroidRingStart(){var λ00,φ00,x0,y0,z0;function nextPoint(λ,φ){λ*=d3_radians;var cosφ=Math.cos(φ*=d3_radians),x=cosφ*Math.cos(λ),y=cosφ*Math.sin(λ),z=Math.sin(φ),cx=y0*z-z0*y,cy=z0*x-x0*z,cz=x0*y-y0*x,m=Math.sqrt(cx*cx+cy*cy+cz*cz),u=x0*x+y0*y+z0*z,v=m&&-d3_acos(u)/m,w=Math.atan2(m,u);d3_geo_centroidX2+=v*cx,d3_geo_centroidY2+=v*cy,d3_geo_centroidZ2+=v*cz,d3_geo_centroidW1+=w,d3_geo_centroidX1+=w*(x0+(x0=x)),d3_geo_centroidY1+=w*(y0+(y0=y)),d3_geo_centroidZ1+=w*(z0+(z0=z)),d3_geo_centroidPointXYZ(x0,y0,z0)}d3_geo_centroid.point=function(λ,φ){λ00=λ,φ00=φ,d3_geo_centroid.point=nextPoint,λ*=d3_radians;var cosφ=Math.cos(φ*=d3_radians);x0=cosφ*Math.cos(λ),y0=cosφ*Math.sin(λ),z0=Math.sin(φ),d3_geo_centroidPointXYZ(x0,y0,z0)},d3_geo_centroid.lineEnd=function(){nextPoint(λ00,φ00),d3_geo_centroid.lineEnd=d3_geo_centroidLineEnd,d3_geo_centroid.point=d3_geo_centroidPoint}}function d3_geo_compose(a,b){function compose(x,y){return x=a(x,y),b(x[0],x[1])}return a.invert&&b.invert&&(compose.invert=function(x,y){return(x=b.invert(x,y))&&a.invert(x[0],x[1])}),compose}function d3_true(){return!0}function d3_geo_clipPolygon(segments,compare,clipStartInside,interpolate,listener){var subject=[],clip=[];if(segments.forEach((function(segment){if(!((n=segment.length-1)<=0)){var n,p0=segment[0],p1=segment[n];if(d3_geo_sphericalEqual(p0,p1)){listener.lineStart();for(var i=0;i<n;++i)listener.point((p0=segment[i])[0],p0[1]);listener.lineEnd()}else{var a=new d3_geo_clipPolygonIntersection(p0,segment,null,!0),b=new d3_geo_clipPolygonIntersection(p0,null,a,!1);a.o=b,subject.push(a),clip.push(b),a=new d3_geo_clipPolygonIntersection(p1,segment,null,!1),b=new d3_geo_clipPolygonIntersection(p1,null,a,!0),a.o=b,subject.push(a),clip.push(b)}}})),clip.sort(compare),d3_geo_clipPolygonLinkCircular(subject),d3_geo_clipPolygonLinkCircular(clip),subject.length){for(var i=0,entry=clipStartInside,n=clip.length;i<n;++i)clip[i].e=entry=!entry;for(var start=subject[0],points,point;;){for(var current=start,isSubject=!0;current.v;)if((current=current.n)===start)return;points=current.z,listener.lineStart();do{if(current.v=current.o.v=!0,current.e){if(isSubject)for(var i=0,n=points.length;i<n;++i)listener.point((point=points[i])[0],point[1]);else interpolate(current.x,current.n.x,1,listener);current=current.n}else{if(isSubject)for(var i=(points=current.p.z).length-1;i>=0;--i)listener.point((point=points[i])[0],point[1]);else interpolate(current.x,current.p.x,-1,listener);current=current.p}points=(current=current.o).z,isSubject=!isSubject}while(!current.v);listener.lineEnd()}}}function d3_geo_clipPolygonLinkCircular(array){if(n=array.length){for(var n,i=0,a=array[0],b;++i<n;)a.n=b=array[i],b.p=a,a=b;a.n=b=array[0],b.p=a}}function d3_geo_clipPolygonIntersection(point,points,other,entry){this.x=point,this.z=points,this.o=other,this.e=entry,this.v=!1,this.n=this.p=null}function d3_geo_clip(pointVisible,clipLine,interpolate,clipStart){return function(rotate,listener){var line=clipLine(listener),rotatedClipStart=rotate.invert(clipStart[0],clipStart[1]),clip={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){clip.point=pointRing,clip.lineStart=ringStart,clip.lineEnd=ringEnd,segments=[],polygon=[]},polygonEnd:function(){clip.point=point,clip.lineStart=lineStart,clip.lineEnd=lineEnd,segments=d3.merge(segments);var clipStartInside=d3_geo_pointInPolygon(rotatedClipStart,polygon);segments.length?(polygonStarted||(listener.polygonStart(),polygonStarted=!0),d3_geo_clipPolygon(segments,d3_geo_clipSort,clipStartInside,interpolate,listener)):clipStartInside&&(polygonStarted||(listener.polygonStart(),polygonStarted=!0),listener.lineStart(),interpolate(null,null,1,listener),listener.lineEnd()),polygonStarted&&(listener.polygonEnd(),polygonStarted=!1),segments=polygon=null},sphere:function(){listener.polygonStart(),listener.lineStart(),interpolate(null,null,1,listener),listener.lineEnd(),listener.polygonEnd()}},segments;function point(λ,φ){var point=rotate(λ,φ);pointVisible(λ=point[0],φ=point[1])&&listener.point(λ,φ)}function pointLine(λ,φ){var point=rotate(λ,φ);line.point(point[0],point[1])}function lineStart(){clip.point=pointLine,line.lineStart()}function lineEnd(){clip.point=point,line.lineEnd()}var buffer=d3_geo_clipBufferListener(),ringListener=clipLine(buffer),polygonStarted=!1,polygon,ring;function pointRing(λ,φ){ring.push([λ,φ]);var point=rotate(λ,φ);ringListener.point(point[0],point[1])}function ringStart(){ringListener.lineStart(),ring=[]}function ringEnd(){pointRing(ring[0][0],ring[0][1]),ringListener.lineEnd();var clean=ringListener.clean(),ringSegments=buffer.buffer(),segment,n=ringSegments.length;if(ring.pop(),polygon.push(ring),ring=null,n)if(1&clean){var n,i=-1,point;if((n=(segment=ringSegments[0]).length-1)>0){for(polygonStarted||(listener.polygonStart(),polygonStarted=!0),listener.lineStart();++i<n;)listener.point((point=segment[i])[0],point[1]);listener.lineEnd()}}else n>1&&2&clean&&ringSegments.push(ringSegments.pop().concat(ringSegments.shift())),segments.push(ringSegments.filter(d3_geo_clipSegmentLength1))}return clip}}function d3_geo_clipSegmentLength1(segment){return segment.length>1}function d3_geo_clipBufferListener(){var lines=[],line;return{lineStart:function(){lines.push(line=[])},point:function(λ,φ){line.push([λ,φ])},lineEnd:d3_noop,buffer:function(){var buffer=lines;return lines=[],line=null,buffer},rejoin:function(){lines.length>1&&lines.push(lines.pop().concat(lines.shift()))}}}function d3_geo_clipSort(a,b){return((a=a.x)[0]<0?a[1]-halfπ-ε:halfπ-a[1])-((b=b.x)[0]<0?b[1]-halfπ-ε:halfπ-b[1])}var d3_geo_clipAntimeridian=d3_geo_clip(d3_true,d3_geo_clipAntimeridianLine,d3_geo_clipAntimeridianInterpolate,[-π,-π/2]);function d3_geo_clipAntimeridianLine(listener){var λ0=NaN,φ0=NaN,sλ0=NaN,clean;return{lineStart:function(){listener.lineStart(),clean=1},point:function(λ1,φ1){var sλ1=λ1>0?π:-π,dλ=abs(λ1-λ0);abs(dλ-π)<ε?(listener.point(λ0,φ0=(φ0+φ1)/2>0?halfπ:-halfπ),listener.point(sλ0,φ0),listener.lineEnd(),listener.lineStart(),listener.point(sλ1,φ0),listener.point(λ1,φ0),clean=0):sλ0!==sλ1&&dλ>=π&&(abs(λ0-sλ0)<ε&&(λ0-=sλ0*ε),abs(λ1-sλ1)<ε&&(λ1-=sλ1*ε),φ0=d3_geo_clipAntimeridianIntersect(λ0,φ0,λ1,φ1),listener.point(sλ0,φ0),listener.lineEnd(),listener.lineStart(),listener.point(sλ1,φ0),clean=0),listener.point(λ0=λ1,φ0=φ1),sλ0=sλ1},lineEnd:function(){listener.lineEnd(),λ0=φ0=NaN},clean:function(){return 2-clean}}}function d3_geo_clipAntimeridianIntersect(λ0,φ0,λ1,φ1){var cosφ0,cosφ1,sinλ0_λ1=Math.sin(λ0-λ1);return abs(sinλ0_λ1)>ε?Math.atan((Math.sin(φ0)*(cosφ1=Math.cos(φ1))*Math.sin(λ1)-Math.sin(φ1)*(cosφ0=Math.cos(φ0))*Math.sin(λ0))/(cosφ0*cosφ1*sinλ0_λ1)):(φ0+φ1)/2}function d3_geo_clipAntimeridianInterpolate(from,to,direction,listener){var φ;if(null==from)φ=direction*halfπ,listener.point(-π,φ),listener.point(0,φ),listener.point(π,φ),listener.point(π,0),listener.point(π,-φ),listener.point(0,-φ),listener.point(-π,-φ),listener.point(-π,0),listener.point(-π,φ);else if(abs(from[0]-to[0])>ε){var s=from[0]<to[0]?π:-π;φ=direction*s/2,listener.point(-s,φ),listener.point(0,φ),listener.point(s,φ)}else listener.point(to[0],to[1])}function d3_geo_pointInPolygon(point,polygon){var meridian=point[0],parallel=point[1],meridianNormal=[Math.sin(meridian),-Math.cos(meridian),0],polarAngle=0,winding=0;d3_geo_areaRingSum.reset();for(var i=0,n=polygon.length;i<n;++i){var ring=polygon[i],m=ring.length;if(m)for(var point0=ring[0],λ0=point0[0],φ0=point0[1]/2+π/4,sinφ0=Math.sin(φ0),cosφ0=Math.cos(φ0),j=1;;){j===m&&(j=0);var λ=(point=ring[j])[0],φ=point[1]/2+π/4,sinφ=Math.sin(φ),cosφ=Math.cos(φ),dλ=λ-λ0,sdλ=dλ>=0?1:-1,adλ=sdλ*dλ,antimeridian=adλ>π,k=sinφ0*sinφ;if(d3_geo_areaRingSum.add(Math.atan2(k*sdλ*Math.sin(adλ),cosφ0*cosφ+k*Math.cos(adλ))),polarAngle+=antimeridian?dλ+sdλ*τ:dλ,antimeridian^λ0>=meridian^λ>=meridian){var arc=d3_geo_cartesianCross(d3_geo_cartesian(point0),d3_geo_cartesian(point));d3_geo_cartesianNormalize(arc);var intersection=d3_geo_cartesianCross(meridianNormal,arc);d3_geo_cartesianNormalize(intersection);var φarc=(antimeridian^dλ>=0?-1:1)*d3_asin(intersection[2]);(parallel>φarc||parallel===φarc&&(arc[0]||arc[1]))&&(winding+=antimeridian^dλ>=0?1:-1)}if(!j++)break;λ0=λ,sinφ0=sinφ,cosφ0=cosφ,point0=point}}return(polarAngle<-ε||polarAngle<ε&&d3_geo_areaRingSum<-ε)^1&winding}function d3_geo_clipCircle(radius){var cr=Math.cos(radius),smallRadius=cr>0,notHemisphere=abs(cr)>ε,interpolate;return d3_geo_clip(visible,clipLine,d3_geo_circleInterpolate(radius,6*d3_radians),smallRadius?[0,-radius]:[-π,radius-π]);function visible(λ,φ){return Math.cos(λ)*Math.cos(φ)>cr}function clipLine(listener){var point0,c0,v0,v00,clean;return{lineStart:function(){v00=v0=!1,clean=1},point:function(λ,φ){var point1=[λ,φ],point2,v=visible(λ,φ),c=smallRadius?v?0:code(λ,φ):v?code(λ+(λ<0?π:-π),φ):0;if(!point0&&(v00=v0=v)&&listener.lineStart(),v!==v0&&(point2=intersect(point0,point1),(d3_geo_sphericalEqual(point0,point2)||d3_geo_sphericalEqual(point1,point2))&&(point1[0]+=ε,point1[1]+=ε,v=visible(point1[0],point1[1]))),v!==v0)clean=0,v?(listener.lineStart(),point2=intersect(point1,point0),listener.point(point2[0],point2[1])):(point2=intersect(point0,point1),listener.point(point2[0],point2[1]),listener.lineEnd()),point0=point2;else if(notHemisphere&&point0&&smallRadius^v){var t;c&c0||!(t=intersect(point1,point0,!0))||(clean=0,smallRadius?(listener.lineStart(),listener.point(t[0][0],t[0][1]),listener.point(t[1][0],t[1][1]),listener.lineEnd()):(listener.point(t[1][0],t[1][1]),listener.lineEnd(),listener.lineStart(),listener.point(t[0][0],t[0][1])))}!v||point0&&d3_geo_sphericalEqual(point0,point1)||listener.point(point1[0],point1[1]),point0=point1,v0=v,c0=c},lineEnd:function(){v0&&listener.lineEnd(),point0=null},clean:function(){return clean|(v00&&v0)<<1}}}function intersect(a,b,two){var pa,pb,n1=[1,0,0],n2=d3_geo_cartesianCross(d3_geo_cartesian(a),d3_geo_cartesian(b)),n2n2=d3_geo_cartesianDot(n2,n2),n1n2=n2[0],determinant=n2n2-n1n2*n1n2;if(!determinant)return!two&&a;var c1=cr*n2n2/determinant,c2=-cr*n1n2/determinant,n1xn2=d3_geo_cartesianCross(n1,n2),A=d3_geo_cartesianScale(n1,c1),B;d3_geo_cartesianAdd(A,d3_geo_cartesianScale(n2,c2));var u=n1xn2,w=d3_geo_cartesianDot(A,u),uu=d3_geo_cartesianDot(u,u),t2=w*w-uu*(d3_geo_cartesianDot(A,A)-1);if(!(t2<0)){var t=Math.sqrt(t2),q=d3_geo_cartesianScale(u,(-w-t)/uu);if(d3_geo_cartesianAdd(q,A),q=d3_geo_spherical(q),!two)return q;var λ0=a[0],λ1=b[0],φ0=a[1],φ1=b[1],z;λ1<λ0&&(z=λ0,λ0=λ1,λ1=z);var δλ=λ1-λ0,polar=abs(δλ-π)<ε,meridian;if(!polar&&φ1<φ0&&(z=φ0,φ0=φ1,φ1=z),polar||δλ<ε?polar?φ0+φ1>0^q[1]<(abs(q[0]-λ0)<ε?φ0:φ1):φ0<=q[1]&&q[1]<=φ1:δλ>π^(λ0<=q[0]&&q[0]<=λ1)){var q1=d3_geo_cartesianScale(u,(-w+t)/uu);return d3_geo_cartesianAdd(q1,A),[q,d3_geo_spherical(q1)]}}}function code(λ,φ){var r=smallRadius?radius:π-radius,code=0;return λ<-r?code|=1:λ>r&&(code|=2),φ<-r?code|=4:φ>r&&(code|=8),code}}function d3_geom_clipLine(x0,y0,x1,y1){return function(line){var a=line.a,b=line.b,ax=a.x,ay=a.y,bx,by,t0=0,t1=1,dx=b.x-ax,dy=b.y-ay,r;if(r=x0-ax,dx||!(r>0)){if(r/=dx,dx<0){if(r<t0)return;r<t1&&(t1=r)}else if(dx>0){if(r>t1)return;r>t0&&(t0=r)}if(r=x1-ax,dx||!(r<0)){if(r/=dx,dx<0){if(r>t1)return;r>t0&&(t0=r)}else if(dx>0){if(r<t0)return;r<t1&&(t1=r)}if(r=y0-ay,dy||!(r>0)){if(r/=dy,dy<0){if(r<t0)return;r<t1&&(t1=r)}else if(dy>0){if(r>t1)return;r>t0&&(t0=r)}if(r=y1-ay,dy||!(r<0)){if(r/=dy,dy<0){if(r>t1)return;r>t0&&(t0=r)}else if(dy>0){if(r<t0)return;r<t1&&(t1=r)}return t0>0&&(line.a={x:ax+t0*dx,y:ay+t0*dy}),t1<1&&(line.b={x:ax+t1*dx,y:ay+t1*dy}),line}}}}}}var d3_geo_clipExtentMAX=1e9;function d3_geo_clipExtent(x0,y0,x1,y1){return function(listener){var listener_=listener,bufferListener=d3_geo_clipBufferListener(),clipLine=d3_geom_clipLine(x0,y0,x1,y1),segments,polygon,ring,clip={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){listener=bufferListener,segments=[],polygon=[],clean=!0},polygonEnd:function(){listener=listener_,segments=d3.merge(segments);var clipStartInside=insidePolygon([x0,y1]),inside=clean&&clipStartInside,visible=segments.length;(inside||visible)&&(listener.polygonStart(),inside&&(listener.lineStart(),interpolate(null,null,1,listener),listener.lineEnd()),visible&&d3_geo_clipPolygon(segments,compare,clipStartInside,interpolate,listener),listener.polygonEnd()),segments=polygon=ring=null}},x__,y__,v__,x_,y_,v_,first,clean;function insidePolygon(p){for(var wn=0,n=polygon.length,y=p[1],i=0;i<n;++i)for(var j=1,v=polygon[i],m=v.length,a=v[0],b;j<m;++j)b=v[j],a[1]<=y?b[1]>y&&d3_cross2d(a,b,p)>0&&++wn:b[1]<=y&&d3_cross2d(a,b,p)<0&&--wn,a=b;return 0!==wn}function interpolate(from,to,direction,listener){var a=0,a1=0;if(null==from||(a=corner(from,direction))!==(a1=corner(to,direction))||comparePoints(from,to)<0^direction>0)do{listener.point(0===a||3===a?x0:x1,a>1?y1:y0)}while((a=(a+direction+4)%4)!==a1);else listener.point(to[0],to[1])}function pointVisible(x,y){return x0<=x&&x<=x1&&y0<=y&&y<=y1}function point(x,y){pointVisible(x,y)&&listener.point(x,y)}function lineStart(){clip.point=linePoint,polygon&&polygon.push(ring=[]),first=!0,v_=!1,x_=y_=NaN}function lineEnd(){segments&&(linePoint(x__,y__),v__&&v_&&bufferListener.rejoin(),segments.push(bufferListener.buffer())),clip.point=point,v_&&listener.lineEnd()}function linePoint(x,y){var v=pointVisible(x=Math.max(-1e9,Math.min(1e9,x)),y=Math.max(-1e9,Math.min(1e9,y)));if(polygon&&ring.push([x,y]),first)x__=x,y__=y,v__=v,first=!1,v&&(listener.lineStart(),listener.point(x,y));else if(v&&v_)listener.point(x,y);else{var l={a:{x:x_,y:y_},b:{x:x,y:y}};clipLine(l)?(v_||(listener.lineStart(),listener.point(l.a.x,l.a.y)),listener.point(l.b.x,l.b.y),v||listener.lineEnd(),clean=!1):v&&(listener.lineStart(),listener.point(x,y),clean=!1)}x_=x,y_=y,v_=v}return clip};function corner(p,direction){return abs(p[0]-x0)<ε?direction>0?0:3:abs(p[0]-x1)<ε?direction>0?2:1:abs(p[1]-y0)<ε?direction>0?1:0:direction>0?3:2}function compare(a,b){return comparePoints(a.x,b.x)}function comparePoints(a,b){var ca=corner(a,1),cb=corner(b,1);return ca!==cb?ca-cb:0===ca?b[1]-a[1]:1===ca?a[0]-b[0]:2===ca?a[1]-b[1]:b[0]-a[0]}}function d3_geo_conic(projectAt){var φ0=0,φ1=π/3,m=d3_geo_projectionMutator(projectAt),p=m(φ0,φ1);return p.parallels=function(_){return arguments.length?m(φ0=_[0]*π/180,φ1=_[1]*π/180):[φ0/π*180,φ1/π*180]},p}function d3_geo_conicEqualArea(φ0,φ1){var sinφ0=Math.sin(φ0),n=(sinφ0+Math.sin(φ1))/2,C=1+sinφ0*(2*n-sinφ0),ρ0=Math.sqrt(C)/n;function forward(λ,φ){var ρ=Math.sqrt(C-2*n*Math.sin(φ))/n;return[ρ*Math.sin(λ*=n),ρ0-ρ*Math.cos(λ)]}return forward.invert=function(x,y){var ρ0_y=ρ0-y;return[Math.atan2(x,ρ0_y)/n,d3_asin((C-(x*x+ρ0_y*ρ0_y)*n*n)/(2*n))]},forward}d3.geo.clipExtent=function(){var x0,y0,x1,y1,stream,clip,clipExtent={stream:function(output){return stream&&(stream.valid=!1),(stream=clip(output)).valid=!0,stream},extent:function(_){return arguments.length?(clip=d3_geo_clipExtent(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1]),stream&&(stream.valid=!1,stream=null),clipExtent):[[x0,y0],[x1,y1]]}};return clipExtent.extent([[0,0],[960,500]])},(d3.geo.conicEqualArea=function(){return d3_geo_conic(d3_geo_conicEqualArea)}).raw=d3_geo_conicEqualArea,d3.geo.albers=function(){return d3.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},d3.geo.albersUsa=function(){var lower48=d3.geo.albers(),alaska=d3.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),hawaii=d3.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),point,pointStream={point:function(x,y){point=[x,y]}},lower48Point,alaskaPoint,hawaiiPoint;function albersUsa(coordinates){var x=coordinates[0],y=coordinates[1];return point=null,lower48Point(x,y),point||(alaskaPoint(x,y),point)||hawaiiPoint(x,y),point}return albersUsa.invert=function(coordinates){var k=lower48.scale(),t=lower48.translate(),x=(coordinates[0]-t[0])/k,y=(coordinates[1]-t[1])/k;return(y>=.12&&y<.234&&x>=-.425&&x<-.214?alaska:y>=.166&&y<.234&&x>=-.214&&x<-.115?hawaii:lower48).invert(coordinates)},albersUsa.stream=function(stream){var lower48Stream=lower48.stream(stream),alaskaStream=alaska.stream(stream),hawaiiStream=hawaii.stream(stream);return{point:function(x,y){lower48Stream.point(x,y),alaskaStream.point(x,y),hawaiiStream.point(x,y)},sphere:function(){lower48Stream.sphere(),alaskaStream.sphere(),hawaiiStream.sphere()},lineStart:function(){lower48Stream.lineStart(),alaskaStream.lineStart(),hawaiiStream.lineStart()},lineEnd:function(){lower48Stream.lineEnd(),alaskaStream.lineEnd(),hawaiiStream.lineEnd()},polygonStart:function(){lower48Stream.polygonStart(),alaskaStream.polygonStart(),hawaiiStream.polygonStart()},polygonEnd:function(){lower48Stream.polygonEnd(),alaskaStream.polygonEnd(),hawaiiStream.polygonEnd()}}},albersUsa.precision=function(_){return arguments.length?(lower48.precision(_),alaska.precision(_),hawaii.precision(_),albersUsa):lower48.precision()},albersUsa.scale=function(_){return arguments.length?(lower48.scale(_),alaska.scale(.35*_),hawaii.scale(_),albersUsa.translate(lower48.translate())):lower48.scale()},albersUsa.translate=function(_){if(!arguments.length)return lower48.translate();var k=lower48.scale(),x=+_[0],y=+_[1];return lower48Point=lower48.translate(_).clipExtent([[x-.455*k,y-.238*k],[x+.455*k,y+.238*k]]).stream(pointStream).point,alaskaPoint=alaska.translate([x-.307*k,y+.201*k]).clipExtent([[x-.425*k+ε,y+.12*k+ε],[x-.214*k-ε,y+.234*k-ε]]).stream(pointStream).point,hawaiiPoint=hawaii.translate([x-.205*k,y+.212*k]).clipExtent([[x-.214*k+ε,y+.166*k+ε],[x-.115*k-ε,y+.234*k-ε]]).stream(pointStream).point,albersUsa},albersUsa.scale(1070)};var d3_geo_pathAreaSum,d3_geo_pathAreaPolygon,d3_geo_pathArea={point:d3_noop,lineStart:d3_noop,lineEnd:d3_noop,polygonStart:function(){d3_geo_pathAreaPolygon=0,d3_geo_pathArea.lineStart=d3_geo_pathAreaRingStart},polygonEnd:function(){d3_geo_pathArea.lineStart=d3_geo_pathArea.lineEnd=d3_geo_pathArea.point=d3_noop,d3_geo_pathAreaSum+=abs(d3_geo_pathAreaPolygon/2)}},d3_geo_pathBoundsX0,d3_geo_pathBoundsY0,d3_geo_pathBoundsX1,d3_geo_pathBoundsY1;function d3_geo_pathAreaRingStart(){var x00,y00,x0,y0;function nextPoint(x,y){d3_geo_pathAreaPolygon+=y0*x-x0*y,x0=x,y0=y}d3_geo_pathArea.point=function(x,y){d3_geo_pathArea.point=nextPoint,x00=x0=x,y00=y0=y},d3_geo_pathArea.lineEnd=function(){nextPoint(x00,y00)}}var d3_geo_pathBounds={point:d3_geo_pathBoundsPoint,lineStart:d3_noop,lineEnd:d3_noop,polygonStart:d3_noop,polygonEnd:d3_noop};function d3_geo_pathBoundsPoint(x,y){x<d3_geo_pathBoundsX0&&(d3_geo_pathBoundsX0=x),x>d3_geo_pathBoundsX1&&(d3_geo_pathBoundsX1=x),y<d3_geo_pathBoundsY0&&(d3_geo_pathBoundsY0=y),y>d3_geo_pathBoundsY1&&(d3_geo_pathBoundsY1=y)}function d3_geo_pathBuffer(){var pointCircle=d3_geo_pathBufferCircle(4.5),buffer=[],stream={point:point,lineStart:function(){stream.point=pointLineStart},lineEnd:lineEnd,polygonStart:function(){stream.lineEnd=lineEndPolygon},polygonEnd:function(){stream.lineEnd=lineEnd,stream.point=point},pointRadius:function(_){return pointCircle=d3_geo_pathBufferCircle(_),stream},result:function(){if(buffer.length){var result=buffer.join("");return buffer=[],result}}};function point(x,y){buffer.push("M",x,",",y,pointCircle)}function pointLineStart(x,y){buffer.push("M",x,",",y),stream.point=pointLine}function pointLine(x,y){buffer.push("L",x,",",y)}function lineEnd(){stream.point=point}function lineEndPolygon(){buffer.push("Z")}return stream}function d3_geo_pathBufferCircle(radius){return"m0,"+radius+"a"+radius+","+radius+" 0 1,1 0,"+-2*radius+"a"+radius+","+radius+" 0 1,1 0,"+2*radius+"z"}var d3_geo_pathCentroid={point:d3_geo_pathCentroidPoint,lineStart:d3_geo_pathCentroidLineStart,lineEnd:d3_geo_pathCentroidLineEnd,polygonStart:function(){d3_geo_pathCentroid.lineStart=d3_geo_pathCentroidRingStart},polygonEnd:function(){d3_geo_pathCentroid.point=d3_geo_pathCentroidPoint,d3_geo_pathCentroid.lineStart=d3_geo_pathCentroidLineStart,d3_geo_pathCentroid.lineEnd=d3_geo_pathCentroidLineEnd}},d3_geo_lengthSum;function d3_geo_pathCentroidPoint(x,y){d3_geo_centroidX0+=x,d3_geo_centroidY0+=y,++d3_geo_centroidZ0}function d3_geo_pathCentroidLineStart(){var x0,y0;function nextPoint(x,y){var dx=x-x0,dy=y-y0,z=Math.sqrt(dx*dx+dy*dy);d3_geo_centroidX1+=z*(x0+x)/2,d3_geo_centroidY1+=z*(y0+y)/2,d3_geo_centroidZ1+=z,d3_geo_pathCentroidPoint(x0=x,y0=y)}d3_geo_pathCentroid.point=function(x,y){d3_geo_pathCentroid.point=nextPoint,d3_geo_pathCentroidPoint(x0=x,y0=y)}}function d3_geo_pathCentroidLineEnd(){d3_geo_pathCentroid.point=d3_geo_pathCentroidPoint}function d3_geo_pathCentroidRingStart(){var x00,y00,x0,y0;function nextPoint(x,y){var dx=x-x0,dy=y-y0,z=Math.sqrt(dx*dx+dy*dy);d3_geo_centroidX1+=z*(x0+x)/2,d3_geo_centroidY1+=z*(y0+y)/2,d3_geo_centroidZ1+=z,d3_geo_centroidX2+=(z=y0*x-x0*y)*(x0+x),d3_geo_centroidY2+=z*(y0+y),d3_geo_centroidZ2+=3*z,d3_geo_pathCentroidPoint(x0=x,y0=y)}d3_geo_pathCentroid.point=function(x,y){d3_geo_pathCentroid.point=nextPoint,d3_geo_pathCentroidPoint(x00=x0=x,y00=y0=y)},d3_geo_pathCentroid.lineEnd=function(){nextPoint(x00,y00)}}function d3_geo_pathContext(context){var pointRadius=4.5,stream={point:point,lineStart:function(){stream.point=pointLineStart},lineEnd:lineEnd,polygonStart:function(){stream.lineEnd=lineEndPolygon},polygonEnd:function(){stream.lineEnd=lineEnd,stream.point=point},pointRadius:function(_){return pointRadius=_,stream},result:d3_noop};function point(x,y){context.moveTo(x+pointRadius,y),context.arc(x,y,pointRadius,0,τ)}function pointLineStart(x,y){context.moveTo(x,y),stream.point=pointLine}function pointLine(x,y){context.lineTo(x,y)}function lineEnd(){stream.point=point}function lineEndPolygon(){context.closePath()}return stream}function d3_geo_resample(project){var δ2=.5,cosMinDistance=Math.cos(30*d3_radians),maxDepth=16;function resample(stream){return(maxDepth?resampleRecursive:resampleNone)(stream)}function resampleNone(stream){return d3_geo_transformPoint(stream,(function(x,y){x=project(x,y),stream.point(x[0],x[1])}))}function resampleRecursive(stream){var λ00,φ00,x00,y00,a00,b00,c00,λ0,x0,y0,a0,b0,c0,resample={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){stream.polygonStart(),resample.lineStart=ringStart},polygonEnd:function(){stream.polygonEnd(),resample.lineStart=lineStart}};function point(x,y){x=project(x,y),stream.point(x[0],x[1])}function lineStart(){x0=NaN,resample.point=linePoint,stream.lineStart()}function linePoint(λ,φ){var c=d3_geo_cartesian([λ,φ]),p=project(λ,φ);resampleLineTo(x0,y0,λ0,a0,b0,c0,x0=p[0],y0=p[1],λ0=λ,a0=c[0],b0=c[1],c0=c[2],maxDepth,stream),stream.point(x0,y0)}function lineEnd(){resample.point=point,stream.lineEnd()}function ringStart(){lineStart(),resample.point=ringPoint,resample.lineEnd=ringEnd}function ringPoint(λ,φ){linePoint(λ00=λ,φ00=φ),x00=x0,y00=y0,a00=a0,b00=b0,c00=c0,resample.point=linePoint}function ringEnd(){resampleLineTo(x0,y0,λ0,a0,b0,c0,x00,y00,λ00,a00,b00,c00,maxDepth,stream),resample.lineEnd=lineEnd,lineEnd()}return resample}function resampleLineTo(x0,y0,λ0,a0,b0,c0,x1,y1,λ1,a1,b1,c1,depth,stream){var dx=x1-x0,dy=y1-y0,d2=dx*dx+dy*dy;if(d2>4*δ2&&depth--){var a=a0+a1,b=b0+b1,c=c0+c1,m=Math.sqrt(a*a+b*b+c*c),φ2=Math.asin(c/=m),λ2=abs(abs(c)-1)<ε||abs(λ0-λ1)<ε?(λ0+λ1)/2:Math.atan2(b,a),p=project(λ2,φ2),x2=p[0],y2=p[1],dx2=x2-x0,dy2=y2-y0,dz=dy*dx2-dx*dy2;(dz*dz/d2>δ2||abs((dx*dx2+dy*dy2)/d2-.5)>.3||a0*a1+b0*b1+c0*c1<cosMinDistance)&&(resampleLineTo(x0,y0,λ0,a0,b0,c0,x2,y2,λ2,a/=m,b/=m,c,depth,stream),stream.point(x2,y2),resampleLineTo(x2,y2,λ2,a,b,c,x1,y1,λ1,a1,b1,c1,depth,stream))}}return resample.precision=function(_){return arguments.length?(maxDepth=(δ2=_*_)>0&&16,resample):Math.sqrt(δ2)},resample}function d3_geo_pathProjectStream(project){var resample=d3_geo_resample((function(x,y){return project([x*d3_degrees,y*d3_degrees])}));return function(stream){return d3_geo_projectionRadians(resample(stream))}}function d3_geo_transform(stream){this.stream=stream}function d3_geo_transformPoint(stream,point){return{point:point,sphere:function(){stream.sphere()},lineStart:function(){stream.lineStart()},lineEnd:function(){stream.lineEnd()},polygonStart:function(){stream.polygonStart()},polygonEnd:function(){stream.polygonEnd()}}}function d3_geo_projection(project){return d3_geo_projectionMutator((function(){return project}))()}function d3_geo_projectionMutator(projectAt){var project,rotate,projectRotate,projectResample=d3_geo_resample((function(x,y){return[(x=project(x,y))[0]*k+δx,δy-x[1]*k]})),k=150,x=480,y=250,λ=0,φ=0,δλ=0,δφ=0,δγ=0,δx,δy,preclip=d3_geo_clipAntimeridian,postclip=d3_identity,clipAngle=null,clipExtent=null,stream;function projection(point){return[(point=projectRotate(point[0]*d3_radians,point[1]*d3_radians))[0]*k+δx,δy-point[1]*k]}function invert(point){return(point=projectRotate.invert((point[0]-δx)/k,(δy-point[1])/k))&&[point[0]*d3_degrees,point[1]*d3_degrees]}function reset(){projectRotate=d3_geo_compose(rotate=d3_geo_rotation(δλ,δφ,δγ),project);var center=project(λ,φ);return δx=x-center[0]*k,δy=y+center[1]*k,invalidate()}function invalidate(){return stream&&(stream.valid=!1,stream=null),projection}return projection.stream=function(output){return stream&&(stream.valid=!1),(stream=d3_geo_projectionRadians(preclip(rotate,projectResample(postclip(output))))).valid=!0,stream},projection.clipAngle=function(_){return arguments.length?(preclip=null==_?(clipAngle=_,d3_geo_clipAntimeridian):d3_geo_clipCircle((clipAngle=+_)*d3_radians),invalidate()):clipAngle},projection.clipExtent=function(_){return arguments.length?(clipExtent=_,postclip=_?d3_geo_clipExtent(_[0][0],_[0][1],_[1][0],_[1][1]):d3_identity,invalidate()):clipExtent},projection.scale=function(_){return arguments.length?(k=+_,reset()):k},projection.translate=function(_){return arguments.length?(x=+_[0],y=+_[1],reset()):[x,y]},projection.center=function(_){return arguments.length?(λ=_[0]%360*d3_radians,φ=_[1]%360*d3_radians,reset()):[λ*d3_degrees,φ*d3_degrees]},projection.rotate=function(_){return arguments.length?(δλ=_[0]%360*d3_radians,δφ=_[1]%360*d3_radians,δγ=_.length>2?_[2]%360*d3_radians:0,reset()):[δλ*d3_degrees,δφ*d3_degrees,δγ*d3_degrees]},d3.rebind(projection,projectResample,"precision"),function(){return project=projectAt.apply(this,arguments),projection.invert=project.invert&&invert,reset()}}function d3_geo_projectionRadians(stream){return d3_geo_transformPoint(stream,(function(x,y){stream.point(x*d3_radians,y*d3_radians)}))}function d3_geo_equirectangular(λ,φ){return[λ,φ]}function d3_geo_identityRotation(λ,φ){return[λ>π?λ-τ:λ<-π?λ+τ:λ,φ]}function d3_geo_rotation(δλ,δφ,δγ){return δλ?δφ||δγ?d3_geo_compose(d3_geo_rotationλ(δλ),d3_geo_rotationφγ(δφ,δγ)):d3_geo_rotationλ(δλ):δφ||δγ?d3_geo_rotationφγ(δφ,δγ):d3_geo_identityRotation}function d3_geo_forwardRotationλ(δλ){return function(λ,φ){return[(λ+=δλ)>π?λ-τ:λ<-π?λ+τ:λ,φ]}}function d3_geo_rotationλ(δλ){var rotation=d3_geo_forwardRotationλ(δλ);return rotation.invert=d3_geo_forwardRotationλ(-δλ),rotation}function d3_geo_rotationφγ(δφ,δγ){var cosδφ=Math.cos(δφ),sinδφ=Math.sin(δφ),cosδγ=Math.cos(δγ),sinδγ=Math.sin(δγ);function rotation(λ,φ){var cosφ=Math.cos(φ),x=Math.cos(λ)*cosφ,y=Math.sin(λ)*cosφ,z=Math.sin(φ),k=z*cosδφ+x*sinδφ;return[Math.atan2(y*cosδγ-k*sinδγ,x*cosδφ-z*sinδφ),d3_asin(k*cosδγ+y*sinδγ)]}return rotation.invert=function(λ,φ){var cosφ=Math.cos(φ),x=Math.cos(λ)*cosφ,y=Math.sin(λ)*cosφ,z=Math.sin(φ),k=z*cosδγ-y*sinδγ;return[Math.atan2(y*cosδγ+z*sinδγ,x*cosδφ+k*sinδφ),d3_asin(k*cosδφ-x*sinδφ)]},rotation}function d3_geo_circleInterpolate(radius,precision){var cr=Math.cos(radius),sr=Math.sin(radius);return function(from,to,direction,listener){var step=direction*precision;null!=from?(from=d3_geo_circleAngle(cr,from),to=d3_geo_circleAngle(cr,to),(direction>0?from<to:from>to)&&(from+=direction*τ)):(from=radius+direction*τ,to=radius-.5*step);for(var point,t=from;direction>0?t>to:t<to;t-=step)listener.point((point=d3_geo_spherical([cr,-sr*Math.cos(t),-sr*Math.sin(t)]))[0],point[1])}}function d3_geo_circleAngle(cr,point){var a=d3_geo_cartesian(point);a[0]-=cr,d3_geo_cartesianNormalize(a);var angle=d3_acos(-a[1]);return((-a[2]<0?-angle:angle)+2*Math.PI-ε)%(2*Math.PI)}function d3_geo_graticuleX(y0,y1,dy){var y=d3.range(y0,y1-ε,dy).concat(y1);return function(x){return y.map((function(y){return[x,y]}))}}function d3_geo_graticuleY(x0,x1,dx){var x=d3.range(x0,x1-ε,dx).concat(x1);return function(y){return x.map((function(x){return[x,y]}))}}function d3_source(d){return d.source}function d3_target(d){return d.target}function d3_geo_interpolate(x0,y0,x1,y1){var cy0=Math.cos(y0),sy0=Math.sin(y0),cy1=Math.cos(y1),sy1=Math.sin(y1),kx0=cy0*Math.cos(x0),ky0=cy0*Math.sin(x0),kx1=cy1*Math.cos(x1),ky1=cy1*Math.sin(x1),d=2*Math.asin(Math.sqrt(d3_haversin(y1-y0)+cy0*cy1*d3_haversin(x1-x0))),k=1/Math.sin(d),interpolate=d?function(t){var B=Math.sin(t*=d)*k,A=Math.sin(d-t)*k,x=A*kx0+B*kx1,y=A*ky0+B*ky1,z=A*sy0+B*sy1;return[Math.atan2(y,x)*d3_degrees,Math.atan2(z,Math.sqrt(x*x+y*y))*d3_degrees]}:function(){return[x0*d3_degrees,y0*d3_degrees]};return interpolate.distance=d,interpolate}d3.geo.path=function(){var pointRadius=4.5,projection,context,projectStream,contextStream,cacheStream;function path(object){return object&&("function"==typeof pointRadius&&contextStream.pointRadius(+pointRadius.apply(this,arguments)),cacheStream&&cacheStream.valid||(cacheStream=projectStream(contextStream)),d3.geo.stream(object,cacheStream)),contextStream.result()}function reset(){return cacheStream=null,path}return path.area=function(object){return d3_geo_pathAreaSum=0,d3.geo.stream(object,projectStream(d3_geo_pathArea)),d3_geo_pathAreaSum},path.centroid=function(object){return d3_geo_centroidX0=d3_geo_centroidY0=d3_geo_centroidZ0=d3_geo_centroidX1=d3_geo_centroidY1=d3_geo_centroidZ1=d3_geo_centroidX2=d3_geo_centroidY2=d3_geo_centroidZ2=0,d3.geo.stream(object,projectStream(d3_geo_pathCentroid)),d3_geo_centroidZ2?[d3_geo_centroidX2/d3_geo_centroidZ2,d3_geo_centroidY2/d3_geo_centroidZ2]:d3_geo_centroidZ1?[d3_geo_centroidX1/d3_geo_centroidZ1,d3_geo_centroidY1/d3_geo_centroidZ1]:d3_geo_centroidZ0?[d3_geo_centroidX0/d3_geo_centroidZ0,d3_geo_centroidY0/d3_geo_centroidZ0]:[NaN,NaN]},path.bounds=function(object){return d3_geo_pathBoundsX1=d3_geo_pathBoundsY1=-(d3_geo_pathBoundsX0=d3_geo_pathBoundsY0=1/0),d3.geo.stream(object,projectStream(d3_geo_pathBounds)),[[d3_geo_pathBoundsX0,d3_geo_pathBoundsY0],[d3_geo_pathBoundsX1,d3_geo_pathBoundsY1]]},path.projection=function(_){return arguments.length?(projectStream=(projection=_)?_.stream||d3_geo_pathProjectStream(_):d3_identity,reset()):projection},path.context=function(_){return arguments.length?(contextStream=null==(context=_)?new d3_geo_pathBuffer:new d3_geo_pathContext(_),"function"!=typeof pointRadius&&contextStream.pointRadius(pointRadius),reset()):context},path.pointRadius=function(_){return arguments.length?(pointRadius="function"==typeof _?_:(contextStream.pointRadius(+_),+_),path):pointRadius},path.projection(d3.geo.albersUsa()).context(null)},d3.geo.transform=function(methods){return{stream:function(stream){var transform=new d3_geo_transform(stream);for(var k in methods)transform[k]=methods[k];return transform}}},d3_geo_transform.prototype={point:function(x,y){this.stream.point(x,y)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},d3.geo.projection=d3_geo_projection,d3.geo.projectionMutator=d3_geo_projectionMutator,(d3.geo.equirectangular=function(){return d3_geo_projection(d3_geo_equirectangular)}).raw=d3_geo_equirectangular.invert=d3_geo_equirectangular,d3.geo.rotation=function(rotate){function forward(coordinates){return(coordinates=rotate(coordinates[0]*d3_radians,coordinates[1]*d3_radians))[0]*=d3_degrees,coordinates[1]*=d3_degrees,coordinates}return rotate=d3_geo_rotation(rotate[0]%360*d3_radians,rotate[1]*d3_radians,rotate.length>2?rotate[2]*d3_radians:0),forward.invert=function(coordinates){return(coordinates=rotate.invert(coordinates[0]*d3_radians,coordinates[1]*d3_radians))[0]*=d3_degrees,coordinates[1]*=d3_degrees,coordinates},forward},d3_geo_identityRotation.invert=d3_geo_equirectangular,d3.geo.circle=function(){var origin=[0,0],angle,precision=6,interpolate;function circle(){var center="function"==typeof origin?origin.apply(this,arguments):origin,rotate=d3_geo_rotation(-center[0]*d3_radians,-center[1]*d3_radians,0).invert,ring=[];return interpolate(null,null,1,{point:function(x,y){ring.push(x=rotate(x,y)),x[0]*=d3_degrees,x[1]*=d3_degrees}}),{type:"Polygon",coordinates:[ring]}}return circle.origin=function(x){return arguments.length?(origin=x,circle):origin},circle.angle=function(x){return arguments.length?(interpolate=d3_geo_circleInterpolate((angle=+x)*d3_radians,precision*d3_radians),circle):angle},circle.precision=function(_){return arguments.length?(interpolate=d3_geo_circleInterpolate(angle*d3_radians,(precision=+_)*d3_radians),circle):precision},circle.angle(90)},d3.geo.distance=function(a,b){var Δλ=(b[0]-a[0])*d3_radians,φ0=a[1]*d3_radians,φ1=b[1]*d3_radians,sinΔλ=Math.sin(Δλ),cosΔλ=Math.cos(Δλ),sinφ0=Math.sin(φ0),cosφ0=Math.cos(φ0),sinφ1=Math.sin(φ1),cosφ1=Math.cos(φ1),t;return Math.atan2(Math.sqrt((t=cosφ1*sinΔλ)*t+(t=cosφ0*sinφ1-sinφ0*cosφ1*cosΔλ)*t),sinφ0*sinφ1+cosφ0*cosφ1*cosΔλ)},d3.geo.graticule=function(){var x1,x0,X1,X0,y1,y0,Y1,Y0,dx=10,dy=dx,DX=90,DY=360,x,y,X,Y,precision=2.5;function graticule(){return{type:"MultiLineString",coordinates:lines()}}function lines(){return d3.range(Math.ceil(X0/DX)*DX,X1,DX).map(X).concat(d3.range(Math.ceil(Y0/DY)*DY,Y1,DY).map(Y)).concat(d3.range(Math.ceil(x0/dx)*dx,x1,dx).filter((function(x){return abs(x%DX)>ε})).map(x)).concat(d3.range(Math.ceil(y0/dy)*dy,y1,dy).filter((function(y){return abs(y%DY)>ε})).map(y))}return graticule.lines=function(){return lines().map((function(coordinates){return{type:"LineString",coordinates:coordinates}}))},graticule.outline=function(){return{type:"Polygon",coordinates:[X(X0).concat(Y(Y1).slice(1),X(X1).reverse().slice(1),Y(Y0).reverse().slice(1))]}},graticule.extent=function(_){return arguments.length?graticule.majorExtent(_).minorExtent(_):graticule.minorExtent()},graticule.majorExtent=function(_){return arguments.length?(X0=+_[0][0],X1=+_[1][0],Y0=+_[0][1],Y1=+_[1][1],X0>X1&&(_=X0,X0=X1,X1=_),Y0>Y1&&(_=Y0,Y0=Y1,Y1=_),graticule.precision(precision)):[[X0,Y0],[X1,Y1]]},graticule.minorExtent=function(_){return arguments.length?(x0=+_[0][0],x1=+_[1][0],y0=+_[0][1],y1=+_[1][1],x0>x1&&(_=x0,x0=x1,x1=_),y0>y1&&(_=y0,y0=y1,y1=_),graticule.precision(precision)):[[x0,y0],[x1,y1]]},graticule.step=function(_){return arguments.length?graticule.majorStep(_).minorStep(_):graticule.minorStep()},graticule.majorStep=function(_){return arguments.length?(DX=+_[0],DY=+_[1],graticule):[DX,DY]},graticule.minorStep=function(_){return arguments.length?(dx=+_[0],dy=+_[1],graticule):[dx,dy]},graticule.precision=function(_){return arguments.length?(precision=+_,x=d3_geo_graticuleX(y0,y1,90),y=d3_geo_graticuleY(x0,x1,precision),X=d3_geo_graticuleX(Y0,Y1,90),Y=d3_geo_graticuleY(X0,X1,precision),graticule):precision},graticule.majorExtent([[-180,-90+ε],[180,90-ε]]).minorExtent([[-180,-80-ε],[180,80+ε]])},d3.geo.greatArc=function(){var source=d3_source,source_,target=d3_target,target_;function greatArc(){return{type:"LineString",coordinates:[source_||source.apply(this,arguments),target_||target.apply(this,arguments)]}}return greatArc.distance=function(){return d3.geo.distance(source_||source.apply(this,arguments),target_||target.apply(this,arguments))},greatArc.source=function(_){return arguments.length?(source=_,source_="function"==typeof _?null:_,greatArc):source},greatArc.target=function(_){return arguments.length?(target=_,target_="function"==typeof _?null:_,greatArc):target},greatArc.precision=function(){return arguments.length?greatArc:0},greatArc},d3.geo.interpolate=function(source,target){return d3_geo_interpolate(source[0]*d3_radians,source[1]*d3_radians,target[0]*d3_radians,target[1]*d3_radians)},d3.geo.length=function(object){return d3_geo_lengthSum=0,d3.geo.stream(object,d3_geo_length),d3_geo_lengthSum};var d3_geo_length={sphere:d3_noop,point:d3_noop,lineStart:d3_geo_lengthLineStart,lineEnd:d3_noop,polygonStart:d3_noop,polygonEnd:d3_noop};function d3_geo_lengthLineStart(){var λ0,sinφ0,cosφ0;function nextPoint(λ,φ){var sinφ=Math.sin(φ*=d3_radians),cosφ=Math.cos(φ),t=abs((λ*=d3_radians)-λ0),cosΔλ=Math.cos(t);d3_geo_lengthSum+=Math.atan2(Math.sqrt((t=cosφ*Math.sin(t))*t+(t=cosφ0*sinφ-sinφ0*cosφ*cosΔλ)*t),sinφ0*sinφ+cosφ0*cosφ*cosΔλ),λ0=λ,sinφ0=sinφ,cosφ0=cosφ}d3_geo_length.point=function(λ,φ){λ0=λ*d3_radians,sinφ0=Math.sin(φ*=d3_radians),cosφ0=Math.cos(φ),d3_geo_length.point=nextPoint},d3_geo_length.lineEnd=function(){d3_geo_length.point=d3_geo_length.lineEnd=d3_noop}}function d3_geo_azimuthal(scale,angle){function azimuthal(λ,φ){var cosλ=Math.cos(λ),cosφ=Math.cos(φ),k=scale(cosλ*cosφ);return[k*cosφ*Math.sin(λ),k*Math.sin(φ)]}return azimuthal.invert=function(x,y){var ρ=Math.sqrt(x*x+y*y),c=angle(ρ),sinc=Math.sin(c),cosc=Math.cos(c);return[Math.atan2(x*sinc,ρ*cosc),Math.asin(ρ&&y*sinc/ρ)]},azimuthal}var d3_geo_azimuthalEqualArea=d3_geo_azimuthal((function(cosλcosφ){return Math.sqrt(2/(1+cosλcosφ))}),(function(ρ){return 2*Math.asin(ρ/2)}));(d3.geo.azimuthalEqualArea=function(){return d3_geo_projection(d3_geo_azimuthalEqualArea)}).raw=d3_geo_azimuthalEqualArea;var d3_geo_azimuthalEquidistant=d3_geo_azimuthal((function(cosλcosφ){var c=Math.acos(cosλcosφ);return c&&c/Math.sin(c)}),d3_identity);function d3_geo_conicConformal(φ0,φ1){var cosφ0=Math.cos(φ0),t=function(φ){return Math.tan(π/4+φ/2)},n=φ0===φ1?Math.sin(φ0):Math.log(cosφ0/Math.cos(φ1))/Math.log(t(φ1)/t(φ0)),F=cosφ0*Math.pow(t(φ0),n)/n;if(!n)return d3_geo_mercator;function forward(λ,φ){F>0?φ<-halfπ+ε&&(φ=-halfπ+ε):φ>halfπ-ε&&(φ=halfπ-ε);var ρ=F/Math.pow(t(φ),n);return[ρ*Math.sin(n*λ),F-ρ*Math.cos(n*λ)]}return forward.invert=function(x,y){var ρ0_y=F-y,ρ=d3_sgn(n)*Math.sqrt(x*x+ρ0_y*ρ0_y);return[Math.atan2(x,ρ0_y)/n,2*Math.atan(Math.pow(F/ρ,1/n))-halfπ]},forward}function d3_geo_conicEquidistant(φ0,φ1){var cosφ0=Math.cos(φ0),n=φ0===φ1?Math.sin(φ0):(cosφ0-Math.cos(φ1))/(φ1-φ0),G=cosφ0/n+φ0;if(abs(n)<ε)return d3_geo_equirectangular;function forward(λ,φ){var ρ=G-φ;return[ρ*Math.sin(n*λ),G-ρ*Math.cos(n*λ)]}return forward.invert=function(x,y){var ρ0_y=G-y;return[Math.atan2(x,ρ0_y)/n,G-d3_sgn(n)*Math.sqrt(x*x+ρ0_y*ρ0_y)]},forward}(d3.geo.azimuthalEquidistant=function(){return d3_geo_projection(d3_geo_azimuthalEquidistant)}).raw=d3_geo_azimuthalEquidistant,(d3.geo.conicConformal=function(){return d3_geo_conic(d3_geo_conicConformal)}).raw=d3_geo_conicConformal,(d3.geo.conicEquidistant=function(){return d3_geo_conic(d3_geo_conicEquidistant)}).raw=d3_geo_conicEquidistant;var d3_geo_gnomonic=d3_geo_azimuthal((function(cosλcosφ){return 1/cosλcosφ}),Math.atan);function d3_geo_mercator(λ,φ){return[λ,Math.log(Math.tan(π/4+φ/2))]}function d3_geo_mercatorProjection(project){var m=d3_geo_projection(project),scale=m.scale,translate=m.translate,clipExtent=m.clipExtent,clipAuto;return m.scale=function(){var v=scale.apply(m,arguments);return v===m?clipAuto?m.clipExtent(null):m:v},m.translate=function(){var v=translate.apply(m,arguments);return v===m?clipAuto?m.clipExtent(null):m:v},m.clipExtent=function(_){var v=clipExtent.apply(m,arguments);if(v===m){if(clipAuto=null==_){var k=π*scale(),t=translate();clipExtent([[t[0]-k,t[1]-k],[t[0]+k,t[1]+k]])}}else clipAuto&&(v=null);return v},m.clipExtent(null)}(d3.geo.gnomonic=function(){return d3_geo_projection(d3_geo_gnomonic)}).raw=d3_geo_gnomonic,d3_geo_mercator.invert=function(x,y){return[x,2*Math.atan(Math.exp(y))-halfπ]},(d3.geo.mercator=function(){return d3_geo_mercatorProjection(d3_geo_mercator)}).raw=d3_geo_mercator;var d3_geo_orthographic=d3_geo_azimuthal((function(){return 1}),Math.asin);(d3.geo.orthographic=function(){return d3_geo_projection(d3_geo_orthographic)}).raw=d3_geo_orthographic;var d3_geo_stereographic=d3_geo_azimuthal((function(cosλcosφ){return 1/(1+cosλcosφ)}),(function(ρ){return 2*Math.atan(ρ)}));function d3_geo_transverseMercator(λ,φ){return[Math.log(Math.tan(π/4+φ/2)),-λ]}function d3_geom_pointX(d){return d[0]}function d3_geom_pointY(d){return d[1]}function d3_geom_hullUpper(points){for(var n=points.length,hull=[0,1],hs=2,i=2;i<n;i++){for(;hs>1&&d3_cross2d(points[hull[hs-2]],points[hull[hs-1]],points[i])<=0;)--hs;hull[hs++]=i}return hull.slice(0,hs)}function d3_geom_hullOrder(a,b){return a[0]-b[0]||a[1]-b[1]}(d3.geo.stereographic=function(){return d3_geo_projection(d3_geo_stereographic)}).raw=d3_geo_stereographic,d3_geo_transverseMercator.invert=function(x,y){return[-y,2*Math.atan(Math.exp(x))-halfπ]},(d3.geo.transverseMercator=function(){var projection=d3_geo_mercatorProjection(d3_geo_transverseMercator),center=projection.center,rotate=projection.rotate;return projection.center=function(_){return _?center([-_[1],_[0]]):[(_=center())[1],-_[0]]},projection.rotate=function(_){return _?rotate([_[0],_[1],_.length>2?_[2]+90:90]):[(_=rotate())[0],_[1],_[2]-90]},rotate([0,0,90])}).raw=d3_geo_transverseMercator,d3.geom={},d3.geom.hull=function(vertices){var x=d3_geom_pointX,y=d3_geom_pointY;if(arguments.length)return hull(vertices);function hull(data){if(data.length<3)return[];var fx=d3_functor(x),fy=d3_functor(y),i,n=data.length,points=[],flippedPoints=[];for(i=0;i<n;i++)points.push([+fx.call(this,data[i],i),+fy.call(this,data[i],i),i]);for(points.sort(d3_geom_hullOrder),i=0;i<n;i++)flippedPoints.push([points[i][0],-points[i][1]]);var upper=d3_geom_hullUpper(points),lower=d3_geom_hullUpper(flippedPoints),skipLeft=lower[0]===upper[0],skipRight=lower[lower.length-1]===upper[upper.length-1],polygon=[];for(i=upper.length-1;i>=0;--i)polygon.push(data[points[upper[i]][2]]);for(i=+skipLeft;i<lower.length-skipRight;++i)polygon.push(data[points[lower[i]][2]]);return polygon}return hull.x=function(_){return arguments.length?(x=_,hull):x},hull.y=function(_){return arguments.length?(y=_,hull):y},hull},d3.geom.polygon=function(coordinates){return d3_subclass(coordinates,d3_geom_polygonPrototype),coordinates};var d3_geom_polygonPrototype=d3.geom.polygon.prototype=[];function d3_geom_polygonInside(p,a,b){return(b[0]-a[0])*(p[1]-a[1])<(b[1]-a[1])*(p[0]-a[0])}function d3_geom_polygonIntersect(c,d,a,b){var x1=c[0],x3=a[0],x21=d[0]-x1,x43=b[0]-x3,y1=c[1],y3=a[1],y21=d[1]-y1,y43=b[1]-y3,ua=(x43*(y1-y3)-y43*(x1-x3))/(y43*x21-x43*y21);return[x1+ua*x21,y1+ua*y21]}function d3_geom_polygonClosed(coordinates){var a=coordinates[0],b=coordinates[coordinates.length-1];return!(a[0]-b[0]||a[1]-b[1])}d3_geom_polygonPrototype.area=function(){for(var i=-1,n=this.length,a,b=this[n-1],area=0;++i<n;)a=b,b=this[i],area+=a[1]*b[0]-a[0]*b[1];return.5*area},d3_geom_polygonPrototype.centroid=function(k){var i=-1,n=this.length,x=0,y=0,a,b=this[n-1],c;for(arguments.length||(k=-1/(6*this.area()));++i<n;)a=b,b=this[i],c=a[0]*b[1]-b[0]*a[1],x+=(a[0]+b[0])*c,y+=(a[1]+b[1])*c;return[x*k,y*k]},d3_geom_polygonPrototype.clip=function(subject){for(var input,closed=d3_geom_polygonClosed(subject),i=-1,n=this.length-d3_geom_polygonClosed(this),j,m,a=this[n-1],b,c,d;++i<n;){for(input=subject.slice(),subject.length=0,b=this[i],c=input[(m=input.length-closed)-1],j=-1;++j<m;)d3_geom_polygonInside(d=input[j],a,b)?(d3_geom_polygonInside(c,a,b)||subject.push(d3_geom_polygonIntersect(c,d,a,b)),subject.push(d)):d3_geom_polygonInside(c,a,b)&&subject.push(d3_geom_polygonIntersect(c,d,a,b)),c=d;closed&&subject.push(subject[0]),a=b}return subject};var d3_geom_voronoiEdges,d3_geom_voronoiCells,d3_geom_voronoiBeaches,d3_geom_voronoiBeachPool=[],d3_geom_voronoiFirstCircle,d3_geom_voronoiCircles,d3_geom_voronoiCirclePool=[];function d3_geom_voronoiBeach(){d3_geom_voronoiRedBlackNode(this),this.edge=this.site=this.circle=null}function d3_geom_voronoiCreateBeach(site){var beach=d3_geom_voronoiBeachPool.pop()||new d3_geom_voronoiBeach;return beach.site=site,beach}function d3_geom_voronoiDetachBeach(beach){d3_geom_voronoiDetachCircle(beach),d3_geom_voronoiBeaches.remove(beach),d3_geom_voronoiBeachPool.push(beach),d3_geom_voronoiRedBlackNode(beach)}function d3_geom_voronoiRemoveBeach(beach){var circle=beach.circle,x=circle.x,y=circle.cy,vertex={x:x,y:y},previous=beach.P,next=beach.N,disappearing=[beach];d3_geom_voronoiDetachBeach(beach);for(var lArc=previous;lArc.circle&&abs(x-lArc.circle.x)<ε&&abs(y-lArc.circle.cy)<ε;)previous=lArc.P,disappearing.unshift(lArc),d3_geom_voronoiDetachBeach(lArc),lArc=previous;disappearing.unshift(lArc),d3_geom_voronoiDetachCircle(lArc);for(var rArc=next;rArc.circle&&abs(x-rArc.circle.x)<ε&&abs(y-rArc.circle.cy)<ε;)next=rArc.N,disappearing.push(rArc),d3_geom_voronoiDetachBeach(rArc),rArc=next;disappearing.push(rArc),d3_geom_voronoiDetachCircle(rArc);var nArcs=disappearing.length,iArc;for(iArc=1;iArc<nArcs;++iArc)rArc=disappearing[iArc],lArc=disappearing[iArc-1],d3_geom_voronoiSetEdgeEnd(rArc.edge,lArc.site,rArc.site,vertex);lArc=disappearing[0],(rArc=disappearing[nArcs-1]).edge=d3_geom_voronoiCreateEdge(lArc.site,rArc.site,null,vertex),d3_geom_voronoiAttachCircle(lArc),d3_geom_voronoiAttachCircle(rArc)}function d3_geom_voronoiAddBeach(site){for(var x=site.x,directrix=site.y,lArc,rArc,dxl,dxr,node=d3_geom_voronoiBeaches._;node;)if((dxl=d3_geom_voronoiLeftBreakPoint(node,directrix)-x)>ε)node=node.L;else{if(!((dxr=x-d3_geom_voronoiRightBreakPoint(node,directrix))>ε)){dxl>-ε?(lArc=node.P,rArc=node):dxr>-ε?(lArc=node,rArc=node.N):lArc=rArc=node;break}if(!node.R){lArc=node;break}node=node.R}var newArc=d3_geom_voronoiCreateBeach(site);if(d3_geom_voronoiBeaches.insert(lArc,newArc),lArc||rArc){if(lArc===rArc)return d3_geom_voronoiDetachCircle(lArc),rArc=d3_geom_voronoiCreateBeach(lArc.site),d3_geom_voronoiBeaches.insert(newArc,rArc),newArc.edge=rArc.edge=d3_geom_voronoiCreateEdge(lArc.site,newArc.site),d3_geom_voronoiAttachCircle(lArc),void d3_geom_voronoiAttachCircle(rArc);if(rArc){d3_geom_voronoiDetachCircle(lArc),d3_geom_voronoiDetachCircle(rArc);var lSite=lArc.site,ax=lSite.x,ay=lSite.y,bx=site.x-ax,by=site.y-ay,rSite=rArc.site,cx=rSite.x-ax,cy=rSite.y-ay,d=2*(bx*cy-by*cx),hb=bx*bx+by*by,hc=cx*cx+cy*cy,vertex={x:(cy*hb-by*hc)/d+ax,y:(bx*hc-cx*hb)/d+ay};d3_geom_voronoiSetEdgeEnd(rArc.edge,lSite,rSite,vertex),newArc.edge=d3_geom_voronoiCreateEdge(lSite,site,null,vertex),rArc.edge=d3_geom_voronoiCreateEdge(site,rSite,null,vertex),d3_geom_voronoiAttachCircle(lArc),d3_geom_voronoiAttachCircle(rArc)}else newArc.edge=d3_geom_voronoiCreateEdge(lArc.site,newArc.site)}}function d3_geom_voronoiLeftBreakPoint(arc,directrix){var site=arc.site,rfocx=site.x,rfocy=site.y,pby2=rfocy-directrix;if(!pby2)return rfocx;var lArc=arc.P;if(!lArc)return-1/0;var lfocx=(site=lArc.site).x,lfocy=site.y,plby2=lfocy-directrix;if(!plby2)return lfocx;var hl=lfocx-rfocx,aby2=1/pby2-1/plby2,b=hl/plby2;return aby2?(-b+Math.sqrt(b*b-2*aby2*(hl*hl/(-2*plby2)-lfocy+plby2/2+rfocy-pby2/2)))/aby2+rfocx:(rfocx+lfocx)/2}function d3_geom_voronoiRightBreakPoint(arc,directrix){var rArc=arc.N;if(rArc)return d3_geom_voronoiLeftBreakPoint(rArc,directrix);var site=arc.site;return site.y===directrix?site.x:1/0}function d3_geom_voronoiCell(site){this.site=site,this.edges=[]}function d3_geom_voronoiCloseCells(extent){for(var x0=extent[0][0],x1=extent[1][0],y0=extent[0][1],y1=extent[1][1],x2,y2,x3,y3,cells=d3_geom_voronoiCells,iCell=cells.length,cell,iHalfEdge,halfEdges,nHalfEdges,start,end;iCell--;)if((cell=cells[iCell])&&cell.prepare())for(nHalfEdges=(halfEdges=cell.edges).length,iHalfEdge=0;iHalfEdge<nHalfEdges;)x3=(end=halfEdges[iHalfEdge].end()).x,y3=end.y,x2=(start=halfEdges[++iHalfEdge%nHalfEdges].start()).x,y2=start.y,(abs(x3-x2)>ε||abs(y3-y2)>ε)&&(halfEdges.splice(iHalfEdge,0,new d3_geom_voronoiHalfEdge(d3_geom_voronoiCreateBorderEdge(cell.site,end,abs(x3-x0)<ε&&y1-y3>ε?{x:x0,y:abs(x2-x0)<ε?y2:y1}:abs(y3-y1)<ε&&x1-x3>ε?{x:abs(y2-y1)<ε?x2:x1,y:y1}:abs(x3-x1)<ε&&y3-y0>ε?{x:x1,y:abs(x2-x1)<ε?y2:y0}:abs(y3-y0)<ε&&x3-x0>ε?{x:abs(y2-y0)<ε?x2:x0,y:y0}:null),cell.site,null)),++nHalfEdges)}function d3_geom_voronoiHalfEdgeOrder(a,b){return b.angle-a.angle}function d3_geom_voronoiCircle(){d3_geom_voronoiRedBlackNode(this),this.x=this.y=this.arc=this.site=this.cy=null}function d3_geom_voronoiAttachCircle(arc){var lArc=arc.P,rArc=arc.N;if(lArc&&rArc){var lSite=lArc.site,cSite=arc.site,rSite=rArc.site;if(lSite!==rSite){var bx=cSite.x,by=cSite.y,ax=lSite.x-bx,ay=lSite.y-by,cx=rSite.x-bx,cy,d=2*(ax*(cy=rSite.y-by)-ay*cx);if(!(d>=-ε2)){var ha=ax*ax+ay*ay,hc=cx*cx+cy*cy,x=(cy*ha-ay*hc)/d,y=(ax*hc-cx*ha)/d,cy=y+by,circle=d3_geom_voronoiCirclePool.pop()||new d3_geom_voronoiCircle;circle.arc=arc,circle.site=cSite,circle.x=x+bx,circle.y=cy+Math.sqrt(x*x+y*y),circle.cy=cy,arc.circle=circle;for(var before=null,node=d3_geom_voronoiCircles._;node;)if(circle.y<node.y||circle.y===node.y&&circle.x<=node.x){if(!node.L){before=node.P;break}node=node.L}else{if(!node.R){before=node;break}node=node.R}d3_geom_voronoiCircles.insert(before,circle),before||(d3_geom_voronoiFirstCircle=circle)}}}}function d3_geom_voronoiDetachCircle(arc){var circle=arc.circle;circle&&(circle.P||(d3_geom_voronoiFirstCircle=circle.N),d3_geom_voronoiCircles.remove(circle),d3_geom_voronoiCirclePool.push(circle),d3_geom_voronoiRedBlackNode(circle),arc.circle=null)}function d3_geom_voronoiClipEdges(extent){for(var edges=d3_geom_voronoiEdges,clip=d3_geom_clipLine(extent[0][0],extent[0][1],extent[1][0],extent[1][1]),i=edges.length,e;i--;)(!d3_geom_voronoiConnectEdge(e=edges[i],extent)||!clip(e)||abs(e.a.x-e.b.x)<ε&&abs(e.a.y-e.b.y)<ε)&&(e.a=e.b=null,edges.splice(i,1))}function d3_geom_voronoiConnectEdge(edge,extent){var vb=edge.b;if(vb)return!0;var va=edge.a,x0=extent[0][0],x1=extent[1][0],y0=extent[0][1],y1=extent[1][1],lSite=edge.l,rSite=edge.r,lx=lSite.x,ly=lSite.y,rx=rSite.x,ry=rSite.y,fx=(lx+rx)/2,fy=(ly+ry)/2,fm,fb;if(ry===ly){if(fx<x0||fx>=x1)return;if(lx>rx){if(va){if(va.y>=y1)return}else va={x:fx,y:y0};vb={x:fx,y:y1}}else{if(va){if(va.y<y0)return}else va={x:fx,y:y1};vb={x:fx,y:y0}}}else if(fb=fy-(fm=(lx-rx)/(ry-ly))*fx,fm<-1||fm>1)if(lx>rx){if(va){if(va.y>=y1)return}else va={x:(y0-fb)/fm,y:y0};vb={x:(y1-fb)/fm,y:y1}}else{if(va){if(va.y<y0)return}else va={x:(y1-fb)/fm,y:y1};vb={x:(y0-fb)/fm,y:y0}}else if(ly<ry){if(va){if(va.x>=x1)return}else va={x:x0,y:fm*x0+fb};vb={x:x1,y:fm*x1+fb}}else{if(va){if(va.x<x0)return}else va={x:x1,y:fm*x1+fb};vb={x:x0,y:fm*x0+fb}}return edge.a=va,edge.b=vb,!0}function d3_geom_voronoiEdge(lSite,rSite){this.l=lSite,this.r=rSite,this.a=this.b=null}function d3_geom_voronoiCreateEdge(lSite,rSite,va,vb){var edge=new d3_geom_voronoiEdge(lSite,rSite);return d3_geom_voronoiEdges.push(edge),va&&d3_geom_voronoiSetEdgeEnd(edge,lSite,rSite,va),vb&&d3_geom_voronoiSetEdgeEnd(edge,rSite,lSite,vb),d3_geom_voronoiCells[lSite.i].edges.push(new d3_geom_voronoiHalfEdge(edge,lSite,rSite)),d3_geom_voronoiCells[rSite.i].edges.push(new d3_geom_voronoiHalfEdge(edge,rSite,lSite)),edge}function d3_geom_voronoiCreateBorderEdge(lSite,va,vb){var edge=new d3_geom_voronoiEdge(lSite,null);return edge.a=va,edge.b=vb,d3_geom_voronoiEdges.push(edge),edge}function d3_geom_voronoiSetEdgeEnd(edge,lSite,rSite,vertex){edge.a||edge.b?edge.l===rSite?edge.b=vertex:edge.a=vertex:(edge.a=vertex,edge.l=lSite,edge.r=rSite)}function d3_geom_voronoiHalfEdge(edge,lSite,rSite){var va=edge.a,vb=edge.b;this.edge=edge,this.site=lSite,this.angle=rSite?Math.atan2(rSite.y-lSite.y,rSite.x-lSite.x):edge.l===lSite?Math.atan2(vb.x-va.x,va.y-vb.y):Math.atan2(va.x-vb.x,vb.y-va.y)}function d3_geom_voronoiRedBlackTree(){this._=null}function d3_geom_voronoiRedBlackNode(node){node.U=node.C=node.L=node.R=node.P=node.N=null}function d3_geom_voronoiRedBlackRotateLeft(tree,node){var p=node,q=node.R,parent=p.U;parent?parent.L===p?parent.L=q:parent.R=q:tree._=q,q.U=parent,p.U=q,p.R=q.L,p.R&&(p.R.U=p),q.L=p}function d3_geom_voronoiRedBlackRotateRight(tree,node){var p=node,q=node.L,parent=p.U;parent?parent.L===p?parent.L=q:parent.R=q:tree._=q,q.U=parent,p.U=q,p.L=q.R,p.L&&(p.L.U=p),q.R=p}function d3_geom_voronoiRedBlackFirst(node){for(;node.L;)node=node.L;return node}function d3_geom_voronoi(sites,bbox){var site=sites.sort(d3_geom_voronoiVertexOrder).pop(),x0,y0,circle;for(d3_geom_voronoiEdges=[],d3_geom_voronoiCells=new Array(sites.length),d3_geom_voronoiBeaches=new d3_geom_voronoiRedBlackTree,d3_geom_voronoiCircles=new d3_geom_voronoiRedBlackTree;;)if(circle=d3_geom_voronoiFirstCircle,site&&(!circle||site.y<circle.y||site.y===circle.y&&site.x<circle.x))site.x===x0&&site.y===y0||(d3_geom_voronoiCells[site.i]=new d3_geom_voronoiCell(site),d3_geom_voronoiAddBeach(site),x0=site.x,y0=site.y),site=sites.pop();else{if(!circle)break;d3_geom_voronoiRemoveBeach(circle.arc)}bbox&&(d3_geom_voronoiClipEdges(bbox),d3_geom_voronoiCloseCells(bbox));var diagram={cells:d3_geom_voronoiCells,edges:d3_geom_voronoiEdges};return d3_geom_voronoiBeaches=d3_geom_voronoiCircles=d3_geom_voronoiEdges=d3_geom_voronoiCells=null,diagram}function d3_geom_voronoiVertexOrder(a,b){return b.y-a.y||b.x-a.x}d3_geom_voronoiCell.prototype.prepare=function(){for(var halfEdges=this.edges,iHalfEdge=halfEdges.length,edge;iHalfEdge--;)(edge=halfEdges[iHalfEdge].edge).b&&edge.a||halfEdges.splice(iHalfEdge,1);return halfEdges.sort(d3_geom_voronoiHalfEdgeOrder),halfEdges.length},d3_geom_voronoiHalfEdge.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},d3_geom_voronoiRedBlackTree.prototype={insert:function(after,node){var parent,grandpa,uncle;if(after){if(node.P=after,node.N=after.N,after.N&&(after.N.P=node),after.N=node,after.R){for(after=after.R;after.L;)after=after.L;after.L=node}else after.R=node;parent=after}else this._?(after=d3_geom_voronoiRedBlackFirst(this._),node.P=null,node.N=after,after.P=after.L=node,parent=after):(node.P=node.N=null,this._=node,parent=null);for(node.L=node.R=null,node.U=parent,node.C=!0,after=node;parent&&parent.C;)parent===(grandpa=parent.U).L?(uncle=grandpa.R)&&uncle.C?(parent.C=uncle.C=!1,grandpa.C=!0,after=grandpa):(after===parent.R&&(d3_geom_voronoiRedBlackRotateLeft(this,parent),parent=(after=parent).U),parent.C=!1,grandpa.C=!0,d3_geom_voronoiRedBlackRotateRight(this,grandpa)):(uncle=grandpa.L)&&uncle.C?(parent.C=uncle.C=!1,grandpa.C=!0,after=grandpa):(after===parent.L&&(d3_geom_voronoiRedBlackRotateRight(this,parent),parent=(after=parent).U),parent.C=!1,grandpa.C=!0,d3_geom_voronoiRedBlackRotateLeft(this,grandpa)),parent=after.U;this._.C=!1},remove:function(node){node.N&&(node.N.P=node.P),node.P&&(node.P.N=node.N),node.N=node.P=null;var parent=node.U,sibling,left=node.L,right=node.R,next,red;if(next=left?right?d3_geom_voronoiRedBlackFirst(right):left:right,parent?parent.L===node?parent.L=next:parent.R=next:this._=next,left&&right?(red=next.C,next.C=node.C,next.L=left,left.U=next,next!==right?(parent=next.U,next.U=node.U,node=next.R,parent.L=node,next.R=right,right.U=next):(next.U=parent,parent=next,node=next.R)):(red=node.C,node=next),node&&(node.U=parent),!red)if(node&&node.C)node.C=!1;else{do{if(node===this._)break;if(node===parent.L){if((sibling=parent.R).C&&(sibling.C=!1,parent.C=!0,d3_geom_voronoiRedBlackRotateLeft(this,parent),sibling=parent.R),sibling.L&&sibling.L.C||sibling.R&&sibling.R.C){sibling.R&&sibling.R.C||(sibling.L.C=!1,sibling.C=!0,d3_geom_voronoiRedBlackRotateRight(this,sibling),sibling=parent.R),sibling.C=parent.C,parent.C=sibling.R.C=!1,d3_geom_voronoiRedBlackRotateLeft(this,parent),node=this._;break}}else if((sibling=parent.L).C&&(sibling.C=!1,parent.C=!0,d3_geom_voronoiRedBlackRotateRight(this,parent),sibling=parent.L),sibling.L&&sibling.L.C||sibling.R&&sibling.R.C){sibling.L&&sibling.L.C||(sibling.R.C=!1,sibling.C=!0,d3_geom_voronoiRedBlackRotateLeft(this,sibling),sibling=parent.L),sibling.C=parent.C,parent.C=sibling.L.C=!1,d3_geom_voronoiRedBlackRotateRight(this,parent),node=this._;break}sibling.C=!0,node=parent,parent=parent.U}while(!node.C);node&&(node.C=!1)}}},d3.geom.voronoi=function(points){var x=d3_geom_pointX,y=d3_geom_pointY,fx=x,fy=y,clipExtent=d3_geom_voronoiClipExtent;if(points)return voronoi(points);function voronoi(data){var polygons=new Array(data.length),x0=clipExtent[0][0],y0=clipExtent[0][1],x1=clipExtent[1][0],y1=clipExtent[1][1];return d3_geom_voronoi(sites(data),clipExtent).cells.forEach((function(cell,i){var edges=cell.edges,site=cell.site,polygon;(polygons[i]=edges.length?edges.map((function(e){var s=e.start();return[s.x,s.y]})):site.x>=x0&&site.x<=x1&&site.y>=y0&&site.y<=y1?[[x0,y1],[x1,y1],[x1,y0],[x0,y0]]:[]).point=data[i]})),polygons}function sites(data){return data.map((function(d,i){return{x:Math.round(fx(d,i)/ε)*ε,y:Math.round(fy(d,i)/ε)*ε,i:i}}))}return voronoi.links=function(data){return d3_geom_voronoi(sites(data)).edges.filter((function(edge){return edge.l&&edge.r})).map((function(edge){return{source:data[edge.l.i],target:data[edge.r.i]}}))},voronoi.triangles=function(data){var triangles=[];return d3_geom_voronoi(sites(data)).cells.forEach((function(cell,i){for(var site=cell.site,edges=cell.edges.sort(d3_geom_voronoiHalfEdgeOrder),j=-1,m=edges.length,e0,s0,e1=edges[m-1].edge,s1=e1.l===site?e1.r:e1.l;++j<m;)e0=e1,s0=s1,s1=(e1=edges[j].edge).l===site?e1.r:e1.l,i<s0.i&&i<s1.i&&d3_geom_voronoiTriangleArea(site,s0,s1)<0&&triangles.push([data[i],data[s0.i],data[s1.i]])})),triangles},voronoi.x=function(_){return arguments.length?(fx=d3_functor(x=_),voronoi):x},voronoi.y=function(_){return arguments.length?(fy=d3_functor(y=_),voronoi):y},voronoi.clipExtent=function(_){return arguments.length?(clipExtent=null==_?d3_geom_voronoiClipExtent:_,voronoi):clipExtent===d3_geom_voronoiClipExtent?null:clipExtent},voronoi.size=function(_){return arguments.length?voronoi.clipExtent(_&&[[0,0],_]):clipExtent===d3_geom_voronoiClipExtent?null:clipExtent&&clipExtent[1]},voronoi};var d3_geom_voronoiClipExtent=[[-1e6,-1e6],[1e6,1e6]];function d3_geom_voronoiTriangleArea(a,b,c){return(a.x-c.x)*(b.y-a.y)-(a.x-b.x)*(c.y-a.y)}function d3_geom_quadtreeCompatX(d){return d.x}function d3_geom_quadtreeCompatY(d){return d.y}function d3_geom_quadtreeNode(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function d3_geom_quadtreeVisit(f,node,x1,y1,x2,y2){if(!f(node,x1,y1,x2,y2)){var sx=.5*(x1+x2),sy=.5*(y1+y2),children=node.nodes;children[0]&&d3_geom_quadtreeVisit(f,children[0],x1,y1,sx,sy),children[1]&&d3_geom_quadtreeVisit(f,children[1],sx,y1,x2,sy),children[2]&&d3_geom_quadtreeVisit(f,children[2],x1,sy,sx,y2),children[3]&&d3_geom_quadtreeVisit(f,children[3],sx,sy,x2,y2)}}function d3_geom_quadtreeFind(root,x,y,x0,y0,x3,y3){var minDistance2=1/0,closestPoint;return function find(node,x1,y1,x2,y2){if(!(x1>x3||y1>y3||x2<x0||y2<y0)){if(point=node.point){var point,dx=x-node.x,dy=y-node.y,distance2=dx*dx+dy*dy;if(distance2<minDistance2){var distance=Math.sqrt(minDistance2=distance2);x0=x-distance,y0=y-distance,x3=x+distance,y3=y+distance,closestPoint=point}}for(var children=node.nodes,xm=.5*(x1+x2),ym=.5*(y1+y2),right,below,i=(y>=ym)<<1|x>=xm,j=i+4;i<j;++i)if(node=children[3&i])switch(3&i){case 0:find(node,x1,y1,xm,ym);break;case 1:find(node,xm,y1,x2,ym);break;case 2:find(node,x1,ym,xm,y2);break;case 3:find(node,xm,ym,x2,y2)}}}(root,x0,y0,x3,y3),closestPoint}function d3_interpolateRgb(a,b){a=d3.rgb(a),b=d3.rgb(b);var ar=a.r,ag=a.g,ab=a.b,br=b.r-ar,bg=b.g-ag,bb=b.b-ab;return function(t){return"#"+d3_rgb_hex(Math.round(ar+br*t))+d3_rgb_hex(Math.round(ag+bg*t))+d3_rgb_hex(Math.round(ab+bb*t))}}function d3_interpolateObject(a,b){var i={},c={},k;for(k in a)k in b?i[k]=d3_interpolate(a[k],b[k]):c[k]=a[k];for(k in b)k in a||(c[k]=b[k]);return function(t){for(k in i)c[k]=i[k](t);return c}}function d3_interpolateNumber(a,b){return a=+a,b=+b,function(t){return a*(1-t)+b*t}}function d3_interpolateString(a,b){var bi=d3_interpolate_numberA.lastIndex=d3_interpolate_numberB.lastIndex=0,am,bm,bs,i=-1,s=[],q=[];for(a+="",b+="";(am=d3_interpolate_numberA.exec(a))&&(bm=d3_interpolate_numberB.exec(b));)(bs=bm.index)>bi&&(bs=b.slice(bi,bs),s[i]?s[i]+=bs:s[++i]=bs),(am=am[0])===(bm=bm[0])?s[i]?s[i]+=bm:s[++i]=bm:(s[++i]=null,q.push({i:i,x:d3_interpolateNumber(am,bm)})),bi=d3_interpolate_numberB.lastIndex;return bi<b.length&&(bs=b.slice(bi),s[i]?s[i]+=bs:s[++i]=bs),s.length<2?q[0]?(b=q[0].x,function(t){return b(t)+""}):function(){return b}:(b=q.length,function(t){for(var i=0,o;i<b;++i)s[(o=q[i]).i]=o.x(t);return s.join("")})}d3.geom.delaunay=function(vertices){return d3.geom.voronoi().triangles(vertices)},d3.geom.quadtree=function(points,x1,y1,x2,y2){var x=d3_geom_pointX,y=d3_geom_pointY,compat;if(compat=arguments.length)return x=d3_geom_quadtreeCompatX,y=d3_geom_quadtreeCompatY,3===compat&&(y2=y1,x2=x1,y1=x1=0),quadtree(points);function quadtree(data){var d,fx=d3_functor(x),fy=d3_functor(y),xs,ys,i,n,x1_,y1_,x2_,y2_;if(null!=x1)x1_=x1,y1_=y1,x2_=x2,y2_=y2;else if(x2_=y2_=-(x1_=y1_=1/0),xs=[],ys=[],n=data.length,compat)for(i=0;i<n;++i)(d=data[i]).x<x1_&&(x1_=d.x),d.y<y1_&&(y1_=d.y),d.x>x2_&&(x2_=d.x),d.y>y2_&&(y2_=d.y),xs.push(d.x),ys.push(d.y);else for(i=0;i<n;++i){var x_=+fx(d=data[i],i),y_=+fy(d,i);x_<x1_&&(x1_=x_),y_<y1_&&(y1_=y_),x_>x2_&&(x2_=x_),y_>y2_&&(y2_=y_),xs.push(x_),ys.push(y_)}var dx=x2_-x1_,dy=y2_-y1_;function insert(n,d,x,y,x1,y1,x2,y2){if(!isNaN(x)&&!isNaN(y))if(n.leaf){var nx=n.x,ny=n.y;if(null!=nx)if(abs(nx-x)+abs(ny-y)<.01)insertChild(n,d,x,y,x1,y1,x2,y2);else{var nPoint=n.point;n.x=n.y=n.point=null,insertChild(n,nPoint,nx,ny,x1,y1,x2,y2),insertChild(n,d,x,y,x1,y1,x2,y2)}else n.x=x,n.y=y,n.point=d}else insertChild(n,d,x,y,x1,y1,x2,y2)}function insertChild(n,d,x,y,x1,y1,x2,y2){var xm=.5*(x1+x2),ym=.5*(y1+y2),right=x>=xm,below=y>=ym,i=below<<1|right;n.leaf=!1,right?x1=xm:x2=xm,below?y1=ym:y2=ym,insert(n=n.nodes[i]||(n.nodes[i]={leaf:!0,nodes:[],point:null,x:null,y:null}),d,x,y,x1,y1,x2,y2)}dx>dy?y2_=y1_+dx:x2_=x1_+dy;var root={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(d){insert(root,d,+fx(d,++i),+fy(d,i),x1_,y1_,x2_,y2_)},visit:function(f){d3_geom_quadtreeVisit(f,root,x1_,y1_,x2_,y2_)},find:function(point){return d3_geom_quadtreeFind(root,point[0],point[1],x1_,y1_,x2_,y2_)}};if(i=-1,null==x1){for(;++i<n;)insert(root,data[i],xs[i],ys[i],x1_,y1_,x2_,y2_);--i}else data.forEach(root.add);return xs=ys=data=d=null,root}return quadtree.x=function(_){return arguments.length?(x=_,quadtree):x},quadtree.y=function(_){return arguments.length?(y=_,quadtree):y},quadtree.extent=function(_){return arguments.length?(null==_?x1=y1=x2=y2=null:(x1=+_[0][0],y1=+_[0][1],x2=+_[1][0],y2=+_[1][1]),quadtree):null==x1?null:[[x1,y1],[x2,y2]]},quadtree.size=function(_){return arguments.length?(null==_?x1=y1=x2=y2=null:(x1=y1=0,x2=+_[0],y2=+_[1]),quadtree):null==x1?null:[x2-x1,y2-y1]},quadtree},d3.interpolateRgb=d3_interpolateRgb,d3.interpolateObject=d3_interpolateObject,d3.interpolateNumber=d3_interpolateNumber,d3.interpolateString=d3_interpolateString;var d3_interpolate_numberA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,d3_interpolate_numberB=new RegExp(d3_interpolate_numberA.source,"g");function d3_interpolate(a,b){for(var i=d3.interpolators.length,f;--i>=0&&!(f=d3.interpolators[i](a,b)););return f}function d3_interpolateArray(a,b){var x=[],c=[],na=a.length,nb=b.length,n0=Math.min(a.length,b.length),i;for(i=0;i<n0;++i)x.push(d3_interpolate(a[i],b[i]));for(;i<na;++i)c[i]=a[i];for(;i<nb;++i)c[i]=b[i];return function(t){for(i=0;i<n0;++i)c[i]=x[i](t);return c}}d3.interpolate=d3_interpolate,d3.interpolators=[function(a,b){var t=typeof b;return("string"===t?d3_rgb_names.has(b.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(b)?d3_interpolateRgb:d3_interpolateString:b instanceof d3_color?d3_interpolateRgb:Array.isArray(b)?d3_interpolateArray:"object"===t&&isNaN(b)?d3_interpolateObject:d3_interpolateNumber)(a,b)}],d3.interpolateArray=d3_interpolateArray;var d3_ease_default=function(){return d3_identity},d3_ease=d3.map({linear:d3_ease_default,poly:d3_ease_poly,quad:function(){return d3_ease_quad},cubic:function(){return d3_ease_cubic},sin:function(){return d3_ease_sin},exp:function(){return d3_ease_exp},circle:function(){return d3_ease_circle},elastic:d3_ease_elastic,back:d3_ease_back,bounce:function(){return d3_ease_bounce}}),d3_ease_mode=d3.map({in:d3_identity,out:d3_ease_reverse,"in-out":d3_ease_reflect,"out-in":function(f){return d3_ease_reflect(d3_ease_reverse(f))}});function d3_ease_clamp(f){return function(t){return t<=0?0:t>=1?1:f(t)}}function d3_ease_reverse(f){return function(t){return 1-f(1-t)}}function d3_ease_reflect(f){return function(t){return.5*(t<.5?f(2*t):2-f(2-2*t))}}function d3_ease_quad(t){return t*t}function d3_ease_cubic(t){return t*t*t}function d3_ease_cubicInOut(t){if(t<=0)return 0;if(t>=1)return 1;var t2=t*t,t3=t2*t;return 4*(t<.5?t3:3*(t-t2)+t3-.75)}function d3_ease_poly(e){return function(t){return Math.pow(t,e)}}function d3_ease_sin(t){return 1-Math.cos(t*halfπ)}function d3_ease_exp(t){return Math.pow(2,10*(t-1))}function d3_ease_circle(t){return 1-Math.sqrt(1-t*t)}function d3_ease_elastic(a,p){var s;return arguments.length<2&&(p=.45),arguments.length?s=p/τ*Math.asin(1/a):(a=1,s=p/4),function(t){return 1+a*Math.pow(2,-10*t)*Math.sin((t-s)*τ/p)}}function d3_ease_back(s){return s||(s=1.70158),function(t){return t*t*((s+1)*t-s)}}function d3_ease_bounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function d3_interpolateHcl(a,b){a=d3.hcl(a),b=d3.hcl(b);var ah=a.h,ac=a.c,al=a.l,bh=b.h-ah,bc=b.c-ac,bl=b.l-al;return isNaN(bc)&&(bc=0,ac=isNaN(ac)?b.c:ac),isNaN(bh)?(bh=0,ah=isNaN(ah)?b.h:ah):bh>180?bh-=360:bh<-180&&(bh+=360),function(t){return d3_hcl_lab(ah+bh*t,ac+bc*t,al+bl*t)+""}}function d3_interpolateHsl(a,b){a=d3.hsl(a),b=d3.hsl(b);var ah=a.h,as=a.s,al=a.l,bh=b.h-ah,bs=b.s-as,bl=b.l-al;return isNaN(bs)&&(bs=0,as=isNaN(as)?b.s:as),isNaN(bh)?(bh=0,ah=isNaN(ah)?b.h:ah):bh>180?bh-=360:bh<-180&&(bh+=360),function(t){return d3_hsl_rgb(ah+bh*t,as+bs*t,al+bl*t)+""}}function d3_interpolateLab(a,b){a=d3.lab(a),b=d3.lab(b);var al=a.l,aa=a.a,ab=a.b,bl=b.l-al,ba=b.a-aa,bb=b.b-ab;return function(t){return d3_lab_rgb(al+bl*t,aa+ba*t,ab+bb*t)+""}}function d3_interpolateRound(a,b){return b-=a,function(t){return Math.round(a+b*t)}}function d3_transform(m){var r0=[m.a,m.b],r1=[m.c,m.d],kx=d3_transformNormalize(r0),kz=d3_transformDot(r0,r1),ky=d3_transformNormalize(d3_transformCombine(r1,r0,-kz))||0;r0[0]*r1[1]<r1[0]*r0[1]&&(r0[0]*=-1,r0[1]*=-1,kx*=-1,kz*=-1),this.rotate=(kx?Math.atan2(r0[1],r0[0]):Math.atan2(-r1[0],r1[1]))*d3_degrees,this.translate=[m.e,m.f],this.scale=[kx,ky],this.skew=ky?Math.atan2(kz,ky)*d3_degrees:0}function d3_transformDot(a,b){return a[0]*b[0]+a[1]*b[1]}function d3_transformNormalize(a){var k=Math.sqrt(d3_transformDot(a,a));return k&&(a[0]/=k,a[1]/=k),k}function d3_transformCombine(a,b,k){return a[0]+=k*b[0],a[1]+=k*b[1],a}d3.ease=function(name){var i=name.indexOf("-"),t=i>=0?name.slice(0,i):name,m=i>=0?name.slice(i+1):"in";return t=d3_ease.get(t)||d3_ease_default,d3_ease_clamp((m=d3_ease_mode.get(m)||d3_identity)(t.apply(null,d3_arraySlice.call(arguments,1))))},d3.interpolateHcl=d3_interpolateHcl,d3.interpolateHsl=d3_interpolateHsl,d3.interpolateLab=d3_interpolateLab,d3.interpolateRound=d3_interpolateRound,d3.transform=function(string){var g=d3_document.createElementNS(d3.ns.prefix.svg,"g");return(d3.transform=function(string){if(null!=string){g.setAttribute("transform",string);var t=g.transform.baseVal.consolidate()}return new d3_transform(t?t.matrix:d3_transformIdentity)})(string)},d3_transform.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var d3_transformIdentity={a:1,b:0,c:0,d:1,e:0,f:0};function d3_interpolateTransformPop(s){return s.length?s.pop()+",":""}function d3_interpolateTranslate(ta,tb,s,q){if(ta[0]!==tb[0]||ta[1]!==tb[1]){var i=s.push("translate(",null,",",null,")");q.push({i:i-4,x:d3_interpolateNumber(ta[0],tb[0])},{i:i-2,x:d3_interpolateNumber(ta[1],tb[1])})}else(tb[0]||tb[1])&&s.push("translate("+tb+")")}function d3_interpolateRotate(ra,rb,s,q){ra!==rb?(ra-rb>180?rb+=360:rb-ra>180&&(ra+=360),q.push({i:s.push(d3_interpolateTransformPop(s)+"rotate(",null,")")-2,x:d3_interpolateNumber(ra,rb)})):rb&&s.push(d3_interpolateTransformPop(s)+"rotate("+rb+")")}function d3_interpolateSkew(wa,wb,s,q){wa!==wb?q.push({i:s.push(d3_interpolateTransformPop(s)+"skewX(",null,")")-2,x:d3_interpolateNumber(wa,wb)}):wb&&s.push(d3_interpolateTransformPop(s)+"skewX("+wb+")")}function d3_interpolateScale(ka,kb,s,q){if(ka[0]!==kb[0]||ka[1]!==kb[1]){var i=s.push(d3_interpolateTransformPop(s)+"scale(",null,",",null,")");q.push({i:i-4,x:d3_interpolateNumber(ka[0],kb[0])},{i:i-2,x:d3_interpolateNumber(ka[1],kb[1])})}else 1===kb[0]&&1===kb[1]||s.push(d3_interpolateTransformPop(s)+"scale("+kb+")")}function d3_interpolateTransform(a,b){var s=[],q=[];return a=d3.transform(a),b=d3.transform(b),d3_interpolateTranslate(a.translate,b.translate,s,q),d3_interpolateRotate(a.rotate,b.rotate,s,q),d3_interpolateSkew(a.skew,b.skew,s,q),d3_interpolateScale(a.scale,b.scale,s,q),a=b=null,function(t){for(var i=-1,n=q.length,o;++i<n;)s[(o=q[i]).i]=o.x(t);return s.join("")}}function d3_uninterpolateNumber(a,b){return b=(b-=a=+a)||1/b,function(x){return(x-a)/b}}function d3_uninterpolateClamp(a,b){return b=(b-=a=+a)||1/b,function(x){return Math.max(0,Math.min(1,(x-a)/b))}}function d3_layout_bundlePath(link){for(var start=link.source,end=link.target,lca=d3_layout_bundleLeastCommonAncestor(start,end),points=[start];start!==lca;)start=start.parent,points.push(start);for(var k=points.length;end!==lca;)points.splice(k,0,end),end=end.parent;return points}function d3_layout_bundleAncestors(node){for(var ancestors=[],parent=node.parent;null!=parent;)ancestors.push(node),node=parent,parent=parent.parent;return ancestors.push(node),ancestors}function d3_layout_bundleLeastCommonAncestor(a,b){if(a===b)return a;for(var aNodes=d3_layout_bundleAncestors(a),bNodes=d3_layout_bundleAncestors(b),aNode=aNodes.pop(),bNode=bNodes.pop(),sharedNode=null;aNode===bNode;)sharedNode=aNode,aNode=aNodes.pop(),bNode=bNodes.pop();return sharedNode}function d3_layout_forceDragstart(d){d.fixed|=2}function d3_layout_forceDragend(d){d.fixed&=-7}function d3_layout_forceMouseover(d){d.fixed|=4,d.px=d.x,d.py=d.y}function d3_layout_forceMouseout(d){d.fixed&=-5}function d3_layout_forceAccumulate(quad,alpha,charges){var cx=0,cy=0;if(quad.charge=0,!quad.leaf)for(var nodes=quad.nodes,n=nodes.length,i=-1,c;++i<n;)null!=(c=nodes[i])&&(d3_layout_forceAccumulate(c,alpha,charges),quad.charge+=c.charge,cx+=c.charge*c.cx,cy+=c.charge*c.cy);if(quad.point){quad.leaf||(quad.point.x+=Math.random()-.5,quad.point.y+=Math.random()-.5);var k=alpha*charges[quad.point.index];quad.charge+=quad.pointCharge=k,cx+=k*quad.point.x,cy+=k*quad.point.y}quad.cx=cx/quad.charge,quad.cy=cy/quad.charge}d3.interpolateTransform=d3_interpolateTransform,d3.layout={},d3.layout.bundle=function(){return function(links){for(var paths=[],i=-1,n=links.length;++i<n;)paths.push(d3_layout_bundlePath(links[i]));return paths}},d3.layout.chord=function(){var chord={},chords,groups,matrix,n,padding=0,sortGroups,sortSubgroups,sortChords;function relayout(){var subgroups={},groupSums=[],groupIndex=d3.range(n),subgroupIndex=[],k,x,x0,i,j;for(chords=[],groups=[],k=0,i=-1;++i<n;){for(x=0,j=-1;++j<n;)x+=matrix[i][j];groupSums.push(x),subgroupIndex.push(d3.range(n)),k+=x}for(sortGroups&&groupIndex.sort((function(a,b){return sortGroups(groupSums[a],groupSums[b])})),sortSubgroups&&subgroupIndex.forEach((function(d,i){d.sort((function(a,b){return sortSubgroups(matrix[i][a],matrix[i][b])}))})),k=(τ-padding*n)/k,x=0,i=-1;++i<n;){for(x0=x,j=-1;++j<n;){var di=groupIndex[i],dj=subgroupIndex[di][j],v=matrix[di][dj],a0=x,a1=x+=v*k;subgroups[di+"-"+dj]={index:di,subindex:dj,startAngle:a0,endAngle:a1,value:v}}groups[di]={index:di,startAngle:x0,endAngle:x,value:groupSums[di]},x+=padding}for(i=-1;++i<n;)for(j=i-1;++j<n;){var source=subgroups[i+"-"+j],target=subgroups[j+"-"+i];(source.value||target.value)&&chords.push(source.value<target.value?{source:target,target:source}:{source:source,target:target})}sortChords&&resort()}function resort(){chords.sort((function(a,b){return sortChords((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)}))}return chord.matrix=function(x){return arguments.length?(n=(matrix=x)&&matrix.length,chords=groups=null,chord):matrix},chord.padding=function(x){return arguments.length?(padding=x,chords=groups=null,chord):padding},chord.sortGroups=function(x){return arguments.length?(sortGroups=x,chords=groups=null,chord):sortGroups},chord.sortSubgroups=function(x){return arguments.length?(sortSubgroups=x,chords=null,chord):sortSubgroups},chord.sortChords=function(x){return arguments.length?(sortChords=x,chords&&resort(),chord):sortChords},chord.chords=function(){return chords||relayout(),chords},chord.groups=function(){return groups||relayout(),groups},chord},d3.layout.force=function(){var force={},event=d3.dispatch("start","tick","end"),timer,size=[1,1],drag,alpha,friction=.9,linkDistance=d3_layout_forceLinkDistance,linkStrength=d3_layout_forceLinkStrength,charge=-30,chargeDistance2=d3_layout_forceChargeDistance2,gravity=.1,theta2=.64,nodes=[],links=[],distances,strengths,charges;function repulse(node){return function(quad,x1,_,x2){if(quad.point!==node){var dx=quad.cx-node.x,dy=quad.cy-node.y,dw=x2-x1,dn=dx*dx+dy*dy;if(dw*dw/theta2<dn){if(dn<chargeDistance2){var k=quad.charge/dn;node.px-=dx*k,node.py-=dy*k}return!0}if(quad.point&&dn&&dn<chargeDistance2){var k=quad.pointCharge/dn;node.px-=dx*k,node.py-=dy*k}}return!quad.charge}}function dragmove(d){d.px=d3.event.x,d.py=d3.event.y,force.resume()}return force.tick=function(){if((alpha*=.99)<.005)return timer=null,event.end({type:"end",alpha:alpha=0}),!0;var n=nodes.length,m=links.length,q,i,o,s,t,l,k,x,y;for(i=0;i<m;++i)s=(o=links[i]).source,(l=(x=(t=o.target).x-s.x)*x+(y=t.y-s.y)*y)&&(x*=l=alpha*strengths[i]*((l=Math.sqrt(l))-distances[i])/l,y*=l,t.x-=x*(k=s.weight+t.weight?s.weight/(s.weight+t.weight):.5),t.y-=y*k,s.x+=x*(k=1-k),s.y+=y*k);if((k=alpha*gravity)&&(x=size[0]/2,y=size[1]/2,i=-1,k))for(;++i<n;)(o=nodes[i]).x+=(x-o.x)*k,o.y+=(y-o.y)*k;if(charge)for(d3_layout_forceAccumulate(q=d3.geom.quadtree(nodes),alpha,charges),i=-1;++i<n;)(o=nodes[i]).fixed||q.visit(repulse(o));for(i=-1;++i<n;)(o=nodes[i]).fixed?(o.x=o.px,o.y=o.py):(o.x-=(o.px-(o.px=o.x))*friction,o.y-=(o.py-(o.py=o.y))*friction);event.tick({type:"tick",alpha:alpha})},force.nodes=function(x){return arguments.length?(nodes=x,force):nodes},force.links=function(x){return arguments.length?(links=x,force):links},force.size=function(x){return arguments.length?(size=x,force):size},force.linkDistance=function(x){return arguments.length?(linkDistance="function"==typeof x?x:+x,force):linkDistance},force.distance=force.linkDistance,force.linkStrength=function(x){return arguments.length?(linkStrength="function"==typeof x?x:+x,force):linkStrength},force.friction=function(x){return arguments.length?(friction=+x,force):friction},force.charge=function(x){return arguments.length?(charge="function"==typeof x?x:+x,force):charge},force.chargeDistance=function(x){return arguments.length?(chargeDistance2=x*x,force):Math.sqrt(chargeDistance2)},force.gravity=function(x){return arguments.length?(gravity=+x,force):gravity},force.theta=function(x){return arguments.length?(theta2=x*x,force):Math.sqrt(theta2)},force.alpha=function(x){return arguments.length?(x=+x,alpha?x>0?alpha=x:(timer.c=null,timer.t=NaN,timer=null,event.end({type:"end",alpha:alpha=0})):x>0&&(event.start({type:"start",alpha:alpha=x}),timer=d3_timer(force.tick)),force):alpha},force.start=function(){var i,n=nodes.length,m=links.length,w=size[0],h=size[1],neighbors,o;for(i=0;i<n;++i)(o=nodes[i]).index=i,o.weight=0;for(i=0;i<m;++i)"number"==typeof(o=links[i]).source&&(o.source=nodes[o.source]),"number"==typeof o.target&&(o.target=nodes[o.target]),++o.source.weight,++o.target.weight;for(i=0;i<n;++i)o=nodes[i],isNaN(o.x)&&(o.x=position("x",w)),isNaN(o.y)&&(o.y=position("y",h)),isNaN(o.px)&&(o.px=o.x),isNaN(o.py)&&(o.py=o.y);if(distances=[],"function"==typeof linkDistance)for(i=0;i<m;++i)distances[i]=+linkDistance.call(this,links[i],i);else for(i=0;i<m;++i)distances[i]=linkDistance;if(strengths=[],"function"==typeof linkStrength)for(i=0;i<m;++i)strengths[i]=+linkStrength.call(this,links[i],i);else for(i=0;i<m;++i)strengths[i]=linkStrength;if(charges=[],"function"==typeof charge)for(i=0;i<n;++i)charges[i]=+charge.call(this,nodes[i],i);else for(i=0;i<n;++i)charges[i]=charge;function position(dimension,size){if(!neighbors){for(neighbors=new Array(n),j=0;j<n;++j)neighbors[j]=[];for(j=0;j<m;++j){var o=links[j];neighbors[o.source.index].push(o.target),neighbors[o.target.index].push(o.source)}}for(var candidates=neighbors[i],j=-1,l=candidates.length,x;++j<l;)if(!isNaN(x=candidates[j][dimension]))return x;return Math.random()*size}return force.resume()},force.resume=function(){return force.alpha(.1)},force.stop=function(){return force.alpha(0)},force.drag=function(){if(drag||(drag=d3.behavior.drag().origin(d3_identity).on("dragstart.force",d3_layout_forceDragstart).on("drag.force",dragmove).on("dragend.force",d3_layout_forceDragend)),!arguments.length)return drag;this.on("mouseover.force",d3_layout_forceMouseover).on("mouseout.force",d3_layout_forceMouseout).call(drag)},d3.rebind(force,event,"on")};var d3_layout_forceLinkDistance=20,d3_layout_forceLinkStrength=1,d3_layout_forceChargeDistance2=1/0;function d3_layout_hierarchyRebind(object,hierarchy){return d3.rebind(object,hierarchy,"sort","children","value"),object.nodes=object,object.links=d3_layout_hierarchyLinks,object}function d3_layout_hierarchyVisitBefore(node,callback){for(var nodes=[node];null!=(node=nodes.pop());)if(callback(node),(children=node.children)&&(n=children.length))for(var n,children;--n>=0;)nodes.push(children[n])}function d3_layout_hierarchyVisitAfter(node,callback){for(var nodes=[node],nodes2=[];null!=(node=nodes.pop());)if(nodes2.push(node),(children=node.children)&&(n=children.length))for(var i=-1,n,children;++i<n;)nodes.push(children[i]);for(;null!=(node=nodes2.pop());)callback(node)}function d3_layout_hierarchyChildren(d){return d.children}function d3_layout_hierarchyValue(d){return d.value}function d3_layout_hierarchySort(a,b){return b.value-a.value}function d3_layout_hierarchyLinks(nodes){return d3.merge(nodes.map((function(parent){return(parent.children||[]).map((function(child){return{source:parent,target:child}}))})))}d3.layout.hierarchy=function(){var sort=d3_layout_hierarchySort,children=d3_layout_hierarchyChildren,value=d3_layout_hierarchyValue;function hierarchy(root){var stack=[root],nodes=[],node;for(root.depth=0;null!=(node=stack.pop());)if(nodes.push(node),(childs=children.call(hierarchy,node,node.depth))&&(n=childs.length)){for(var n,childs,child;--n>=0;)stack.push(child=childs[n]),child.parent=node,child.depth=node.depth+1;value&&(node.value=0),node.children=childs}else value&&(node.value=+value.call(hierarchy,node,node.depth)||0),delete node.children;return d3_layout_hierarchyVisitAfter(root,(function(node){var childs,parent;sort&&(childs=node.children)&&childs.sort(sort),value&&(parent=node.parent)&&(parent.value+=node.value)})),nodes}return hierarchy.sort=function(x){return arguments.length?(sort=x,hierarchy):sort},hierarchy.children=function(x){return arguments.length?(children=x,hierarchy):children},hierarchy.value=function(x){return arguments.length?(value=x,hierarchy):value},hierarchy.revalue=function(root){return value&&(d3_layout_hierarchyVisitBefore(root,(function(node){node.children&&(node.value=0)})),d3_layout_hierarchyVisitAfter(root,(function(node){var parent;node.children||(node.value=+value.call(hierarchy,node,node.depth)||0),(parent=node.parent)&&(parent.value+=node.value)}))),root},hierarchy},d3.layout.partition=function(){var hierarchy=d3.layout.hierarchy(),size=[1,1];function position(node,x,dx,dy){var children=node.children;if(node.x=x,node.y=node.depth*dy,node.dx=dx,node.dy=dy,children&&(n=children.length)){var i=-1,n,c,d;for(dx=node.value?dx/node.value:0;++i<n;)position(c=children[i],x,d=c.value*dx,dy),x+=d}}function depth(node){var children=node.children,d=0;if(children&&(n=children.length))for(var i=-1,n;++i<n;)d=Math.max(d,depth(children[i]));return 1+d}function partition(d,i){var nodes=hierarchy.call(this,d,i);return position(nodes[0],0,size[0],size[1]/depth(nodes[0])),nodes}return partition.size=function(x){return arguments.length?(size=x,partition):size},d3_layout_hierarchyRebind(partition,hierarchy)},d3.layout.pie=function(){var value=Number,sort=d3_layout_pieSortByValue,startAngle=0,endAngle=τ,padAngle=0;function pie(data){var n=data.length,values=data.map((function(d,i){return+value.call(pie,d,i)})),a=+("function"==typeof startAngle?startAngle.apply(this,arguments):startAngle),da=("function"==typeof endAngle?endAngle.apply(this,arguments):endAngle)-a,p=Math.min(Math.abs(da)/n,+("function"==typeof padAngle?padAngle.apply(this,arguments):padAngle)),pa=p*(da<0?-1:1),sum=d3.sum(values),k=sum?(da-n*pa)/sum:0,index=d3.range(n),arcs=[],v;return null!=sort&&index.sort(sort===d3_layout_pieSortByValue?function(i,j){return values[j]-values[i]}:function(i,j){return sort(data[i],data[j])}),index.forEach((function(i){arcs[i]={data:data[i],value:v=values[i],startAngle:a,endAngle:a+=v*k+pa,padAngle:p}})),arcs}return pie.value=function(_){return arguments.length?(value=_,pie):value},pie.sort=function(_){return arguments.length?(sort=_,pie):sort},pie.startAngle=function(_){return arguments.length?(startAngle=_,pie):startAngle},pie.endAngle=function(_){return arguments.length?(endAngle=_,pie):endAngle},pie.padAngle=function(_){return arguments.length?(padAngle=_,pie):padAngle},pie};var d3_layout_pieSortByValue={};function d3_layout_stackX(d){return d.x}function d3_layout_stackY(d){return d.y}function d3_layout_stackOut(d,y0,y){d.y0=y0,d.y=y}d3.layout.stack=function(){var values=d3_identity,order=d3_layout_stackOrderDefault,offset=d3_layout_stackOffsetZero,out=d3_layout_stackOut,x=d3_layout_stackX,y=d3_layout_stackY;function stack(data,index){if(!(n=data.length))return data;var series=data.map((function(d,i){return values.call(stack,d,i)})),points=series.map((function(d){return d.map((function(v,i){return[x.call(stack,v,i),y.call(stack,v,i)]}))})),orders=order.call(stack,points,index);series=d3.permute(series,orders),points=d3.permute(points,orders);var offsets=offset.call(stack,points,index),m=series[0].length,n,i,j,o;for(j=0;j<m;++j)for(out.call(stack,series[0][j],o=offsets[j],points[0][j][1]),i=1;i<n;++i)out.call(stack,series[i][j],o+=points[i-1][j][1],points[i][j][1]);return data}return stack.values=function(x){return arguments.length?(values=x,stack):values},stack.order=function(x){return arguments.length?(order="function"==typeof x?x:d3_layout_stackOrders.get(x)||d3_layout_stackOrderDefault,stack):order},stack.offset=function(x){return arguments.length?(offset="function"==typeof x?x:d3_layout_stackOffsets.get(x)||d3_layout_stackOffsetZero,stack):offset},stack.x=function(z){return arguments.length?(x=z,stack):x},stack.y=function(z){return arguments.length?(y=z,stack):y},stack.out=function(z){return arguments.length?(out=z,stack):out},stack};var d3_layout_stackOrders=d3.map({"inside-out":function(data){var n=data.length,i,j,max=data.map(d3_layout_stackMaxIndex),sums=data.map(d3_layout_stackReduceSum),index=d3.range(n).sort((function(a,b){return max[a]-max[b]})),top=0,bottom=0,tops=[],bottoms=[];for(i=0;i<n;++i)j=index[i],top<bottom?(top+=sums[j],tops.push(j)):(bottom+=sums[j],bottoms.push(j));return bottoms.reverse().concat(tops)},reverse:function(data){return d3.range(data.length).reverse()},default:d3_layout_stackOrderDefault}),d3_layout_stackOffsets=d3.map({silhouette:function(data){var n=data.length,m=data[0].length,sums=[],max=0,i,j,o,y0=[];for(j=0;j<m;++j){for(i=0,o=0;i<n;i++)o+=data[i][j][1];o>max&&(max=o),sums.push(o)}for(j=0;j<m;++j)y0[j]=(max-sums[j])/2;return y0},wiggle:function(data){var n=data.length,x=data[0],m=x.length,i,j,k,s1,s2,s3,dx,o,o0,y0=[];for(y0[0]=o=o0=0,j=1;j<m;++j){for(i=0,s1=0;i<n;++i)s1+=data[i][j][1];for(i=0,s2=0,dx=x[j][0]-x[j-1][0];i<n;++i){for(k=0,s3=(data[i][j][1]-data[i][j-1][1])/(2*dx);k<i;++k)s3+=(data[k][j][1]-data[k][j-1][1])/dx;s2+=s3*data[i][j][1]}y0[j]=o-=s1?s2/s1*dx:0,o<o0&&(o0=o)}for(j=0;j<m;++j)y0[j]-=o0;return y0},expand:function(data){var n=data.length,m=data[0].length,k=1/n,i,j,o,y0=[];for(j=0;j<m;++j){for(i=0,o=0;i<n;i++)o+=data[i][j][1];if(o)for(i=0;i<n;i++)data[i][j][1]/=o;else for(i=0;i<n;i++)data[i][j][1]=k}for(j=0;j<m;++j)y0[j]=0;return y0},zero:d3_layout_stackOffsetZero});function d3_layout_stackOrderDefault(data){return d3.range(data.length)}function d3_layout_stackOffsetZero(data){for(var j=-1,m=data[0].length,y0=[];++j<m;)y0[j]=0;return y0}function d3_layout_stackMaxIndex(array){for(var i=1,j=0,v=array[0][1],k,n=array.length;i<n;++i)(k=array[i][1])>v&&(j=i,v=k);return j}function d3_layout_stackReduceSum(d){return d.reduce(d3_layout_stackSum,0)}function d3_layout_stackSum(p,d){return p+d[1]}function d3_layout_histogramBinSturges(range,values){return d3_layout_histogramBinFixed(range,Math.ceil(Math.log(values.length)/Math.LN2+1))}function d3_layout_histogramBinFixed(range,n){for(var x=-1,b=+range[0],m=(range[1]-b)/n,f=[];++x<=n;)f[x]=m*x+b;return f}function d3_layout_histogramRange(values){return[d3.min(values),d3.max(values)]}function d3_layout_packSort(a,b){return a.value-b.value}function d3_layout_packInsert(a,b){var c=a._pack_next;a._pack_next=b,b._pack_prev=a,b._pack_next=c,c._pack_prev=b}function d3_layout_packSplice(a,b){a._pack_next=b,b._pack_prev=a}function d3_layout_packIntersects(a,b){var dx=b.x-a.x,dy=b.y-a.y,dr=a.r+b.r;return.999*dr*dr>dx*dx+dy*dy}function d3_layout_packSiblings(node){if((nodes=node.children)&&(n=nodes.length)){var nodes,xMin=1/0,xMax=-1/0,yMin=1/0,yMax=-1/0,a,b,c,i,j,k,n;if(nodes.forEach(d3_layout_packLink),(a=nodes[0]).x=-a.r,a.y=0,bound(a),n>1&&((b=nodes[1]).x=b.r,b.y=0,bound(b),n>2))for(d3_layout_packPlace(a,b,c=nodes[2]),bound(c),d3_layout_packInsert(a,c),a._pack_prev=c,d3_layout_packInsert(c,b),b=a._pack_next,i=3;i<n;i++){d3_layout_packPlace(a,b,c=nodes[i]);var isect=0,s1=1,s2=1;for(j=b._pack_next;j!==b;j=j._pack_next,s1++)if(d3_layout_packIntersects(j,c)){isect=1;break}if(1==isect)for(k=a._pack_prev;k!==j._pack_prev&&!d3_layout_packIntersects(k,c);k=k._pack_prev,s2++);isect?(s1<s2||s1==s2&&b.r<a.r?d3_layout_packSplice(a,b=j):d3_layout_packSplice(a=k,b),i--):(d3_layout_packInsert(a,c),b=c,bound(c))}var cx=(xMin+xMax)/2,cy=(yMin+yMax)/2,cr=0;for(i=0;i<n;i++)(c=nodes[i]).x-=cx,c.y-=cy,cr=Math.max(cr,c.r+Math.sqrt(c.x*c.x+c.y*c.y));node.r=cr,nodes.forEach(d3_layout_packUnlink)}function bound(node){xMin=Math.min(node.x-node.r,xMin),xMax=Math.max(node.x+node.r,xMax),yMin=Math.min(node.y-node.r,yMin),yMax=Math.max(node.y+node.r,yMax)}}function d3_layout_packLink(node){node._pack_next=node._pack_prev=node}function d3_layout_packUnlink(node){delete node._pack_next,delete node._pack_prev}function d3_layout_packTransform(node,x,y,k){var children=node.children;if(node.x=x+=k*node.x,node.y=y+=k*node.y,node.r*=k,children)for(var i=-1,n=children.length;++i<n;)d3_layout_packTransform(children[i],x,y,k)}function d3_layout_packPlace(a,b,c){var db=a.r+c.r,dx=b.x-a.x,dy=b.y-a.y;if(db&&(dx||dy)){var da=b.r+c.r,dc=dx*dx+dy*dy,x=.5+((db*=db)-(da*=da))/(2*dc),y=Math.sqrt(Math.max(0,2*da*(db+dc)-(db-=dc)*db-da*da))/(2*dc);c.x=a.x+x*dx+y*dy,c.y=a.y+x*dy-y*dx}else c.x=a.x+db,c.y=a.y}function d3_layout_treeSeparation(a,b){return a.parent==b.parent?1:2}function d3_layout_treeLeft(v){var children=v.children;return children.length?children[0]:v.t}function d3_layout_treeRight(v){var children=v.children,n;return(n=children.length)?children[n-1]:v.t}function d3_layout_treeMove(wm,wp,shift){var change=shift/(wp.i-wm.i);wp.c-=change,wp.s+=shift,wm.c+=change,wp.z+=shift,wp.m+=shift}function d3_layout_treeShift(v){for(var shift=0,change=0,children=v.children,i=children.length,w;--i>=0;)(w=children[i]).z+=shift,w.m+=shift,shift+=w.s+(change+=w.c)}function d3_layout_treeAncestor(vim,v,ancestor){return vim.a.parent===v.parent?vim.a:ancestor}function d3_layout_clusterY(children){return 1+d3.max(children,(function(child){return child.y}))}function d3_layout_clusterX(children){return children.reduce((function(x,child){return x+child.x}),0)/children.length}function d3_layout_clusterLeft(node){var children=node.children;return children&&children.length?d3_layout_clusterLeft(children[0]):node}function d3_layout_clusterRight(node){var children=node.children,n;return children&&(n=children.length)?d3_layout_clusterRight(children[n-1]):node}function d3_layout_treemapPadNull(node){return{x:node.x,y:node.y,dx:node.dx,dy:node.dy}}function d3_layout_treemapPad(node,padding){var x=node.x+padding[3],y=node.y+padding[0],dx=node.dx-padding[1]-padding[3],dy=node.dy-padding[0]-padding[2];return dx<0&&(x+=dx/2,dx=0),dy<0&&(y+=dy/2,dy=0),{x:x,y:y,dx:dx,dy:dy}}function d3_scaleExtent(domain){var start=domain[0],stop=domain[domain.length-1];return start<stop?[start,stop]:[stop,start]}function d3_scaleRange(scale){return scale.rangeExtent?scale.rangeExtent():d3_scaleExtent(scale.range())}function d3_scale_bilinear(domain,range,uninterpolate,interpolate){var u=uninterpolate(domain[0],domain[1]),i=interpolate(range[0],range[1]);return function(x){return i(u(x))}}function d3_scale_nice(domain,nice){var i0=0,i1=domain.length-1,x0=domain[i0],x1=domain[i1],dx;return x1<x0&&(dx=i0,i0=i1,i1=dx,dx=x0,x0=x1,x1=dx),domain[i0]=nice.floor(x0),domain[i1]=nice.ceil(x1),domain}function d3_scale_niceStep(step){return step?{floor:function(x){return Math.floor(x/step)*step},ceil:function(x){return Math.ceil(x/step)*step}}:d3_scale_niceIdentity}d3.layout.histogram=function(){var frequency=!0,valuer=Number,ranger=d3_layout_histogramRange,binner=d3_layout_histogramBinSturges;function histogram(data,i){for(var bins=[],values=data.map(valuer,this),range=ranger.call(this,values,i),thresholds=binner.call(this,range,values,i),bin,i=-1,n=values.length,m=thresholds.length-1,k=frequency?1:1/n,x;++i<m;)(bin=bins[i]=[]).dx=thresholds[i+1]-(bin.x=thresholds[i]),bin.y=0;if(m>0)for(i=-1;++i<n;)(x=values[i])>=range[0]&&x<=range[1]&&((bin=bins[d3.bisect(thresholds,x,1,m)-1]).y+=k,bin.push(data[i]));return bins}return histogram.value=function(x){return arguments.length?(valuer=x,histogram):valuer},histogram.range=function(x){return arguments.length?(ranger=d3_functor(x),histogram):ranger},histogram.bins=function(x){return arguments.length?(binner="number"==typeof x?function(range){return d3_layout_histogramBinFixed(range,x)}:d3_functor(x),histogram):binner},histogram.frequency=function(x){return arguments.length?(frequency=!!x,histogram):frequency},histogram},d3.layout.pack=function(){var hierarchy=d3.layout.hierarchy().sort(d3_layout_packSort),padding=0,size=[1,1],radius;function pack(d,i){var nodes=hierarchy.call(this,d,i),root=nodes[0],w=size[0],h=size[1],r=null==radius?Math.sqrt:"function"==typeof radius?radius:function(){return radius};if(root.x=root.y=0,d3_layout_hierarchyVisitAfter(root,(function(d){d.r=+r(d.value)})),d3_layout_hierarchyVisitAfter(root,d3_layout_packSiblings),padding){var dr=padding*(radius?1:Math.max(2*root.r/w,2*root.r/h))/2;d3_layout_hierarchyVisitAfter(root,(function(d){d.r+=dr})),d3_layout_hierarchyVisitAfter(root,d3_layout_packSiblings),d3_layout_hierarchyVisitAfter(root,(function(d){d.r-=dr}))}return d3_layout_packTransform(root,w/2,h/2,radius?1:1/Math.max(2*root.r/w,2*root.r/h)),nodes}return pack.size=function(_){return arguments.length?(size=_,pack):size},pack.radius=function(_){return arguments.length?(radius=null==_||"function"==typeof _?_:+_,pack):radius},pack.padding=function(_){return arguments.length?(padding=+_,pack):padding},d3_layout_hierarchyRebind(pack,hierarchy)},d3.layout.tree=function(){var hierarchy=d3.layout.hierarchy().sort(null).value(null),separation=d3_layout_treeSeparation,size=[1,1],nodeSize=null;function tree(d,i){var nodes=hierarchy.call(this,d,i),root0=nodes[0],root1=wrapTree(root0);if(d3_layout_hierarchyVisitAfter(root1,firstWalk),root1.parent.m=-root1.z,d3_layout_hierarchyVisitBefore(root1,secondWalk),nodeSize)d3_layout_hierarchyVisitBefore(root0,sizeNode);else{var left=root0,right=root0,bottom=root0;d3_layout_hierarchyVisitBefore(root0,(function(node){node.x<left.x&&(left=node),node.x>right.x&&(right=node),node.depth>bottom.depth&&(bottom=node)}));var tx=separation(left,right)/2-left.x,kx=size[0]/(right.x+separation(right,left)/2+tx),ky=size[1]/(bottom.depth||1);d3_layout_hierarchyVisitBefore(root0,(function(node){node.x=(node.x+tx)*kx,node.y=node.depth*ky}))}return nodes}function wrapTree(root0){for(var root1={A:null,children:[root0]},queue=[root1],node1;null!=(node1=queue.pop());)for(var children=node1.children,child,i=0,n=children.length;i<n;++i)queue.push((children[i]=child={_:children[i],parent:node1,children:(child=children[i].children)&&child.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:i}).a=child);return root1.children[0]}function firstWalk(v){var children=v.children,siblings=v.parent.children,w=v.i?siblings[v.i-1]:null;if(children.length){d3_layout_treeShift(v);var midpoint=(children[0].z+children[children.length-1].z)/2;w?(v.z=w.z+separation(v._,w._),v.m=v.z-midpoint):v.z=midpoint}else w&&(v.z=w.z+separation(v._,w._));v.parent.A=apportion(v,w,v.parent.A||siblings[0])}function secondWalk(v){v._.x=v.z+v.parent.m,v.m+=v.parent.m}function apportion(v,w,ancestor){if(w){for(var vip=v,vop=v,vim=w,vom=vip.parent.children[0],sip=vip.m,sop=vop.m,sim=vim.m,som=vom.m,shift;vim=d3_layout_treeRight(vim),vip=d3_layout_treeLeft(vip),vim&&vip;)vom=d3_layout_treeLeft(vom),(vop=d3_layout_treeRight(vop)).a=v,(shift=vim.z+sim-vip.z-sip+separation(vim._,vip._))>0&&(d3_layout_treeMove(d3_layout_treeAncestor(vim,v,ancestor),v,shift),sip+=shift,sop+=shift),sim+=vim.m,sip+=vip.m,som+=vom.m,sop+=vop.m;vim&&!d3_layout_treeRight(vop)&&(vop.t=vim,vop.m+=sim-sop),vip&&!d3_layout_treeLeft(vom)&&(vom.t=vip,vom.m+=sip-som,ancestor=v)}return ancestor}function sizeNode(node){node.x*=size[0],node.y=node.depth*size[1]}return tree.separation=function(x){return arguments.length?(separation=x,tree):separation},tree.size=function(x){return arguments.length?(nodeSize=null==(size=x)?sizeNode:null,tree):nodeSize?null:size},tree.nodeSize=function(x){return arguments.length?(nodeSize=null==(size=x)?null:sizeNode,tree):nodeSize?size:null},d3_layout_hierarchyRebind(tree,hierarchy)},d3.layout.cluster=function(){var hierarchy=d3.layout.hierarchy().sort(null).value(null),separation=d3_layout_treeSeparation,size=[1,1],nodeSize=!1;function cluster(d,i){var nodes=hierarchy.call(this,d,i),root=nodes[0],previousNode,x=0;d3_layout_hierarchyVisitAfter(root,(function(node){var children=node.children;children&&children.length?(node.x=d3_layout_clusterX(children),node.y=d3_layout_clusterY(children)):(node.x=previousNode?x+=separation(node,previousNode):0,node.y=0,previousNode=node)}));var left=d3_layout_clusterLeft(root),right=d3_layout_clusterRight(root),x0=left.x-separation(left,right)/2,x1=right.x+separation(right,left)/2;return d3_layout_hierarchyVisitAfter(root,nodeSize?function(node){node.x=(node.x-root.x)*size[0],node.y=(root.y-node.y)*size[1]}:function(node){node.x=(node.x-x0)/(x1-x0)*size[0],node.y=(1-(root.y?node.y/root.y:1))*size[1]}),nodes}return cluster.separation=function(x){return arguments.length?(separation=x,cluster):separation},cluster.size=function(x){return arguments.length?(nodeSize=null==(size=x),cluster):nodeSize?null:size},cluster.nodeSize=function(x){return arguments.length?(nodeSize=null!=(size=x),cluster):nodeSize?size:null},d3_layout_hierarchyRebind(cluster,hierarchy)},d3.layout.treemap=function(){var hierarchy=d3.layout.hierarchy(),round=Math.round,size=[1,1],padding=null,pad=d3_layout_treemapPadNull,sticky=!1,stickies,mode="squarify",ratio=.5*(1+Math.sqrt(5));function scale(children,k){for(var i=-1,n=children.length,child,area;++i<n;)area=(child=children[i]).value*(k<0?0:k),child.area=isNaN(area)||area<=0?0:area}function squarify(node){var children=node.children;if(children&&children.length){var rect=pad(node),row=[],remaining=children.slice(),child,best=1/0,score,u="slice"===mode?rect.dx:"dice"===mode?rect.dy:"slice-dice"===mode?1&node.depth?rect.dy:rect.dx:Math.min(rect.dx,rect.dy),n;for(scale(remaining,rect.dx*rect.dy/node.value),row.area=0;(n=remaining.length)>0;)row.push(child=remaining[n-1]),row.area+=child.area,"squarify"!==mode||(score=worst(row,u))<=best?(remaining.pop(),best=score):(row.area-=row.pop().area,position(row,u,rect,!1),u=Math.min(rect.dx,rect.dy),row.length=row.area=0,best=1/0);row.length&&(position(row,u,rect,!0),row.length=row.area=0),children.forEach(squarify)}}function stickify(node){var children=node.children;if(children&&children.length){var rect=pad(node),remaining=children.slice(),child,row=[];for(scale(remaining,rect.dx*rect.dy/node.value),row.area=0;child=remaining.pop();)row.push(child),row.area+=child.area,null!=child.z&&(position(row,child.z?rect.dx:rect.dy,rect,!remaining.length),row.length=row.area=0);children.forEach(stickify)}}function worst(row,u){for(var s=row.area,r,rmax=0,rmin=1/0,i=-1,n=row.length;++i<n;)(r=row[i].area)&&(r<rmin&&(rmin=r),r>rmax&&(rmax=r));return u*=u,(s*=s)?Math.max(u*rmax*ratio/s,s/(u*rmin*ratio)):1/0}function position(row,u,rect,flush){var i=-1,n=row.length,x=rect.x,y=rect.y,v=u?round(row.area/u):0,o;if(u==rect.dx){for((flush||v>rect.dy)&&(v=rect.dy);++i<n;)(o=row[i]).x=x,o.y=y,o.dy=v,x+=o.dx=Math.min(rect.x+rect.dx-x,v?round(o.area/v):0);o.z=!0,o.dx+=rect.x+rect.dx-x,rect.y+=v,rect.dy-=v}else{for((flush||v>rect.dx)&&(v=rect.dx);++i<n;)(o=row[i]).x=x,o.y=y,o.dx=v,y+=o.dy=Math.min(rect.y+rect.dy-y,v?round(o.area/v):0);o.z=!1,o.dy+=rect.y+rect.dy-y,rect.x+=v,rect.dx-=v}}function treemap(d){var nodes=stickies||hierarchy(d),root=nodes[0];return root.x=root.y=0,root.value?(root.dx=size[0],root.dy=size[1]):root.dx=root.dy=0,stickies&&hierarchy.revalue(root),scale([root],root.dx*root.dy/root.value),(stickies?stickify:squarify)(root),sticky&&(stickies=nodes),nodes}return treemap.size=function(x){return arguments.length?(size=x,treemap):size},treemap.padding=function(x){if(!arguments.length)return padding;function padFunction(node){var p=x.call(treemap,node,node.depth);return null==p?d3_layout_treemapPadNull(node):d3_layout_treemapPad(node,"number"==typeof p?[p,p,p,p]:p)}function padConstant(node){return d3_layout_treemapPad(node,x)}var type;return pad=null==(padding=x)?d3_layout_treemapPadNull:"function"==(type=typeof x)?padFunction:"number"===type?(x=[x,x,x,x],padConstant):padConstant,treemap},treemap.round=function(x){return arguments.length?(round=x?Math.round:Number,treemap):round!=Number},treemap.sticky=function(x){return arguments.length?(sticky=x,stickies=null,treemap):sticky},treemap.ratio=function(x){return arguments.length?(ratio=x,treemap):ratio},treemap.mode=function(x){return arguments.length?(mode=x+"",treemap):mode},d3_layout_hierarchyRebind(treemap,hierarchy)},d3.random={normal:function(µ,σ){var n=arguments.length;return n<2&&(σ=1),n<1&&(µ=0),function(){var x,y,r;do{r=(x=2*Math.random()-1)*x+(y=2*Math.random()-1)*y}while(!r||r>1);return µ+σ*x*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var random=d3.random.normal.apply(d3,arguments);return function(){return Math.exp(random())}},bates:function(m){var random=d3.random.irwinHall(m);return function(){return random()/m}},irwinHall:function(m){return function(){for(var s=0,j=0;j<m;j++)s+=Math.random();return s}}},d3.scale={};var d3_scale_niceIdentity={floor:d3_identity,ceil:d3_identity};function d3_scale_polylinear(domain,range,uninterpolate,interpolate){var u=[],i=[],j=0,k=Math.min(domain.length,range.length)-1;for(domain[k]<domain[0]&&(domain=domain.slice().reverse(),range=range.slice().reverse());++j<=k;)u.push(uninterpolate(domain[j-1],domain[j])),i.push(interpolate(range[j-1],range[j]));return function(x){var j=d3.bisect(domain,x,1,k)-1;return i[j](u[j](x))}}function d3_scale_linear(domain,range,interpolate,clamp){var output,input;function rescale(){var linear=Math.min(domain.length,range.length)>2?d3_scale_polylinear:d3_scale_bilinear,uninterpolate=clamp?d3_uninterpolateClamp:d3_uninterpolateNumber;return output=linear(domain,range,uninterpolate,interpolate),input=linear(range,domain,uninterpolate,d3_interpolate),scale}function scale(x){return output(x)}return scale.invert=function(y){return input(y)},scale.domain=function(x){return arguments.length?(domain=x.map(Number),rescale()):domain},scale.range=function(x){return arguments.length?(range=x,rescale()):range},scale.rangeRound=function(x){return scale.range(x).interpolate(d3_interpolateRound)},scale.clamp=function(x){return arguments.length?(clamp=x,rescale()):clamp},scale.interpolate=function(x){return arguments.length?(interpolate=x,rescale()):interpolate},scale.ticks=function(m){return d3_scale_linearTicks(domain,m)},scale.tickFormat=function(m,format){return d3_scale_linearTickFormat(domain,m,format)},scale.nice=function(m){return d3_scale_linearNice(domain,m),rescale()},scale.copy=function(){return d3_scale_linear(domain,range,interpolate,clamp)},rescale()}function d3_scale_linearRebind(scale,linear){return d3.rebind(scale,linear,"range","rangeRound","interpolate","clamp")}function d3_scale_linearNice(domain,m){return d3_scale_nice(domain,d3_scale_niceStep(d3_scale_linearTickRange(domain,m)[2])),d3_scale_nice(domain,d3_scale_niceStep(d3_scale_linearTickRange(domain,m)[2])),domain}function d3_scale_linearTickRange(domain,m){null==m&&(m=10);var extent=d3_scaleExtent(domain),span=extent[1]-extent[0],step=Math.pow(10,Math.floor(Math.log(span/m)/Math.LN10)),err=m/span*step;return err<=.15?step*=10:err<=.35?step*=5:err<=.75&&(step*=2),extent[0]=Math.ceil(extent[0]/step)*step,extent[1]=Math.floor(extent[1]/step)*step+.5*step,extent[2]=step,extent}function d3_scale_linearTicks(domain,m){return d3.range.apply(d3,d3_scale_linearTickRange(domain,m))}function d3_scale_linearTickFormat(domain,m,format){var range=d3_scale_linearTickRange(domain,m);if(format){var match=d3_format_re.exec(format);if(match.shift(),"s"===match[8]){var prefix=d3.formatPrefix(Math.max(abs(range[0]),abs(range[1])));return match[7]||(match[7]="."+d3_scale_linearPrecision(prefix.scale(range[2]))),match[8]="f",format=d3.format(match.join("")),function(d){return format(prefix.scale(d))+prefix.symbol}}match[7]||(match[7]="."+d3_scale_linearFormatPrecision(match[8],range)),format=match.join("")}else format=",."+d3_scale_linearPrecision(range[2])+"f";return d3.format(format)}d3.scale.linear=function(){return d3_scale_linear([0,1],[0,1],d3_interpolate,!1)};var d3_scale_linearFormatSignificant={s:1,g:1,p:1,r:1,e:1};function d3_scale_linearPrecision(value){return-Math.floor(Math.log(value)/Math.LN10+.01)}function d3_scale_linearFormatPrecision(type,range){var p=d3_scale_linearPrecision(range[2]);return type in d3_scale_linearFormatSignificant?Math.abs(p-d3_scale_linearPrecision(Math.max(abs(range[0]),abs(range[1]))))+ +("e"!==type):p-2*("%"===type)}function d3_scale_log(linear,base,positive,domain){function log(x){return(positive?Math.log(x<0?0:x):-Math.log(x>0?0:-x))/Math.log(base)}function pow(x){return positive?Math.pow(base,x):-Math.pow(base,-x)}function scale(x){return linear(log(x))}return scale.invert=function(x){return pow(linear.invert(x))},scale.domain=function(x){return arguments.length?(positive=x[0]>=0,linear.domain((domain=x.map(Number)).map(log)),scale):domain},scale.base=function(_){return arguments.length?(base=+_,linear.domain(domain.map(log)),scale):base},scale.nice=function(){var niced=d3_scale_nice(domain.map(log),positive?Math:d3_scale_logNiceNegative);return linear.domain(niced),domain=niced.map(pow),scale},scale.ticks=function(){var extent=d3_scaleExtent(domain),ticks=[],u=extent[0],v=extent[1],i=Math.floor(log(u)),j=Math.ceil(log(v)),n=base%1?2:base;if(isFinite(j-i)){if(positive){for(;i<j;i++)for(var k=1;k<n;k++)ticks.push(pow(i)*k);ticks.push(pow(i))}else for(ticks.push(pow(i));i++<j;)for(var k=n-1;k>0;k--)ticks.push(pow(i)*k);for(i=0;ticks[i]<u;i++);for(j=ticks.length;ticks[j-1]>v;j--);ticks=ticks.slice(i,j)}return ticks},scale.tickFormat=function(n,format){if(!arguments.length)return d3_scale_logFormat;arguments.length<2?format=d3_scale_logFormat:"function"!=typeof format&&(format=d3.format(format));var k=Math.max(1,base*n/scale.ticks().length);return function(d){var i=d/pow(Math.round(log(d)));return i*base<base-.5&&(i*=base),i<=k?format(d):""}},scale.copy=function(){return d3_scale_log(linear.copy(),base,positive,domain)},d3_scale_linearRebind(scale,linear)}d3.scale.log=function(){return d3_scale_log(d3.scale.linear().domain([0,1]),10,!0,[1,10])};var d3_scale_logFormat=d3.format(".0e"),d3_scale_logNiceNegative={floor:function(x){return-Math.ceil(-x)},ceil:function(x){return-Math.floor(-x)}};function d3_scale_pow(linear,exponent,domain){var powp=d3_scale_powPow(exponent),powb=d3_scale_powPow(1/exponent);function scale(x){return linear(powp(x))}return scale.invert=function(x){return powb(linear.invert(x))},scale.domain=function(x){return arguments.length?(linear.domain((domain=x.map(Number)).map(powp)),scale):domain},scale.ticks=function(m){return d3_scale_linearTicks(domain,m)},scale.tickFormat=function(m,format){return d3_scale_linearTickFormat(domain,m,format)},scale.nice=function(m){return scale.domain(d3_scale_linearNice(domain,m))},scale.exponent=function(x){return arguments.length?(powp=d3_scale_powPow(exponent=x),powb=d3_scale_powPow(1/exponent),linear.domain(domain.map(powp)),scale):exponent},scale.copy=function(){return d3_scale_pow(linear.copy(),exponent,domain)},d3_scale_linearRebind(scale,linear)}function d3_scale_powPow(e){return function(x){return x<0?-Math.pow(-x,e):Math.pow(x,e)}}function d3_scale_ordinal(domain,ranger){var index,range,rangeBand;function scale(x){return range[((index.get(x)||("range"===ranger.t?index.set(x,domain.push(x)):NaN))-1)%range.length]}function steps(start,step){return d3.range(domain.length).map((function(i){return start+step*i}))}return scale.domain=function(x){if(!arguments.length)return domain;domain=[],index=new d3_Map;for(var i=-1,n=x.length,xi;++i<n;)index.has(xi=x[i])||index.set(xi,domain.push(xi));return scale[ranger.t].apply(scale,ranger.a)},scale.range=function(x){return arguments.length?(range=x,rangeBand=0,ranger={t:"range",a:arguments},scale):range},scale.rangePoints=function(x,padding){arguments.length<2&&(padding=0);var start=x[0],stop=x[1],step=domain.length<2?(start=(start+stop)/2,0):(stop-start)/(domain.length-1+padding);return range=steps(start+step*padding/2,step),rangeBand=0,ranger={t:"rangePoints",a:arguments},scale},scale.rangeRoundPoints=function(x,padding){arguments.length<2&&(padding=0);var start=x[0],stop=x[1],step=domain.length<2?(start=stop=Math.round((start+stop)/2),0):(stop-start)/(domain.length-1+padding)|0;return range=steps(start+Math.round(step*padding/2+(stop-start-(domain.length-1+padding)*step)/2),step),rangeBand=0,ranger={t:"rangeRoundPoints",a:arguments},scale},scale.rangeBands=function(x,padding,outerPadding){arguments.length<2&&(padding=0),arguments.length<3&&(outerPadding=padding);var reverse=x[1]<x[0],start=x[reverse-0],stop=x[1-reverse],step=(stop-start)/(domain.length-padding+2*outerPadding);return range=steps(start+step*outerPadding,step),reverse&&range.reverse(),rangeBand=step*(1-padding),ranger={t:"rangeBands",a:arguments},scale},scale.rangeRoundBands=function(x,padding,outerPadding){arguments.length<2&&(padding=0),arguments.length<3&&(outerPadding=padding);var reverse=x[1]<x[0],start=x[reverse-0],stop=x[1-reverse],step=Math.floor((stop-start)/(domain.length-padding+2*outerPadding));return range=steps(start+Math.round((stop-start-(domain.length-padding)*step)/2),step),reverse&&range.reverse(),rangeBand=Math.round(step*(1-padding)),ranger={t:"rangeRoundBands",a:arguments},scale},scale.rangeBand=function(){return rangeBand},scale.rangeExtent=function(){return d3_scaleExtent(ranger.a[0])},scale.copy=function(){return d3_scale_ordinal(domain,ranger)},scale.domain(domain)}d3.scale.pow=function(){return d3_scale_pow(d3.scale.linear(),1,[0,1])},d3.scale.sqrt=function(){return d3.scale.pow().exponent(.5)},d3.scale.ordinal=function(){return d3_scale_ordinal([],{t:"range",a:[[]]})},d3.scale.category10=function(){return d3.scale.ordinal().range(d3_category10)},d3.scale.category20=function(){return d3.scale.ordinal().range(d3_category20)},d3.scale.category20b=function(){return d3.scale.ordinal().range(d3_category20b)},d3.scale.category20c=function(){return d3.scale.ordinal().range(d3_category20c)};var d3_category10=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(d3_rgbString),d3_category20=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(d3_rgbString),d3_category20b=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(d3_rgbString),d3_category20c=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(d3_rgbString);function d3_scale_quantile(domain,range){var thresholds;function rescale(){var k=0,q=range.length;for(thresholds=[];++k<q;)thresholds[k-1]=d3.quantile(domain,k/q);return scale}function scale(x){if(!isNaN(x=+x))return range[d3.bisect(thresholds,x)]}return scale.domain=function(x){return arguments.length?(domain=x.map(d3_number).filter(d3_numeric).sort(d3_ascending),rescale()):domain},scale.range=function(x){return arguments.length?(range=x,rescale()):range},scale.quantiles=function(){return thresholds},scale.invertExtent=function(y){return(y=range.indexOf(y))<0?[NaN,NaN]:[y>0?thresholds[y-1]:domain[0],y<thresholds.length?thresholds[y]:domain[domain.length-1]]},scale.copy=function(){return d3_scale_quantile(domain,range)},rescale()}function d3_scale_quantize(x0,x1,range){var kx,i;function scale(x){return range[Math.max(0,Math.min(i,Math.floor(kx*(x-x0))))]}function rescale(){return kx=range.length/(x1-x0),i=range.length-1,scale}return scale.domain=function(x){return arguments.length?(x0=+x[0],x1=+x[x.length-1],rescale()):[x0,x1]},scale.range=function(x){return arguments.length?(range=x,rescale()):range},scale.invertExtent=function(y){return[y=(y=range.indexOf(y))<0?NaN:y/kx+x0,y+1/kx]},scale.copy=function(){return d3_scale_quantize(x0,x1,range)},rescale()}function d3_scale_threshold(domain,range){function scale(x){if(x<=x)return range[d3.bisect(domain,x)]}return scale.domain=function(_){return arguments.length?(domain=_,scale):domain},scale.range=function(_){return arguments.length?(range=_,scale):range},scale.invertExtent=function(y){return y=range.indexOf(y),[domain[y-1],domain[y]]},scale.copy=function(){return d3_scale_threshold(domain,range)},scale}function d3_scale_identity(domain){function identity(x){return+x}return identity.invert=identity,identity.domain=identity.range=function(x){return arguments.length?(domain=x.map(identity),identity):domain},identity.ticks=function(m){return d3_scale_linearTicks(domain,m)},identity.tickFormat=function(m,format){return d3_scale_linearTickFormat(domain,m,format)},identity.copy=function(){return d3_scale_identity(domain)},identity}function d3_zero(){return 0}d3.scale.quantile=function(){return d3_scale_quantile([],[])},d3.scale.quantize=function(){return d3_scale_quantize(0,1,[0,1])},d3.scale.threshold=function(){return d3_scale_threshold([.5],[0,1])},d3.scale.identity=function(){return d3_scale_identity([0,1])},d3.svg={},d3.svg.arc=function(){var innerRadius=d3_svg_arcInnerRadius,outerRadius=d3_svg_arcOuterRadius,cornerRadius=d3_zero,padRadius=d3_svg_arcAuto,startAngle=d3_svg_arcStartAngle,endAngle=d3_svg_arcEndAngle,padAngle=d3_svg_arcPadAngle;function arc(){var r0=Math.max(0,+innerRadius.apply(this,arguments)),r1=Math.max(0,+outerRadius.apply(this,arguments)),a0=startAngle.apply(this,arguments)-halfπ,a1=endAngle.apply(this,arguments)-halfπ,da=Math.abs(a1-a0),cw=a0>a1?0:1;if(r1<r0&&(rc=r1,r1=r0,r0=rc),da>=τε)return circleSegment(r1,cw)+(r0?circleSegment(r0,1-cw):"")+"Z";var rc,cr,rp,ap,p0=0,p1=0,x0,y0,x1,y1,x2,y2,x3,y3,path=[];if((ap=(+padAngle.apply(this,arguments)||0)/2)&&(rp=padRadius===d3_svg_arcAuto?Math.sqrt(r0*r0+r1*r1):+padRadius.apply(this,arguments),cw||(p1*=-1),r1&&(p1=d3_asin(rp/r1*Math.sin(ap))),r0&&(p0=d3_asin(rp/r0*Math.sin(ap)))),r1){x0=r1*Math.cos(a0+p1),y0=r1*Math.sin(a0+p1),x1=r1*Math.cos(a1-p1),y1=r1*Math.sin(a1-p1);var l1=Math.abs(a1-a0-2*p1)<=π?0:1;if(p1&&d3_svg_arcSweep(x0,y0,x1,y1)===cw^l1){var h1=(a0+a1)/2;x0=r1*Math.cos(h1),y0=r1*Math.sin(h1),x1=y1=null}}else x0=y0=0;if(r0){x2=r0*Math.cos(a1-p0),y2=r0*Math.sin(a1-p0),x3=r0*Math.cos(a0+p0),y3=r0*Math.sin(a0+p0);var l0=Math.abs(a0-a1+2*p0)<=π?0:1;if(p0&&d3_svg_arcSweep(x2,y2,x3,y3)===1-cw^l0){var h0=(a0+a1)/2;x2=r0*Math.cos(h0),y2=r0*Math.sin(h0),x3=y3=null}}else x2=y2=0;if(da>ε&&(rc=Math.min(Math.abs(r1-r0)/2,+cornerRadius.apply(this,arguments)))>.001){cr=r0<r1^cw?0:1;var rc1=rc,rc0=rc;if(da<π){var oc=null==x3?[x2,y2]:null==x1?[x0,y0]:d3_geom_polygonIntersect([x0,y0],[x3,y3],[x1,y1],[x2,y2]),ax=x0-oc[0],ay=y0-oc[1],bx=x1-oc[0],by=y1-oc[1],kc=1/Math.sin(Math.acos((ax*bx+ay*by)/(Math.sqrt(ax*ax+ay*ay)*Math.sqrt(bx*bx+by*by)))/2),lc=Math.sqrt(oc[0]*oc[0]+oc[1]*oc[1]);rc0=Math.min(rc,(r0-lc)/(kc-1)),rc1=Math.min(rc,(r1-lc)/(kc+1))}if(null!=x1){var t30=d3_svg_arcCornerTangents(null==x3?[x2,y2]:[x3,y3],[x0,y0],r1,rc1,cw),t12=d3_svg_arcCornerTangents([x1,y1],[x2,y2],r1,rc1,cw);rc===rc1?path.push("M",t30[0],"A",rc1,",",rc1," 0 0,",cr," ",t30[1],"A",r1,",",r1," 0 ",1-cw^d3_svg_arcSweep(t30[1][0],t30[1][1],t12[1][0],t12[1][1]),",",cw," ",t12[1],"A",rc1,",",rc1," 0 0,",cr," ",t12[0]):path.push("M",t30[0],"A",rc1,",",rc1," 0 1,",cr," ",t12[0])}else path.push("M",x0,",",y0);if(null!=x3){var t03=d3_svg_arcCornerTangents([x0,y0],[x3,y3],r0,-rc0,cw),t21=d3_svg_arcCornerTangents([x2,y2],null==x1?[x0,y0]:[x1,y1],r0,-rc0,cw);rc===rc0?path.push("L",t21[0],"A",rc0,",",rc0," 0 0,",cr," ",t21[1],"A",r0,",",r0," 0 ",cw^d3_svg_arcSweep(t21[1][0],t21[1][1],t03[1][0],t03[1][1]),",",1-cw," ",t03[1],"A",rc0,",",rc0," 0 0,",cr," ",t03[0]):path.push("L",t21[0],"A",rc0,",",rc0," 0 0,",cr," ",t03[0])}else path.push("L",x2,",",y2)}else path.push("M",x0,",",y0),null!=x1&&path.push("A",r1,",",r1," 0 ",l1,",",cw," ",x1,",",y1),path.push("L",x2,",",y2),null!=x3&&path.push("A",r0,",",r0," 0 ",l0,",",1-cw," ",x3,",",y3);return path.push("Z"),path.join("")}function circleSegment(r1,cw){return"M0,"+r1+"A"+r1+","+r1+" 0 1,"+cw+" 0,"+-r1+"A"+r1+","+r1+" 0 1,"+cw+" 0,"+r1}return arc.innerRadius=function(v){return arguments.length?(innerRadius=d3_functor(v),arc):innerRadius},arc.outerRadius=function(v){return arguments.length?(outerRadius=d3_functor(v),arc):outerRadius},arc.cornerRadius=function(v){return arguments.length?(cornerRadius=d3_functor(v),arc):cornerRadius},arc.padRadius=function(v){return arguments.length?(padRadius=v==d3_svg_arcAuto?d3_svg_arcAuto:d3_functor(v),arc):padRadius},arc.startAngle=function(v){return arguments.length?(startAngle=d3_functor(v),arc):startAngle},arc.endAngle=function(v){return arguments.length?(endAngle=d3_functor(v),arc):endAngle},arc.padAngle=function(v){return arguments.length?(padAngle=d3_functor(v),arc):padAngle},arc.centroid=function(){var r=(+innerRadius.apply(this,arguments)+ +outerRadius.apply(this,arguments))/2,a=(+startAngle.apply(this,arguments)+ +endAngle.apply(this,arguments))/2-halfπ;return[Math.cos(a)*r,Math.sin(a)*r]},arc};var d3_svg_arcAuto="auto";function d3_svg_arcInnerRadius(d){return d.innerRadius}function d3_svg_arcOuterRadius(d){return d.outerRadius}function d3_svg_arcStartAngle(d){return d.startAngle}function d3_svg_arcEndAngle(d){return d.endAngle}function d3_svg_arcPadAngle(d){return d&&d.padAngle}function d3_svg_arcSweep(x0,y0,x1,y1){return(x0-x1)*y0-(y0-y1)*x0>0?0:1}function d3_svg_arcCornerTangents(p0,p1,r1,rc,cw){var x01=p0[0]-p1[0],y01=p0[1]-p1[1],lo=(cw?rc:-rc)/Math.sqrt(x01*x01+y01*y01),ox=lo*y01,oy=-lo*x01,x1=p0[0]+ox,y1=p0[1]+oy,x2=p1[0]+ox,y2=p1[1]+oy,x3=(x1+x2)/2,y3=(y1+y2)/2,dx=x2-x1,dy=y2-y1,d2=dx*dx+dy*dy,r=r1-rc,D=x1*y2-x2*y1,d=(dy<0?-1:1)*Math.sqrt(Math.max(0,r*r*d2-D*D)),cx0=(D*dy-dx*d)/d2,cy0=(-D*dx-dy*d)/d2,cx1=(D*dy+dx*d)/d2,cy1=(-D*dx+dy*d)/d2,dx0=cx0-x3,dy0=cy0-y3,dx1=cx1-x3,dy1=cy1-y3;return dx0*dx0+dy0*dy0>dx1*dx1+dy1*dy1&&(cx0=cx1,cy0=cy1),[[cx0-ox,cy0-oy],[cx0*r1/r,cy0*r1/r]]}function d3_svg_line(projection){var x=d3_geom_pointX,y=d3_geom_pointY,defined=d3_true,interpolate=d3_svg_lineLinear,interpolateKey=interpolate.key,tension=.7;function line(data){var segments=[],points=[],i=-1,n=data.length,d,fx=d3_functor(x),fy=d3_functor(y);function segment(){segments.push("M",interpolate(projection(points),tension))}for(;++i<n;)defined.call(this,d=data[i],i)?points.push([+fx.call(this,d,i),+fy.call(this,d,i)]):points.length&&(segment(),points=[]);return points.length&&segment(),segments.length?segments.join(""):null}return line.x=function(_){return arguments.length?(x=_,line):x},line.y=function(_){return arguments.length?(y=_,line):y},line.defined=function(_){return arguments.length?(defined=_,line):defined},line.interpolate=function(_){return arguments.length?(interpolateKey="function"==typeof _?interpolate=_:(interpolate=d3_svg_lineInterpolators.get(_)||d3_svg_lineLinear).key,line):interpolateKey},line.tension=function(_){return arguments.length?(tension=_,line):tension},line}d3.svg.line=function(){return d3_svg_line(d3_identity)};var d3_svg_lineInterpolators=d3.map({linear:d3_svg_lineLinear,"linear-closed":d3_svg_lineLinearClosed,step:d3_svg_lineStep,"step-before":d3_svg_lineStepBefore,"step-after":d3_svg_lineStepAfter,basis:d3_svg_lineBasis,"basis-open":d3_svg_lineBasisOpen,"basis-closed":d3_svg_lineBasisClosed,bundle:d3_svg_lineBundle,cardinal:d3_svg_lineCardinal,"cardinal-open":d3_svg_lineCardinalOpen,"cardinal-closed":d3_svg_lineCardinalClosed,monotone:d3_svg_lineMonotone});function d3_svg_lineLinear(points){return points.length>1?points.join("L"):points+"Z"}function d3_svg_lineLinearClosed(points){return points.join("L")+"Z"}function d3_svg_lineStep(points){for(var i=0,n=points.length,p=points[0],path=[p[0],",",p[1]];++i<n;)path.push("H",(p[0]+(p=points[i])[0])/2,"V",p[1]);return n>1&&path.push("H",p[0]),path.join("")}function d3_svg_lineStepBefore(points){for(var i=0,n=points.length,p=points[0],path=[p[0],",",p[1]];++i<n;)path.push("V",(p=points[i])[1],"H",p[0]);return path.join("")}function d3_svg_lineStepAfter(points){for(var i=0,n=points.length,p=points[0],path=[p[0],",",p[1]];++i<n;)path.push("H",(p=points[i])[0],"V",p[1]);return path.join("")}function d3_svg_lineCardinalOpen(points,tension){return points.length<4?d3_svg_lineLinear(points):points[1]+d3_svg_lineHermite(points.slice(1,-1),d3_svg_lineCardinalTangents(points,tension))}function d3_svg_lineCardinalClosed(points,tension){return points.length<3?d3_svg_lineLinearClosed(points):points[0]+d3_svg_lineHermite((points.push(points[0]),points),d3_svg_lineCardinalTangents([points[points.length-2]].concat(points,[points[1]]),tension))}function d3_svg_lineCardinal(points,tension){return points.length<3?d3_svg_lineLinear(points):points[0]+d3_svg_lineHermite(points,d3_svg_lineCardinalTangents(points,tension))}function d3_svg_lineHermite(points,tangents){if(tangents.length<1||points.length!=tangents.length&&points.length!=tangents.length+2)return d3_svg_lineLinear(points);var quad=points.length!=tangents.length,path="",p0=points[0],p=points[1],t0=tangents[0],t=t0,pi=1;if(quad&&(path+="Q"+(p[0]-2*t0[0]/3)+","+(p[1]-2*t0[1]/3)+","+p[0]+","+p[1],p0=points[1],pi=2),tangents.length>1){t=tangents[1],p=points[pi],pi++,path+="C"+(p0[0]+t0[0])+","+(p0[1]+t0[1])+","+(p[0]-t[0])+","+(p[1]-t[1])+","+p[0]+","+p[1];for(var i=2;i<tangents.length;i++,pi++)p=points[pi],t=tangents[i],path+="S"+(p[0]-t[0])+","+(p[1]-t[1])+","+p[0]+","+p[1]}if(quad){var lp=points[pi];path+="Q"+(p[0]+2*t[0]/3)+","+(p[1]+2*t[1]/3)+","+lp[0]+","+lp[1]}return path}function d3_svg_lineCardinalTangents(points,tension){for(var tangents=[],a=(1-tension)/2,p0,p1=points[0],p2=points[1],i=1,n=points.length;++i<n;)p0=p1,p1=p2,p2=points[i],tangents.push([a*(p2[0]-p0[0]),a*(p2[1]-p0[1])]);return tangents}function d3_svg_lineBasis(points){if(points.length<3)return d3_svg_lineLinear(points);var i=1,n=points.length,pi=points[0],x0=pi[0],y0=pi[1],px=[x0,x0,x0,(pi=points[1])[0]],py=[y0,y0,y0,pi[1]],path=[x0,",",y0,"L",d3_svg_lineDot4(d3_svg_lineBasisBezier3,px),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,py)];for(points.push(points[n-1]);++i<=n;)pi=points[i],px.shift(),px.push(pi[0]),py.shift(),py.push(pi[1]),d3_svg_lineBasisBezier(path,px,py);return points.pop(),path.push("L",pi),path.join("")}function d3_svg_lineBasisOpen(points){if(points.length<4)return d3_svg_lineLinear(points);for(var path=[],i=-1,n=points.length,pi,px=[0],py=[0];++i<3;)pi=points[i],px.push(pi[0]),py.push(pi[1]);for(path.push(d3_svg_lineDot4(d3_svg_lineBasisBezier3,px)+","+d3_svg_lineDot4(d3_svg_lineBasisBezier3,py)),--i;++i<n;)pi=points[i],px.shift(),px.push(pi[0]),py.shift(),py.push(pi[1]),d3_svg_lineBasisBezier(path,px,py);return path.join("")}function d3_svg_lineBasisClosed(points){for(var path,i=-1,n=points.length,m=n+4,pi,px=[],py=[];++i<4;)pi=points[i%n],px.push(pi[0]),py.push(pi[1]);for(path=[d3_svg_lineDot4(d3_svg_lineBasisBezier3,px),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,py)],--i;++i<m;)pi=points[i%n],px.shift(),px.push(pi[0]),py.shift(),py.push(pi[1]),d3_svg_lineBasisBezier(path,px,py);return path.join("")}function d3_svg_lineBundle(points,tension){var n=points.length-1;if(n)for(var x0=points[0][0],y0=points[0][1],dx=points[n][0]-x0,dy=points[n][1]-y0,i=-1,p,t;++i<=n;)t=i/n,(p=points[i])[0]=tension*p[0]+(1-tension)*(x0+t*dx),p[1]=tension*p[1]+(1-tension)*(y0+t*dy);return d3_svg_lineBasis(points)}function d3_svg_lineDot4(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}d3_svg_lineInterpolators.forEach((function(key,value){value.key=key,value.closed=/-closed$/.test(key)}));var d3_svg_lineBasisBezier1=[0,2/3,1/3,0],d3_svg_lineBasisBezier2=[0,1/3,2/3,0],d3_svg_lineBasisBezier3=[0,1/6,2/3,1/6];function d3_svg_lineBasisBezier(path,x,y){path.push("C",d3_svg_lineDot4(d3_svg_lineBasisBezier1,x),",",d3_svg_lineDot4(d3_svg_lineBasisBezier1,y),",",d3_svg_lineDot4(d3_svg_lineBasisBezier2,x),",",d3_svg_lineDot4(d3_svg_lineBasisBezier2,y),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,x),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,y))}function d3_svg_lineSlope(p0,p1){return(p1[1]-p0[1])/(p1[0]-p0[0])}function d3_svg_lineFiniteDifferences(points){for(var i=0,j=points.length-1,m=[],p0=points[0],p1=points[1],d=m[0]=d3_svg_lineSlope(p0,p1);++i<j;)m[i]=(d+(d=d3_svg_lineSlope(p0=p1,p1=points[i+1])))/2;return m[i]=d,m}function d3_svg_lineMonotoneTangents(points){for(var tangents=[],d,a,b,s,m=d3_svg_lineFiniteDifferences(points),i=-1,j=points.length-1;++i<j;)d=d3_svg_lineSlope(points[i],points[i+1]),abs(d)<ε?m[i]=m[i+1]=0:(s=(a=m[i]/d)*a+(b=m[i+1]/d)*b)>9&&(s=3*d/Math.sqrt(s),m[i]=s*a,m[i+1]=s*b);for(i=-1;++i<=j;)s=(points[Math.min(j,i+1)][0]-points[Math.max(0,i-1)][0])/(6*(1+m[i]*m[i])),tangents.push([s||0,m[i]*s||0]);return tangents}function d3_svg_lineMonotone(points){return points.length<3?d3_svg_lineLinear(points):points[0]+d3_svg_lineHermite(points,d3_svg_lineMonotoneTangents(points))}function d3_svg_lineRadial(points){for(var point,i=-1,n=points.length,r,a;++i<n;)r=(point=points[i])[0],a=point[1]-halfπ,point[0]=r*Math.cos(a),point[1]=r*Math.sin(a);return points}function d3_svg_area(projection){var x0=d3_geom_pointX,x1=d3_geom_pointX,y0=0,y1=d3_geom_pointY,defined=d3_true,interpolate=d3_svg_lineLinear,interpolateKey=interpolate.key,interpolateReverse=interpolate,L="L",tension=.7;function area(data){var segments=[],points0=[],points1=[],i=-1,n=data.length,d,fx0=d3_functor(x0),fy0=d3_functor(y0),fx1=x0===x1?function(){return x}:d3_functor(x1),fy1=y0===y1?function(){return y}:d3_functor(y1),x,y;function segment(){segments.push("M",interpolate(projection(points1),tension),L,interpolateReverse(projection(points0.reverse()),tension),"Z")}for(;++i<n;)defined.call(this,d=data[i],i)?(points0.push([x=+fx0.call(this,d,i),y=+fy0.call(this,d,i)]),points1.push([+fx1.call(this,d,i),+fy1.call(this,d,i)])):points0.length&&(segment(),points0=[],points1=[]);return points0.length&&segment(),segments.length?segments.join(""):null}return area.x=function(_){return arguments.length?(x0=x1=_,area):x1},area.x0=function(_){return arguments.length?(x0=_,area):x0},area.x1=function(_){return arguments.length?(x1=_,area):x1},area.y=function(_){return arguments.length?(y0=y1=_,area):y1},area.y0=function(_){return arguments.length?(y0=_,area):y0},area.y1=function(_){return arguments.length?(y1=_,area):y1},area.defined=function(_){return arguments.length?(defined=_,area):defined},area.interpolate=function(_){return arguments.length?(interpolateKey="function"==typeof _?interpolate=_:(interpolate=d3_svg_lineInterpolators.get(_)||d3_svg_lineLinear).key,interpolateReverse=interpolate.reverse||interpolate,L=interpolate.closed?"M":"L",area):interpolateKey},area.tension=function(_){return arguments.length?(tension=_,area):tension},area}function d3_svg_chordRadius(d){return d.radius}function d3_svg_diagonalProjection(d){return[d.x,d.y]}function d3_svg_diagonalRadialProjection(projection){return function(){var d=projection.apply(this,arguments),r=d[0],a=d[1]-halfπ;return[r*Math.cos(a),r*Math.sin(a)]}}function d3_svg_symbolSize(){return 64}function d3_svg_symbolType(){return"circle"}function d3_svg_symbolCircle(size){var r=Math.sqrt(size/π);return"M0,"+r+"A"+r+","+r+" 0 1,1 0,"+-r+"A"+r+","+r+" 0 1,1 0,"+r+"Z"}d3.svg.line.radial=function(){var line=d3_svg_line(d3_svg_lineRadial);return line.radius=line.x,delete line.x,line.angle=line.y,delete line.y,line},d3_svg_lineStepBefore.reverse=d3_svg_lineStepAfter,d3_svg_lineStepAfter.reverse=d3_svg_lineStepBefore,d3.svg.area=function(){return d3_svg_area(d3_identity)},d3.svg.area.radial=function(){var area=d3_svg_area(d3_svg_lineRadial);return area.radius=area.x,delete area.x,area.innerRadius=area.x0,delete area.x0,area.outerRadius=area.x1,delete area.x1,area.angle=area.y,delete area.y,area.startAngle=area.y0,delete area.y0,area.endAngle=area.y1,delete area.y1,area},d3.svg.chord=function(){var source=d3_source,target=d3_target,radius=d3_svg_chordRadius,startAngle=d3_svg_arcStartAngle,endAngle=d3_svg_arcEndAngle;function chord(d,i){var s=subgroup(this,source,d,i),t=subgroup(this,target,d,i);return"M"+s.p0+arc(s.r,s.p1,s.a1-s.a0)+(equals(s,t)?curve(s.r,s.p1,s.r,s.p0):curve(s.r,s.p1,t.r,t.p0)+arc(t.r,t.p1,t.a1-t.a0)+curve(t.r,t.p1,s.r,s.p0))+"Z"}function subgroup(self,f,d,i){var subgroup=f.call(self,d,i),r=radius.call(self,subgroup,i),a0=startAngle.call(self,subgroup,i)-halfπ,a1=endAngle.call(self,subgroup,i)-halfπ;return{r:r,a0:a0,a1:a1,p0:[r*Math.cos(a0),r*Math.sin(a0)],p1:[r*Math.cos(a1),r*Math.sin(a1)]}}function equals(a,b){return a.a0==b.a0&&a.a1==b.a1}function arc(r,p,a){return"A"+r+","+r+" 0 "+ +(a>π)+",1 "+p}function curve(r0,p0,r1,p1){return"Q 0,0 "+p1}return chord.radius=function(v){return arguments.length?(radius=d3_functor(v),chord):radius},chord.source=function(v){return arguments.length?(source=d3_functor(v),chord):source},chord.target=function(v){return arguments.length?(target=d3_functor(v),chord):target},chord.startAngle=function(v){return arguments.length?(startAngle=d3_functor(v),chord):startAngle},chord.endAngle=function(v){return arguments.length?(endAngle=d3_functor(v),chord):endAngle},chord},d3.svg.diagonal=function(){var source=d3_source,target=d3_target,projection=d3_svg_diagonalProjection;function diagonal(d,i){var p0=source.call(this,d,i),p3=target.call(this,d,i),m=(p0.y+p3.y)/2,p=[p0,{x:p0.x,y:m},{x:p3.x,y:m},p3];return"M"+(p=p.map(projection))[0]+"C"+p[1]+" "+p[2]+" "+p[3]}return diagonal.source=function(x){return arguments.length?(source=d3_functor(x),diagonal):source},diagonal.target=function(x){return arguments.length?(target=d3_functor(x),diagonal):target},diagonal.projection=function(x){return arguments.length?(projection=x,diagonal):projection},diagonal},d3.svg.diagonal.radial=function(){var diagonal=d3.svg.diagonal(),projection=d3_svg_diagonalProjection,projection_=diagonal.projection;return diagonal.projection=function(x){return arguments.length?projection_(d3_svg_diagonalRadialProjection(projection=x)):projection},diagonal},d3.svg.symbol=function(){var type=d3_svg_symbolType,size=d3_svg_symbolSize;function symbol(d,i){return(d3_svg_symbols.get(type.call(this,d,i))||d3_svg_symbolCircle)(size.call(this,d,i))}return symbol.type=function(x){return arguments.length?(type=d3_functor(x),symbol):type},symbol.size=function(x){return arguments.length?(size=d3_functor(x),symbol):size},symbol};var d3_svg_symbols=d3.map({circle:d3_svg_symbolCircle,cross:function(size){var r=Math.sqrt(size/5)/2;return"M"+-3*r+","+-r+"H"+-r+"V"+-3*r+"H"+r+"V"+-r+"H"+3*r+"V"+r+"H"+r+"V"+3*r+"H"+-r+"V"+r+"H"+-3*r+"Z"},diamond:function(size){var ry=Math.sqrt(size/(2*d3_svg_symbolTan30)),rx=ry*d3_svg_symbolTan30;return"M0,"+-ry+"L"+rx+",0 0,"+ry+" "+-rx+",0Z"},square:function(size){var r=Math.sqrt(size)/2;return"M"+-r+","+-r+"L"+r+","+-r+" "+r+","+r+" "+-r+","+r+"Z"},"triangle-down":function(size){var rx=Math.sqrt(size/d3_svg_symbolSqrt3),ry=rx*d3_svg_symbolSqrt3/2;return"M0,"+ry+"L"+rx+","+-ry+" "+-rx+","+-ry+"Z"},"triangle-up":function(size){var rx=Math.sqrt(size/d3_svg_symbolSqrt3),ry=rx*d3_svg_symbolSqrt3/2;return"M0,"+-ry+"L"+rx+","+ry+" "+-rx+","+ry+"Z"}});d3.svg.symbolTypes=d3_svg_symbols.keys();var d3_svg_symbolSqrt3=Math.sqrt(3),d3_svg_symbolTan30=Math.tan(30*d3_radians);d3_selectionPrototype.transition=function(name){for(var id=d3_transitionInheritId||++d3_transitionId,ns=d3_transitionNamespace(name),subgroups=[],subgroup,node,transition=d3_transitionInherit||{time:Date.now(),ease:d3_ease_cubicInOut,delay:0,duration:250},j=-1,m=this.length;++j<m;){subgroups.push(subgroup=[]);for(var group=this[j],i=-1,n=group.length;++i<n;)(node=group[i])&&d3_transitionNode(node,i,ns,id,transition),subgroup.push(node)}return d3_transition(subgroups,ns,id)},d3_selectionPrototype.interrupt=function(name){return this.each(null==name?d3_selection_interrupt:d3_selection_interruptNS(d3_transitionNamespace(name)))};var d3_selection_interrupt=d3_selection_interruptNS(d3_transitionNamespace());function d3_selection_interruptNS(ns){return function(){var lock,activeId,active;(lock=this[ns])&&(active=lock[activeId=lock.active])&&(active.timer.c=null,active.timer.t=NaN,--lock.count?delete lock[activeId]:delete this[ns],lock.active+=.5,active.event&&active.event.interrupt.call(this,this.__data__,active.index))}}function d3_transition(groups,ns,id){return d3_subclass(groups,d3_transitionPrototype),groups.namespace=ns,groups.id=id,groups}var d3_transitionPrototype=[],d3_transitionId=0,d3_transitionInheritId,d3_transitionInherit;function d3_transition_tween(groups,name,value,tween){var id=groups.id,ns=groups.namespace;return d3_selection_each(groups,"function"==typeof value?function(node,i,j){node[ns][id].tween.set(name,tween(value.call(node,node.__data__,i,j)))}:(value=tween(value),function(node){node[ns][id].tween.set(name,value)}))}function d3_transition_text(b){return null==b&&(b=""),function(){this.textContent=b}}function d3_transitionNamespace(name){return null==name?"__transition__":"__transition_"+name+"__"}function d3_transitionNode(node,i,ns,id,inherit){var lock=node[ns]||(node[ns]={active:0,count:0}),transition=lock[id],time,timer,duration,ease,tweens;function schedule(elapsed){var delay=transition.delay;if(timer.t=delay+time,delay<=elapsed)return start(elapsed-delay);timer.c=start}function start(elapsed){var activeId=lock.active,active=lock[activeId];for(var cancelId in active&&(active.timer.c=null,active.timer.t=NaN,--lock.count,delete lock[activeId],active.event&&active.event.interrupt.call(node,node.__data__,active.index)),lock)if(+cancelId<id){var cancel=lock[cancelId];cancel.timer.c=null,cancel.timer.t=NaN,--lock.count,delete lock[cancelId]}timer.c=tick,d3_timer((function(){return timer.c&&tick(elapsed||1)&&(timer.c=null,timer.t=NaN),1}),0,time),lock.active=id,transition.event&&transition.event.start.call(node,node.__data__,i),tweens=[],transition.tween.forEach((function(key,value){(value=value.call(node,node.__data__,i))&&tweens.push(value)})),ease=transition.ease,duration=transition.duration}function tick(elapsed){for(var t=elapsed/duration,e=ease(t),n=tweens.length;n>0;)tweens[--n].call(node,e);if(t>=1)return transition.event&&transition.event.end.call(node,node.__data__,i),--lock.count?delete lock[id]:delete node[ns],1}transition||(time=inherit.time,timer=d3_timer(schedule,0,time),transition=lock[id]={tween:new d3_Map,time:time,timer:timer,delay:inherit.delay,duration:inherit.duration,ease:inherit.ease,index:i},inherit=null,++lock.count)}d3_transitionPrototype.call=d3_selectionPrototype.call,d3_transitionPrototype.empty=d3_selectionPrototype.empty,d3_transitionPrototype.node=d3_selectionPrototype.node,d3_transitionPrototype.size=d3_selectionPrototype.size,d3.transition=function(selection,name){return selection&&selection.transition?d3_transitionInheritId?selection.transition(name):selection:d3.selection().transition(selection)},d3.transition.prototype=d3_transitionPrototype,d3_transitionPrototype.select=function(selector){var id=this.id,ns=this.namespace,subgroups=[],subgroup,subnode,node;selector=d3_selection_selector(selector);for(var j=-1,m=this.length;++j<m;){subgroups.push(subgroup=[]);for(var group=this[j],i=-1,n=group.length;++i<n;)(node=group[i])&&(subnode=selector.call(node,node.__data__,i,j))?("__data__"in node&&(subnode.__data__=node.__data__),d3_transitionNode(subnode,i,ns,id,node[ns][id]),subgroup.push(subnode)):subgroup.push(null)}return d3_transition(subgroups,ns,id)},d3_transitionPrototype.selectAll=function(selector){var id=this.id,ns=this.namespace,subgroups=[],subgroup,subnodes,node,subnode,transition;selector=d3_selection_selectorAll(selector);for(var j=-1,m=this.length;++j<m;)for(var group=this[j],i=-1,n=group.length;++i<n;)if(node=group[i]){transition=node[ns][id],subnodes=selector.call(node,node.__data__,i,j),subgroups.push(subgroup=[]);for(var k=-1,o=subnodes.length;++k<o;)(subnode=subnodes[k])&&d3_transitionNode(subnode,k,ns,id,transition),subgroup.push(subnode)}return d3_transition(subgroups,ns,id)},d3_transitionPrototype.filter=function(filter){var subgroups=[],subgroup,group,node;"function"!=typeof filter&&(filter=d3_selection_filter(filter));for(var j=0,m=this.length;j<m;j++){subgroups.push(subgroup=[]);for(var group,i=0,n=(group=this[j]).length;i<n;i++)(node=group[i])&&filter.call(node,node.__data__,i,j)&&subgroup.push(node)}return d3_transition(subgroups,this.namespace,this.id)},d3_transitionPrototype.tween=function(name,tween){var id=this.id,ns=this.namespace;return arguments.length<2?this.node()[ns][id].tween.get(name):d3_selection_each(this,null==tween?function(node){node[ns][id].tween.remove(name)}:function(node){node[ns][id].tween.set(name,tween)})},d3_transitionPrototype.attr=function(nameNS,value){if(arguments.length<2){for(value in nameNS)this.attr(value,nameNS[value]);return this}var interpolate="transform"==nameNS?d3_interpolateTransform:d3_interpolate,name=d3.ns.qualify(nameNS);function attrNull(){this.removeAttribute(name)}function attrNullNS(){this.removeAttributeNS(name.space,name.local)}function attrTween(b){return null==b?attrNull:(b+="",function(){var a=this.getAttribute(name),i;return a!==b&&(i=interpolate(a,b),function(t){this.setAttribute(name,i(t))})})}function attrTweenNS(b){return null==b?attrNullNS:(b+="",function(){var a=this.getAttributeNS(name.space,name.local),i;return a!==b&&(i=interpolate(a,b),function(t){this.setAttributeNS(name.space,name.local,i(t))})})}return d3_transition_tween(this,"attr."+nameNS,value,name.local?attrTweenNS:attrTween)},d3_transitionPrototype.attrTween=function(nameNS,tween){var name=d3.ns.qualify(nameNS);function attrTween(d,i){var f=tween.call(this,d,i,this.getAttribute(name));return f&&function(t){this.setAttribute(name,f(t))}}function attrTweenNS(d,i){var f=tween.call(this,d,i,this.getAttributeNS(name.space,name.local));return f&&function(t){this.setAttributeNS(name.space,name.local,f(t))}}return this.tween("attr."+nameNS,name.local?attrTweenNS:attrTween)},d3_transitionPrototype.style=function(name,value,priority){var n=arguments.length;if(n<3){if("string"!=typeof name){for(priority in n<2&&(value=""),name)this.style(priority,name[priority],value);return this}priority=""}function styleNull(){this.style.removeProperty(name)}function styleString(b){return null==b?styleNull:(b+="",function(){var a=d3_window(this).getComputedStyle(this,null).getPropertyValue(name),i;return a!==b&&(i=d3_interpolate(a,b),function(t){this.style.setProperty(name,i(t),priority)})})}return d3_transition_tween(this,"style."+name,value,styleString)},d3_transitionPrototype.styleTween=function(name,tween,priority){function styleTween(d,i){var f=tween.call(this,d,i,d3_window(this).getComputedStyle(this,null).getPropertyValue(name));return f&&function(t){this.style.setProperty(name,f(t),priority)}}return arguments.length<3&&(priority=""),this.tween("style."+name,styleTween)},d3_transitionPrototype.text=function(value){return d3_transition_tween(this,"text",value,d3_transition_text)},d3_transitionPrototype.remove=function(){var ns=this.namespace;return this.each("end.transition",(function(){var p;this[ns].count<2&&(p=this.parentNode)&&p.removeChild(this)}))},d3_transitionPrototype.ease=function(value){var id=this.id,ns=this.namespace;return arguments.length<1?this.node()[ns][id].ease:("function"!=typeof value&&(value=d3.ease.apply(d3,arguments)),d3_selection_each(this,(function(node){node[ns][id].ease=value})))},d3_transitionPrototype.delay=function(value){var id=this.id,ns=this.namespace;return arguments.length<1?this.node()[ns][id].delay:d3_selection_each(this,"function"==typeof value?function(node,i,j){node[ns][id].delay=+value.call(node,node.__data__,i,j)}:(value=+value,function(node){node[ns][id].delay=value}))},d3_transitionPrototype.duration=function(value){var id=this.id,ns=this.namespace;return arguments.length<1?this.node()[ns][id].duration:d3_selection_each(this,"function"==typeof value?function(node,i,j){node[ns][id].duration=Math.max(1,value.call(node,node.__data__,i,j))}:(value=Math.max(1,value),function(node){node[ns][id].duration=value}))},d3_transitionPrototype.each=function(type,listener){var id=this.id,ns=this.namespace;if(arguments.length<2){var inherit=d3_transitionInherit,inheritId=d3_transitionInheritId;try{d3_transitionInheritId=id,d3_selection_each(this,(function(node,i,j){d3_transitionInherit=node[ns][id],type.call(node,node.__data__,i,j)}))}finally{d3_transitionInherit=inherit,d3_transitionInheritId=inheritId}}else d3_selection_each(this,(function(node){var transition=node[ns][id];(transition.event||(transition.event=d3.dispatch("start","end","interrupt"))).on(type,listener)}));return this},d3_transitionPrototype.transition=function(){for(var id0=this.id,id1=++d3_transitionId,ns=this.namespace,subgroups=[],subgroup,group,node,transition,j=0,m=this.length;j<m;j++){subgroups.push(subgroup=[]);for(var group,i=0,n=(group=this[j]).length;i<n;i++)(node=group[i])&&d3_transitionNode(node,i,ns,id1,{time:(transition=node[ns][id0]).time,ease:transition.ease,delay:transition.delay+transition.duration,duration:transition.duration}),subgroup.push(node)}return d3_transition(subgroups,ns,id1)},d3.svg.axis=function(){var scale=d3.scale.linear(),orient=d3_svg_axisDefaultOrient,innerTickSize=6,outerTickSize=6,tickPadding=3,tickArguments_=[10],tickValues=null,tickFormat_;function axis(g){g.each((function(){var g=d3.select(this),scale0=this.__chart__||scale,scale1=this.__chart__=scale.copy(),ticks=null==tickValues?scale1.ticks?scale1.ticks.apply(scale1,tickArguments_):scale1.domain():tickValues,tickFormat=null==tickFormat_?scale1.tickFormat?scale1.tickFormat.apply(scale1,tickArguments_):d3_identity:tickFormat_,tick=g.selectAll(".tick").data(ticks,scale1),tickEnter=tick.enter().insert("g",".domain").attr("class","tick").style("opacity",ε),tickExit=d3.transition(tick.exit()).style("opacity",ε).remove(),tickUpdate=d3.transition(tick.order()).style("opacity",1),tickSpacing=Math.max(innerTickSize,0)+tickPadding,tickTransform,range=d3_scaleRange(scale1),path=g.selectAll(".domain").data([0]),pathUpdate=(path.enter().append("path").attr("class","domain"),d3.transition(path));tickEnter.append("line"),tickEnter.append("text");var lineEnter=tickEnter.select("line"),lineUpdate=tickUpdate.select("line"),text=tick.select("text").text(tickFormat),textEnter=tickEnter.select("text"),textUpdate=tickUpdate.select("text"),sign="top"===orient||"left"===orient?-1:1,x1,x2,y1,y2;if("bottom"===orient||"top"===orient?(tickTransform=d3_svg_axisX,x1="x",y1="y",x2="x2",y2="y2",text.attr("dy",sign<0?"0em":".71em").style("text-anchor","middle"),pathUpdate.attr("d","M"+range[0]+","+sign*outerTickSize+"V0H"+range[1]+"V"+sign*outerTickSize)):(tickTransform=d3_svg_axisY,x1="y",y1="x",x2="y2",y2="x2",text.attr("dy",".32em").style("text-anchor",sign<0?"end":"start"),pathUpdate.attr("d","M"+sign*outerTickSize+","+range[0]+"H0V"+range[1]+"H"+sign*outerTickSize)),lineEnter.attr(y2,sign*innerTickSize),textEnter.attr(y1,sign*tickSpacing),lineUpdate.attr(x2,0).attr(y2,sign*innerTickSize),textUpdate.attr(x1,0).attr(y1,sign*tickSpacing),scale1.rangeBand){var x=scale1,dx=x.rangeBand()/2;scale0=scale1=function(d){return x(d)+dx}}else scale0.rangeBand?scale0=scale1:tickExit.call(tickTransform,scale1,scale0);tickEnter.call(tickTransform,scale0,scale1),tickUpdate.call(tickTransform,scale1,scale1)}))}return axis.scale=function(x){return arguments.length?(scale=x,axis):scale},axis.orient=function(x){return arguments.length?(orient=x in d3_svg_axisOrients?x+"":d3_svg_axisDefaultOrient,axis):orient},axis.ticks=function(){return arguments.length?(tickArguments_=d3_array(arguments),axis):tickArguments_},axis.tickValues=function(x){return arguments.length?(tickValues=x,axis):tickValues},axis.tickFormat=function(x){return arguments.length?(tickFormat_=x,axis):tickFormat_},axis.tickSize=function(x){var n=arguments.length;return n?(innerTickSize=+x,outerTickSize=+arguments[n-1],axis):innerTickSize},axis.innerTickSize=function(x){return arguments.length?(innerTickSize=+x,axis):innerTickSize},axis.outerTickSize=function(x){return arguments.length?(outerTickSize=+x,axis):outerTickSize},axis.tickPadding=function(x){return arguments.length?(tickPadding=+x,axis):tickPadding},axis.tickSubdivide=function(){return arguments.length&&axis},axis};var d3_svg_axisDefaultOrient="bottom",d3_svg_axisOrients={top:1,right:1,bottom:1,left:1};function d3_svg_axisX(selection,x0,x1){selection.attr("transform",(function(d){var v0=x0(d);return"translate("+(isFinite(v0)?v0:x1(d))+",0)"}))}function d3_svg_axisY(selection,y0,y1){selection.attr("transform",(function(d){var v0=y0(d);return"translate(0,"+(isFinite(v0)?v0:y1(d))+")"}))}d3.svg.brush=function(){var event=d3_eventDispatch(brush,"brushstart","brush","brushend"),x=null,y=null,xExtent=[0,0],yExtent=[0,0],xExtentDomain,yExtentDomain,xClamp=!0,yClamp=!0,resizes=d3_svg_brushResizes[0];function brush(g){g.each((function(){var g=d3.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",brushstart).on("touchstart.brush",brushstart),background=g.selectAll(".background").data([0]);background.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),g.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var resize=g.selectAll(".resize").data(resizes,d3_identity);resize.exit().remove(),resize.enter().append("g").attr("class",(function(d){return"resize "+d})).style("cursor",(function(d){return d3_svg_brushCursor[d]})).append("rect").attr("x",(function(d){return/[ew]$/.test(d)?-3:null})).attr("y",(function(d){return/^[ns]/.test(d)?-3:null})).attr("width",6).attr("height",6).style("visibility","hidden"),resize.style("display",brush.empty()?"none":null);var gUpdate=d3.transition(g),backgroundUpdate=d3.transition(background),range;x&&(range=d3_scaleRange(x),backgroundUpdate.attr("x",range[0]).attr("width",range[1]-range[0]),redrawX(gUpdate)),y&&(range=d3_scaleRange(y),backgroundUpdate.attr("y",range[0]).attr("height",range[1]-range[0]),redrawY(gUpdate)),redraw(gUpdate)}))}function redraw(g){g.selectAll(".resize").attr("transform",(function(d){return"translate("+xExtent[+/e$/.test(d)]+","+yExtent[+/^s/.test(d)]+")"}))}function redrawX(g){g.select(".extent").attr("x",xExtent[0]),g.selectAll(".extent,.n>rect,.s>rect").attr("width",xExtent[1]-xExtent[0])}function redrawY(g){g.select(".extent").attr("y",yExtent[0]),g.selectAll(".extent,.e>rect,.w>rect").attr("height",yExtent[1]-yExtent[0])}function brushstart(){var target=this,eventTarget=d3.select(d3.event.target),event_=event.of(target,arguments),g=d3.select(target),resizing=eventTarget.datum(),resizingX=!/^(n|s)$/.test(resizing)&&x,resizingY=!/^(e|w)$/.test(resizing)&&y,dragging=eventTarget.classed("extent"),dragRestore=d3_event_dragSuppress(target),center,origin=d3.mouse(target),offset,w=d3.select(d3_window(target)).on("keydown.brush",keydown).on("keyup.brush",keyup);if(d3.event.changedTouches?w.on("touchmove.brush",brushmove).on("touchend.brush",brushend):w.on("mousemove.brush",brushmove).on("mouseup.brush",brushend),g.interrupt().selectAll("*").interrupt(),dragging)origin[0]=xExtent[0]-origin[0],origin[1]=yExtent[0]-origin[1];else if(resizing){var ex=+/w$/.test(resizing),ey=+/^n/.test(resizing);offset=[xExtent[1-ex]-origin[0],yExtent[1-ey]-origin[1]],origin[0]=xExtent[ex],origin[1]=yExtent[ey]}else d3.event.altKey&&(center=origin.slice());function keydown(){32==d3.event.keyCode&&(dragging||(center=null,origin[0]-=xExtent[1],origin[1]-=yExtent[1],dragging=2),d3_eventPreventDefault())}function keyup(){32==d3.event.keyCode&&2==dragging&&(origin[0]+=xExtent[1],origin[1]+=yExtent[1],dragging=0,d3_eventPreventDefault())}function brushmove(){var point=d3.mouse(target),moved=!1;offset&&(point[0]+=offset[0],point[1]+=offset[1]),dragging||(d3.event.altKey?(center||(center=[(xExtent[0]+xExtent[1])/2,(yExtent[0]+yExtent[1])/2]),origin[0]=xExtent[+(point[0]<center[0])],origin[1]=yExtent[+(point[1]<center[1])]):center=null),resizingX&&move1(point,x,0)&&(redrawX(g),moved=!0),resizingY&&move1(point,y,1)&&(redrawY(g),moved=!0),moved&&(redraw(g),event_({type:"brush",mode:dragging?"move":"resize"}))}function move1(point,scale,i){var range=d3_scaleRange(scale),r0=range[0],r1=range[1],position=origin[i],extent=i?yExtent:xExtent,size=extent[1]-extent[0],min,max;if(dragging&&(r0-=position,r1-=size+position),min=(i?yClamp:xClamp)?Math.max(r0,Math.min(r1,point[i])):point[i],dragging?max=(min+=position)+size:(center&&(position=Math.max(r0,Math.min(r1,2*center[i]-min))),position<min?(max=min,min=position):max=position),extent[0]!=min||extent[1]!=max)return i?yExtentDomain=null:xExtentDomain=null,extent[0]=min,extent[1]=max,!0}function brushend(){brushmove(),g.style("pointer-events","all").selectAll(".resize").style("display",brush.empty()?"none":null),d3.select("body").style("cursor",null),w.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),dragRestore(),event_({type:"brushend"})}g.style("pointer-events","none").selectAll(".resize").style("display",null),d3.select("body").style("cursor",eventTarget.style("cursor")),event_({type:"brushstart"}),brushmove()}return brush.event=function(g){g.each((function(){var event_=event.of(this,arguments),extent1={x:xExtent,y:yExtent,i:xExtentDomain,j:yExtentDomain},extent0=this.__chart__||extent1;this.__chart__=extent1,d3_transitionInheritId?d3.select(this).transition().each("start.brush",(function(){xExtentDomain=extent0.i,yExtentDomain=extent0.j,xExtent=extent0.x,yExtent=extent0.y,event_({type:"brushstart"})})).tween("brush:brush",(function(){var xi=d3_interpolateArray(xExtent,extent1.x),yi=d3_interpolateArray(yExtent,extent1.y);return xExtentDomain=yExtentDomain=null,function(t){xExtent=extent1.x=xi(t),yExtent=extent1.y=yi(t),event_({type:"brush",mode:"resize"})}})).each("end.brush",(function(){xExtentDomain=extent1.i,yExtentDomain=extent1.j,event_({type:"brush",mode:"resize"}),event_({type:"brushend"})})):(event_({type:"brushstart"}),event_({type:"brush",mode:"resize"}),event_({type:"brushend"}))}))},brush.x=function(z){return arguments.length?(resizes=d3_svg_brushResizes[!(x=z)<<1|!y],brush):x},brush.y=function(z){return arguments.length?(resizes=d3_svg_brushResizes[!x<<1|!(y=z)],brush):y},brush.clamp=function(z){return arguments.length?(x&&y?(xClamp=!!z[0],yClamp=!!z[1]):x?xClamp=!!z:y&&(yClamp=!!z),brush):x&&y?[xClamp,yClamp]:x?xClamp:y?yClamp:null},brush.extent=function(z){var x0,x1,y0,y1,t;return arguments.length?(x&&(x0=z[0],x1=z[1],y&&(x0=x0[0],x1=x1[0]),xExtentDomain=[x0,x1],x.invert&&(x0=x(x0),x1=x(x1)),x1<x0&&(t=x0,x0=x1,x1=t),x0==xExtent[0]&&x1==xExtent[1]||(xExtent=[x0,x1])),y&&(y0=z[0],y1=z[1],x&&(y0=y0[1],y1=y1[1]),yExtentDomain=[y0,y1],y.invert&&(y0=y(y0),y1=y(y1)),y1<y0&&(t=y0,y0=y1,y1=t),y0==yExtent[0]&&y1==yExtent[1]||(yExtent=[y0,y1])),brush):(x&&(xExtentDomain?(x0=xExtentDomain[0],x1=xExtentDomain[1]):(x0=xExtent[0],x1=xExtent[1],x.invert&&(x0=x.invert(x0),x1=x.invert(x1)),x1<x0&&(t=x0,x0=x1,x1=t))),y&&(yExtentDomain?(y0=yExtentDomain[0],y1=yExtentDomain[1]):(y0=yExtent[0],y1=yExtent[1],y.invert&&(y0=y.invert(y0),y1=y.invert(y1)),y1<y0&&(t=y0,y0=y1,y1=t))),x&&y?[[x0,y0],[x1,y1]]:x?[x0,x1]:y&&[y0,y1])},brush.clear=function(){return brush.empty()||(xExtent=[0,0],yExtent=[0,0],xExtentDomain=yExtentDomain=null),brush},brush.empty=function(){return!!x&&xExtent[0]==xExtent[1]||!!y&&yExtent[0]==yExtent[1]},d3.rebind(brush,event,"on")};var d3_svg_brushCursor={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},d3_svg_brushResizes=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],d3_time_format=d3_time.format=d3_locale_enUS.timeFormat,d3_time_formatUtc=d3_time_format.utc,d3_time_formatIso=d3_time_formatUtc("%Y-%m-%dT%H:%M:%S.%LZ");function d3_time_formatIsoNative(date){return date.toISOString()}function d3_time_scale(linear,methods,format){function scale(x){return linear(x)}function tickMethod(extent,count){var span,target=(extent[1]-extent[0])/count,i=d3.bisect(d3_time_scaleSteps,target);return i==d3_time_scaleSteps.length?[methods.year,d3_scale_linearTickRange(extent.map((function(d){return d/31536e6})),count)[2]]:i?methods[target/d3_time_scaleSteps[i-1]<d3_time_scaleSteps[i]/target?i-1:i]:[d3_time_scaleMilliseconds,d3_scale_linearTickRange(extent,count)[2]]}return scale.invert=function(x){return d3_time_scaleDate(linear.invert(x))},scale.domain=function(x){return arguments.length?(linear.domain(x),scale):linear.domain().map(d3_time_scaleDate)},scale.nice=function(interval,skip){var domain=scale.domain(),extent=d3_scaleExtent(domain),method=null==interval?tickMethod(extent,10):"number"==typeof interval&&tickMethod(extent,interval);function skipped(date){return!isNaN(date)&&!interval.range(date,d3_time_scaleDate(+date+1),skip).length}return method&&(interval=method[0],skip=method[1]),scale.domain(d3_scale_nice(domain,skip>1?{floor:function(date){for(;skipped(date=interval.floor(date));)date=d3_time_scaleDate(date-1);return date},ceil:function(date){for(;skipped(date=interval.ceil(date));)date=d3_time_scaleDate(+date+1);return date}}:interval))},scale.ticks=function(interval,skip){var extent=d3_scaleExtent(scale.domain()),method=null==interval?tickMethod(extent,10):"number"==typeof interval?tickMethod(extent,interval):!interval.range&&[{range:interval},skip];return method&&(interval=method[0],skip=method[1]),interval.range(extent[0],d3_time_scaleDate(+extent[1]+1),skip<1?1:skip)},scale.tickFormat=function(){return format},scale.copy=function(){return d3_time_scale(linear.copy(),methods,format)},d3_scale_linearRebind(scale,linear)}function d3_time_scaleDate(t){return new Date(t)}d3_time_format.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?d3_time_formatIsoNative:d3_time_formatIso,d3_time_formatIsoNative.parse=function(string){var date=new Date(string);return isNaN(date)?null:date},d3_time_formatIsoNative.toString=d3_time_formatIso.toString,d3_time.second=d3_time_interval((function(date){return new d3_date(1e3*Math.floor(date/1e3))}),(function(date,offset){date.setTime(date.getTime()+1e3*Math.floor(offset))}),(function(date){return date.getSeconds()})),d3_time.seconds=d3_time.second.range,d3_time.seconds.utc=d3_time.second.utc.range,d3_time.minute=d3_time_interval((function(date){return new d3_date(6e4*Math.floor(date/6e4))}),(function(date,offset){date.setTime(date.getTime()+6e4*Math.floor(offset))}),(function(date){return date.getMinutes()})),d3_time.minutes=d3_time.minute.range,d3_time.minutes.utc=d3_time.minute.utc.range,d3_time.hour=d3_time_interval((function(date){var timezone=date.getTimezoneOffset()/60;return new d3_date(36e5*(Math.floor(date/36e5-timezone)+timezone))}),(function(date,offset){date.setTime(date.getTime()+36e5*Math.floor(offset))}),(function(date){return date.getHours()})),d3_time.hours=d3_time.hour.range,d3_time.hours.utc=d3_time.hour.utc.range,d3_time.month=d3_time_interval((function(date){return(date=d3_time.day(date)).setDate(1),date}),(function(date,offset){date.setMonth(date.getMonth()+offset)}),(function(date){return date.getMonth()})),d3_time.months=d3_time.month.range,d3_time.months.utc=d3_time.month.utc.range;var d3_time_scaleSteps=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],d3_time_scaleLocalMethods=[[d3_time.second,1],[d3_time.second,5],[d3_time.second,15],[d3_time.second,30],[d3_time.minute,1],[d3_time.minute,5],[d3_time.minute,15],[d3_time.minute,30],[d3_time.hour,1],[d3_time.hour,3],[d3_time.hour,6],[d3_time.hour,12],[d3_time.day,1],[d3_time.day,2],[d3_time.week,1],[d3_time.month,1],[d3_time.month,3],[d3_time.year,1]],d3_time_scaleLocalFormat=d3_time_format.multi([[".%L",function(d){return d.getMilliseconds()}],[":%S",function(d){return d.getSeconds()}],["%I:%M",function(d){return d.getMinutes()}],["%I %p",function(d){return d.getHours()}],["%a %d",function(d){return d.getDay()&&1!=d.getDate()}],["%b %d",function(d){return 1!=d.getDate()}],["%B",function(d){return d.getMonth()}],["%Y",d3_true]]),d3_time_scaleMilliseconds={range:function(start,stop,step){return d3.range(Math.ceil(start/step)*step,+stop,step).map(d3_time_scaleDate)},floor:d3_identity,ceil:d3_identity};d3_time_scaleLocalMethods.year=d3_time.year,d3_time.scale=function(){return d3_time_scale(d3.scale.linear(),d3_time_scaleLocalMethods,d3_time_scaleLocalFormat)};var d3_time_scaleUtcMethods=d3_time_scaleLocalMethods.map((function(m){return[m[0].utc,m[1]]})),d3_time_scaleUtcFormat=d3_time_formatUtc.multi([[".%L",function(d){return d.getUTCMilliseconds()}],[":%S",function(d){return d.getUTCSeconds()}],["%I:%M",function(d){return d.getUTCMinutes()}],["%I %p",function(d){return d.getUTCHours()}],["%a %d",function(d){return d.getUTCDay()&&1!=d.getUTCDate()}],["%b %d",function(d){return 1!=d.getUTCDate()}],["%B",function(d){return d.getUTCMonth()}],["%Y",d3_true]]);function d3_json(request){return JSON.parse(request.responseText)}function d3_html(request){var range=d3_document.createRange();return range.selectNode(d3_document.body),range.createContextualFragment(request.responseText)}d3_time_scaleUtcMethods.year=d3_time.year.utc,d3_time.scale.utc=function(){return d3_time_scale(d3.scale.linear(),d3_time_scaleUtcMethods,d3_time_scaleUtcFormat)},d3.text=d3_xhrType((function(request){return request.responseText})),d3.json=function(url,callback){return d3_xhr(url,"application/json",d3_json,callback)},d3.html=function(url,callback){return d3_xhr(url,"text/html",d3_html,callback)},d3.xml=d3_xhrType((function(request){return request.responseXML})),"function"==typeof define&&define.amd?(this.d3=d3,define(d3)):"object"==typeof module&&module.exports?module.exports=d3:this.d3=d3}(),function(root,factory){"function"==typeof define&&define.amd?define(["d3"],(function(d3){return root.Rickshaw=factory(d3)})):"object"==typeof exports?module.exports=factory(require("d3")):root.Rickshaw=factory(d3)}(this,(function(d3){var Rickshaw={version:"1.6.2",namespace:function(namespace,obj){for(var parts=namespace.split("."),parent=Rickshaw,i=1,length=parts.length;i<length;i++){var currentPart=parts[i];parent[currentPart]=parent[currentPart]||{},parent=parent[currentPart]}return parent},keys:function(obj){var keys=[];for(var key in obj)keys.push(key);return keys},extend:function(destination,source){for(var property in source)destination[property]=source[property];return destination},clone:function(obj){return JSON.parse(JSON.stringify(obj))}};return function(globalContext){var _toString=Object.prototype.toString,NULL_TYPE="Null",UNDEFINED_TYPE="Undefined",BOOLEAN_TYPE="Boolean",NUMBER_TYPE="Number",STRING_TYPE="String",OBJECT_TYPE="Object",FUNCTION_CLASS="[object Function]";function isFunction(object){return _toString.call(object)===FUNCTION_CLASS}function extend(destination,source){for(var property in source)source.hasOwnProperty(property)&&(destination[property]=source[property]);return destination}function keys(object){if("Object"!==Type(object))throw new TypeError;var results=[];for(var property in object)object.hasOwnProperty(property)&&results.push(property);return results}function Type(o){switch(o){case null:return"Null";case void 0:return"Undefined"}var type;switch(typeof o){case"boolean":return"Boolean";case"number":return"Number";case"string":return"String"}return"Object"}function isUndefined(object){return void 0===object}var slice=Array.prototype.slice;function argumentNames(fn){var names=fn.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return 1!=names.length||names[0]?names:[]}function wrap(fn,wrapper){var __method=fn;return function(){var a=update([bind(__method,this)],arguments);return wrapper.apply(this,a)}}function update(array,args){for(var arrayLength=array.length,length=args.length;length--;)array[arrayLength+length]=args[length];return array}function merge(array,args){return update(array=slice.call(array,0),args)}function bind(fn,context){if(arguments.length<2&&isUndefined(arguments[0]))return this;var __method=fn,args=slice.call(arguments,2);return function(){var a=merge(args,arguments);return __method.apply(context,a)}}var emptyFunction=function(){},Class=function(){var IS_DONTENUM_BUGGY=function(){for(var p in{toString:1})if("toString"===p)return!1;return!0}();function subclass(){}function create(){var parent=null,properties=[].slice.apply(arguments);function klass(){this.initialize.apply(this,arguments)}if(isFunction(properties[0])&&(parent=properties.shift()),extend(klass,Class.Methods),klass.superclass=parent,klass.subclasses=[],parent){subclass.prototype=parent.prototype,klass.prototype=new subclass;try{parent.subclasses.push(klass)}catch(e){}}for(var i=0,length=properties.length;i<length;i++)klass.addMethods(properties[i]);return klass.prototype.initialize||(klass.prototype.initialize=emptyFunction),klass.prototype.constructor=klass,klass}function addMethods(source){var ancestor=this.superclass&&this.superclass.prototype,properties=keys(source);IS_DONTENUM_BUGGY&&(source.toString!=Object.prototype.toString&&properties.push("toString"),source.valueOf!=Object.prototype.valueOf&&properties.push("valueOf"));for(var i=0,length=properties.length;i<length;i++){var property=properties[i],value=source[property];if(ancestor&&isFunction(value)&&"$super"==argumentNames(value)[0]){var method=value;(value=wrap(function(m){return function(){return ancestor[m].apply(this,arguments)}}(property),method)).valueOf=bind(method.valueOf,method),value.toString=bind(method.toString,method)}this.prototype[property]=value}return this}return{create:create,Methods:{addMethods:addMethods}}}();globalContext.exports?globalContext.exports.Class=Class:globalContext.Class=Class}(Rickshaw),Rickshaw.namespace("Rickshaw.Compat.ClassList"),Rickshaw.Compat.ClassList=function(){"undefined"==typeof document||"classList"in document.createElement("a")||function(view){"use strict";var classListProp="classList",protoProp="prototype",elemCtrProto=(view.HTMLElement||view.Element).prototype,objCtr=Object,strTrim=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},arrIndexOf=Array.prototype.indexOf||function(item){for(var i=0,len=this.length;i<len;i++)if(i in this&&this[i]===item)return i;return-1},DOMEx=function(type,message){this.name=type,this.code=DOMException[type],this.message=message},checkTokenAndGetIndex=function(classList,token){if(""===token)throw new DOMEx("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(token))throw new DOMEx("INVALID_CHARACTER_ERR","String contains an invalid character");return arrIndexOf.call(classList,token)},ClassList=function(elem){for(var trimmedClasses=strTrim.call(elem.className),classes=trimmedClasses?trimmedClasses.split(/\s+/):[],i=0,len=classes.length;i<len;i++)this.push(classes[i]);this._updateClassName=function(){elem.className=this.toString()}},classListProto=ClassList.prototype=[],classListGetter=function(){return new ClassList(this)};if(DOMEx.prototype=Error.prototype,classListProto.item=function(i){return this[i]||null},classListProto.contains=function(token){return-1!==checkTokenAndGetIndex(this,token+="")},classListProto.add=function(token){-1===checkTokenAndGetIndex(this,token+="")&&(this.push(token),this._updateClassName())},classListProto.remove=function(token){var index=checkTokenAndGetIndex(this,token+="");-1!==index&&(this.splice(index,1),this._updateClassName())},classListProto.toggle=function(token){-1===checkTokenAndGetIndex(this,token+="")?this.add(token):this.remove(token)},classListProto.toString=function(){return this.join(" ")},objCtr.defineProperty){var classListPropDesc={get:classListGetter,enumerable:!0,configurable:!0};try{objCtr.defineProperty(elemCtrProto,"classList",classListPropDesc)}catch(ex){-2146823252===ex.number&&(classListPropDesc.enumerable=!1,objCtr.defineProperty(elemCtrProto,"classList",classListPropDesc))}}else objCtr.prototype.__defineGetter__&&elemCtrProto.__defineGetter__("classList",classListGetter)}(window)},("undefined"!=typeof RICKSHAW_NO_COMPAT&&!RICKSHAW_NO_COMPAT||"undefined"==typeof RICKSHAW_NO_COMPAT)&&new Rickshaw.Compat.ClassList,Rickshaw.namespace("Rickshaw.Graph"),Rickshaw.Graph=function(args){var self=this;this.initialize=function(args){if(!args.element)throw"Rickshaw.Graph needs a reference to an element";if(1!==args.element.nodeType)throw"Rickshaw.Graph element was defined but not an HTML element";this.element=args.element,this.series=args.series,this.window={},this.updateCallbacks=[],this.configureCallbacks=[],this.defaults={interpolation:"cardinal",offset:"zero",min:void 0,max:void 0,preserve:!1,xScale:void 0,yScale:void 0,stack:!0},this._loadRenderers(),this.configure(args),this.validateSeries(args.series),this.series.active=function(){return self.series.filter((function(s){return!s.disabled}))},this.setSize({width:args.width,height:args.height}),this.element.classList.add("rickshaw_graph"),this.vis=d3.select(this.element).append("svg:svg").attr("width",this.width).attr("height",this.height),this.discoverRange()},this._loadRenderers=function(){for(var name in Rickshaw.Graph.Renderer)if(name&&Rickshaw.Graph.Renderer.hasOwnProperty(name)){var r=Rickshaw.Graph.Renderer[name];r&&r.prototype&&r.prototype.render&&self.registerRenderer(new r({graph:self}))}},this.validateSeries=function(series){var seriesSignature,pointsCount;if(!(Array.isArray(series)||series instanceof Rickshaw.Series))throw"series is not an array: "+Object.prototype.toString.apply(series);series.forEach((function(s){if(!(s instanceof Object))throw"series element is not an object: "+s;if(!s.data)throw"series has no data: "+JSON.stringify(s);if(!Array.isArray(s.data))throw"series data is not an array: "+JSON.stringify(s.data);if(s.data.length>0){var x=s.data[0].x,y=s.data[0].y;if("number"!=typeof x||"number"!=typeof y&&null!==y)throw"x and y properties of points should be numbers instead of "+typeof x+" and "+typeof y}if(s.data.length>=3&&(s.data[2].x<s.data[1].x||s.data[1].x<s.data[0].x||s.data[s.data.length-1].x<s.data[0].x))throw"series data needs to be sorted on x values for series name: "+s.name}),this)},this.dataDomain=function(){var data=this.series.map((function(s){return s.data})),min,max;return[d3.min(data.map((function(d){return d[0].x}))),d3.max(data.map((function(d){return d[d.length-1].x})))]},this.discoverRange=function(){var domain=this.renderer.domain();this.x=(this.xScale||d3.scale.linear()).copy().domain(domain.x).range([0,this.width]),this.y=(this.yScale||d3.scale.linear()).copy().domain(domain.y).range([this.height,0]),this.x.magnitude=d3.scale.linear().domain([domain.x[0]-domain.x[0],domain.x[1]-domain.x[0]]).range([0,this.width]),this.y.magnitude=d3.scale.linear().domain([domain.y[0]-domain.y[0],domain.y[1]-domain.y[0]]).range([0,this.height])},this.render=function(){var stackedData=this.stackData();this.discoverRange(),this.renderer.render(),this.updateCallbacks.forEach((function(callback){callback()}))},this.update=this.render,this.stackData=function(){var data=this.series.active().map((function(d){return d.data})).map((function(d){return d.filter((function(d){return this._slice(d)}),this)}),this),preserve=this.preserve,stackedData;if(preserve||this.series.forEach((function(series){series.scale&&(preserve=!0)})),data=preserve?Rickshaw.clone(data):data,this.series.active().forEach((function(series,index){if(series.scale){var seriesData=data[index];seriesData&&seriesData.forEach((function(d){d.y=series.scale(d.y)}))}})),this.stackData.hooks.data.forEach((function(entry){data=entry.f.apply(self,[data])})),!this.renderer.unstack){this._validateStackable();var layout=d3.layout.stack();layout.offset(self.offset),stackedData=layout(data)}stackedData=stackedData||data,this.renderer.unstack&&stackedData.forEach((function(seriesData){seriesData.forEach((function(d){d.y0=void 0===d.y0?0:d.y0}))})),this.stackData.hooks.after.forEach((function(entry){stackedData=entry.f.apply(self,[data])}));var i=0;return this.series.forEach((function(series){series.disabled||(series.stack=stackedData[i++])})),this.stackedData=stackedData,stackedData},this._validateStackable=function(){var series,pointsCount;this.series.forEach((function(s){if((pointsCount=pointsCount||s.data.length)&&s.data.length!=pointsCount)throw"stacked series cannot have differing numbers of points: "+pointsCount+" vs "+s.data.length+"; see Rickshaw.Series.fill()"}),this)},this.stackData.hooks={data:[],after:[]},this._slice=function(d){if(this.window.xMin||this.window.xMax){var isInRange=!0;return this.window.xMin&&d.x<this.window.xMin&&(isInRange=!1),this.window.xMax&&d.x>this.window.xMax&&(isInRange=!1),isInRange}return!0},this.onUpdate=function(callback){this.updateCallbacks.push(callback)},this.onConfigure=function(callback){this.configureCallbacks.push(callback)},this.registerRenderer=function(renderer){this._renderers=this._renderers||{},this._renderers[renderer.name]=renderer},this.configure=function(args){this.config=this.config||{},(args.width||args.height)&&this.setSize(args),Rickshaw.keys(this.defaults).forEach((function(k){this.config[k]=k in args?args[k]:k in this?this[k]:this.defaults[k]}),this),Rickshaw.keys(this.config).forEach((function(k){this[k]=this.config[k]}),this),"stack"in args&&(args.unstack=!args.stack);var renderer=args.renderer||this.renderer&&this.renderer.name||"stack";this.setRenderer(renderer,args),this.configureCallbacks.forEach((function(callback){callback(args)}))},this.setRenderer=function(r,args){if("function"==typeof r)this.renderer=new r({graph:self}),this.registerRenderer(this.renderer);else{if(!this._renderers[r])throw"couldn't find renderer "+r;this.renderer=this._renderers[r]}"object"==typeof args&&this.renderer.configure(args)},this.setSize=function(args){if(args=args||{},"undefined"!=typeof window)var style=window.getComputedStyle(this.element,null),elementWidth=parseInt(style.getPropertyValue("width"),10),elementHeight=parseInt(style.getPropertyValue("height"),10);this.width=args.width||elementWidth||400,this.height=args.height||elementHeight||250,this.vis&&this.vis.attr("width",this.width).attr("height",this.height)},this.initialize(args)},Rickshaw.namespace("Rickshaw.Fixtures.Color"),Rickshaw.Fixtures.Color=function(){this.schemes={},this.schemes.spectrum14=["#ecb796","#dc8f70","#b2a470","#92875a","#716c49","#d2ed82","#bbe468","#a1d05d","#e7cbe6","#d8aad6","#a888c2","#9dc2d3","#649eb9","#387aa3"].reverse(),this.schemes.spectrum2000=["#57306f","#514c76","#646583","#738394","#6b9c7d","#84b665","#a7ca50","#bfe746","#e2f528","#fff726","#ecdd00","#d4b11d","#de8800","#de4800","#c91515","#9a0000","#7b0429","#580839","#31082b"],this.schemes.spectrum2001=["#2f243f","#3c2c55","#4a3768","#565270","#6b6b7c","#72957f","#86ad6e","#a1bc5e","#b8d954","#d3e04e","#ccad2a","#cc8412","#c1521d","#ad3821","#8a1010","#681717","#531e1e","#3d1818","#320a1b"],this.schemes.classic9=["#423d4f","#4a6860","#848f39","#a2b73c","#ddcb53","#c5a32f","#7d5836","#963b20","#7c2626","#491d37","#2f254a"].reverse(),this.schemes.httpStatus={503:"#ea5029",502:"#d23f14",500:"#bf3613",410:"#efacea",409:"#e291dc",403:"#f457e8",408:"#e121d2",401:"#b92dae",405:"#f47ceb",404:"#a82a9f",400:"#b263c6",301:"#6fa024",302:"#87c32b",307:"#a0d84c",304:"#28b55c",200:"#1a4f74",206:"#27839f",201:"#52adc9",202:"#7c979f",203:"#a5b8bd",204:"#c1cdd1"},this.schemes.colorwheel=["#b5b6a9","#858772","#785f43","#96557e","#4682b4","#65b9ac","#73c03a","#cb513a"].reverse(),this.schemes.cool=["#5e9d2f","#73c03a","#4682b4","#7bc3b8","#a9884e","#c1b266","#a47493","#c09fb5"],this.schemes.munin=["#00cc00","#0066b3","#ff8000","#ffcc00","#330099","#990099","#ccff00","#ff0000","#808080","#008f00","#00487d","#b35a00","#b38f00","#6b006b","#8fb300","#b30000","#bebebe","#80ff80","#80c9ff","#ffc080","#ffe680","#aa80ff","#ee00cc","#ff8080","#666600","#ffbfff","#00ffcc","#cc6699","#999900"]},Rickshaw.namespace("Rickshaw.Fixtures.RandomData"),Rickshaw.Fixtures.RandomData=function(timeInterval){var addData;timeInterval=timeInterval||1;var lastRandomValue=200,timeBase=Math.floor((new Date).getTime()/1e3);this.addData=function(data){var randomValue=100*Math.random()+15+lastRandomValue,index=data[0].length,counter=1;data.forEach((function(series){var randomVariance=20*Math.random(),v=randomValue/25+counter+++15*(Math.cos(index*counter*11/960)+2)+7*(Math.cos(index/7)+2)+1*(Math.cos(index/17)+2);series.push({x:index*timeInterval+timeBase,y:v+randomVariance})})),lastRandomValue=.85*randomValue},this.removeData=function(data){data.forEach((function(series){series.shift()})),timeBase+=timeInterval}},Rickshaw.namespace("Rickshaw.Fixtures.Time"),Rickshaw.Fixtures.Time=function(){var self=this;this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.units=[{name:"decade",seconds:315576e3,formatter:function(d){return 10*parseInt(d.getUTCFullYear()/10,10)}},{name:"year",seconds:31557600,formatter:function(d){return d.getUTCFullYear()}},{name:"month",seconds:2635200,formatter:function(d){return self.months[d.getUTCMonth()]}},{name:"week",seconds:604800,formatter:function(d){return self.formatDate(d)}},{name:"day",seconds:86400,formatter:function(d){return d.getUTCDate()}},{name:"6 hour",seconds:21600,formatter:function(d){return self.formatTime(d)}},{name:"hour",seconds:3600,formatter:function(d){return self.formatTime(d)}},{name:"15 minute",seconds:900,formatter:function(d){return self.formatTime(d)}},{name:"minute",seconds:60,formatter:function(d){return d.getUTCMinutes()+"m"}},{name:"15 second",seconds:15,formatter:function(d){return d.getUTCSeconds()+"s"}},{name:"second",seconds:1,formatter:function(d){return d.getUTCSeconds()+"s"}},{name:"decisecond",seconds:.1,formatter:function(d){return d.getUTCMilliseconds()+"ms"}},{name:"centisecond",seconds:.01,formatter:function(d){return d.getUTCMilliseconds()+"ms"}}],this.unit=function(unitName){return this.units.filter((function(unit){return unitName==unit.name})).shift()},this.formatDate=function(d){return d3.time.format("%b %e")(d)},this.formatTime=function(d){return d.toUTCString().match(/(\d+:\d+):/)[1]},this.ceil=function(time,unit){var date,floor,year;if("month"==unit.name){if(date=new Date(1e3*time),(floor=Date.UTC(date.getUTCFullYear(),date.getUTCMonth())/1e3)==time)return time;year=date.getUTCFullYear();var month=date.getUTCMonth();return 11==month?(month=0,year+=1):month+=1,Date.UTC(year,month)/1e3}return"year"==unit.name?(date=new Date(1e3*time),(floor=Date.UTC(date.getUTCFullYear(),0)/1e3)==time?time:(year=date.getUTCFullYear()+1,Date.UTC(year,0)/1e3)):Math.ceil(time/unit.seconds)*unit.seconds}},Rickshaw.namespace("Rickshaw.Fixtures.Time.Local"),Rickshaw.Fixtures.Time.Local=function(){var self=this;this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.units=[{name:"decade",seconds:315576e3,formatter:function(d){return 10*parseInt(d.getFullYear()/10,10)}},{name:"year",seconds:31557600,formatter:function(d){return d.getFullYear()}},{name:"month",seconds:2635200,formatter:function(d){return self.months[d.getMonth()]}},{name:"week",seconds:604800,formatter:function(d){return self.formatDate(d)}},{name:"day",seconds:86400,formatter:function(d){return d.getDate()}},{name:"6 hour",seconds:21600,formatter:function(d){return self.formatTime(d)}},{name:"hour",seconds:3600,formatter:function(d){return self.formatTime(d)}},{name:"15 minute",seconds:900,formatter:function(d){return self.formatTime(d)}},{name:"minute",seconds:60,formatter:function(d){return d.getMinutes()}},{name:"15 second",seconds:15,formatter:function(d){return d.getSeconds()+"s"}},{name:"second",seconds:1,formatter:function(d){return d.getSeconds()+"s"}},{name:"decisecond",seconds:.1,formatter:function(d){return d.getMilliseconds()+"ms"}},{name:"centisecond",seconds:.01,formatter:function(d){return d.getMilliseconds()+"ms"}}],this.unit=function(unitName){return this.units.filter((function(unit){return unitName==unit.name})).shift()},this.formatDate=function(d){return d3.time.format("%b %e")(d)},this.formatTime=function(d){return d.toString().match(/(\d+:\d+):/)[1]},this.ceil=function(time,unit){var date,floor,year,offset;if("day"==unit.name){var nearFuture=new Date(1e3*(time+unit.seconds-1)),rounded=new Date(0);return rounded.setFullYear(nearFuture.getFullYear()),rounded.setMonth(nearFuture.getMonth()),rounded.setDate(nearFuture.getDate()),rounded.setMilliseconds(0),rounded.setSeconds(0),rounded.setMinutes(0),rounded.setHours(0),rounded.getTime()/1e3}if("month"==unit.name){if(date=new Date(1e3*time),(floor=new Date(date.getFullYear(),date.getMonth()).getTime()/1e3)==time)return time;year=date.getFullYear();var month=date.getMonth();return 11==month?(month=0,year+=1):month+=1,new Date(year,month).getTime()/1e3}return"year"==unit.name?(date=new Date(1e3*time),(floor=new Date(date.getUTCFullYear(),0).getTime()/1e3)==time?time:(year=date.getFullYear()+1,new Date(year,0).getTime()/1e3)):(offset=60*new Date(1e3*time).getTimezoneOffset(),Math.ceil((time-offset)/unit.seconds)*unit.seconds+offset)}},Rickshaw.namespace("Rickshaw.Fixtures.Number"),Rickshaw.Fixtures.Number.formatKMBT=function(y){var abs_y=Math.abs(y);return abs_y>=1e12?y/1e12+"T":abs_y>=1e9?y/1e9+"B":abs_y>=1e6?y/1e6+"M":abs_y>=1e3?y/1e3+"K":abs_y<1&&abs_y>0?y.toFixed(2):0===abs_y?"":y},Rickshaw.Fixtures.Number.formatBase1024KMGTP=function(y){var abs_y=Math.abs(y);return abs_y>=0x4000000000000?y/0x4000000000000+"P":abs_y>=1099511627776?y/1099511627776+"T":abs_y>=1073741824?y/1073741824+"G":abs_y>=1048576?y/1048576+"M":abs_y>=1024?y/1024+"K":abs_y<1&&abs_y>0?y.toFixed(2):0===abs_y?"":y},Rickshaw.namespace("Rickshaw.Color.Palette"),Rickshaw.Color.Palette=function(args){var color=new Rickshaw.Fixtures.Color;if(args=args||{},this.schemes={},this.scheme=color.schemes[args.scheme]||args.scheme||color.schemes.colorwheel,this.runningIndex=0,this.generatorIndex=0,args.interpolatedStopCount){var schemeCount=this.scheme.length-1,i,j,scheme=[];for(i=0;i<schemeCount;i++){scheme.push(this.scheme[i]);var generator=d3.interpolateHsl(this.scheme[i],this.scheme[i+1]);for(j=1;j<args.interpolatedStopCount;j++)scheme.push(generator(1/args.interpolatedStopCount*j))}scheme.push(this.scheme[this.scheme.length-1]),this.scheme=scheme}this.rotateCount=this.scheme.length,this.color=function(key){return this.scheme[key]||this.scheme[this.runningIndex++]||this.interpolateColor()||"#808080"},this.interpolateColor=function(){var color;if(Array.isArray(this.scheme))return this.generatorIndex==2*this.rotateCount-1?(color=d3.interpolateHsl(this.scheme[this.generatorIndex],this.scheme[0])(.5),this.generatorIndex=0,this.rotateCount*=2):(color=d3.interpolateHsl(this.scheme[this.generatorIndex],this.scheme[this.generatorIndex+1])(.5),this.generatorIndex++),this.scheme.push(color),color}},Rickshaw.namespace("Rickshaw.Graph.Ajax"),Rickshaw.Graph.Ajax=Rickshaw.Class.create({initialize:function(args){this.dataURL=args.dataURL,this.onData=args.onData||function(d){return d},this.onComplete=args.onComplete||function(){},this.onError=args.onError||function(){},this.args=args,this.request()},request:function(){jQuery.ajax({url:this.dataURL,dataType:"json",success:this.success.bind(this),error:this.error.bind(this)})},error:function(){console.log("error loading dataURL: "+this.dataURL),this.onError(this)},success:function(data,status){data=this.onData(data),this.args.series=this._splice({data:data,series:this.args.series}),this.graph=this.graph||new Rickshaw.Graph(this.args),this.graph.render(),this.onComplete(this)},_splice:function(args){var data=args.data,series=args.series;return args.series?(series.forEach((function(s){var seriesKey=s.key||s.name;if(!seriesKey)throw"series needs a key or a name";data.forEach((function(d){var dataKey=d.key||d.name,properties;if(!dataKey)throw"data needs a key or a name";seriesKey==dataKey&&["color","name","data"].forEach((function(p){d[p]&&(s[p]=d[p])}))}))})),series):data}}),Rickshaw.namespace("Rickshaw.Graph.Annotate"),Rickshaw.Graph.Annotate=function(args){var graph=this.graph=args.graph;this.elements={timeline:args.element};var self=this;this.data={},this.elements.timeline.classList.add("rickshaw_annotation_timeline"),this.add=function(time,content,end_time){self.data[time]=self.data[time]||{boxes:[]},self.data[time].boxes.push({content:content,end:end_time})},this.update=function(){Rickshaw.keys(self.data).forEach((function(time){var annotation=self.data[time],left=self.graph.x(time);if(left<0||left>self.graph.x.range()[1])return annotation.element&&(annotation.line.classList.add("offscreen"),annotation.element.style.display="none"),void annotation.boxes.forEach((function(box){box.rangeElement&&box.rangeElement.classList.add("offscreen")}));if(!annotation.element){var element=annotation.element=document.createElement("div");element.classList.add("annotation"),this.elements.timeline.appendChild(element),element.addEventListener("click",(function(e){element.classList.toggle("active"),annotation.line.classList.toggle("active"),annotation.boxes.forEach((function(box){box.rangeElement&&box.rangeElement.classList.toggle("active")}))}),!1)}annotation.element.style.left=left+"px",annotation.element.style.display="block",annotation.boxes.forEach((function(box){var element=box.element;if(element||((element=box.element=document.createElement("div")).classList.add("content"),element.innerHTML=box.content,annotation.element.appendChild(element),annotation.line=document.createElement("div"),annotation.line.classList.add("annotation_line"),self.graph.element.appendChild(annotation.line),box.end&&(box.rangeElement=document.createElement("div"),box.rangeElement.classList.add("annotation_range"),self.graph.element.appendChild(box.rangeElement))),box.end){var annotationRangeStart=left,annotationRangeEnd=Math.min(self.graph.x(box.end),self.graph.x.range()[1]);annotationRangeStart>annotationRangeEnd&&(annotationRangeEnd=left,annotationRangeStart=Math.max(self.graph.x(box.end),self.graph.x.range()[0]));var annotationRangeWidth=annotationRangeEnd-annotationRangeStart;box.rangeElement.style.left=annotationRangeStart+"px",box.rangeElement.style.width=annotationRangeWidth+"px",box.rangeElement.classList.remove("offscreen")}annotation.line.classList.remove("offscreen"),annotation.line.style.left=left+"px"}))}),this)},this.graph.onUpdate((function(){self.update()}))},Rickshaw.namespace("Rickshaw.Graph.Axis.Time"),Rickshaw.Graph.Axis.Time=function(args){var self=this;this.graph=args.graph,this.elements=[],this.ticksTreatment=args.ticksTreatment||"plain",this.fixedTimeUnit=args.timeUnit;var time=args.timeFixture||new Rickshaw.Fixtures.Time;this.appropriateTimeUnit=function(){var unit,units=time.units,domain=this.graph.x.domain(),rangeSeconds=domain[1]-domain[0];return units.forEach((function(u){Math.floor(rangeSeconds/u.seconds)>=2&&(unit=unit||u)})),unit||time.units[time.units.length-1]},this.tickOffsets=function(){for(var domain=this.graph.x.domain(),unit=this.fixedTimeUnit||this.appropriateTimeUnit(),count=Math.ceil((domain[1]-domain[0])/unit.seconds),runningTick=domain[0],offsets=[],i=0;i<count;i++){var tickValue=time.ceil(runningTick,unit);runningTick=tickValue+unit.seconds/2,offsets.push({value:tickValue,unit:unit})}return offsets},this.render=function(){var offsets;this.elements.forEach((function(e){e.parentNode.removeChild(e)})),this.elements=[],this.tickOffsets().forEach((function(o){if(!(self.graph.x(o.value)>self.graph.x.range()[1])){var element=document.createElement("div");element.style.left=self.graph.x(o.value)+"px",element.classList.add("x_tick"),element.classList.add(self.ticksTreatment);var title=document.createElement("div");title.classList.add("title"),title.innerHTML=o.unit.formatter(new Date(1e3*o.value)),element.appendChild(title),self.graph.element.appendChild(element),self.elements.push(element)}}))},this.graph.onUpdate((function(){self.render()}))},Rickshaw.namespace("Rickshaw.Graph.Axis.X"),Rickshaw.Graph.Axis.X=function(args){var self=this,berthRate=.1;this.initialize=function(args){this.graph=args.graph,this.orientation=args.orientation||"top",this.pixelsPerTick=args.pixelsPerTick||75,args.ticks&&(this.staticTicks=args.ticks),args.tickValues&&(this.tickValues=args.tickValues),this.tickSize=args.tickSize||4,this.ticksTreatment=args.ticksTreatment||"plain",args.element?(this.element=args.element,this._discoverSize(args.element,args),this.vis=d3.select(args.element).append("svg:svg").attr("height",this.height).attr("width",this.width).attr("class","rickshaw_graph x_axis_d3"),this.element=this.vis[0][0],this.element.style.position="relative",this.setSize({width:args.width,height:args.height})):this.vis=this.graph.vis,this.graph.onUpdate((function(){self.render()}))},this.setSize=function(args){if(args=args||{},this.element){this._discoverSize(this.element.parentNode,args),this.vis.attr("height",this.height).attr("width",1.1*this.width);var berth=Math.floor(.1*this.width/2);this.element.style.left=-1*berth+"px"}},this.render=function(){void 0!==this._renderWidth&&this.graph.width!==this._renderWidth&&this.setSize({auto:!0});var axis=d3.svg.axis().scale(this.graph.x).orient(this.orientation);axis.tickFormat(args.tickFormat||function(x){return x}),this.tickValues&&axis.tickValues(this.tickValues),this.ticks=this.staticTicks||Math.floor(this.graph.width/this.pixelsPerTick);var berth=Math.floor(.1*this.width/2)||0,bar_offset="bar"==this.graph.renderer.name&&Math.ceil(.95*this.graph.width/this.graph.series[0].data.length/2)||0,transform,yOffset;"top"==this.orientation?transform="translate("+(berth+bar_offset)+","+(this.height||this.graph.height)+")":transform="translate("+(berth+bar_offset)+", 0)";this.element&&this.vis.selectAll("*").remove(),this.vis.append("svg:g").attr("class",["x_ticks_d3",this.ticksTreatment].join(" ")).attr("transform",transform).call(axis.ticks(this.ticks).tickSubdivide(0).tickSize(this.tickSize));var gridSize=("bottom"==this.orientation?1:-1)*this.graph.height;this.graph.vis.append("svg:g").attr("class","x_grid_d3").call(axis.ticks(this.ticks).tickSubdivide(0).tickSize(gridSize)).selectAll("text").each((function(){this.parentNode.setAttribute("data-x-value",this.textContent)})),this._renderHeight=this.graph.height},this._discoverSize=function(element,args){if("undefined"!=typeof window){var style=window.getComputedStyle(element,null),elementHeight=parseInt(style.getPropertyValue("height"),10);if(!args.auto)var elementWidth=parseInt(style.getPropertyValue("width"),10)}this.width=1.1*(args.width||elementWidth||this.graph.width),this.height=args.height||elementHeight||40},this.initialize(args)},Rickshaw.namespace("Rickshaw.Graph.Axis.Y"),Rickshaw.Graph.Axis.Y=Rickshaw.Class.create({initialize:function(args){this.graph=args.graph,this.orientation=args.orientation||"right",this.pixelsPerTick=args.pixelsPerTick||75,args.ticks&&(this.staticTicks=args.ticks),args.tickValues&&(this.tickValues=args.tickValues),this.tickSize=args.tickSize||4,this.ticksTreatment=args.ticksTreatment||"plain",this.tickFormat=args.tickFormat||function(y){return y},this.berthRate=.1,args.element?(this.element=args.element,this.vis=d3.select(args.element).append("svg:svg").attr("class","rickshaw_graph y_axis"),this.element=this.vis[0][0],this.element.style.position="relative",this.setSize({width:args.width,height:args.height})):this.vis=this.graph.vis;var self=this;this.graph.onUpdate((function(){self.render()}))},setSize:function(args){if(args=args||{},this.element){if("undefined"!=typeof window){var style=window.getComputedStyle(this.element.parentNode,null),elementWidth=parseInt(style.getPropertyValue("width"),10);if(!args.auto)var elementHeight=parseInt(style.getPropertyValue("height"),10)}this.width=args.width||elementWidth||this.graph.width*this.berthRate,this.height=args.height||elementHeight||this.graph.height,this.vis.attr("width",this.width).attr("height",this.height*(1+this.berthRate));var berth=this.height*this.berthRate;"left"==this.orientation&&(this.element.style.top=-1*berth+"px")}},render:function(){void 0!==this._renderHeight&&this.graph.height!==this._renderHeight&&this.setSize({auto:!0}),this.ticks=this.staticTicks||Math.floor(this.graph.height/this.pixelsPerTick);var axis=this._drawAxis(this.graph.y);this._drawGrid(axis),this._renderHeight=this.graph.height},_drawAxis:function(scale){var axis=d3.svg.axis().scale(scale).orient(this.orientation);if(axis.tickFormat(this.tickFormat),this.tickValues&&axis.tickValues(this.tickValues),"left"==this.orientation)var berth=this.height*this.berthRate,transform="translate("+this.width+", "+berth+")";return this.element&&this.vis.selectAll("*").remove(),this.vis.append("svg:g").attr("class",["y_ticks",this.ticksTreatment].join(" ")).attr("transform",transform).call(axis.ticks(this.ticks).tickSubdivide(0).tickSize(this.tickSize)),axis},_drawGrid:function(axis){var gridSize=("right"==this.orientation?1:-1)*this.graph.width;this.graph.vis.append("svg:g").attr("class","y_grid").call(axis.ticks(this.ticks).tickSubdivide(0).tickSize(gridSize)).selectAll("text").each((function(){this.parentNode.setAttribute("data-y-value",this.textContent)}))}}),Rickshaw.namespace("Rickshaw.Graph.Axis.Y.Scaled"),Rickshaw.Graph.Axis.Y.Scaled=Rickshaw.Class.create(Rickshaw.Graph.Axis.Y,{initialize:function($super,args){if(void 0===args.scale)throw new Error("Scaled requires scale");this.scale=args.scale,void 0===args.grid?this.grid=!0:this.grid=args.grid,$super(args)},_drawAxis:function($super,scale){var domain=this.scale.domain(),renderDomain=this.graph.renderer.domain().y,extents=[Math.min.apply(Math,domain),Math.max.apply(Math,domain)],extentMap=d3.scale.linear().domain([0,1]).range(extents),adjExtents=[extentMap(renderDomain[0]),extentMap(renderDomain[1])],adjustment=d3.scale.linear().domain(extents).range(adjExtents),adjustedScale;return $super(this.scale.copy().domain(domain.map(adjustment)).range(scale.range()))},_drawGrid:function($super,axis){this.grid&&$super(axis)}}),Rickshaw.namespace("Rickshaw.Graph.Behavior.Series.Highlight"),Rickshaw.Graph.Behavior.Series.Highlight=function(args){this.graph=args.graph,this.legend=args.legend;var self=this,colorSafe={},activeLine=null,disabledColor=args.disabledColor||function(seriesColor){return d3.interpolateRgb(seriesColor,d3.rgb("#d8d8d8"))(.8).toString()};this.addHighlightEvents=function(l){l.element.addEventListener("mouseover",(function(e){activeLine||(activeLine=l,self.legend.lines.forEach((function(line){if(l!==line)colorSafe[line.series.name]=colorSafe[line.series.name]||line.series.color,line.series.color=disabledColor(line.series.color);else if(self.graph.renderer.unstack&&(!line.series.renderer||line.series.renderer.unstack)){var seriesIndex=self.graph.series.indexOf(line.series);line.originalIndex=seriesIndex;var series=self.graph.series.splice(seriesIndex,1)[0];self.graph.series.push(series)}})),self.graph.update())}),!1),l.element.addEventListener("mouseout",(function(e){activeLine&&(activeLine=null,self.legend.lines.forEach((function(line){if(l===line&&line.hasOwnProperty("originalIndex")){var series=self.graph.series.pop();self.graph.series.splice(line.originalIndex,0,series),delete line.originalIndex}colorSafe[line.series.name]&&(line.series.color=colorSafe[line.series.name])})),self.graph.update())}),!1)},this.legend&&this.legend.lines.forEach((function(l){self.addHighlightEvents(l)}))},Rickshaw.namespace("Rickshaw.Graph.Behavior.Series.Order"),Rickshaw.Graph.Behavior.Series.Order=function(args){this.graph=args.graph,this.legend=args.legend;var self=this;if(void 0===window.jQuery)throw"couldn't find jQuery at window.jQuery";if(void 0===window.jQuery.ui)throw"couldn't find jQuery UI at window.jQuery.ui";jQuery((function(){jQuery(self.legend.list).sortable({containment:"parent",tolerance:"pointer",update:function(event,ui){var series=[];jQuery(self.legend.list).find("li").each((function(index,item){item.series&&series.push(item.series)}));for(var i=self.graph.series.length-1;i>=0;i--)self.graph.series[i]=series.shift();self.graph.update()}}),jQuery(self.legend.list).disableSelection()})),this.graph.onUpdate((function(){var h=window.getComputedStyle(self.legend.element).height;self.legend.element.style.height=h}))},Rickshaw.namespace("Rickshaw.Graph.Behavior.Series.Toggle"),Rickshaw.Graph.Behavior.Series.Toggle=function(args){this.graph=args.graph,this.legend=args.legend;var self=this;this.addAnchor=function(line){var anchor=document.createElement("a"),label;anchor.innerHTML="&#10004;",anchor.classList.add("action"),line.element.insertBefore(anchor,line.element.firstChild),anchor.onclick=function(e){if(line.series.disabled)line.series.enable(),line.element.classList.remove("disabled");else{if(this.graph.series.filter((function(s){return!s.disabled})).length<=1)return;line.series.disable(),line.element.classList.add("disabled")}self.graph.update()}.bind(this),line.element.getElementsByTagName("span")[0].onclick=function(e){var disableAllOtherLines=line.series.disabled;if(!disableAllOtherLines)for(var i=0;i<self.legend.lines.length;i++){var l=self.legend.lines[i];if(line.series===l.series);else if(!l.series.disabled){disableAllOtherLines=!0;break}}disableAllOtherLines?(line.series.enable(),line.element.classList.remove("disabled"),self.legend.lines.forEach((function(l){line.series===l.series||(l.series.disable(),l.element.classList.add("disabled"))}))):self.legend.lines.forEach((function(l){l.series.enable(),l.element.classList.remove("disabled")})),self.graph.update()}},this.legend&&("undefined"!=typeof jQuery&&jQuery(this.legend.list).sortable&&jQuery(this.legend.list).sortable({start:function(event,ui){ui.item.bind("no.onclick",(function(event){event.preventDefault()}))},stop:function(event,ui){setTimeout((function(){ui.item.unbind("no.onclick")}),250)}}),this.legend.lines.forEach((function(l){self.addAnchor(l)}))),this._addBehavior=function(){this.graph.series.forEach((function(s){s.disable=function(){if(self.graph.series.length<=1)throw"only one series left";s.disabled=!0},s.enable=function(){s.disabled=!1}}))},this._addBehavior(),this.updateBehaviour=function(){this._addBehavior()}},Rickshaw.namespace("Rickshaw.Graph.DragZoom"),Rickshaw.Graph.DragZoom=Rickshaw.Class.create({initialize:function(args){if(!args||!args.graph)throw new Error("Rickshaw.Graph.DragZoom needs a reference to a graph");var defaults={opacity:.5,fill:"steelblue",minimumTimeSelection:60,callback:function(){}};this.graph=args.graph,this.svg=d3.select(this.graph.element).select("svg"),this.svgWidth=parseInt(this.svg.attr("width"),10),this.opacity=args.opacity||defaults.opacity,this.fill=args.fill||defaults.fill,this.minimumTimeSelection=args.minimumTimeSelection||defaults.minimumTimeSelection,this.callback=args.callback||defaults.callback,this.registerMouseEvents()},registerMouseEvents:function(){var self=this,ESCAPE_KEYCODE=27,rectangle,drag={startDt:null,stopDt:null,startPX:null,stopPX:null};function onMouseup(datum,index){drag.stopDt=pointAsDate(d3.event);var windowAfterDrag=[drag.startDt,drag.stopDt].sort(compareNumbers);self.graph.window.xMin=windowAfterDrag[0],self.graph.window.xMax=windowAfterDrag[1];var endTime=self.graph.window.xMax,range=self.graph.window.xMax-self.graph.window.xMin;reset(this),range<self.minimumTimeSelection||isNaN(range)||(self.graph.update(),self.callback({range:range,endTime:endTime}))}function onMousemove(){var offset=drag.stopPX=d3.event.offsetX||d3.event.layerX;if(!(offset>self.svgWidth-1||offset<1)){var limits=[drag.startPX,offset].sort(compareNumbers),selectionWidth=limits[1]-limits[0];if(isNaN(selectionWidth))return reset(this);rectangle.attr("fill",self.fill).attr("x",limits[0]).attr("width",selectionWidth)}}function onMousedown(){var el=d3.select(this);rectangle=el.append("rect").style("opacity",self.opacity).attr("y",0).attr("height","100%"),d3.event.preventDefault?d3.event.preventDefault():d3.event.returnValue=!1,drag.target=d3.event.target,drag.startDt=pointAsDate(d3.event),drag.startPX=d3.event.offsetX||d3.event.layerX,el.on("mousemove",onMousemove),d3.select(document).on("mouseup",onMouseup),d3.select(document).on("keyup",(function(){27===d3.event.keyCode&&reset(this)}))}function reset(el){var s;d3.select(el).on("mousemove",null),d3.select(document).on("mouseup",null),drag={},rectangle.remove()}function compareNumbers(a,b){return a-b}function pointAsDate(e){return Math.floor(self.graph.x.invert(e.offsetX||e.layerX))}this.svg.on("mousedown",onMousedown)}}),Rickshaw.namespace("Rickshaw.Graph.HoverDetail"),Rickshaw.Graph.HoverDetail=Rickshaw.Class.create({initialize:function(args){var graph=this.graph=args.graph;this.xFormatter=args.xFormatter||function(x){return new Date(1e3*x).toUTCString()},this.yFormatter=args.yFormatter||function(y){return null===y?y:y.toFixed(2)};var element=this.element=document.createElement("div");element.className="detail inactive",this.visible=!0,graph.element.appendChild(element),this.lastEvent=null,this._addListeners(),this.onShow=args.onShow,this.onHide=args.onHide,this.onRender=args.onRender,this.formatter=args.formatter||this.formatter},formatter:function(series,x,y,formattedX,formattedY,d){return series.name+":&nbsp;"+formattedY},update:function(e){if((e=e||this.lastEvent)&&(this.lastEvent=e,e.target.nodeName.match(/^(path|svg|rect|circle)$/))){var graph=this.graph,eventX=e.layerX||e.offsetX,eventY=e.layerY||e.offsetY,j=0,points=[],nearestPoint;if(this.graph.series.active().forEach((function(series){var data=this.graph.stackedData[j++];if(data.length){var domainX=graph.x.invert(eventX),domainIndexScale=d3.scale.linear().domain([data[0].x,data.slice(-1)[0].x]).range([0,data.length-1]),approximateIndex=Math.round(domainIndexScale(domainX));approximateIndex==data.length-1&&approximateIndex--;for(var dataIndex=Math.min(approximateIndex||0,data.length-1),i=approximateIndex;i<data.length-1&&(data[i]&&data[i+1]);){if(data[i].x<=domainX&&data[i+1].x>domainX){dataIndex=Math.abs(domainX-data[i].x)<Math.abs(domainX-data[i+1].x)?i:i+1;break}data[i+1].x<=domainX?i++:i--}dataIndex<0&&(dataIndex=0);var value=data[dataIndex],distance=Math.sqrt(Math.pow(Math.abs(graph.x(value.x)-eventX),2)+Math.pow(Math.abs(graph.y(value.y+value.y0)-eventY),2)),xFormatter=series.xFormatter||this.xFormatter,yFormatter=series.yFormatter||this.yFormatter,point={formattedXValue:xFormatter(value.x),formattedYValue:yFormatter(series.scale?series.scale.invert(value.y):value.y),series:series,value:value,distance:distance,order:j,name:series.name};(!nearestPoint||distance<nearestPoint.distance)&&(nearestPoint=point),points.push(point)}}),this),nearestPoint){nearestPoint.active=!0;var domainX=nearestPoint.value.x,formattedXValue=nearestPoint.formattedXValue;this.element.innerHTML="",this.element.style.left=graph.x(domainX)+"px",this.visible&&this.render({points:points,detail:points,mouseX:eventX,mouseY:eventY,formattedXValue:formattedXValue,domainX:domainX})}}},hide:function(){this.visible=!1,this.element.classList.add("inactive"),"function"==typeof this.onHide&&this.onHide()},show:function(){this.visible=!0,this.element.classList.remove("inactive"),"function"==typeof this.onShow&&this.onShow()},render:function(args){var graph=this.graph,points,point=args.points.filter((function(p){return p.active})).shift();if(null!==point.value.y){var formattedXValue=point.formattedXValue,formattedYValue=point.formattedYValue;this.element.innerHTML="",this.element.style.left=graph.x(point.value.x)+"px";var xLabel=document.createElement("div");xLabel.className="x_label",xLabel.innerHTML=formattedXValue,this.element.appendChild(xLabel);var item=document.createElement("div");item.className="item";var series=point.series,actualY=series.scale?series.scale.invert(point.value.y):point.value.y;item.innerHTML=this.formatter(series,point.value.x,actualY,formattedXValue,formattedYValue,point),item.style.top=this.graph.y(point.value.y0+point.value.y)+"px",this.element.appendChild(item);var dot=document.createElement("div");dot.className="dot",dot.style.top=item.style.top,dot.style.borderColor=series.color,this.element.appendChild(dot),point.active&&(item.classList.add("active"),dot.classList.add("active"));var alignables=[xLabel,item];alignables.forEach((function(el){el.classList.add("left")})),this.show();var leftAlignError=this._calcLayoutError(alignables),rightAlignError;if(leftAlignError>0)alignables.forEach((function(el){el.classList.remove("left"),el.classList.add("right")})),this._calcLayoutError(alignables)>leftAlignError&&alignables.forEach((function(el){el.classList.remove("right"),el.classList.add("left")}));"function"==typeof this.onRender&&this.onRender(args)}},_calcLayoutError:function(alignables){var parentRect=this.element.parentNode.getBoundingClientRect(),error=0,alignRight=alignables.forEach((function(el){var rect=el.getBoundingClientRect();rect.width&&(rect.right>parentRect.right&&(error+=rect.right-parentRect.right),rect.left<parentRect.left&&(error+=parentRect.left-rect.left))}));return error},_addListeners:function(){this.mousemoveListener=function(e){this.visible=!0,this.update(e)}.bind(this),this.graph.element.addEventListener("mousemove",this.mousemoveListener,!1),this.graph.onUpdate(function(){this.update()}.bind(this)),this.mouseoutListener=function(e){!e.relatedTarget||e.relatedTarget.compareDocumentPosition(this.graph.element)&Node.DOCUMENT_POSITION_CONTAINS||this.hide()}.bind(this),this.graph.element.addEventListener("mouseout",this.mouseoutListener,!1)},_removeListeners:function(){this.mousemoveListener&&this.graph.element.removeEventListener("mousemove",this.mousemoveListener,!1),this.mouseoutListener&&this.graph.element.removeEventListener("mouseout",this.mouseoutListener,!1)}}),Rickshaw.namespace("Rickshaw.Graph.JSONP"),Rickshaw.Graph.JSONP=Rickshaw.Class.create(Rickshaw.Graph.Ajax,{request:function(){jQuery.ajax({url:this.dataURL,dataType:"jsonp",success:this.success.bind(this),error:this.error.bind(this)})}}),Rickshaw.namespace("Rickshaw.Graph.Legend"),Rickshaw.Graph.Legend=Rickshaw.Class.create({className:"rickshaw_legend",initialize:function(args){this.element=args.element,this.graph=args.graph,this.naturalOrder=args.naturalOrder,this.element.classList.add(this.className),this.list=document.createElement("ul"),this.element.appendChild(this.list),this.render(),this.graph.onUpdate((function(){}))},render:function(){for(var self=this;this.list.firstChild;)this.list.removeChild(this.list.firstChild);this.lines=[];var series=this.graph.series.map((function(s){return s}));this.naturalOrder||(series=series.reverse()),series.forEach((function(s){self.addLine(s)}))},addLine:function(series){var line=document.createElement("li");line.className="line",series.disabled&&(line.className+=" disabled"),series.className&&d3.select(line).classed(series.className,!0);var swatch=document.createElement("div");swatch.className="swatch",swatch.style.backgroundColor=series.color,line.appendChild(swatch);var label=document.createElement("span");label.className="label",label.innerHTML=series.name,line.appendChild(label),this.list.appendChild(line),line.series=series,series.noLegend&&(line.style.display="none");var _line={element:line,series:series};return this.shelving&&(this.shelving.addAnchor(_line),this.shelving.updateBehaviour()),this.highlighter&&this.highlighter.addHighlightEvents(_line),this.lines.push(_line),line}}),Rickshaw.namespace("Rickshaw.Graph.RangeSlider"),Rickshaw.Graph.RangeSlider=Rickshaw.Class.create({initialize:function(args){var $=jQuery,self=this,element=this.element=args.element,graphs=this.graphs=args.graphs;graphs||(graphs=this.graph=args.graph),graphs.constructor!==Array&&(graphs=[graphs]),this.graph=graphs[0],this.slideCallbacks=[],this.build();for(var i=0;i<graphs.length;i++)graphs[i].onUpdate(function(){self.update()}.bind(self)),function(idx){graphs[idx].onConfigure(function(){$(this.element)[0].style.width=graphs[idx].width+"px"}.bind(self))}(i)},build:function(){var domain,element=this.element,$=jQuery,self=this,graphs=this.graphs||this.graph;graphs.constructor!==Array&&(graphs=[graphs]),this.graph=graphs[0],domain=graphs[0].dataDomain(),$((function(){$(element).slider({range:!0,min:domain[0],max:domain[1],values:[domain[0],domain[1]],start:function(event,ui){self.slideStarted({event:event,ui:ui})},stop:function(event,ui){self.slideFinished({event:event,ui:ui})},slide:function(event,ui){if(self.slideShouldUpdate(event,ui)&&!(ui.values[1]<=ui.values[0]))for(var i=0;i<graphs.length;i++)self.processSlideChange({event:event,ui:ui,graph:graphs[i]})}})})),graphs[0].onConfigure(function(){$(this.element)[0].style.width=graphs[0].width+"px"}.bind(this))},update:function(){var element=this.element,graph=this.graph,$=jQuery,values=$(element).slider("option","values"),domain=graph.dataDomain();$(element).slider("option","min",domain[0]),$(element).slider("option","max",domain[1]),null==graph.window.xMin&&(values[0]=domain[0]),null==graph.window.xMax&&(values[1]=domain[1]),$(element).slider("option","values",values)},onSlide:function(callback){this.slideCallbacks.push(callback)},processSlideChange:function(args){var event=args.event,ui=args.ui,graph=args.graph;graph.window.xMin=ui.values[0],graph.window.xMax=ui.values[1],graph.update();var domain=graph.dataDomain();domain[0]==ui.values[0]&&(graph.window.xMin=void 0),domain[1]==ui.values[1]&&(graph.window.xMax=void 0),this.slideCallbacks.forEach((function(callback){callback(graph,graph.window.xMin,graph.window.xMax)}))},slideShouldUpdate:function(){return!0},slideStarted:function(){},slideFinished:function(){}}),Rickshaw.namespace("Rickshaw.Graph.RangeSlider.Preview"),Rickshaw.Graph.RangeSlider.Preview=Rickshaw.Class.create({initialize:function(args){if(!args.element)throw"Rickshaw.Graph.RangeSlider.Preview needs a reference to an element";if(!args.graph&&!args.graphs)throw"Rickshaw.Graph.RangeSlider.Preview needs a reference to an graph or an array of graphs";this.element=args.element,this.element.style.position="relative",this.graphs=args.graph?[args.graph]:args.graphs,this.defaults={height:75,width:400,gripperColor:void 0,frameTopThickness:3,frameHandleThickness:10,frameColor:"#d4d4d4",frameOpacity:1,minimumFrameWidth:0,heightRatio:.2},this.heightRatio=args.heightRatio||this.defaults.heightRatio,this.defaults.gripperColor=d3.rgb(this.defaults.frameColor).darker().toString(),this.configureCallbacks=[],this.slideCallbacks=[],this.previews=[],args.width||(this.widthFromGraph=!0),args.height||(this.heightFromGraph=!0),(this.widthFromGraph||this.heightFromGraph)&&this.graphs[0].onConfigure(function(){this.configure(args),this.render()}.bind(this)),args.width=args.width||this.graphs[0].width||this.defaults.width,args.height=args.height||this.graphs[0].height*this.heightRatio||this.defaults.height,this.configure(args),this.render()},onSlide:function(callback){this.slideCallbacks.push(callback)},onConfigure:function(callback){this.configureCallbacks.push(callback)},configure:function(args){this.config=this.config||{},this.configureCallbacks.forEach((function(callback){callback(args)})),Rickshaw.keys(this.defaults).forEach((function(k){this.config[k]=k in args?args[k]:k in this.config?this.config[k]:this.defaults[k]}),this),("width"in args||"height"in args)&&(this.widthFromGraph&&(this.config.width=this.graphs[0].width),this.heightFromGraph&&(this.config.height=this.graphs[0].height*this.heightRatio,this.previewHeight=this.config.height),this.previews.forEach((function(preview){var height=this.previewHeight/this.graphs.length-2*this.config.frameTopThickness,width=this.config.width-2*this.config.frameHandleThickness;if(preview.setSize({width:width,height:height}),this.svg){var svgHeight=height+2*this.config.frameHandleThickness,svgWidth=width+2*this.config.frameHandleThickness;this.svg.style("width",svgWidth+"px"),this.svg.style("height",svgHeight+"px")}}),this))},render:function(){var self=this;this.svg=d3.select(this.element).selectAll("svg.rickshaw_range_slider_preview").data([null]),this.previewHeight=this.config.height-2*this.config.frameTopThickness,this.previewWidth=this.config.width-2*this.config.frameHandleThickness,this.currentFrame=[0,this.previewWidth];var buildGraph=function(parent,index){var graphArgs=Rickshaw.extend({},parent.config),height=self.previewHeight/self.graphs.length,renderer=parent.renderer.name;Rickshaw.extend(graphArgs,{element:this.appendChild(document.createElement("div")),height:height,width:self.previewWidth,series:parent.series,renderer:renderer});var graph=new Rickshaw.Graph(graphArgs);self.previews.push(graph),parent.onUpdate((function(){graph.render(),self.render()})),parent.onConfigure((function(args){delete args.height,args.width=args.width-2*self.config.frameHandleThickness,graph.configure(args),graph.render()})),graph.render()},graphContainer=d3.select(this.element).selectAll("div.rickshaw_range_slider_preview_container").data(this.graphs),translateCommand="translate("+this.config.frameHandleThickness+"px, "+this.config.frameTopThickness+"px)";graphContainer.enter().append("div").classed("rickshaw_range_slider_preview_container",!0).style("-webkit-transform",translateCommand).style("-moz-transform",translateCommand).style("-ms-transform",translateCommand).style("transform",translateCommand).each(buildGraph),graphContainer.exit().remove();var masterGraph=this.graphs[0],domainScale=d3.scale.linear().domain([0,this.previewWidth]).range(masterGraph.dataDomain()),currentWindow=[masterGraph.window.xMin,masterGraph.window.xMax];this.currentFrame[0]=void 0===currentWindow[0]?0:Math.round(domainScale.invert(currentWindow[0])),this.currentFrame[0]<0&&(this.currentFrame[0]=0),this.currentFrame[1]=void 0===currentWindow[1]?this.previewWidth:domainScale.invert(currentWindow[1]),this.currentFrame[1]-this.currentFrame[0]<self.config.minimumFrameWidth&&(this.currentFrame[1]=(this.currentFrame[0]||0)+self.config.minimumFrameWidth),this.svg.enter().append("svg").classed("rickshaw_range_slider_preview",!0).style("height",this.config.height+"px").style("width",this.config.width+"px").style("position","absolute").style("top",0),this._renderDimming(),this._renderFrame(),this._renderGrippers(),this._renderHandles(),this._renderMiddle(),this._registerMouseEvents()},_renderDimming:function(){var element=this.svg.selectAll("path.dimming").data([null]);element.enter().append("path").attr("fill","white").attr("fill-opacity","0.7").attr("fill-rule","evenodd").classed("dimming",!0);var path="";path+=" M "+this.config.frameHandleThickness+" "+this.config.frameTopThickness,path+=" h "+this.previewWidth,path+=" v "+this.previewHeight,path+=" h "+-this.previewWidth,path+=" z ",path+=" M "+Math.max(this.currentFrame[0],this.config.frameHandleThickness)+" "+this.config.frameTopThickness,path+=" H "+Math.min(this.currentFrame[1]+2*this.config.frameHandleThickness,this.previewWidth+this.config.frameHandleThickness),path+=" v "+this.previewHeight,path+=" H "+Math.max(this.currentFrame[0],this.config.frameHandleThickness),path+=" z",element.attr("d",path)},_renderFrame:function(){var element=this.svg.selectAll("path.frame").data([null]);element.enter().append("path").attr("stroke","white").attr("stroke-width","1px").attr("stroke-linejoin","round").attr("fill",this.config.frameColor).attr("fill-opacity",this.config.frameOpacity).attr("fill-rule","evenodd").classed("frame",!0);var path="";path+=" M "+this.currentFrame[0]+" 0",path+=" H "+(this.currentFrame[1]+2*this.config.frameHandleThickness),path+=" V "+this.config.height,path+=" H "+this.currentFrame[0],path+=" z",path+=" M "+(this.currentFrame[0]+this.config.frameHandleThickness)+" "+this.config.frameTopThickness,path+=" H "+(this.currentFrame[1]+this.config.frameHandleThickness),path+=" v "+this.previewHeight,path+=" H "+(this.currentFrame[0]+this.config.frameHandleThickness),path+=" z",element.attr("d",path)},_renderGrippers:function(){var gripper=this.svg.selectAll("path.gripper").data([null]);gripper.enter().append("path").attr("stroke",this.config.gripperColor).classed("gripper",!0);var path="";[.4,.6].forEach(function(spacing){path+=" M "+Math.round(this.currentFrame[0]+this.config.frameHandleThickness*spacing)+" "+Math.round(.3*this.config.height),path+=" V "+Math.round(.7*this.config.height),path+=" M "+Math.round(this.currentFrame[1]+this.config.frameHandleThickness*(1+spacing))+" "+Math.round(.3*this.config.height),path+=" V "+Math.round(.7*this.config.height)}.bind(this)),gripper.attr("d",path)},_renderHandles:function(){var leftHandle=this.svg.selectAll("rect.left_handle").data([null]);leftHandle.enter().append("rect").attr("width",this.config.frameHandleThickness).style("cursor","ew-resize").style("fill-opacity","0").classed("left_handle",!0),leftHandle.attr("x",this.currentFrame[0]).attr("height",this.config.height);var rightHandle=this.svg.selectAll("rect.right_handle").data([null]);rightHandle.enter().append("rect").attr("width",this.config.frameHandleThickness).style("cursor","ew-resize").style("fill-opacity","0").classed("right_handle",!0),rightHandle.attr("x",this.currentFrame[1]+this.config.frameHandleThickness).attr("height",this.config.height)},_renderMiddle:function(){var middleHandle=this.svg.selectAll("rect.middle_handle").data([null]);middleHandle.enter().append("rect").style("cursor","move").style("fill-opacity","0").classed("middle_handle",!0),middleHandle.attr("width",Math.max(0,this.currentFrame[1]-this.currentFrame[0])).attr("x",this.currentFrame[0]+this.config.frameHandleThickness).attr("height",this.config.height)},_registerMouseEvents:function(){var element=d3.select(this.element),drag={target:null,start:null,stop:null,left:!1,right:!1,rigid:!1},self=this;function onMousemove(datum,index){drag.stop=self._getClientXFromEvent(d3.event,drag);var distanceTraveled=drag.stop-drag.start,frameAfterDrag=self.frameBeforeDrag.slice(0),minimumFrameWidth=self.config.minimumFrameWidth,currentFrameWidth;drag.rigid&&(minimumFrameWidth=self.frameBeforeDrag[1]-self.frameBeforeDrag[0]),drag.left&&(frameAfterDrag[0]=Math.max(frameAfterDrag[0]+distanceTraveled,0)),drag.right&&(frameAfterDrag[1]=Math.min(frameAfterDrag[1]+distanceTraveled,self.previewWidth)),frameAfterDrag[1]-frameAfterDrag[0]<=minimumFrameWidth&&(drag.left&&(frameAfterDrag[0]=frameAfterDrag[1]-minimumFrameWidth),drag.right&&(frameAfterDrag[1]=frameAfterDrag[0]+minimumFrameWidth),frameAfterDrag[0]<=0&&(frameAfterDrag[1]-=frameAfterDrag[0],frameAfterDrag[0]=0),frameAfterDrag[1]>=self.previewWidth&&(frameAfterDrag[0]-=frameAfterDrag[1]-self.previewWidth,frameAfterDrag[1]=self.previewWidth)),self.graphs.forEach((function(graph){var domainScale=d3.scale.linear().interpolate(d3.interpolateNumber).domain([0,self.previewWidth]).range(graph.dataDomain()),windowAfterDrag=[domainScale(frameAfterDrag[0]),domainScale(frameAfterDrag[1])];self.slideCallbacks.forEach((function(callback){callback(graph,windowAfterDrag[0],windowAfterDrag[1])})),0===frameAfterDrag[0]&&(windowAfterDrag[0]=void 0),frameAfterDrag[1]===self.previewWidth&&(windowAfterDrag[1]=void 0),graph.window.xMin=windowAfterDrag[0],graph.window.xMax=windowAfterDrag[1],graph.update()}))}function onMousedown(){drag.target=d3.event.target,drag.start=self._getClientXFromEvent(d3.event,drag),self.frameBeforeDrag=self.currentFrame.slice(),d3.event.preventDefault?d3.event.preventDefault():d3.event.returnValue=!1,d3.select(document).on("mousemove.rickshaw_range_slider_preview",onMousemove),d3.select(document).on("mouseup.rickshaw_range_slider_preview",onMouseup),d3.select(document).on("touchmove.rickshaw_range_slider_preview",onMousemove),d3.select(document).on("touchend.rickshaw_range_slider_preview",onMouseup),d3.select(document).on("touchcancel.rickshaw_range_slider_preview",onMouseup)}function onMousedownLeftHandle(datum,index){drag.left=!0,onMousedown()}function onMousedownRightHandle(datum,index){drag.right=!0,onMousedown()}function onMousedownMiddleHandle(datum,index){drag.left=!0,drag.right=!0,drag.rigid=!0,onMousedown()}function onMouseup(datum,index){d3.select(document).on("mousemove.rickshaw_range_slider_preview",null),d3.select(document).on("mouseup.rickshaw_range_slider_preview",null),d3.select(document).on("touchmove.rickshaw_range_slider_preview",null),d3.select(document).on("touchend.rickshaw_range_slider_preview",null),d3.select(document).on("touchcancel.rickshaw_range_slider_preview",null),delete self.frameBeforeDrag,drag.left=!1,drag.right=!1,drag.rigid=!1}element.select("rect.left_handle").on("mousedown",onMousedownLeftHandle),element.select("rect.right_handle").on("mousedown",onMousedownRightHandle),element.select("rect.middle_handle").on("mousedown",onMousedownMiddleHandle),element.select("rect.left_handle").on("touchstart",onMousedownLeftHandle),element.select("rect.right_handle").on("touchstart",onMousedownRightHandle),element.select("rect.middle_handle").on("touchstart",onMousedownMiddleHandle)},_getClientXFromEvent:function(event,drag){switch(event.type){case"touchstart":case"touchmove":for(var touchList=event.changedTouches,touch=null,touchIndex=0;touchIndex<touchList.length;touchIndex++)if(touchList[touchIndex].target===drag.target){touch=touchList[touchIndex];break}return null!==touch?touch.clientX:void 0;default:return event.clientX}}}),Rickshaw.namespace("Rickshaw.Graph.Renderer"),Rickshaw.Graph.Renderer=Rickshaw.Class.create({initialize:function(args){this.graph=args.graph,this.tension=args.tension||this.tension,this.configure(args)},seriesPathFactory:function(){},seriesStrokeFactory:function(){},defaults:function(){return{tension:.8,strokeWidth:2,unstack:!0,padding:{top:.01,right:0,bottom:.01,left:0},stroke:!1,fill:!1,opacity:1}},domain:function(data){var stackedData=data||this.graph.stackedData||this.graph.stackData();stackedData=stackedData.filter((function(a){return a&&0!==a.length}));var xMin=1/0,xMax=-1/0,yMin=1/0,yMax=-1/0;return stackedData.forEach((function(series){series.forEach((function(d){if(null!=d.y){var y=d.y+d.y0;y<yMin&&(yMin=y),y>yMax&&(yMax=y)}})),series.length&&(series[0].x<xMin&&(xMin=series[0].x),series[series.length-1].x>xMax&&(xMax=series[series.length-1].x))})),xMin-=(xMax-xMin)*this.padding.left,xMax+=(xMax-xMin)*this.padding.right,yMin="auto"===this.graph.min?yMin:this.graph.min||0,yMax=void 0===this.graph.max?yMax:this.graph.max,("auto"===this.graph.min||yMin<0)&&(yMin-=(yMax-yMin)*this.padding.bottom),void 0===this.graph.max&&(yMax+=(yMax-yMin)*this.padding.top),{x:[xMin,xMax],y:[yMin,yMax]}},render:function(args){args=args||{};var graph=this.graph,series=args.series||graph.series,vis=args.vis||graph.vis;vis.selectAll("*").remove();var data=series.filter((function(s){return!s.disabled})).map((function(s){return s.stack})),pathNodes=vis.selectAll("path.path").data(data).enter().append("svg:path").classed("path",!0).attr("d",this.seriesPathFactory());if(this.stroke)var strokeNodes=vis.selectAll("path.stroke").data(data).enter().append("svg:path").classed("stroke",!0).attr("d",this.seriesStrokeFactory());var i=0;series.forEach((function(series){series.disabled||(series.path=pathNodes[0][i],this.stroke&&(series.stroke=strokeNodes[0][i]),this._styleSeries(series),i++)}),this)},_styleSeries:function(series){var fill=this.fill?series.color:"none",stroke=this.stroke?series.color:"none",strokeWidth=series.strokeWidth?series.strokeWidth:this.strokeWidth,opacity=series.opacity?series.opacity:this.opacity;series.path.setAttribute("fill",fill),series.path.setAttribute("stroke",stroke),series.path.setAttribute("stroke-width",strokeWidth),series.path.setAttribute("opacity",opacity),series.className&&d3.select(series.path).classed(series.className,!0),series.className&&this.stroke&&d3.select(series.stroke).classed(series.className,!0)},configure:function(args){args=args||{},Rickshaw.keys(this.defaults()).forEach((function(key){args.hasOwnProperty(key)?"object"==typeof this.defaults()[key]?Rickshaw.keys(this.defaults()[key]).forEach((function(k){this[key][k]=void 0!==args[key][k]?args[key][k]:void 0!==this[key][k]?this[key][k]:this.defaults()[key][k]}),this):this[key]=void 0!==args[key]?args[key]:void 0!==this[key]?this[key]:void 0!==this.graph[key]?this.graph[key]:this.defaults()[key]:this[key]=this[key]||this.graph[key]||this.defaults()[key]}),this)},setStrokeWidth:function(strokeWidth){void 0!==strokeWidth&&(this.strokeWidth=strokeWidth)},setTension:function(tension){void 0!==tension&&(this.tension=tension)}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.Line"),Rickshaw.Graph.Renderer.Line=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"line",defaults:function($super){return Rickshaw.extend($super(),{unstack:!0,fill:!1,stroke:!0})},seriesPathFactory:function(){var graph=this.graph,factory=d3.svg.line().x((function(d){return graph.x(d.x)})).y((function(d){return graph.y(d.y)})).interpolate(this.graph.interpolation).tension(this.tension);return factory.defined&&factory.defined((function(d){return null!==d.y})),factory}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.Stack"),Rickshaw.Graph.Renderer.Stack=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"stack",defaults:function($super){return Rickshaw.extend($super(),{fill:!0,stroke:!1,unstack:!1})},seriesPathFactory:function(){var graph=this.graph,factory=d3.svg.area().x((function(d){return graph.x(d.x)})).y0((function(d){return graph.y(d.y0)})).y1((function(d){return graph.y(d.y+d.y0)})).interpolate(this.graph.interpolation).tension(this.tension);return factory.defined&&factory.defined((function(d){return null!==d.y})),factory}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.Bar"),Rickshaw.Graph.Renderer.Bar=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"bar",defaults:function($super){var defaults=Rickshaw.extend($super(),{gapSize:.05,unstack:!1,opacity:1});return delete defaults.tension,defaults},initialize:function($super,args){args=args||{},this.gapSize=args.gapSize||this.gapSize,$super(args)},domain:function($super){var domain=$super(),frequentInterval=this._frequentInterval(this.graph.stackedData.slice(-1).shift());return domain.x[1]+=Number(frequentInterval.magnitude),domain},barWidth:function(series){var frequentInterval=this._frequentInterval(series.stack),barWidth;return this.graph.x.magnitude(frequentInterval.magnitude)*(1-this.gapSize)},render:function(args){args=args||{};var graph=this.graph,series=args.series||graph.series,vis=args.vis||graph.vis;vis.selectAll("*").remove();var barWidth=this.barWidth(series.active()[0]),barXOffset=0,activeSeriesCount=series.filter((function(s){return!s.disabled})).length,seriesBarWidth=this.unstack?barWidth/activeSeriesCount:barWidth,transform=function(d){var matrix;return"matrix("+[1,0,0,d.y<0?-1:1,0,d.y<0?2*graph.y.magnitude(Math.abs(d.y)):0].join(",")+")"};series.forEach((function(series){if(!series.disabled){var barWidth=this.barWidth(series),nodes=vis.selectAll("path").data(series.stack.filter((function(d){return null!==d.y}))).enter().append("svg:rect").attr("x",(function(d){return graph.x(d.x)+barXOffset})).attr("y",(function(d){return graph.y(d.y0+Math.abs(d.y))*(d.y<0?-1:1)})).attr("width",seriesBarWidth).attr("height",(function(d){return graph.y.magnitude(Math.abs(d.y))})).attr("opacity",series.opacity).attr("transform",transform);Array.prototype.forEach.call(nodes[0],(function(n){n.setAttribute("fill",series.color)})),this.unstack&&(barXOffset+=seriesBarWidth)}}),this)},_frequentInterval:function(data){for(var intervalCounts={},i=0;i<data.length-1;i++){var interval=data[i+1].x-data[i].x;intervalCounts[interval]=intervalCounts[interval]||0,intervalCounts[interval]++}var frequentInterval={count:0,magnitude:1},keysSorted;return Rickshaw.keys(intervalCounts).sort((function asc(a,b){return Number(a)-Number(b)})).forEach((function(i){frequentInterval.count<intervalCounts[i]&&(frequentInterval={count:intervalCounts[i],magnitude:i})})),frequentInterval}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.Area"),Rickshaw.Graph.Renderer.Area=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"area",defaults:function($super){return Rickshaw.extend($super(),{unstack:!1,fill:!1,stroke:!1})},seriesPathFactory:function(){var graph=this.graph,factory=d3.svg.area().x((function(d){return graph.x(d.x)})).y0((function(d){return graph.y(d.y0)})).y1((function(d){return graph.y(d.y+d.y0)})).interpolate(graph.interpolation).tension(this.tension);return factory.defined&&factory.defined((function(d){return null!==d.y})),factory},seriesStrokeFactory:function(){var graph=this.graph,factory=d3.svg.line().x((function(d){return graph.x(d.x)})).y((function(d){return graph.y(d.y+d.y0)})).interpolate(graph.interpolation).tension(this.tension);return factory.defined&&factory.defined((function(d){return null!==d.y})),factory},render:function(args){args=args||{};var graph=this.graph,series=args.series||graph.series,vis=args.vis||graph.vis;vis.selectAll("*").remove();var method=this.unstack?"append":"insert",data=series.filter((function(s){return!s.disabled})).map((function(s){return s.stack})),nodes=vis.selectAll("path").data(data).enter()[method]("svg:g","g");nodes.append("svg:path").attr("d",this.seriesPathFactory()).attr("class","area"),this.stroke&&nodes.append("svg:path").attr("d",this.seriesStrokeFactory()).attr("class","line");var i=0;series.forEach((function(series){series.disabled||(series.path=nodes[0][i++],this._styleSeries(series))}),this)},_styleSeries:function(series){series.path&&(d3.select(series.path).select(".area").attr("fill",series.color),this.stroke&&d3.select(series.path).select(".line").attr("fill","none").attr("stroke",series.stroke||d3.interpolateRgb(series.color,"black")(.125)).attr("stroke-width",this.strokeWidth),series.className&&series.path.setAttribute("class",series.className))}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.ScatterPlot"),Rickshaw.Graph.Renderer.ScatterPlot=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"scatterplot",defaults:function($super){return Rickshaw.extend($super(),{unstack:!0,fill:!0,stroke:!1,padding:{top:.01,right:.01,bottom:.01,left:.01},dotSize:4})},initialize:function($super,args){$super(args)},render:function(args){args=args||{};var graph=this.graph,series=args.series||graph.series,vis=args.vis||graph.vis,dotSize=this.dotSize;vis.selectAll("*").remove(),series.forEach((function(series){if(!series.disabled){var opacity=series.opacity?series.opacity:1,nodes=vis.selectAll("path").data(series.stack.filter((function(d){return null!==d.y}))).enter().append("svg:circle").attr("cx",(function(d){return graph.x(d.x)})).attr("cy",(function(d){return graph.y(d.y)})).attr("r",(function(d){return"r"in d?d.r:dotSize})).attr("opacity",(function(d){return"opacity"in d?d.opacity:opacity}));series.className&&nodes.classed(series.className,!0),Array.prototype.forEach.call(nodes[0],(function(n){n.setAttribute("fill",series.color)}))}}),this)}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.Multi"),Rickshaw.Graph.Renderer.Multi=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"multi",initialize:function($super,args){$super(args)},defaults:function($super){return Rickshaw.extend($super(),{unstack:!0,fill:!1,stroke:!0})},configure:function($super,args){args=args||{},this.config=args,$super(args)},domain:function($super){this.graph.stackData();var domains=[],groups=this._groups(),xMin,xMax,yMin,yMax;return this._stack(groups),groups.forEach((function(group){var data=group.series.filter((function(s){return!s.disabled})).map((function(s){return s.stack}));if(data.length){var domain=null;domain=group.renderer&&group.renderer.domain?group.renderer.domain(data):$super(data),domains.push(domain)}})),{x:[d3.min(domains.map((function(d){return d.x[0]}))),d3.max(domains.map((function(d){return d.x[1]})))],y:[d3.min(domains.map((function(d){return d.y[0]}))),d3.max(domains.map((function(d){return d.y[1]})))]}},_groups:function(){var graph=this.graph,renderGroups={};graph.series.forEach((function(series){if(!series.disabled){if(!renderGroups[series.renderer]){var ns="http://www.w3.org/2000/svg",vis=document.createElementNS(ns,"g");graph.vis[0][0].appendChild(vis);var renderer=graph._renderers[series.renderer],config={},defaults;[this.defaults(),renderer.defaults(),this.config,this.graph].forEach((function(d){Rickshaw.extend(config,d)})),renderer.configure(config),renderGroups[series.renderer]={renderer:renderer,series:[],vis:d3.select(vis)}}renderGroups[series.renderer].series.push(series)}}),this);var groups=[];return Object.keys(renderGroups).forEach((function(key){var group=renderGroups[key];groups.push(group)})),groups},_stack:function(groups){return groups.forEach((function(group){var series=group.series.filter((function(series){return!series.disabled})),data=series.map((function(series){return series.stack}));if(!group.renderer.unstack){var layout=d3.layout.stack(),stackedData=Rickshaw.clone(layout(data));series.forEach((function(series,index){series._stack=Rickshaw.clone(stackedData[index])}))}}),this),groups},render:function(){this.graph.series.forEach((function(series){if(!series.renderer)throw new Error("Each series needs a renderer for graph 'multi' renderer")})),this.graph.vis.selectAll("*").remove();var groups=this._groups();(groups=this._stack(groups)).forEach((function(group){var series=group.series.filter((function(series){return!series.disabled}));series.active=function(){return series},group.renderer.render({series:series,vis:group.vis}),series.forEach((function(s){s.stack=s._stack||s.stack||s.data}))}))}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.LinePlot"),Rickshaw.Graph.Renderer.LinePlot=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"lineplot",defaults:function($super){return Rickshaw.extend($super(),{unstack:!0,fill:!1,stroke:!0,padding:{top:.01,right:.01,bottom:.01,left:.01},dotSize:3,strokeWidth:2})},seriesPathFactory:function(){var graph=this.graph,factory=d3.svg.line().x((function(d){return graph.x(d.x)})).y((function(d){return graph.y(d.y)})).interpolate(this.graph.interpolation).tension(this.tension);return factory.defined&&factory.defined((function(d){return null!==d.y})),factory},render:function(args){args=args||{};var graph=this.graph,series=args.series||graph.series,vis=args.vis||graph.vis,dotSize=this.dotSize;vis.selectAll("*").remove();var data=series.filter((function(s){return!s.disabled})).map((function(s){return s.stack})),nodes=vis.selectAll("path").data(data).enter().append("svg:path").attr("d",this.seriesPathFactory()),i=0;series.forEach((function(series){series.disabled||(series.path=nodes[0][i++],this._styleSeries(series))}),this),series.forEach((function(series){if(!series.disabled){var nodes=vis.selectAll("x").data(series.stack.filter((function(d){return null!==d.y}))).enter().append("svg:circle").attr("cx",(function(d){return graph.x(d.x)})).attr("cy",(function(d){return graph.y(d.y)})).attr("r",(function(d){return"r"in d?d.r:dotSize}));Array.prototype.forEach.call(nodes[0],function(n){n&&(n.setAttribute("data-color",series.color),n.setAttribute("fill","white"),n.setAttribute("stroke",series.color),n.setAttribute("stroke-width",this.strokeWidth))}.bind(this))}}),this)}}),Rickshaw.namespace("Rickshaw.Graph.Smoother"),Rickshaw.Graph.Smoother=Rickshaw.Class.create({initialize:function(args){this.graph=args.graph,this.element=args.element,this.aggregationScale=1,this.build(),this.graph.stackData.hooks.data.push({name:"smoother",orderPosition:50,f:this.transformer.bind(this)})},build:function(){var self=this,$=jQuery;this.element&&$((function(){$(self.element).slider({min:1,max:100,slide:function(event,ui){self.setScale(ui.value)}})}))},setScale:function(scale){if(scale<1)throw"scale out of range: "+scale;this.aggregationScale=scale,this.graph.update()},transformer:function(data){if(1==this.aggregationScale)return data;var aggregatedData=[];return data.forEach(function(seriesData){for(var aggregatedSeriesData=[];seriesData.length;){var avgX=0,avgY=0,slice=seriesData.splice(0,this.aggregationScale);slice.forEach((function(d){avgX+=d.x/slice.length,avgY+=d.y/slice.length})),aggregatedSeriesData.push({x:avgX,y:avgY})}aggregatedData.push(aggregatedSeriesData)}.bind(this)),aggregatedData}}),Rickshaw.namespace("Rickshaw.Graph.Socketio"),Rickshaw.Graph.Socketio=Rickshaw.Class.create(Rickshaw.Graph.Ajax,{request:function(){var socket=io.connect(this.dataURL),self=this;socket.on("rickshaw",(function(data){self.success(data)}))}}),Rickshaw.namespace("Rickshaw.Series"),Rickshaw.Series=Rickshaw.Class.create(Array,{initialize:function(data,palette,options){options=options||{},this.palette=new Rickshaw.Color.Palette(palette),this.timeBase=void 0===options.timeBase?Math.floor((new Date).getTime()/1e3):options.timeBase;var timeInterval=void 0===options.timeInterval?1e3:options.timeInterval;this.setTimeInterval(timeInterval),data&&"object"==typeof data&&Array.isArray(data)&&data.forEach((function(item){this.addItem(item)}),this)},addItem:function(item){if(void 0===item.name)throw"addItem() needs a name";item.color=item.color||this.palette.color(item.name),item.data=item.data||[],0===item.data.length&&this.length&&this.getIndex()>0?this[0].data.forEach((function(plot){item.data.push({x:plot.x,y:0})})):0===item.data.length&&item.data.push({x:this.timeBase-(this.timeInterval||0),y:0}),this.push(item),this.legend&&this.legend.addLine(this.itemByName(item.name))},addData:function(data,x){var index=this.getIndex();Rickshaw.keys(data).forEach((function(name){this.itemByName(name)||this.addItem({name:name})}),this),this.forEach((function(item){item.data.push({x:x||(index*this.timeInterval||1)+this.timeBase,y:data[item.name]||0})}),this)},getIndex:function(){return this[0]&&this[0].data&&this[0].data.length?this[0].data.length:0},itemByName:function(name){for(var i=0;i<this.length;i++)if(this[i].name==name)return this[i]},setTimeInterval:function(iv){this.timeInterval=iv/1e3},setTimeBase:function(t){this.timeBase=t},dump:function(){var data={timeBase:this.timeBase,timeInterval:this.timeInterval,items:[]};return this.forEach((function(item){var newItem={color:item.color,name:item.name,data:[]};item.data.forEach((function(plot){newItem.data.push({x:plot.x,y:plot.y})})),data.items.push(newItem)})),data},load:function(data){data.timeInterval&&(this.timeInterval=data.timeInterval),data.timeBase&&(this.timeBase=data.timeBase),data.items&&data.items.forEach((function(item){this.push(item),this.legend&&this.legend.addLine(this.itemByName(item.name))}),this)}}),Rickshaw.Series.zeroFill=function(series){Rickshaw.Series.fill(series,0)},Rickshaw.Series.fill=function(series,fill){for(var x,i=0,data=series.map((function(s){return s.data}));i<Math.max.apply(null,data.map((function(d){return d.length})));)x=Math.min.apply(null,data.filter((function(d){return d[i]})).map((function(d){return d[i].x}))),data.forEach((function(d){d[i]&&d[i].x==x||d.splice(i,0,{x:x,y:fill})})),i++},Rickshaw.namespace("Rickshaw.Series.FixedDuration"),Rickshaw.Series.FixedDuration=Rickshaw.Class.create(Rickshaw.Series,{initialize:function(data,palette,options){if(void 0===(options=options||{}).timeInterval)throw new Error("FixedDuration series requires timeInterval");if(void 0===options.maxDataPoints)throw new Error("FixedDuration series requires maxDataPoints");if(this.palette=new Rickshaw.Color.Palette(palette),this.timeBase=void 0===options.timeBase?Math.floor((new Date).getTime()/1e3):options.timeBase,this.setTimeInterval(options.timeInterval),this[0]&&this[0].data&&this[0].data.length?(this.currentSize=this[0].data.length,this.currentIndex=this[0].data.length):(this.currentSize=0,this.currentIndex=0),this.maxDataPoints=options.maxDataPoints,data&&"object"==typeof data&&Array.isArray(data)&&(data.forEach((function(item){this.addItem(item)}),this),this.currentSize+=1,this.currentIndex+=1),this.timeBase-=(this.maxDataPoints-this.currentSize)*this.timeInterval,void 0!==this.maxDataPoints&&this.currentSize<this.maxDataPoints)for(var i=this.maxDataPoints-this.currentSize-1;i>1;i--)this.currentSize+=1,this.currentIndex+=1,this.forEach((function(item){item.data.unshift({x:((i-1)*this.timeInterval||1)+this.timeBase,y:0,i:i})}),this)},addData:function($super,data,x){if($super(data,x),this.currentSize+=1,this.currentIndex+=1,void 0!==this.maxDataPoints)for(;this.currentSize>this.maxDataPoints;)this.dropData()},dropData:function(){this.forEach((function(item){item.data.splice(0,1)})),this.currentSize-=1},getIndex:function(){return this.currentIndex}}),Rickshaw})),function(name,definition,context){"undefined"!=typeof module&&module.exports?module.exports=definition():"function"==typeof context.define&&context.define.amd?define(definition):context.li=definition()}("li",(function(){var relsRegExp=/^;\s*([^"=]+)=(?:"([^"]+)"|([^";,]+)(?:[;,]|$))/,keysRegExp=/([^\s]+)/g,sourceRegExp=/^<([^>]*)>/,delimiterRegExp=/^\s*,\s*/;return{parse:function(linksHeader,options){for(var match,source,rels,extended=options&&options.extended||!1,links=[];linksHeader&&(linksHeader=linksHeader.trim(),source=sourceRegExp.exec(linksHeader));){for(var current={link:source[1]},nextDelimiter=(linksHeader=linksHeader.slice(source[0].length)).match(delimiterRegExp);linksHeader&&(!nextDelimiter||nextDelimiter.index>0)&&(match=relsRegExp.exec(linksHeader));)nextDelimiter=(linksHeader=linksHeader.slice(match[0].length)).match(delimiterRegExp),"rel"===match[1]||"rev"===match[1]?(rels=(match[2]||match[3]).split(/\s+/),current[match[1]]=rels):current[match[1]]=match[2]||match[3];links.push(current),linksHeader=linksHeader.replace(delimiterRegExp,"")}return extended?links:links.reduce((function(result,currentLink){return currentLink.rel&&currentLink.rel.forEach((function(rel){result[rel]=currentLink.link})),result}),{})},stringify:function(headerObject,callback){var result="";for(var x in headerObject)result+="<"+headerObject[x]+'>; rel="'+x+'", ';return result=result.substring(0,result.length-2)}}}),this),function(){"use strict";angular.module("app",["angular-filters","angular-loading-bar","angular-locker","angular-intercom","angular-rickshaw","angular-stripe","cfp.hotkeys","checklist-model","debounce","ngAnimate","restangular","satellizer","ui.bootstrap","ui.gravatar","ui.router","xeditable","dialogs.main","dialogs.default-translations","exceptionless","exceptionless.analytics","exceptionless.auth","exceptionless.auto-active","exceptionless.billing","exceptionless.date-filter","exceptionless.event","exceptionless.events","exceptionless.filter","exceptionless.intercom","exceptionless.loading-bar","exceptionless.notification","exceptionless.organization","exceptionless.organization-notifications","exceptionless.project","exceptionless.project-filter","exceptionless.rate-limit","exceptionless.refresh","exceptionless.release-notification","exceptionless.search-filter","exceptionless.signalr","exceptionless.stack","exceptionless.stacks","exceptionless.state","exceptionless.system-notification","exceptionless.ui-nav","exceptionless.ui-scroll","exceptionless.ui-shift","exceptionless.ui-toggle-class","exceptionless.user","app.account","app.admin","app.auth","app.config","app.event","app.organization","app.payment","app.project","app.session","app.stack","app.status"]).config(["$translateProvider","$compileProvider","$httpProvider","$locationProvider","$stateProvider","$uiViewScrollProvider","$urlRouterProvider","dialogsProvider","gravatarServiceProvider","RestangularProvider","BASE_URL","EXCEPTIONLESS_API_KEY","$ExceptionlessClient","stripeProvider","STRIPE_PUBLISHABLE_KEY","USE_HTML5_MODE",function($translateProvider,$compileProvider,$httpProvider,$locationProvider,$stateProvider,$uiViewScrollProvider,$urlRouterProvider,dialogsProvider,gravatarServiceProvider,RestangularProvider,BASE_URL,EXCEPTIONLESS_API_KEY,$ExceptionlessClient,stripeProvider,STRIPE_PUBLISHABLE_KEY,USE_HTML5_MODE){function setRouteFilter(filterService,organizationId,projectId,type){filterService.setOrganizationId(organizationId,!0),filterService.setProjectId(projectId,!0),filterService.setEventType(type,!0)}if($translateProvider.translations("zh-cn",{Admin:"管理员",Dashboard:"概览视图","Change Plan":"变更计划","Change Password":"修改密码",Logout:"退出",Exceptions:"异常情况","Log Messages":"日志消息","Broken Links":"失效链接","Feature Usages":"特性使用",Count:"事件数",All:"全部日志","All Events":"全部事件",Reports:"报表反馈","Exception Events":"例外时间表","Message Events":"消息时间表","Broken Links Events":"链接断开时间轴","Feature Events":"功能时间表","Event Events":"活动时间表","Most Frequent Exceptions":"高频异常","Most Frequent Messages":"高频消息","Most Frequent Links":"高频死链","Most Frequent Features":"高频特性","Most Frequent":"高频日志","Most Recent":"最新日志","Most Users":"用户最多","New Exception":"最新异常","New LogMessage":"最新消息","New BrokenLink":"最新死链","New FeatureUsage":"最新特性","New Event":"最新日志",Sessions:"会话量","Project Manager":"项目管理","Organization Manager":"组织管理","My Account":"我的帐户",Documentation:"说明文档",Support:"在线支持","New Stacks":"最新堆栈数",Unique:"堆栈数","Events Per Hour":"事件数每小时","Per Hour":"事件数每小时",History:"历史","Session Events":"会话时间表",Session:"会话","Session End":"会话结束","Session Heartbeat":"会话心跳",Feature:"特性","Go To Documentation":"前往说明文档","Focus Search Bar":"激活搜索框","Go To My Account":"前往我的账户","Go To Notifications":"前往通知视图","Go To Organizations":"前往组织视图","Go To Projects":"前往项目视图","Go To GitHub project":"前往 GitHub 项目","Go to public Discord channel":"前往 Discord 公共频道","Chat with Support":"联系客服","Your user account was deleted. Please create a new account.":"您的账号已经被删除。请创建新账号。","Billing is currently disabled.":"当前系统不支持在线支付。","Page Not Found":"未找到页面","We're sorry but the page was not found on this site.":"很抱歉，在此网站中没有找到您要访问的页面。","Service Status":"服务状态","We're sorry but the website is currently undergoing maintenance.":"很抱歉，此网站目前正在进行维护。","You'll be automatically redirected when the maintenance is completed.":"在维护完成后，系统将自动重定向到您要访问的页面。","Please enter a Reference Link":"请输入参考链接","Reference Link":"参考链接","Please enter a valid URL":"请输入有效网址","Reference Link is required.":"参考链接是必需的。","Save Reference Link":"保存参考链接",UserRatio:"用户比例",First:"首次",Last:"末次",Stack:"堆栈",Options:"选项",Hide:"隐藏","Future Occurrences Are Critical":"此堆栈后续的事件标记为关键事件","Disable Notifications":"禁止通知","Promote To External":"外部推送","Add Reference Link":"新增参考链接",Title:"标题",Project:"项目","Date Fixed":"修复日期",Description:"说明",Tags:"标签","Stacking Information":"堆栈信息",ExceptionType:"异常类型",Method:"方法","Chart Options":"图表选项","Show Average Value":"显示平均值","Average Value":"平均值","Show Value Sum":"显示合计值","Value Sum":"合计值","Recent Occurrences":"最近发生","Reference Links":"参考链接","Mark Fixed":"标记已修复","Mark Not Fixed":"标记未修复","No stacks were found with the current filter.":"未找到满足当前筛选条件的堆栈。","No stacks were found.":"尚未发现任何堆栈。","Future Stack Occurrences are Not Critical":"此堆栈后续的事件为非关键事件","Future Stack Occurrences are Critical":"此堆栈后续的事件为关键事件","Enable Stack Notifications":"启用堆栈通知","Disable Stack Notifications":"禁用堆栈通知","Promote Stack To External":"推送此堆栈到外部系统","Add Stack Reference Link":"新增堆栈参考链接","Delete Stack":"删除堆栈","An error occurred while adding the reference link.":"在新增参考链接的过程中发生了错误。","Successfully promoted stack!":"成功将堆栈推送到外部系统！","Manage Integrations":"管理外部整合","An error occurred while promoting this stack.":"在将堆栈推送至外部系统的过程中发生了错误。","Are you sure you want to delete this reference link?":"您确认要删除此参考链接？","An error occurred while deleting the external reference link.":"在删除外部参考链接的过程中发生了错误。","Are you sure you want to delete this stack (includes all stack events)?":"您确认要删除此堆栈及其所有日志吗？","Successfully queued the stack for deletion.":"已将此堆栈放入队列等待删除。","An error occurred while deleting this stack.":"在删除堆栈的过程中发生了错误。","The average of all event values":"所有事件的平均值","The sum of all event values":"所有事件值的总和","Hide this stack from reports and mutes occurrence notifications":"在报表和事件通知中隐藏此堆栈","All future occurrences will be marked as critical":"后续的事件将会被标记为关键事件","Stop sending occurrence notifications for this stack":"停止发送此堆栈的通知","Used to promote stacks to external systems.":"用于将堆栈推送到外部系统。","Add a reference link to an external resource.":"为外部资源增加引用链接。","Delete this stack":"删除堆栈",Summary:"概要",Created:"已创建",Duration:"持续时间","Loading...":"加载中...",Users:"用户量","Average Duration":"平均持续时间","Sessions and Users":"用户会话","View Active":"查看活动会话","Recent Sessions":"近期会话","No sessions were found with the current filter.":"未找到满足当前筛选条件的会话。","No sessions were found.":"尚未发现任何会话。","Occurred On":"发生时间",ended:"结束于",Reference:"参考",Level:"日志等级","Event Type":"事件类型","Error Type":"错误类型",Source:"来源",Value:"值",Message:"消息",Version:"版本",Geo:"地理位置",URL:"请求URL","User Info":"用户信息","User Email":"用户邮箱","User Identity":"用户标识","User Name":"用户名","User Description":"用户说明","Stack Trace":"堆栈跟踪","Machine Name":"计算机名","IP Address":"IP地址","Processor Count":"处理器核数","Total Memory":"总内存","Available Memory":"可用内存","Process Memory":"已用内存","OS Name":"操作系统","OS Version":"系统版本",Architecture:"系统架构","Runtime Version":"运行时版本","Process ID":"进程标识","Process Name":"进程名称","Command Line":"命令行","Additional Data":"附加数据",Code:"错误编码","Submission Method":"提交方法","Loaded Modules":"已加载模块","Module Name":"模块名称","HTTP Method":"HTTP请求方法",Referrer:"访问来源","Client IP":"客户端IP","User Agent":"User Agent",Device:"设备",Browser:"浏览器","Browser OS":"浏览器系统","Post Data":"提交数据","Session Events":"会话事件","Event Occurrence":"发生事件","Go To Stack":"前往堆栈","Previous Occurrence":"上个事件","Next Occurrence":"下个事件","Toggle View":"切换视图","Promote to Tab":"提升为标签","Demote Tab":"降级标签",References:"参考",Overview:"概要",Exception:"异常",Environment:"环境","Extended Data":"扩展数据",Request:"请求","to enable sessions and other premium features!":"以启用会话及其他高级特性！","is attempting to use a premium feature.":"正在尝试使用高级特性。","Copy Stack Trace to Clipboard":"将堆栈跟踪复制到剪贴板","Copy Event JSON to Clipboard":"将事件以JSON格式复制到剪贴板","Copy to Clipboard":"复制到剪贴板","Cookie Values":"Cookie值","No events were found with the current filter.":"未找到满足当前筛选条件的日志。","No events were found.":"尚未发现任何日志。","An error occurred promoting tab.":"提升标签的过程中发生了错误。",Cannot_Find_Event:'未找到事件"{{eventId}}"。',Online:"在线",Seconds:"{{duration}}秒",User:"用户","Bulk Action":"批量操作","Mark Hidden":"标记隐藏","Mark Not Hidden":"标记未隐藏","Sort Descending":"降序排序","Sort Ascending":"升序排序",Date:"日期","Please select one or more events":"请至少选择一条日志","Successfully queued the events for deletion.":"已将日志放入队列等待删除。","An error occurred while deleting the events.":"在删除日志的过程中发生了错误。","Are you sure you want to delete these events?":"您确认要删除这些日志吗？","DELETE EVENTS":"删除日志","Are you sure you want to delete these stacks (includes all stack events)?":"您确认要删除这些堆栈及其所有日志吗？","DELETE STACKS":"删除堆栈","An error occurred while deleting the stacks.":"在删除堆栈的过程中发生了错误。","Successfully marked the stacks as fixed.":"成功将堆栈标记为固定。","An error occurred while marking stacks as fixed.":"在将堆栈标记为已修复的过程中发生了错误。","Successfully queued the stacks to be marked as hidden.":"已将堆栈放入队列等待被标记为隐藏。","An error occurred while marking stacks as hidden.":"在将堆栈标记为隐藏的过程中发生了错误。","Successfully queued the stacks for deletion.":"已将堆栈放入队列等待删除。","Please select one or more stacks":"请至少选择一个堆栈","Marks the stack as fixed. This will also prevent error occurrences from being displayed in the dashboard.":"标记此堆栈为已修复。此操作可以避免错误堆栈继续在概览视图显示。","Optional:":"可选：","Please enter the version in which the stack has been fixed. Any submitted occurrences with a lower version will not cause a regression.":"请输入此堆栈修复的版本号。任何低于此版本的应用程序所提交的可归类到此堆栈的日志不会被视为回归日志。","Versioning Documentation":"版本化说明文档","Optional Version (Example: 1.2.3)":"可选版本（例如：1.2.3）","Invalid version.":"无效的版本号。","Mark this stack as open":"将此堆栈标记为打开","Mark this stack as fixed":"标记此堆栈为已修复","Marking Not Fixed":"正在标记未修复","Marking Fixed":"正在标记已修复",Stack_Deleted:'堆栈"{{stackId}}"已被删除。',Cannot_Find_Stack:'无法找到堆栈"{{stackId}}"。',Error_Load_Stack:'在加载堆栈"{{stackId}}"的过程中发生了错误。',"An error occurred while marking this stack as open.":"将该堆栈标记为打开时发生错误。","An error occurred while marking this stack as discarded.":"将该堆栈标记为已丢弃时发生错误。","Are you sure you want to all current stack events and discard any future stack events?":"您确定要所有当前的堆栈事件并丢弃以后的所有堆栈事件吗？","All future occurrences will be discarded and will not count against your event limit.":"将来所有出现的事件都将被丢弃，并且不会计入您的事件限制。","An error occurred while marking future occurrences as not critical.":"在将后续事件标记为非关键事件的过程中发生了错误。","An error occurred while marking future occurrences as critical.":"在将后续事件标记为关键事件的过程中发生了错误。","Successfully marked the stack as open.":"成功将堆栈标记为打开。","Successfully marked the stack as fixed.":"成功将堆栈标记为固定。","Successfully marked the stacks as ignored.":"成功将堆栈标记为已忽略。","An error occurred while marking this stack as fixed.":"在将队列标记为已修复的过程中发生了错误。","An error occurred while marking this stack as snoozed.":"将此堆栈标记为已延后时发生错误。","An error occurred while marking this stack as ignored.":"将该堆栈标记为已忽略时发生错误。","An error occurred while marking stacks as ignored.":"将堆栈标记为忽略时发生错误。","Successfully marked the stacks as open.":"成功将堆栈标记为打开。","An error occurred while marking stacks as open.":"将堆栈标记为打开时发生错误。","Successfully marked the stacks as discarded.":"成功将堆栈标记为已丢弃。","An error occurred while marking stacks as discarded.":"将堆栈标记为已丢弃时发生错误。","Mark Open":"标记堆栈打开","Mark Stack Open":"标记堆栈打开","Mark Stack Discarded":"标记堆栈已舍弃","Mark Stack Fixed":"标记为已修复",Fixed_With_Version:"在 {{fixed_in_version}} 版本中修复",Opening:"开场",Discard:"丢弃",open:"打开",discarded:"舍弃",fixed:"已修复",regressed:"回归",snoozed:"延后",ignored:"被忽略","6 Hours":"6个小时","1 Day":"1天","1 Week":"1周","1 Month":"1个月","All Projects":"所有项目","Loading Organizations...":"加载组织中...","Loading Projects...":"加载项目中...","Add New Project":"创建项目","Last Hour":"最近 1 小时","Last 24 Hours":"最近 1 天","Last Week":"最近 7 天","Last 30 Days":"最近 30 天","All Time":"全部时间",Custom:"自定义","Select Date Range":"选择日期范围",DayFormat:"D日",DateFormat:"YYYY年M月D日",DateTimeFormat:"YYYY年M月D日 H:mm:ss",Filter:"过滤条件","Search Documentation":"说明文档","My Projects":"我的项目","Project Information":"项目信息","Organization Name":"组织名称","New Organization Name":"新组织名称","Project Name":"项目名称","New Project Name":"新项目名称","Add Project":"创建项目","Manage Project":"管理项目",General:"常规","API Keys":"API 密钥",Settings:"设置","Client Configuration":"客户端配置",Integrations:"外部整合","Download & Configure Client":"下载并配置客户端","Manage Organization":"管理组织","Manage Notification Settings":"管理通知设置","Reset Project Data":"重置项目数据","Delete Project":"删除项目","API Key":"API 密钥",Enable:"启用",Disable:"禁用","Are you sure you want to enable the API key?":"您确定要启用API密钥吗？","ENABLE API KEY":"启用API密钥","An error occurred while enabling the API key.":"启用API密钥时发生错误。","Are you sure you want to disable the API key?":"您确定要禁用API密钥吗？","DISABLE API KEY":"禁用API密钥","An error occurred while disabling the API key.":"禁用API密钥时发生错误。",Notes:"备注","Payment Number":"付款编号",Actions:"操作",Status:"状态","This project does not have an API Key.":"此项目还没有 API 秘钥。","New API Key":"创建 API 密钥","New Client Configuration":"添加客户端配置","Event Types":"事件类型","Add Web Hook":"新增 Web Hook","Data Exclusions":"数据排除","User Namespaces":"用户命名空间","Error Stacking":"错误堆栈","Common Methods":"常用方法","Spam Detection":"垃圾邮件检测","Please enter a configuration setting":"请输入客户端配置",Name:"名称",Organization:"组织",Stacks:"堆栈数",Events:"事件数","View Organization":"查看组织",Key:"键","Project Name is required.":"请填写项目名称","A project with this name already exists.":"已经存在相同名称的项目。","This project does not contain any custom configuration settings.":"此项目不包含任何自定义配置参数。",NOTICE_CONFIGURATION:'此页面中的<a href="https://exceptionless.com/docs/project-settings/#client-configuration" target="_blank">配置参数</a>将会被实时发送到 Exceptionless 客户端。这种方法可以免部署而动态改变您的应用程序的工作方式。',"No projects were found with the current filter.":"未找到满足当前筛选条件的项目。","No projects were found.":"尚未发现任何项目。",Notice_Data_Exclusions:'使用逗号分隔的字段名称列表用于移除任何错误报告中的相关数据（例如扩展数据属性、表单字段、Cookie 和查询参数）。 您也可以设置一个<a href="https://exceptionless.com/docs/security/" target="_blank" title="数据排除说明文档">带通配符(<strong>*</strong>)的字段名称</a>匹配前缀、后缀或者包含，以提高安全性。',"Automatically remove user identifiable information from events (e.g., Machine Name, User Information, IP Addresses and more...).":"自动从事件中删除用户可识别信息（例如，机器名称，用户信息，IP地址等等",Notice_Error_Stacking:"使用逗号分隔的命名空间列表，这些命名空间应该是您的应用程序代码中所定义的。在此值填写之后，只有在列表命名空间中的方法调用才会被包含在错误堆栈中。",Notice_Common_Methods:"使用逗号分隔的常用方法名称，这些方法不应该被包含在错误堆栈中。如果在您的代码包含一些公用方法，此功能在这些方法抛出大量异常的情况下非常有价值。",Notice_Spam_Detection:"使用逗号分隔的 HTTP 请求的 User Agent 列表，任何匹配列表中 User Agent 的请求都将会被忽略。","Example:":"例如：","Reduce noise by automatically hiding high volumes of events coming from a single client IP address.":"自动隐藏来自相同IP地址的高频事件以减少干扰。","Please enter a valid key.":"请输入有效的键","Please enter a valid value.":"请输入有效的值","Configuration Key":"配置键","Configuration Value":"配置值","to enable integrations!":"以启用外部整合！","Choose how often you want to receive slack notifications for event occurrences in this project.":"请选择您希望以何频率接收此项目中事件的Slack通知","(Coming soon!)":"（即将推出！）","Add Slack Notifications":"新增 Slack 通知","Remove Slack":"移除 Slack",Notice_Web_hooks:'此项目会调用下面表格中的Web Hook。与此同时我们还支持 <a href="http://zapier.com/" target="_blank">Zapier</a>，它可以更加容易地将 Exceptionless 与很多各种各样的服务（750+）进行整合，例如 JIRA、HipChat、Twilio、Basecamp 等等。',"This project does not contain any integrations.":"此项目不包含任何外部整合。","An error occurred while loading your projects.":"在加载您的项目的过程中发生了错误。","Are you sure you want to delete this project?":"您确认要删除此项目？","Successfully queued the project for deletion.":"已将此项目放入队列等待删除。","An error occurred while trying to remove the project.":"在删除项目的过程中发生了错误。",Download_Configure_Project:"下载配置项目{{projectName}}的客户端","The Exceptionless client can be integrated into your project in just a few easy steps.":"通过以下几个简单的步骤就可以轻松地将 Exceptionless 客户端整合到您的项目中去。","Select your project type:":"请选择您的项目类型：","Please select a project type":"请选择项目类型","Execute the following in your shell:":"在您的shell中执行以下命令：","Add the script to your HTML page:":"将下面的脚本放到您的 HTML 页面中","Configure the ExceptionlessClient with your Exceptionless API key:":"通过您的 API 密钥配置 ExceptionlessClient ：",Notice_Install_Nuget_Package:'在 Visual Studio 中的<a href="http://docs.nuget.org/docs/start-here/using-the-package-manager-console">程序包管理器控制台</a>运行如下命令可以将 Exceptionless 的 <a href="http://nuget.org" target="_blank">NuGet</a> 程序包安装到您的项目中：',Notice_Install_Bower_Package:'通过 <a href="http://bower.io" target="_blank">Bower</a> 安装 Exceptionless ：',Notice_Install_Manually:'如果您希望手动安装或者从 CDN 引用，请仔细阅读 <a href="https://github.com/exceptionless/Exceptionless.JavaScript" target="_blank">详细说明</a>。',Notice_Install_Node_Package:'通过 <a href="https://www.npmjs.com" target="_blank">Node 程序包管理器</a> 安装 Exceptionless ：',Notice_Update_ApiKey:'在项目中的 {{config}} 文件中找到 <code>&lt;exceptionless apiKey="API_KEY_HERE" /&gt;</code> 部分并使用您的 Exceptionless 相应项目的 API 密钥替换：',Notice_Application_Startup_NetFx:'在您的应用程序的启动文件中引入 <code>Exceptionless</code> 命名空间，然后通过 API 密钥执行 <code>ExceptionlessClient.Default.Startup("{{apiKey}}")</code> 方法。',Notice_Application_Startup_NetCore:'在您的应用程序的启动文件中引入 <code>Exceptionless</code> 命名空间，然后通过 API 密钥执行 <code>app.UseExceptionless("{{apiKey}}")</code> 方法。',Notice_Application_Startup_Nancy:"在您的 Nancy 引导程序中引入 <code>Exceptionless</code> 命名空间，然后在 ApplicationStartup 方法中通过 Nancy.Bootstrapper.IPipelines 类型的实例调用 <code>Exceptionless.ExceptionlessClient.Default.RegisterNancy(pipelines)</code> 方法。",Notice_Application_Startup_Windows:"在您的应用程序的启动文件中引入 <code>Exceptionless</code> 命名空间， 然后执行 <code>ExceptionlessClient.Default.Register()</code> 方法。",Notice_Application_Startup_WebApi:"在您的应用程序的启动文件中引入 <code>Exceptionless</code> 命名空间， 然后通过 HttpConfiguration 类型的实例调用 <code>ExceptionlessClient.Default.RegisterWebApi(config)</code> 方法。",Notice_Hosting_WebApi_In_AspNet:"如果将 Web API 程序托管在 ASP.NET 应用程序中，您需要这样注册 Exceptionless : <code>Exceptionless.ExceptionlessClient.Default.RegisterWebApi(GlobalConfiguration.Configuration)</code>",Notice_Unhandled_Exception:'如果您瞄准的是Net Standard或Portable Class Libraries（PCL），则可能需要连接到任何特定于您的项目类型的未处理异常事件，才能开始报告它们！请看 <a target="_blank" href="https://exceptionless.com/docs/clients/dotnet/">Exceptionless 文档</a>以获取更多的信息。',"That's it!":"就是这样！","Your project should now automatically be sending all unhandled exceptions to Exceptionless!":"现在您的项目可以自动将所有未处理异常发送到 Exceptionless 了！",Notice_Submit_Exception:'您也可以通过 <code>{{sampleCode}}</code> <a href="{{docUrl}}" target="_blank">向 Exceptionless 发送已处理的异常</a>。',Notice_CommandLine_Application:'请查看 <a target="_blank" href="https://exceptionless.com/docs/api/">Exceptionless 使用说明</a>以获取更多的信息和故障排除提示。',Notice_DotNet_Application:'请查看 <a target="_blank" href="https://exceptionless.com/docs/clients/dotnet/">Exceptionless 使用说明</a>以获取更多的信息和故障排除提示。',Notice_JavaScript_Application:'请查看 <a target="_blank" href="https://exceptionless.com/docs/clients/javascript/">Exceptionless 使用说明</a>以获取更多的信息以及基于特定平台的集成方法（例如 AngularJS, Express.js）。',"Copy not supported.":"不支持复制。","Press ⌘-C to copy.":"按 ⌘-C 键复制。","Press Ctrl-C to copy.":"按 Ctrl-C 键复制。","An error occurred while getting the API key for your project.":"在获取您的项目的 API 的密钥的过程中发生了错误。","Console and Service applications":"控制台和服务应用","Browser applications":"浏览器应用",Cannot_Find_Project:'无法找到项目"{{projectId}}"。',"An error occurred while creating the organization.":"在创建组织的过程中发生了错误。","An error occurred while creating the project.":"在创建项目的过程中发生了错误。","<New Organization>":"<新组织>","Add to Slack":"新增 Slack 通知","Project Most Frequent":"高频日志","Please upgrade your plan to enable slack integration.":"请升级您的计划以启用 Slack 整合。","An error occurred while adding Slack to your project.":"在将 Slack 整合到您的项目的过程中发生了错误。","An error occurred while creating a new API key for your project.":"在为您的项目创建新的 API 密钥的过程中发生了错误。","An error occurred while saving the configuration setting.":"在保存配置参数的过程中发生了错误。","An error occurred loading the api keys.":"在加载 API 密钥的过程中发生了错误。","An error occurred loading the notification settings.":"在加载通知设置的过程中发生了错误。","An error occurred while loading the slack notification settings.":"在加载 Slack 通知设置的过程中发生了错误。","Are you sure you want to delete this configuration setting?":"您确认要删除此配置参数吗？","DELETE CONFIGURATION SETTING":"删除配置参数","An error occurred while trying to delete the configuration setting.":"在尝试删除配置参数的过程中发生了错误。","An error occurred while trying to delete the project.":"在尝试删除项目的过程中发生了错误。","Are you sure you want to remove slack support?":"您确认要删除对 Slack 的支持吗？","An error occurred while trying to remove slack.":"在删除 Slack 整合的过程中出现了错误。","Are you sure you want to delete this API key?":"您确认要删除此 API 密钥吗？","DELETE API KEY":"删除 API 密钥","An error occurred while trying to delete the API Key.":"在尝试删除 API 密钥的过程中发生了错误。","Are you sure you want to delete this web hook?":"您确认要删除此 Web Hook 吗？","DELETE WEB HOOK":"删除 Web Hook","An error occurred while trying to delete the web hook.":"在尝试删除 Web Hook 的过程中发生了错误。","Are you sure you want to reset the data for this project?":"您确认要重置此项目的数据？","RESET PROJECT DATA":"重置项目数据","An error occurred while resetting project data.":"在重置项目数据的过程中发生了错误。","An error occurred while saving the project.":"在保存项目的过程中发生了错误。","An error occurred while saving the API key note.":"在保存 API 密钥的备注的过程中发生了错误。","An error occurred while saving the common methods.":"在保存常用方法的过程中发生了错误。","An error occurred while saving the data exclusion.":"在保存数据排除的过程中发生了错误。","An error occurred while saving the include private information setting.":"保存包含私人信息设置时发生错误。","An error occurred while saving the user agents.":"在保存 User Agent 的过程中发生了错误。","An error occurred while saving the user namespaces.":"在保存用户命名空间的过程中发生了错误。","An error occurred while saving your slack notification settings.":"在保存您的 Slack 通知设置的过程中发生了错误。",Project_Deleted:'项目"{{projectId}}"已被删除。',"My Organizations":"我的组织",Organizations:"组织",Plan:"计划",Projects:"项目","View Invoices":"查看发票","Leave Organization":"离开组织","New Organization":"新增组织","Monthly Usage":"月度用量","Invite User":"邀请用户","Delete Organization":"删除组织",UserManager:"用户管理",Billing:"在线支付","Total number of projects":"项目总数","Total number of stacks":"堆栈总数","Total number of events within the retention period":"保留期内事件总数","No organizations were found with the current filter.":"未找到满足当前筛选条件的组织。","No organizations were found.":"尚未发现任何组织。","View Payment":"查看款项","View Stripe Invoice":"查看Stripe发票","No invoices were found.":"尚未发现任何发票。","Organization Name is required.":"请填写组织名称。","A organizations with this name already exists.":"已经存在相同名称的组织。","The usage data above is refreshed periodically and may not reflect current totals.":"上述使用量数据为定期刷新结果，可能无法准确地反映当前的真实情况。","Click here to change your plan or billing information.":"点击这里更改您的计划或者在线支付信息。","Change your plan or billing information.":"更改您的计划或者在线支付信息。",Organization_Billing_Plan:"您当前在使用<strong>{{planName}}</strong>计划。","An error occurred while loading your organizations.":"在加载您的组织的过程中发生了错误。",Cannot_Find_Organization:'无法找到组织"{{organizationId}}"。',"An error occurred while inviting the user.":"在邀请用户的过程中发生了错误。",Organization_Deleted:'组织"{{organizationId}}"已被删除。',"Are you sure you want to leave this organization?":"您确定要离开此组织吗？","An error occurred while trying to leave the organization.":"在离开组织的过程中发生了错误。","Are you sure you want to delete this organization?":"您确认要删除此组织吗？","Successfully queued the organization for deletion.":"已将此组织放入队列等待删除。","An error occurred while trying to delete the organization.":"在删除组织的过程中发生了错误。","An error occurred while saving the organization.":"在保存组织的过程中发生了错误。",Configure_Project_Title:"配置{{projectName}}（{{organizationName}}）","Invoice #":"发票编号","Invoice Date":"发票日期",Invoice:"发票",Receipt:"收据",Paid:"已支付",Unpaid:"未支付",Amount:"金额","Email:":"邮箱：","Website:":"网站：",Organization_Payment_Plan:"<strong>{{organization}}</strong>当前在使用<strong>{{planName}}</strong>计划。",Payment_Select_New_Plan:'选择新计划(<a href="https://exceptionless.com/pricing" target="_blank">查看计划详情</a>)。<em>所有的计划变更均会按使用比例计费。</em>',"Credit Card":"信用卡","Coupon code":"优惠码","Exceptionless Plan":"Exceptionless 计划","Organization to change":"变更计划的组织","Use a new credit card":"使用新信用卡","Card number":"卡号",Expires:"有效期","Name on card":"持卡人姓名","Card code":"安全码","Help us improve Exceptionless!":"请帮助我们改进 Exceptionless！","Contact Us":"联系我们","Changing Plan":"正在变更计划","Please contact support for more information.":"请联系客户服务以获取更多的信息。",Cannot_Find_Invoice:'无法找到发票"{{invoiceId}}"。',"An error occurred while changing plans.":"再变更计划的过程中发生了错误。","Thanks! Your billing plan has been successfully changed.":"非常感谢！您的在线支付计划已经成功变更。","An error occurred while loading available billing plans.":"在加载有效的支付计划的过程中发生了错误。","An error occurred while loading your user account.":"在加载您的账号的过程中发生了错误。",Credit_Card_Ending:"使用以 {{card_last4}} 结尾的信用卡",Email:"邮箱","Full Name":"姓名","Email Address":"邮箱地址","Email address (no spam)":"邮箱地址（无垃圾邮件）",Notifications:"通知",Password:"密码","Current Password":"当前密码","Current Password is required.":"请填写当前密码。",New:"最新","New Password":"新密码","New Password is required.":"请填写新密码。","New Password must be at least 6 characters long.":"新密码不能少于6个字符。","New Password must be less than 101 characters long.":"新密码不能多于101个字符。","Confirm password":"确认密码","New Password and Confirmation Password fields do not match.":"新密码与确认密码不一致。","Confirm Password is required.":"请填写确认密码。","Confirm Password must be at least 6 characters long.":"确认密码不能少于6个字符。","Confirm Password must be less than 101 characters long.":"确认密码不能多于101个字符。","Set Password":"设置密码","Changing Password":"修改密码","DELETE ACCOUNT":"删除帐户","External Logins":"外部账号","Add an external login":"新增外部账号","Existing external logins":"现有外部账号",Remove:"移除","No external logins were found.":"尚未发现外部账号。","Log in using your Microsoft account":"使用您的微软账号登录","Log in using your Google account":"使用您的谷歌账号登录","Log in using your Facebook account":"使用您的Facebook账号登录","Log in using your GitHub account":"使用您的Github账号登录","An error occurred while adding external login.":"在增加外部账号的过程中发生了错误。","An error occurred while loading the notification settings.":"在加载通知设置的过程中发生了错误。","An error occurred while loading the projects.":"在加载项目的过程中发生了错误。","An error occurred while loading your user profile.":"在加载您的个人资料的过程中发生了错误。","Are you sure you want to delete your account?":"您确认要删除您的账号？","Successfully removed your user account.":"已经成功移除了您的账号。","An error occurred while trying remove your user account.":"在移除您的账号的过程中发生了错误。","An error occurred while sending your verification email.":"在给您发送验证邮件的过程中发生了错误。","An error occurred while saving your email address.":"在保存您的邮箱地址的过程中发生了错误。","An error occurred while saving your notification settings.":"在保存您的通知设置的过程中发生了错误。","An error occurred while saving your email notification preferences.":"在保存您的邮件通知偏好的过程中发生了错误。","An error occurred while saving your full name.":"在保存您的姓名的过程中发生了错误。","An error occurred while removing the external login.":"在移除您的外部账号的过程中发生了错误。","Choose how often you want to receive notifications for event occurrences in this project.":"请选择您希望以什么样的频率接收此项目的通知。","Are you sure you want to add the admin role for this user?":"您确定要为此用户增加管理员角色？","Are you sure you want to remove the admin role from this user?":"您确认要移除此用户的管理员角色？","An error occurred while add the admin role.":"在增加管理员角色的过程中出现了错误。","An error occurred while remove the admin role.":"在移除管理员角色的过程中出现了错误。","Log in":"登录",with:"与",OR:"或者","Login with":"登录",Signup:"注册","Forgot password?":"忘记密码？","Create an account":"创建帐户","Create My Account":"创建我的帐户","Log In":"登录","Change password":"修改密码","Reset your password":"重置密码","Forgot Password":"忘记密码",NOTICE_SIGNINGUP:'阅读并接受<a href="https://exceptionless.com/privacy" target="_blank">隐私保护声明</a> 及 <a href="https://exceptionless.com/terms" target="_blank">服务条款</a>。',Loggin_Failed_Message:"登录过程中出现错误。如需了解更多信息，请联系客户服务人员。",Unable_to_connect_to:"无法连接",ResetPassword_Failed_Message:"重置密码的过程中出现错误。",ResetPassword_Success_Message:"包含修改密码说明的邮件已经发送到您的邮箱。","An error occurred while signing up.  Please contact support for more information.":"在注册的过程中发生了错误。如需了解更多信息，请联系客户服务人员。","You have successfully changed your password.":"已经成功地修改了您的密码。","An error occurred while trying to change your password.":"在修改您的密码的过程中发生了错误。","Successfully verified your account.":"您的账号已成功验证。","An error occurred while verifying your account.":"在验证您的账号的过程中发生了错误。",AdminRole:"管理员",Invited:"已邀请",Resend:"重新发送","Your first and last name":"您的姓名","verification email.":"验证邮件。","Email not verified.":"邮箱地址尚未验证。","Email notifications are currently disabled.":"邮件通知已被禁用。","To enable email notifications you must first verify your email address.":"如需启用邮件通知，首先必须验证您的邮箱地址。","Enable email notifications":"启用邮件通知","Send daily project summary":"发送每日项目简报","Notify me on new errors":"通知我新的错误","Notify me on critical errors":"通知我严重错误","Notify me on error regressions":"通知我回归错误","Notify me on new events":"通知我新的事件","Notify me on critical events":"通知我关键事件","Upgrade now":"现在升级","to enable occurrence level notifications!":"以启用实时邮件通知！","Resend Invite Email":"重新发送邀请邮件","Revoke Invite":"撤销邀请","Remove User":"移除用户","Add Admin Role":"添加管理员角色","Remove Admin Role":"移除管理员角色","No users were found.":"找不到用户。","Are you sure you want to remove this user from your organization?":"您确认要从您的组织中删除此用户吗？","An error occurred while trying to remove the user.":"在尝试删除此用户的过程中发生了错误。","An error occurred while trying to resend the notification.":"在尝试重发通知的过程中发生了错误。","Create New Web Hook":"新增Web Hook",Url:"链接地址","Enter the URL to call":"输入被调用的链接地址","URL is required.":"请输入链接地址。","Control when the web hook is called by choosing the event types below.":"选择下面的事件类型以控制何时对 Web Hook 进行调用。","Please choose one or more event types.":"请至少选择一个事件类型。","Create Web Hook":"创建 Web Hook","New Error":"新的错误",Newest:"最新","Occurs when a new error that has never been seen before is reported to your project.":"当您的项目中发生尚未出现过得错误的情况下触发。","Critical Error":"关键错误","Occurs when an error that has been marked as critical is reported to your project.":"当您的项目中的错误被标记为关键事件的情况下触发。",Regression:"回归事件","Occurs when an event that has been marked as fixed has reoccurred in your project.":'当您的项目中出现被标记为"已修复"的事件的情况下触发。',"Occurs when a new event that has never been seen before is reported to your project.":"当您的项目中出现尚未被记录过的事件的情况下触发。","Critical Event":"关键事件","Occurs when an event that has been marked as critical is reported to your project.":"当您的项目中的事件被标记为关键事件的情况下触发。",Promoted:"外部推送","Used to promote event stacks to external systems.":"用于将堆栈推送到外部系统。",Delete:"删除",Cancel:"取消",Apply:"确认",DateTime:"{{date | date: 'yyyy年M月d日 H:mm:ss'}}","Go To Most Frequent":"前往最常去的地方",Save:"保存",Edit:"修改",to:"至","Email Address is required.":"请填写邮箱地址","Password is required":"请填写密码","Password must be at least 6 characters long":"请填写长度不小于6位的密码","Password must be less than 101 characters long":"请填写长度不大于101位的密码","Signup for a FREE account in seconds":"在几秒钟内注册一个免费帐户","Full Name is required.":"请填写姓名","A user already exists with this email address.":"邮箱已存在","Already have an account?":"已经有账户?","API rate limit exceeded":"API 调用频率超限","Your API rate limit has been exceeded. Please try again in 15 minutes.":"您的应用程序调用 API 的频率超限。请在15分钟之后重试。","to enable premium features and extra storage!":"以启用高级特性及更多的存储空间！","to enable search and other premium features!":"以启用搜索及其他高级特性！","is currently on a free plan.":"当前在使用免费计划。","has reached its monthly plan limit.":"已经达到了月度使用计划上限。","to continue receiving events.":"以继续接收日志。","to increase your limits.":"以提升您的上限。","Events are currently being throttled to prevent using up your plan limit in a small window of time.":"当前系统会进行日志量的节流控制，以避免在短时间内超出您的使用计划上限。","Events are currently being throttled for":"当前系统为这些组织进行了日志量的节流控制：","API requests are currently being throttled for":"当前系统为这些组织进行了 API 请求的节流控制：","Please note that while your account is suspended all new client events will be discarded.":"请注意您的账户已经被冻结，所有客户端发送的日志都会被丢弃。","We haven't received any data!":"我们还没接收到任何数据！","Setup your first project":"设置您的第一个项目","Copied!":"复制好了！","Message:":"错误消息：",Allowed:"容许量",Blocked:"阻滞量","Too Big":"超型量",Limit:"上限量","Allowed in Organization":"组织容许量",Occurrences:"数量","Log source":"日志来源",Add:"新增",Total:"总计","Log Level":"日志级别",trace:"跟踪",debug:"除错",info:"信息",warn:"警告",error:"错误",fatal:"致命",off:"关",Default:"默认",Notice_Default_Log_Level:"默认日志级别控制日志事件应接受的最低日志级别。 日志级别也可以在日志堆栈级别覆盖。",DIALOGS_ERROR:"错误",DIALOGS_ERROR_MSG:"出现未知错误。",DIALOGS_CLOSE:"关闭",DIALOGS_PLEASE_WAIT:"请稍候",DIALOGS_PLEASE_WAIT_ELIPS:"请稍候...",DIALOGS_PLEASE_WAIT_MSG:"请等待操作完成。",DIALOGS_PERCENT_COMPLETE:"% 已完成",DIALOGS_NOTIFICATION:"通知",DIALOGS_NOTIFICATION_MSG:"未知应用程序的通知。",DIALOGS_CONFIRMATION:"确认",DIALOGS_CONFIRMATION_MSG:"确认要求。",DIALOGS_OK:"确定",DIALOGS_YES:"确认",DIALOGS_NO:"取消",NOTICE_GRAVATAR:'您的头像是根据下面所填写的邮箱地址调用 <a href="https://gravatar.com" target="_blank">Gravatar</a> 的服务生成。'}),$translateProvider.preferredLanguage("zh-cn"),$compileProvider.debugInfoEnabled(!1),$httpProvider.useApplyAsync(!0),EXCEPTIONLESS_API_KEY){var config=$ExceptionlessClient.config;config.apiKey=EXCEPTIONLESS_API_KEY,config.serverUrl=BASE_URL,config.defaultTags.push("UI"),config.setVersion("@@version"),config.useReferenceIds(),config.useSessions()}$locationProvider.html5Mode({enabled:"boolean"==typeof USE_HTML5_MODE&&USE_HTML5_MODE||"true"===USE_HTML5_MODE,requireBase:!1}),$uiViewScrollProvider.useAnchorScroll(),dialogsProvider.setSize("md"),gravatarServiceProvider.defaults={default:"mm"},RestangularProvider.setBaseUrl(BASE_URL+"/api/v2"),RestangularProvider.setFullResponse(!0),STRIPE_PUBLISHABLE_KEY&&stripeProvider.setPublishableKey(STRIPE_PUBLISHABLE_KEY),$stateProvider.state("app",{abstract:!0,templateUrl:"app/app.tpl.html",controller:"App",controllerAs:"appVm",data:{requireAuthentication:!0}});var routes,resetEventTypeOnExit=["filterService",function(filterService){filterService.setEventType(null,!0)}];[{key:"dashboard",title:"Dashboard",controller:"app.Dashboard"},{key:"frequent",title:"Most Frequent",controller:"app.Frequent"},{key:"new",title:"New",controller:"app.New"},{key:"recent",title:"Most Recent",controller:"app.Recent"},{key:"users",title:"Most Users",controller:"app.Users"}].forEach((function(route){var routeDefaults={controller:route.controller,controllerAs:"vm",templateUrl:"app/"+route.key+".tpl.html",title:route.title};$stateProvider.state("app."+route.key,angular.extend({},{url:"/"+route.key,onEnter:["filterService",function(filterService){setRouteFilter(filterService,null,null,null)}]},routeDefaults)),$stateProvider.state("app.project-"+route.key,angular.extend({},{url:"/project/{projectId:[0-9a-fA-F]{24}}/"+route.key,onEnter:["$stateParams","filterService",function($stateParams,filterService){setRouteFilter(filterService,null,$stateParams.projectId,null)}]},routeDefaults)),$stateProvider.state("app.project-type-"+route.key,angular.extend({},{url:"/project/{projectId:[0-9a-fA-F]{24}}/:type/"+route.key,onEnter:["$state","$stateParams","filterService",function($state,$stateParams,filterService){if("session"===$stateParams.type)return $state.go("app.session-project-dashboard",$stateParams);setRouteFilter(filterService,null,$stateParams.projectId,$stateParams.type)}],onExit:resetEventTypeOnExit},routeDefaults)),$stateProvider.state("app.organization-"+route.key,angular.extend({},{url:"/organization/{organizationId:[0-9a-fA-F]{24}}/"+route.key,onEnter:["$stateParams","filterService",function($stateParams,filterService){setRouteFilter(filterService,$stateParams.organizationId,null,null)}]},routeDefaults)),$stateProvider.state("app.organization-type-"+route.key,angular.extend({},{url:"/organization/{organizationId:[0-9a-fA-F]{24}}/:type/"+route.key,onEnter:["$state","$stateParams","filterService",function($state,$stateParams,filterService){if("session"===$stateParams.type)return $state.go("app.session-organization-dashboard",$stateParams);setRouteFilter(filterService,$stateParams.organizationId,null,$stateParams.type)}],onExit:resetEventTypeOnExit},routeDefaults)),$stateProvider.state("app.type-"+route.key,angular.extend({},{url:"/type/:type/"+route.key,onEnter:["$state","$stateParams","filterService",function($state,$stateParams,filterService){if("session"===$stateParams.type)return $state.go("app.session-dashboard",$stateParams);setRouteFilter(filterService,null,null,$stateParams.type)}],onExit:resetEventTypeOnExit},routeDefaults))}));var onEnter=["authService","$location","$state","$timeout",function(authService,$location,$state,$timeout){if(!$location.search().code)return $timeout((function(){authService.isAuthenticated()?$state.transitionTo("app.type-dashboard",{type:"error"}):$state.transitionTo("auth.login")}))}];$stateProvider.state("loading",{url:"",template:null,onEnter:onEnter}),$stateProvider.state("loading-slash",{url:"/",template:null,onEnter:onEnter}),$stateProvider.state("otherwise",{url:"*path",templateUrl:"app/not-found.tpl.html",onEnter:["$stateParams",function($stateParams){$ExceptionlessClient.createNotFound($stateParams.path).setProperty("$stateParams",$stateParams).submit()}]})}]).run(["$http","$rootScope","$state","authService","editableOptions","$location","rateLimitService","Restangular","stateService","USE_SSL","$window",function($http,$rootScope,$state,authService,editableOptions,$location,rateLimitService,Restangular,stateService,USE_SSL,$window){$window.top.location.hostname!==$window.self.location.hostname&&($window.top.location.href=$window.self.location.href),("boolean"==typeof USE_SSL&&USE_SSL||"true"===USE_SSL)&&"https"!==$location.protocol()&&($window.location.href=$location.absUrl().replace("http","https")),editableOptions.theme="bs3",Restangular.setErrorInterceptor((function(response,deferred,responseHandler){function handleError(response){return"status"===$state.current.name||0!==response.status&&503!==response.status?401===response.status?(stateService.save(["auth."]),$state.go("auth.login"),!0):409===response.status:(stateService.save(["auth.","status"]),$state.go("status",{redirect:!0}),!0)}rateLimitService.updateFromResponseHeader(response);var currentState=$state.current.name;return!(!currentState||!currentState.startsWith("auth.")||401!==response.status)||("status"===currentState||0!==response.status&&503!==response.status?!handleError(response):($http(response.config).then(responseHandler,(function(response){handleError(response)||deferred.reject(response)})),!1))})),$rootScope.page={setTitle:function(title){this.title=title?title+" - Exceptionless":"Exceptionless"}},$rootScope.$on("$stateChangeStart",(function(event,toState){toState&&toState.data&&toState.data.requireAuthentication&&(authService.isAuthenticated()||(event.preventDefault(),stateService.save(["auth."]),$state.transitionTo("auth.login")),$rootScope.page.setTitle(toState.title))}))}])}(),function(){"use strict";angular.module("exceptionless.admin",["restangular"]).factory("adminService",["Restangular",function(Restangular){function changePlan(options){return Restangular.one("admin").customPOST(null,"change-plan",options)}var service;return{changePlan:changePlan}}])}(),function(){"use strict";angular.module("exceptionless.analytics",["angular-locker","angulartics","angulartics.google.tagmanager"]).config(["$analyticsProvider",function($analyticsProvider){$analyticsProvider.registerPageTrack((function(path){window.fbq&&fbq("track","PageView")})),$analyticsProvider.registerEventTrack((function(action,properties){var eventList;window.fbq&&(properties=properties||{},-1===["ViewContent","Search","AddToCart","AddToWishlist","InitiateCheckout","AddPaymentInfo","Purchase","Lead","CompleteRegistration"].indexOf(action)?fbq("trackCustom",action,properties):fbq("track",action,properties))}))}]).factory("analyticsService",["$analytics","locker",function($analytics,locker){var _store=locker.driver("session").namespace("analytics"),service;function addPaymentInfo(){return $analytics.eventTrack("AddPaymentInfo")}function completeRegistration(queryString){var data={};return queryString&&(queryString.domain||queryString.medium||queryString.type||queryString.campaign||queryString.content||queryString.keyword)&&(data={marketing_domain:queryString.domain,marketing_medium:queryString.medium,marketing_type:queryString.type,marketing_campaign:queryString.campaign,marketing_content:queryString.content,marketing_keyword:queryString.keyword},_store.put("registration",data)),$analytics.eventTrack("CompleteRegistration",data)}function getRegistrationQueryStringData(){return _store.get("registration")||{}}function initiateCheckout(){return $analytics.eventTrack("InitiateCheckout")}function lead(data){return $analytics.eventTrack("Lead",data)}function purchase(data){return $analytics.eventTrack("Purchase",data)}return{addPaymentInfo:addPaymentInfo,completeRegistration:completeRegistration,getRegistrationQueryStringData:getRegistrationQueryStringData,initiateCheckout:initiateCheckout,lead:lead,purchase:purchase}}])}(),function(){"use strict";angular.module("exceptionless.auth",["restangular","satellizer","ui.router","exceptionless","exceptionless.state"]).factory("authService",["$auth","$ExceptionlessClient","$rootScope","$state","stateService","Restangular",function($auth,$ExceptionlessClient,$rootScope,$state,stateService,Restangular){function authenticate(provider,userData){function onSuccess(){$rootScope.$emit("auth:login",{})}return $auth.authenticate(provider,userData||{}).then(onSuccess)}function cancelResetPassword(resetToken){return Restangular.one("auth","cancel-reset-password").one(resetToken).post()}function changePassword(changePasswordModel){function onSuccess(response){return $auth.setToken(response.data.token),response}return Restangular.one("auth","change-password").customPOST(changePasswordModel).then(onSuccess)}function forgotPassword(email){return Restangular.one("auth","forgot-password").one(email).get()}function getToken(){return $auth.getToken()}function isAuthenticated(){return $auth.isAuthenticated()}function isEmailAddressAvailable(email){return Restangular.one("auth","check-email-address").one(email).get()}function login(user){return $auth.login(user).then((function(){onLoginSuccess(user)}))}function logout(withRedirect,params){function logoutLocally(){function redirect(){if($ExceptionlessClient.submitSessionEnd(),$ExceptionlessClient.config.setUserIdentity(),$rootScope.$emit("auth:logout",{}),withRedirect)return stateService.save(["auth."]),$state.go("auth.login",params)}return stateService.clear(),$auth.logout().then(redirect,redirect)}return Restangular.one("auth","logout").get().then(logoutLocally,logoutLocally)}function onLoginSuccess(user){$ExceptionlessClient.config.setUserIdentity({identity:user.email,data:{InviteToken:user.invite_token}}),$ExceptionlessClient.submitSessionStart(),$rootScope.$emit("auth:login",{})}function resetPassword(resetPasswordModel){return Restangular.one("auth","reset-password").customPOST(resetPasswordModel)}function signup(user){function onSuccess(response){return $auth.setToken(response.data.token),onLoginSuccess(user),response}return $auth.signup(user).then(onSuccess)}function unlink(providerName,providerUserId){function onSuccess(response){return $auth.setToken(response.data.token),response}return Restangular.one("auth","unlink").one(providerName).customPOST(providerUserId).then(onSuccess)}var service;return{authenticate:authenticate,cancelResetPassword:cancelResetPassword,changePassword:changePassword,forgotPassword:forgotPassword,getToken:getToken,isAuthenticated:isAuthenticated,isEmailAddressAvailable:isEmailAddressAvailable,login:login,logout:logout,resetPassword:resetPassword,signup:signup,unlink:unlink}}])}(),function(){"use strict";angular.module("exceptionless.auto-active",[]).directive("autoActive",["$location","$timeout",function($location,$timeout){return{restrict:"A",scope:!1,link:function(scope,element,attr){function setActive(){function isMatch(href){var pattern=href+"(?=\\?|$)";return $location.absUrl().match(pattern)}$location.path()&&(angular.forEach(element.find("li"),(function(li){var anchor=li.querySelector("a");anchor&&anchor.href&&(isMatch(anchor.href)?angular.element(li).addClass("active"):angular.element(li).removeClass("active"))})),attr&&attr.href&&(isMatch(attr.href)?element.addClass("active"):element.removeClass("active")))}function setActiveWithTimeout(){var timeout=$timeout(setActive,100);scope.$on("$destroy",(function(){$timeout.cancel(timeout)}))}setActiveWithTimeout();var unbind=scope.$on("$locationChangeSuccess",setActiveWithTimeout);scope.$on("$destroy",(function(){unbind()}))}}}])}(),function(){"use strict";angular.module("exceptionless.autofocus",[]).directive("autofocus",["$timeout",function($timeout){return{restrict:"A",scope:!1,link:function(scope,element,attr){var timeout=$timeout((function(){element[0].focus()}));scope.$on("$destroy",(function(){$timeout.cancel(timeout)}))}}}])}(),function(){"use strict";angular.module("exceptionless.billing",["angularPayments","angular-stripe","ui.bootstrap","dialogs.main","dialogs.default-translations","app.config","exceptionless","exceptionless.admin","exceptionless.analytics","exceptionless.autofocus","exceptionless.dialog","exceptionless.notification","exceptionless.organization","exceptionless.promise-button","exceptionless.user","exceptionless.refresh"])}(),function(){"use strict";angular.module("exceptionless.billing").factory("billingService",["$ExceptionlessClient","analyticsService","dialogs","dialogService","$q",function($ExceptionlessClient,analyticsService,dialogs,dialogService,$q){var source="exceptionless.billing.billingService",service;function changePlan(organizationId){return analyticsService.initiateCheckout(),$ExceptionlessClient.createFeatureUsage(source+".changePlan").setProperty("OrganizationId",organizationId).submit(),dialogs.create("components/billing/change-plan-dialog.tpl.html","ChangePlanDialog as vm",organizationId).result}function confirmUpgradePlan(message,organizationId){function onSuccess(){return changePlan(organizationId)}function onFailure(){return $ExceptionlessClient.createFeatureUsage(source+".confirmUpgradePlan.cancel").setMessage(message).setProperty("OrganizationId",organizationId).submit(),$q.reject("cancelled")}return $ExceptionlessClient.createFeatureUsage(source+".confirmUpgradePlan").setMessage(message).setProperty("OrganizationId",organizationId).submit(),dialogService.confirm(message,"Upgrade Plan").then(onSuccess,onFailure)}return{changePlan:changePlan,confirmUpgradePlan:confirmUpgradePlan}}])}(),function(){"use strict";angular.module("exceptionless.billing").controller("ChangePlanDialog",["$uibModalInstance","adminService","analyticsService","Common","$ExceptionlessClient","$intercom","INTERCOM_APPID","notificationService","organizationService","stripe","STRIPE_PUBLISHABLE_KEY","userService","$window","data",function($uibModalInstance,adminService,analyticsService,Common,$ExceptionlessClient,$intercom,INTERCOM_APPID,notificationService,organizationService,stripe,STRIPE_PUBLISHABLE_KEY,userService,$window,data){var vm=this;function cancel(){analyticsService.lead(getAnalyticsData()),$ExceptionlessClient.createFeatureUsage(vm._source+".cancel").setProperty("CurrentPlan",vm.currentPlan).setProperty("CouponId",vm.coupon).setProperty("IsNewCard",isNewCard()).setProperty("OrganizationId",vm.currentOrganization.id).submit(),$uibModalInstance.dismiss("cancel")}function createStripeToken(){function onSuccess(response){return analyticsService.addPaymentInfo(),response}var expiration=Common.parseExpiry(vm.card.expiry),payload={number:vm.card.number,cvc:vm.card.cvc,exp_month:expiration.month,exp_year:expiration.year,name:vm.card.name};return stripe.card.createToken(payload).then(onSuccess)}function getAnalyticsData(){return{content_name:vm.currentPlan.name,content_ids:[vm.currentPlan.id],content_type:"product",currency:"USD",value:vm.currentPlan.price}}function save(isValid){function onCreateTokenSuccess(response){return changePlan(!1,{stripeToken:response.id,last4:response.card.last4,couponId:vm.coupon}).then(onSuccess,onFailure)}function onSuccess(response){if(!response.data.success)return analyticsService.lead(getAnalyticsData()),vm.paymentMessage="An error occurred while changing plans. Message: "+response.data.message,void $ExceptionlessClient.createException(new Error(response.data.message)).markAsCritical().setSource(vm._source+".save.error").setProperty("CurrentPlan",vm.currentPlan).setProperty("CouponId",vm.coupon).setProperty("IsNewCard",isNewCard()).setProperty("OrganizationId",vm.currentOrganization.id).submit();analyticsService.purchase(getAnalyticsData()),$ExceptionlessClient.createFeatureUsage(vm._source+".save").markAsCritical().setMessage(response.data.message).setProperty("CurrentPlan",vm.currentPlan).setProperty("CouponId",vm.coupon).setProperty("IsNewCard",isNewCard()).setProperty("OrganizationId",vm.currentOrganization.id).submit(),$uibModalInstance.close(vm.currentPlan),notificationService.success("Thanks! Your billing plan has been successfully changed.")}function onFailure(response){response.error&&response.error.message?vm.paymentMessage=response.error.message:vm.paymentMessage="An error occurred while changing plans.",analyticsService.lead(getAnalyticsData()),$ExceptionlessClient.createException(new Error(vm.paymentMessage)).markAsCritical().setSource(vm._source+".save.error").setProperty("CurrentPlan",vm.currentPlan).setProperty("CouponId",vm.coupon).setProperty("IsNewCard",isNewCard()).setProperty("OrganizationId",vm.currentOrganization.id).submit()}if(isValid&&vm.currentPlan){if(vm.paymentMessage=null,vm.currentOrganization.plan_id!==vm._freePlanId||vm.currentPlan.id!==vm._freePlanId){if(hasAdminRole()||vm.currentPlan.id===vm._freePlanId)return changePlan(hasAdminRole()).then(onSuccess,onFailure);if(vm.currentPlan.price>0&&isNewCard())try{return createStripeToken().then(onCreateTokenSuccess,onFailure)}catch(error){return vm.paymentMessage="An error occurred while changing plans.",$ExceptionlessClient.createException(error).markAsCritical().setSource(vm._source+".save.error").setProperty("CurrentPlan",vm.currentPlan).setProperty("CouponId",vm.coupon).setProperty("IsNewCard",isNewCard()).setProperty("OrganizationId",vm.currentOrganization.id).submit(),null}return changePlan(!1,{couponId:vm.coupon}).then(onSuccess,onFailure)}cancel()}}function changeOrganization(){return vm.card.mode=hasExistingCard()?"existing":"new",getPlans()}function changePlan(isAdmin,options){return isAdmin?adminService.changePlan({organizationId:vm.currentOrganization.id,planId:vm.currentPlan.id}):organizationService.changePlan(vm.currentOrganization.id,angular.extend({},{planId:vm.currentPlan.id},options))}function getOrganizations(){function getSelectedOrganization(){function onSuccess(response){return vm.organizations.push(response.data.plain()),vm.organizations}if(data&&!vm.organizations.filter((function(o){return o.id===data}))[0])return organizationService.getById(data,!1).then(onSuccess)}function getAllOrganizations(){function onSuccess(response){return angular.forEach(response.data.plain(),(function(value,key){vm.organizations.push(value)})),vm.organizations}return organizationService.getAll({},!1).then(onSuccess)}function onSuccess(){vm.currentOrganization=vm.organizations.filter((function(o){return o.id===(vm.currentOrganization.id||data)}))[0],vm.currentOrganization||(vm.currentOrganization=vm.organizations.length>0?vm.organizations[0]:{}),vm.card.mode=hasExistingCard()?"existing":"new"}function onFailure(response){notificationService.error("An error occurred while loading your organizations. "+vm._contactSupport),$ExceptionlessClient.createFeatureUsage(vm._source+".getOrganizations.error").markAsCritical().setMessage(response&&response.data&&response.data.message).submit(),cancel()}return vm.organizations=[],getAllOrganizations().then(getSelectedOrganization).then(onSuccess,onFailure)}function getPlans(){function onSuccess(response){vm.plans=response.data.plain();var currentPlan=vm.plans.filter((function(p){return p.id===vm.currentOrganization.plan_id}))[0]||vm.plans[0],currentPlanIndex=vm.plans.indexOf(currentPlan);return vm.currentPlan=vm.plans.length>currentPlanIndex+1?vm.plans[currentPlanIndex+1]:currentPlan,vm.plans}function onFailure(response){notificationService.error("An error occurred while loading available billing plans. "+vm._contactSupport),$ExceptionlessClient.createFeatureUsage(vm._source+".getPlans.error").markAsCritical().setMessage(response&&response.data&&response.data.message).submit(),cancel()}return organizationService.getPlans(vm.currentOrganization.id).then(onSuccess,onFailure)}function getUser(){function onSuccess(response){return vm.user=response.data.plain(),vm.card.name||(vm.card.name=vm.user.full_name),vm.user}function onFailure(response){notificationService.error("An error occurred while loading your user account. "+vm._contactSupport),$ExceptionlessClient.createFeatureUsage(vm._source+".getUser.error").markAsCritical().setMessage(response&&response.data&&response.data.message).submit(),cancel()}return userService.getCurrentUser().then(onSuccess,onFailure)}function hasAdminRole(){return userService.hasAdminRole(vm.user)}function hasExistingCard(){return!!vm.currentOrganization.card_last4}function isBillingEnabled(){return!!STRIPE_PUBLISHABLE_KEY}function isCancellingPlan(){return vm.currentPlan&&vm.currentPlan.id===vm._freePlanId&&vm.currentOrganization.plan_id!==vm._freePlanId}function isNewCard(){return vm.card&&"new"===vm.card.mode}function isPaidPlan(){return vm.currentPlan&&0!==vm.currentPlan.price}function showIntercom(){$ExceptionlessClient.submitFeatureUsage(vm._source+".showIntercom"),INTERCOM_APPID?$intercom.showNewMessage():$window.open("http://exceptionless.com/contact/","_blank")}this.$onInit=function $onInit(){vm._source="exceptionless.billing.ChangePlanDialog",vm._contactSupport="Please contact support for more information.",vm._freePlanId="EX_FREE",vm.cancel=cancel,vm.card={},vm.changeOrganization=changeOrganization,vm.coupon=null,vm.currentOrganization={},vm.currentPlan={},vm.getPlans=getPlans,vm.hasAdminRole=hasAdminRole,vm.hasExistingCard=hasExistingCard,vm.isBillingEnabled=isBillingEnabled,vm.isCancellingPlan=isCancellingPlan,vm.isNewCard=isNewCard,vm.isPaidPlan=isPaidPlan,vm.organizations=[],vm.paymentMessage=isBillingEnabled()?null:"Billing is currently disabled.",vm.plans=[],vm.save=save,vm.showIntercom=showIntercom,vm.stripe={},$ExceptionlessClient.submitFeatureUsage(vm._source),getOrganizations().then(getPlans).then(getUser)}}])}(),function(){"use strict";angular.module("exceptionless.date-filter",["ui.bootstrap","dialogs.main","dialogs.default-translations","exceptionless","exceptionless.autofocus","exceptionless.date-range-parser","exceptionless.date-range-picker","exceptionless.refresh"])}(),function(){"use strict";angular.module("exceptionless.date-filter").controller("CustomDateRangeDialog",["$ExceptionlessClient","$uibModalInstance","data",function($ExceptionlessClient,$uibModalInstance,data){var vm=this;function cancel(){$ExceptionlessClient.submitFeatureUsage(vm._source+".cancel"),$uibModalInstance.dismiss("cancel")}function save(){vm.range.start&&vm.range.end&&(angular.isObject(vm.range.start)||(vm.range.start=moment(vm.range.start)),angular.isObject(vm.range.end)||(vm.range.end=moment(vm.range.end)),0!==vm.range.start.diff(vm.range.end,"seconds")&&0!==vm.maxDate.diff(vm.range.end,"seconds")||(vm.range.end=vm.range.end.endOf("day")),$ExceptionlessClient.createFeatureUsage(vm._source+".save").setProperty("Range",vm.range).submit(),$uibModalInstance.close(vm.range))}this.$onInit=function $onInit(){vm._source="exceptionless.date-filter.CustomDateRangeDialog",vm.cancel=cancel,vm.maxDate=moment(),vm.minDate=moment(new Date(2012,1,1)),vm.range={start:data.start,end:data.end},vm.save=save,$ExceptionlessClient.submitFeatureUsage(vm._source)}}])}(),function(){"use strict";angular.module("exceptionless.date-filter").directive("dateFilter",["$interval","dateRangeParserService",function($interval,dateRangeParserService){return{restrict:"E",replace:!0,scope:!0,templateUrl:"components/date-filter/date-filter-directive.tpl.html",controller:["$interval","$scope","dialogs","filterService",function($interval,$scope,dialogs,filterService){var vm=this;function getFilteredDisplayName(){var time=filterService.getTime();if("last hour"===time)return"Last Hour";if("last 24 hours"===time)return"Last 24 Hours";if("last week"===time)return"Last Week";if("last 30 days"===time)return"Last 30 Days";if("all"===time)return"All Time";var range=dateRangeParserService.parse(time);return range&&range.start&&range.end?moment(range.start).twix(moment(range.end)).format():(setFilter("last week"),"Last Week")}function isActive(timeRangeName){var time=filterService.getTime();if(time&&"Custom"===timeRangeName){var range=dateRangeParserService.parse(time);return range&&range.start&&range.end}return timeRangeName===time}function hasFilter(){return"all"!==filterService.getTime()}function setCustomFilter(){function onSuccess(range){return setFilter(range.start.format("YYYY-MM-DDTHH:mm:ss")+"-"+range.end.format("YYYY-MM-DDTHH:mm:ss")),range}var range=filterService.getTimeRange();return dialogs.create("components/date-filter/custom-date-range-dialog.tpl.html","CustomDateRangeDialog as vm",{start:range.start||moment().subtract(7,"days"),end:range.end||moment()}).result.then(onSuccess).catch((function(e){}))}function setFilter(filter){filterService.setTime(filter)}function updateFilterDisplayName(){vm.filteredDisplayName=getFilteredDisplayName()}this.$onInit=function $onInit(){var interval=$interval(updateFilterDisplayName,6e4);$scope.$on("$destroy",(function(){$interval.cancel(interval)})),vm.hasFilter=hasFilter,vm.isActive=isActive,vm.filteredDisplayName=getFilteredDisplayName(),vm.isDropDownOpen=!1,vm.setCustomFilter=setCustomFilter,vm.setFilter=setFilter,vm.updateFilterDisplayName=updateFilterDisplayName}}],controllerAs:"vm"}}])}(),function(){"use strict";angular.module("exceptionless.date-range-parser",[]).factory("dateRangeParserService",(function(){var _rangeRegex=/(\d{4}-\d{2}-\d{2}(?:T(?:\d{2}:\d{2}:\d{2}|\d{2}:\d{2}|\d{2}))?)/g,service;function parse(input){if(!input)return null;for(var matches=[],found;found=_rangeRegex.exec(input);)matches.push(found[0]);return 2===matches.length?{start:matches[0],end:matches[1]}:null}return{parse:parse}}))}(),function(){"use strict";angular.module("exceptionless.date-range-picker",["exceptionless.autofocus"]).directive("dateRangePicker",(function(){return{restrict:"E",scope:{format:"=",maxDate:"=",minDate:"=",range:"=",showDropdowns:"=",timePicker:"=",timePickerSeconds:"=",timePicker12Hour:"="},templateUrl:"components/date-range-picker/date-range-picker-directive.tpl.html",link:function(scope,element){var vm=scope,options={endDate:vm.range.end,format:vm.format||"YYYY-MM-DD",maxDate:vm.maxDate,minDate:vm.minDate,showDropdowns:!!vm.showDropdowns,startDate:vm.range.start,timePicker:!!vm.timePicker,timePicker12Hour:!!vm.timePicker12Hour,timePickerSeconds:!!vm.timePickerSeconds,timePickerIncrement:vm.timePickerIncrement||1},watcher=scope.$watch(vm.range,(function(r){r&&(element.data("daterangepicker").setStartDate(r.start),element.data("daterangepicker").setEndDate(r.end))}));scope.$on("$destroy",(function(){watcher()})),element.daterangepicker(options,(function(start,end){scope.$apply((function(){vm.range={start:start,end:end}}))})),element.data("daterangepicker").setStartDate(vm.range.start),element.data("daterangepicker").setEndDate(vm.range.end)}}}))}(),function(){"use strict";angular.module("exceptionless.dialog",["ui.bootstrap","dialogs.main","dialogs.default-translations","exceptionless.autofocus"])}(),function(){"use strict";angular.module("exceptionless.dialog").factory("dialogService",["dialogs",function(dialogs){function confirm(message,confirmButtonText){return dialogs.create("components/dialog/confirm-dialog.tpl.html","confirmDialog as vm",{message:message,confirmButtonText:confirmButtonText}).result}function confirmDanger(message,confirmButtonText){return dialogs.create("components/dialog/confirm-dialog.tpl.html","confirmDialog as vm",{message:message,confirmButtonText:confirmButtonText,danger:!0}).result}var service;return{confirm:confirm,confirmDanger:confirmDanger}}])}(),function(){"use strict";angular.module("exceptionless.dialog").controller("confirmDialog",["$uibModalInstance","$translate","data",function($uibModalInstance,$translate,data){var vm=this;function cancel(){$uibModalInstance.dismiss("cancel")}function confirm(){$uibModalInstance.close("confirm")}this.$onInit=function $onInit(){vm.confirmButtonText=angular.isDefined(data.confirmButtonText)?data.confirmButtonText:$translate.instant("DIALOGS_YES"),vm.danger=angular.isDefined(data.danger)&&!0===data.danger,vm.header=angular.isDefined(data.header)?data.header:$translate.instant("DIALOGS_CONFIRMATION"),vm.message=angular.isDefined(data.message)?data.message:$translate.instant("DIALOGS_CONFIRMATION_MSG"),vm.cancel=cancel,vm.confirm=confirm}}])}(),function(){"use strict";angular.module("exceptionless.duration",[]).directive("duration",["$interval",function($interval){return{restrict:"AE",scope:{value:"=",period:"="},link:function(scope,element){function setDurationText(){if("number"==typeof scope.value){var duration=moment.duration(scope.value,scope.period||"seconds");element.text(duration.humanize())}else element.text("never")}setDurationText(),scope.$watch("value",(function(value){setDurationText()}));var interval=$interval(setDurationText,15e3);scope.$on("$destroy",(function(){$interval.cancel(interval)}))}}}])}(),function(){"use strict";angular.module("exceptionless.error",[]).factory("errorService",(function(){function getExceptions(exception){for(var exceptions=[],currentException=exception;currentException;)exceptions.push(currentException),currentException=currentException.inner;return exceptions}function getTargetInfo(exception){return exception&&exception.data?exception.data["@target"]:null}function getTargetInfoExceptionType(exception){var target=getTargetInfo(exception);return target&&target.ExceptionType?target.ExceptionType:null}function getTargetInfoMethod(exception){var target=getTargetInfo(exception);return target&&target.Method?target.Method:null}function getTargetInfoMessage(exception){var target=getTargetInfo(exception);return target&&target.Message?target.Message:null}var service;return{getExceptions:getExceptions,getTargetInfoExceptionType:getTargetInfoExceptionType,getTargetInfoMethod:getTargetInfoMethod,getTargetInfoMessage:getTargetInfoMessage}}))}(),function(){"use strict";angular.module("exceptionless.event",["restangular","exceptionless.filter","exceptionless.objectid"]).factory("eventService",["filterService","objectIDService","organizationService","Restangular",function(filterService,objectIDService,organizationService,Restangular){function calculateAveragePerHour(total,organizations){var range=filterService.getTimeRange();range.start=moment.max([range.start,moment(filterService.getOldestPossibleEventDate()),moment(organizationService.getOldestPossibleEventDate(organizations))].filter((function(d){return!!d}))),range.end=range.end||moment();var result=total/range.end.diff(range.start,"hours",!0);return!isNaN(parseFloat(result))&&isFinite(result)?result:0}function count(aggregations,optionsCallback,includeHiddenAndFixedFilter){var options=filterService.apply(aggregations&&aggregations.length>0?{aggregations:aggregations}:{},includeHiddenAndFixedFilter);options=angular.isFunction(optionsCallback)?optionsCallback(options):options;var organization=filterService.getOrganizationId();if(organization)return Restangular.one("organizations",organization).one("events","count").get(options);var project=filterService.getProjectId();return project?Restangular.one("projects",project).one("events","count").get(options):Restangular.one("events","count").get(options)}function getAll(options,optionsCallback,includeHiddenAndFixedFilter){var mergedOptions=(optionsCallback=angular.isFunction(optionsCallback)?optionsCallback:function(o){return o})(filterService.apply(options,includeHiddenAndFixedFilter)),organization=filterService.getOrganizationId();if(organization)return Restangular.one("organizations",organization).all("events").getList(mergedOptions);var project=filterService.getProjectId();return project?Restangular.one("projects",project).all("events").getList(mergedOptions):Restangular.all("events").getList(mergedOptions)}function getAllSessions(options,optionsCallback){var mergedOptions=(optionsCallback=angular.isFunction(optionsCallback)?optionsCallback:function(o){return o})(filterService.apply(options,!1)),organization=filterService.getOrganizationId();if(organization)return Restangular.one("organizations",organization).one("events").all("sessions").getList(mergedOptions);var project=filterService.getProjectId();return project?Restangular.one("projects",project).one("events").all("sessions").getList(mergedOptions):Restangular.one("events").all("sessions").getList(mergedOptions)}function getById(id,options,optionsCallback){return optionsCallback=angular.isFunction(optionsCallback)?optionsCallback:function(o){return o},Restangular.one("events",id).get(optionsCallback(filterService.apply(options)))}function getByReferenceId(id,options){return Restangular.one("events","by-ref").all(id).getList(filterService.apply(options,!1))}function getBySessionId(projectId,id,options,optionsCallback){return optionsCallback=angular.isFunction(optionsCallback)?optionsCallback:function(o){return o},Restangular.one("projects",projectId).one("events","sessions").all(id).getList(optionsCallback(filterService.apply(options,!1)))}function getByStackId(id,options){return Restangular.one("stacks",id).all("events").getList(filterService.apply(options,!1))}function markCritical(id){return Restangular.one("events",id).one("mark-critical").post()}function markNotCritical(id){return Restangular.one("events",id).one("mark-critical").remove()}function remove(id){return Restangular.one("events",id).remove()}var service;return{calculateAveragePerHour:calculateAveragePerHour,count:count,getAll:getAll,getAllSessions:getAllSessions,getById:getById,getByReferenceId:getByReferenceId,getBySessionId:getBySessionId,getByStackId:getByStackId,markCritical:markCritical,markNotCritical:markNotCritical,remove:remove}}])}(),function(){"use strict";angular.module("exceptionless.events",["checklist-model","ui.bootstrap","dialogs.main","dialogs.default-translations","exceptionless","exceptionless.filter","exceptionless.link","exceptionless.notification","exceptionless.pagination","exceptionless.refresh","exceptionless.relative-time","exceptionless.summary","exceptionless.timeago"])}(),function(){"use strict";angular.module("exceptionless.events").factory("eventsActionsService",["$ExceptionlessClient","dialogService","eventService","notificationService","$q",function($ExceptionlessClient,dialogService,eventService,notificationService,$q){var source="exceptionless.events.eventsActionsService",deleteAction={name:"Delete",run:function(ids){return $ExceptionlessClient.createFeatureUsage(source+".delete").setProperty("count",ids.length).submit(),dialogService.confirmDanger("Are you sure you want to delete these events?","DELETE EVENTS").then((function(){function onSuccess(){notificationService.info("Successfully queued the events for deletion.")}function onFailure(){$ExceptionlessClient.createFeatureUsage(source+".delete.error").setProperty("count",ids.length).submit(),notificationService.error("An error occurred while deleting the events.")}var deferred=$q.defer(),promise=_.chunk(ids,10).reduce((function(previous,item){return previous.then(eventService.remove(item.join(",")))}),deferred.promise).then(onSuccess,onFailure);return deferred.resolve(),promise})).catch((function(e){}))}},service;function getActions(){return[deleteAction]}return{getActions:getActions}}])}(),function(){"use strict";angular.module("exceptionless.events").directive("events",["linkService",function(linkService){return{bindToController:!0,restrict:"E",replace:!0,scope:{settings:"="},templateUrl:"components/events/events-directive.tpl.html",controller:["$ExceptionlessClient","$window","$state","$stateParams","eventsActionsService","filterService","linkService","notificationService","paginationService",function($ExceptionlessClient,$window,$state,$stateParams,eventsActionsService,filterService,linkService,notificationService,paginationService){var vm=this;function canRefresh(data){return data&&"PersistentEvent"===data.type?!!data.deleted&&(data.id&&vm.events?vm.events.filter((function(e){return e.id===data.id})).length>0:filterService.includedInProjectOrOrganizationFilter({organizationId:data.organization_id,projectId:data.project_id})):data&&"Stack"===data.type?filterService.includedInProjectOrOrganizationFilter({organizationId:data.organization_id,projectId:data.project_id}):data&&"Organization"===data.type||"Project"===data.type?filterService.includedInProjectOrOrganizationFilter({organizationId:data.id,projectId:data.id}):!data}function get(options){function onSuccess(response){vm.events=response.data.plain(),vm.selectedIds=vm.selectedIds.filter((function(id){return vm.events.filter((function(e){return e.id===id})).length>0}));var links=linkService.getLinksQueryParameters(response.headers("link"));return vm.previous=links.previous,vm.next=links.next,vm.pageSummary=paginationService.getCurrentPageSummary(response.data,vm.currentOptions.page,vm.currentOptions.limit),0===vm.events.length&&vm.currentOptions.page&&vm.currentOptions.page>1?get():vm.events}function onFailure(response){return $ExceptionlessClient.createLog(vm._source+".get","Error while loading events","Error").setProperty("options",options).setProperty("response",response).submit(),response}return vm.loading=0===vm.events.length,vm.currentOptions=options||vm.settings.options,vm.settings.get(vm.currentOptions).then(onSuccess,onFailure).finally((function(){vm.loading=!1}))}function open(id,event){var openInNewTab=event.ctrlKey||event.metaKey||2===event.which;$ExceptionlessClient.createFeatureUsage(vm._source+".open").setProperty("id",id).setProperty("_blank",openInNewTab).submit(),openInNewTab?$window.open($state.href("app.event",{id:id},{absolute:!0}),"_blank"):$state.go("app.event",{id:id}),event.preventDefault()}function nextPage(){return $ExceptionlessClient.createFeatureUsage(vm._source+".nextPage").setProperty("next",vm.next).submit(),get(vm.next)}function previousPage(){return $ExceptionlessClient.createFeatureUsage(vm._source+".previousPage").setProperty("previous",vm.previous).submit(),get(vm.previous)}function save(action){function onSuccess(){vm.selectedIds=[]}0===vm.selectedIds.length?notificationService.info(null,"Please select one or more events"):action.run(vm.selectedIds).then(onSuccess)}function updateSelection(){vm.events&&0===vm.events.length||(vm.selectedIds.length>0?vm.selectedIds=[]:vm.selectedIds=vm.events.map((function(event){return event.id})))}function toggleDateSort(){vm.settings.sortByDateDescending=!vm.sortByDateDescending,vm.sortByDateDescending=vm.settings.sortByDateDescending;var options=vm.currentOptions,sortPrefix=vm.sortByDateDescending?"-":"+";options.sort=sortPrefix+"date",get(options)}this.$onInit=function $onInit(){vm._source=vm.settings.source+".events",vm.actions=vm.settings.hideActions?[]:eventsActionsService.getActions(),vm.canRefresh=canRefresh,vm.events=[],vm.get=get,vm.hasFilter=filterService.hasFilter,vm.hideSessionStartTime=vm.settings.hideSessionStartTime||!1,vm.loading=!0,vm.open=open,vm.nextPage=nextPage,vm.previousPage=previousPage,vm.timeHeaderText=vm.settings.timeHeaderText||"Date",vm.relativeTo=function(){return vm.settings.relativeTo},vm.toggleDateSort=toggleDateSort,vm.sortByDateDescending=void 0===vm.settings.sortByDateDescending||vm.sortByDateDescending,vm.save=save,vm.selectedIds=[],vm.showType=vm.settings.summary?vm.settings.summary.showType:!filterService.getEventType(),vm.updateSelection=updateSelection,get()}}],controllerAs:"vm"}}])}(),function(){"use strict";angular.module("exceptionless.filter",["angular-locker","exceptionless.date-range-parser","exceptionless.objectid","exceptionless.organization"])}(),function(){"use strict";angular.module("exceptionless.filter").factory("filterService",["$rootScope","dateRangeParserService","filterStoreService","objectIDService","organizationService",function($rootScope,dateRangeParserService,filterStoreService,objectIDService,organizationService){var DEFAULT_TIME_FILTER="last week",_time=filterStoreService.getTimeFilter()||"last week",_eventType,_organizationId,_projectId,_raw,service;function apply(source,includeHiddenAndFixedFilter){return angular.extend({},getDefaultOptions(includeHiddenAndFixedFilter),source)}function buildFilter(includeHiddenAndFixedFilter){includeHiddenAndFixedFilter=void 0===includeHiddenAndFixedFilter||includeHiddenAndFixedFilter;var filters=[];_organizationId&&filters.push("organization:"+_organizationId),_projectId&&filters.push("project:"+_projectId),_eventType&&filters.push("type:"+_eventType);var filter=_raw||"",isWildCardFilter="*"===filter.trim(),hasFixed,hasHidden;includeHiddenAndFixedFilter&&!isWildCardFilter&&(-1!==filter.search(/\bfixed:/i)||filters.push("fixed:false"),-1!==filter.search(/\bhidden:/i)||filters.push("hidden:false"));return filter&&!isWildCardFilter&&filters.push("("+filter+")"),filters.join(" ").trim()}function clearFilter(){_raw&&(setFilter(null,!1),fireFilterChanged())}function clearOrganizationAndProjectFilter(){(_organizationId||_projectId)&&(_organizationId=_projectId=null,fireFilterChanged())}function fireFilterChanged(includeHiddenAndFixedFilter){var options={organization_id:_organizationId,project_id:_projectId,type:_eventType};$rootScope.$emit("filterChanged",angular.extend(options,getDefaultOptions(includeHiddenAndFixedFilter)))}function getDefaultOptions(includeHiddenAndFixedFilter){var options={},offset=getTimeOffset();offset&&angular.extend(options,{offset:offset});var filter=buildFilter(includeHiddenAndFixedFilter);return filter&&angular.extend(options,{filter:filter}),_time&&"all"!==_time&&angular.extend(options,{time:_time}),options}function getFilter(){return _raw}function getProjectId(){return _projectId}function getOrganizationId(){return _organizationId}function getEventType(){return _eventType}function getOldestPossibleEventDate(){var date=objectIDService.getDate(getOrganizationId()||getProjectId());return date?moment(date).subtract(3,"days").toDate():new Date(2012,1,1)}function getTime(){return _time||"last week"}function getTimeRange(){var time=getTime();if("all"===time)return{start:void 0,end:void 0};if("last hour"===time)return{start:moment().subtract(1,"hours"),end:void 0};if("last 24 hours"===time)return{start:moment().subtract(24,"hours"),end:void 0};if("last week"===time)return{start:moment().subtract(7,"days").startOf("day"),end:void 0};if("last 30 days"===time)return{start:moment().subtract(30,"days").startOf("day"),end:void 0};var range=dateRangeParserService.parse(time);return range&&range.start&&range.end?{start:moment(range.start),end:moment(range.end)}:{start:moment().subtract(7,"days").startOf("day"),end:void 0}}function getTimeOffset(){var offset=(new Date).getTimezoneOffset();return 0!==offset?-1*offset+"m":void 0}function hasFilter(){return _raw||_time&&"all"!==_time}function includedInProjectOrOrganizationFilter(data){return!(!data.organizationId&&!data.projectId)&&(!_organizationId&&!_projectId||(_organizationId===data.organizationId||_projectId===data.projectId))}function setEventType(eventType,suspendNotifications){angular.equals(eventType,_eventType)||(_eventType=eventType,suspendNotifications||fireFilterChanged())}function setOrganizationId(id,suspendNotifications){angular.equals(id,_organizationId)||id&&!objectIDService.isValid(id)||(_organizationId=id,_projectId=null,suspendNotifications||fireFilterChanged())}function setProjectId(id,suspendNotifications){angular.equals(id,_projectId)||id&&!objectIDService.isValid(id)||(_projectId=id,_organizationId=null,suspendNotifications||fireFilterChanged())}function setTime(time,suspendNotifications){angular.equals(time,_time)||(_time=time||"last week",filterStoreService.setTimeFilter(_time),suspendNotifications||fireFilterChanged())}function setFilter(raw,suspendNotifications){angular.equals(raw,_raw)||(_raw=raw,suspendNotifications||fireFilterChanged())}return $rootScope.$on("OrganizationChanged",(function($event,organizationChanged){organizationChanged.id===getOrganizationId()&&organizationChanged.deleted&&setOrganizationId()})),$rootScope.$on("ProjectChanged",(function($event,projectChanged){projectChanged.id===getProjectId()&&projectChanged.deleted&&setProjectId()})),{apply:apply,clearFilter:clearFilter,clearOrganizationAndProjectFilter:clearOrganizationAndProjectFilter,fireFilterChanged:fireFilterChanged,getEventType:getEventType,getFilter:getFilter,getProjectId:getProjectId,getOrganizationId:getOrganizationId,getOldestPossibleEventDate:getOldestPossibleEventDate,getTime:getTime,getTimeRange:getTimeRange,getTimeOffset:getTimeOffset,hasFilter:hasFilter,includedInProjectOrOrganizationFilter:includedInProjectOrOrganizationFilter,setEventType:setEventType,setFilter:setFilter,setOrganizationId:setOrganizationId,setProjectId:setProjectId,setTime:setTime}}])}(),function(){"use strict";angular.module("exceptionless.filter").factory("filterStoreService",["$window","locker",function($window,locker){var _store=locker.driver("local").namespace("filter"),service;function getTimeFilter(){return _store.get("time")}function setTimeFilter(timeFilter){_store.put("time",timeFilter)}return{getTimeFilter:getTimeFilter,setTimeFilter:setTimeFilter}}])}(),function(){"use strict";angular.module("exceptionless.intercom",["angular-intercom","app.config","exceptionless.analytics","exceptionless.objectid"]).config(["$intercomProvider","INTERCOM_APPID",function($intercomProvider,INTERCOM_APPID){INTERCOM_APPID&&($intercomProvider.appID(INTERCOM_APPID),$intercomProvider.asyncLoading(!0))}])}(),function(){"use strict";angular.module("exceptionless.intercom").directive("intercom",[function(){return{bindToController:!0,restrict:"E",replace:!0,templateUrl:"components/intercom/intercom-directive.tpl.html",controller:["$interval","$scope","analyticsService","authService","filterService","INTERCOM_APPID","$intercom","objectIDService","organizationService","projectService","userService",function($interval,$scope,analyticsService,authService,filterService,INTERCOM_APPID,$intercom,objectIDService,organizationService,projectService,userService){if(authService.isAuthenticated()){var vm=this;this.$onInit=function $onInit(){var interval=$interval(updateIntercom,9e4);$scope.$on("$destroy",(function(){$interval.cancel(interval)})),vm.getOrganizations=getOrganizations,vm.getProjects=getProjects,vm.getUser=getUser,vm.hide=hide,vm.IntercomAppId=INTERCOM_APPID,vm.shutdown=shutdown,vm.updateIntercom=updateIntercom,get().then(initializeIntercom)}}function get(){return getUser().then(getOrganizations).then(getProjects)}function getCurrentOrganization(){function getOrganizationFromProjectFilter(){if(!vm.projects||!filterService.getProjectId())return null;var project=vm.projects.filter((function(o){return o.id===filterService.getProjectId()}))[0];return project?vm.organizations.filter((function(o){return o.id===project.organization_id}))[0]:null}return vm.organizations&&0!==vm.organizations.length?(filterService.getOrganizationId()?currentOrganization=vm.organizations.filter((function(o){return o.id===filterService.getOrganizationId()}))[0]:filterService.getProjectId()&&(currentOrganization=getOrganizationFromProjectFilter()),currentOrganization||vm.organizations[0]):null;var currentOrganization}function getIntercomData(){if(vm.user){var data=angular.extend({},analyticsService.getRegistrationQueryStringData(),{user_id:vm.user.id,user_hash:vm.user.hash,name:vm.user.full_name,email:vm.user.email_address,remote_created_at:objectIDService.create(vm.user.id).timestamp}),versionParts="@@version".split(".");3===versionParts.length&&(data.app_build=parseInt(versionParts[2]));var currentOrganization=getCurrentOrganization();if(currentOrganization){var total=0;angular.forEach(currentOrganization.usage||[],(function(data,key){total+=data.total||0})),data.company={company_id:currentOrganization.id,name:currentOrganization.name,remote_created_at:objectIDService.create(currentOrganization.id).timestamp,plan:currentOrganization.plan_id,monthly_spend:currentOrganization.billing_price,billing_changed_by_user_id:currentOrganization.billing_changed_by_user_id,total_events:total},currentOrganization.subscribe_date&&(data.company.subscribe_at=moment(currentOrganization.subscribe_date).unix())}return data}}function getOrganizations(canUpdate){function onSuccess(response){return vm.organizations=response.data.plain(),!0===canUpdate&&updateIntercom(),vm.organizations}return organizationService.getAll().then(onSuccess)}function getProjects(canUpdate){function onSuccess(response){return vm.projects=response.data.plain(),!0===canUpdate&&updateIntercom(),vm.projects}return projectService.getAll().then(onSuccess)}function getUser(canUpdate){function onSuccess(response){return vm.user=response.data.plain(),!0===canUpdate&&updateIntercom(),vm.user}return userService.getCurrentUser().then(onSuccess)}function hide(){$intercom.hide()}function initializeIntercom(){return $intercom.boot(getIntercomData())}function shutdown(){return $intercom.shutdown()}function updateIntercom(hideInterface){return!0===hideInterface&&hide(),$intercom.update(getIntercomData())}}],controllerAs:"vm"}}])}(),function(){"use strict";angular.module("exceptionless.link",[]).factory("linkService",(function(){function getLinks(linkHeader){return null==linkHeader?{}:li.parse(linkHeader||{})}function getLinksQueryParameters(linkHeader){var parsedLinks=getLinks(linkHeader),links={};for(var rel in parsedLinks){var url=parsedLinks[rel];links[rel]=parseQueryString(url.slice(url.indexOf("?")))}return links}function parseQueryString(input){var result=Object.create(null);return"string"!=typeof input?result:(input=input.trim().replace(/^(\?|#|&)/,""))?(input.split("&").forEach((function(param){var parts=param.replace(/\+/g," ").split("="),key=parts.shift(),val=parts.length>0?parts.join("="):void 0;key=decodeURIComponent(key),val=void 0===val?null:decodeURIComponent(val),void 0===result[key]?result[key]=val:Array.isArray(result[key])?result[key].push(val):result[key]=[result[key],val]})),result):result}var service;return{getLinks:getLinks,getLinksQueryParameters:getLinksQueryParameters}}))}(),function(){"use strict";angular.module("exceptionless.loading-bar",["cfp.loadingBarInterceptor"]).directive("loadingBar",["$rootScope",function($rootScope){return{bindToController:!0,restrict:"A",link:function(scope,element,attrs){var _hideOnCompleted=!1;$rootScope.$on("cfpLoadingBar:completed",(function(){_hideOnCompleted&&(_hideOnCompleted=!1,element.addClass("loading-bar-disabled"))})),$rootScope.$on("$stateChangeStart",(function(){element.removeClass("loading-bar-disabled"),_hideOnCompleted=!0}))}}}])}(),function(){"use strict";angular.module("exceptionless.notification",["toaster"]).factory("notificationService",["toaster",function(toaster){function error(title,text){toaster.pop("error",title,text,5e3)}function info(title,text){toaster.pop("note",title,text,3e3)}function success(title,text){toaster.pop("success",title,text,3e3)}function wait(title,text){toaster.pop("wait",title,text,3e3)}function warning(title,text){toaster.pop("warning",title,text,3e3)}var service;return{error:error,info:info,success:success,wait:wait,warning:warning}}])}(),function(){"use strict";angular.module("exceptionless.object-dump",[])}(),function(){"use strict";angular.module("exceptionless.object-dump").directive("objectDump",["handlebarsService",function(handlebarsService){return{restrict:"E",scope:{content:"=content",templateKey:"=templateKey"},link:function(scope,element){if(void 0!==scope.content)try{var content=scope.content,template=handlebarsService.getTemplate(scope.templateKey);if("string"==typeof content||content instanceof String)try{content=JSON.parse(scope.content)}catch(ex){template=handlebarsService.getTemplate("pre")}element.html(template(content))}catch(ex){element.text(scope.content)}}}}])}(),function(){"use strict";angular.module("exceptionless.object-dump").factory("handlebarsService",(function(){var _defaultsRegistered=!1,_templates={__default:"{{> valueDump}}",pre:"{{#ifHasData this}}<pre>{{> valueDump}}</pre>{{/ifHasData}}"},_compiledTemplates={},service;function getTemplate(templateKey){if(_defaultsRegistered||(registerDefaults(),_defaultsRegistered=!0),templateKey&&_templates.hasOwnProperty(templateKey)||(templateKey="__default"),_compiledTemplates.hasOwnProperty(templateKey))return _compiledTemplates[templateKey];var source=_templates[templateKey],template=Handlebars.compile(source);return _compiledTemplates[templateKey]=template,_compiledTemplates[templateKey]}function isEmpty(value){return null===value||("object"==typeof value||value instanceof Object?!(Object.keys(value).length>0):("[object Array]"===Object.prototype.toString.call(value)||value instanceof Array)&&!(value.length>0))}function reflect(value){return{value:value,type:typeof value,isString:"string"==typeof value||value instanceof String,isNumber:"number"==typeof value||value instanceof Number,isBoolean:"boolean"==typeof value||value instanceof Boolean,isArray:"[object Array]"===Object.prototype.toString.call(value)||value instanceof Array,isObject:("object"==typeof value||value instanceof Object)&&null!==value,isNull:null===value,isEmptyValue:isEmpty(value),isSimpleType:!("[object Array]"===Object.prototype.toString.call(value)||value instanceof Array||"object"==typeof value||value instanceof Object)}}function registerDefaults(){registerPartials(),registerHelpers()}function registerHelpers(){Handlebars.registerHelper("reflect",(function(context,options){return options.fn(reflect(context))})),Handlebars.registerHelper("properties",(function(context,options){var fn=options.fn,ret="",data;return options.data&&(data=Handlebars.createFrame(options.data)),context&&Object.keys(context||{}).sort().forEach((function(key){var info=reflect(context[key]);info.name=key,ret+=fn(info,{data:data})})),ret})),Handlebars.registerHelper("toSpaceWords",(function(value){return value&&value.length?(value=(value=(value=value.replace(/_/g," ").replace(/\s+/g," ").trim()).replace(/([a-z0-9])([A-Z0-9])/g,"$1 $2")).length>1?value.charAt(0).toUpperCase()+value.slice(1):value,new Handlebars.SafeString(Handlebars.Utils.escapeExpression(value))):""})),Handlebars.registerHelper("ifHasData",(function(context,options){return isEmpty(context)?options.inverse(this):options.fn(this)}))}function registerPartials(){Handlebars.registerPartial("objectDump",'{{#ifHasData this}}<table class="table table-striped table-bordered table-fixed table-key-value b-t object-dump">\r\n{{#properties this}}  <tr>\r\n    <th>{{toSpaceWords name}}</th>\r\n    <td>\r\n      {{#with value}}{{> valueDump}}{{/with}}    </td>\r\n  </tr>\r\n{{/properties}}</table>\r\n{{/ifHasData}}'),Handlebars.registerPartial("arrayDump","{{#ifHasData this}}<ul>\r\n{{#each this}}  <li>{{> valueDump}}</li>\r\n{{/each}}</ul>\r\n{{/ifHasData}}"),Handlebars.registerPartial("valueDump","{{#reflect this}}{{#if isArray}}{{#with value}}{{> arrayDump}}{{/with}}{{else}}{{#if isObject}} {{#with value}}{{> objectDump}}{{/with}}{{else}}{{#if isBoolean}}{{#if value}}True\r\n{{else}}False\r\n{{/if}}{{else}}{{#if isNull}}(Null)\r\n{{else}}{{value}}\r\n{{/if}}{{/if}}{{/if}}{{/if}}{{/reflect}}")}function registerTemplate(key,template){_templates[key]=template}return{getTemplate:getTemplate,isEmpty:isEmpty,reflect:reflect,registerDefaults:registerDefaults,registerHelpers:registerHelpers,registerPartials:registerPartials,registerTemplate:registerTemplate}}))}(),function(){"use strict";angular.module("exceptionless.objectid",[]).factory("objectIDService",(function(){function create(id){return new ObjectId(id)}function isValid(id){return!(!id||!("number"==typeof id||id instanceof Number||12===id.length||24===id.length))&&(!("string"==typeof id||id instanceof String)||24!==id.length||/^[0-9a-fA-F]{24}$/i.test(id))}function getDate(id){if(isValid(id))return create(id).getDate()}var service;return{create:create,isValid:isValid,getDate:getDate}}))}(),function(){"use strict";angular.module("exceptionless.organization",["restangular"]).factory("organizationService",["$cacheFactory","$rootScope","objectIDService","Restangular",function($cacheFactory,$rootScope,objectIDService,Restangular){var _cache=$cacheFactory("http:organization");$rootScope.$on("cache:clear",_cache.removeAll),$rootScope.$on("cache:clear-organization",_cache.removeAll),$rootScope.$on("auth:logout",_cache.removeAll),$rootScope.$on("OrganizationChanged",_cache.removeAll),$rootScope.$on("ProjectChanged",_cache.removeAll),$rootScope.$on("StackChanged",(function($event,data){data.added&&_cache.removeAll()}));var _cachedRestangular=Restangular.withConfig((function(RestangularConfigurer){RestangularConfigurer.setDefaultHttpFields({cache:_cache})})),service;function addUser(id,email){return Restangular.one("organizations",id).one("users",email).post()}function create(name){return Restangular.all("organizations").post({name:name})}function changePlan(id,options){return Restangular.one("organizations",id).customPOST(null,"change-plan",options)}function getOldestCreationDate(organizations){if(organizations){if(organizations.length>1)return new Date(1e3*organizations.reduce((function(o1,o2){return Math.min(objectIDService.create(o1.id).timestamp,objectIDService.create(o2.id).timestamp)})));if(1===organizations.length)return objectIDService.getDate(organizations[0].id)}return new Date(2012,1,1)}function getOldestRetentionStartDate(organizations,maximumRetentionDays){maximumRetentionDays||(maximumRetentionDays=moment().diff(new Date(2012,1,1),"days"));var retentionDays=maximumRetentionDays;return organizations&&(organizations.length>1?retentionDays=organizations.reduce((function(o1,o2){return Math.max(o1.retention_days>0?o1.retention_days:maximumRetentionDays,o2.retention_days>0?o2.retention_days:maximumRetentionDays)})):1===organizations.length&&(retentionDays=organizations[0].retention_days)),retentionDays<=0?new Date(2012,1,1):moment().subtract(retentionDays,"days").toDate()}function getOldestPossibleEventDate(organizations,maximumRetentionDays){return moment.max([moment(getOldestCreationDate(organizations)).subtract(3,"days"),moment(getOldestRetentionStartDate(organizations,maximumRetentionDays))]).toDate()}function getAll(options,useCache){return void 0===useCache||useCache?_cachedRestangular.all("organizations").getList(options||{}):Restangular.all("organizations").getList(options||{})}function getById(id,useCache){return void 0===useCache||useCache?_cachedRestangular.one("organizations",id).get():Restangular.one("organizations",id).get()}function getInvoice(id){return Restangular.one("organizations","invoice").one(id).get()}function getInvoices(id,options){return Restangular.one("organizations",id).all("invoices").getList(options||{})}function getPlans(id){return _cachedRestangular.one("organizations",id).all("plans").getList()}function isNameAvailable(name){return Restangular.one("organizations","check-name").get({name:encodeURIComponent(name)})}function remove(id){return Restangular.one("organizations",id).remove()}function removeUser(id,email){return Restangular.one("organizations",id).one("users",email).remove()}function update(id,organization){return Restangular.one("organizations",id).patch(organization)}return{addUser:addUser,create:create,changePlan:changePlan,getOldestCreationDate:getOldestCreationDate,getOldestRetentionStartDate:getOldestRetentionStartDate,getOldestPossibleEventDate:getOldestPossibleEventDate,getAll:getAll,getById:getById,getInvoice:getInvoice,getInvoices:getInvoices,getPlans:getPlans,isNameAvailable:isNameAvailable,remove:remove,removeUser:removeUser,update:update}}])}(),function(){"use strict";angular.module("exceptionless.organization-notifications",["angular-intercom","app.config","exceptionless.billing","exceptionless.filter","exceptionless.notification","exceptionless.organization","exceptionless.project","exceptionless.refresh","exceptionless.search"]).directive("organizationNotifications",(function(){return{restrict:"E",replace:!0,scope:{organizationId:"=",ignoreFree:"=",ignoreConfigureProjects:"=",requiresPremium:"="},templateUrl:"components/organization-notifications/organization-notifications-directive.tpl.html",controller:["$scope","billingService","filterService","INTERCOM_APPID","$intercom","notificationService","organizationService","projectService","searchService","STRIPE_PUBLISHABLE_KEY",function($scope,billingService,filterService,INTERCOM_APPID,$intercom,notificationService,organizationService,projectService,searchService,STRIPE_PUBLISHABLE_KEY){var vm=this;function get(){return getOrganizations().then(getProjects).then(getFilterUsesPremiumFeatures).then(getOrganizationNotifications)}function getCurrentOrganizationId(){function getOrganizationFromProjectFilter(){if(!vm.projects||!filterService.getProjectId())return null;var project=vm.projects.filter((function(o){return o.id===filterService.getProjectId()}))[0];return project?project.organization_id:null}return $scope.organizationId||filterService.getOrganizationId()||getOrganizationFromProjectFilter()}function getCurrentProjects(){var currentOrganizationId=$scope.organizationId||filterService.getOrganizationId();return currentOrganizationId?vm.projects.filter((function(p){return p.organization_id===currentOrganizationId})):filterService.getProjectId()?vm.projects.filter((function(p){return p.id===filterService.getProjectId()})):vm.projects}function getFilterUsesPremiumFeatures(){function onSuccess(response){return vm.filterUsesPremiumFeatures=!0===response.data.uses_premium_features,vm.filterUsesPremiumFeatures}return vm.filterUsesPremiumFeatures=!1,searchService.validate(filterService.getFilter()).then(onSuccess)}function getOrganizationNotifications(){vm.exceededRequestLimitOrganizations=[],vm.freeOrganizations=[],vm.hourlyOverageOrganizations=[],vm.monthlyOverageOrganizations=[],vm.projectsRequiringConfiguration=[],vm.organizationsWithoutPremiumFeatures=[],vm.organizationsWithNoProjects=[],vm.suspendedForBillingOrganizations=[],vm.suspendedForAbuseOrOverageOrNotActiveOrganizations=[],vm.suspendedOrganizations=[];var currentOrganizationId=getCurrentOrganizationId(),currentProjects=getCurrentProjects();angular.forEach(vm.organizations,(function(organization){if(!currentOrganizationId||organization.id===currentOrganizationId){if(!0===organization.is_suspended)return vm.suspendedOrganizations.push(organization),void("Billing"===organization.suspension_code?vm.suspendedForBillingOrganizations.push(organization):1===organization.billing_status&&"Abuse"!==organization.suspension_code&&"Overage"!==organization.suspension_code||vm.suspendedForAbuseOrOverageOrNotActiveOrganizations.push(organization));var canShowConfigurationAlert=currentProjects.filter((function(p){return!1===p.is_configured})).length===currentProjects.length,tryingToSearchWithoutPremiumFeatures=vm.filterUsesPremiumFeatures&&!organization.has_premium_features,upgradeRequiredForPremiumFeatures=$scope.requiresPremium&&!organization.has_premium_features;if(!tryingToSearchWithoutPremiumFeatures&&!upgradeRequiredForPremiumFeatures||canShowConfigurationAlert||vm.organizationsWithoutPremiumFeatures.push(organization),!0!==organization.is_over_monthly_limit)if(!0!==organization.is_over_hourly_limit)if(!0!==organization.is_over_request_limit)if(0!==currentProjects.length){if(!$scope.ignoreConfigureProjects&&canShowConfigurationAlert){var hasProjectsRequiringConfiguration=!1;if(angular.forEach(currentProjects,(function(project){project.organization_id===organization.id&&!1===project.is_configured&&(vm.projectsRequiringConfiguration.push(project),hasProjectsRequiringConfiguration=!0)})),hasProjectsRequiringConfiguration)return}tryingToSearchWithoutPremiumFeatures||upgradeRequiredForPremiumFeatures||$scope.ignoreFree||"EX_FREE"!==organization.plan_id||vm.freeOrganizations.push(organization)}else vm.organizationsWithNoProjects.push(organization);else vm.exceededRequestLimitOrganizations.push(organization);else vm.hourlyOverageOrganizations.push(organization);else vm.monthlyOverageOrganizations.push(organization)}})),vm.hasNotifications=!0}function getOrganizations(){function getSelectedOrganization(){function onSuccess(response){return vm.organizations.push(response.data.plain()),vm.organizations}var organizationId=getCurrentOrganizationId();if(organizationId&&!vm.organizations.filter((function(o){return o.id===organizationId}))[0])return organizationService.getById(organizationId,!0).then(onSuccess)}function getAllOrganizations(){function onSuccess(response){return vm.organizations=response.data.plain(),vm.organizations}return organizationService.getAll().then(onSuccess)}return getAllOrganizations().then(getSelectedOrganization)}function getProjects(){function onSuccess(response){return vm.projects=response.data.plain(),vm.projects}return projectService.getAll().then(onSuccess)}function hasExceededRequestLimitOrganizations(){return vm.exceededRequestLimitOrganizations&&vm.exceededRequestLimitOrganizations.length>0}function hasFreeOrganizations(){return vm.freeOrganizations&&vm.freeOrganizations.length>0}function hasHourlyOverageOrganizations(){return vm.hourlyOverageOrganizations&&vm.hourlyOverageOrganizations.length>0}function hasMonthlyOverageOrganizations(){return vm.monthlyOverageOrganizations&&vm.monthlyOverageOrganizations.length>0}function hasProjectsRequiringConfiguration(){return vm.projectsRequiringConfiguration&&vm.projectsRequiringConfiguration.length>0}function hasOrganizations(){return vm.organizations&&vm.organizations.length>0}function hasOrganizationsWithoutPremiumFeatures(){return vm.organizationsWithoutPremiumFeatures&&vm.organizationsWithoutPremiumFeatures.length>0}function hasOrganizationsWithNoProjects(){return vm.organizationsWithNoProjects&&vm.organizationsWithNoProjects.length>0}function hasSuspendedForBillingOrganizations(){return vm.suspendedForBillingOrganizations&&vm.suspendedForBillingOrganizations.length>0}function hasSuspendedForAbuseOrOverageOrNotActiveOrganizations(){return vm.suspendedForAbuseOrOverageOrNotActiveOrganizations&&vm.suspendedForAbuseOrOverageOrNotActiveOrganizations.length>0}function hasSuspendedOrganizations(){return vm.suspendedOrganizations&&vm.suspendedOrganizations.length>0}function isIntercomEnabled(){return INTERCOM_APPID}function onFilterChanged(){return getFilterUsesPremiumFeatures().then(getOrganizationNotifications)}function showChangePlanDialog(organizationId){if(STRIPE_PUBLISHABLE_KEY)return!(organizationId=organizationId||getCurrentOrganizationId())&&hasSuspendedOrganizations()&&(organizationId=vm.suspendedOrganizations[0].id),!organizationId&&hasMonthlyOverageOrganizations()&&(organizationId=vm.monthlyOverageOrganizations[0].id),!organizationId&&hasHourlyOverageOrganizations()&&(organizationId=vm.hourlyOverageOrganizations[0].id),!organizationId&&hasFreeOrganizations()&&(organizationId=vm.freeOrganizations[0].id),billingService.changePlan(organizationId).catch((function(e){}));notificationService.error("Billing is currently disabled.")}function showIntercom(){$intercom.showNewMessage()}this.$onInit=function $onInit(){vm.exceededRequestLimitOrganizations=[],vm.freeOrganizations=[],vm.get=get,vm.getOrganizationNotifications=getOrganizationNotifications,vm.hasExceededRequestLimitOrganizations=hasExceededRequestLimitOrganizations,vm.hasFreeOrganizations=hasFreeOrganizations,vm.hasHourlyOverageOrganizations=hasHourlyOverageOrganizations,vm.hasMonthlyOverageOrganizations=hasMonthlyOverageOrganizations,vm.hasNotifications=!1,vm.hasProjectsRequiringConfiguration=hasProjectsRequiringConfiguration,vm.hasOrganizations=hasOrganizations,vm.hasOrganizationsWithoutPremiumFeatures=hasOrganizationsWithoutPremiumFeatures,vm.hasOrganizationsWithNoProjects=hasOrganizationsWithNoProjects,vm.hasSuspendedForBillingOrganizations=hasSuspendedForBillingOrganizations,vm.hasSuspendedForAbuseOrOverageOrNotActiveOrganizations=hasSuspendedForAbuseOrOverageOrNotActiveOrganizations,vm.hasSuspendedOrganizations=hasSuspendedOrganizations,vm.isIntercomEnabled=isIntercomEnabled,vm.onFilterChanged=onFilterChanged,vm.organizations=[],vm.organizationsWithoutPremiumFeatures=[],vm.organizationsWithNoProjects=[],vm.hourlyOverageOrganizations=[],vm.monthlyOverageOrganizations=[],vm.projects=[],vm.projectsRequiringConfiguration=[],vm.showChangePlanDialog=showChangePlanDialog,vm.showIntercom=showIntercom,vm.suspendedForBillingOrganizations=[],vm.suspendedForAbuseOrOverageOrNotActiveOrganizations=[],vm.suspendedOrganizations=[],get()}}],controllerAs:"vm"}}))}(),function(){"use strict";angular.module("exceptionless.pagination",[]).factory("paginationService",(function(){function getCurrentPageSummary(data,page,limit){var from=((page=page?parseInt(page):1)-1)*(limit=limit?parseInt(limit):100)+1,to;return from+"-"+(data&&data.length>0?from+data.length-1:from)}var service;return{getCurrentPageSummary:getCurrentPageSummary}}))}(),function(){"use strict";angular.module("exceptionless.project",["restangular","satellizer","app.config"]).config(["$authProvider","SLACK_APPID",function($authProvider,SLACK_APPID){SLACK_APPID&&$authProvider.oauth2({name:"slack",authorizationEndpoint:"https://slack.com/oauth/authorize",clientId:SLACK_APPID,redirectUri:window.location.origin,requiredUrlParams:["client_id","scope"],optionalUrlParams:["redirect_uri","state","team"],scope:["incoming-webhook"],scopeDelimiter:" ",display:"popup",popupOptions:{width:580,height:630},state:function(){return encodeURIComponent(Math.random().toString(36).substr(2))}})}])}(),function(){"use strict";angular.module("exceptionless.project").factory("projectService",["$auth","$cacheFactory","$rootScope","Restangular",function($auth,$cacheFactory,$rootScope,Restangular){var _cache=$cacheFactory("http:project");$rootScope.$on("cache:clear",_cache.removeAll),$rootScope.$on("cache:clear-project",_cache.removeAll),$rootScope.$on("auth:logout",_cache.removeAll),$rootScope.$on("OrganizationChanged",_cache.removeAll),$rootScope.$on("ProjectChanged",_cache.removeAll),$rootScope.$on("StackChanged",(function($event,data){data.added&&_cache.removeAll()}));var _cachedRestangular=Restangular.withConfig((function(RestangularConfigurer){RestangularConfigurer.setDefaultHttpFields({cache:_cache})})),service;function addSlack(id){function onSuccess(response){return Restangular.one("projects",id).post("slack",null,{code:response.code})}return $auth.link("slack").then(onSuccess)}function create(organizationId,name){return Restangular.all("projects").post({organization_id:organizationId,name:name,delete_bot_data_enabled:!0})}function demoteTab(id,name){return Restangular.one("projects",id).one("promotedtabs").remove({name:name})}function getAll(options,useCache){return void 0===useCache||useCache?_cachedRestangular.all("projects").getList(angular.extend({},{limit:100},options)):Restangular.all("projects").getList(angular.extend({},{limit:100},options))}function getById(id,useCache){return void 0===useCache||useCache?_cachedRestangular.one("projects",id).get():Restangular.one("projects",id).get()}function getByOrganizationId(id,options,useCache){return void 0===useCache||useCache?_cachedRestangular.one("organizations",id).all("projects").getList(options||{}):Restangular.one("organizations",id).all("projects").getList(options||{})}function getConfig(id){return _cachedRestangular.one("projects",id).one("config").get()}function getNotificationSettings(id,userId){return _cachedRestangular.one("users",userId).one("projects",id).one("notifications").get()}function getIntegrationNotificationSettings(id,integration){return _cachedRestangular.one("projects",id).one(integration,"notifications").get()}function isNameAvailable(organizationId,name){return Restangular.one("organizations",organizationId).one("projects","check-name").get({name:encodeURIComponent(name)})}function promoteTab(id,name){return Restangular.one("projects",id).post("promotedtabs",null,{name:name})}function remove(id){return Restangular.one("projects",id).remove()}function removeConfig(id,key){return Restangular.one("projects",id).one("config").remove({key:key})}function removeData(id,key){return Restangular.one("projects",id).one("data").remove({key:key})}function removeSlack(id){return Restangular.one("projects",id).one("slack").remove()}function removeNotificationSettings(id,userId){return Restangular.one("users",userId).one("projects",id).one("notifications").remove()}function resetData(id){return Restangular.one("projects",id).one("reset-data").get()}function update(id,project){return Restangular.one("projects",id).patch(project)}function setConfig(id,key,value){return Restangular.one("projects",id).post("config",value,{key:key})}function setData(id,key,value){return Restangular.one("projects",id).post("data",value,{key:key})}function setNotificationSettings(id,userId,settings){return Restangular.one("users",userId).one("projects",id).post("notifications",settings)}function setIntegrationNotificationSettings(id,integration,settings){return Restangular.one("projects",id).one(integration).post("notifications",settings)}return{addSlack:addSlack,create:create,demoteTab:demoteTab,getAll:getAll,getById:getById,getByOrganizationId:getByOrganizationId,getConfig:getConfig,getNotificationSettings:getNotificationSettings,getIntegrationNotificationSettings:getIntegrationNotificationSettings,isNameAvailable:isNameAvailable,promoteTab:promoteTab,remove:remove,removeConfig:removeConfig,removeData:removeData,removeNotificationSettings:removeNotificationSettings,removeSlack:removeSlack,resetData:resetData,setConfig:setConfig,setData:setData,setNotificationSettings:setNotificationSettings,setIntegrationNotificationSettings:setIntegrationNotificationSettings,update:update}}])}(),function(){"use strict";angular.module("exceptionless.project-filter",["angular.filter","exceptionless.auto-active","exceptionless.organization","exceptionless.project","exceptionless.refresh","exceptionless.show-on-hover-parent"]).directive("projectFilter",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"components/project-filter/project-filter-directive.tpl.html",controller:["$rootScope","$scope","$state","$stateParams","$window","debounce","filterService","notificationService","organizationService","projectService","urlService",function($rootScope,$scope,$state,$stateParams,$window,debounce,filterService,notificationService,organizationService,projectService,urlService){var vm=this;function buildUrls(){function getOrganizationUrl(organization){return isOnSessionDashboard()?urlService.buildFilterUrl({route:getStateName(),routePrefix:"session",organizationId:organization.id}):urlService.buildFilterUrl({route:getStateName(),organizationId:organization.id,type:$stateParams.type})}function getAllProjectsUrl(){return isOnSessionDashboard()?urlService.buildFilterUrl({route:getStateName(),routePrefix:"session"}):urlService.buildFilterUrl({route:getStateName(),type:$stateParams.type})}function getProjectUrl(project){return isOnSessionDashboard()?urlService.buildFilterUrl({route:getStateName(),routePrefix:"session",projectId:project.id}):urlService.buildFilterUrl({route:getStateName(),projectId:project.id,type:$stateParams.type})}var result={organizations:{},projects:{all:getAllProjectsUrl()}};return vm.organizations.forEach((function(organization){result.organizations[organization.id]=getOrganizationUrl(organization)})),vm.projects.forEach((function(project){result.projects[project.id]=getProjectUrl(project)})),result}function get(){return getOrganizations().then(getProjects)}function getFilterName(){var organizationId=filterService.getOrganizationId();if(organizationId){var organization=vm.organizations.filter((function(o){return o.id===organizationId}))[0];if(organization)return organization.name}var projectId=filterService.getProjectId();if(projectId){var project=vm.projects.filter((function(p){return p.id===projectId}))[0];if(project)return project.name}return"All Projects"}function getOrganizations(){function onSuccess(response){return vm.organizations=response.data.plain(),filterService.getOrganizationId()&&!vm.organizations.filter((function(o){return o.id===filterService.getOrganizationId()}))&&filterService.setOrganizationId(),update(),vm.isLoadingOrganizations=!1,response}function onFailure(){vm.isLoadingOrganizations=!1,notificationService.error("An error occurred while loading your organizations.")}return organizationService.getAll().then(onSuccess,onFailure)}function getProjects(){function onSuccess(response){return vm.projects=response.data.plain(),filterService.getProjectId()&&!vm.projects.filter((function(p){return p.id===filterService.getProjectId()}))&&filterService.setProjectId(),update(),vm.isLoadingProjects=!1,response}function onFailure(){vm.isLoadingProjects=!1,notificationService.error("An error occurred while loading your projects.")}return projectService.getAll().then(onSuccess,onFailure)}function getProjectsByOrganizationId(id){return vm.projects.filter((function(project){return project.organization_id===id}))}function getStateName(){return $state.current.name.endsWith("frequent")?"frequent":$state.current.name.endsWith("new")?"new":$state.current.name.endsWith("recent")?"recent":$state.current.name.endsWith("users")?"users":"dashboard"}function isOnSessionDashboard(){return $state.current.name.contains("session-")||"app.session.dashboard"===$state.current.name}function update(){vm.filteredDisplayName=getFilterName(),vm.urls=buildUrls()}this.$onInit=function $onInit(){var updateFilterDropDownMaxHeight=debounce((function(){vm.filterDropDownMaxHeight=angular.element($window).height()-100}),150),window=angular.element($window);window.bind("resize",updateFilterDropDownMaxHeight),$rootScope.$on("$stateChangeSuccess",update);var unbind=$scope.$on("$destroy",(function(){unbind(),window.unbind("resize",updateFilterDropDownMaxHeight)}));vm.filteredDisplayName="Loading",vm.get=get,vm.getProjectsByOrganizationId=getProjectsByOrganizationId,vm.isLoadingOrganizations=!0,vm.isLoadingProjects=!0,vm.organizations=[],vm.projects=[],vm.urls=buildUrls(),vm.update=update,updateFilterDropDownMaxHeight(),get()}}],controllerAs:"vm"}}])}(),function(){"use strict";angular.module("exceptionless.projects",["exceptionless","exceptionless.dialog","exceptionless.filter","exceptionless.link","exceptionless.notification","exceptionless.pagination","exceptionless.project","exceptionless.refresh"]).directive("projects",(function(){return{bindToController:!0,restrict:"E",replace:!0,scope:{settings:"="},templateUrl:"components/projects/projects-directive.tpl.html",controller:["$ExceptionlessClient","$window","$state","dialogService","filterService","linkService","notificationService","paginationService","projectService",function($ExceptionlessClient,$window,$state,dialogService,filterService,linkService,notificationService,paginationService,projectService){var vm=this;function get(options,useCache){function onSuccess(response){vm.projects=response.data.plain();var links=linkService.getLinksQueryParameters(response.headers("link"));return vm.previous=links.previous,vm.next=links.next,vm.pageSummary=paginationService.getCurrentPageSummary(response.data,vm.currentOptions.page,vm.currentOptions.limit),0===vm.projects.length&&vm.currentOptions.page&&vm.currentOptions.page>1?get(null,useCache):vm.projects}return vm.loading=0===vm.projects.length,vm.currentOptions=options||vm.settings.options,vm.settings.get(vm.currentOptions,useCache).then(onSuccess).finally((function(){vm.loading=!1}))}function hasProjects(){return vm.projects&&vm.projects.length>0}function canRefresh(data){if(!data||!data.type)return!0;var organizationId=vm.settings.organization;return"Organization"===data.type?!hasProjects()&&data.id===organizationId||vm.projects.filter((function(e){return data.id===e.organization_id})).length>0:"Project"===data.type?!hasProjects()&&data.organization_id===organizationId||vm.projects.filter((function(e){return data.id?data.id===e.id:data.organization_id=e.organization_id})).length>0:"PersistentEvent"===data.type&&!data.updated&&(!hasProjects()&&data.organization_id===organizationId||vm.projects.filter((function(e){return data.project_id?data.project_id===e.id:data.organization_id=e.organization_id})).length>0)}function open(id,event){var openInNewTab=event.ctrlKey||event.metaKey||2===event.which;$ExceptionlessClient.createFeatureUsage(vm._source+".open").setProperty("id",id).setProperty("_blank",openInNewTab).submit(),openInNewTab?$window.open($state.href("app.project.manage",{id:id},{absolute:!0}),"_blank"):$state.go("app.project.manage",{id:id}),event.preventDefault()}function nextPage(){return $ExceptionlessClient.createFeatureUsage(vm._source+".nextPage").setProperty("next",vm.next).submit(),get(vm.next)}function previousPage(){return $ExceptionlessClient.createFeatureUsage(vm._source+".previousPage").setProperty("previous",vm.previous).submit(),get(vm.previous)}function remove(project){return $ExceptionlessClient.createFeatureUsage(vm._source+".remove").setProperty("project",project).submit(),dialogService.confirmDanger("Are you sure you want to delete this project?","DELETE PROJECT").then((function(){function onSuccess(){vm.projects.splice(vm.projects.indexOf(project),1),notificationService.info("Successfully queued the project for deletion."),$ExceptionlessClient.createFeatureUsage(vm._source+".remove.success").setProperty("project",project).submit()}function onFailure(){$ExceptionlessClient.createFeatureUsage(vm._source+".remove.error").setProperty("project",project).submit(),notificationService.error("An error occurred while trying to remove the project.")}return projectService.remove(project.id).then(onSuccess,onFailure)})).catch((function(e){}))}this.$onInit=function $onInit(){vm._source="exceptionless.projects",vm.canRefresh=canRefresh,vm.currentOptions={},vm.get=get,vm.hasFilter=filterService.hasFilter,vm.hasProjects=hasProjects,vm.includeOrganizationName=!vm.settings.organization,vm.loading=!0,vm.nextPage=nextPage,vm.open=open,vm.previousPage=previousPage,vm.projects=[],vm.remove=remove,$ExceptionlessClient.submitFeatureUsage(vm._source),get()}}],controllerAs:"vm"}}))}(),function(){"use strict";angular.module("exceptionless.promise-button",[]).directive("promiseButton",["$compile",function($compile){return{restrict:"A",scope:{promiseButton:"&",promiseButtonBusyText:"@",promiseButtonBusySpinnerClass:"@"},templateUrl:"components/promise-button/promise-button-directive.tpl.html",transclude:!0,link:function(scope,element,attrs){function stop(){scope.running=!1}element.attr("ng-click","start()"),element.removeAttr("promise-button"),element.find("[ng-transclude]").removeAttr("ng-transclude"),scope.running=!1,scope.start=function(){if(!scope.running){var promise=scope.promiseButton();promise&&promise.finally&&(scope.running=!0,promise.finally(stop))}},$compile(element)(scope)}}}])}(),function(){"use strict";angular.module("exceptionless.rate-limit",["restangular"]).run(["rateLimitService","Restangular",function(rateLimitService,Restangular){Restangular.addResponseInterceptor((function(data,operation,what,url,response,deferred){return rateLimitService.updateFromResponseHeader(response),data}))}])}(),function(){"use strict";angular.module("exceptionless.rate-limit").directive("rateLimit",(function(){return{restrict:"E",replace:!0,scope:{organizationId:"=",ignoreFree:"=",ignoreConfigureProjects:"="},templateUrl:"components/rate-limit/rate-limit-directive.tpl.html",controller:["rateLimitService",function(rateLimitService){var vm=this;function rateLimitExceeded(){return rateLimitService.rateLimitExceeded()}this.$onInit=function $onInit(){vm.rateLimitExceeded=rateLimitExceeded}}],controllerAs:"vm"}}))}(),function(){"use strict";angular.module("exceptionless.rate-limit").factory("rateLimitService",["$rootScope",function($rootScope){var _rateLimit=-1,_rateLimitExceeded=!1,_rateLimitRemaining=-1,service;function rateLimitExceeded(){return _rateLimitExceeded}function updateFromResponseHeader(response){var limit=parseInt(response.headers("X-RateLimit-Limit"));_rateLimit=isNaN(limit)?-1:limit;var limitRemaining=parseInt(response.headers("X-RateLimit-Remaining"));_rateLimitRemaining=isNaN(limitRemaining)?-1:limitRemaining,_rateLimitExceeded=_rateLimit>0&&_rateLimitRemaining<=0}return{rateLimitExceeded:rateLimitExceeded,updateFromResponseHeader:updateFromResponseHeader}}])}(),function(){"use strict";angular.module("exceptionless.refresh",["debounce"]).directive("refreshOn",["$parse","$rootScope","debounce",function($parse,$rootScope,debounce){return{restrict:"AE",link:function(scope,element,attrs){function runActionOnEvent(name,action,refreshIf){var unbind=$rootScope.$on(name,(function(event,data){refreshIf&&!scope.$eval(refreshIf,{data:data})||action(scope,{data:data})}));scope.$on("$destroy",(function(){var action;(unbind(),attrs.refreshStopping)&&$parse(attrs.refreshStopping)(scope)}))}if(attrs.refreshAction){var action=$parse(attrs.refreshAction);attrs.refreshDebounce?action=debounce(action,attrs.refreshDebounce||1e3,!0):attrs.refreshThrottle&&(action=_.throttle(action,attrs.refreshThrottle||1e3)),attrs.refreshOn&&angular.forEach(attrs.refreshOn.split(" "),(function(name){runActionOnEvent(name,action,attrs.refreshIf)})),attrs.refreshAlways&&angular.forEach(attrs.refreshAlways.split(" "),(function(name){runActionOnEvent(name,action)}))}}}}])}(),function(){"use strict";angular.module("exceptionless.relative-time",[]).directive("relativeTime",["$interval",function($interval){return{restrict:"AE",scope:{to:"=",date:"="},link:function(scope,element){function setRelativeTimeText(){var to=moment(scope.to),date=moment(scope.date),isValid=!!scope.to&&to.isValid()&&to.year()>1&&!!scope.date&&date.isValid()&&date.year()>1;element.text(isValid?date.to(to,!0):"never")}setRelativeTimeText(),scope.$watch("to",(function(value){setRelativeTimeText()})),scope.$watch("date",(function(value){setRelativeTimeText()}));var interval=$interval(setRelativeTimeText,6e4);scope.$on("$destroy",(function(){$interval.cancel(interval)}))}}}])}(),function(){"use strict";angular.module("exceptionless.release-notification",["exceptionless.refresh"]).directive("releaseNotification",[function(){return{restrict:"E",templateUrl:"components/release-notification/release-notification-directive.tpl.html",controller:["$window",function($window){var rvm=this;function processReleaseNotification(notification){notification&&(notification.critical&&$window.location.reload(),rvm.releaseNotificationMessage=notification.message)}this.$onInit=function $onInit(){rvm.processReleaseNotification=processReleaseNotification,rvm.releaseNotificationMessage=""}}],controllerAs:"rvm"}}])}(),function(){"use strict";angular.module("angular-rickshaw",["debounce"]).directive("rickshaw",["$compile","$window","debounce",function($compile,$window,debounce){return{restrict:"E",scope:{options:"=options",features:"=features"},link:function(scope,element){var graph;function getSettings(element){var settings=angular.copy(scope.options);return settings.element=element,settings}var create=debounce((function(){if(scope.options&&scope.options.series&&scope.options.series[0]&&scope.options.series[0].data){var mainElement=angular.element(element);mainElement.empty();var graphElement=$compile('<div class="chart-holder-small"></div>')(scope);mainElement.append(graphElement);var settings=getSettings(graphElement[0]);if(graph=new Rickshaw.Graph(settings),scope.features&&scope.features.hover)var config={graph:graph,xFormatter:scope.features.hover.xFormatter,yFormatter:scope.features.hover.yFormatter,formatter:scope.features.hover.formatter,onRender:scope.features.hover.onRender},Hover,hoverDetail=new(scope.features.hover.render?Rickshaw.Class.create(Rickshaw.Graph.HoverDetail,{render:scope.features.hover.render}):Rickshaw.Graph.HoverDetail)(config);if(scope.features&&scope.features.palette)for(var palette=new Rickshaw.Color.Palette({scheme:scope.features.palette}),i=0;i<settings.series.length;i++)settings.series[i].color=palette.color();if(scope.features&&scope.features.range)var rangeSelector=new Rickshaw.Graph.RangeSelector({graph:graph,selectionCallback:scope.features.range.onSelection});if(graph.render(),scope.features&&scope.features.xAxis){var xAxisConfig={graph:graph};scope.features.xAxis.element&&(xAxisConfig.element=scope.features.xAxis.element),scope.features.xAxis.orientation&&(xAxisConfig.orientation=scope.features.xAxis.orientation),scope.features.xAxis.pixelsPerTick&&(xAxisConfig.pixelsPerTick=scope.features.xAxis.pixelsPerTick);var timeFixture=scope.features.xAxis.timeFixture,useStandardXAxis,xAxis;if(timeFixture&&(scope.features.xAxis.overrideTimeFixtureCustomFormatters&&(timeFixture.units[2].formatter=function(date){return moment(date).format("MMM")},timeFixture.units[3].formatter=function(date){return moment(date).format("MMM D")},timeFixture.units[4].formatter=function(date){return moment(date).format("MMM D")},timeFixture.units[5].formatter=function(date){return moment(date).format("ha")},timeFixture.units[6].formatter=function(date){return moment(date).format("h:mma")},timeFixture.units[7].formatter=function(date){return moment(date).format("h:mma")},timeFixture.units[8].formatter=function(date){return moment(date).format("h:mma")},timeFixture.units[8].formatter=function(date){return moment(date).format("h:mma")},timeFixture.units[8].formatter=function(date){return moment(date).format("h:mma")},timeFixture.units[8].formatter=function(date){return moment(date).format("h:mma")}),xAxisConfig.timeFixture=timeFixture),scope.features.xAxis.timeUnit){var time=new Rickshaw.Fixtures.Time;xAxisConfig.timeUnit=time.unit(scope.features.xAxis.timeUnit)}scope.features.xAxis.ticks&&(xAxisConfig.ticks=scope.features.xAxis.ticks),scope.features.xAxis.tickValues&&(xAxisConfig.tickValues=scope.features.xAxis.tickValues),scope.features.xAxis.tickSize&&(xAxisConfig.tickSize=scope.features.xAxis.tickSize),scope.features.xAxis.ticksTreatment&&(xAxisConfig.ticksTreatment=scope.features.xAxis.ticksTreatment),(xAxisConfig.orientation||xAxisConfig.pixelsPerTick||xAxisConfig.ticks||xAxisConfig.tickValues||xAxisConfig.tickSize||xAxisConfig.element?new Rickshaw.Graph.Axis.X(xAxisConfig):new Rickshaw.Graph.Axis.Time(xAxisConfig)).render()}if(scope.features&&scope.features.yAxis){var yAxisConfig={graph:graph},yAxis;scope.features.yAxis.element&&(yAxisConfig.element=scope.features.yAxis.element),scope.features.yAxis.orientation&&(yAxisConfig.orientation=scope.features.yAxis.orientation),scope.features.yAxis.pixelsPerTick&&(yAxisConfig.pixelsPerTick=scope.features.yAxis.pixelsPerTick),scope.features.yAxis.ticks&&(yAxisConfig.ticks=scope.features.yAxis.ticks),scope.features.yAxis.tickValues&&(yAxisConfig.tickValues=scope.features.yAxis.tickValues),scope.features.yAxis.tickSize&&(yAxisConfig.tickSize=scope.features.yAxis.tickSize),scope.features.yAxis.ticksTreatment&&(yAxisConfig.ticksTreatment=scope.features.yAxis.ticksTreatment),scope.features.yAxis.tickFormat&&(yAxisConfig.tickFormat=Rickshaw.Fixtures.Number[scope.features.yAxis.tickFormat]),scope.features.yAxis.ticksTreatment&&(yAxisConfig.ticksTreatment=scope.features.yAxis.ticksTreatment),new Rickshaw.Graph.Axis.Y(yAxisConfig).render()}if(scope.features&&scope.features.legend){var legendElement=$compile("<div></div>")(scope);mainElement.append(legendElement);var legend=new Rickshaw.Graph.Legend({graph:graph,element:legendElement[0]});if(scope.features.legend.toggle)var shelving=new Rickshaw.Graph.Behavior.Series.Toggle({graph:graph,legend:legend});if(scope.features.legend.highlight)var highlighter=new Rickshaw.Graph.Behavior.Series.Highlight({graph:graph,legend:legend})}}}),150),seriesWatcher=scope.$watch((function(){return scope.options.series?scope.options.series.length:0}),(function(newValue,oldValue){angular.equals(newValue,oldValue)||create()})),seriesDataWatcher=scope.$watch((function(){return scope.options.series&&scope.options.series[0]&&scope.options.series[0].data?scope.options.series[0].data:scope.options.series}),(function(newValue,oldValue){angular.equals(newValue,oldValue)||create()})),window=angular.element($window);window.bind("resize",create),scope.$on("$destroy",(function(e){seriesWatcher(),seriesDataWatcher(),window.unbind("resize",create)}))},template:'<div class="rickshaw-container"></div>'}}])}(),function(){"use strict";Rickshaw.namespace("Rickshaw.Graph.RangeSelector"),Rickshaw.Graph.RangeSelector=Rickshaw.Class.create({initialize:function(args){var element=this.element=args.element,graph=this.graph=args.graph;graph._selectionCallback=args.selectionCallback;var position=this.position={},selectionBox=this.selectionBox=$('<div class="rickshaw_range_selector"></div>'),loader=$('<div class="rickshaw_range_selector_loader"></div>');selectionBox.insertBefore(graph.element.firstChild),loader.insertBefore(graph.element.firstChild),this._addListeners(),graph.onUpdate(function(){this.update()}.bind(this))},_addListeners:function(){var graph=this.graph,position=this.position,selectionBox=this.selectionBox,selectionControl=!1,selectionDraw=function(startPointX){graph.element.addEventListener("mousemove",(function(event){if(!0!==selectionControl)return!1;var deltaX;event.stopPropagation(),position.x=event.layerX,deltaX=Math.max(position.x,startPointX)-Math.min(position.x,startPointX),position.minX=Math.min(position.x,startPointX),position.maxX=position.minX+deltaX,selectionBox.css({transition:"none",opacity:"1",width:deltaX,height:"100%",left:position.minX,top:"0"})}),!1)};graph.element.addEventListener("mousedown",(function(event){event.stopPropagation();var startPointX=this.startPointX=event.layerX;selectionBox.css({left:event.layerX,height:"100%",width:0}),selectionControl=!0,selectionDraw(startPointX)}),!0),document.body.addEventListener("keyup",(function(event){selectionControl&&!1!==selectionControl&&(event.stopPropagation(),27===event.keyCode&&(selectionControl=!1,selectionBox.css({transition:"opacity 0.2s ease-out",opacity:"0",width:0,height:0})))}),!0),document.body.addEventListener("mouseup",(function(event){selectionControl&&!1!==selectionControl&&(selectionControl=!1,position.coordMinX=Math.round(graph.x.invert(position.minX)),position.coordMaxX=Math.round(graph.x.invert(position.maxX)),selectionBox.css({transition:"opacity 0.2s ease-out",width:0,height:0,opacity:"0"}),!graph._selectionCallback||isNaN(position.coordMinX)||isNaN(position.coordMaxX)||this.startPointX===event.layerX||position.coordMinX===position.coordMaxX||0!==event.button||graph._selectionCallback(position),this.startPointX=0)}),!1)},update:function(){var graph=this.graph,position=this.position;null===graph.window.xMin&&(position.coordMinX=graph.dataDomain()[0]),null===graph.window.xMax&&(position.coordMaxX=graph.dataDomain()[1])}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.DottedLine"),Rickshaw.Graph.Renderer.DottedLine=Rickshaw.Class.create(Rickshaw.Graph.Renderer.Line,{name:"dotted_line",_styleSeries:function(series){var result=Rickshaw.Graph.Renderer.Line.prototype._styleSeries.call(this,series);return d3.select(series.path).style("stroke-dasharray","3, 2"),result}})}(),function(){"use strict";angular.module("exceptionless.search",["restangular"]).factory("searchService",["$cacheFactory","$timeout","$q","Restangular",function($cacheFactory,$timeout,$q,Restangular){var _cache=$cacheFactory("http:search"),_cachedRestangular=Restangular.withConfig((function(RestangularConfigurer){RestangularConfigurer.setDefaultHttpFields({cache:_cache})})),service;function validate(query){if(!query||query.trim&&"*"===query.trim()){var deferred=$q.defer();return $timeout((function(){deferred.resolve({data:{is_valid:!0,uses_premium_features:!1}})}),0),deferred.promise}return _cachedRestangular.one("search","validate").get({query:query})}return{validate:validate}}])}(),function(){"use strict";angular.module("exceptionless.search-filter",["ngMessages","exceptionless","exceptionless.autofocus","exceptionless.refresh","exceptionless.validators"])}(),function(){"use strict";angular.module("exceptionless.search-filter").directive("searchFilter",(function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"components/search-filter/search-filter-directive.tpl.html",controller:["filterService",function(filterService){var vm=this;function setSearchFilter(filter){filterService.setFilter(filter)}function updateFilter(){vm.filter=filterService.getFilter()}this.$onInit=function $onInit(){vm.searchFilterForm={},vm.setSearchFilter=setSearchFilter,vm.updateFilter=updateFilter,updateFilter()}}],controllerAs:"vm"}}))}(),function(){"use strict";angular.module("exceptionless.show-on-hover-parent",[]).directive("showOnHoverParent",(function(){return{restrict:"A",link:function(scope,element){element.parent().bind("mouseenter",(function(){element.show()})),element.parent().bind("mouseleave",(function(){element.hide()})),element.hide()}}}))}(),function(){"use strict";angular.module("exceptionless.signalr",["app.config","exceptionless","exceptionless.auth"]).factory("signalRService",["$ExceptionlessClient","$rootScope","$interval","$timeout","authService","BASE_URL",function($ExceptionlessClient,$rootScope,$interval,$timeout,authService,BASE_URL){var source="exceptionless.signalr.signalRService",_connection,_signalRTimeout,_reconnectInterval,service;function start(){startDelayed(1)}function startDelayed(delay){(_connection||_signalRTimeout||_reconnectInterval)&&stop(),(_connection=$.connection(BASE_URL+"/api/v2/push",{access_token:authService.getToken()})).received((function(data){data&&"string"!=typeof data&&(data.message&&data.message.change_type&&(data.message.added=0===data.message.change_type,data.message.updated=1===data.message.change_type,data.message.deleted=2===data.message.change_type),$rootScope.$emit(data.type,data.message),"UserMembershipChanged"===data.type&&data.message&&data.message.organization_id&&($rootScope.$emit("OrganizationChanged",data.message),$rootScope.$emit("ProjectChanged",data.message)))})),_connection.stateChanged((function(change){change.newState===$.signalR.connectionState.disconnected&&authService.isAuthenticated()&&(_reconnectInterval=$interval((function(){if(!_connection)return $interval.cancel(_reconnectInterval);_connection.qs.access_token=authService.getToken(),_connection.start().then((function(){$interval.cancel(_reconnectInterval)}))}),5e3))})),_signalRTimeout=$timeout((function(){_connection.start()}),delay||1e3)}function stop(){_signalRTimeout&&($timeout.cancel(_signalRTimeout),_signalRTimeout=null),_reconnectInterval&&($interval.cancel(_reconnectInterval),_reconnectInterval=null),_connection&&(_connection.stop(),_connection=null)}return{start:start,startDelayed:startDelayed,stop:stop}}])}(),function(){"use strict";angular.module("exceptionless.simple-error",[]).factory("simpleErrorService",(function(){function getExceptions(exception){for(var exceptions=[],currentException=exception;currentException;)exceptions.push(currentException),currentException=currentException.inner;return exceptions}var service;return{getExceptions:getExceptions}}))}(),function(){"use strict";angular.module("exceptionless.simple-stack-trace",["ngSanitize","exceptionless","exceptionless.simple-error"]).directive("simpleStackTrace",["$ExceptionlessClient","$sanitize","$sce","simpleErrorService",function($ExceptionlessClient,$sanitize,$sce,simpleErrorService){function buildStackFrames(exceptions){for(var frames="",index=0;index<exceptions.length;index++){var stackTrace=exceptions[index].stack_trace;stackTrace&&(frames+='<div class="stack-frame">'+escapeHTML(stackTrace.replace(" ","")),index<exceptions.length-1&&(frames+="<div>--- End of inner exception stack trace ---</div>"),frames+="</div>")}return frames}function buildStackTrace(exceptions){return buildStackTraceHeader(exceptions)+buildStackFrames(exceptions.reverse())}function buildStackTraceHeader(exceptions){for(var header="",index=0;index<exceptions.length;index++){header+='<span class="ex-header">',index>0&&(header+=" ---\x3e ");var hasType=!!exceptions[index].type;hasType&&(header+='<span class="ex-type">'+escapeHTML(exceptions[index].type)+"</span>: "),exceptions[index].message&&(header+='<span class="ex-message">'+escapeHTML(exceptions[index].message)+"</span>"),hasType&&(header+="</span>")}return header}function escapeHTML(input){return input&&input.replace?$sce.trustAsHtml(input.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")):input}return{bindToController:!0,restrict:"E",replace:!0,scope:{exception:"="},template:'<pre class="stack-trace"><code ng-bind-html="vm.stackTrace"></code></pre>',controller:[function(){var vm=this;this.$onInit=function $onInit(){vm.stackTrace=$sce.trustAsHtml(buildStackTrace(simpleErrorService.getExceptions(vm.exception)))}}],controllerAs:"vm"}}])}(),function(){"use strict";angular.module("exceptionless.stack",["restangular","exceptionless.filter"]).factory("stackService",["filterService","Restangular",function(filterService,Restangular){function addLink(id,url){return Restangular.one("stacks",id).one("add-link").customPOST(url)}function disableNotifications(id){return Restangular.one("stacks",id).one("notifications").remove()}function enableNotifications(id){return Restangular.one("stacks",id).one("notifications").post()}function getAll(options){var mergedOptions=filterService.apply(options),organization=filterService.getOrganizationId();if(organization)return Restangular.one("organizations",organization).all("stacks").getList(mergedOptions);var project=filterService.getProjectId();return project?Restangular.one("projects",project).all("stacks").getList(mergedOptions):Restangular.all("stacks").getList(mergedOptions)}function getById(id){return Restangular.one("stacks",id).get()}function getFrequent(options){var mergedOptions=filterService.apply(options),organization=filterService.getOrganizationId();if(organization)return Restangular.one("organizations",organization).one("stacks").all("frequent").getList(mergedOptions);var project=filterService.getProjectId();return project?Restangular.one("projects",project).one("stacks").all("frequent").getList(mergedOptions):Restangular.one("stacks").all("frequent").getList(mergedOptions)}function getUsers(options){var mergedOptions=filterService.apply(options),organization=filterService.getOrganizationId();if(organization)return Restangular.one("organizations",organization).one("stacks").all("users").getList(mergedOptions);var project=filterService.getProjectId();return project?Restangular.one("projects",project).one("stacks").all("users").getList(mergedOptions):Restangular.one("stacks").all("users").getList(mergedOptions)}function getNew(options){var mergedOptions=filterService.apply(options),organization=filterService.getOrganizationId();if(organization)return Restangular.one("organizations",organization).one("stacks").all("new").getList(mergedOptions);var project=filterService.getProjectId();return project?Restangular.one("projects",project).one("stacks").all("new").getList(mergedOptions):Restangular.one("stacks").all("new").getList(mergedOptions)}function markCritical(id){return Restangular.one("stacks",id).one("mark-critical").post()}function markNotCritical(id){return Restangular.one("stacks",id).one("mark-critical").remove()}function markFixed(id,version){return Restangular.one("stacks",id).post("mark-fixed",null,{version:version})}function markNotFixed(id){return Restangular.one("stacks",id).one("mark-fixed").remove()}function markHidden(id){return Restangular.one("stacks",id).one("mark-hidden").post()}function markNotHidden(id){return Restangular.one("stacks",id).one("mark-hidden").remove()}function promote(id){return Restangular.one("stacks",id).one("promote").post()}function remove(id){return Restangular.one("stacks",id).remove()}function removeLink(id,url){return Restangular.one("stacks",id).one("remove-link").customPOST(url)}var service;return{addLink:addLink,disableNotifications:disableNotifications,enableNotifications:enableNotifications,getAll:getAll,getById:getById,getFrequent:getFrequent,getUsers:getUsers,getNew:getNew,markCritical:markCritical,markNotCritical:markNotCritical,markFixed:markFixed,markNotFixed:markNotFixed,markHidden:markHidden,markNotHidden:markNotHidden,promote:promote,remove:remove,removeLink:removeLink}}])}(),function(){"use strict";angular.module("exceptionless.stack-dialog",["ui.bootstrap","dialogs.main","dialogs.default-translations","exceptionless.autofocus","exceptionless.validators"])}(),function(){"use strict";angular.module("exceptionless.stack-dialog").factory("stackDialogService",["dialogs",function(dialogs){function markFixed(){return dialogs.create("components/stack-dialog/mark-fixed-dialog.tpl.html","MarkFixedDialog as vm").result}var service;return{markFixed:markFixed}}])}(),function(){"use strict";angular.module("exceptionless.stack-dialog").controller("MarkFixedDialog",["$ExceptionlessClient","$uibModalInstance",function($ExceptionlessClient,$uibModalInstance){var vm=this;function cancel(){$uibModalInstance.dismiss("cancel")}function save(isValid){!1!==isValid&&($ExceptionlessClient.createFeatureUsage(vm._source+".save").setProperty("version",vm.data.version).submit(),$uibModalInstance.close(vm.data.version))}this.$onInit=function $onInit(){vm._source="app.stack-dialog.MarkFixedDialog",vm.cancel=cancel,vm.data={},vm.markFixedForm={},vm.save=save,$ExceptionlessClient.submitFeatureUsage(vm._source)}}])}(),function(){"use strict";angular.module("exceptionless.stack-trace",["ngSanitize","exceptionless","exceptionless.error"]).directive("stackTrace",["$ExceptionlessClient","$sanitize","$sce","errorService",function($ExceptionlessClient,$sanitize,$sce,errorService){function buildParameter(parameter){var result="",parts=[];return parameter.type_namespace&&parts.push(parameter.type_namespace),parameter.type&&parts.push(parameter.type),result+=parts.join(".").replace("+","."),parameter.generic_arguments&&parameter.generic_arguments.length>0&&(result+="["+parameter.generic_arguments.join(",")+"]"),parameter.name&&(result+=" "+parameter.name),result}function buildParameters(parameters){for(var result="(",index=0;index<(parameters||[]).length;index++)index>0&&(result+=", "),result+=buildParameter(parameters[index]);return result+")"}function buildStackFrame(frame){if(!frame)return"<null>\r\n";var typeNameParts=[];frame.declaring_namespace&&typeNameParts.push(frame.declaring_namespace),frame.declaring_type&&typeNameParts.push(frame.declaring_type),typeNameParts.push(frame.name||"<anonymous>");var result="at "+typeNameParts.join(".").replace("+",".");return frame.generic_arguments&&frame.generic_arguments.length>0&&(result+="["+frame.generic_arguments.join(",")+"]"),result+=buildParameters(frame.parameters),frame.data&&(frame.data.ILOffset>0||frame.data.NativeOffset>0)&&(result+=" at offset "+frame.data.ILOffset||frame.data.NativeOffset),frame.file_name&&(result+=" in "+frame.file_name,frame.line_number>0&&(result+=":line "+frame.line_number),frame.column>0&&(result+=":col "+frame.column)),escapeHTML(result+"\r\n")}function buildStackFrames(exceptions){for(var frames="",index=0;index<exceptions.length;index++){var stackTrace=exceptions[index].stack_trace;if(stackTrace){frames+='<div class="stack-frame">';for(var frameIndex=0;frameIndex<stackTrace.length;frameIndex++)frames+=escapeHTML(buildStackFrame(stackTrace[frameIndex]));index<exceptions.length-1&&(frames+="<div>--- End of inner exception stack trace ---</div>"),frames+="</div>"}}return frames}function buildStackTrace(exceptions){return exceptions?buildStackTraceHeader(exceptions)+buildStackFrames(exceptions.reverse()):null}function buildStackTraceHeader(exceptions){for(var header="",index=0;index<exceptions.length;index++){header+='<span class="ex-header">',index>0&&(header+=" ---\x3e ");var hasType=!!exceptions[index].type;hasType&&(header+='<span class="ex-type">'+escapeHTML(exceptions[index].type)+"</span>: "),exceptions[index].message&&(header+='<span class="ex-message">'+escapeHTML(exceptions[index].message)+"</span>"),hasType&&(header+="</span>")}return header}function escapeHTML(input){return input&&input.replace?$sce.trustAsHtml(input.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")):input}return{bindToController:!0,restrict:"E",replace:!0,scope:{exception:"="},template:'<pre class="stack-trace"><code ng-bind-html="vm.stackTrace"></code></pre>',controller:[function(){var vm=this;this.$onInit=function $onInit(){vm.stackTrace=$sce.trustAsHtml(buildStackTrace(errorService.getExceptions(vm.exception)))}}],controllerAs:"vm"}}])}(),function(){"use strict";angular.module("exceptionless.stacks",["angular-filters","checklist-model","ui.bootstrap","dialogs.main","dialogs.default-translations","exceptionless","exceptionless.filter","exceptionless.link","exceptionless.notification","exceptionless.pagination","exceptionless.refresh","exceptionless.summary","exceptionless.stack-dialog","exceptionless.timeago"])}(),function(){"use strict";angular.module("exceptionless.stacks").factory("stacksActionsService",["$ExceptionlessClient","dialogService","stackDialogService","stackService","notificationService","$q",function($ExceptionlessClient,dialogService,stackDialogService,stackService,notificationService,$q){var source="exceptionless.stacks.stacksActionsService";function executeAction(ids,action,onSuccess,onFailure){var deferred=$q.defer(),promise=_.chunk(ids,10).reduce((function(previous,item){return previous.then(action(item.join(",")))}),deferred.promise).then(onSuccess,onFailure);return deferred.resolve(),promise}var deleteAction={name:"Delete",run:function(ids){return $ExceptionlessClient.createFeatureUsage(source+".delete").setProperty("count",ids.length).submit(),dialogService.confirmDanger("Are you sure you want to delete these stacks (includes all stack events)?","DELETE STACKS").then((function(){function onSuccess(){notificationService.info("Successfully queued the stacks for deletion.")}function onFailure(){$ExceptionlessClient.createFeatureUsage(source+".delete.error").setProperty("count",ids.length).submit(),notificationService.error("An error occurred while deleting the stacks.")}return executeAction(ids,stackService.remove,onSuccess,onFailure)})).catch((function(e){}))}},markFixedAction={name:"Mark Fixed",run:function(ids){return $ExceptionlessClient.createFeatureUsage(source+".mark-fixed").setProperty("count",ids.length).submit(),stackDialogService.markFixed().then((function(version){function onSuccess(){notificationService.info("Successfully queued the stacks to be marked as fixed.")}function onFailure(){$ExceptionlessClient.createFeatureUsage(source+".mark-fixed.error").setProperty("count",ids.length).submit(),notificationService.error("An error occurred while marking stacks as fixed.")}return executeAction(ids,(function(ids){return stackService.markFixed(ids,version)}),onSuccess,onFailure)})).catch((function(e){}))}},markNotFixedAction={name:"Mark Not Fixed",run:function(ids){function onSuccess(){notificationService.info("Successfully queued the stacks to be marked as not fixed.")}function onFailure(){$ExceptionlessClient.createFeatureUsage(source+".mark-not-fixed.error").setProperty("count",ids.length).submit(),notificationService.error("An error occurred while marking stacks as not fixed.")}return $ExceptionlessClient.createFeatureUsage(source+".mark-not-fixed").setProperty("count",ids.length).submit(),executeAction(ids,stackService.markNotFixed,onSuccess,onFailure)}},markHiddenAction={name:"Mark Hidden",run:function(ids){function onSuccess(){notificationService.info("Successfully queued the stacks to be marked as hidden.")}function onFailure(){$ExceptionlessClient.createFeatureUsage(source+".mark-hidden.error").setProperty("count",ids.length).submit(),notificationService.error("An error occurred while marking stacks as hidden.")}return $ExceptionlessClient.createFeatureUsage(source+".mark-hidden").setProperty("count",ids.length).submit(),executeAction(ids,stackService.markHidden,onSuccess,onFailure)}},markNotHiddenAction={name:"Mark Not Hidden",run:function(ids){function onSuccess(){notificationService.info("Successfully queued the stacks to be marked as not hidden.")}function onFailure(){$ExceptionlessClient.createFeatureUsage(source+".mark-not-hidden.error").setProperty("count",ids.length).submit(),notificationService.error("An error occurred while marking stacks as not hidden.")}return $ExceptionlessClient.createFeatureUsage(source+".mark-not-hidden").setProperty("count",ids.length).submit(),executeAction(ids,stackService.markNotHidden,onSuccess,onFailure)}},service;function getActions(){return[markFixedAction,markNotFixedAction,markHiddenAction,markNotHiddenAction,deleteAction]}return{getActions:getActions}}])}(),function(){"use strict";angular.module("exceptionless.stacks").directive("stacks",(function(){return{bindToController:!0,restrict:"E",replace:!0,scope:{settings:"="},templateUrl:"components/stacks/stacks-directive.tpl.html",controller:["$ExceptionlessClient","$window","$state","$stateParams","linkService","filterService","notificationService","paginationService","stacksActionsService",function($ExceptionlessClient,$window,$state,$stateParams,linkService,filterService,notificationService,paginationService,stacksActionsService){var vm=this;function canRefresh(data){return data&&"Stack"===data.type?filterService.includedInProjectOrOrganizationFilter({organizationId:data.organization_id,projectId:data.project_id}):data&&"Organization"===data.type||"Project"===data.type?filterService.includedInProjectOrOrganizationFilter({organizationId:data.id,projectId:data.id}):!data}function get(options){function onSuccess(response){vm.stacks=response.data.plain(),vm.selectedIds=vm.selectedIds.filter((function(id){return vm.stacks.filter((function(e){return e.id===id})).length>0}));var links=linkService.getLinksQueryParameters(response.headers("link"));return vm.previous=links.previous,vm.next=links.next,vm.pageSummary=paginationService.getCurrentPageSummary(response.data,vm.currentOptions.page,vm.currentOptions.limit),0===vm.stacks.length&&vm.currentOptions.page&&vm.currentOptions.page>1?get():vm.stacks}function onFailure(response){return $ExceptionlessClient.createLog(vm._source+".get","Error while loading events","Error").setProperty("options",options).setProperty("response",response).submit(),response}return vm.loading=0===vm.stacks.length,vm.currentOptions=options||vm.settings.options,vm.settings.get(vm.currentOptions).then(onSuccess,onFailure).finally((function(){vm.loading=!1}))}function open(id,event){var openInNewTab=event.ctrlKey||event.metaKey||2===event.which;$ExceptionlessClient.createFeatureUsage(vm._source+".open").setProperty("id",id).setProperty("_blank",openInNewTab).submit(),openInNewTab?$window.open($state.href("app.stack",{id:id},{absolute:!0}),"_blank"):$state.go("app.stack",{id:id}),event.preventDefault()}function nextPage(){return $ExceptionlessClient.createFeatureUsage(vm._source+".nextPage").setProperty("next",vm.next).submit(),get(vm.next)}function previousPage(){return $ExceptionlessClient.createFeatureUsage(vm._source+".previousPage").setProperty("previous",vm.previous).submit(),get(vm.previous)}function save(action){function onSuccess(){vm.selectedIds=[]}0===vm.selectedIds.length?notificationService.info(null,"Please select one or more stacks"):action.run(vm.selectedIds).then(onSuccess)}function updateSelection(){vm.stacks&&0===vm.stacks.length||(vm.selectedIds.length>0?vm.selectedIds=[]:vm.selectedIds=vm.stacks.map((function(stack){return stack.id})))}this.$onInit=function $onInit(){vm._source=vm.settings.source+".stacks",vm.actions=stacksActionsService.getActions(),vm.canRefresh=canRefresh,vm.get=get,vm.hasFilter=filterService.hasFilter,vm.loading=!0,vm.nextPage=nextPage,vm.open=open,vm.previousPage=previousPage,vm.save=save,vm.selectedIds=[],vm.showType=vm.settings.summary?vm.settings.showType:!filterService.getEventType(),vm.stacks=[],vm.updateSelection=updateSelection,get()}}],controllerAs:"vm"}}))}(),function(){"use strict";angular.module("exceptionless.state",["angular-locker","ui.router"]).factory("stateService",["$location","$state","locker",function($location,$state,locker){var _store=locker.driver("session").namespace("state"),service;function clear(){_store.forget(["name","params"])}function restore(secondaryStateNameToRedirect,secondaryStateParams){var name=_store.pull("name"),params=_store.pull("params")||{};return name?$state.go(name,params):secondaryStateNameToRedirect?$state.go(secondaryStateNameToRedirect,secondaryStateParams||{}):$location.path("/")}function save(exclusions){exclusions&&exclusions.filter((function(e){return $state.current.name.startsWith(e)}))[0]||_store.has("name")||(_store.put("name",$state.current.name),_store.put("params",$state.params))}return{clear:clear,restore:restore,save:save}}])}(),function(){"use strict";angular.module("exceptionless.status",["restangular"]).factory("statusService",["Restangular",function(Restangular){function get(){return Restangular.one("status").get()}var service;return{get:get}}])}(),function(){"use strict";angular.module("exceptionless.system-notification",["exceptionless.refresh"]).directive("systemNotification",[function(SYSTEM_NOTIFICATION_MESSAGE){return{restrict:"E",templateUrl:"components/system-notification/system-notification-directive.tpl.html",controller:function(){var svm=this;function processSystemNotification(notification){console.log(notification),notification&&(svm.systemNotificationMessage=notification.message||SYSTEM_NOTIFICATION_MESSAGE)}this.$onInit=function $onInit(){svm.processSystemNotification=processSystemNotification,svm.systemNotificationMessage=SYSTEM_NOTIFICATION_MESSAGE}},controllerAs:"svm"}}])}(),function(){"use strict";angular.module("exceptionless.summary",["exceptionless.truncate"]).directive("summary",(function(){return{restrict:"E",scope:{source:"=",showType:"="},template:'<ng-include src="templateUrl" />',link:function(scope){var level=scope.source&&scope.source.data&&scope.source.data.Level?scope.source.data.Level.toLowerCase():null;scope.isLevelSuccess="trace"===level||"debug"===level,scope.isLevelInfo="info"===level,scope.isLevelWarning="warn"===level,scope.isLevelError="error"===level,scope.templateUrl="components/summary/templates/"+scope.source.template_key+".tpl.html"}}}))}(),function(){"use strict";angular.module("exceptionless.timeago",[]).directive("timeago",["$interval",function($interval){return{restrict:"AE",scope:{date:"="},link:function(scope,element){function setTimeagoText(){var date=moment(scope.date);element.text(scope.date&&date.isValid()&&date.year()>1?date.fromNow():"never")}setTimeagoText(),scope.$watch("date",(function(){setTimeagoText()}));var interval=$interval(setTimeagoText,15e3);scope.$on("$destroy",(function(){$interval.cancel(interval)}))}}}])}(),function(){"use strict";angular.module("exceptionless.token",["restangular"]).factory("tokenService",["Restangular",function(Restangular){function create(options){var token={organization_id:options.organization_id,project_id:options.project_id,scopes:["client"]};return Restangular.all("tokens").post(token)}function getById(id){return Restangular.one("tokens",id).get()}function getByOrganizationId(id,options){return Restangular.one("organizations",id).all("tokens").getList(options||{})}function getByProjectId(id,options){return Restangular.one("projects",id).all("tokens").getList(options||{})}function getProjectDefault(id){return Restangular.one("projects",id).one("tokens","default").get()}function remove(id){return Restangular.one("tokens",id).remove()}function update(id,token){return Restangular.one("tokens",id).patch(token)}var service;return{create:create,getById:getById,getByOrganizationId:getByOrganizationId,getByProjectId:getByProjectId,getProjectDefault:getProjectDefault,remove:remove,update:update}}])}(),function(){"use strict";angular.module("exceptionless.truncate",["debounce"]).directive("truncate",["$window","$timeout","debounce",function($window,$timeout,debounce){return{restrict:"A",link:function(scope,element,attrs){var el=angular.element(element),lines=attrs.lines||1,defaultOverflow,defaultWhiteSpace,firstRender;1===lines&&(firstRender=!0,defaultOverflow=el.css("overflow"),defaultWhiteSpace=el.css("whitespace"),defaultOverflow||(defaultOverflow="initial"),defaultWhiteSpace||(defaultWhiteSpace="initial"),el.css("overflow","hidden"),el.css("white-space","nowrap"));var truncate=debounce((function(){firstRender&&(firstRender=!1,el.css("overflow",defaultOverflow),el.css("white-space",defaultWhiteSpace)),el.trunk8({lines:lines,tooltip:void 0===attrs.overwriteTooltip||!0===attrs.overwriteTooltip})}),100),timeout=$timeout(truncate,100),window=angular.element($window);window.bind("resize",truncate),scope.$on("$destroy",(function(e){$timeout.cancel(timeout),window.unbind("resize",truncate)}))}}}])}(),function(){"use strict";angular.module("exceptionless.user",["restangular"]).factory("userService",["$cacheFactory","$rootScope","Restangular",function($cacheFactory,$rootScope,Restangular){var _cache=$cacheFactory("http:user");$rootScope.$on("cache:clear",_cache.removeAll),$rootScope.$on("cache:clear-user",_cache.removeAll),$rootScope.$on("auth:logout",_cache.removeAll),$rootScope.$on("UserChanged",_cache.removeAll);var _cachedRestangular=Restangular.withConfig((function(RestangularConfigurer){RestangularConfigurer.setDefaultHttpFields({cache:_cache})})),service;function addAdminRole(id){return Restangular.one("users",id).one("admin-role").post()}function getCurrentUser(useCache){return void 0===useCache||useCache?_cachedRestangular.one("users","me").get():Restangular.one("users","me").get()}function getById(id){return Restangular.one("users",id).get()}function getByOrganizationId(id,options){return Restangular.one("organizations",id).all("users").getList(options||{})}function hasAdminRole(user){return hasRole(user,"global")}function hasRole(user,role){return!!user&&!!user.roles&&-1!==user.roles.indexOf(role)}function removeAdminRole(id){return Restangular.one("users",id).one("admin-role").remove()}function resendVerificationEmail(id){return Restangular.one("users",id).one("resend-verification-email").get()}function update(id,project){return Restangular.one("users",id).patch(project)}function updateEmailAddress(id,email){return Restangular.one("users",id).one("email-address",email).post()}function verifyEmailAddress(token){return Restangular.one("users","verify-email-address").one(token).get()}return{addAdminRole:addAdminRole,getCurrentUser:getCurrentUser,getById:getById,getByOrganizationId:getByOrganizationId,hasAdminRole:hasAdminRole,hasRole:hasRole,removeAdminRole:removeAdminRole,resendVerificationEmail:resendVerificationEmail,update:update,updateEmailAddress:updateEmailAddress,verifyEmailAddress:verifyEmailAddress}}])}(),function(){"use strict";angular.module("exceptionless.users",["exceptionless","exceptionless.dialog","exceptionless.link","exceptionless.notification","exceptionless.organization","exceptionless.pagination","exceptionless.refresh","exceptionless.user"]).directive("users",(function(){return{bindToController:!0,restrict:"E",replace:!0,scope:{settings:"="},templateUrl:"components/users/users-directive.tpl.html",controller:["$ExceptionlessClient","$window","$state","dialogService","linkService","notificationService","organizationService","paginationService","userService",function($ExceptionlessClient,$window,$state,dialogService,linkService,notificationService,organizationService,paginationService,userService){var vm=this;function get(options,useCache){function onSuccess(response){vm.users=response.data.plain();var links=linkService.getLinksQueryParameters(response.headers("link"));return vm.previous=links.previous,vm.next=links.next,vm.pageSummary=paginationService.getCurrentPageSummary(response.data,vm.currentOptions.page,vm.currentOptions.limit),0===vm.users.length&&vm.currentOptions.page&&vm.currentOptions.page>1?get(null,useCache):vm.users}return vm.currentOptions=options||vm.settings.options,vm.settings.get(vm.currentOptions,useCache).then(onSuccess)}function hasAdminRole(user){return userService.hasAdminRole(user)}function hasUsers(){return vm.users&&vm.users.length>0}function nextPage(){return $ExceptionlessClient.createFeatureUsage(vm._source+".nextPage").setProperty("next",vm.next).submit(),get(vm.next)}function previousPage(){return $ExceptionlessClient.createFeatureUsage(vm._source+".previousPage").setProperty("previous",vm.previous).submit(),get(vm.previous)}function remove(user){return $ExceptionlessClient.createFeatureUsage(vm._source+".remove").setProperty("user",user).submit(),dialogService.confirmDanger("Are you sure you want to remove this user from your organization?","REMOVE USER").then((function(){function onSuccess(){$ExceptionlessClient.createFeatureUsage(vm._source+".remove.success").setProperty("user",user).submit()}function onFailure(){$ExceptionlessClient.createFeatureUsage(vm._source+".remove.error").setProperty("user",user).submit(),notificationService.error("An error occurred while trying to remove the user.")}return organizationService.removeUser(vm.settings.organizationId,user.email_address).then(onSuccess,onFailure)})).catch((function(e){}))}function resendNotification(user){function onFailure(){notificationService.error("An error occurred while trying to resend the notification.")}return organizationService.addUser(vm.settings.organizationId,user.email_address).catch(onFailure)}function updateAdminRole(user){$ExceptionlessClient.createFeatureUsage(vm._source+".updateAdminRole").setProperty("user",user).submit();var message="Are you sure you want to "+(userService.hasAdminRole(user)?"remove":"add")+" the admin role for this user?";return dialogService.confirmDanger(message,userService.hasAdminRole(user)?"REMOVE":"ADD").then((function(){function onSuccess(){$ExceptionlessClient.createFeatureUsage(vm._source+".updateAdminRole.success").setProperty("user",user).submit()}function onFailure(){$ExceptionlessClient.createFeatureUsage(vm._source+".updateAdminRole.error").setProperty("user",user).submit(),notificationService.error("An error occurred while "+(userService.hasAdminRole(user)?"remove":"add")+" the admin role.")}return userService.hasAdminRole(user)?userService.removeAdminRole(user.id).then(onSuccess,onFailure):userService.addAdminRole(user.id).then(onSuccess,onFailure)})).catch((function(e){}))}this.$onInit=function $onInit(){vm._source="exceptionless.users",vm.currentOptions={},vm.get=get,vm.hasAdminRole=hasAdminRole,vm.hasUsers=hasUsers,vm.nextPage=nextPage,vm.open=open,vm.previousPage=previousPage,vm.remove=remove,vm.resendNotification=resendNotification,vm.updateAdminRole=updateAdminRole,vm.users=[],$ExceptionlessClient.submitFeatureUsage(vm._source),get()}}],controllerAs:"vm"}}))}(),function(){"use strict";angular.module("exceptionless.url",[]).factory("urlService",["$state",function($state){function buildFilterUrl(options){var routeParts=[],routeParams={};return options.routePrefix&&routeParts.push(options.routePrefix),options.organizationId?(routeParts.push("organization"),routeParams.organizationId=options.organizationId):options.projectId&&(routeParts.push("project"),routeParams.projectId=options.projectId),options.type&&(routeParts.push("type"),routeParams.type=options.type),routeParts.push(options.route),$state.href("app."+routeParts.join("-"),routeParams,{absolute:!0})}function buildUrl(isSecure,host,port,path,queryString){if(!host)return null;var url=(isSecure?"https://":"http://")+host;if(80!==port&&443!==port&&(url+=":"+port),path&&(path&&0!==path.indexOf("/")&&(url+="/"),url+=path),queryString&&Object.keys(queryString).length>0){var isFirst=!0;for(var key in queryString)isFirst?(url+="?",isFirst=!1):url+="&",url+=key+"="+queryString[key]}return url}var service;return{buildFilterUrl:buildFilterUrl,buildUrl:buildUrl}}])}(),function(){"use strict";angular.module("exceptionless.ui-nav",[]).directive("uiNav",(function(){return{restrict:"AC",link:function(scope,element){var _window=$(window),_mb=768,_wrap=$(".app-aside"),_next,_backdrop=".dropdown-backdrop";element.on("click","a",(function(e){_next&&_next.trigger("mouseleave.nav");var _this=$(this);_this.parent().siblings(".active").toggleClass("active"),_this.next().is("ul")&&_this.parent().toggleClass("active")&&e&&e.preventDefault&&e.preventDefault(),_this.next().is("ul")||_window.width()<768&&$(".app-aside").removeClass("show off-screen")})),element.on("mouseenter","a",(function(e){if(_next&&_next.trigger("mouseleave.nav"),$(".app-aside-fixed.app-aside-folded").length&&!(_window.width()<768)){var _this=$(e.target),top,w_h=$(window).height(),offset=50,min=150;_this.is("a")||(_this=_this.closest("a")),_this.next().is("ul")&&(_next=_this.next(),_this.parent().addClass("active"),top=_this.parent().position().top+50,_next.css("top",top),top+_next.height()>w_h&&_next.css("bottom",0),top+150>w_h&&_next.css("bottom",w_h-top-50).css("top","auto"),_next.appendTo(_wrap),_next.on("mouseleave.nav",(function(e){$(_backdrop).remove(),_next.appendTo(_this.parent()),_next.off("mouseleave.nav").css("top","auto").css("bottom","auto"),_this.parent().removeClass("active")})),$(".smart").length&&$('<div class="dropdown-backdrop"/>').insertAfter(".app-aside").on("click",(function(next){next&&next.trigger("mouseleave.nav")})))}})),_wrap.on("mouseleave",(function(e){_next&&_next.trigger("mouseleave.nav")}))}}}))}(),function(){"use strict";angular.module("exceptionless.ui-scroll",[]).directive("uiScroll",["$location","$anchorScroll",function($location,$anchorScroll){return{restrict:"AC",link:function(scope,el,attr){el.on("click",(function(e){$location.hash(attr.uiScroll),$anchorScroll()}))}}}])}(),function(){"use strict";angular.module("exceptionless.ui-shift",[]).directive("uiShift",["$timeout",function($timeout){return{restrict:"A",link:function(scope,el,attr){var _el=$(el),_window=$(window),prev=_el.prev(),parent,width=_window.width();function sm(){$timeout((function(){var method=attr.uiShift,target=attr.target;_el.hasClass("in")||_el[method](target).addClass("in")}))}function md(){parent&&parent.prepend(el),parent||_el.insertAfter(prev),_el.removeClass("in")}prev.length||(parent=_el.parent()),width<768?sm():md(),_window.resize((function(){width!==_window.width()&&$timeout((function(){_window.width()<768?sm():md(),width=_window.width()}))}))}}}])}(),function(){"use strict";angular.module("exceptionless.ui-toggle-class",[]).directive("uiToggleClass",(function(){return{restrict:"AC",link:function(scope,el,attr){el.on("click",(function(e){e&&e.preventDefault&&e.preventDefault();var classes=attr.uiToggleClass.split(","),targets=attr.target&&attr.target.split(",")||new Array(el),key=0;function magic(_class,target){for(var patt=new RegExp("\\s"+_class.replace(/\*/g,"[A-Za-z0-9-_]+").split(" ").join("\\s|\\s")+"\\s","g"),cn=" "+$(target)[0].className+" ";patt.test(cn);)cn=cn.replace(patt," ");$(target)[0].className=$.trim(cn)}angular.forEach(classes,(function(_class){var target=targets[targets.length&&key];-1!==_class.indexOf("*")&&magic(_class,target),$(target).toggleClass(_class),key++})),$(el).toggleClass("active")}))}}}))}(),function(){"use strict";angular.module("exceptionless.validators",["exceptionless.auth","exceptionless.organization","exceptionless.project","exceptionless.search"])}(),function(){"use strict";angular.module("exceptionless.validators").directive("emailAddressAvailableValidator",["$timeout","$q","authService",function($timeout,$q,authService){return{restrict:"A",require:"ngModel",link:function(scope,element,attrs,ngModel){ngModel.$asyncValidators.unique=function(emailAddress){var deferred=$q.defer();return ngModel.$pristine?$timeout((function(){deferred.resolve(!0)}),0):authService.isEmailAddressAvailable(emailAddress).then((function(response){201===response.status?deferred.reject(""):deferred.resolve(!0)}),(function(){deferred.reject("An error occurred while validating the email address.")})),deferred.promise}}}}])}(),function(){"use strict";angular.module("exceptionless.validators").directive("organizationNameAvailableValidator",["$timeout","$q","organizationService",function($timeout,$q,organizationService){return{restrict:"A",require:"ngModel",link:function(scope,element,attrs,ngModel){ngModel.$asyncValidators.unique=function(name){var deferred=$q.defer();return ngModel.$pristine?$timeout((function(){deferred.resolve(!0)}),0):organizationService.isNameAvailable(name).then((function(response){201===response.status?deferred.reject(""):deferred.resolve(!0)}),(function(){deferred.reject("An error occurred while validating the organization name.")})),deferred.promise}}}}])}(),function(){"use strict";angular.module("exceptionless.validators").directive("projectNameAvailableValidator",["$timeout","$q","projectService",function($timeout,$q,projectService){return{restrict:"A",require:"ngModel",scope:{organizationId:"="},link:function(scope,element,attrs,ngModel){ngModel.$asyncValidators.unique=function(name){var deferred=$q.defer();return ngModel.$pristine?$timeout((function(){deferred.resolve(!0)}),0):"__newOrganization"===scope.organizationId?deferred.resolve(!0):projectService.isNameAvailable(scope.organizationId,name).then((function(response){201===response.status?deferred.reject(""):deferred.resolve(!0)}),(function(){deferred.reject("An error occurred while validating the project name.")})),deferred.promise},scope.$watch("organizationId",(function(){ngModel.$validate()}))}}}])}(),function(){"use strict";angular.module("exceptionless.validators").directive("searchFilterValidator",["$timeout","$q","searchService",function($timeout,$q,searchService){return{restrict:"A",require:"ngModel",link:function(scope,element,attrs,ngModel){ngModel.$asyncValidators.valid=function(query){var deferred=$q.defer();return ngModel.$pristine?$timeout((function(){deferred.resolve(!0)}),0):searchService.validate(query).then((function(response){response.data.is_valid||deferred.reject(response.data.message),deferred.resolve(!0)}),(function(){deferred.reject("An error occurred while validating the search filter.")})),deferred.promise}}}}])}(),function(){"use strict";angular.module("exceptionless.validators").directive("semanticVersionValidator",(function(){return{restrict:"A",require:"ngModel",link:function(scope,element,attrs,ngModel){ngModel.$validators.semver=function(modelValue,viewValue){if("string"!=typeof viewValue)return!0;var version=viewValue.trim(),regex;return 0===version.length||!(version.length>256)&&new RegExp("^v?(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][a-zA-Z0-9-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][a-zA-Z0-9-]*))*))?(?:\\+([0-9A-Za-z-]+(?:\\.[0-9A-Za-z-]+)*))?$").test(version)}}}}))}(),function(){"use strict";angular.module("exceptionless.web-hook",["checklist-model","ngMessages","restangular","ui.bootstrap","dialogs.main","dialogs.default-translations","exceptionless","exceptionless.autofocus"])}(),function(){"use strict";angular.module("exceptionless.web-hook").controller("AddWebHookDialog",["$ExceptionlessClient","$uibModalInstance",function($ExceptionlessClient,$uibModalInstance){var vm=this;function cancel(){$ExceptionlessClient.submitFeatureUsage(vm._source+".cancel"),$uibModalInstance.dismiss("cancel")}function getEventTypes(){return[{key:"NewError",name:"New Error",description:"Occurs when a new error that has never been seen before is reported to your project."},{key:"CriticalError",name:"Critical Error",description:"Occurs when an error that has been marked as critical is reported to your project."},{key:"StackRegression",name:"Regression",description:"Occurs when an event that has been marked as fixed has reoccurred in your project."},{key:"NewEvent",name:"New Event",description:"Occurs when a new event that has never been seen before is reported to your project."},{key:"CriticalEvent",name:"Critical Event",description:"Occurs when an event that has been marked as critical is reported to your project."},{key:"StackPromoted",name:"Promoted",description:"Used to promote event stacks to external systems."}]}function hasEventTypeSelection(){return vm.data.event_types&&vm.data.event_types.length>0}function save(isValid){isValid&&($ExceptionlessClient.createFeatureUsage(vm._source+".save").setProperty("WebHook",vm.data).submit(),$uibModalInstance.close(vm.data))}this.$onInit=function $onInit(){vm._source="exceptionless.web-hook.AddWebHookDialog",vm.addWebHookForm={},vm.cancel=cancel,vm.data={},vm.eventTypes=[{key:"NewError",name:"New Error",description:"Occurs when a new error that has never been seen before is reported to your project."},{key:"CriticalError",name:"Critical Error",description:"Occurs when an error that has been marked as critical is reported to your project."},{key:"StackRegression",name:"Regression",description:"Occurs when an event that has been marked as fixed has reoccurred in your project."},{key:"NewEvent",name:"New Event",description:"Occurs when a new event that has never been seen before is reported to your project."},{key:"CriticalEvent",name:"Critical Event",description:"Occurs when an event that has been marked as critical is reported to your project."},{key:"StackPromoted",name:"Promoted",description:"Used to promote event stacks to external systems."}],vm.hasEventTypeSelection=hasEventTypeSelection,vm.save=save,$ExceptionlessClient.submitFeatureUsage(vm._source)}}])}(),function(){"use strict";angular.module("exceptionless.web-hook").factory("webHookService",["Restangular",function(Restangular){function create(webHook){return Restangular.all("webhooks").post(webHook)}function getAll(options){return Restangular.all("webhooks").getList(options||{})}function getById(id){return Restangular.one("webhooks",id).get()}function getByOrganizationId(id,options){return Restangular.one("organizations",id).all("webhooks").getList(options||{})}function getByProjectId(id,options){return Restangular.one("projects",id).all("webhooks").getList(options||{})}function remove(id){return Restangular.one("webhooks",id).remove()}var service;return{create:create,getAll:getAll,getById:getById,getByOrganizationId:getByOrganizationId,getByProjectId:getByProjectId,remove:remove}}])}(),function(){"use strict";angular.module("app").controller("App",["$rootScope","$scope","$state","$stateParams","$window","authService","billingService","$ExceptionlessClient","filterService","hotkeys","INTERCOM_APPID","$intercom","locker","notificationService","organizationService","signalRService","stateService","SLACK_APPID","STRIPE_PUBLISHABLE_KEY","urlService","userService",function($rootScope,$scope,$state,$stateParams,$window,authService,billingService,$ExceptionlessClient,filterService,hotkeys,INTERCOM_APPID,$intercom,locker,notificationService,organizationService,signalRService,stateService,SLACK_APPID,STRIPE_PUBLISHABLE_KEY,urlService,userService){var vm=this;function addHotkeys(){function logFeatureUsage(name){$ExceptionlessClient.createFeatureUsage(vm._source+".hotkeys"+name).addTags("hotkeys").submit()}isIntercomEnabled()&&hotkeys.bindTo($scope).add({combo:"c",description:"Chat with Support",callback:function chatWithSupport(){logFeatureUsage("Support"),showIntercom()}}),hotkeys.bindTo($scope).add({combo:"g w",description:"Go to Documentation",callback:function goToDocumention(){logFeatureUsage("Documentation"),$window.open("https://github.com/exceptionless/Exceptionless/wiki","_blank")}}).add({combo:"s",description:"Focus Search Bar",callback:function focusSearchBar(event){event.preventDefault(),logFeatureUsage("SearchBar"),$("#search").focus().select()}}).add({combo:"g a",description:"Go to My Account",callback:function goToMyAccount(){logFeatureUsage("Account"),$state.go("app.account.manage",{tab:"general"})}}).add({combo:"g n",description:"Go to Notifications",callback:function goToNotifications(){logFeatureUsage("Notifications"),$state.go("app.account.manage",{tab:"notifications"})}}).add({combo:"g d",description:"Go to Dashboard",callback:function goToDashboard(){logFeatureUsage("Dashboard"),$window.open(vm.dashboardUrl.all,"_self")}}).add({combo:"g o",description:"Go to Organizations",callback:function goToOrganizations(){logFeatureUsage("Organizations"),$state.go("app.organization.list")}}).add({combo:"g p",description:"Go to Projects",callback:function goToProjects(){logFeatureUsage("Projects"),$state.go("app.project.list")}}).add({combo:"g+g",description:"Go to GitHub project",callback:function goToGitHub(){logFeatureUsage("GitHub"),$window.open("https://github.com/exceptionless/Exceptionless","_blank")}}).add({combo:"g s",description:"Go to public slack channel",callback:function goToSlack(){logFeatureUsage("Slack"),$window.open("http://slack.exceptionless.com","_blank")}})}function buildMenus(){function getFilterUrl(route,type){return urlService.buildFilterUrl({route:route,projectId:filterService.getProjectId(),organizationId:filterService.getOrganizationId(),type:type})}function buildUrls(){var result={dashboard:{},sessionDashboard:urlService.buildFilterUrl({route:"dashboard",routePrefix:"session",projectId:filterService.getProjectId(),organizationId:filterService.getOrganizationId()}),recent:{},frequent:{},users:{},new:{}};return[void 0,"error","log","404","usage"].forEach((function(type){var key=type||"all";result.dashboard[key]=getFilterUrl("dashboard",type),result.recent[key]=getFilterUrl("recent",type),result.frequent[key]=getFilterUrl("frequent",type),result.users[key]=getFilterUrl("users",type),result.new[key]=getFilterUrl("new",type)})),result}function isAllMenuActive(state,params){return dashboards.filter((function(dashboard){return!!(state.includes("app."+dashboard,params)||state.includes("app.project-"+dashboard,params)||state.includes("app.organization-"+dashboard,params))})).length>0}function isAdminMenuActive(state,params){return state.includes("app.project.list",params)||state.includes("app.organization.list",params)||state.includes("app.account.manage",params)||state.includes("app.admin.dashboard",params)}function isReportsMenuActive(state,params){return state.includes("app.session-dashboard",params)||state.includes("app.session-project-dashboard",params)||state.includes("app.session-organization-dashboard",params)}function isTypeMenuActive(state,params,type){var parameters=angular.extend({},params,{type:type});return dashboards.filter((function(dashboard){return!!(state.includes("app.type-"+dashboard,parameters)||state.includes("app.project-type-"+dashboard,parameters)||state.includes("app.organization-type-"+dashboard,parameters))})).length>0}var dashboards=["dashboard","frequent","new","recent","users"];vm.urls=buildUrls(),vm.isMenuActive={all:isAllMenuActive($state,$stateParams),error:isTypeMenuActive($state,$stateParams,"error"),log:isTypeMenuActive($state,$stateParams,"log"),404:isTypeMenuActive($state,$stateParams,"404"),usage:isTypeMenuActive($state,$stateParams,"usage"),admin:isAdminMenuActive($state,$stateParams),reports:isReportsMenuActive($state,$stateParams)}}function changePlan(organizationId){if(STRIPE_PUBLISHABLE_KEY)return billingService.changePlan(organizationId).catch((function(e){}));notificationService.error("Billing is currently disabled.")}function getOrganizations(){function onSuccess(response){return vm.organizations=response.data.plain(),vm.canChangePlan=!!STRIPE_PUBLISHABLE_KEY&&vm.organizations.length>0,response}return organizationService.getAll().then(onSuccess)}function getUser(data){function onSuccess(response){return vm.user=response.data.plain(),$ExceptionlessClient.config.setUserIdentity({identity:vm.user.email_address,name:vm.user.full_name,data:{user:vm.user}}),response}return data&&"User"===data.type&&data.deleted&&data.id===vm.user.id?(notificationService.error("Your user account was deleted. Please create a new account."),authService.logout(!0)):userService.getCurrentUser().then(onSuccess)}function isIntercomEnabled(){return authService.isAuthenticated()&&INTERCOM_APPID}function startSignalR(){return signalRService.startDelayed(1e3)}function showIntercom(){isIntercomEnabled()&&($ExceptionlessClient.submitFeatureUsage(vm._source+".showIntercom"),$intercom.showNewMessage())}function toggleSideNavCollapsed(){vm.isSideNavCollapsed=!vm.isSideNavCollapsed,vm._store.put("sideNavCollapsed",vm.isSideNavCollapsed)}this.$onInit=function $onInit(){function isSmartDevice($window){var ua=$window.navigator.userAgent||$window.navigator.vendor||$window.opera;return/iPhone|iPod|iPad|Silk|Android|BlackBerry|Opera Mini|IEMobile/.test(ua)}navigator.userAgent.match(/MSIE/i)&&angular.element($window.document.body).addClass("ie"),isSmartDevice($window)&&angular.element($window.document.body).addClass("smart"),$rootScope.$on("$stateChangeSuccess",buildMenus),$scope.$on("$destroy",signalRService.stop),vm._source="app.App",vm._store=locker.driver("local").namespace("app"),vm.canChangePlan=!1,vm.changePlan=changePlan,vm.urls={dashboard:{},sessionDashboard:"",recent:{},frequent:{},users:{},new:{}},vm.getOrganizations=getOrganizations,vm.getUser=getUser,vm.isMenuActive={},vm.isIntercomEnabled=isIntercomEnabled,vm.isSlackEnabled=!!SLACK_APPID,vm.isSideNavCollapsed=!0===vm._store.get("sideNavCollapsed"),vm.organizations=[],vm.showIntercom=showIntercom,vm.toggleSideNavCollapsed=toggleSideNavCollapsed,vm.user={},addHotkeys(),buildMenus(),getUser().then(getOrganizations).then(startSignalR)}}])}(),function(){"use strict";angular.module("app").controller("app.Dashboard",["$ExceptionlessClient","$filter","$stateParams","eventService","filterService","notificationService","organizationService","stackService",function($ExceptionlessClient,$filter,$stateParams,eventService,filterService,notificationService,organizationService,stackService){var vm=this;function canRefresh(data){return data&&"PersistentEvent"===data.type||"Stack"===data.type?filterService.includedInProjectOrOrganizationFilter({organizationId:data.organization_id,projectId:data.project_id}):data&&"Organization"===data.type||"Project"===data.type?filterService.includedInProjectOrOrganizationFilter({organizationId:data.id,projectId:data.id}):!data}function get(){return getOrganizations().then(getStats).catch((function(e){}))}function getStats(){function onSuccess(response){function getAggregationValue(data,name,defaultValue){var aggs=data.aggregations;return aggs&&aggs[name]&&aggs[name].value||defaultValue}function getAggregationItems(data,name,defaultValue){var aggs=data.aggregations;return aggs&&aggs[name]&&aggs[name].items||defaultValue}var results=response.data.plain(),termsAggregation=getAggregationItems(results,"terms_first",[]),count=getAggregationValue(results,"sum_count",0);vm.stats={count:$filter("number")(count,0),unique:$filter("number")(getAggregationValue(results,"cardinality_stack",0),0),new:$filter("number")(termsAggregation.length>0?termsAggregation[0].total:0,0),avg_per_hour:$filter("number")(eventService.calculateAveragePerHour(count,vm._organizations),1)};var dateAggregation=getAggregationItems(results,"date_date",[]);vm.chart.options.series[0].data=dateAggregation.map((function(item){return{x:moment(item.key).unix(),y:getAggregationValue(item,"cardinality_stack",0),data:item}})),vm.chart.options.series[1].data=dateAggregation.map((function(item){return{x:moment(item.key).unix(),y:getAggregationValue(item,"sum_count",0),data:item}}))}var offset=filterService.getTimeOffset();return eventService.count("date:(date"+(offset?"^"+offset:"")+" cardinality:stack sum:count~1) cardinality:stack terms:(first @include:true) sum:count~1").then(onSuccess)}function getOrganizations(){function onSuccess(response){return vm._organizations=response.data.plain(),vm._organizations}return organizationService.getAll().then(onSuccess)}this.$onInit=function $onInit(){vm._organizations=[],vm._source="app.Dashboard",vm.canRefresh=canRefresh,vm.chart={options:{padding:{top:.085},renderer:"stack",series:[{name:"Unique",color:"rgba(60, 116, 0, .9)",stroke:"rgba(0, 0, 0, 0.15)"},{name:"Count",color:"rgba(124, 194, 49, .7)",stroke:"rgba(0, 0, 0, 0.15)"}],stroke:!0,unstack:!0},features:{hover:{render:function(args){var date=moment.unix(args.domainX),formattedDate,content='<div class="date">'+(0===date.hours()&&0===date.minutes()?date.format("ddd, MMM D, YYYY"):date.format("ddd, MMM D, YYYY h:mma"))+"</div>";args.detail.sort((function(a,b){return a.order-b.order})).forEach((function(d){var swatch='<span class="detail-swatch" style="background-color: '+d.series.color.replace("0.5","1")+'"></span>';content+=swatch+$filter("number")(d.formattedYValue)+" "+d.series.name+" <br />"}),this);var xLabel=document.createElement("div");xLabel.className="x_label",xLabel.innerHTML=content,this.element.appendChild(xLabel);var leftAlignError=this._calcLayoutError([xLabel]),rightAlignError;leftAlignError>0&&(xLabel.classList.remove("left"),xLabel.classList.add("right"),this._calcLayoutError([xLabel])>leftAlignError&&(xLabel.classList.remove("right"),xLabel.classList.add("left")));this.show()}},range:{onSelection:function(position){var start=moment.unix(position.coordMinX).utc().local(),end=moment.unix(position.coordMaxX).utc().local();return filterService.setTime(start.format("YYYY-MM-DDTHH:mm:ss")+"-"+end.format("YYYY-MM-DDTHH:mm:ss")),$ExceptionlessClient.createFeatureUsage(vm._source+".chart.range.onSelection").setProperty("start",start).setProperty("end",end).submit(),!1}},xAxis:{timeFixture:new Rickshaw.Fixtures.Time.Local,overrideTimeFixtureCustomFormatters:!0},yAxis:{ticks:5,tickFormat:"formatKMBT",ticksTreatment:"glow"}}},vm.get=get,vm.mostFrequent={get:stackService.getFrequent,options:{limit:10,mode:"summary"},source:vm._source+".Frequent"},vm.mostRecent={header:"Most Recent",get:eventService.getAll,options:{limit:10,mode:"summary"},source:vm._source+".Recent"},vm.stats={count:0,unique:0,new:0,avg_per_hour:0},vm.type=$stateParams.type,get()}}])}(),function(){"use strict";angular.module("app").controller("app.Frequent",["stackService",function(stackService){var vm=this;this.$onInit=function $onInit(){vm.mostFrequent={get:stackService.getFrequent,options:{limit:20,mode:"summary"},source:"app.Frequent"}}}])}(),function(){"use strict";angular.module("app").controller("app.New",["stackService",function(stackService){var vm=this;this.$onInit=function $onInit(){vm.newest={get:stackService.getNew,options:{limit:20,mode:"summary"},source:"app.New"}}}])}(),function(){"use strict";angular.module("app").controller("app.Recent",["eventService",function(eventService){var vm=this;this.$onInit=function $onInit(){vm.mostRecent={get:eventService.getAll,options:{limit:20,mode:"summary"},source:"app.Recent"}}}])}(),function(){"use strict";angular.module("app").controller("app.Users",["stackService",function(stackService){var vm=this;this.$onInit=function $onInit(){vm.mostUsers={get:stackService.getUsers,options:{limit:20,mode:"summary"},source:"app.MostUsers"}}}])}(),function(){"use strict";angular.module("app.auth",["directives.inputMatch","ngMessages","satellizer","ui.router","app.config","exceptionless","exceptionless.analytics","exceptionless.auth","exceptionless.autofocus","exceptionless.notification","exceptionless.project","exceptionless.rate-limit","exceptionless.user","exceptionless.validators"]).config(["$authProvider","$stateProvider","BASE_URL","FACEBOOK_APPID","GOOGLE_APPID","GITHUB_APPID","LIVE_APPID",function($authProvider,$stateProvider,BASE_URL,FACEBOOK_APPID,GOOGLE_APPID,GITHUB_APPID,LIVE_APPID){$authProvider.baseUrl=BASE_URL+"/api/v2",$authProvider.facebook({clientId:FACEBOOK_APPID}),$authProvider.google({clientId:GOOGLE_APPID}),$authProvider.github({clientId:GITHUB_APPID}),$authProvider.live({clientId:LIVE_APPID,scope:["wl.emails"]}),$stateProvider.state("auth",{abstract:!0,template:'<ui-view autoscroll="true" />'}),$stateProvider.state("auth.forgot-password",{title:"Forgot Password",url:"/forgot-password",controller:"auth.ForgotPassword",controllerAs:"vm",templateUrl:"app/auth/forgot-password.tpl.html"}),$stateProvider.state("auth.login",{title:"Login",url:"/login?token",controller:"auth.Login",controllerAs:"vm",templateUrl:"app/auth/login.tpl.html"}),$stateProvider.state("auth.logout",{title:"Logout",url:"/logout",template:null,controller:"auth.Logout"}),$stateProvider.state("auth.reset-password",{title:"Reset Password",url:"/reset-password/:token?cancel",controller:"auth.ResetPassword",controllerAs:"vm",templateUrl:"app/auth/reset-password.tpl.html"}),$stateProvider.state("auth.signup",{title:"Signup",url:"/signup?token",controller:"auth.Signup",controllerAs:"vm",templateUrl:"app/auth/signup.tpl.html"})}])}(),function(){"use strict";angular.module("app.auth").controller("auth.ForgotPassword",["$ExceptionlessClient","$state","authService","notificationService",function($ExceptionlessClient,$state,authService,notificationService){var vm=this;function resetPassword(isValid){if(isValid)return $ExceptionlessClient.createFeatureUsage(vm._source+".resetPassword").setUserIdentity(vm.email).submit(),authService.forgotPassword(vm.email).then(onSuccess,onFailure);function onSuccess(){return $ExceptionlessClient.createFeatureUsage(vm._source+".resetPassword.success").setUserIdentity(vm.email).submit(),notificationService.info("An email was sent that contains instructions to change your password."),$state.go("auth.login")}function onFailure(response){$ExceptionlessClient.createFeatureUsage(vm._source+".resetPassword.error").setUserIdentity(vm.email).setProperty("response",response).submit();var message="An error occurred while trying to reset your password.";response.data&&response.data.message&&(message+=" Message: "+response.data.message),notificationService.error(message)}}this.$onInit=function $onInit(){vm._source="app.auth.ForgotPassword",vm.email=null,vm.resetPassword=resetPassword}}])}(),function(){"use strict";angular.module("app.auth").controller("auth.Login",["$ExceptionlessClient","$state","$stateParams","authService","FACEBOOK_APPID","GOOGLE_APPID","GITHUB_APPID","LIVE_APPID","notificationService","projectService","stateService",function($ExceptionlessClient,$state,$stateParams,authService,FACEBOOK_APPID,GOOGLE_APPID,GITHUB_APPID,LIVE_APPID,notificationService,projectService,stateService){var vm=this;function getMessage(response){var message="An error occurred while logging in. Please contact support for more information.";return response.data&&response.data.message&&(message+=" Message: "+response.data.message),message}function authenticate(provider){function onSuccess(){return $ExceptionlessClient.createFeatureUsage(vm._source+".authenticate").setProperty("InviteToken",vm.token).addTags(provider).submit(),redirectOnSignup()}function onFailure(response){$ExceptionlessClient.createFeatureUsage(vm._source+".authenticate.error").setProperty("InviteToken",vm.token).setProperty("response",response).addTags(provider).submit(),notificationService.error(getMessage(response))}return authService.authenticate(provider,{InviteToken:vm.token}).then(onSuccess,onFailure)}function isExternalLoginEnabled(provider){if(!provider)return!!(FACEBOOK_APPID||GITHUB_APPID||GOOGLE_APPID||LIVE_APPID);switch(provider){case"facebook":return!!FACEBOOK_APPID;case"github":return!!GITHUB_APPID;case"google":return!!GOOGLE_APPID;case"live":return!!LIVE_APPID;default:return!1}}function login(isValid){if(isValid)return authService.login(vm.user).then(onSuccess,onFailure);function onSuccess(){return $ExceptionlessClient.submitFeatureUsage(vm._source+".login"),redirectOnSignup()}function onFailure(response){$ExceptionlessClient.createFeatureUsage(vm._source+".login.error").setUserIdentity(vm.user.email).submit(),notificationService.error(getMessage(response))}}function redirectOnSignup(){function onSuccess(response){return response.data&&response.data.length>0?stateService.restore():(stateService.clear(),$state.go("app.project.add"))}function onFailure(){return stateService.restore("app.project.add")}return projectService.getAll().then(onSuccess,onFailure)}authService.isAuthenticated()&&authService.logout(),this.$onInit=function $onInit(){vm._source="app.auth.Login",vm.authenticate=authenticate,vm.isExternalLoginEnabled=isExternalLoginEnabled,vm.login=login,vm.loginForm={},vm.token=$stateParams.token,vm.user={invite_token:vm.token}}}])}(),function(){"use strict";angular.module("app.auth").controller("auth.Logout",["$state","authService",function($state,authService){this.$onInit=function $onInit(){authService.isAuthenticated()&&authService.logout(),$state.go("auth.login")}}])}(),function(){"use strict";angular.module("app.auth").controller("auth.ResetPassword",["$ExceptionlessClient","$state","$stateParams","authService","notificationService",function($ExceptionlessClient,$state,$stateParams,authService,notificationService){var vm=this;function changePassword(isValid){if(isValid)return $ExceptionlessClient.createFeatureUsage(vm._source+".changePassword").setProperty("ResetToken",vm._resetToken).submit(),authService.resetPassword(vm.data).then(onSuccess,onFailure);function onSuccess(){return $ExceptionlessClient.createFeatureUsage(vm._source+".changePassword.success").setProperty("ResetToken",vm._resetToken).submit(),notificationService.info("You have successfully changed your password."),$state.go("auth.login")}function onFailure(response){$ExceptionlessClient.createFeatureUsage(vm._source+".changePassword.error").setProperty("ResetToken",vm._resetToken).setProperty("response",response).submit();var message="An error occurred while trying to change your password.";response.data&&response.data.message&&(message+=" Message: "+response.data.message),notificationService.error(message)}}function cancelResetPassword(){function redirectToLoginPage(){return $state.go("auth.login")}function onSuccess(){$ExceptionlessClient.createFeatureUsage(vm._source+".cancelResetPassword.success").setProperty("ResetToken",vm._resetToken).submit()}function onFailure(response){$ExceptionlessClient.createFeatureUsage(vm._source+".cancelResetPassword.error").setProperty("ResetToken",vm._resetToken).setProperty("response",response).submit()}return $ExceptionlessClient.createFeatureUsage(vm._source+".cancelResetPassword").setProperty("ResetToken",vm._resetToken).submit(),authService.cancelResetPassword(vm._resetToken).then(onSuccess,onFailure).then(redirectToLoginPage,redirectToLoginPage)}this.$onInit=function $onInit(){vm._source="app.auth.ResetPassword",vm._cancelResetToken="true"===$stateParams.cancel,vm._resetToken=$stateParams.token,vm.changePassword=changePassword,vm.data={password_reset_token:vm._resetToken},vm._cancelResetToken&&cancelResetPassword()}}])}(),function(){"use strict";angular.module("app.auth").controller("auth.Signup",["$ExceptionlessClient","$location","$state","$stateParams","$timeout","analyticsService","authService","FACEBOOK_APPID","GOOGLE_APPID","GITHUB_APPID","LIVE_APPID","notificationService","projectService","stateService",function($ExceptionlessClient,$location,$state,$stateParams,$timeout,analyticsService,authService,FACEBOOK_APPID,GOOGLE_APPID,GITHUB_APPID,LIVE_APPID,notificationService,projectService,stateService){var vm=this;function getMessage(response){var message="An error occurred while signing up.  Please contact support for more information.";return response.data&&response.data.message&&(message+=" Message: "+response.data.message),message}function authenticate(provider){function onSuccess(){return analyticsService.completeRegistration($location.search()),$ExceptionlessClient.createFeatureUsage(vm._source+".authenticate").setProperty("InviteToken",vm.token).addTags(provider).submit(),redirectOnSignup()}function onFailure(response){$ExceptionlessClient.createFeatureUsage(vm._source+".authenticate.error").setProperty("InviteToken",vm.token).setProperty("response",response).addTags(provider).submit(),notificationService.error(getMessage(response))}return authService.authenticate(provider,{InviteToken:vm.token}).then(onSuccess,onFailure)}function isExternalLoginEnabled(provider){if(!provider)return!!(FACEBOOK_APPID||GITHUB_APPID||GOOGLE_APPID||LIVE_APPID);switch(provider){case"facebook":return!!FACEBOOK_APPID;case"github":return!!GITHUB_APPID;case"google":return!!GOOGLE_APPID;case"live":return!!LIVE_APPID;default:return!1}}function redirectOnSignup(){function onSuccess(response){return response.data&&response.data.length>0?stateService.restore():(stateService.clear(),$state.go("app.project.add"))}function onFailure(){return stateService.restore("app.project.add")}return projectService.getAll().then(onSuccess,onFailure)}function signup(isRetrying){function resetCanSignup(){vm._canSignup=!0}function retry(delay){var timeout=$timeout((function(){$timeout.cancel(timeout),signup(!0)}),delay||100)}if(!vm.signupForm||vm.signupForm.$invalid)return resetCanSignup(),!isRetrying&&retry(1e3);if(!vm.user.email||vm.signupForm.$pending)return retry();if(vm._canSignup)return vm._canSignup=!1,authService.signup(vm.user).then(onSuccess,onFailure).then(resetCanSignup,resetCanSignup);function onSuccess(){return analyticsService.completeRegistration($location.search()),$ExceptionlessClient.submitFeatureUsage(vm._source+".signup"),redirectOnSignup()}function onFailure(response){$ExceptionlessClient.createFeatureUsage(vm._source+".signup.error").setUserIdentity(vm.user.email).submit(),notificationService.error(getMessage(response))}}authService.isAuthenticated()&&authService.logout(!0,$stateParams),this.$onInit=function $onInit(){vm._source="app.auth.Signup",vm._canSignup=!0,vm.authenticate=authenticate,vm.isExternalLoginEnabled=isExternalLoginEnabled,vm.signup=signup,vm.signupForm={},vm.token=$stateParams.token,vm.user={invite_token:vm.token}}}])}(),function(){"use strict";angular.module("app.account",["directives.inputMatch","ngMessages","ui.bootstrap","ui.router","exceptionless","exceptionless.auth","exceptionless.autofocus","exceptionless.billing","exceptionless.dialog","exceptionless.project","exceptionless.promise-button","exceptionless.user","exceptionless.validators"]).config(["$stateProvider",function($stateProvider){$stateProvider.state("app.account",{abstract:!0,url:"/account",template:'<ui-view autoscroll="true" />'}),$stateProvider.state("app.account.manage",{title:"My Account",url:"/manage?projectId&tab",controller:"account.Manage",controllerAs:"vm",templateUrl:"app/account/manage.tpl.html"}),$stateProvider.state("app.account.verify",{title:"Verify Account",url:"/verify?token",template:null,controller:"account.Verify"})}])}(),function(){"use strict";angular.module("app.account").controller("account.Manage",["$stateParams","$timeout","authService","billingService","FACEBOOK_APPID","GOOGLE_APPID","GITHUB_APPID","LIVE_APPID","notificationService","projectService","userService",function($stateParams,$timeout,authService,billingService,FACEBOOK_APPID,GOOGLE_APPID,GITHUB_APPID,LIVE_APPID,notificationService,projectService,userService){var vm=this;function activateTab(tabName){switch(tabName){case"notifications":vm.activeTabIndex=1;break;case"password":vm.activeTabIndex=2;break;case"external":vm.activeTabIndex=3;break;default:vm.activeTabIndex=0}}function authenticate(provider){function onFailure(response){var message="An error occurred while adding external login.";response.data&&response.data.message&&(message+=" Message: "+response.data.message),notificationService.error(message)}return authService.authenticate(provider).catch(onFailure)}function changePassword(isValid){if(isValid)return authService.changePassword(vm.password).then(onSuccess,onFailure);function onSuccess(){notificationService.info("You have successfully changed your password."),vm.password={},vm.passwordForm.$setUntouched(!0),vm.passwordForm.$setPristine(!0)}function onFailure(response){var message="An error occurred while trying to change your password.";response.data&&response.data.message&&(message+=" Message: "+response.data.message),notificationService.error(message)}}function get(data){return data&&"User"===data.type&&data.deleted&&data.id===vm.user.id?(notificationService.error("Your user account was deleted. Please create a new account."),authService.logout(!0)):getUser().then(getProjects).then(getEmailNotificationSettings)}function getEmailNotificationSettings(){function onSuccess(response){return vm.emailNotificationSettings=response.data.plain(),vm.emailNotificationSettings}function onFailure(){notificationService.error("An error occurred while loading the notification settings.")}if(vm.emailNotificationSettings=null,vm.currentProject.id)return projectService.getNotificationSettings(vm.currentProject.id,vm.user.id).then(onSuccess,onFailure)}function getProjects(){function onSuccess(response){vm.projects=response.data.plain();var currentProjectId=vm.currentProject.id?vm.currentProject.id:$stateParams.projectId;return vm.currentProject=vm.projects.filter((function(p){return p.id===currentProjectId}))[0],vm.currentProject||(vm.currentProject=vm.projects.length>0?vm.projects[0]:{}),vm.hasPremiumFeatures=vm.currentProject&&vm.currentProject.has_premium_features,vm.projects}function onFailure(){notificationService.error("An error occurred while loading the projects.")}return projectService.getAll().then(onSuccess,onFailure)}function getUser(){function onSuccess(response){return vm.user=response.data.plain(),vm.user.o_auth_accounts=vm.user.o_auth_accounts||[],vm.hasLocalAccount=!0===vm.user.has_local_account,vm.user}function onFailure(response){var message="An error occurred while loading your user profile.";response.data&&response.data.message&&(message+=" Message: "+response.data.message),notificationService.error(message)}return userService.getCurrentUser().then(onSuccess,onFailure)}function hasPremiumEmailNotifications(){return vm.user.email_notifications_enabled&&vm.emailNotificationSettings&&vm.hasPremiumFeatures}function isExternalLoginEnabled(provider){if(!provider)return!!(FACEBOOK_APPID||GITHUB_APPID||GOOGLE_APPID||LIVE_APPID);switch(provider){case"facebook":return!!FACEBOOK_APPID;case"github":return!!GITHUB_APPID;case"google":return!!GOOGLE_APPID;case"live":return!!LIVE_APPID;default:return!1}}function resendVerificationEmail(){function onFailure(response){var message="An error occurred while sending your verification email.";response.data&&response.data.message&&(message+=" Message: "+response.data.message),notificationService.error(message)}return userService.resendVerificationEmail(vm.user.id).catch(onFailure)}function saveEmailAddress(isRetrying){function resetCanSaveEmailAddress(){vm._canSaveEmailAddress=!0}function retry(delay){var timeout=$timeout((function(){$timeout.cancel(timeout),saveEmailAddress(!0)}),delay||100)}if(!vm.emailAddressForm||vm.emailAddressForm.$invalid)return resetCanSaveEmailAddress(),!isRetrying&&retry(1e3);if(!vm.user.email_address||vm.emailAddressForm.$pending)return retry();if(vm._canSaveEmailAddress)return vm._canSaveEmailAddress=!1,userService.updateEmailAddress(vm.user.id,vm.user.email_address).then(onSuccess,onFailure).then(resetCanSaveEmailAddress,resetCanSaveEmailAddress);function onSuccess(response){vm.user.is_email_address_verified=response.data.is_verified}function onFailure(response){var message="An error occurred while saving your email address.";response.data&&response.data.message&&(message+=" Message: "+response.data.message),notificationService.error(message)}}function saveEmailNotificationSettings(){function onFailure(response){var message="An error occurred while saving your notification settings.";response.data&&response.data.message&&(message+=" Message: "+response.data.message),notificationService.error(message)}return projectService.setNotificationSettings(vm.currentProject.id,vm.user.id,vm.emailNotificationSettings).catch(onFailure)}function saveEnableEmailNotification(){function onFailure(response){var message="An error occurred while saving your email notification preferences.";response.data&&response.data.message&&(message+=" Message: "+response.data.message),notificationService.error(message)}return userService.update(vm.user.id,{email_notifications_enabled:vm.user.email_notifications_enabled}).catch(onFailure)}function saveUser(isValid){if(isValid)return userService.update(vm.user.id,vm.user).catch(onFailure);function onFailure(response){var message="An error occurred while saving your full name.";response.data&&response.data.message&&(message+=" Message: "+response.data.message),notificationService.error(message)}}function showChangePlanDialog(){return billingService.changePlan(vm.currentProject?vm.currentProject.organization_id:null).catch((function(e){}))}function unlink(account){function onSuccess(){vm.user.o_auth_accounts.splice(vm.user.o_auth_accounts.indexOf(account),1)}function onFailure(response){var message="An error occurred while removing the external login.";response.data&&response.data.message&&(message+=" Message: "+response.data.message),notificationService.error(message)}return authService.unlink(account.provider,account.provider_user_id).then(onSuccess,onFailure)}this.$onInit=function $onInit(){vm.activeTabIndex=0,vm.authenticate=authenticate,vm._canSaveEmailAddress=!0,vm.changePassword=changePassword,vm.currentProject={},vm.emailAddressForm={},vm.emailNotificationSettings=null,vm.getEmailNotificationSettings=getEmailNotificationSettings,vm.hasLocalAccount=!1,vm.get=get,vm.hasPremiumFeatures=!1,vm.hasPremiumEmailNotifications=hasPremiumEmailNotifications,vm.isExternalLoginEnabled=isExternalLoginEnabled,vm.password={},vm.passwordForm={},vm.projects=[],vm.resendVerificationEmail=resendVerificationEmail,vm.saveEmailAddress=saveEmailAddress,vm.saveEmailNotificationSettings=saveEmailNotificationSettings,vm.saveEnableEmailNotification=saveEnableEmailNotification,vm.saveUser=saveUser,vm.showChangePlanDialog=showChangePlanDialog,vm.unlink=unlink,vm.user={},activateTab($stateParams.tab),get()}}])}(),function(){"use strict";angular.module("app.account").controller("account.Verify",["$ExceptionlessClient","$rootScope","$state","$stateParams","notificationService","userService",function($ExceptionlessClient,$rootScope,$state,$stateParams,notificationService,userService){var vm=this;function redirect(){return $state.go("app.account.manage")}function verify(){function onSuccess(){$ExceptionlessClient.createFeatureUsage(vm._source+".verify.success").setProperty("Token",vm._token).submit(),$rootScope.$emit("UserChanged"),notificationService.info("Successfully verified your account.")}function onFailure(response){$ExceptionlessClient.createFeatureUsage(vm._source+".verify.error").setProperty("Token",vm._token).setProperty("response",response).submit();var message="An error occurred while verifying your account.";response&&response.data&&response.data.message&&(message+=" Message: "+response.data.message),notificationService.error(message)}return $ExceptionlessClient.createFeatureUsage(vm._source+".verify").setProperty("Token",vm._token).submit(),userService.verifyEmailAddress(vm._token).then(onSuccess,onFailure)}this.$onInit=function $onInit(){vm._source="app.account.Verify",vm._token=$stateParams.token,verify().finally(redirect)}}])}(),function(){"use strict";angular.module("app.admin",["ui.router"]).config(["$stateProvider",function($stateProvider){$stateProvider.state("app.admin",{abstract:!0,url:"/admin",template:'<ui-view autoscroll="true"/>'}),$stateProvider.state("app.admin.dashboard",{title:"Admin Dashboard",url:"/dashboard",controller:"admin.Dashboard",controllerAs:"vm",templateUrl:"app/admin/dashboard.tpl.html"})}])}(),function(){"use strict";angular.module("app.admin").controller("admin.Dashboard",[function(){var vm=this}])}(),function(){"use strict";angular.module("app.event",["angular-clipboard","angular-filters","cfp.hotkeys","ui.router","exceptionless","exceptionless.billing","exceptionless.error","exceptionless.event","exceptionless.events","exceptionless.filter","exceptionless.organization-notifications","exceptionless.link","exceptionless.notification","exceptionless.object-dump","exceptionless.refresh","exceptionless.simple-error","exceptionless.simple-stack-trace","exceptionless.stack-trace","exceptionless.timeago","exceptionless.url"]).config(["$stateProvider",function($stateProvider){$stateProvider.state("app.event",{title:"Event",url:"/event/{id:[0-9a-fA-F]{24}}?tab",controller:"Event",controllerAs:"vm",templateUrl:"app/event/event.tpl.html"}),$stateProvider.state("app.event-reference",{title:"Event Reference",url:"/event/by-ref/{referenceId:.{8,100}}",controller:"Reference",controllerAs:"vm",templateUrl:"app/event/reference.tpl.html"})}])}(),function(){"use strict";angular.module("app.event").controller("Event",["$ExceptionlessClient","$scope","$state","$stateParams","$timeout","billingService","clipboard","errorService","eventService","filterService","hotkeys","linkService","notificationService","projectService","urlService",function($ExceptionlessClient,$scope,$state,$stateParams,$timeout,billingService,clipboard,errorService,eventService,filterService,hotkeys,linkService,notificationService,projectService,urlService){var vm=this;function activateTab(tabName){for(var index=0;index<vm.tabs.length;index++){var tab=vm.tabs[index];if(tab.title===tabName){tab.active=!0,vm.activeTabIndex=tab.index;break}tab.active=!1}(vm.activeTabIndex<0||vm.activeTabIndex>=vm.tabs.length)&&(vm.tabs[0].active=!0,vm.activeTabIndex=0)}function addHotKeys(){hotkeys.del("mod+up"),hotkeys.del("mod+left"),hotkeys.del("mod+right"),hotkeys.del("mod+shift+c"),vm.event.stack_id&&(hotkeys.bindTo($scope).add({combo:"mod+up",description:"Go To Stack",callback:function(){$ExceptionlessClient.createFeatureUsage(vm._source+".hotkeys.GoToStack").addTags("hotkeys").setProperty("id",vm._eventId).submit(),$state.go("app.stack",{id:vm.event.stack_id})}}),clipboard.supported&&hotkeys.bindTo($scope).add({combo:"mod+shift+c",description:"Copy Event JSON to Clipboard",callback:function(){$ExceptionlessClient.createFeatureUsage(vm._source+".hotkeys.CopyEventJSON").addTags("hotkeys").setProperty("id",vm._eventId).submit(),clipboard.copyText(vm.event_json),copied()}})),vm.previous&&hotkeys.bindTo($scope).add({combo:"mod+left",description:"Previous Occurrence",callback:function(){$ExceptionlessClient.createFeatureUsage(vm._source+".hotkeys.PreviousOccurrence").addTags("hotkeys").setProperty("id",vm._eventId).submit(),$state.go("app.event",{id:vm.previous,tab:vm.getCurrentTab()})}}),vm.next&&hotkeys.bindTo($scope).add({combo:"mod+right",description:"Next Occurrence",callback:function(){$ExceptionlessClient.createFeatureUsage(vm._source+".hotkeys.NextOccurrence").addTags("hotkeys").setProperty("id",vm._eventId).submit(),$state.go("app.event",{id:vm.next,tab:vm.getCurrentTab()})}})}function buildReferences(){function toSpacedWords(value){return(value=(value=value.replace(/_/g," ").replace(/\s+/g," ").trim()).replace(/([a-z0-9])([A-Z0-9])/g,"$1 $2")).length>1?value.charAt(0).toUpperCase()+value.slice(1):value}vm.references=[];var referencePrefix="@ref:";angular.forEach(vm.event.data,(function(data,key){key.startsWith("@ref:")&&vm.references.push({id:data,name:toSpacedWords(key.slice(5))})}))}function buildTabs(tabNameToActivate){var tabIndex=0,tabs=[{index:tabIndex,title:"Overview",template_key:"overview"}];vm.event.reference_id&&vm.isSessionStart&&tabs.push({index:++tabIndex,title:"Session Events",template_key:"session"}),vm.event.data&&vm.event.data["@error"]?tabs.push({index:++tabIndex,title:"Exception",template_key:"error"}):vm.event.data&&vm.event.data["@simple_error"]&&tabs.push({index:++tabIndex,title:"Exception",template_key:"simple-error"}),vm.request&&Object.keys(vm.request).length>0&&tabs.push({index:++tabIndex,title:vm.isSessionStart?"Browser":"Request",template_key:"request"}),vm.environment&&Object.keys(vm.environment).length>0&&tabs.push({index:++tabIndex,title:"Environment",template_key:"environment"});var extendedDataItems=[];angular.forEach(vm.event.data,(function(data,key){"@trace"===key&&(key="Trace Log"),key.startsWith("@")||(isPromoted(key)?tabs.push({index:++tabIndex,title:key,template_key:"promoted",data:data}):vm._knownDataKeys.indexOf(key)<0&&extendedDataItems.push({title:key,data:data}))}),tabs),extendedDataItems.length>0&&tabs.push({index:++tabIndex,title:"Extended Data",template_key:"extended-data",data:extendedDataItems}),vm.tabs=tabs,$timeout((function(){activateTab(tabNameToActivate)}),1)}function canRefresh(data){return data&&"PersistentEvent"===data.type?data.id&&vm.event.id?data.id===vm.event.id:filterService.includedInProjectOrOrganizationFilter({organizationId:data.organization_id,projectId:data.project_id}):data&&"Stack"===data.type?filterService.includedInProjectOrOrganizationFilter({organizationId:data.organization_id,projectId:data.project_id}):data&&"Organization"===data.type||"Project"===data.type?filterService.includedInProjectOrOrganizationFilter({organizationId:data.id,projectId:data.id}):!data}function copied(){notificationService.success("Copied!")}function demoteTab(tabName){function onSuccess(){$ExceptionlessClient.createFeatureUsage(vm._source+".promoteTab.success").setProperty("id",vm._eventId).setProperty("TabName",tabName).submit(),vm.project.promoted_tabs.splice(indexOf,1),buildTabs("Extended Data")}function onFailure(response){$ExceptionlessClient.createFeatureUsage(vm._source+".promoteTab.error").setProperty("id",vm._eventId).setProperty("response",response).setProperty("TabName",tabName).submit(),notificationService.error("An error occurred promoting tab.")}var indexOf=vm.project.promoted_tabs.indexOf(tabName);if(!(indexOf<0))return $ExceptionlessClient.createFeatureUsage(vm._source+".demoteTab").setProperty("id",vm._eventId).setProperty("TabName",tabName).submit(),projectService.demoteTab(vm.project.id,tabName).then(onSuccess,onFailure)}function getCurrentTab(){var tab=vm.tabs.filter((function(t){return t.index===vm.activeTabIndex}))[0];return tab&&tab.index>0?tab.title:"Overview"}function getDuration(){return vm.event.value||moment().diff(vm.event.date,"seconds")}function getEvent(){function optionsCallback(options){return options.filter?options.filter+=" stack:current":options.filter="stack:current",options}function onSuccess(response){function getErrorType(event){var error=event.data&&event.data["@error"],type;if(error)return errorService.getTargetInfoExceptionType(error)||error.type||"Unknown";var simpleError=event.data&&event.data["@simple_error"];return simpleError&&simpleError.type?simpleError.type:"Unknown"}function getLocation(event){var location=event.data?event.data["@location"]:null;if(location)return[location.locality,location.level1,location.country].filter((function(value){return value&&value.length})).reduce((function(a,b,index){return a+=(index>0?", ":"")+b}),"")}function getMessage(event){if(event.data&&event.data["@error"]){var message=errorService.getTargetInfoMessage(event.data["@error"]);if(message)return message}return event.message}vm.event=response.data.plain(),vm.event_json=angular.toJson(vm.event),vm.sessionEvents.relativeTo=vm.event.date,vm.errorType=getErrorType(vm.event),vm.environment=vm.event.data&&vm.event.data["@environment"],vm.location=getLocation(vm.event),vm.message=getMessage(vm.event),vm.hasError=vm.event.data&&(vm.event.data["@error"]||vm.event.data["@simple_error"]),vm.isSessionStart="session"===vm.event.type,vm.level=vm.event.data&&vm.event.data["@level"]?vm.event.data["@level"].toLowerCase():null,vm.isLevelSuccess="trace"===vm.level||"debug"===vm.level,vm.isLevelInfo="info"===vm.level,vm.isLevelWarning="warn"===vm.level,vm.isLevelError="error"===vm.level,vm.request=vm.event.data&&vm.event.data["@request"],vm.hasCookies=vm.request&&!!vm.request.cookies&&Object.keys(vm.request.cookies).length>0,vm.requestUrl=vm.request&&urlService.buildUrl(vm.request.is_secure,vm.request.host,vm.request.port,vm.request.path,vm.request.query_string),vm.user=vm.event.data&&vm.event.data["@user"],vm.userIdentity=vm.user&&vm.user.identity,vm.userName=vm.user&&vm.user.name,vm.userDescription=vm.event.data&&vm.event.data["@user_description"],vm.userEmail=vm.userDescription&&vm.userDescription.email_address,vm.userDescription=vm.userDescription&&vm.userDescription.description,vm.version=vm.event.data&&vm.event.data["@version"];var links=linkService.getLinks(response.headers("link"));return vm.previous=links.previous?links.previous.split("/").pop():null,vm.next=links.next?links.next.split("/").pop():null,addHotKeys(),buildReferences(),vm.event}function onFailure(response){if(response&&426===response.status)return billingService.confirmUpgradePlan(response.data.message).then((function(){return getEvent()}),(function(){$state.go("app.dashboard")}));$state.go("app.dashboard"),notificationService.error('The event "'+$stateParams.id+'" could not be found.')}return vm._eventId||onFailure(),eventService.getById(vm._eventId,{},optionsCallback).then(onSuccess,onFailure).catch((function(e){}))}function getProject(){function onSuccess(response){return vm.project=response.data.plain(),vm.project.promoted_tabs=vm.project.promoted_tabs||[],vm.project}function onFailure(){$state.go("app.dashboard")}return vm.event&&vm.event.project_id||onFailure(),projectService.getById(vm.event.project_id,!0).then(onSuccess,onFailure)}function isPromoted(tabName){return!(!vm.project||!vm.project.promoted_tabs)&&vm.project.promoted_tabs.filter((function(tab){return tab===tabName})).length>0}function promoteTab(tabName){function onSuccess(){$ExceptionlessClient.createFeatureUsage(vm._source+".promoteTab.success").setProperty("id",vm._eventId).setProperty("TabName",tabName).submit(),vm.project.promoted_tabs.push(tabName),buildTabs(tabName)}function onFailure(response){$ExceptionlessClient.createFeatureUsage(vm._source+".promoteTab.error").setProperty("id",vm._eventId).setProperty("response",response).setProperty("TabName",tabName).submit(),notificationService.error("An error occurred promoting tab.")}return $ExceptionlessClient.createFeatureUsage(vm._source+".promoteTab").setProperty("id",vm._eventId).setProperty("TabName",tabName).submit(),projectService.promoteTab(vm.project.id,tabName).then(onSuccess,onFailure)}this.$onInit=function $onInit(){return vm._source="app.event.Event",vm._eventId=$stateParams.id,vm._knownDataKeys=["error","simple_error","request","environment","user","user_description","sessionend","session_id","version"],vm.activeTabIndex=-1,vm.activateTab=activateTab,vm.canRefresh=canRefresh,vm.copied=copied,vm.demoteTab=demoteTab,vm.event={},vm.event_json="",vm.excludedAdditionalData=["@browser","@browser_version","@browser_major_version","@device","@os","@os_version","@os_major_version","@is_bot"],vm.getCurrentTab=getCurrentTab,vm.getDuration=getDuration,vm.errorType="Unknown",vm.environment={},vm.location="",vm.message="",vm.isSessionStart=!1,vm.level="",vm.isLevelSuccess=!1,vm.isLevelInfo=!1,vm.isLevelWarning=!1,vm.isLevelError=!1,vm.isPromoted=isPromoted,vm.request={},vm.requestUrl="",vm.hasCookies=!1,vm.hasError=!1,vm.user={},vm.userIdentity="",vm.userName="",vm.userDescription={},vm.userEmail="",vm.userDescription="",vm.version="",vm.project={},vm.promoteTab=promoteTab,vm.references=[],vm.sessionEvents={get:function(options){function optionsCallback(options){options.filter="-type:heartbeat";var start=moment.utc(vm.event.date).local(),end=vm.event.data&&vm.event.data.sessionend?moment.utc(vm.event.data.sessionend).add(1,"seconds").local().format("YYYY-MM-DDTHH:mm:ss"):"now";return options.time=start.format("YYYY-MM-DDTHH:mm:ss")+"-"+end,options}return eventService.getBySessionId(vm.event.project_id,vm.event.reference_id,options,optionsCallback)},options:{limit:10,mode:"summary"},source:vm._source+".Recent",timeHeaderText:"Session Time",hideActions:!0,hideSessionStartTime:!0},vm.tabs=[],getEvent().then(getProject).then((function(){buildTabs($stateParams.tab)}))}}])}(),function(){"use strict";angular.module("exceptionless.event").directive("extendedDataItem",[function(){return{restrict:"E",scope:{canPromote:"=",data:"=",demoteTab:"&",excludedKeys:"=",isPromoted:"=",promoteTab:"&",title:"="},templateUrl:"app/event/extended-data-item-directive.tpl.html",controller:["$scope","notificationService",function($scope,notificationService){var vm=this;function copied(){notificationService.success("Copied!")}function demoteTab(){return $scope.demoteTab({tabName:vm.title})}function getData(data,exclusions){function toSpacedWords(value){return(value=(value=value.replace(/_/g," ").replace(/\s+/g," ").trim()).replace(/([a-z0-9])([A-Z0-9])/g,"$1 $2")).length>1?value.charAt(0).toUpperCase()+value.slice(1):value}return exclusions=exclusions&&exclusions.length?exclusions:[],"object"==typeof data&&data instanceof Object?Object.keys(data).filter((function(value){return value&&value.length&&exclusions.indexOf(value)<0})).map((function(value){return{key:value,name:toSpacedWords(value)}})).sort((function(a,b){return a.name-b.name})).reduce((function(a,b){return a[b.name]=data[b.key],a}),{}):data}function promoteTab(){return $scope.promoteTab({tabName:vm.title})}this.$onInit=function $onInit(){vm.copied=copied,vm.canPromote=!1!==$scope.canPromote,vm.demoteTab=demoteTab,vm.data=getData($scope.data,$scope.excludedKeys),vm.hasData=void 0!==vm.data&&!angular.equals({},vm.data),vm.data_json=vm.hasData?angular.toJson(vm.data):"",vm.isPromoted=!0===$scope.isPromoted,vm.promoteTab=promoteTab,vm.showRaw=!1,vm.title=$scope.title}}],controllerAs:"vm"}}])}(),function(){"use strict";angular.module("app.event").controller("Reference",["eventService","$state","$stateParams",function(eventService,$state,$stateParams){var vm;this.references={get:function(options){return eventService.getByReferenceId($stateParams.referenceId,options).then((function(response){var events=response.data.plain();return events&&1===events.length&&$state.go("app.event",{id:events[0].id}),response}))},options:{limit:20,mode:"summary"},source:"app.event.Reference"}}])}(),function(){"use strict";angular.module("app.organization",["angular-rickshaw","ngMessages","ui.bootstrap","ui.router","dialogs.main","dialogs.default-translations","app.config","exceptionless","exceptionless.autofocus","exceptionless.billing","exceptionless.dialog","exceptionless.filter","exceptionless.organization","exceptionless.pagination","exceptionless.project","exceptionless.projects","exceptionless.refresh","exceptionless.timeago","exceptionless.token","exceptionless.user","exceptionless.users","exceptionless.validators","exceptionless.web-hook"]).config(["$stateProvider",function($stateProvider){$stateProvider.state("app.organization",{abstract:!0,url:"/organization",template:'<ui-view autoscroll="true" />'}),$stateProvider.state("app.organization.list",{title:"My Organizations",url:"/list",controller:"organization.List",controllerAs:"vm",templateUrl:"app/organization/list/list.tpl.html"}),$stateProvider.state("app.organization.manage",{title:"Manage Organization",url:"/{id:[0-9a-fA-F]{24}}/manage?tab",controller:"organization.Manage",controllerAs:"vm",templateUrl:"app/organization/manage/manage.tpl.html"}),$stateProvider.state("app.organization.upgrade",{title:"Upgrade Organization",url:"/{id:[0-9a-fA-F]{24}}/upgrade",controller:"organization.Upgrade",template:null})}])}(),function(){"use strict";angular.module("app.organization").controller("AddOrganizationDialog",["$ExceptionlessClient","$uibModalInstance","$timeout",function($ExceptionlessClient,$uibModalInstance,$timeout){var vm=this;function cancel(){$ExceptionlessClient.submitFeatureUsage(vm._source+".cancel"),$uibModalInstance.dismiss("cancel")}function save(isRetrying){function retry(delay){var timeout=$timeout((function(){$timeout.cancel(timeout),save(!0)}),delay||100)}return!vm.addOrganizationForm||vm.addOrganizationForm.$invalid?(vm._canSave=!0,!isRetrying&&retry(1e3)):!vm.data.name||vm.addOrganizationForm.$pending?retry():void(vm._canSave&&(vm._canSave=!1,$ExceptionlessClient.createFeatureUsage(vm._source+".save").setProperty("name",vm.data.name).submit(),$uibModalInstance.close(vm.data.name)))}this.$onInit=function $onInit(){vm._source="app.organization.AddOrganizationDialog",vm._canSave=!0,vm.addOrganizationForm={},vm.cancel=cancel,vm.data={},vm.save=save,$ExceptionlessClient.submitFeatureUsage(vm._source)}}])}(),function(){"use strict";angular.module("app.organization").controller("organization.List",["$ExceptionlessClient","$rootScope","$scope","$window","$state","billingService","dialogs","dialogService","filterService","linkService","notificationService","organizationService","paginationService","STRIPE_PUBLISHABLE_KEY",function($ExceptionlessClient,$rootScope,$scope,$window,$state,billingService,dialogs,dialogService,filterService,linkService,notificationService,organizationService,paginationService,STRIPE_PUBLISHABLE_KEY){var vm=this;function add(){return dialogs.create("app/organization/list/add-organization-dialog.tpl.html","AddOrganizationDialog as vm").result.then(createOrganization).catch((function(e){}))}function changePlan(organizationId){if(STRIPE_PUBLISHABLE_KEY)return billingService.changePlan(organizationId).catch((function(e){}));notificationService.error("Billing is currently disabled.")}function createOrganization(name){function onSuccess(response){vm.organizations.push(response.data.plain()),vm.canChangePlan=!!STRIPE_PUBLISHABLE_KEY&&vm.organizations.length>0}function onFailure(response){if(426===response.status)return billingService.confirmUpgradePlan(response.data.message).then((function(){return createOrganization(name)})).catch((function(e){}));var message="An error occurred while creating the organization.";response.data&&response.data.message&&(message+=" Message: "+response.data.message),notificationService.error(message)}return organizationService.create(name).then(onSuccess,onFailure)}function get(options,useCache){function onSuccess(response){vm.organizations=response.data.plain(),vm.canChangePlan=!!STRIPE_PUBLISHABLE_KEY&&vm.organizations.length>0;var links=linkService.getLinksQueryParameters(response.headers("link"));return vm.previous=links.previous,vm.next=links.next,vm.pageSummary=paginationService.getCurrentPageSummary(response.data,vm.currentOptions.page,vm.currentOptions.limit),0===vm.organizations.length&&vm.currentOptions.page&&vm.currentOptions.page>1?get(null,useCache):vm.organizations}return vm.loading=0===vm.organizations.length,vm.currentOptions=options||vm._settings,organizationService.getAll(vm.currentOptions,useCache).then(onSuccess).finally((function(){vm.loading=!1}))}function leave(organization,user){return dialogService.confirmDanger("Are you sure you want to leave this organization?","LEAVE ORGANIZATION").then((function(){function onSuccess(){vm.organizations.splice(vm.organizations.indexOf(organization),1),vm.canChangePlan=!!STRIPE_PUBLISHABLE_KEY&&vm.organizations.length>0}function onFailure(response){var message="An error occurred while trying to leave the organization.";400===response.status&&(message+=" Message: "+response.data.message),notificationService.error(message)}return organizationService.removeUser(organization.id,user.email_address).then(onSuccess,onFailure)})).catch((function(e){}))}function open(id,event){var openInNewTab=event.ctrlKey||event.metaKey||2===event.which;$ExceptionlessClient.createFeatureUsage(vm._source+".open").setProperty("id",id).setProperty("_blank",openInNewTab).submit(),openInNewTab?$window.open($state.href("app.organization.manage",{id:id},{absolute:!0}),"_blank"):$state.go("app.organization.manage",{id:id}),event.preventDefault()}function nextPage(){return $ExceptionlessClient.createFeatureUsage(vm._source+".nextPage").setProperty("next",vm.next).submit(),get(vm.next)}function previousPage(){return $ExceptionlessClient.createFeatureUsage(vm._source+".previousPage").setProperty("previous",vm.previous).submit(),get(vm.previous)}function remove(organization){return $ExceptionlessClient.createFeatureUsage(vm._source+".remove").setProperty("organization",organization).submit(),dialogService.confirmDanger("Are you sure you want to delete this organization?","DELETE ORGANIZATION").then((function(){function onSuccess(){vm.organizations.splice(vm.organizations.indexOf(organization),1),vm.canChangePlan=!!STRIPE_PUBLISHABLE_KEY&&vm.organizations.length>0,notificationService.info("Successfully queued the organization for deletion."),$ExceptionlessClient.createFeatureUsage(vm._source+".remove.success").setProperty("organization",organization).submit()}function onFailure(response){var message="An error occurred while trying to delete the organization.";400===response.status&&(message+=" Message: "+response.data.message),$ExceptionlessClient.createFeatureUsage(vm._source+".remove.error").setProperty("organization",organization).submit(),notificationService.error(message)}return organizationService.remove(organization.id).then(onSuccess,onFailure)})).catch((function(e){}))}this.$onInit=function $onInit(){vm._source="exceptionless.organization.List",vm._settings={mode:"stats"},vm.add=add,vm.canChangePlan=!1,vm.changePlan=changePlan,vm.get=get,vm.hasFilter=filterService.hasFilter,vm.leave=leave,vm.loading=!0,vm.nextPage=nextPage,vm.open=open,vm.organizations=[],vm.previousPage=previousPage,vm.remove=remove,$ExceptionlessClient.submitFeatureUsage(vm._source),get()}}])}(),function(){"use strict";angular.module("app.organization").controller("AddUserDialog",["$ExceptionlessClient","$uibModalInstance",function($ExceptionlessClient,$uibModalInstance){var vm=this;function cancel(){$ExceptionlessClient.submitFeatureUsage(vm._source+".cancel"),$uibModalInstance.dismiss("cancel")}function save(isValid){isValid&&($ExceptionlessClient.createFeatureUsage(vm._source+".save").setProperty("email",vm.data.email).submit(),$uibModalInstance.close(vm.data.email))}this.$onInit=function $onInit(){vm._source="app.organization.AddUserDialog",vm.cancel=cancel,vm.save=save,$ExceptionlessClient.submitFeatureUsage(vm._source)}}])}(),function(){"use strict";angular.module("app.organization").directive("invoices",(function(){return{bindToController:!0,restrict:"E",replace:!0,scope:{settings:"="},templateUrl:"app/organization/manage/invoices-directive.tpl.html",controller:["$ExceptionlessClient","$window","$state","linkService","notificationService","paginationService","userService",function($ExceptionlessClient,$window,$state,linkService,notificationService,paginationService,userService){var vm=this;function get(options,useCache){function onSuccess(response){vm.invoices=response.data.plain();var links=linkService.getLinksQueryParameters(response.headers("link"));return vm.previous=links.previous,vm.next=links.next,vm.pageSummary=paginationService.getCurrentPageSummary(response.data,vm.currentOptions.page,vm.currentOptions.limit),0===vm.invoices.length&&vm.currentOptions.page&&vm.currentOptions.page>1?get(null,useCache):vm.invoices}return vm.currentOptions=options||vm.settings.options,vm.settings.get(vm.currentOptions,useCache).then(onSuccess).catch((function(e){}))}function hasAdminRole(user){return userService.hasAdminRole(user)}function open(id){$ExceptionlessClient.createFeatureUsage(vm.source+".open").setProperty("id",id).submit(),$window.open($state.href("payment",{id:id},{absolute:!0}),"_blank")}function nextPage(){return $ExceptionlessClient.createFeatureUsage(vm.source+".nextPage").setProperty("next",vm.next).submit(),get(vm.next)}function previousPage(){return $ExceptionlessClient.createFeatureUsage(vm.source+".previousPage").setProperty("previous",vm.previous).submit(),get(vm.previous)}this.$onInit=function $onInit(){vm.source="exceptionless.organization.invoices",vm.currentOptions={},vm.get=get,vm.hasAdminRole=hasAdminRole,vm.nextPage=nextPage,vm.open=open,vm.previousPage=previousPage,vm.invoices=[],$ExceptionlessClient.submitFeatureUsage(vm.source),get()}}],controllerAs:"vm"}}))}(),function(){"use strict";angular.module("app.organization").controller("organization.Manage",["$ExceptionlessClient","filterService","$filter","$state","$stateParams","$window","billingService","dialogService","organizationService","projectService","userService","notificationService","dialogs","STRIPE_PUBLISHABLE_KEY",function($ExceptionlessClient,filterService,$filter,$state,$stateParams,$window,billingService,dialogService,organizationService,projectService,userService,notificationService,dialogs,STRIPE_PUBLISHABLE_KEY){var vm=this;function activateTab(tabName){switch(tabName){case"projects":vm.activeTabIndex=1;break;case"users":vm.activeTabIndex=2;break;case"billing":vm.activeTabIndex=3;break;default:vm.activeTabIndex=0}}function addUser(){return dialogs.create("app/organization/manage/add-user-dialog.tpl.html","AddUserDialog as vm").result.then(createUser)}function changePlan(){return billingService.changePlan(vm.organization.id).catch((function(e){}))}function createUser(emailAddress){function onFailure(response){if(426===response.status)return billingService.confirmUpgradePlan(response.data.message,vm._organizationId).then((function(){return createUser(emailAddress)})).catch((function(e){}));var message="An error occurred while inviting the user.";response.data&&response.data.message&&(message+=" Message: "+response.data.message),notificationService.error(message)}return organizationService.addUser(vm._organizationId,emailAddress).catch(onFailure)}function get(data){if(!vm._ignoreRefresh)return data&&"Organization"===data.type&&data.deleted&&data.id===vm._organizationId?($state.go("app.dashboard"),void notificationService.error('The organization "'+vm._organizationId+'" was deleted.')):getOrganization()}function getOrganization(){function onSuccess(response){function getRemainingEventLimit(organization){if(!organization.max_events_per_month)return 0;var bonusEvents=moment.utc().isBefore(moment.utc(organization.bonus_expiration))?organization.bonus_events_per_month:0,usage=organization.usage&&organization.usage[vm.organization.usage.length-1];if(usage&&moment.utc(usage.date).isSame(moment.utc().startOf("month"))){var remaining=usage.limit-(usage.total-usage.blocked);return remaining>0?remaining:0}return organization.max_events_per_month+bonusEvents}return vm.organization=response.data.plain(),vm.organization.usage=vm.organization.usage||[{date:moment.utc().startOf("month").toISOString(),total:0,blocked:0,limit:vm.organization.max_events_per_month,too_big:0}],vm.hasMonthlyUsage=vm.organization.max_events_per_month>0,vm.remainingEventLimit=getRemainingEventLimit(vm.organization),vm.canChangePlan=!!STRIPE_PUBLISHABLE_KEY&&vm.organization,vm.chart.options.series[0].data=vm.organization.usage.map((function(item){return{x:moment.utc(item.date).unix(),y:item.total-item.blocked-item.too_big,data:item}})),vm.chart.options.series[1].data=vm.organization.usage.map((function(item){return{x:moment.utc(item.date).unix(),y:item.blocked,data:item}})),vm.chart.options.series[2].data=vm.organization.usage.map((function(item){return{x:moment.utc(item.date).unix(),y:item.too_big,data:item}})),vm.chart.options.series[3].data=vm.organization.usage.map((function(item){return{x:moment.utc(item.date).unix(),y:item.limit,data:item}})),vm.organization}function onFailure(){$state.go("app.dashboard"),notificationService.error('The organization "'+vm._organizationId+'" could not be found.')}return organizationService.getById(vm._organizationId,!1).then(onSuccess,onFailure)}function hasAdminRole(user){return userService.hasAdminRole(user)}function leaveOrganization(currentUser){return dialogService.confirmDanger("Are you sure you want to leave this organization?","LEAVE ORGANIZATION").then((function(){function onSuccess(){$state.go("app.organization.list")}function onFailure(response){var message="An error occurred while trying to leave the organization.";400===response.status&&(message+=" Message: "+response.data.message),notificationService.error(message),vm._ignoreRefresh=!1}return vm._ignoreRefresh=!0,organizationService.removeUser(vm._organizationId,currentUser.email_address).then(onSuccess,onFailure)})).catch((function(e){}))}function removeOrganization(){return dialogService.confirmDanger("Are you sure you want to delete this organization?","DELETE ORGANIZATION").then((function(){function onSuccess(){notificationService.info("Successfully queued the organization for deletion."),$state.go("app.organization.list")}function onFailure(response){var message="An error occurred while trying to delete the organization.";400===response.status&&(message+=" Message: "+response.data.message),notificationService.error(message),vm._ignoreRefresh=!1}return vm._ignoreRefresh=!0,organizationService.remove(vm._organizationId).then(onSuccess,onFailure)})).catch((function(e){}))}function save(isValid){if(isValid)return organizationService.update(vm._organizationId,vm.organization).catch(onFailure);function onFailure(){notificationService.error("An error occurred while saving the organization.")}}this.$onInit=function $onInit(){vm._source="organization.Manage",vm._ignoreRefresh=!1,vm._organizationId=$stateParams.id,vm.activeTabIndex=0,vm.addUser=addUser,vm.canChangePlan=!1,vm.changePlan=changePlan,vm.chart={options:{padding:{top:.085},renderer:"multi",series:[{name:"Allowed",color:"#a4d56f",renderer:"stack"},{name:"Blocked",color:"#e2e2e2",renderer:"stack"},{name:"Too Big",color:"#ccc",renderer:"stack"},{name:"Limit",color:"#a94442",renderer:"dotted_line"}]},features:{hover:{render:function(args){var date=moment.utc(args.domainX,"X"),formattedDate,content='<div class="date">'+(0===date.hours()&&0===date.minutes()?date.format("ddd, MMM D, YYYY"):date.format("ddd, MMM D, YYYY h:mma"))+"</div>";args.detail.sort((function(a,b){return a.order-b.order})).forEach((function(d){var swatch='<span class="detail-swatch" style="background-color: '+d.series.color.replace("0.5","1")+'"></span>';content+=swatch+$filter("number")(d.formattedYValue)+" "+d.series.name+"<br />"}),this),content+='<span class="detail-swatch"></span>'+$filter("number")(args.detail[0].value.data.total)+" Total<br />";var xLabel=document.createElement("div");xLabel.className="x_label",xLabel.innerHTML=content,this.element.appendChild(xLabel);var leftAlignError=this._calcLayoutError([xLabel]),rightAlignError;leftAlignError>0&&(xLabel.classList.remove("left"),xLabel.classList.add("right"),this._calcLayoutError([xLabel])>leftAlignError&&(xLabel.classList.remove("right"),xLabel.classList.add("left")));this.show()}},range:{onSelection:function(position){var start=moment.unix(position.coordMinX).utc().local(),end=moment.unix(position.coordMaxX).utc().local();return filterService.setTime(start.format("YYYY-MM-DDTHH:mm:ss")+"-"+end.format("YYYY-MM-DDTHH:mm:ss")),$ExceptionlessClient.createFeatureUsage(vm._source+".chart.range.onSelection").setProperty("start",start).setProperty("end",end).submit(),$state.go("app.organization-dashboard",{organizationId:vm.organization.id}),!1}},xAxis:{timeFixture:new Rickshaw.Fixtures.Time.Local,overrideTimeFixtureCustomFormatters:!0},yAxis:{ticks:5,tickFormat:"formatKMBT",ticksTreatment:"glow"}}},vm.get=get,vm.hasAdminRole=hasAdminRole,vm.hasMonthlyUsage=!0,vm.invoices={get:function(options,useCache){return organizationService.getInvoices(vm._organizationId,options,useCache)},options:{limit:12},organizationId:vm._organizationId},vm.leaveOrganization=leaveOrganization,vm.next_billing_date=moment().startOf("month").add(1,"months").toDate(),vm.organization={},vm.organizationForm={},vm.projects={get:function(options,useCache){return projectService.getByOrganizationId(vm._organizationId,options,useCache)},organization:vm._organizationId,options:{limit:10,mode:"stats"}},vm.remainingEventLimit=3e3,vm.removeOrganization=removeOrganization,vm.save=save,vm.users={get:function(options,useCache){return userService.getByOrganizationId(vm._organizationId,options,useCache)},options:{limit:10},organizationId:vm._organizationId},activateTab($stateParams.tab),get()}}])}(),function(){"use strict";angular.module("app.organization").controller("organization.Upgrade",["$ExceptionlessClient","$state","$stateParams","billingService","organizationService","notificationService","STRIPE_PUBLISHABLE_KEY",function($ExceptionlessClient,$state,$stateParams,billingService,organizationService,notificationService,STRIPE_PUBLISHABLE_KEY){var vm=this;function get(){function onFailure(){$state.go("app.dashboard"),notificationService.error('The organization "'+vm._organizationId+'" could not be found.')}return organizationService.getById(vm._organizationId,!1).catch(onFailure)}function changePlan(){function redirect(){return $state.go("app.organization.manage",{id:vm._organizationId})}return billingService.changePlan(vm._organizationId.id).then(redirect,redirect)}this.$onInit=function $onInit(){return vm._organizationId=$stateParams.id,$ExceptionlessClient.createFeatureUsage("organization.Upgrade").setProperty("OrganizationId",vm._organizationId).submit(),STRIPE_PUBLISHABLE_KEY?($ExceptionlessClient.submitFeatureUsage("organization.Upgrade"),get().then(changePlan)):($state.go("app.organization.manage",{id:vm._organizationId}),notificationService.error("Billing is currently disabled!"))}}])}(),function(){"use strict";angular.module("app.payment",["ui.router","exceptionless.organization","exceptionless.rate-limit"]).config(["$stateProvider",function($stateProvider){$stateProvider.state("payment",{title:"View Invoice",url:"/payment/:id",controller:"Payment",controllerAs:"vm",parent:null,templateUrl:"app/payment/payment.tpl.html"})}])}(),function(){"use strict";angular.module("app.payment").controller("Payment",["$state","$stateParams","notificationService","organizationService",function($state,$stateParams,notificationService,organizationService){var vm=this;function getInvoice(){function onSuccess(response){return vm.invoice=response.data.plain(),vm.invoice}function onFailure(){$state.go("app.dashboard"),notificationService.error('The invoice "'+vm._invoiceId+'" could not be found.')}return organizationService.getInvoice(vm._invoiceId).then(onSuccess,onFailure)}this.$onInit=function $onInit(){vm._invoiceId=$stateParams.id,vm.invoice={},getInvoice()}}])}(),function(){"use strict";angular.module("app.project",["angular-clipboard","ngMessages","ui.bootstrap","ui.router","dialogs.main","dialogs.default-translations","xeditable","exceptionless","exceptionless.autofocus","exceptionless.billing","exceptionless.dialog","exceptionless.organization-notifications","exceptionless.project","exceptionless.organization","exceptionless.notification","exceptionless.refresh","exceptionless.token","exceptionless.validators"]).config(["$stateProvider",function($stateProvider){$stateProvider.state("app.project",{abstract:!0,url:"/project",template:'<ui-view autoscroll="true" />'}),$stateProvider.state("app.project.add",{title:"Add Project",url:"/add?{organizationId:[0-9a-fA-F]{24}}",controller:"project.Add",controllerAs:"vm",templateUrl:"app/project/add.tpl.html"}),$stateProvider.state("app.project.configure",{title:"Configure Project",url:"/:id/configure?redirect",controller:"project.Configure",controllerAs:"vm",templateUrl:"app/project/configure.tpl.html"}),$stateProvider.state("app.project.list",{title:"My Projects",url:"/list",controller:"project.List",controllerAs:"vm",templateUrl:"app/project/list.tpl.html"}),$stateProvider.state("app.project.manage",{title:"Manage Project",url:"/{id:[0-9a-fA-F]{24}}/manage",controller:"project.Manage",controllerAs:"vm",templateUrl:"app/project/manage/manage.tpl.html"})}])}(),function(){"use strict";angular.module("app.project").controller("project.Add",["$state","$stateParams","$timeout","billingService","organizationService","projectService","notificationService",function($state,$stateParams,$timeout,billingService,organizationService,projectService,notificationService){var vm=this;function add(isRetrying){function resetCanAdd(){vm._canAdd=!0}function retry(delay){var timeout=$timeout((function(){$timeout.cancel(timeout),add(!0)}),delay||100)}return!vm.addForm||vm.addForm.$invalid?(resetCanAdd(),!isRetrying&&retry(1e3)):canCreateOrganization()&&!vm.organization_name||!vm.project_name||vm.addForm.$pending?retry():vm._canAdd?(vm._canAdd=!1,canCreateOrganization()?createOrganization(vm.organization_name).then(createProject).then(resetCanAdd,resetCanAdd):createProject(vm.currentOrganization).then(resetCanAdd,resetCanAdd)):void 0}function canCreateOrganization(){return vm.currentOrganization.id===vm._newOrganizationId||!hasOrganizations()}function createOrganization(name){function onSuccess(response){return vm.organizations.push(response.data),vm.currentOrganization=response.data,response.data}function onFailure(response){if(426===response.status)return billingService.confirmUpgradePlan(response.data.message).then((function(){return createOrganization(name)})).catch((function(e){}));var message="An error occurred while creating the organization.";response.data&&response.data.message&&(message+=" Message: "+response.data.message),notificationService.error(message)}return organizationService.create(name).then(onSuccess,onFailure)}function createProject(organization){if(organization)return projectService.create(organization.id,vm.project_name).then(onSuccess,onFailure);function onSuccess(response){$state.go("app.project.configure",{id:response.data.id,redirect:!0})}function onFailure(response){if(426===response.status)return billingService.confirmUpgradePlan(response.data.message,organization.id).then((function(){return createProject(organization)})).catch((function(e){}));var message="An error occurred while creating the project.";response.data&&response.data.message&&(message+=" Message: "+response.data.message),notificationService.error(message)}vm._canAdd=!0}function getOrganizations(){function onSuccess(response){vm.organizations=response.data,vm.organizations.push({id:vm._newOrganizationId,name:"<New Organization>"});var currentOrganizationId=vm.currentOrganization.id?vm.currentOrganization.id:$stateParams.organizationId;vm.currentOrganization=vm.organizations.filter((function(o){return o.id===currentOrganizationId}))[0],vm.currentOrganization||(vm.currentOrganization=vm.organizations.length>0?vm.organizations[0]:{})}organizationService.getAll().then(onSuccess)}function hasOrganizations(){return vm.organizations.filter((function(o){return o.id!==vm._newOrganizationId})).length>0}this.$onInit=function $onInit(){vm._canAdd=!0,vm._newOrganizationId="__newOrganization",vm.add=add,vm.addForm={},vm.canCreateOrganization=canCreateOrganization,vm.currentOrganization={},vm.getOrganizations=getOrganizations,vm.hasOrganizations=hasOrganizations,vm.organizations=[],getOrganizations()}}])}(),function(){"use strict";angular.module("app.project").controller("AddConfigurationDialog",["$ExceptionlessClient","$uibModalInstance","data",function($ExceptionlessClient,$uibModalInstance,data){var vm=this;function cancel(){$ExceptionlessClient.submitFeatureUsage(vm._source+".cancel"),$uibModalInstance.dismiss("cancel")}function save(isValid){isValid&&($ExceptionlessClient.createFeatureUsage(vm._source+".save").setProperty("configuration",vm.data).submit(),$uibModalInstance.close(vm.data))}this.$onInit=function $onInit(){vm._source="app.project.AddConfigurationDialog",vm.cancel=cancel,vm.configuration=data,vm.data={},vm.save=save,$ExceptionlessClient.submitFeatureUsage(vm._source)}}])}(),function(){"use strict";angular.module("app.project").controller("project.Manage",["$ExceptionlessClient","$filter","$state","$stateParams","billingService","filterService","organizationService","projectService","tokenService","webHookService","notificationService","STRIPE_PUBLISHABLE_KEY","dialogs","dialogService",function($ExceptionlessClient,$filter,$state,$stateParams,billingService,filterService,organizationService,projectService,tokenService,webHookService,notificationService,STRIPE_PUBLISHABLE_KEY,dialogs,dialogService){var vm=this;function addConfiguration(){return dialogs.create("app/project/manage/add-configuration-dialog.tpl.html","AddConfigurationDialog as vm",vm.config).result.then(saveClientConfiguration).catch((function(e){}))}function addSlack(){return vm.hasPremiumFeatures?addSlackIntegration():billingService.confirmUpgradePlan("Please upgrade your plan to enable slack integration.",vm.project.organization_id).then((function(){return addSlackIntegration()})).catch((function(e){}))}function addSlackIntegration(){function onFailure(){notificationService.error("An error occurred while adding Slack to your project.")}return projectService.addSlack(vm._projectId).catch(onFailure)}function addToken(){function onFailure(){notificationService.error("An error occurred while creating a new API key for your project.")}var options={organization_id:vm.project.organization_id,project_id:vm._projectId};return tokenService.create(options).catch(onFailure)}function addWebHook(){return dialogs.create("components/web-hook/add-web-hook-dialog.tpl.html","AddWebHookDialog as vm").result.then((function(data){return data.project_id=vm._projectId,createWebHook(data)})).catch((function(e){}))}function changePlan(){return billingService.changePlan(vm.organization.id).catch((function(e){}))}function createWebHook(data){function onFailure(response){if(426===response.status)return billingService.confirmUpgradePlan(response.data.message,vm.project.organization_id).then((function(){return createWebHook(data)})).catch((function(e){}));notificationService.error("An error occurred while saving the configuration setting.")}return webHookService.create(data).catch(onFailure)}function copied(){notificationService.success("Copied!")}function get(data){if(!vm._ignoreRefresh)return data&&"Project"===data.type&&data.deleted&&data.id===vm._projectId?($state.go("app.project.list"),void notificationService.error('The project "'+vm._projectId+'" was deleted.')):getProject().then(getOrganization).then(getConfiguration).then(getTokens).then(getSlackNotificationSettings).then(getWebHooks)}function getOrganization(){function onSuccess(response){function getRemainingEventLimit(organization){if(!organization.max_events_per_month)return 0;var bonusEvents=moment.utc().isBefore(moment.utc(organization.bonus_expiration))?organization.bonus_events_per_month:0,usage=organization.usage&&organization.usage[vm.organization.usage.length-1];if(usage&&moment.utc(usage.date).isSame(moment.utc().startOf("month"))){var remaining=usage.limit-(usage.total-usage.blocked);return remaining>0?remaining:0}return organization.max_events_per_month+bonusEvents}return vm.organization=response.data.plain(),vm.hasMonthlyUsage=vm.organization.max_events_per_month>0,vm.remainingEventLimit=getRemainingEventLimit(vm.organization),vm.canChangePlan=!!STRIPE_PUBLISHABLE_KEY&&vm.organization,vm.organization.usage=(vm.organization.usage||[{date:moment.utc().startOf("month").toISOString(),total:0,blocked:0,limit:vm.organization.max_events_per_month,too_big:0}]).filter((function(usage){return vm.project.usage.some((function(u){return moment(u.date).isSame(usage.date)}))})),vm.chart.options.series[0].data=vm.organization.usage.map((function(item){return{x:moment.utc(item.date).unix(),y:item.total-item.blocked-item.too_big,data:item}})),vm.chart.options.series[1].data=vm.project.usage.map((function(item){return{x:moment.utc(item.date).unix(),y:item.total-item.blocked-item.too_big,data:item}})),vm.chart.options.series[2].data=vm.project.usage.map((function(item){return{x:moment.utc(item.date).unix(),y:item.blocked,data:item}})),vm.chart.options.series[3].data=vm.project.usage.map((function(item){return{x:moment.utc(item.date).unix(),y:item.too_big,data:item}})),vm.chart.options.series[4].data=vm.organization.usage.map((function(item){return{x:moment.utc(item.date).unix(),y:item.limit,data:item}})),vm.organization}function onFailure(){$state.go("app.dashboard"),notificationService.error('The organization "'+vm.project.organization_id+'" could not be found.')}return organizationService.getById(vm.project.organization_id,!1).then(onSuccess,onFailure)}function getProject(){function onSuccess(response){return vm.common_methods=null,vm.user_namespaces=null,vm.project=response.data.plain(),vm.hasPremiumFeatures=vm.project.has_premium_features,vm.project&&vm.project.data&&(vm.common_methods=vm.project.data.CommonMethods,vm.user_namespaces=vm.project.data.UserNamespaces),vm.project.usage=vm.project.usage||[{date:moment.utc().startOf("month").toISOString(),total:0,blocked:0,limit:3e3,too_big:0}],vm.project}function onFailure(){$state.go("app.project.list"),notificationService.error('The project "'+vm._projectId+'" could not be found.')}return projectService.getById(vm._projectId).then(onSuccess,onFailure)}function getTokens(){function onSuccess(response){return vm.tokens=response.data.plain(),vm.tokens}function onFailure(){notificationService.error("An error occurred loading the api keys.")}return tokenService.getByProjectId(vm._projectId).then(onSuccess,onFailure)}function getConfiguration(){function onSuccess(response){return vm.config=[],vm.data_exclusions=null,vm.user_agents=null,angular.forEach(response.data.settings,(function(value,key){"@@DataExclusions"===key?vm.data_exclusions=value:"@@UserAgentBotPatterns"===key?vm.user_agents=value:vm.config.push({key:key,value:value})})),vm.config}function onFailure(){notificationService.error("An error occurred loading the notification settings.")}return projectService.getConfig(vm._projectId).then(onSuccess,onFailure)}function getSlackNotificationSettings(){function onSuccess(response){return vm.slackNotificationSettings=response.data.plain(),vm.slackNotificationSettings}function onFailure(){notificationService.error("An error occurred while loading the slack notification settings.")}return vm.slackNotificationSettings=null,projectService.getIntegrationNotificationSettings(vm._projectId,"slack").then(onSuccess,onFailure)}function getWebHooks(){function onSuccess(response){return vm.webHooks=response.data.plain(),vm.webHooks}function onFailure(){notificationService.error("An error occurred loading the notification settings.")}return webHookService.getByProjectId(vm._projectId).then(onSuccess,onFailure)}function removeConfig(config){return dialogService.confirmDanger("Are you sure you want to delete this configuration setting?","DELETE CONFIGURATION SETTING").then((function(){function onFailure(){notificationService.error("An error occurred while trying to delete the configuration setting.")}return projectService.removeConfig(vm._projectId,config.key).catch(onFailure)})).catch((function(e){}))}function removeProject(){return dialogService.confirmDanger("Are you sure you want to delete this project?","DELETE PROJECT").then((function(){function onSuccess(){notificationService.info("Successfully queued the project for deletion."),$state.go("app.project.list")}function onFailure(){notificationService.error("An error occurred while trying to delete the project."),vm._ignoreRefresh=!1}return vm._ignoreRefresh=!0,projectService.remove(vm._projectId).then(onSuccess,onFailure)})).catch((function(e){}))}function removeSlack(){return dialogService.confirmDanger("Are you sure you want to remove slack support?","REMOVE SLACK").then((function(){function onFailure(){notificationService.error("An error occurred while trying to remove slack.")}return projectService.removeSlack(vm._projectId).catch(onFailure)})).catch((function(e){}))}function removeToken(token){return dialogService.confirmDanger("Are you sure you want to delete this API key?","DELETE API KEY").then((function(){function onFailure(){notificationService.error("An error occurred while trying to delete the API Key.")}return tokenService.remove(token.id).catch(onFailure)})).catch((function(e){}))}function removeWebHook(hook){return dialogService.confirmDanger("Are you sure you want to delete this web hook?","DELETE WEB HOOK").then((function(){function onFailure(){notificationService.error("An error occurred while trying to delete the web hook.")}return webHookService.remove(hook.id).catch(onFailure)})).catch((function(e){}))}function resetData(){return dialogService.confirmDanger("Are you sure you want to reset the data for this project?","RESET PROJECT DATA").then((function(){function onFailure(){notificationService.error("An error occurred while resetting project data.")}return projectService.resetData(vm._projectId).catch(onFailure)})).catch((function(e){}))}function save(isValid){if(isValid)return projectService.update(vm._projectId,vm.project).catch(onFailure);function onFailure(){notificationService.error("An error occurred while saving the project.")}}function saveApiKeyNote(data){function onFailure(){notificationService.error("An error occurred while saving the API key note.")}return tokenService.update(data.id,{notes:data.notes}).catch(onFailure)}function saveClientConfiguration(data){function onFailure(){notificationService.error("An error occurred while saving the configuration setting.")}return projectService.setConfig(vm._projectId,data.key,data.value).catch(onFailure)}function saveCommonMethods(){function onFailure(){notificationService.error("An error occurred while saving the common methods.")}return vm.common_methods?projectService.setData(vm._projectId,"CommonMethods",vm.common_methods).catch(onFailure):projectService.removeData(vm._projectId,"CommonMethods").catch(onFailure)}function saveDataExclusion(){function onFailure(){notificationService.error("An error occurred while saving the the data exclusion.")}return vm.data_exclusions?projectService.setConfig(vm._projectId,"@@DataExclusions",vm.data_exclusions).catch(onFailure):projectService.removeConfig(vm._projectId,"@@DataExclusions").catch(onFailure)}function saveDeleteBotDataEnabled(){function onFailure(){notificationService.error("An error occurred while saving the project.")}return projectService.update(vm._projectId,{delete_bot_data_enabled:vm.project.delete_bot_data_enabled}).catch(onFailure)}function saveUserAgents(){function onFailure(){notificationService.error("An error occurred while saving the user agents.")}return vm.user_agents?projectService.setConfig(vm._projectId,"@@UserAgentBotPatterns",vm.user_agents).catch(onFailure):projectService.removeConfig(vm._projectId,"@@UserAgentBotPatterns").catch(onFailure)}function saveUserNamespaces(){function onFailure(){notificationService.error("An error occurred while saving the user namespaces.")}return vm.user_namespaces?projectService.setData(vm._projectId,"UserNamespaces",vm.user_namespaces).catch(onFailure):projectService.removeData(vm._projectId,"UserNamespaces").catch(onFailure)}function saveSlackNotificationSettings(){function onFailure(response){if(426===response.status)return billingService.confirmUpgradePlan(response.data.message,vm.project.organization_id).then((function(){return saveSlackNotificationSettings()})).catch((function(e){return getSlackNotificationSettings()}));notificationService.error("An error occurred while saving your slack notification settings.")}return projectService.setIntegrationNotificationSettings(vm._projectId,"slack",vm.slackNotificationSettings).catch(onFailure)}function showChangePlanDialog(){return billingService.changePlan(vm.project.organization_id).catch((function(e){}))}function validateApiKeyNote(original,data){return original!==data&&null}function validateClientConfiguration(original,data){return original!==data&&(data?null:"Please enter a valid value.")}this.$onInit=function $onInit(){vm._ignoreRefresh=!1,vm._projectId=$stateParams.id,vm.addSlack=addSlack,vm.addToken=addToken,vm.addConfiguration=addConfiguration,vm.addWebHook=addWebHook,vm.canChangePlan=!1,vm.changePlan=changePlan,vm.chart={options:{padding:{top:.085},renderer:"multi",series:[{name:"Allowed in Organization",color:"#f5f5f5",renderer:"area"},{name:"Allowed",color:"#a4d56f",renderer:"stack"},{name:"Blocked",color:"#e2e2e2",renderer:"stack"},{name:"Too Big",color:"#ccc",renderer:"stack"},{name:"Limit",color:"#a94442",renderer:"dotted_line"}]},features:{hover:{render:function(args){var date=moment.utc(args.domainX,"X"),formattedDate,content='<div class="date">'+(0===date.hours()&&0===date.minutes()?date.format("ddd, MMM D, YYYY"):date.format("ddd, MMM D, YYYY h:mma"))+"</div>";args.detail.sort((function(a,b){return a.order-b.order})).forEach((function(d){var swatch='<span class="detail-swatch" style="background-color: '+d.series.color.replace("0.5","1")+'"></span>';content+=swatch+$filter("number")(d.formattedYValue)+" "+d.series.name+"<br />"}),this),content+='<span class="detail-swatch"></span>'+$filter("number")(args.detail[1].value.data.total)+" Total<br />";var xLabel=document.createElement("div");xLabel.className="x_label",xLabel.innerHTML=content,this.element.appendChild(xLabel);var leftAlignError=this._calcLayoutError([xLabel]),rightAlignError;leftAlignError>0&&(xLabel.classList.remove("left"),xLabel.classList.add("right"),this._calcLayoutError([xLabel])>leftAlignError&&(xLabel.classList.remove("right"),xLabel.classList.add("left")));this.show()}},range:{onSelection:function(position){var start=moment.unix(position.coordMinX).utc().local(),end=moment.unix(position.coordMaxX).utc().local();return filterService.setTime(start.format("YYYY-MM-DDTHH:mm:ss")+"-"+end.format("YYYY-MM-DDTHH:mm:ss")),$ExceptionlessClient.createFeatureUsage(vm._source+".chart.range.onSelection").setProperty("start",start).setProperty("end",end).submit(),$state.go("app.project-dashboard",{projectId:vm.project.id}),!1}},xAxis:{timeFixture:new Rickshaw.Fixtures.Time.Local,overrideTimeFixtureCustomFormatters:!0},yAxis:{ticks:5,tickFormat:"formatKMBT",ticksTreatment:"glow"}}},vm.config=[],vm.copied=copied,vm.common_methods=null,vm.data_exclusions=null,vm.get=get,vm.getOrganization=getOrganization,vm.getTokens=getTokens,vm.getWebHooks=getWebHooks,vm.getSlackNotificationSettings=getSlackNotificationSettings,vm.hasMonthlyUsage=!0,vm.hasPremiumFeatures=!1,vm.next_billing_date=moment().startOf("month").add(1,"months").toDate(),vm.organization={},vm.project={},vm.projectForm={},vm.remainingEventLimit=3e3,vm.removeConfig=removeConfig,vm.removeProject=removeProject,vm.removeSlack=removeSlack,vm.removeToken=removeToken,vm.removeWebHook=removeWebHook,vm.resetData=resetData,vm.save=save,vm.saveApiKeyNote=saveApiKeyNote,vm.saveClientConfiguration=saveClientConfiguration,vm.saveCommonMethods=saveCommonMethods,vm.saveDataExclusion=saveDataExclusion,vm.saveDeleteBotDataEnabled=saveDeleteBotDataEnabled,vm.saveSlackNotificationSettings=saveSlackNotificationSettings,vm.saveUserAgents=saveUserAgents,vm.saveUserNamespaces=saveUserNamespaces,vm.showChangePlanDialog=showChangePlanDialog,vm.slackNotificationSettings=null,vm.tokens=[],vm.user_agents=null,vm.user_namespaces=null,vm.validateApiKeyNote=validateApiKeyNote,vm.validateClientConfiguration=validateClientConfiguration,vm.webHooks=[],get()}}])}(),function(){"use strict";angular.module("app.project").controller("project.Configure",["$rootScope","$state","$stateParams","notificationService","projectService","tokenService",function($rootScope,$state,$stateParams,notificationService,projectService,tokenService){var vm=this;function canRedirect(data){return vm._canRedirect&&!!data&&data.project_id===vm._projectId}function copied(){notificationService.success("Copied!")}function onCopyError(){function getCopyTooltip(){return/iPhone|iPad/i.test(navigator.userAgent)?"Copy not supported.":/Mac/i.test(navigator.userAgent)?"Press ⌘-C to copy.":"Press Ctrl-C to copy."}var element=$("input.api-key");element.tooltip({placement:"bottom",title:getCopyTooltip()}),element.select()}function getDefaultApiKey(){function onSuccess(response){return vm.apiKey=response.data.id,vm.apiKey}function onFailure(){notificationService.error("An error occurred while getting the API key for your project.")}return tokenService.getProjectDefault(vm._projectId).then(onSuccess,onFailure)}function getProject(){function onSuccess(response){return vm.project=response.data.plain(),vm.project}function onFailure(){$state.go("app.dashboard"),notificationService.error('The project "'+vm._projectId+'" could not be found.')}return projectService.getById(vm._projectId,!0).then(onSuccess,onFailure)}function getProjectTypes(){return[{key:"Exceptionless",name:"Console and Service applications",platform:".NET"},{key:"Exceptionless.AspNetCore",name:"ASP.NET Core",platform:".NET"},{key:"Exceptionless.Mvc",name:"ASP.NET MVC",config:"web.config",platform:".NET"},{key:"Exceptionless.WebApi",name:"ASP.NET Web API",config:"web.config",platform:".NET"},{key:"Exceptionless.Web",name:"ASP.NET Web Forms",config:"web.config",platform:".NET"},{key:"Exceptionless.Windows",name:"Windows Forms",config:"app.config",platform:".NET"},{key:"Exceptionless.Wpf",name:"Windows Presentation Foundation (WPF)",config:"app.config",platform:".NET"},{key:"Exceptionless.Nancy",name:"Nancy",config:"app.config",platform:".NET"},{key:"Exceptionless.JavaScript",name:"Browser applications",platform:"JavaScript"},{key:"Exceptionless.Node",name:"Node.js",platform:"JavaScript"}]}function isDotNet(){return".NET"===vm.currentProjectType.platform}function isJavaScript(){return"JavaScript"===vm.currentProjectType.platform}function isNode(){return"Exceptionless.Node"===vm.currentProjectType.key}function navigateToDashboard(){$state.go("app.project-dashboard",{projectId:vm._projectId})}this.$onInit=function $onInit(){vm._projectId=$stateParams.id,vm._canRedirect="true"===$stateParams.redirect,vm.apiKey=null,vm.canRedirect=canRedirect,vm.copied=copied,vm.currentProjectType={},vm.isDotNet=isDotNet,vm.isJavaScript=isJavaScript,vm.isNode=isNode,vm.navigateToDashboard=navigateToDashboard,vm.onCopyError=onCopyError,vm.project={},vm.projectTypes=[{key:"Exceptionless",name:"Console and Service applications",platform:".NET"},{key:"Exceptionless.AspNetCore",name:"ASP.NET Core",platform:".NET"},{key:"Exceptionless.Mvc",name:"ASP.NET MVC",config:"web.config",platform:".NET"},{key:"Exceptionless.WebApi",name:"ASP.NET Web API",config:"web.config",platform:".NET"},{key:"Exceptionless.Web",name:"ASP.NET Web Forms",config:"web.config",platform:".NET"},{key:"Exceptionless.Windows",name:"Windows Forms",config:"app.config",platform:".NET"},{key:"Exceptionless.Wpf",name:"Windows Presentation Foundation (WPF)",config:"app.config",platform:".NET"},{key:"Exceptionless.Nancy",name:"Nancy",config:"app.config",platform:".NET"},{key:"Exceptionless.JavaScript",name:"Browser applications",platform:"JavaScript"},{key:"Exceptionless.Node",name:"Node.js",platform:"JavaScript"}],getDefaultApiKey().then(getProject)}}])}(),function(){"use strict";angular.module("app.project").controller("project.List",["projectService",function(projectService){var vm;this.projects={get:projectService.getAll,options:{limit:10,mode:"stats"}}}])}(),function(){"use strict";angular.module("app.session",["angular-filters","angular-rickshaw","ui.router","exceptionless","exceptionless.duration","exceptionless.events","exceptionless.filter","exceptionless.link","exceptionless.notification","exceptionless.pagination","exceptionless.refresh","exceptionless.organization","exceptionless.organization-notifications","exceptionless.project","exceptionless.summary","exceptionless.timeago","exceptionless.users"]).config(["$stateProvider",function($stateProvider){var onEnterSetTypeFilter=["filterService",function(filterService){filterService.setOrganizationId(null,!0),filterService.setProjectId(null,!0),filterService.setEventType("session",!0)}],onExitRemoveTypeFilter=["filterService",function(filterService){filterService.setEventType(null,!0)}],title="Session Dashboard";$stateProvider.state("app.session",{abstract:!0,url:"/session",template:'<ui-view autoscroll="true" />'}),$stateProvider.state("app.session.dashboard",{title:title,url:"/dashboard",controller:"session.Dashboard",controllerAs:"vm",templateUrl:"app/session/dashboard.tpl.html",onEnter:onEnterSetTypeFilter,onExit:onExitRemoveTypeFilter}),$stateProvider.state("app.session-dashboard",{title:title,url:"/session/dashboard",controller:"session.Dashboard",controllerAs:"vm",templateUrl:"app/session/dashboard.tpl.html",onEnter:onEnterSetTypeFilter,onExit:onExitRemoveTypeFilter}),$stateProvider.state("app.session-project-dashboard",{title:title,url:"/project/{projectId:[0-9a-fA-F]{24}}/session/dashboard",controller:"session.Dashboard",controllerAs:"vm",templateUrl:"app/session/dashboard.tpl.html",onEnter:["$stateParams","filterService",function($stateParams,filterService){filterService.setProjectId($stateParams.projectId,!0),filterService.setEventType("session",!0)}],onExit:onExitRemoveTypeFilter,resolve:{project:["$stateParams","projectService",function($stateParams,projectService){return projectService.getById($stateParams.projectId,!0)}]}}),$stateProvider.state("app.session-organization-dashboard",{title:title,url:"/organization/{organizationId:[0-9a-fA-F]{24}}/session/dashboard",controller:"session.Dashboard",controllerAs:"vm",templateUrl:"app/session/dashboard.tpl.html",onEnter:["$stateParams","filterService",function($stateParams,filterService){filterService.setOrganizationId($stateParams.organizationId,!0),filterService.setEventType("session",!0)}],onExit:onExitRemoveTypeFilter,resolve:{project:["$stateParams","organizationService",function($stateParams,organizationService){return organizationService.getById($stateParams.organizationId,!0)}]}})}])}(),function(){"use strict";angular.module("app.session").controller("session.Dashboard",["$ExceptionlessClient","eventService","$filter","filterService",function($ExceptionlessClient,eventService,$filter,filterService){var vm=this;function get(){function optionsCallback(options){return options.filter+=" type:session",vm.includeLiveFilter&&(options.filter+=" _missing_:data.sessionend"),options}function onSuccess(response){function getAggregationValue(data,name,defaultValue){var aggs=data.aggregations;return aggs&&aggs[name]&&aggs[name].value||defaultValue}function getAggregationItems(data,name,defaultValue){var aggs=data.aggregations;return aggs&&aggs[name]&&aggs[name].items||defaultValue}var results=response.data.plain();vm.stats={total:$filter("number")(results.total,0),users:$filter("number")(getAggregationValue(results,"cardinality_user",0),0),avg_duration:getAggregationValue(results,"avg_value"),avg_per_hour:$filter("number")(eventService.calculateAveragePerHour(results.total,vm._organizations),1)};var dateAggregation=getAggregationItems(results,"date_date",[]);vm.chart.options.series[0].data=dateAggregation.map((function(item){return{x:moment(item.key).unix(),y:getAggregationValue(item,"cardinality_user",0),data:item}})),vm.chart.options.series[1].data=dateAggregation.map((function(item){return{x:moment(item.key).unix(),y:item.total||0,data:item}}))}var offset=filterService.getTimeOffset();return eventService.count("avg:value cardinality:user date:(date"+(offset?"^"+offset:"")+" cardinality:user)",optionsCallback,!1).then(onSuccess).catch((function(e){}))}function updateLiveFilter(isLive){vm.includeLiveFilter=isLive,filterService.fireFilterChanged(!1)}this.$onInit=function $onInit(){vm._source="app.session.Dashboard",vm.chart={options:{padding:{top:.085},renderer:"stack",series:[{name:"Users",color:"rgba(60, 116, 0, .9)",stroke:"rgba(0, 0, 0, 0.15)"},{name:"Sessions",color:"rgba(124, 194, 49, .7)",stroke:"rgba(0, 0, 0, 0.15)"}],stroke:!0,unstack:!0},features:{hover:{render:function(args){var date=moment.unix(args.domainX),formattedDate,content='<div class="date">'+(0===date.hours()&&0===date.minutes()?date.format("ddd, MMM D, YYYY"):date.format("ddd, MMM D, YYYY h:mma"))+"</div>";args.detail.sort((function(a,b){return a.order-b.order})).forEach((function(d){var swatch='<span class="detail-swatch" style="background-color: '+d.series.color.replace("0.5","1")+'"></span>';content+=swatch+$filter("number")(d.formattedYValue)+" "+d.series.name+" <br />"}),this);var xLabel=document.createElement("div");xLabel.className="x_label",xLabel.innerHTML=content,this.element.appendChild(xLabel);var leftAlignError=this._calcLayoutError([xLabel]),rightAlignError;leftAlignError>0&&(xLabel.classList.remove("left"),xLabel.classList.add("right"),this._calcLayoutError([xLabel])>leftAlignError&&(xLabel.classList.remove("right"),xLabel.classList.add("left")));this.show()}},range:{onSelection:function(position){var start=moment.unix(position.coordMinX).utc().local(),end=moment.unix(position.coordMaxX).utc().local();return filterService.setTime(start.format("YYYY-MM-DDTHH:mm:ss")+"-"+end.format("YYYY-MM-DDTHH:mm:ss")),$ExceptionlessClient.createFeatureUsage(vm._source+".chart.range.onSelection").setProperty("start",start).setProperty("end",end).submit(),!1}},xAxis:{timeFixture:new Rickshaw.Fixtures.Time.Local,overrideTimeFixtureCustomFormatters:!0},yAxis:{ticks:5,tickFormat:"formatKMBT",ticksTreatment:"glow"}}},vm.get=get,vm.includeLiveFilter=!1,vm.updateLiveFilter=updateLiveFilter,vm.recentSessions={get:function(options){function optionsCallback(options){return vm.includeLiveFilter&&(options.filter+=" _missing_:data.sessionend"),options}return eventService.getAllSessions(options,optionsCallback)},summary:{showType:!1},options:{limit:10,mode:"summary"},source:vm._source+".Recent",hideActions:!0},vm.stats={total:0,users:0,avg_duration:void 0,avg_per_hour:0},get()}}])}(),function(){"use strict";angular.module("app.session").directive("sessions",["linkService",function(linkService){return{bindToController:!0,restrict:"E",replace:!0,scope:{settings:"="},templateUrl:"app/session/sessions-directive.tpl.html",controller:["$ExceptionlessClient","$window","$state","$stateParams","linkService","filterService","notificationService","paginationService",function($ExceptionlessClient,$window,$state,$stateParams,linkService,filterService,notificationService,paginationService){var vm=this;function canRefresh(data){return data&&"PersistentEvent"===data.type?!!data.deleted&&(data.id&&vm.events?vm.events.filter((function(e){return e.id===data.id})).length>0:filterService.includedInProjectOrOrganizationFilter({organizationId:data.organization_id,projectId:data.project_id})):data&&"Stack"===data.type?filterService.includedInProjectOrOrganizationFilter({organizationId:data.organization_id,projectId:data.project_id}):data&&"Organization"===data.type||"Project"===data.type?filterService.includedInProjectOrOrganizationFilter({organizationId:data.id,projectId:data.id}):!data}function get(options){function onSuccess(response){vm.events=response.data.plain();var links=linkService.getLinksQueryParameters(response.headers("link"));return vm.previous=links.previous,vm.next=links.next,vm.pageSummary=paginationService.getCurrentPageSummary(response.data,vm.currentOptions.page,vm.currentOptions.limit),0===vm.events.length&&vm.currentOptions.page&&vm.currentOptions.page>1?get():vm.events}return vm.loading=0===vm.events.length,vm.currentOptions=options||vm.settings.options,vm.settings.get(vm.currentOptions).then(onSuccess).finally((function(){vm.loading=!1}))}function getDuration(ev){return ev.data.SessionEnd?ev.data.Value||0:moment().diff(ev.date,"seconds")}function open(id,event){var openInNewTab=event.ctrlKey||event.metaKey||2===event.which;$ExceptionlessClient.createFeatureUsage(vm.source+".open").setProperty("id",id).setProperty("_blank",openInNewTab).submit(),openInNewTab?$window.open($state.href("app.event",{id:id},{absolute:!0}),"_blank"):$state.go("app.event",{id:id}),event.preventDefault()}function nextPage(){return $ExceptionlessClient.createFeatureUsage(vm.source+".nextPage").setProperty("next",vm.next).submit(),get(vm.next)}function previousPage(){return $ExceptionlessClient.createFeatureUsage(vm.source+".previousPage").setProperty("previous",vm.previous).submit(),get(vm.previous)}this.$onInit=function $onInit(){vm.source=vm.settings.source+".sessions",vm.canRefresh=canRefresh,vm.events=[],vm.get=get,vm.getDuration=getDuration,vm.hasFilter=filterService.hasFilter,vm.loading=!0,vm.open=open,vm.nextPage=nextPage,vm.previousPage=previousPage,vm.showType=vm.settings.summary?vm.settings.summary.showType:!filterService.getEventType(),get()}}],controllerAs:"vm"}}])}(),function(){"use strict";angular.module("app.stack",["cfp.hotkeys","ngMessages","ui.bootstrap","ui.router","dialogs.main","dialogs.default-translations","exceptionless","exceptionless.autofocus","exceptionless.dialog","exceptionless.event","exceptionless.events","exceptionless.filter","exceptionless.organization","exceptionless.organization-notifications","exceptionless.promise-button","exceptionless.notification","exceptionless.rate-limit","exceptionless.refresh","exceptionless.stack","exceptionless.stack-dialog","exceptionless.stack-trace"]).config(["$stateProvider",function($stateProvider){$stateProvider.state("app.stack",{title:"Stack",url:"/stack/{id:[0-9a-fA-F]{24}}",controller:"Stack",controllerAs:"vm",templateUrl:"app/stack/stack.tpl.html"}),$stateProvider.state("app.stack-action",{title:"Stack",url:"/stack/{id:[0-9a-fA-F]{24}}/:action",controller:"Stack",controllerAs:"vm",templateUrl:"app/stack/stack.tpl.html"})}])}(),function(){"use strict";angular.module("app.stack").controller("Stack",["$scope","$ExceptionlessClient","$filter","hotkeys","$state","$stateParams","billingService","dialogs","dialogService","eventService","filterService","notificationService","organizationService","projectService","stackDialogService","stackService",function($scope,$ExceptionlessClient,$filter,hotkeys,$state,$stateParams,billingService,dialogs,dialogService,eventService,filterService,notificationService,organizationService,projectService,stackDialogService,stackService){var vm=this;function addHotkeys(){function logFeatureUsage(name){$ExceptionlessClient.createFeatureUsage(vm._source+".hotkeys"+name).addTags("hotkeys").submit()}hotkeys.del("shift+h"),hotkeys.del("shift+f"),hotkeys.del("shift+c"),hotkeys.del("shift+m"),hotkeys.del("shift+p"),hotkeys.del("shift+r"),hotkeys.del("shift+Fbackspace"),hotkeys.bindTo($scope).add({combo:"shift+h",description:vm.stack.is_hidden?"Mark Stack Unhidden":"Mark Stack Hidden",callback:function markHidden(){logFeatureUsage("Hidden"),vm.updateIsHidden()}}).add({combo:"shift+f",description:vm.stack.date_fixed&&!vm.stack.is_regressed?"Mark Stack Not fixed":"Mark Stack Fixed",callback:function markFixed(){logFeatureUsage("Fixed"),vm.updateIsFixed()}}).add({combo:"shift+c",description:vm.stack.occurrences_are_critical?"Future Stack Occurrences are Not Critical":"Future Stack Occurrences are Critical",callback:function markCritical(){logFeatureUsage("Critical"),vm.updateIsCritical()}}).add({combo:"shift+m",description:vm.stack.disable_notifications?"Enable Stack Notifications":"Disable Stack Notifications",callback:function updateNotifications(){logFeatureUsage("Notifications"),vm.updateNotifications()}}).add({combo:"shift+p",description:"Promote Stack To External",callback:function promote(){logFeatureUsage("Promote"),vm.promoteToExternal()}}).add({combo:"shift+r",description:"Add Stack Reference Link",callback:function addReferenceLink(){logFeatureUsage("Reference"),vm.addReferenceLink()}}).add({combo:"shift+backspace",description:"Delete Stack",callback:function deleteStack(){logFeatureUsage("Delete"),vm.remove()}})}function addReferenceLink(){return $ExceptionlessClient.submitFeatureUsage(vm._source+".addReferenceLink"),dialogs.create("app/stack/add-reference-dialog.tpl.html","AddReferenceDialog as vm").result.then((function(url){function onSuccess(){$ExceptionlessClient.createFeatureUsage(vm._source+".addReferenceLink.success").setProperty("url",url).submit(),vm.stack.references.push(url)}function onFailure(){$ExceptionlessClient.createFeatureUsage(vm._source+".addReferenceLink.error").setProperty("url",url).submit(),notificationService.error("An error occurred while adding the reference link.")}if(vm.stack.references.indexOf(url)<0)return stackService.addLink(vm._stackId,url).then(onSuccess,onFailure)})).catch((function(e){}))}function buildUserStat(users,totalUsers){return 0===totalUsers?0:$filter("percentage")(users/totalUsers*100,100)}function buildUserStatTitle(users,totalUsers){return $filter("number")(users,0)+" of "+$filter("number")(totalUsers,0)+" users"}function executeAction(){var action=$stateParams.action;return"mark-fixed"!==action||vm.stack.date_fixed&&!vm.stack.is_regressed?"stop-notifications"!==action||vm.stack.disable_notifications?void 0:updateNotifications(!0):updateIsFixed(!0)}function canRefresh(data){return!(!data||"Stack"!==data.type||data.id!==vm._stackId)||!(!data||"PersistentEvent"!==data.type)&&((!data.organization_id||data.organization_id===vm.stack.organization_id)&&((!data.project_id||data.project_id===vm.stack.project_id)&&(!data.stack_id||data.stack_id===vm._stackId)))}function get(data){return data&&"Stack"===data.type&&data.deleted?($state.go("app.dashboard"),void notificationService.error('The stack "'+vm._stackId+'" was deleted.')):data&&"PersistentEvent"===data.type?updateStats():getStack().then(updateStats).then(getProject)}function getOrganizations(){function onSuccess(response){return vm._organizations=response.data.plain(),vm._organizations}return organizationService.getAll().then(onSuccess)}function getProject(){function onSuccess(response){return vm.project=response.data.plain(),vm.project}return projectService.getById(vm.stack.project_id,!0).then(onSuccess)}function getStack(){function onSuccess(response){vm.stack=response.data.plain(),vm.stack.references=vm.stack.references||[],addHotkeys()}function onFailure(response){$state.go("app.dashboard"),404===response.status?notificationService.error('The stack "'+vm._stackId+'" could not be found.'):notificationService.error('An error occurred while loading the stack "'+vm._stackId+'".')}return stackService.getById(vm._stackId).then(onSuccess,onFailure)}function getProjectUserStats(){function optionsCallback(options){return options.filter="project:"+vm.stack.project_id,options}function onSuccess(response){function getAggregationValue(data,name,defaultValue){var aggs=data.aggregations;return aggs&&aggs[name]&&aggs[name].value||defaultValue}return vm._total_users=getAggregationValue(response.data,"cardinality_user",0),vm.stats.users=buildUserStat(vm._users,vm._total_users),vm.stats.usersTitle=buildUserStatTitle(vm._users,vm._total_users),response}return eventService.count("cardinality:user",optionsCallback).then(onSuccess)}function updateStats(){return getOrganizations().then(getStats)}function getStats(){function buildFields(options){return" cardinality:user "+options.filter((function(option){return option.selected})).reduce((function(fields,option){return fields.push(option.field),fields}),[]).join(" ")}function optionsCallback(options){return options.filter=["stack:"+vm._stackId,options.filter].filter((function(f){return f&&f.length>0})).join(" "),options}function onSuccess(response){function getAggregationValue(data,name,defaultValue){var aggs=data.aggregations;return aggs&&aggs[name]&&aggs[name].value||defaultValue}function getAggregationItems(data,name,defaultValue){var aggs=data.aggregations;return aggs&&aggs[name]&&aggs[name].items||defaultValue}var results=response.data.plain();vm._users=getAggregationValue(results,"cardinality_user",0),vm.stats={count:$filter("number")(getAggregationValue(results,"sum_count",0),0),users:buildUserStat(vm._users,vm._total_users),usersTitle:buildUserStatTitle(vm._users,vm._total_users),first_occurrence:getAggregationValue(results,"min_date"),last_occurrence:getAggregationValue(results,"max_date")};var dateAggregation=getAggregationItems(results,"date_date",[]),colors=["rgba(124, 194, 49, .7)","rgba(60, 116, 0, .9)","rgba(89, 89, 89, .3)"];return vm.chart.options.series=vm.chartOptions.filter((function(option){return option.selected})).reduce((function(series,option,index){return series.push({name:option.name,stroke:"rgba(0, 0, 0, 0.15)",data:dateAggregation.map((function(item){function getYValue(item,index){var field=option.field.replace(":","_"),proximity=field.indexOf("~");return-1!==proximity&&(field=field.substring(0,proximity)),getAggregationValue(item,field,0)}return{x:moment(item.key).unix(),y:getYValue(item,index),data:item}}))}),series}),[]).sort((function(a,b){function calculateSum(previous,current){return previous+current.y}return b.data.reduce(calculateSum,0)-a.data.reduce(calculateSum,0)})).map((function(seri,index){return seri.color=colors[index],seri})),response}var offset=filterService.getTimeOffset();return eventService.count("date:(date"+(offset?"^"+offset:"")+buildFields(vm.chartOptions)+") min:date max:date cardinality:user sum:count~1",optionsCallback,!1).then(onSuccess).then(getProjectUserStats)}function hasSelectedChartOption(){return vm.chartOptions.filter((function(o){return o.render&&o.selected})).length>0}function isValidDate(date){var d=moment(date);return!!date&&d.isValid()&&d.year()>1}function promoteToExternal(){if($ExceptionlessClient.createFeatureUsage(vm._source+".promoteToExternal").setProperty("id",vm._stackId).submit(),vm.project&&!vm.project.has_premium_features){var message="Promote to External is a premium feature used to promote an error stack to an external system. Please upgrade your plan to enable this feature.";return billingService.confirmUpgradePlan(message,vm.stack.organization_id).then((function(){return promoteToExternal()})).catch((function(e){}))}function onSuccess(){$ExceptionlessClient.createFeatureUsage(vm._source+".promoteToExternal.success").setProperty("id",vm._stackId).submit(),notificationService.success("Successfully promoted stack!")}function onFailure(response){return $ExceptionlessClient.createFeatureUsage(vm._source+".promoteToExternal.error").setProperty("id",vm._stackId).setProperty("response",response).submit(),426===response.status?billingService.confirmUpgradePlan(response.data.message,vm.stack.organization_id).then((function(){return promoteToExternal()})).catch((function(e){})):501===response.status?dialogService.confirm(response.data.message,"Manage Integrations").then((function(){$state.go("app.project.manage",{id:vm.stack.project_id})})).catch((function(e){})):void notificationService.error("An error occurred while promoting this stack.")}return stackService.promote(vm._stackId).then(onSuccess,onFailure)}function removeReferenceLink(reference){return $ExceptionlessClient.createFeatureUsage(vm._source+".removeReferenceLink").setProperty("id",vm._stackId).submit(),dialogService.confirmDanger("Are you sure you want to delete this reference link?","DELETE REFERENCE LINK").then((function(){function onSuccess(){$ExceptionlessClient.createFeatureUsage(vm._source+".removeReferenceLink.success").setProperty("id",vm._stackId).submit()}function onFailure(response){$ExceptionlessClient.createFeatureUsage(vm._source+".removeReferenceLink.error").setProperty("id",vm._stackId).setProperty("response",response).submit(),notificationService.info("An error occurred while deleting the external reference link.")}return stackService.removeLink(vm._stackId,reference).then(onSuccess,onFailure)})).catch((function(e){}))}function remove(){$ExceptionlessClient.createFeatureUsage(vm._source+".remove").setProperty("id",vm._stackId).submit();var message="Are you sure you want to delete this stack (includes all stack events)?";return dialogService.confirmDanger(message,"DELETE STACK").then((function(){function onSuccess(){notificationService.info("Successfully queued the stack for deletion."),$ExceptionlessClient.createFeatureUsage(vm._source+".remove.success").setProperty("id",vm._stackId).submit(),$state.go("app.project-dashboard",{projectId:vm.stack.project_id})}function onFailure(response){$ExceptionlessClient.createFeatureUsage(vm._source+".remove.error").setProperty("id",vm._stackId).setProperty("response",response).submit(),notificationService.error("An error occurred while deleting this stack.")}return stackService.remove(vm._stackId).then(onSuccess,onFailure)})).catch((function(e){}))}function updateIsCritical(){function onSuccess(){$ExceptionlessClient.createFeatureUsage(vm._source+".updateIsCritical.success").setProperty("id",vm._stackId).submit()}function onFailure(response){$ExceptionlessClient.createFeatureUsage(vm._source+".updateIsCritical.error").setProperty("id",vm._stackId).setProperty("response",response).submit(),notificationService.error((vm.stack.occurrences_are_critical,"not critical."))}return $ExceptionlessClient.createFeatureUsage(vm._source+".updateIsCritical").setProperty("id",vm._stackId).submit(),vm.stack.occurrences_are_critical?stackService.markNotCritical(vm._stackId).then(onSuccess,onFailure):stackService.markCritical(vm._stackId).catch(onSuccess,onFailure)}function updateIsFixed(showSuccessNotification){function onSuccess(){if($ExceptionlessClient.createFeatureUsage(vm._source+".updateIsFixed.success").setProperty("id",vm._stackId).submit(),showSuccessNotification){var action=vm.stack.date_fixed&&!vm.stack.is_regressed?" not":"";notificationService.info("Successfully queued the stack to be marked as"+action+" fixed.")}}function onFailure(response){$ExceptionlessClient.createFeatureUsage(vm._source+".updateIsFixed.error").setProperty("id",vm._stackId).setProperty("response",response).submit();var action=vm.stack.date_fixed&&!vm.stack.is_regressed?" not":"";notificationService.error("An error occurred while marking this stack as"+action+" fixed.")}return $ExceptionlessClient.createFeatureUsage(vm._source+".updateIsFixed").setProperty("id",vm._stackId).submit(),vm.stack.date_fixed&&!vm.stack.is_regressed?stackService.markNotFixed(vm._stackId).then(onSuccess,onFailure):stackDialogService.markFixed().then((function(version){return stackService.markFixed(vm._stackId,version).then(onSuccess,onFailure).catch((function(e){}))})).catch((function(e){}))}function updateIsHidden(){function onSuccess(){$ExceptionlessClient.createFeatureUsage(vm._source+".updateIsHidden.success").setProperty("id",vm._stackId).submit(),notificationService.info("Successfully queued the stack to be marked as "+(vm.stack.is_hidden?"shown.":"hidden."))}function onFailure(response){$ExceptionlessClient.createFeatureUsage(vm._source+".updateIsHidden.error").setProperty("id",vm._stackId).setProperty("response",response).submit(),notificationService.error("An error occurred while marking this stack as "+(vm.stack.is_hidden?"shown.":"hidden."))}return $ExceptionlessClient.createFeatureUsage(vm._source+".updateIsHidden").setProperty("id",vm._stackId).submit(),vm.stack.is_hidden?stackService.markNotHidden(vm._stackId).then(onSuccess,onFailure):stackService.markHidden(vm._stackId).then(onSuccess,onFailure)}function updateNotifications(showSuccessNotification){function onSuccess(){if($ExceptionlessClient.createFeatureUsage(vm._source+".updateNotifications.success").setProperty("id",vm._stackId).submit(),showSuccessNotification){var action=vm.stack.disable_notifications?"enabled":"disabled";notificationService.info("Successfully "+action+" stack notifications.")}}function onFailure(response){$ExceptionlessClient.createFeatureUsage(vm._source+".updateNotifications.error").setProperty("id",vm._stackId).setProperty("response",response).submit();var action=vm.stack.disable_notifications?"enabling":"disabling";notificationService.error("An error occurred while "+action+" stack notifications.")}return $ExceptionlessClient.createFeatureUsage(vm._source+".updateNotifications").setProperty("id",vm._stackId).submit(),vm.stack.disable_notifications?stackService.enableNotifications(vm._stackId).then(onSuccess,onFailure):stackService.disableNotifications(vm._stackId).then(onSuccess,onFailure)}this.$onInit=function $onInit(){vm._organizations=[],vm._source="app.stack.Stack",vm._stackId=$stateParams.id,vm.addReferenceLink=addReferenceLink,vm.chart={options:{padding:{top:.085},renderer:"stack",stroke:!0,unstack:!0},features:{hover:{render:function(args){var date=moment.unix(args.domainX),formattedDate,content='<div class="date">'+(0===date.hours()&&0===date.minutes()?date.format("ddd, MMM D, YYYY"):date.format("ddd, MMM D, YYYY h:mma"))+"</div>";args.detail.sort((function(a,b){return a.order-b.order})).forEach((function(d){var swatch='<span class="detail-swatch" style="background-color: '+d.series.color.replace("0.5","1")+'"></span>';content+=swatch+$filter("number")(d.formattedYValue)+" "+d.series.name+"<br />"}),this);var xLabel=document.createElement("div");xLabel.className="x_label",xLabel.innerHTML=content,this.element.appendChild(xLabel);var leftAlignError=this._calcLayoutError([xLabel]),rightAlignError;leftAlignError>0&&(xLabel.classList.remove("left"),xLabel.classList.add("right"),this._calcLayoutError([xLabel])>leftAlignError&&(xLabel.classList.remove("right"),xLabel.classList.add("left")));this.show()}},range:{onSelection:function(position){var start=moment.unix(position.coordMinX).utc().local(),end=moment.unix(position.coordMaxX).utc().local();return filterService.setTime(start.format("YYYY-MM-DDTHH:mm:ss")+"-"+end.format("YYYY-MM-DDTHH:mm:ss")),$ExceptionlessClient.createFeatureUsage(vm._source+".chart.range.onSelection").setProperty("id",vm._stackId).setProperty("start",start).setProperty("end",end).submit(),!1}},xAxis:{timeFixture:new Rickshaw.Fixtures.Time.Local,overrideTimeFixtureCustomFormatters:!0},yAxis:{ticks:5,tickFormat:"formatKMBT",ticksTreatment:"glow"}}},vm.chartOptions=[{name:"Occurrences",field:"sum:count~1",title:"",selected:!0,render:!1},{name:"Average Value",field:"avg:value",title:"The average of all event values",render:!0},{name:"Value Sum",field:"sum:value",title:"The sum of all event values",render:!0}],vm.canRefresh=canRefresh,vm.get=get,vm.updateStats=updateStats,vm.hasSelectedChartOption=hasSelectedChartOption,vm.isValidDate=isValidDate,vm.promoteToExternal=promoteToExternal,vm.project={},vm.remove=remove,vm.removeReferenceLink=removeReferenceLink,vm.recentOccurrences={get:function(options){return eventService.getByStackId(vm._stackId,options)},summary:{showType:!1},options:{limit:10,mode:"summary"},source:vm._source+".Recent"},vm.stack={},vm.stats={count:0,users:buildUserStat(0,0),usersTitle:buildUserStatTitle(0,0),first_occurrence:void 0,last_occurrence:void 0},vm._users=0,vm._total_users=0,vm.updateIsCritical=updateIsCritical,vm.updateIsFixed=updateIsFixed,vm.updateIsHidden=updateIsHidden,vm.updateNotifications=updateNotifications,get().then(executeAction)}}])}(),function(){"use strict";angular.module("app.stack").controller("AddReferenceDialog",["$ExceptionlessClient","$uibModalInstance",function($ExceptionlessClient,$uibModalInstance){var vm=this;function cancel(){$ExceptionlessClient.submitFeatureUsage(vm._source+".cancel"),$uibModalInstance.dismiss("cancel")}function save(isValid){isValid&&($ExceptionlessClient.createFeatureUsage(vm._source+".save").setProperty("url",vm.data.url).submit(),$uibModalInstance.close(vm.data.url))}this.$onInit=function $onInit(){vm._source="app.stack.AddReferenceDialog",vm.cancel=cancel,vm.save=save,$ExceptionlessClient.submitFeatureUsage(vm._source)}}])}(),function(){"use strict";angular.module("app.status",["ui.router","exceptionless.auth","exceptionless.state","exceptionless.status"]).config(["$stateProvider",function($stateProvider){$stateProvider.state("status",{title:"Status",url:"/status?redirect",controller:"Status",controllerAs:"vm",templateUrl:"app/status/status.tpl.html"})}])}(),function(){"use strict";angular.module("app.status").controller("Status",["$interval","$scope","$state","$stateParams","authService","stateService","statusService","Restangular",function($interval,$scope,$state,$stateParams,authService,stateService,statusService,Restangular){var vm=this;function getMessage(){var underMaintenance="We're sorry but the website is currently undergoing maintenance.",contactSupport="Please contact support for more information.";return vm._redirect?underMaintenance+" You’ll be automatically redirected when the the maintenance is completed. "+contactSupport:vm._message?vm._message:underMaintenance+" "+contactSupport}function updateStatus(){function updateMessage(response){response&&response.data&&response.data.message?(vm._message=response.data.message,200!==response.status&&(vm._message+=" Please contact support for more information.")):vm._message=""}function onSuccess(response){return vm._redirect&&moment().diff(vm._lastChecked,"seconds")>30?authService.isAuthenticated()?stateService.restore():$state.go("auth.login"):updateMessage(response)}return statusService.get().then(onSuccess,updateMessage)}this.$onInit=function $onInit(){vm._lastChecked=moment(),vm._message=null,vm._redirect=!!$stateParams.redirect;var interval=$interval(updateStatus,3e4);$scope.$on("$destroy",(function(){$interval.cancel(interval)})),vm.getMessage=getMessage,updateStatus()}}])}(),angular.module("app").run(["$templateCache",function($templateCache){"use strict";$templateCache.put("app/account/manage.tpl.html",'<div class="hbox hbox-auto-xs hbox-auto-sm"> <div class="col" refresh-on="UserChanged ProjectChanged" refresh-action="vm.get(data)" refresh-debounce="1000"> <div class="wrapper-md"> <div class="panel panel-default"> <div class="panel-heading"><i class="fa fa-user"></i> {{::\'My Account\' | translate}}</div> <div class="panel-body m-b-n"> <uib-tabset class="tab-container" active="vm.activeTabIndex"> <uib-tab heading="{{::\'General\' | translate}}"> <form name="fullNameForm" role="form" class="form-validation" autocomplete="on"> <div class="form-group"> <img gravatar-src="vm.user.email_address" gravatar-size="100" alt="{{vm.user.full_name}}" class="img-thumbnail"> <div> <small ng-bind-html="\'NOTICE_GRAVATAR\' | translate"> </small> </div> </div> <div class="form-group"> <label for="name">{{::\'Full Name\' | translate}}</label> <input id="name" name="name" type="text" class="form-control" x-autocompletetype="full-name" autocapitalize="words" autocorrect="off" spellcheck="false" placeholder="{{::\'Your first and last name\' | translate}}" ng-model="vm.user.full_name" ng-model-options="{ debounce: 500 }" ng-change="vm.saveUser(fullNameForm.$valid)" ng-required="true"> <div class="error" ng-messages="fullNameForm.name.$error" ng-if="fullNameForm.$submitted || fullNameForm.name.$touched"> <small ng-message="required">{{::\'Full Name is required.\' | translate}}</small> </div> </div> </form> <form name="vm.emailAddressForm" role="form" class="form-validation" autocomplete="on"> <div class="form-group"> <label for="email">{{::\'Email Address\' | translate}}</label> <div ng-class="{\'input-group\': !!vm.emailAddressForm.$pending }"> <input id="email" name="email" type="email" class="form-control" x-autocompletetype="email" autocorrect="off" spellcheck="false" placeholder="{{::\'Email Address\' | translate}}" ng-model="vm.user.email_address" ng-model-options="{ debounce: 1000 }" ng-change="vm.saveEmailAddress()" email-address-available-validator required> <span class="input-group-addon" ng-if="vm.emailAddressForm.$pending"> <i class="fa fa-fw fa-spinner fa-spin"></i> </span> </div> <div class="error" ng-messages="vm.emailAddressForm.email.$error" ng-if="vm.emailAddressForm.$submitted || vm.emailAddressForm.email.$touched"> <small ng-message="required">{{::\'Email Address is required.\' | translate}}</small> <small ng-message="email">{{::\'Email Address is required.\' | translate}}</small> <small ng-message="unique">{{::\'A user already exists with this email address.\' | translate}}</small> </div> <p ng-if="!vm.user.is_email_address_verified" class="help-block"> {{::\'Email not verified.\' | translate}} <a ng-click="vm.resendVerificationEmail()">{{::\'Resend\' | translate}}</a> {{::\'verification email.\' | translate}} </p> </div> </form> </uib-tab> <uib-tab heading="{{::\'Notifications\' | translate}}"> <form role="form" class="form-validation"> <div class="alert in fade alert-danger" ng-if="!vm.user.is_email_address_verified || !vm.user.email_notifications_enabled"> {{::\'Email notifications are currently disabled.\' | translate}} <span ng-if="!vm.user.is_email_address_verified">{{::\'To enable email notifications you must first verify your email address.\' | translate}} <a ng-click="vm.resendVerificationEmail()">{{::\'Resend\' | translate}}</a> {{::\'verification email.\' | translate}}</span> </div> <div class="checkbox"> <label class="checks"> <input type="checkbox" ng-model="vm.user.email_notifications_enabled" ng-model-options="{ debounce: 500 }" ng-change="vm.saveEnableEmailNotification()"> <i></i> {{::\'Enable email notifications\' | translate}} </label> </div> <div ng-if="vm.projects.length > 0"> <hr> <p>{{::\'Choose how often you want to receive notifications for event occurrences in this project.\' | translate}}</p> <select class="form-control" ng-model="vm.currentProject" ng-change="vm.getEmailNotificationSettings()" ng-disabled="!(vm.user.email_notifications_enabled && vm.emailNotificationSettings)" ng-options="project.name group by project.organization_name for project in vm.projects | orderBy: \'name\' track by project.id"></select> <div class="checkbox"> <label class="checks"> <input type="checkbox" ng-model="vm.emailNotificationSettings.send_daily_summary" ng-model-options="{ debounce: 500 }" ng-change="vm.saveEmailNotificationSettings()" ng-disabled="!(vm.user.email_notifications_enabled && vm.emailNotificationSettings)"> <i></i> {{::\'Send daily project summary\' | translate}} </label> </div> <hr ng-if="!vm.hasPremiumFeatures"> <div class="alert in fade alert-success" ng-if="!vm.hasPremiumFeatures"> <a ng-click="vm.showChangePlanDialog()">{{::\'Upgrade now\' | translate}}</a> {{::\'to enable occurrence level notifications!\' | translate}} </div> <div class="checkbox"> <label class="checks"> <input type="checkbox" ng-model="vm.emailNotificationSettings.report_new_errors" ng-model-options="{ debounce: 500 }" ng-change="vm.saveEmailNotificationSettings()" ng-disabled="!vm.hasPremiumEmailNotifications()"> <i></i> {{::\'Notify me on new errors\' | translate}} </label> </div> <div class="checkbox"> <label class="checks"> <input type="checkbox" ng-model="vm.emailNotificationSettings.report_critical_errors" ng-model-options="{ debounce: 500 }" ng-change="vm.saveEmailNotificationSettings()" ng-disabled="!vm.hasPremiumEmailNotifications()"> <i></i> {{::\'Notify me on critical errors\' | translate}} </label> </div> <div class="checkbox"> <label class="checks"> <input type="checkbox" ng-model="vm.emailNotificationSettings.report_event_regressions" ng-model-options="{ debounce: 500 }" ng-change="vm.saveEmailNotificationSettings()" ng-disabled="!vm.hasPremiumEmailNotifications()"> <i></i> {{::\'Notify me on error regressions\' | translate}} </label> </div> <div class="checkbox"> <label class="checks"> <input type="checkbox" ng-model="vm.emailNotificationSettings.report_new_events" ng-model-options="{ debounce: 500 }" ng-change="vm.saveEmailNotificationSettings()" ng-disabled="!vm.hasPremiumEmailNotifications()"> <i></i> {{::\'Notify me on new events\' | translate}} </label> </div> <div class="checkbox"> <label class="checks"> <input type="checkbox" ng-model="vm.emailNotificationSettings.report_critical_events" ng-model-options="{ debounce: 500 }" ng-change="vm.saveEmailNotificationSettings()" ng-disabled="!vm.hasPremiumEmailNotifications()"> <i></i> {{::\'Notify me on critical events\' | translate}} </label> </div> </div> </form> </uib-tab> <uib-tab heading="{{::\'Password\' | translate}}"> <form name="vm.passwordForm" role="form" class="form-validation"> <div class="form-group" ng-if="vm.hasLocalAccount"> <label for="current">{{::"Current Password" | translate}}</label> <input id="current" name="current" type="password" class="form-control" ng-model="vm.password.current_password" required> <div class="error" ng-messages="vm.passwordForm.current.$error" ng-if="vm.passwordForm.$submitted || vm.passwordForm.current.$touched"> <small ng-message="required">{{::"Current Password is required." | translate}}</small> </div> </div> <div class="form-group"> <label for="newPassword">{{::\'New Password\' | translate}}</label> <input id="newPassword" name="newPassword" type="password" class="form-control" ng-model="vm.password.password" ng-minlength="6" ng-maxlength="100" required> <div class="error" ng-messages="vm.passwordForm.newPassword.$error" ng-if="vm.passwordForm.$submitted || vm.passwordForm.newPassword.$touched"> <small ng-message="required">{{::\'New Password is required.\' | translate}}</small> <small ng-message="minlength">{{::\'New Password must be at least 6 characters long.\' | translate}}</small> <small ng-message="maxlength">{{::\'New Password must be less than 101 characters long.\' | translate}}</small> </div> </div> <div class="form-group"> <label for="confirmPassword">{{::\'Confirm password\' | translate}}</label> <input id="confirmPassword" name="confirmPassword" type="password" class="form-control" ng-model="vm.password.confirm_password" match="vm.password.password" ng-minlength="6" ng-maxlength="100" ng-required="true"> <div class="error" ng-messages="vm.passwordForm.confirmPassword.$error" ng-if="vm.passwordForm.$submitted || vm.passwordForm.confirmPassword.$touched"> <small ng-message="match">{{::\'New Password and Confirmation Password fields do not match.\' | translate}}</small> <small ng-message="required">{{::\'Confirm Password is required.\' | translate}}</small> <small ng-message="minlength">{{::\'Confirm Password must be at least 6 characters long.\' | translate}}</small> <small ng-message="maxlength">{{::\'Confirm Password must be less than 101 characters long.\' | translate}}</small> </div> </div> <button type="submit" role="button" class="btn btn-primary" promise-button="vm.changePassword(vm.passwordForm.$valid)" promise-button-busy-text="{{vm.hasLocalAccount ? \'Changing Password\' : \'Setting Password\' | translate}}">{{vm.hasLocalAccount ? \'Change Password\' : \'Set Password\' | translate}}</button> </form> </uib-tab> <uib-tab heading="{{::\'External Logins\' | translate}}" ng-if="vm.isExternalLoginEnabled()"> <h4>{{::\'Add an external login\' | translate}}</h4> <div> <button type="button" role="button" ng-click="vm.authenticate(\'live\')" ng-if="vm.isExternalLoginEnabled(\'live\')" class="btn btn-large image-button icon-login-microsoft" title="{{::\'Log in using your Microsoft account\' | translate}}"></button> <button type="button" role="button" ng-click="vm.authenticate(\'google\')" ng-if="vm.isExternalLoginEnabled(\'google\')" class="btn btn-large image-button icon-login-google" title="{{::\'Log in using your Google account\' | translate}}"></button> <button type="button" role="button" ng-click="vm.authenticate(\'facebook\')" ng-if="vm.isExternalLoginEnabled(\'facebook\')" class="btn btn-large image-button icon-login-facebook" title="{{::\'Log in using your Facebook account\' | translate}}"></button> <button type="button" role="button" ng-click="vm.authenticate(\'github\')" ng-if="vm.isExternalLoginEnabled(\'github\')" class="btn btn-large image-button icon-login-github" title="{{::\'Log in using your GitHub account\' | translate}}"></button> </div> <h4>{{::\'Existing external logins\' | translate}}</h4> <div class="table-responsive"> <table class="table table-striped table-bordered table-fixed b-t"> <thead> <tr> <th>{{::\'Name\' | translate}}</th> <th class="action">{{::\'Actions\' | translate}}</th> </tr> </thead> <tbody> <tr ng-repeat="account in vm.user.o_auth_accounts" ng-if="vm.user.o_auth_accounts.length > 0"> <td>{{::account.provider}} ({{::account.username || account.provider_user_id}})</td> <td> <button type="button" role="button" class="btn btn-sm" title="{{::\'Remove\' | translate}}" ng-disabled="!(vm.hasLocalAccount || vm.user.o_auth_accounts.length > 1)" ng-click="vm.unlink(account)"> <i class="fa fa-times"></i> </button> </td> </tr> <tr ng-if="vm.user.o_auth_accounts.length === 0"> <td colspan="2"> <strong>{{::\'No external logins were found.\' | translate}}</strong> </td> </tr> </tbody> </table> </div> </uib-tab> </uib-tabset> </div> <footer class="panel-footer"> <div class="pull-right"> <div ng-if="!vm.currentProject.id"> <a ui-sref="app.frequent" class="btn btn-default" role="button">{{::\'Go To Most Frequent\' | translate}}</a> </div> <div ng-if="vm.currentProject.id"> <a ui-sref="app.project-frequent({ projectId: vm.currentProject.id })" class="btn btn-default" role="button">{{::\'Go To Most Frequent\' | translate}}</a> </div> </div><div class="clearfix"></div> </footer> </div> </div> </div> </div> '),$templateCache.put("app/admin/dashboard.tpl.html",'<div class="hbox hbox-auto-xs hbox-auto-sm" refresh-on="PersistentEventChanged" refresh-action="vm.get()" refresh-throttle="10000"> <div class="col" refresh-on="filterChanged" refresh-action="vm.get()"> <div class="wrapper-md"> <div class="panel panel-default"> <div class="panel-heading"><i class="fa fa-signal"></i> {{::\'Dashboard\' | translate}}</div> <div class="panel-body"> <p>This dashboard has yet to be finished. It will contain a system level overview.</p> </div> </div> </div> </div> </div> '),$templateCache.put("app/app.tpl.html",'<div class="app-header-fixed app-aside-fixed" ng-class="{\'app-aside-folded\': !!appVm.isSideNavCollapsed}"> <nav ng-include="\'app/blocks/header.tpl.html\'" class="app-header navbar navbar-default bg-black"></nav> <div ng-include="\'app/blocks/sidebar.tpl.html\'" class="app-aside hidden-xs bg-dark"></div> <div class="app-content" refresh-on="UserChanged" refresh-action="appVm.getUser(data)" refresh-debounce="1000"> <div refresh-on="OrganizationChanged" refresh-action="appVm.getOrganizations()" refresh-debounce="5000"></div> <button type="button" role="button" class="off-screen-toggle hide" ui-toggle-class="off-screen" data-target=".app-aside"></button> <system-notification></system-notification> <release-notification></release-notification> <rate-limit></rate-limit> <div class="app-content-body fade-in" ui-view autoscroll="true"></div> </div> <div class="app-footer wrapper b-t bg-light"> <span class="pull-right"> <a href="https://github.com/exceptionless/Exceptionless.UI/releases" target="_blank">@@version</a> <a href="javascript:void(0);" ui-scroll="app" class="m-l-sm text-muted"><i class="fa fa-long-arrow-up"></i></a> </span> &copy; 2017 <a href="https://exceptionless.com">Exceptionless</a> </div> <intercom ng-if="appVm.isIntercomEnabled()"></intercom> </div> '),$templateCache.put("app/auth/forgot-password.tpl.html",'<div> <rate-limit></rate-limit> <div class="container w-auto-xs"> <div class="text-center m-t"> <a href="https://exceptionless.com"> <img src="/img/exceptionless-350.png" alt="logo"> </a> </div> <div class="hbox hbox-auto-xs hbox-auto-sm"> <div class="col"> <div class="wrapper-md"> <div class="panel panel-default"> <div class="panel-heading"><strong>Reset your password</strong></div> <div class="panel-body"> <form name="forgotForm" role="form" class="form-validation form-horizontal" autocomplete="on"> <div class="form-group"> <label for="email" class="col-sm-2 control-label">Email</label> <div class="col-sm-10"> <input id="email" name="email" type="email" class="form-control" placeholder="Email address" x-autocompletetype="email" autocorrect="off" spellcheck="false" ng-model="vm.email" ng-required="true" autofocus> <div class="error" ng-messages="forgotForm.email.$error" ng-if="forgotForm.$submitted || forgotForm.email.$touched"> <small ng-message="required">Email Address is required.</small> <small ng-message="email">Email Address is required.</small> </div> </div> </div> <div class="form-group"> <div class="col-sm-offset-2 col-sm-10"> <input type="submit" role="button" class="btn btn-primary" ng-click="vm.resetPassword(forgotForm.$valid)" value="Forgot Password"> </div> </div> </form> </div> </div> </div> </div> </div> </div> </div> '),$templateCache.put("app/auth/login.tpl.html",'<div> <rate-limit></rate-limit> <div class="container w-auto-xs"> <div class="text-center m-t"> <a href="https://exceptionless.com"> <img src="/img/exceptionless-350.png" alt="logo"> </a> </div> <div class="hbox hbox-auto-xs hbox-auto-sm"> <div class="col"> <div class="wrapper-md"> <div class="panel panel-default"> <div class="panel-body"> <form name="vm.loginForm" role="form" class="form-horizontal form-validation" autocomplete="on"> <div class="form-horizontal col-sm-offset-2"> <h4>{{::\'Login with\' | translate}} <span ng-if="vm.isExternalLoginEnabled()"></span></h4> <div class="form-group" style="margin-left:0px" ng-if="vm.isExternalLoginEnabled()"> <button type="button" role="button" ng-click="vm.authenticate(\'live\')" ng-if="vm.isExternalLoginEnabled(\'live\')" class="btn btn-large image-button icon-login-microsoft" title="Log in using your Microsoft account"></button> <button type="button" role="button" ng-click="vm.authenticate(\'google\')" ng-if="vm.isExternalLoginEnabled(\'google\')" class="btn btn-large image-button icon-login-google" title="Log in using your Google account"></button> <button type="button" role="button" ng-click="vm.authenticate(\'facebook\')" ng-if="vm.isExternalLoginEnabled(\'facebook\')" class="btn btn-large image-button icon-login-facebook" title="Log in using your Facebook account"></button> <button type="button" role="button" ng-click="vm.authenticate(\'github\')" ng-if="vm.isExternalLoginEnabled(\'github\')" class="btn btn-large image-button icon-login-github" title="Log in using your GitHub account"></button> </div> <div class="form-group" ng-if="vm.isExternalLoginEnabled()"> <div class="col-sm-10 horizontal-divider"> <p>{{::\'OR\' | translate}}</p> <span></span> </div> </div> </div> <div class="form-group"> <label for="email" class="col-sm-2 control-label">{{::\'Email\' | translate}}</label> <div class="col-sm-10"> <input id="email" name="email" type="email" class="form-control" placeholder="Email address" x-autocompletetype="email" autocorrect="off" spellcheck="false" ng-model="vm.user.email" ng-required="true" autofocus> <div class="error" ng-messages="vm.loginForm.email.$error" ng-if="vm.loginForm.$submitted || vm.loginForm.email.$touched"> <small ng-message="required">{{::\'Email Address is required.\' | translate}}</small> <small ng-message="email">{{::\'Email Address is required.\' | translate}}</small> </div> </div> </div> <div class="form-group"> <label for="password" class="col-sm-2 control-label">{{::\'Password\' | translate}}</label> <div class="col-sm-10"> <input id="password" name="password" type="password" class="form-control" placeholder="Password" ng-model="vm.user.password" ng-minlength="6" ng-maxlength="100" ng-required="true"> <div class="error" ng-messages="vm.loginForm.password.$error" ng-if="vm.loginForm.$submitted || vm.loginForm.password.$touched"> <small ng-message="required">{{::\'Password is required.\' | translate}}</small> <small ng-message="minlength">{{::\'Password must be at least 6 characters long.\' | translate}}</small> <small ng-message="maxlength">{{::\'Password must be less than 101 characters long.\' | translate}}</small> </div> </div> </div> <div class="form-group"> <div class="col-sm-offset-2 col-sm-10"> <input type="submit" role="button" id="login" ng-click="vm.login(vm.loginForm.$valid)" class="btn btn-primary" value="{{::\'Log in\' | translate}}"> <a class="btn btn-default" role="button" ui-sref="auth.signup({ token: vm.token })">{{::\'Signup\' | translate}}</a> <p><a ui-sref="auth.forgot-password">{{::\'Forgot password?\' | translate}}</a></p> </div> </div> </form> </div> </div> <div class="text-center"> {{::\'By signing up, you agree to our\' | translate}} <a href="https://exceptionless.com/privacy" target="_blank">{{::\'Privacy Policy\' | translate}}</a>{{::\'and\' | translate}}  <a href="https://exceptionless.com/terms" target="_blank">{{::\'Terms of Service\' | translate}}</a>. </div> </div> </div> </div> </div> </div>'),$templateCache.put("app/auth/reset-password.tpl.html",'<div> <rate-limit></rate-limit> <div class="container w-auto-xs"> <div class="text-center m-t"> <a href="https://exceptionless.com"> <img src="/img/exceptionless-350.png" alt="logo"> </a> </div> <div class="hbox hbox-auto-xs hbox-auto-sm"> <div class="col"> <div class="wrapper-md"> <div class="panel panel-default"> <div class="panel-heading"><strong>Change password</strong></div> <div class="panel-body"> <form name="passwordForm" role="form" class="form-validation form-horizontal"> <div class="form-group"> <label for="password" class="col-sm-2 control-label">New Password</label> <div class="col-sm-10"> <input id="password" name="password" type="password" class="form-control" ng-model="vm.data.password" ng-minlength="6" ng-maxlength="100" ng-required="true" autofocus> <div class="error" ng-messages="passwordForm.password.$error" ng-if="passwordForm.$submitted || passwordForm.password.$touched"> <small ng-message="required">New Password is required.</small> <small ng-message="minlength">New Password must be at least 6 characters long.</small> <small ng-message="maxlength">New Password must be less than 101 characters long.</small> </div> </div> </div> <div class="form-group"> <label for="confirmPassword" class="col-sm-2 control-label">Confirm password</label> <div class="col-sm-10"> <input id="confirmPassword" name="confirmPassword" type="password" class="form-control" ng-model="vm.data.confirm_password" match="vm.data.password" ng-minlength="6" ng-maxlength="100" ng-required="true"> <div class="error" ng-messages="passwordForm.confirmPassword.$error" ng-if="passwordForm.$submitted || passwordForm.confirmPassword.$touched"> <small ng-message="match">New Password and Confirmation Password fields do not match.</small> <small ng-message="required">Confirm Password is required.</small> <small ng-message="minlength">Confirm Password must be at least 6 characters long.</small> <small ng-message="maxlength">Confirm Password must be less than 101 characters long.</small> </div> </div> </div> <div class="form-group"> <div class="col-sm-offset-2 col-sm-10"> <input type="submit" role="button" class="btn btn-primary" ng-click="vm.changePassword(passwordForm.$valid)" value="Change Password"> </div> </div> </form> </div> </div> </div> </div> </div> </div> </div> '),$templateCache.put("app/auth/signup.tpl.html",'<div> <rate-limit></rate-limit> <div class="container w-auto-xs"> <div class="text-center m-t"> <a href="https://exceptionless.com"> <img src="/img/exceptionless-350.png" alt="logo"> </a> </div> <div class="hbox hbox-auto-xs hbox-auto-sm"> <div class="col"> <div class="wrapper-md"> <div class="panel panel-default"> <div class="panel-heading text-center"><strong>{{::\'Signup for a FREE account in seconds\' | translate}}</strong> </div> <div class="panel-body"> <form name="vm.signupForm" role="form" class="form-horizontal form-validation" autocomplete="on"> <div class="form-horizontal col-sm-offset-2"> <h4 ng-if="vm.isExternalLoginEnabled()">{{::\'Login with\' | translate}}</h4> <div class="form-group" style="margin-left:0px" ng-if="vm.isExternalLoginEnabled()"> <button type="button" role="button" ng-click="vm.authenticate(\'live\')" ng-if="vm.isExternalLoginEnabled(\'live\')" class="btn btn-large image-button icon-login-microsoft" title="Log in using your Microsoft account"></button> <button type="button" role="button" ng-click="vm.authenticate(\'google\')" ng-if="vm.isExternalLoginEnabled(\'google\')" class="btn btn-large image-button icon-login-google" title="Log in using your Google account"></button> <button type="button" role="button" ng-click="vm.authenticate(\'facebook\')" ng-if="vm.isExternalLoginEnabled(\'facebook\')" class="btn btn-large image-button icon-login-facebook" title="Log in using your Facebook account"></button> <button type="button" role="button" ng-click="vm.authenticate(\'github\')" ng-if="vm.isExternalLoginEnabled(\'github\')" class="btn btn-large image-button icon-login-github" title="Log in using your GitHub account"></button> </div> <div class="form-group" ng-if="vm.isExternalLoginEnabled()"> <div class="col-sm-10 horizontal-divider"> <p>OR</p> <span></span> </div> </div> <h4>{{::\'Create an account\' | translate}}</h4> </div> <div class="form-group"> <label for="name" class="col-sm-2 control-label">{{::\'Name\' | translate}}</label> <div class="col-sm-10"> <input id="name" name="name" type="text" class="form-control" placeholder="Your first and last name" x-autocompletetype="full-name" autocapitalize="words" autocorrect="off" spellcheck="false" ng-model="vm.user.name" ng-required="true" autofocus> <div class="error" ng-messages="vm.signupForm.name.$error" ng-if="vm.signupForm.$submitted || vm.signupForm.name.$touched"> <small ng-message="required">{{::\'Full Name is required.\' | translate}}</small> </div> </div> </div> <div class="form-group"> <label for="email" class="col-sm-2 control-label">{{::\'Email\' | translate}}</label> <div class="col-sm-10"> <div ng-class="{\'input-group\': !!vm.signupForm.$pending }"> <input id="email" name="email" type="email" class="form-control" placeholder="Email address (no spam)" x-autocompletetype="email" autocorrect="off" spellcheck="false" ng-model="vm.user.email" ng-model-options="{ debounce: 1000 }" email-address-available-validator ng-required="true"> <span class="input-group-addon" ng-if="vm.signupForm.$pending"> <i class="fa fa-fw fa-spinner fa-spin"></i> </span> </div> <div class="error" ng-messages="vm.signupForm.email.$error" ng-if="vm.signupForm.$submitted || vm.signupForm.email.$touched"> <small ng-message="required">{{::\'Email Address is required.\' | translate}}</small> <small ng-message="email">{{::\'Email Address is required.\' | translate}}</small> <small ng-message="unique">{{::\'A user already exists with this email address.\' | translate}}</small> </div> </div> </div> <div class="form-group"> <label for="password" class="col-sm-2 control-label">{{::\'Password\' | translate}}</label> <div class="col-sm-10"> <input id="password" name="password" type="password" class="form-control" placeholder="Password" ng-model="vm.user.password" ng-minlength="6" ng-maxlength="100" ng-required="true"> <div class="error" ng-messages="vm.signupForm.password.$error" ng-if="vm.signupForm.$submitted || vm.signupForm.password.$touched"> <small ng-message="required">{{::\'Password is required.\' | translate}}</small> <small ng-message="minlength">{{::\'Password must be at least 6 characters long.\' | translate}}</small> <small ng-message="maxlength">{{::\'Password must be less than 101 characters long.\' | translate}}</small> </div> </div> </div> <div class="form-group"> <div class="col-sm-offset-2 col-sm-10"> <input type="submit" role="button" id="signup" ng-click="vm.signup()" class="btn btn-primary btn-lg" value="{{::\'Create My Account\' | translate}}"> <p>{{::\'Already have an account?\' | translate}} <a ui-sref="auth.login({ token: vm.token })">{{::\'Log In\' | translate}}</a></p> </div> </div> </form> </div> </div> <div class="text-center"> {{::\'By signing up, you agree to our\' | translate}} <a href="https://exceptionless.com/privacy" target="_blank">{{::\'Privacy Policy\' | translate}}</a> {{::\'and\' | translate}}<a href="https://exceptionless.com/terms" target="_blank">{{::\'Terms of Service\' | translate}}</a>. </div> </div> </div> </div> </div> </div> '),$templateCache.put("app/blocks/header.tpl.html",'<div class="bg-black primary-underline"> <div class="navbar-header"> <button type="button" role="button" class="pull-right visible-xs dk" ui-toggle-class="show" data-toggle="collapse" data-target=".navbar-collapse"> <i class="fa fa-fw fa-cog"></i> </button> <button type="button" role="button" class="pull-right visible-xs" ui-toggle-class="off-screen" data-target=".app-aside" ui-scroll="app"> <i class="fa fa-fw fa-align-justify"></i> </button> <a ng-href="{{appVm.urls.dashboard.all}}" class="navbar-brand text-lt"> <img src="/touch-icon-ipad-114.png" alt="exceptionless" class="icon"> <img src="/img/exceptionless-logo.png" alt="exceptionless" class="hidden-folded"> </a> </div> <div class="collapse navbar-collapse no-shadow"> <div class="nav navbar-nav navbar-left hidden-xs"> <a class="btn no-shadow navbar-btn" role="button" ng-click="appVm.toggleSideNavCollapsed()"> <i class="fa {{appVm.isSideNavCollapsed ? \'fa-indent\' : \'fa-dedent\'}} fa-fw"></i> </a> </div> <ul class="nav navbar-nav navbar-left"> <project-filter></project-filter> <date-filter></date-filter> </ul> <ul class="nav navbar-nav navbar-right hidden-xs" auto-active> <li class="dropdown"> <a class="dropdown-toggle profile-image" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> <img class="img-thumbnail" gravatar-src="appVm.user.email_address" gravatar-size="35" alt="{{appVm.user.full_name}}"> <span class="caret"></span> </a> <ul class="dropdown-menu"> <li><a ui-sref="app.account.manage"><i class="fa fa-user fa-fw"></i> {{::\'My Account\' | translate}}</a></li> <li><a ng-click="appVm.changePlan()" ng-if="appVm.canChangePlan"><i class="fa fa-credit-card fa-fw"></i> Change Plan</a></li> <li><a ui-sref="app.account.manage({ tab: \'password\' })"><i class="fa fa-lock fa-fw"></i> {{::\'Change Password\' | translate}}</a></li> <li><a href="https://github.com/exceptionless/Exceptionless/wiki" target="_blank"><i class="fa fa-book fa-fw"></i> {{::\'Documentation\' | translate}}</a></li> <li ng-if="appVm.isIntercomEnabled()"><a ng-click="appVm.showIntercom()"><i class="fa fa-comment fa-fw"></i> Support</a></li> <li><a ui-sref="auth.logout"><i class="fa fa-power-off fa-fw"></i> {{::\'Logout\' | translate}}</a></li> </ul> </li> </ul> <search-filter></search-filter> <ul class="nav navbar-nav visible-xs hidden-sm" auto-active> <li><a ui-sref="app.account.manage"><i class="fa fa-user fa-fw"></i> {{::\'My Account\' | translate}}</a></li> <li><a ng-click="appVm.changePlan()" ng-if="appVm.canChangePlan"><i class="fa fa-credit-card fa-fw"></i> Change Plan</a></li> <li><a ui-sref="app.account.manage({ tab: \'password\' })"><i class="fa fa-lock fa-fw"></i> {{::\'Change Password\' | translate}}</a></li> <li><a href="https://github.com/exceptionless/Exceptionless/wiki" target="_blank"><i class="fa fa-book fa-fw"></i> {{::\'Documentation\' | translate}}</a></li> <li ng-if="appVm.isIntercomEnabled()"><a ng-click="appVm.showIntercom()"><i class="fa fa-comment fa-fw"></i> Support</a></li> <li><a ui-sref="auth.logout"><i class="fa fa-power-off fa-fw"></i> {{::\'Logout\' | translate}}</a></li> </ul> </div> </div> '),$templateCache.put("app/blocks/nav.tpl.html",'<ul class="nav"> <li ng-class="{active: appVm.isMenuActive.error}"> <a href="#" class="auto"> <span class="pull-right text-muted"> <i class="fa fa-fw fa-angle-right text"></i> <i class="fa fa-fw fa-angle-down text-active"></i> </span> <i class="fa fa-warning fa-fw"></i> <span>{{::\'Exceptions\' | translate}}</span> </a> <ul class="nav nav-sub dk" auto-active> <li class="nav-sub-header">{{::\'Exceptions\' | translate}}</li> <li> <a ng-href="{{appVm.urls.dashboard.error}}"> <i class="fa fa-dashboard fa-fw"></i> <span>{{::\'Dashboard\' | translate}}</span> </a> </li> <li> <a ng-href="{{appVm.urls.recent.error}}"> <i class="fa fa-calendar fa-fw"></i> <span>{{::\'Most Recent\' | translate}}</span> </a> </li> <li> <a ng-href="{{appVm.urls.frequent.error}}"> <i class="fa fa-signal fa-fw"></i> <span>{{::\'Most Frequent\' | translate}}</span> </a> </li> <li> <a ng-href="{{appVm.urls.users.error}}"> <i class="fa fa-users fa-fw"></i> <span>{{::\'Most Users\' | translate}}</span> </a> </li> <li> <a ng-href="{{appVm.urls.new.error}}"> <i class="fa fa-asterisk fa-fw"></i> <span>{{::\'New\' | translate}}</span> </a> </li> </ul> </li> <li ng-class="{active: appVm.isMenuActive.log}"> <a href class="auto"> <span class="pull-right text-muted"> <i class="fa fa-fw fa-angle-right text"></i> <i class="fa fa-fw fa-angle-down text-active"></i> </span> <i class="fa fa-file-text-o fa-fw"></i> <span>{{::\'Log Messages\' | translate}}</span> </a> <ul class="nav nav-sub dk" auto-active> <li class="nav-sub-header">{{::\'Log Messages\' | translate}}</li> <li> <a ng-href="{{appVm.urls.dashboard.log}}"> <i class="fa fa-dashboard fa-fw"></i> <span>{{::\'Dashboard\' | translate}}</span> </a> </li> <li> <a ng-href="{{appVm.urls.recent.log}}"> <i class="fa fa-calendar fa-fw"></i> <span>{{::\'Most Recent\' | translate}}</span> </a> </li> <li> <a ng-href="{{appVm.urls.frequent.log}}"> <i class="fa fa-signal fa-fw"></i> <span>{{::\'Most Frequent\' | translate}}</span> </a> </li> <li> <a ng-href="{{appVm.urls.users.log}}"> <i class="fa fa-users fa-fw"></i> <span>{{::\'Most Users\' | translate}}</span> </a> </li> <li> <a ng-href="{{appVm.urls.new.log}}"> <i class="fa fa-asterisk fa-fw"></i> <span>{{::\'New\' | translate}}</span> </a> </li> </ul> </li> <li ng-class="{active: appVm.isMenuActive[\'404\']}"> <a href class="auto"> <span class="pull-right text-muted"> <i class="fa fa-fw fa-angle-right text"></i> <i class="fa fa-fw fa-angle-down text-active"></i> </span> <i class="fa fa-unlink fa-fw"></i> <span>{{::\'Broken Links\' | translate}}</span> </a> <ul class="nav nav-sub dk" auto-active> <li class="nav-sub-header">{{::\'Broken Links\' | translate}}</li> <li> <a ng-href="{{appVm.urls.dashboard[\'404\']}}"> <i class="fa fa-dashboard fa-fw"></i> <span>{{::\'Dashboard\' | translate}}</span> </a> </li> <li> <a ng-href="{{appVm.urls.recent[\'404\']}}"> <i class="fa fa-calendar fa-fw"></i> <span>{{::\'Most Recent\' | translate}}</span> </a> </li> <li> <a ng-href="{{appVm.urls.frequent[\'404\']}}"> <i class="fa fa-signal fa-fw"></i> <span>{{::\'Most Frequent\' | translate}}</span> </a> </li> <li> <a ng-href="{{appVm.urls.users[\'404\']}}"> <i class="fa fa-users fa-fw"></i> <span>{{::\'Most Users\' | translate}}</span> </a> </li> <li> <a ng-href="{{appVm.urls.new[\'404\']}}"> <i class="fa fa-asterisk fa-fw"></i> <span>{{::\'New\' | translate}}</span> </a> </li> </ul> </li> <li ng-class="{active: appVm.isMenuActive.usage}"> <a href class="auto"> <span class="pull-right text-muted"> <i class="fa fa-fw fa-angle-right text"></i> <i class="fa fa-fw fa-angle-down text-active"></i> </span> <i class="fa fa-check-square-o fa-fw"></i> <span>{{::\'Feature Usages\' | translate}}</span> </a> <ul class="nav nav-sub dk" auto-active> <li class="nav-sub-header">{{::\'Feature Usages\' | translate}}</li> <li> <a ng-href="{{appVm.urls.dashboard.usage}}"> <i class="fa fa-dashboard fa-fw"></i> <span>{{::\'Dashboard\' | translate}}</span> </a> </li> <li> <a ng-href="{{appVm.urls.recent.usage}}"> <i class="fa fa-calendar fa-fw"></i> <span>{{::\'Most Recent\' | translate}}</span> </a> </li> <li> <a ng-href="{{appVm.urls.frequent.usage}}"> <i class="fa fa-signal fa-fw"></i> <span>{{::\'Most Frequent\' | translate}}</span> </a> </li> <li> <a ng-href="{{appVm.urls.users.usage}}"> <i class="fa fa-users fa-fw"></i> <span>{{::\'Most Users\' | translate}}</span> </a> </li> <li> <a ng-href="{{appVm.urls.new.usage}}"> <i class="fa fa-asterisk fa-fw"></i> <span>{{::\'New\' | translate}}</span> </a> </li> </ul> </li> <li ng-class="{active: appVm.isMenuActive.all}"> <a href class="auto"> <span class="pull-right text-muted"> <i class="fa fa-fw fa-angle-right text"></i> <i class="fa fa-fw fa-angle-down text-active"></i> </span> <i class="fa fa-calendar fa-fw"></i> <span>{{::\'All Events\' | translate}}</span> </a> <ul class="nav nav-sub dk" auto-active> <li class="nav-sub-header">{{::\'All Events\' | translate}}</li> <li> <a ng-href="{{appVm.urls.dashboard.all}}"> <i class="fa fa-dashboard fa-fw"></i> <span>{{::\'Dashboard\' | translate}}</span> </a> </li> <li> <a ng-href="{{appVm.urls.recent.all}}"> <i class="fa fa-calendar fa-fw"></i> <span>{{::\'Most Recent\' | translate}}</span> </a> </li> <li> <a ng-href="{{appVm.urls.frequent.all}}"> <i class="fa fa-signal fa-fw"></i> <span>{{::\'Most Frequent\' | translate}}</span> </a> </li> <li> <a ng-href="{{appVm.urls.users.all}}"> <i class="fa fa-users fa-fw"></i> <span>{{::\'Most Users\' | translate}}</span> </a> </li> <li> <a ng-href="{{appVm.urls.new.all}}"> <i class="fa fa-asterisk fa-fw"></i> <span>{{::\'New\' | translate}}</span> </a> </li> </ul> </li> <li ng-class="{active: appVm.isMenuActive.reports}"> <a href class="auto"> <span class="pull-right text-muted"> <i class="fa fa-fw fa-angle-right text"></i> <i class="fa fa-fw fa-angle-down text-active"></i> </span> <i class="fa fa-book fa-fw"></i> <span>{{::\'Reports\' | translate}}</span> </a> <ul class="nav nav-sub dk" auto-active> <li class="nav-sub-header">{{::\'Reports\' | translate}}</li> <li> <a ng-href="{{appVm.urls.sessionDashboard}}"> <i class="fa fa-heartbeat fa-fw"></i> <span>{{::\'Sessions\' | translate}}</span> </a> </li> </ul> </li> <li ng-class="{active: appVm.isMenuActive.admin}"> <a href class="auto"> <span class="pull-right text-muted"> <i class="fa fa-fw fa-angle-right text"></i> <i class="fa fa-fw fa-angle-down text-active"></i> </span> <i class="fa fa-cog fa-fw"></i> <span>{{::\'Admin\' | translate}}</span> </a> <ul class="nav nav-sub dk" auto-active> <li class="nav-sub-header">{{::\'Admin\' | translate}}</li> <li> <a ui-sref="app.project.list"> <i class="fa fa-briefcase fa-fw"></i> <span>{{::\'Projects\' | translate}}</span> </a> </li> <li> <a ui-sref="app.organization.list"> <i class="fa fa-group fa-fw"></i> <span>{{::\'Organizations\' | translate}}</span> </a> </li> <li> <a ui-sref="app.account.manage"> <i class="fa fa-user fa-fw"></i> <span>{{::\'My Account\' | translate}}</span> </a> </li> </ul> </li> <li> <a href="https://github.com/exceptionless/Exceptionless/wiki" target="_blank" title="Documentation"> <i class="fa fa-book fa-fw"></i> <span>{{::\'Documentation\' | translate}}</span> </a> </li> <li ng-if="appVm.isIntercomEnabled()"> <a ng-click="appVm.showIntercom()" title="Support"> <i class="fa fa-comment fa-fw"></i> <span>{{::\'Support\' | translate}}</span> </a> </li> </ul>'),$templateCache.put("app/blocks/sidebar.tpl.html",'<div class="aside-wrap"> <div class="navi-wrap"> <div class="clearfix hidden-xs text-center hide" id="aside-user"> <div class="line dk hidden-folded"></div> </div> <nav ui-nav class="navi" ng-include="\'app/blocks/nav.tpl.html\'"></nav> </div> </div> '),$templateCache.put("app/dashboard.tpl.html",'<organization-notifications></organization-notifications> <div class="hbox hbox-auto-xs hbox-auto-sm" refresh-on="PersistentEventChanged PlanChanged" refresh-action="vm.get()" refresh-if="vm.canRefresh(data)" refresh-throttle="10000"> <div class="col" refresh-on="filterChanged" refresh-action="vm.get()"> <div class="wrapper-md"> <div class="row"> <div class="col-sm-12"> <div class="row row-sm text-center"> <div class="col-md-3 col-sm-6 col-xs-6"> <a ng-href="{{appVm.urls.recent[vm.type]}}" class="dashboard-block"> <div class="rotate"> <i class="fa fa-calendar fa-4x"></i> </div> <div class="details"> <span class="title">{{::\'Count\' | translate}}</span> <span class="sub">{{vm.stats.count}}</span> </div> <i class="fa fa-chevron-right fa-2x more"></i> </a> </div> <div class="col-md-3 col-sm-6 col-xs-6"> <a ng-href="{{appVm.urls.frequent[vm.type]}}" class="dashboard-block"> <div class="rotate"> <i class="fa fa-key fa-4x"></i> </div> <div class="details"> <span class="title">{{::\'Unique\' | translate}}</span> <span class="sub">{{vm.stats.unique}}</span> </div> <i class="fa fa-chevron-right fa-2x more"></i> </a> </div> <div class="col-md-3 col-sm-6 col-xs-6"> <a ng-href="{{appVm.urls.new[vm.type]}}" class="dashboard-block"> <div class="rotate"> <i class="fa fa-asterisk fa-4x"></i> </div> <div class="details"> <span class="title">{{::\'New\' | translate}}</span> <span class="sub">{{vm.stats.new}}</span> </div> <i class="fa fa-chevron-right fa-2x more"></i> </a> </div> <div class="col-md-3 col-sm-6 col-xs-6"> <div class="dashboard-block"> <div class="rotate"> <i class="fa fa-line-chart fa-4x"></i> </div> <div class="details"> <span class="title">{{::\'Per Hour\' | translate}}</span> <span class="sub">{{vm.stats.avg_per_hour}}</span> </div> </div> </div> </div> </div> </div> <div class="panel panel-default"> <div class="panel-heading"><i class="fa fa-bar-chart-o"></i>{{::\'History\' | translate}}</div> <div class="panel-body"> <rickshaw options="vm.chart.options" features="vm.chart.features"></rickshaw> </div> </div> <div class="panel panel-default"> <div class="panel-heading"><i class="fa fa-signal"></i>{{::\'Most Frequent\' | translate}}</div> <stacks settings="vm.mostFrequent"></stacks> </div> <div class="panel panel-default"> <div class="panel-heading"><i class="fa fa-calendar"></i>{{::\'Most Recent\' | translate}}</div> <events settings="vm.mostRecent"></events> </div> </div> </div> </div> '),$templateCache.put("app/event/event.tpl.html",'<organization-notifications organization-id="vm.event.organization_id"></organization-notifications> <div class="hbox hbox-auto-xs hbox-auto-sm"> <div class="wrapper-md"> <div class="panel panel-default"> <div class="panel-heading"> <i class="fa fa-calendar"></i> Event Occurrence <div class="pull-right hidden-print"> <a clipboard text="vm.event_json" on-copied="vm.copied()" supported="vm.clipboardSupported" ng-show="vm.event.stack_id && vm.clipboardSupported" class="btn btn-default btn-xs fa fa-code hidden-xs" role="button" title="Copy Event JSON to Clipboard"></a> <a ui-sref="app.stack({ id: vm.event.stack_id })" ng-class="{\'disabled\': !vm.event.stack_id}" class="btn btn-default btn-xs fa fa-fw fa-caret-up" role="button" title="Go To Stack"></a> <a ui-sref="app.event({ id: vm.previous, tab: vm.getCurrentTab() })" ng-class="{\'disabled\': !vm.previous}" class="btn btn-default btn-xs fa fa-fw fa-caret-left" role="button" title="Previous Occurrence"></a> <a ui-sref="app.event({ id: vm.next, tab: vm.getCurrentTab() })" ng-class="{\'disabled\': !vm.next}" class="btn btn-default btn-xs fa fa-fw fa-caret-right" role="button" title="Next Occurrence"></a> </div> </div> <div class="panel-body"> <uib-tabset class="tab-container hidden-xs" active="vm.activeTabIndex"> <uib-tab ng-repeat="tab in vm.tabs" heading="{{::tab.title | toSpacedWords}}" ng-click="vm.activateTab(tab.title)"> <div ng-include="\'app/event/tabs/\' + tab.template_key + \'.tpl.html\'"></div> </uib-tab> </uib-tabset> <uib-accordion class="visible-xs"> <div uib-accordion-group class="panel-default" ng-repeat="tab in vm.tabs" heading="{{::tab.title | toSpacedWords}}" is-open="tab.active" ng-click="vm.activateTab(tab.title)"> <div ng-include="\'app/event/tabs/\' + tab.template_key + \'.tpl.html\'"></div> </div> </uib-accordion> </div> <footer class="panel-footer hidden-xs"> <div class="pull-right"> <a ui-sref="app.stack({ id: vm.event.stack_id })" ng-class="{\'disabled\': !vm.event.stack_id}" class="btn btn-default" role="button">Go To Stack</a> </div> <a ui-sref="app.event({ id: vm.previous, tab: vm.getCurrentTab() })" ng-class="{\'disabled\': !vm.previous}" class="btn btn-primary" role="button">Previous Occurrence</a> <a ui-sref="app.event({ id: vm.next, tab: vm.getCurrentTab() })" ng-class="{\'disabled\': !vm.next}" class="btn btn-primary" role="button">Next Occurrence</a> </footer> </div> </div> </div> '),$templateCache.put("app/event/extended-data-item-directive.tpl.html",'<div ng-if="vm.hasData"> <div class="pull-right hidden-print"> <button type="button" role="button" class="btn btn-dark btn-xs" title="Copy to Clipboard" clipboard text="vm.data_json" on-copied="vm.copied()" supported="vm.clipboardSupported" ng-show="vm.clipboardSupported"> <i class="fa fa-copy"></i> </button> <div class="btn-group btn-group-xs"> <button type="button" role="button" class="btn btn-dark btn-xs" ng-click="vm.showRaw = !vm.showRaw">Toggle View</button> <button type="button" role="button" class="btn btn-dark btn-xs dropdown-toggle" data-toggle="dropdown" ng-if="vm.canPromote"> <span class="caret"></span> </button> <ul class="dropdown-menu pull-right" ng-if="vm.canPromote"> <li ng-if="!vm.isPromoted"><a ng-click="vm.promoteTab()">Promote to Tab</a></li> <li ng-if="vm.isPromoted"><a ng-click="vm.demoteTab()">Demote Tab</a></li> </ul> </div> </div> <h3>{{::vm.title | toSpacedWords}}</h3> <div ng-if="!vm.showRaw"> <object-dump content="vm.data"></object-dump> </div> <pre ng-if="vm.showRaw">{{::vm.data | json }}</pre> </div> '),$templateCache.put("app/event/reference.tpl.html",'<organization-notifications></organization-notifications> <div class="hbox hbox-auto-xs hbox-auto-sm"> <div class="col"> <div class="wrapper-md"> <div class="panel panel-default"> <div class="panel-heading"><i class="fa fa-bookmark"></i> References</div> <events settings="vm.references"></events> </div> </div> </div> </div> '),$templateCache.put("app/event/tabs/environment.tpl.html",'<h3 class="visible-print">Environment</h3> <table class="table table-striped table-bordered table-fixed table-key-value b-t"> <tr> <th>Occurred On</th> <td>{{::vm.event.date | date: \'medium\'}} (<timeago date="vm.event.date"></timeago>)</td> </tr> <tr ng-if="vm.environment.machine_name"> <th>Machine Name</th> <td><span truncate>{{::vm.environment.machine_name}}</span></td> </tr> <tr ng-if="vm.environment.ip_address"> <th>IP Address</th> <td>{{::vm.environment.ip_address}}</td> </tr> <tr ng-if="vm.environment.processor_count"> <th>Processor Count</th> <td>{{::vm.environment.processor_count}}</td> </tr> <tr ng-if="vm.environment.total_physical_memory"> <th>Total Memory</th> <td>{{::vm.environment.total_physical_memory | bytes}}</td> </tr> <tr ng-if="vm.environment.available_physical_memory"> <th>Available Memory</th> <td>{{::vm.environment.available_physical_memory | bytes}}</td> </tr> <tr ng-if="vm.environment.process_memory_size"> <th>Process Memory</th> <td>{{::vm.environment.process_memory_size | bytes}}</td> </tr> <tr ng-if="vm.environment.o_s_name"> <th>OS Name</th> <td><span truncate>{{::vm.environment.o_s_name}}</span></td> </tr> <tr ng-if="vm.environment.o_s_version"> <th>OS Version</th> <td>{{::vm.environment.o_s_version}}</td> </tr> <tr ng-if="vm.environment.architecture"> <th>Architecture</th> <td>{{::vm.environment.architecture}}</td> </tr> <tr ng-if="vm.environment.runtime_version"> <th>Runtime Version</th> <td>{{::vm.environment.runtime_version}}</td> </tr> <tr ng-if="vm.environment.process_id"> <th>Process ID</th> <td>{{::vm.environment.process_id}}</td> </tr> <tr ng-if="vm.environment.process_name"> <th>Process Name</th> <td><span truncate>{{::vm.environment.process_name}}</span></td> </tr> <tr ng-if="vm.environment.command_line"> <th>Command Line</th> <td><span truncate lines="2">{{::vm.environment.command_line}}</span></td> </tr> </table> <extended-data-item can-promote="false" title="\'Additional Data\'" data="vm.environment.data"></extended-data-item> '),$templateCache.put("app/event/tabs/error.tpl.html",'<h3 class="visible-print">Exception</h3> <table class="table table-striped table-bordered table-fixed table-key-value b-t"> <tr> <th>Occurred On</th> <td>{{::vm.event.date | date: \'medium\'}} (<timeago date="vm.event.date"></timeago>)</td> </tr> <tr> <th>Error Type</th> <td><span truncate>{{::vm.errorType}}</span></td> </tr> <tr> <th>Message</th> <td><span truncate lines="10">{{::vm.message}}</span></td> </tr> <tr ng-if="vm.event.data[\'@error\'].code"> <th>Code</th> <td><span truncate>{{::vm.event.data[\'@error\'].code}}</span></td> </tr> <tr ng-if="vm.event.data[\'@submission_method\']"> <th>Submission Method</th> <td><span truncate>{{::vm.event.data[\'@submission_method\']}}</span></td> </tr> </table> <h3>Stack Trace</h3> <stack-trace exception="vm.event.data[\'@error\']"></stack-trace> <extended-data-item can-promote="false" title="\'Additional Data\'" data="vm.event.data[\'@error\'].data[\'@ext\']"></extended-data-item> <div ng-if="vm.event.data[\'@error\'].modules.length > 0"> <h4>Loaded Modules</h4> <table class="table table-striped table-bordered table-fixed b-t"> <thead> <tr> <th>Name</th> <th class="version">Version</th> </tr> </thead> <tbody> <tr ng-repeat="module in vm.event.data[\'@error\'].modules"> <td><span truncate>{{::module.name}}</span></td> <td>{{::module.version}}</td> </tr> </tbody> </table> </div> '),$templateCache.put("app/event/tabs/extended-data.tpl.html",'<h3 class="visible-print">Extended Data</h3> <table class="table table-striped table-bordered table-fixed table-key-value b-t"> <tr> <th>Occurred On</th> <td>{{::vm.event.date | date: \'medium\'}} (<timeago date="vm.event.date"></timeago>)</td> </tr> </table> <extended-data-item title="item.title" data="item.data" promote-tab="vm.promoteTab(tabName)" demote-tab="vm.demoteTab(tabName)" ng-repeat="item in tab.data | orderBy: \'title\'"></extended-data-item> '),$templateCache.put("app/event/tabs/overview.tpl.html",'<table class="table table-striped table-bordered table-fixed table-key-value b-t"> <tr refresh-on="PersistentEventChanged" refresh-if="vm.canRefresh(data)" refresh-action="vm.getEvent()" refresh-throttle="10000"> <th>Occurred On</th> <td>{{::vm.event.date | date: \'medium\'}} (<timeago date="vm.event.date"></timeago>)</td> </tr> <tr ng-if="vm.isSessionStart"> <th>Duration</th> <td> <span ng-if="!vm.event.data.sessionend" class="glyphicon glyphicon-one-fine-dot glyphicon-green" title="Online"></span> <abbr title="{{vm.getDuration()}} seconds"><duration value="vm.getDuration()"></duration></abbr> <span ng-if="vm.event.data.sessionend"> (ended <timeago date="vm.event.data.sessionend"></timeago>) </span> </td> </tr> <tr> <th>Project</th> <td><a ui-sref="app.project-dashboard({ projectId: vm.project.id })">{{vm.project.name}}</a></td> </tr> <tr ng-if="vm.event.reference_id"> <th>Reference</th> <td>{{vm.event.reference_id}}</td> </tr> <tr ng-repeat="reference in vm.references | orderBy: \'name\'"> <th>{{reference.name}}</th> <td><a ui-sref="app.event-reference({ referenceId: reference.id })">{{reference.id}}</a></td> </tr> <tr ng-if="vm.level"> <th>Level</th> <td><span class="label label-default" ng-class="{ \'label-success\': vm.isLevelSuccess, \'label-info\': vm.isLevelInfo, \'label-warning\': vm.isLevelWarning, \'label-danger\': vm.isLevelError }">{{::vm.level}}</span></td> </tr> <tr ng-if="vm.event.type !== \'error\'"> <th>Event Type</th> <td><span truncate>{{::vm.event.type}}</span></td> </tr> <tr class="hidden-print" ng-if="vm.hasError"> <th>Error Type</th> <td><span truncate>{{::vm.errorType}}</span></td> </tr> <tr ng-if="vm.event.source"> <th>Source</th> <td><span truncate lines="2">{{::vm.event.source}}</span></td> </tr> <tr ng-if="!vm.isSessionStart && vm.event.value"> <th>Value</th> <td>{{::vm.event.value}}</td> </tr> <tr class="hidden-print" ng-if="vm.event.message || vm.getMessage()"> <th>Message</th> <td><span truncate lines="10">{{::vm.event.message || vm.message}}</span></td> </tr> <tr ng-if="vm.version"> <th>Version</th> <td>{{::vm.version}}</td> </tr> <tr ng-if="vm.location"> <th>Geo</th> <td><span truncate>{{::vm.location}}</span></td> </tr> <tr ng-if="vm.event.tags.length > 0"> <th>Tags</th> <td><span class="label label-info" ng-repeat="tag in vm.event.tags track by tag">{{tag}}</span></td> </tr> <tr class="hidden-print" ng-if="vm.requestUrl"> <th>URL</th> <td><a ng-href="{{::vm.requestUrl}}" target="_blank" truncate>{{::vm.requestUrl}}</a></td> </tr> </table> <div ng-if="vm.userEmail || vm.userDescription || vm.userIdentity || vm.userEmail"> <h4>User Info</h4> <table class="table table-striped table-bordered table-fixed table-key-value b-t"> <tr ng-if="vm.userEmail"> <th>User Email</th> <td><a ng-href="mailto:{{::vm.userEmail}}" truncate>{{::vm.userEmail}}</a> </td> </tr> <tr ng-if="vm.userIdentity"> <th>User Identity</th> <td><span truncate>{{::vm.userIdentity}}</span></td> </tr> <tr ng-if="vm.userName"> <th>User Name</th> <td><span truncate>{{::vm.userName}}</span></td> </tr> <tr ng-if="vm.userDescription"> <th>User Description</th> <td><span truncate lines="2">{{::vm.userDescription}}</span></td> </tr> </table> </div> <div class="hidden-print" ng-if="vm.hasError"> <h4>Stack Trace</h4> <stack-trace class="stack-trace-mini" exception="vm.event.data[\'@error\']" ng-if="vm.event.data[\'@error\']"></stack-trace> <simple-stack-trace class="stack-trace-mini" exception="vm.event.data[\'@simple_error\']" ng-if="vm.event.data[\'@simple_error\']"></simple-stack-trace> </div> '),$templateCache.put("app/event/tabs/promoted.tpl.html",'<h3 class="visible-print">{{::tab.title | toSpacedWords}}</h3> <table class="table table-striped table-bordered table-fixed table-key-value b-t"> <tr> <th>Occurred On</th> <td>{{::vm.event.date | date: \'medium\'}} (<timeago date="vm.event.date"></timeago>)</td> </tr> </table> <extended-data-item title="tab.title" data="tab.data" demote-tab="vm.demoteTab(tabName)" is-promoted="true"></extended-data-item> '),$templateCache.put("app/event/tabs/request.tpl.html",'<h3 class="visible-print">Request</h3> <table class="table table-striped table-bordered table-fixed table-key-value b-t"> <tr> <th>Occurred On</th> <td>{{::vm.event.date | date: \'medium\'}} (<timeago date="vm.event.date"></timeago>)</td> </tr> <tr ng-if="vm.request.http_method"> <th>HTTP Method</th> <td>{{::vm.request.http_method}}</td> </tr> <tr ng-if="vm.requestUrl"> <th>URL</th> <td><a ng-href="{{::vm.requestUrl}}" target="_blank" truncate>{{::vm.requestUrl}}</a></td> </tr> <tr> <th>Referrer</th> <td> <span ng-if="vm.request.referrer"> <a ng-href="{{::vm.request.referrer}}" target="_blank" truncate>{{::vm.request.referrer}}</a> </span> <em ng-if="!vm.request.referrer">None</em> </td> </tr> <tr ng-if="vm.request.client_ip_address"> <th>Client IP</th> <td>{{::vm.request.client_ip_address}}</td> </tr> <tr ng-if="vm.request.user_agent"> <th>User Agent</th> <td><span truncate lines="2">{{::vm.request.user_agent}}</span></td> </tr> <tr class="hidden-print" ng-if="vm.request.data[\'@device\']"> <th>Device</th> <td>{{::vm.request.data[\'@device\']}}</td> </tr> <tr class="hidden-print" ng-if="vm.request.data[\'@browser\']"> <th>Browser</th> <td>{{::vm.request.data[\'@browser\']}} <abbr ng-if="vm.request.data[\'@browser_major_version\']" title="{{::vm.request.data[\'@browser_version\']}}">{{::vm.request.data[\'@browser_major_version\']}}</abbr></td> </tr> <tr class="hidden-print" ng-if="vm.request.data[\'@os\']"> <th>Browser OS</th> <td>{{::vm.request.data[\'@os\']}} <abbr ng-if="vm.request.data[\'@os_major_version\']" title="{{::vm.request.data[\'@os_version\']}}">{{::vm.request.data[\'@os_major_version\']}}</abbr></td> </tr> </table> <extended-data-item can-promote="false" title="\'Post Data\'" data="vm.request.post_data"></extended-data-item> <div ng-if="vm.hasCookies"> <h4>Cookie Values</h4> <table class="table table-striped table-bordered table-fixed table-key-value b-t"> <thead> <tr> <th>Name</th> <th>Value</th> </tr> </thead> <tbody> <tr ng-repeat="(key, value) in vm.request.cookies track by key"> <td>{{::key}}</td> <td><span truncate lines="3">{{::value}}</span></td> </tr> </tbody> </table> </div> <extended-data-item can-promote="false" title="\'Additional Data\'" data="vm.request.data" excluded-keys="vm.excludedAdditionalData"></extended-data-item> '),$templateCache.put("app/event/tabs/session.tpl.html",'<div class="hidden-print"> <div ng-if="!vm.project.has_premium_features"> <div class="alert alert-danger alert-banner m-b-none"> <h4><a ng-click="appVm.changePlan(vm.project.organization_id)">{{vm.project.organization_name}}</a> is attempting to use a premium feature.</h4> <p><a ng-click="appVm.changePlan(vm.project.organization_id)">Upgrade now</a> to enable sessions and other premium features!</p> </div> <br> </div> <table class="table table-striped table-bordered table-fixed table-key-value b-t"> <tr> <th>Occurred On</th> <td>{{::vm.event.date | date: \'medium\'}} (<timeago date="vm.event.date"></timeago>)</td> </tr> <tr ng-if="vm.isSessionStart"> <th>Duration</th> <td> <span ng-if="!vm.event.data.sessionend" class="glyphicon glyphicon-one-fine-dot glyphicon-green" title="Online"></span> <abbr title="{{vm.getDuration()}} seconds"><duration value="vm.getDuration()"></duration></abbr> <span ng-if="vm.event.data.sessionend"> (ended <timeago date="vm.event.data.sessionend"></timeago>) </span> </td> </tr> </table> <h3>Session Events</h3> <events settings="vm.sessionEvents"></events> </div> '),$templateCache.put("app/event/tabs/simple-error.tpl.html",'<h3 class="visible-print">Exception</h3> <table class="table table-striped table-bordered table-fixed table-key-value b-t"> <tr> <th>Occurred On</th> <td>{{::vm.event.date | date: \'medium\'}} (<timeago date="vm.event.date"></timeago>)</td> </tr> <tr> <th>Error Type</th> <td><span truncate>{{::vm.errorType}}</span></td> </tr> <tr> <th>Message</th> <td><span truncate lines="4">{{::vm.message}}</span></td> </tr> <tr ng-if="vm.event.data[\'@submission_method\']"> <th>Submission Method</th> <td><span truncate>{{::vm.event.data[\'@submission_method\']}}</span></td> </tr> </table> <h3>Stack Trace</h3> <simple-stack-trace exception="vm.event.data[\'@simple_error\']"></simple-stack-trace> <extended-data-item can-promote="false" title="\'Additional Data\'" data="vm.event.data[\'@error\'].data"></extended-data-item> '),$templateCache.put("app/frequent.tpl.html",'<organization-notifications></organization-notifications> <div class="hbox hbox-auto-xs hbox-auto-sm"> <div class="col"> <div class="wrapper-md"> <div class="panel panel-default"> <div class="panel-heading"><i class="fa fa-signal"></i> {{::\'Most Frequent\' | translate}}</div> <stacks settings="vm.mostFrequent"></stacks> </div> </div> </div> </div> '),$templateCache.put("app/new.tpl.html",'<organization-notifications></organization-notifications> <div class="hbox hbox-auto-xs hbox-auto-sm"> <div class="col"> <div class="wrapper-md"> <div class="panel panel-default"> <div class="panel-heading"><i class="fa fa-asterisk"></i> {{::\'Newest\' | translate}}</div> <stacks settings="vm.newest"></stacks> </div> </div> </div> </div> '),$templateCache.put("app/not-found.tpl.html",'<div class="container w-auto-xs"> <div class="text-center"> <a href="https://exceptionless.com"> <img src="/img/exceptionless-350.png" alt="logo"> </a> </div> <div class="hbox hbox-auto-xs hbox-auto-sm"> <div class="col"> <div class="wrapper-md"> <div class="panel panel-default"> <div class="panel-heading text-center"><strong>Page Not Found</strong></div> <div class="panel-body"> We\'re sorry but the page was not found on this site. </div> </div> </div> </div> </div> </div> '),$templateCache.put("app/organization/list/add-organization-dialog.tpl.html",'<form name="vm.addOrganizationForm" role="form" class="form-validation"> <div class="modal-header dialog-header-confirm"> <button type="button" role="button" class="close" ng-click="vm.cancel()">&times;</button> <h4 class="modal-title">New Organization</h4> </div> <div class="modal-body"> <div class="form-group"> <label for="name">Organization Name</label> <div ng-class="{\'input-group\': !!vm.addOrganizationForm.$pending }"> <input id="name" name="name" type="text" class="form-control input-lg" placeholder="Organization Name" ng-model="vm.data.name" ng-model-options="{ debounce: 500 }" organization-name-available-validator ng-required="true" autofocus> <span class="input-group-addon" ng-if="vm.addOrganizationForm.$pending"> <i class="fa fa-fw fa-spinner fa-spin"></i> </span> </div> <div class="error" ng-messages="vm.addOrganizationForm.name.$error" ng-if="vm.addOrganizationForm.$submitted || vm.addOrganizationForm.name.$touched"> <small ng-message="required">Organization Name is required.</small> <small ng-message="unique">A organizations with this name already exists.</small> </div> </div> </div> <div class="modal-footer"> <button type="button" role="button" class="btn btn-default" ng-click="vm.cancel()">Cancel</button> <input type="submit" role="button" class="btn btn-primary" ng-click="vm.save()" value="Save"> </div> </form> '),$templateCache.put("app/organization/list/list.tpl.html",'<div class="hbox hbox-auto-xs hbox-auto-sm" refresh-on="OrganizationChanged ProjectChanged" refresh-action="vm.get(vm.currentOptions)" refresh-throttle="10000"> <div class="col" refresh-on=" PlanChanged PersistentEventChanged" refresh-action="vm.get(vm.currentOptions, false)" refresh-throttle="10000"> <div class="wrapper-md"> <div class="panel panel-default"> <div class="panel-heading"><i class="fa fa-group"></i> My Organizations</div> <div class="table-responsive"> <table class="table table-striped table-bordered table-fixed b-t"> <thead> <tr> <th>Name</th> <th>Plan</th> <th class="number hidden-xs"><abbr title="Total number of projects">Projects</abbr></th> <th class="number hidden-xs"><abbr title="Total number of stacks">Stacks</abbr></th> <th class="number hidden-xs"><abbr title="Total number of events within the retention period">Events</abbr></th> <th class="action">Actions</th> </tr> </thead> <tbody> <tr class="row-clickable" ng-repeat="organization in vm.organizations | orderBy: \'name\' track by organization.id"> <td ng-click="vm.open(organization.id, $event)">{{organization.name}}</td> <td ng-click="vm.open(organization.id, $event)">{{organization.plan_name}}</td> <td ng-click="vm.open(organization.id, $event)" class="number hidden-xs">{{organization.project_count | number:0}}</td> <td ng-click="vm.open(organization.id, $event)" class="number hidden-xs">{{organization.stack_count | number:0}}</td> <td ng-click="vm.open(organization.id, $event)" class="number hidden-xs">{{organization.event_count | number:0}}</td> <td> <div class="btn-group"> <button type="button" role="button" class="btn btn-sm btn-primary dropdown-toggle" data-toggle="dropdown"> <i class="fa fa-fw fa-edit"></i> <span class="caret"></span> </button> <ul class="dropdown-menu dropdown-menu-right" role="menu"> <li><a ui-sref="app.organization.manage({ id: organization.id })"><i class="fa fa-fw fa-edit"></i> Edit</a></li> <li ng-if="vm.canChangePlan"><a ng-click="vm.changePlan(organization.id)"><i class="fa fa-credit-card fa-fw"></i> Change Plan</a></li> <li><a ui-sref="app.organization.manage({ id: organization.id, tab: \'billing\' })"><i class="fa fa-fw fa-file"></i> View Invoices</a></li> <li><a ng-click="vm.leave(organization, appVm.user)"><i class="fa fa-fw fa-sign-out"></i> Leave Organization</a></li> <li><a ng-click="vm.remove(organization)"><i class="fa fa-fw fa-times"></i> Delete</a></li> </ul> </div> </td> </tr> <tr ng-if="vm.organizations.length === 0 || vm.loading"> <td colspan="6"> <strong ng-if="vm.loading">Loading...</strong> <strong ng-if="!vm.loading">No organizations were found{{vm.hasFilter ? \' with the current filter\': \'\'}}.</strong> </td> </tr> </tbody> </table> <div class="table-footer" ng-if="vm.previous || vm.next"> <div class="row"> <div class="col-sm-8 col-xs-8 text-center" ng-if="vm.pageSummary"> <small class="text-muted inline m-t-xs">{{vm.pageSummary}}</small> </div> <div class="col-sm-4 col-xs-4 text-right"> <ul class="pagination pagination-sm m-t-none m-b-none"> <li ng-show="vm.currentOptions.page && vm.currentOptions.page > 2"><a ng-click="vm.get()"><i class="fa fa-fast-backward"></i></a></li> <li ng-class="{\'disabled\': !vm.previous}"><a ng-disabled="!vm.previous" ng-click="!vm.previous || vm.previousPage()"><i class="fa fa-chevron-left"></i></a></li> <li ng-class="{\'disabled\': !vm.next}"><a ng-disabled="!vm.next" ng-click="!vm.next || vm.nextPage()"><i class="fa fa-chevron-right"></i></a></li> </ul> </div> </div> </div> </div> <footer class="panel-footer"> <div class="pull-right"> <a ui-sref="app.dashboard" class="btn btn-default" role="button">Go To Dashboard</a> </div> <button type="button" role="button" ng-click="vm.add()" class="btn btn-primary">New Organization</button> </footer> </div> </div> </div> </div> '),$templateCache.put("app/organization/manage/add-user-dialog.tpl.html",'<form name="addUserForm" role="form" class="form-validation"> <div class="modal-header dialog-header-confirm"> <button type="button" role="button" class="close" ng-click="vm.cancel()">&times;</button> <h4 class="modal-title"><i class="fa fa-user-plus fa-fw"></i> Invite User</h4> </div> <div class="modal-body"> <div class="form-group"> <label for="email">Email Address</label> <input id="email" name="email" type="email" class="form-control input-lg" placeholder="Email Address" x-autocompletetype="email" autocorrect="off" spellcheck="false" ng-model="vm.data.email" ng-required="true" autofocus> <div class="error" ng-messages="addUserForm.email.$error" ng-if="addUserForm.$submitted || addUserForm.email.$touched"> <small ng-message="required">Email Address is required.</small> <small ng-message="email">Email Address is required.</small> </div> </div> </div> <div class="modal-footer"> <button type="button" role="button" class="btn btn-default" ng-click="vm.cancel()">Cancel</button> <input type="submit" role="button" class="btn btn-primary" ng-click="vm.save(addUserForm.$valid)" value="Invite User"> </div> </form> '),$templateCache.put("app/organization/manage/invoices-directive.tpl.html",'<div class="table-responsive"> <table class="table table-striped table-bordered table-fixed b-t" refresh-on="OrganizationChanged PlanChanged" refresh-action="vm.get(vm.currentOptions, false)" refresh-throttle="10000"> <thead> <tr> <th>Payment Number</th> <th>Date</th> <th class="number">Status</th> <th class="action">Actions</th> </tr> </thead> <tbody> <tr ng-repeat="invoice in vm.invoices track by invoice.id"> <td class="row-clickable" ng-click="vm.open(invoice.id)">{{invoice.id}}</td> <td class="row-clickable" ng-click="vm.open(invoice.id)">{{invoice.date | date: \'medium\'}}</td> <td class="row-clickable" ng-click="vm.open(invoice.id)">{{invoice.paid ? \'Paid\' : \'Unpaid\'}}</td> <td> <div class="btn-group"> <button type="button" role="button" class="btn btn-sm btn-primary dropdown-toggle" data-toggle="dropdown"> <i class="fa fa-fw fa-edit"></i> <span class="caret"></span> </button> <ul class="dropdown-menu dropdown-menu-right" role="menu"> <li><a ng-click="vm.open(invoice.id)"><i class="fa fa-file"></i> View Payment</a></li> <li ng-if="vm.hasAdminRole(appVm.user)"> <a ng-href="https://manage.stripe.com/invoices/in_{{::invoice.id}}" target="_blank"><i class="fa fa-credit-card"></i> View Stripe Invoice</a> </li> </ul> </div> </td> </tr> <tr ng-if="vm.invoices.length === 0"> <td colspan="4"> <strong>No invoices were found.</strong> </td> </tr> </tbody> </table> <div class="table-footer" ng-if="vm.previous || vm.next"> <div class="row"> <div class="col-sm-8 col-xs-8 text-center" ng-if="vm.pageSummary"> <small class="text-muted inline m-t-xs">{{vm.pageSummary}}</small> </div> <div class="col-sm-4 col-xs-4 text-right"> <ul class="pagination pagination-sm m-t-none m-b-none"> <li ng-show="vm.currentOptions.page && vm.currentOptions.page > 2"><a ng-click="vm.get()"><i class="fa fa-fast-backward"></i></a></li> <li ng-class="{\'disabled\': !vm.previous}"><a ng-disabled="!vm.previous" ng-click="!vm.previous || vm.previousPage()"><i class="fa fa-chevron-left"></i></a></li> <li ng-class="{\'disabled\': !vm.next}"><a ng-disabled="!vm.next" ng-click="!vm.next || vm.nextPage()"><i class="fa fa-chevron-right"></i></a></li> </ul> </div> </div> </div> </div> '),$templateCache.put("app/organization/manage/manage.tpl.html",'<organization-notifications organization-id="vm.organization.id"></organization-notifications> <div class="hbox hbox-auto-xs hbox-auto-sm" refresh-on="OrganizationChanged" refresh-action="vm.get(data)" refresh-debounce="5000"> <div class="col"> <div class="wrapper-md"> <div class="panel panel-default"> <div class="panel-heading"><i class="fa fa-th-list"></i> Manage {{ vm.organization.name ? \'Organization "\' + vm.organization.name + \'"\' : \'Organization\'}}</div> <div class="panel-body m-b-n"> <uib-tabset class="tab-container" active="vm.activeTabIndex"> <uib-tab heading="{{::\'General\' | translate}}"> <form name="vm.organizationForm" role="form" class="form-validation"> <div class="form-group m-b-none"> <label for="name">Organization Name</label> <div ng-class="{\'input-group\': !!vm.organizationForm.$pending }"> <input id="name" name="name" type="text" class="form-control" placeholder="Organization Name" ng-model="vm.organization.name" ng-model-options="{ debounce: 500 }" ng-change="vm.save(vm.organizationForm.$valid)" organization-name-available-validator ng-required="true" autofocus> <span class="input-group-addon" ng-if="vm.organizationForm.$pending"> <i class="fa fa-fw fa-spinner fa-spin"></i> </span> </div> <div class="error" ng-messages="vm.organizationForm.name.$error" ng-if="vm.organizationForm.$submitted || vm.organizationForm.name.$touched"> <small ng-message="required">Organization Name is required.</small> <small ng-message="unique">A organizations with this name already exists.</small> </div> </div> </form> <div ng-show="vm.hasMonthlyUsage"> <h4 style="margin-top: 20px">Monthly Usage</h4> <p> You are currently on the <a ng-if="vm.canChangePlan" ng-click="vm.changePlan()"><strong>{{vm.organization.plan_name}}</strong> plan</a> with <b ng-class="{\'text-warning\': vm.remainingEventLimit === 0}">{{vm.remainingEventLimit | number}}</b> events remaining until this billing period\'s limit is reset on <b>{{vm.next_billing_date | date: \'longDate\'}}</b> (<timeago date="vm.next_billing_date"></timeago>). <a ng-if="vm.canChangePlan" ng-click="vm.changePlan()">Click here to change your plan or billing information.</a> </p> <rickshaw options="vm.chart.options" features="vm.chart.features"></rickshaw> <br class="clearfix"> <h6><em>The usage data above is refreshed periodically and may not reflect current totals.</em></h6> </div> </uib-tab> <uib-tab heading="Projects"> <projects settings="vm.projects"></projects> <a ui-sref="app.project.add" class="btn btn-primary" role="button">{{::\'Add New Project\' | translate}}</a> </uib-tab> <uib-tab heading="Users"> <users settings="vm.users"></users> <button type="button" role="button" ng-click="vm.addUser()" class="btn btn-primary">Invite User</button> </uib-tab> <uib-tab heading="Billing"> <p>You are currently on the <strong>{{vm.organization.plan_name}}</strong> plan. <a ng-if="vm.canChangePlan" ng-click="vm.changePlan()">Change your plan or billing information.</a></p> <invoices settings="vm.invoices"></invoices> </uib-tab> </uib-tabset> </div> <footer class="panel-footer"> <div class="pull-right"> <a ui-sref="app.organization-dashboard({ organizationId: vm.organization.id })" class="btn btn-default" role="button">Go To Dashboard</a> </div> <div class="btn-group"> <button type="button" role="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"> <i class="fa fa-fw fa-remove"></i> <span class="caret"></span> </button> <ul class="dropdown-menu" role="menu"> <li><a ng-click="vm.leaveOrganization(appVm.user)" role="button">Leave Organization</a></li> <li><a ng-click="vm.removeOrganization()" role="button">Delete Organization</a></li> </ul> </div> </footer> </div> </div> </div> </div> '),$templateCache.put("app/payment/payment.tpl.html",'<div> <rate-limit></rate-limit> <div class="container invoice"> <div class="row"> <div class="col-sm-5"> <img src="/img/exceptionless.png" alt="logo"> <address> <strong>Exceptionless</strong><br> 5250 Hwy 78, Suite 750-324<br> Sachse, TX 75048<br> </address> </div> <div class="col-sm-7"> <table class="table table-bordered bg-white"> <tbody> <tr> <th>Organization</th> <td>{{vm.invoice.organization_name}}</td> </tr> <tr> <th>Payment #</th> <td>{{vm.invoice.id}}</td> </tr> <tr> <th>Date</th> <td>{{vm.invoice.date | date}}</td> </tr> <tr> <th>Status</th> <td>{{vm.invoice.paid ? \'Paid\' : \'Unpaid\'}}</td> </tr> </tbody> </table> </div> </div> <div class="row"> <div class="col-xs-12 hbox hbox-auto-xs hbox-auto-sm"> <div class="panel panel-default"> <div class="panel-heading"> <i class="fa fa-file"></i> {{vm.invoice.paid ? "Receipt" : "Payment"}}</div> <div class="table-responsive"> <table class="table table-striped table-bordered table-fixed b-t invoice"> <thead> <tr> <th>Description</th> <th class="date">Date</th> <th class="amount"><div class="text-right">Amount</div></th> </tr> </thead> <tbody> <tr ng-repeat="line in vm.invoice.items"> <td>{{line.description}}</td> <td>{{line.date}}</td> <td><div class="text-right"><strong>{{line.amount | currency}}</strong></div></td> </tr> <tr> <td>&nbsp;</td> <td><strong>Total</strong></td> <td><div class="text-right"><strong>{{vm.invoice.total | currency}}</strong></div></td> </tr> </tbody> </table> </div> </div> </div> </div> <div class="row"> <div class="col-xs-6"> <strong>Email:</strong> <a href="mailto:team@exceptionless.com">sales@exceptionless.com</a> </div> <div class="col-xs-6"> <strong>Website:</strong> <a href="https://exceptionless.com">https://exceptionless.com</a> </div> </div> </div> </div> '),$templateCache.put("app/project/add.tpl.html",'<div class="hbox hbox-auto-xs hbox-auto-sm"> <div class="col" refresh-on="OrganizationChanged" refresh-action="vm.getOrganizations()" refresh-throttle="10000"> <div class="wrapper-md"> <div class="panel panel-default"> <div class="panel-heading"><i class="fa fa-asterisk"></i> Project Information</div> <div class="panel-body"> <form name="vm.addForm" role="form" class="form-validation"> <div class="form-group" ng-if="vm.hasOrganizations()"> <label for="organization">Organization Name</label> <select id="organization" class="form-control" ng-model="vm.currentOrganization" ng-options="organization.name for organization in vm.organizations track by organization.id"></select> </div> <div class="form-group" ng-if="vm.canCreateOrganization()"> <div ng-class="{\'input-group\': !!vm.addForm.$pending }"> <input name="organization_name" type="text" class="form-control" placeholder="New Organization Name" ng-model="vm.organization_name" ng-model-options="{ debounce: 500 }" organization-name-available-validator ng-required="vm.canCreateOrganization()" autofocus> <span class="input-group-addon" ng-if="vm.addForm.$pending"> <i class="fa fa-fw fa-spinner fa-spin"></i> </span> </div> <div class="error" ng-messages="vm.addForm.organization_name.$error" ng-if="vm.addForm.$submitted || vm.addForm.organization_name.$touched"> <small ng-message="required">Organization Name is required.</small> <small ng-message="unique">A organizations with this name already exists.</small> </div> </div> <div class="form-group"> <label for="project_name">Project Name</label> <div ng-class="{\'input-group\': !!vm.addForm.$pending }"> <input id="project_name" name="project_name" type="text" class="form-control" placeholder="New Project Name" ng-model="vm.project_name" ng-model-options="{ debounce: 500 }" project-name-available-validator organization-id="vm.currentOrganization.id" ng-required="true" autofocus> <span class="input-group-addon" ng-if="vm.addForm.$pending"> <i class="fa fa-fw fa-spinner fa-spin"></i> </span> </div> <div class="error" ng-messages="vm.addForm.project_name.$error" ng-if="vm.addForm.$submitted || vm.addForm.project_name.$touched"> <small ng-message="required">Project Name is required.</small> <small ng-message="unique">A project with this name already exists.</small> </div> </div> </form> </div> <footer class="panel-footer"> <div class="pull-right"> <a ui-sref="app.dashboard" ng-if="vm.hasOrganizations()" class="btn btn-default" role="button">Go To Dashboard</a> </div> <div class="clearfix"> <input ng-click="vm.add()" type="submit" role="button" class="btn btn-primary" value="Add Project"> </div> </footer> </div> </div> </div> </div> '),$templateCache.put("app/project/configure.tpl.html",'<organization-notifications organization-id="vm.project.organization_id" ignore-free="true" ignore-configure-projects="true"></organization-notifications> <div class="hbox hbox-auto-xs hbox-auto-sm" refresh-on="PersistentEventChanged" refresh-if="vm.canRedirect(data)" refresh-action="vm.navigateToDashboard()"> <div class="col"> <div class="wrapper-md"> <div class="panel panel-default"> <div class="panel-heading"><i class="fa fa-cloud-download"></i> Download & Configure {{ vm.project.name ? \'Project "\' + vm.project.name + \'"\' : \'Project\'}} Client</div> <div class="panel-body m-b-n"> <p>The Exceptionless client can be integrated into your project in just a few easy steps.</p> <ol> <li> <p>Select your project type:</p> <select class="form-control" ng-model="vm.currentProjectType" ng-options="projectType.name group by projectType.platform for projectType in vm.projectTypes"> <option value="" ng-if="!vm.currentProjectType.key">Please select a project type</option> </select> </li> <li style="margin-top: 15px" ng-if="vm.currentProjectType.key"> <div ng-if="vm.isDotNet()"> <p>Add the Exceptionless <a href="http://nuget.org" target="_blank">NuGet</a> package to your Visual Studio project by running this command in the <a href="http://docs.nuget.org/docs/start-here/using-the-package-manager-console">Package Manager Console</a>:</p> <pre><a ng-href="http://nuget.org/packages/{{vm.currentProjectType.key}}" target="_blank">Install-Package {{vm.currentProjectType.key}}</a></pre> <p><em>A Strong-Named <code>{{vm.currentProjectType.key}}.Signed</code> package is also available on NuGet.</em></p> </div> <div ng-if="vm.isJavaScript()"> <div ng-if="!vm.isNode()"> <p> Install Exceptionless using <a href="http://bower.io" target="_blank">Bower</a>: <pre><a href="http://bower.io/search/?q=exceptionless" target="_blank">bower install exceptionless</a></pre> If you wish to install manually or from a CDN please view the <a href="https://github.com/exceptionless/Exceptionless.JavaScript" target="_blank">readme</a>. </p> </div> <div ng-if="vm.isNode()"> <p>Install Exceptionless using the <a href="https://www.npmjs.com" target="_blank">Node Package Manager</a>: <pre><a href="https://www.npmjs.com/package/exceptionless" target="_blank">npm install exceptionless --save</a></pre></p> </div> </div> </li> <li ng-if="vm.isJavaScript() && !vm.isNode()" style="margin-top: 15px"> <p>Add the script to your HTML page: <pre>&ltscript src="bower_components/exceptionless/dist/exceptionless.min.js"&gt&lt/script&gt</pre> </p></li> <li ng-if="vm.isJavaScript()" style="margin-top: 15px"> <div ng-if="!vm.isNode()"> <p>Configure the ExceptionlessClient with your Exceptionless API key: <pre>var client = exceptionless.ExceptionlessClient.default;<br>client.config.apiKey = \'{{::vm.apiKey}}\';</pre></p> </div> <div ng-if="vm.isNode()"> <p>Configure the ExceptionlessClient with your Exceptionless API key: <pre>var client = require(\'exceptionless\').ExceptionlessClient.default;<br>client.config.apiKey = \'{{::vm.apiKey}}\';</pre></p> </div> </li> <li ng-if="vm.isDotNet()" style="margin-top: 15px"> <div ng-if="vm.currentProjectType.key !== \'Exceptionless\' && vm.currentProjectType.key !== \'Exceptionless.AspNetCore\'"> <p>Update the <code>&lt;exceptionless apiKey="API_KEY_HERE" /&gt;</code> section located in the project\'s {{vm.currentProjectType.config}} with your Exceptionless API key:</p> <div class="input-group"> <input class="form-control api-key" type="text" ng-model="vm.apiKey" autofocus> <a class="input-group-addon" title="Copy to Clipboard" clipboard text="vm.apiKey" on-copied="vm.copied()" on-error="vm.onCopyError()"><i class="fa fa-copy"></i></a> </div> </div> <div ng-if="vm.currentProjectType.key === \'Exceptionless\'"> <p>Import the <code>Exceptionless</code> namespace and call the <code>ExceptionlessClient.Default.Startup("{{vm.apiKey}}")</code> method with your api key during the startup of your app.</p> <p>If you are targeting Portable Class Libraries you may need to wire up to any unhandled exception events specific to your project type to start reporting them! Please see the <a target="_blank" href="https://github.com/exceptionless/Exceptionless.Net/wiki/Configuration#exceptionless-portable-class-library-pcl-configuration">Exceptionless docs</a> for more information.</p> </div> <div ng-if="vm.currentProjectType.key === \'Exceptionless.AspNetCore\'"> <p>Import the <code>Exceptionless</code> namespace and call the <code>app.UseExceptionless("{{vm.apiKey}}")</code> method with your api key during the startup of your app.</p> </div> </li> <li style="margin-top: 15px" ng-if="vm.currentProjectType.key === \'Exceptionless.Nancy\'"> <p>Import the <code>Exceptionless</code> namespace and call the <code>Exceptionless.ExceptionlessClient.Default.RegisterNancy(pipelines)</code> method with an instance of Nancy.Bootstrapper.IPipelines inside of your NancyBootstrapper\'s ApplicationStartup method.</p> </li> <li style="margin-top: 15px" ng-if="vm.currentProjectType.key === \'Exceptionless.Windows\' || vm.currentProjectType.key === \'Exceptionless.Wpf\'"> <p>Import the <code>Exceptionless</code> namespace and call the <code>ExceptionlessClient.Default.Register()</code> method during the startup of your app.</p> </li> <li style="margin-top: 15px" ng-if="vm.currentProjectType.key === \'Exceptionless.WebApi\'"> <p>Import the <code>Exceptionless</code> namespace and call the <code>ExceptionlessClient.Default.RegisterWebApi(config)</code> method with an instance of HttpConfiguration during the startup of your app.</p> <p>If you are hosting Web API inside of ASP.NET, you would register Exceptionless like: <code>Exceptionless.ExceptionlessClient.Default.RegisterWebApi(GlobalConfiguration.Configuration)</code> </p> </li> </ol> <p ng-if="vm.currentProjectType.key"><strong>That\'s it!</strong> Your project should now automatically be sending all unhandled exceptions to Exceptionless! <span ng-if="vm.isDotNet()">You can also <a href="https://github.com/exceptionless/Exceptionless.Net/wiki/Sending-Events" target="_blank">send handled exceptions to Exceptionless</a> using <code>ex.ToExceptionless().Submit()</code>.</span> <span ng-if="vm.isJavaScript()">You can also <a href="https://github.com/exceptionless/Exceptionless.JavaScript/wiki/Sending-Events" target="_blank">send handled exceptions to Exceptionless</a> using <code>client.submitException(ex);</code>.</span> </p> <div class="alert alert-success" ng-if="vm.currentProjectType.key"> <span ng-if="vm.isDotNet()"> For more information and troubleshooting tips, view the <a target="_blank" href="https://github.com/exceptionless/Exceptionless.Net/wiki">Exceptionless docs</a>. </span> <span ng-if="vm.isJavaScript()"> For more information and platform specific integrations (E.G., angularjs, expressjs) view the <a target="_blank" href="https://github.com/exceptionless/Exceptionless.JavaScript/wiki">Exceptionless docs</a>. </span> </div> </div> <footer class="panel-footer"> <div class="pull-right"> <a ui-sref="app.project-dashboard({ projectId: vm.project.id })" class="btn btn-default" role="button">Go To Dashboard</a> </div> <a ui-sref="app.account.manage({ tab: \'notifications\', projectId: vm.project.id })" class="btn btn-primary" role="button" title="Manage Notification Settings"> <i class="fa fa-fw fa-envelope"></i> <span class="hidden-xs">Manage Notification Settings</span> </a> <a ui-sref="app.project.manage({ id: vm.project.id })" class="btn btn-primary" role="button" title="Manage Project"> <i class="fa fa-fw fa-gear"></i> <span class="hidden-xs">Manage Project</span> </a> </footer> </div> </div> </div> </div> '),$templateCache.put("app/project/list.tpl.html",'<div class="hbox hbox-auto-xs hbox-auto-sm"> <div class="col"> <div class="wrapper-md"> <div class="panel panel-default"> <div class="panel-heading"><i class="fa fa-briefcase"></i> My Projects</div> <projects settings="vm.projects"></projects> <footer class="panel-footer"> <a ui-sref="app.project.add" class="btn btn-primary" role="button">{{::\'Add New Project\' | translate}}</a> <div class="pull-right"> <a ui-sref="app.dashboard" class="btn btn-default" role="button">Go To Dashboard</a> </div> </footer> </div> </div> </div> </div> '),$templateCache.put("app/project/manage/add-configuration-dialog.tpl.html",'<form name="addConfigurationForm" role="form" class="form-validation"> <div class="modal-header dialog-header-confirm"> <button type="button" role="button" class="close" ng-click="vm.cancel()">&times;</button> <h4 class="modal-title">Please enter a configuration setting</h4> </div> <div class="modal-body"> <div class="form-group"> <label for="key">Key</label> <input id="key" name="key" type="text" class="form-control" placeholder="Configuration Key" ng-model="vm.data.key" ng-required="true" autofocus> <div class="error" ng-messages="addConfigurationForm.key.$error" ng-if="addConfigurationForm.$submitted || addConfigurationForm.key.$touched"> <small ng-message="required">Please enter a valid key.</small> </div> </div> <div class="form-group"> <label for="value">Value</label> <input id="value" name="value" type="text" class="form-control" placeholder="Configuration Value" ng-model="vm.data.value" ng-required="true"> <div class="error" ng-messages="addConfigurationForm.value.$error" ng-if="addConfigurationForm.$submitted || addConfigurationForm.value.$touched"> <small ng-message="required">Please enter a valid value.</small> </div> </div> </div> <div class="modal-footer"> <button type="button" role="button" class="btn btn-default" ng-click="vm.cancel()">Cancel</button> <input type="submit" role="button" class="btn btn-primary" ng-click="vm.save(addConfigurationForm.$valid)" value="Save"> </div> </form> '),$templateCache.put("app/project/manage/manage.tpl.html",'<organization-notifications organization-id="vm.project.organization_id"></organization-notifications> <div class="hbox hbox-auto-xs hbox-auto-sm" refresh-on="ProjectChanged" refresh-action="vm.get(data)" refresh-throttle="10000"> <div class="col" refresh-on="TokenChanged" refresh-action="vm.getTokens()" refresh-throttle="10000"> <div class="wrapper-md" refresh-on="WebHookChanged" refresh-action="vm.getWebHooks()" refresh-throttle="10000"> <div class="panel panel-default" refresh-on="OrganizationChanged" refresh-action="vm.getOrganization()" refresh-debounce="10000"> <div class="panel-heading"><i class="fa fa-th-list"></i> Manage {{ vm.project.name ? \'Project "\' + vm.project.name + \'"\' : \'Project\'}}</div> <div class="panel-body m-b-n"> <uib-tabset class="tab-container"> <uib-tab heading="{{::\'General\' | translate}}"> <div ng-include="\'app/project/manage/tabs/general.tpl.html\'"></div> </uib-tab> <uib-tab heading="API Keys"> <div ng-include="\'app/project/manage/tabs/api-keys.tpl.html\'"></div> </uib-tab> <uib-tab heading="Settings"> <div ng-include="\'app/project/manage/tabs/settings.tpl.html\'"></div> </uib-tab> <uib-tab heading="Client Configuration"> <div ng-include="\'app/project/manage/tabs/client-configuration.tpl.html\'"></div> </uib-tab> <uib-tab heading="Integrations"> <div ng-include="\'app/project/manage/tabs/integrations.tpl.html\'"></div> </uib-tab> </uib-tabset> </div> <footer class="panel-footer"> <div class="pull-right"> <a ui-sref="app.project-dashboard({ projectId: vm.project.id })" class="btn btn-default" role="button"> <span class="visible-xs" title="Go To Dashboard"><i class="fa fa-fw fa-dashboard"></i></span> <span class="hidden-xs">Go To Dashboard</span></a> </div> <a ui-sref="app.organization.manage({ id: vm.project.organization_id })" class="btn btn-primary" role="button" title="Manage Organization"> <i class="fa fa-fw fa-group"></i> </a> <a ui-sref="app.account.manage({ tab: \'notifications\', projectId: vm.project.id })" class="btn btn-primary" role="button" title="Manage Notification Settings"> <i class="fa fa-fw fa-envelope"></i> </a> <a ui-sref="app.project.configure({ id: vm.project.id })" class="btn btn-primary" role="button" title="Download & Configure Client"> <i class="fa fa-fw fa-cloud-download"></i> </a> <div class="btn-group"> <button type="button" role="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"> <i class="fa fa-fw fa-remove"></i> <span class="caret"></span> </button> <ul class="dropdown-menu" role="menu"> <li><a ng-click="vm.resetData()" role="button">Reset Project Data</a></li> <li><a ng-click="vm.removeProject()" role="button">Delete Project</a></li> </ul> </div> </footer> </div> </div> </div> </div> '),$templateCache.put("app/project/manage/tabs/api-keys.tpl.html",'<table class="table table-striped table-bordered table-fixed b-t"> <thead> <tr> <th>API Key</th> <th class="hidden-xs">Notes</th> <th class="action-lg visible-xs">Actions</th> <th class="hidden-xs action-xl">Actions</th> </tr> </thead> <tbody> <tr ng-repeat="token in vm.tokens track by token.id"> <td><div class="control-group">{{::token.id}}</div></td> <td class="hidden-xs" ng-class="{\'row-clickable\': !rowform.$visible}" ng-click="rowform.$show()"> <div editable-text="token.notes" e-name="notes" e-form="rowform" onbeforesave="vm.validateApiKeyNote(token.notes, $data)" onaftersave="vm.saveApiKeyNote(token)">{{token.notes}}</div> </td> <td> <form name="rowform" editable-form ng-show="rowform.$visible" class="form-buttons form-inline"> <button type="submit" role="button" ng-disabled="rowform.$waiting" class="btn btn-sm btn-primary"> Save </button> <button type="button" role="button" ng-disabled="rowform.$waiting" ng-click="rowform.$cancel()" class="btn btn-sm btn-default"> Cancel </button> </form> <div class="buttons" ng-show="!rowform.$visible"> <button type="button" role="button" class="btn btn-sm btn-primary" title="Copy to Clipboard" clipboard text="token.id" on-copied="vm.copied()" supported="vm.clipboardSupported" ng-show="vm.clipboardSupported"><i class="fa fa-copy"></i></button> <button type="button" role="button" class="btn btn-sm btn-default hidden-xs" ng-click="rowform.$show()">Edit</button> <button type="button" role="button" ng-click="vm.removeToken(token)" class="btn btn-sm btn-danger" title="Delete"><i class="fa fa-times"></i></button> </div> </td> </tr> <tr ng-if="vm.tokens.length === 0"> <td colspan="2" class="text-warning visible-xs">This project does not have an API Key.</td> <td colspan="3" class="text-warning hidden-xs">This project does not have an API Key.</td> </tr> </tbody> </table> <button type="button" role="button" ng-click="vm.addToken()" class="btn btn-primary">New API Key</button> '),$templateCache.put("app/project/manage/tabs/client-configuration.tpl.html",'<p> The <a href="https://github.com/exceptionless/Exceptionless/wiki/Project-Settings#client-configuration-values" target="_blank">configuration values</a> on this page will be sent to the Exceptionless clients in real time. This allows you to change how your app works without redeploying your app. </p> <table class="table table-striped table-bordered table-fixed b-t"> <thead> <tr> <th>Key</th> <th>Value</th> <th class="action-lg">Actions</th> </tr> </thead> <tbody> <tr ng-repeat="conf in vm.config track by conf.key"> <td> <div class="control-group">{{::conf.key}}</div> </td> <td ng-class="{\'row-clickable\': !rowform.$visible}" ng-click="rowform.$show()"> <div editable-text="conf.value" e-name="value" e-form="rowform" e-required onbeforesave="vm.validateClientConfiguration(conf.value, $data)" onaftersave="vm.saveClientConfiguration(conf)">{{conf.value}}</div> </td> <td> <form name="rowform" editable-form ng-show="rowform.$visible" class="form-buttons form-inline"> <button type="submit" role="button" ng-disabled="rowform.$waiting" class="btn btn-sm btn-primary"> Save </button> <button type="button" role="button" ng-disabled="rowform.$waiting" ng-click="rowform.$cancel()" class="btn btn-sm btn-default"> Cancel </button> </form> <div class="buttons" ng-show="!rowform.$visible"> <button type="button" role="button" class="btn btn-sm btn-default" ng-click="rowform.$show()">Edit</button> <button type="button" role="button" class="btn btn-sm btn-danger" title="Delete" ng-click="vm.removeConfig(conf)"><i class="fa fa-times"></i></button> </div> </td> </tr> <tr ng-if="vm.config.length === 0"> <td colspan="3">This project does not contain any custom configuration settings.</td> </tr> </tbody> </table> <button ng-click="vm.addConfiguration()" class="btn btn-primary">New Client Configuration</button> '),$templateCache.put("app/project/manage/tabs/general.tpl.html",'<form name="vm.projectForm" role="form" class="form-validation"> <div class="form-group"> <label for="name">Project Name</label> <div ng-class="{\'input-group\': !!vm.projectForm.$pending }"> <input id="name" name="name" type="text" class="form-control" placeholder="Project Name" ng-model="vm.project.name" ng-model-options="{ debounce: 500 }" ng-change="vm.save(vm.projectForm.$valid)" project-name-available-validator organization-id="vm.project.organization_id" ng-required="true" autofocus> <span class="input-group-addon" ng-if="vm.projectForm.$pending"> <i class="fa fa-fw fa-spinner fa-spin"></i> </span> </div> <div class="error" ng-messages="vm.projectForm.name.$error" ng-if="vm.projectForm.$submitted || vm.projectForm.name.$touched"> <small ng-message="required">Project Name is required.</small> <small ng-message="unique">A project with this name already exists.</small> </div> </div> <div class="form-group m-b-none"> <label>Organization Name</label> <input type="text" class="form-control" placeholder="Organization Name" ng-model="vm.project.organization_name" readonly> </div> <div ng-show="vm.hasMonthlyUsage"> <h4 style="margin-top: 20px">Monthly Usage</h4> <p> You are currently on the <a ng-if="vm.canChangePlan" ng-click="vm.changePlan()"><strong>{{vm.organization.plan_name}}</strong> plan</a> with <b ng-class="{\'text-warning\': vm.remainingEventLimit === 0}">{{vm.remainingEventLimit | number}}</b> events remaining until this billing period\'s limit is reset on <b>{{vm.next_billing_date | date: \'longDate\'}}</b> (<timeago date="vm.next_billing_date"></timeago>). <a ng-if="vm.canChangePlan" ng-click="vm.changePlan()">Click here to change your plan or billing information.</a> </p> <rickshaw options="vm.chart.options" features="vm.chart.features"></rickshaw> <br class="clearfix"> <h6><em>The usage data above is refreshed periodically and may not reflect current totals.</em></h6> </div> </form> '),$templateCache.put("app/project/manage/tabs/integrations.tpl.html",'<div class="alert in fade alert-success" ng-if="!vm.hasPremiumFeatures"> <a ng-click="vm.showChangePlanDialog()">Upgrade now</a> to enable integrations! </div> <div ng-if="appVm.isSlackEnabled"> <h4>Slack</h4> <div ng-if="vm.project.has_slack_integration"> <p>Choose how often you want to receive slack notifications for event occurrences in this project.</p> <div class="checkbox"> <label class="checks"> <input type="checkbox" ng-model="vm.slackNotificationSettings.send_daily_summary" ng-model-options="{ debounce: 500 }" ng-change="vm.saveSlackNotificationSettings()"> <i></i> Send daily project summary <strong>(Coming soon!)</strong> </label> </div> <div class="checkbox"> <label class="checks"> <input type="checkbox" ng-model="vm.slackNotificationSettings.report_new_errors" ng-model-options="{ debounce: 500 }" ng-change="vm.saveSlackNotificationSettings()"> <i></i> Notify me on new errors </label> </div> <div class="checkbox"> <label class="checks"> <input type="checkbox" ng-model="vm.slackNotificationSettings.report_critical_errors" ng-model-options="{ debounce: 500 }" ng-change="vm.saveSlackNotificationSettings()"> <i></i> Notify me on critical errors </label> </div> <div class="checkbox"> <label class="checks"> <input type="checkbox" ng-model="vm.slackNotificationSettings.report_event_regressions" ng-model-options="{ debounce: 500 }" ng-change="vm.saveSlackNotificationSettings()"> <i></i> Notify me on error regressions </label> </div> <div class="checkbox"> <label class="checks"> <input type="checkbox" ng-model="vm.slackNotificationSettings.report_new_events" ng-model-options="{ debounce: 500 }" ng-change="vm.saveSlackNotificationSettings()"> <i></i> Notify me on new events </label> </div> <div class="checkbox"> <label class="checks"> <input type="checkbox" ng-model="vm.slackNotificationSettings.report_critical_events" ng-model-options="{ debounce: 500 }" ng-change="vm.saveSlackNotificationSettings()"> <i></i> Notify me on critical events </label> </div> </div> <p> <a ng-if="!vm.project.has_slack_integration" ng-click="vm.addSlack()" class="btn btn-primary" role="button" title="Add to Slack"> <i class="fa fa-fw fa-slack"></i> Add Slack Notifications </a> <a ng-if="vm.project.has_slack_integration" ng-click="vm.removeSlack()" class="btn btn-danger" role="button" title="Remove Slack"> <i class="fa fa-fw fa-slack"></i> Remove Slack </a> </p> </div> <h4>Web hooks</h4> <p> The following web hooks will be called for this project. We also support <a href="http://zapier.com/" target="_blank">Zapier</a> which allows you to easily integrate Exceptionless with many different services (750+) like JIRA, HipChat, Twilio, Basecamp and more. </p> <table class="table table-striped table-bordered table-fixed b-t"> <thead> <tr> <th>Url</th> <th>Event Types</th> <th class="action">Actions</th> </tr> </thead> <tbody> <tr ng-repeat="hook in vm.webHooks track by hook.id"> <td>{{::hook.url}}</td> <td> <span class="label label-success" ng-repeat="type in hook.event_types track by type">{{::type}}</span> </td> <td> <button type="button" role="button" class="btn btn-sm" title="Delete" ng-click="vm.removeWebHook(hook)"><i class="fa fa-times"></i></button> </td> </tr> <tr ng-if="vm.webHooks.length === 0"> <td colspan="3">This project does not contain any integrations.</td> </tr> </tbody> </table> <button type="button" role="button" ng-click="vm.addWebHook()" class="btn btn-primary">Add Web Hook</button> '),$templateCache.put("app/project/manage/tabs/settings.tpl.html",'<h4>Data Exclusions</h4> <p> A comma delimited list of field names that should be removed from any error report data (e.g., extended data properties, form fields, cookies and query parameters). You can also specify a <a href="https://github.com/exceptionless/Exceptionless/wiki/Security" target="_blank" title="Data Exclusions documentation">field name with wildcards (<strong>*</strong>)</a> to specify starts with, ends with, or contains just to be extra safe. </p> <input type="text" class="form-control" placeholder="Example: *Password*, CreditCard*, SSN" ng-model="vm.data_exclusions" ng-model-options="{ debounce: 500 }" ng-change="vm.saveDataExclusion()"> <h4>Error Stacking</h4> <h5>User Namespaces</h5> <p> A comma delimited list of the namespace names that your applications code belongs to. If this value is set, only methods inside of these namespaces will be considered as stacking targets. </p> <input type="text" class="form-control" placeholder="Example: Contoso" ng-model="vm.user_namespaces" ng-model-options="{ debounce: 500 }" ng-change="vm.saveUserNamespaces()"> <h5>Common Methods</h5> <p> A comma delimited list of common method names that should not be used as stacking targets. This is useful when your code contains shared utility methods that throw a lot of errors. </p> <input type="text" class="form-control" placeholder="Example: Assert, Writeline" ng-model="vm.common_methods" ng-model-options="{ debounce: 500 }" ng-change="vm.saveCommonMethods()"> <h4>Spam Detection</h4> <p>A comma delimited list of user agents that should be ignored.</p> <input type="text" class="form-control" placeholder="Example: SpamBot" ng-model="vm.user_agents" ng-model-options="{ debounce: 500 }" ng-change="vm.saveUserAgents()"> <div class="checkbox"> <label class="checks"> <input type="checkbox" ng-model="vm.project.delete_bot_data_enabled" ng-model-options="{ debounce: 500 }" ng-change="vm.saveDeleteBotDataEnabled()"> <i></i> Reduce noise by automatically hiding high volumes of events coming from a single client IP address. </label> </div> '),$templateCache.put("app/recent.tpl.html",'<organization-notifications></organization-notifications> <div class="hbox hbox-auto-xs hbox-auto-sm"> <div class="col"> <div class="wrapper-md"> <div class="panel panel-default"> <div class="panel-heading"><i class="fa fa-calendar"></i> {{::\'Most Recent\' | translate}}</div> <events settings="vm.mostRecent"></events> </div> </div> </div> </div> '),$templateCache.put("app/session/dashboard.tpl.html",'<organization-notifications requires-premium="true"></organization-notifications> <div class="hbox hbox-auto-xs hbox-auto-sm" refresh-on="PersistentEventChanged PlanChanged" refresh-action="vm.get()" refresh-if="vm.canRefresh(data)" refresh-throttle="10000"> <div class="col" refresh-on="filterChanged" refresh-action="vm.get()"> <div class="wrapper-md"> <div class="row"> <div class="col-sm-12"> <div class="row row-sm text-center"> <div class="col-md-3 col-sm-6 col-xs-6"> <div class="dashboard-block"> <div class="rotate"> <i class="fa fa-area-chart fa-4x"></i> </div> <div class="details"> <span class="title">{{::\'Sessions\' | translate}}</span> <span class="sub">{{vm.stats.total}}</span> </div> </div> </div> <div class="col-md-3 col-sm-6 col-xs-6"> <div class="dashboard-block"> <div class="rotate"> <i class="fa fa-line-chart fa-4x"></i> </div> <div class="details"> <span class="title">{{::\'Per Hour\' | translate}}</span> <span class="sub">{{vm.stats.avg_per_hour}}</span> </div> </div> </div> <div class="col-md-3 col-sm-6 col-xs-6"> <div class="dashboard-block"> <div class="rotate"> <i class="fa fa-users fa-4x"></i> </div> <div class="details"> <span class="title">{{::\'Users\' | translate}}</span> <span class="sub">{{vm.stats.users}}</span> </div> </div> </div> <div class="col-md-3 col-sm-6 col-xs-6"> <div class="dashboard-block"> <div class="rotate"> <i class="fa fa-clock-o fa-4x"></i> </div> <div class="details"> <span class="title">{{::\'Average Duration\' | translate}}</span> <span class="sub"> <duration value="vm.stats.avg_duration"></duration> </span> </div> </div> </div> </div> </div> </div> <div class="panel panel-default"> <div class="panel-heading"> <i class="fa fa-bar-chart-o"></i> {{::\'Sessions and Users\' | translate}} <div class="pull-right"> <label class="switch bg-success"> <input type="checkbox" ng-model="vm.includeLiveFilter" ng-click="vm.updateLiveFilter(vm.includeLiveFilter)"> <i></i> </label> <div class="switch-text" ng-class="{\'text-success\': vm.includeLiveFilter}" ng-click="vm.updateLiveFilter(!vm.includeLiveFilter)">{{::\'View Active\' | translate}}</div> </div> </div> <div class="panel-body"> <rickshaw options="vm.chart.options" features="vm.chart.features"></rickshaw> </div> </div> <div class="panel panel-default"> <div class="panel-heading"><i class="fa fa-area-chart"></i>{{::\'Recent Sessions\' | translate}}</div> <sessions settings="vm.recentSessions"></sessions> </div> </div> </div> </div>'),$templateCache.put("app/session/sessions-directive.tpl.html",'<div class="table-responsive" refresh-on="filterChanged" refresh-action="vm.get()"> <table class="table table-striped table-bordered table-selectable table-fixed b-t table-hover table-clickable" refresh-on="StackChanged PlanChanged" refresh-if="vm.canRefresh(data)" refresh-action="vm.get(vm.currentOptions)" refresh-throttle="10000"> <thead refresh-on="PersistentEventChanged" refresh-if="vm.canRefresh(data)" refresh-action="vm.get(vm.currentOptions)" refresh-throttle="10000"> <tr> <th>{{::\'Summary\' | translate}}</th> <th class="date">{{::\'Created\' | translate}}</th> <th class="date">{{::\'Duration\' | translate}}</th> </tr> </thead> <tbody> <tr class="row-clickable" ng-repeat="event in vm.events track by event.id" ng-if="vm.events.length > 0"> <td ng-click="vm.open(event.id, $event)"> <div> <span ng-if="!event.data.SessionEnd" class="glyphicon glyphicon-one-fine-dot glyphicon-green" title="{{::\'Online\' | translate}}"></span> <summary source="event" show-type="vm.showType"></summary> </div> </td> <td ng-click="vm.open(event.id, $event)"><abbr title="{{::\'DateTime\' | translate : event }}"> <timeago date="event.date"></timeago> </abbr></td> <td ng-click="vm.open(event.id, $event)"><abbr title="{{vm.getDuration(event)}} seconds"> <duration value="vm.getDuration(event)"></duration> </abbr></td> </tr> <tr ng-if="vm.events.length === 0 || vm.loading"> <td colspan="3"> <strong ng-if="vm.loading">{{::\'Loading...\' | translate}}</strong> <strong ng-if="!vm.loading">{{vm.hasFilter() ? \'No sessions were found with the current filter.\': \'No sessions were found.\' | translate}}</strong> </td> </tr> </tbody> </table> <div class="table-footer"> <div class="row"> <div class="text-center" ng-class="vm.previous || vm.next ? \'col-sm-8 col-xs-8\': \'col-sm-12 col-xs-12\'" ng-if="vm.pageSummary"> <small class="text-muted inline m-t-xs">{{vm.pageSummary}}</small> </div> <div class="col-sm-4 col-xs-4 text-right" ng-if="vm.previous || vm.next"> <ul class="pagination pagination-sm m-t-none m-b-none"> <li ng-show="vm.currentOptions.page && vm.currentOptions.page > 2"><a ng-click="vm.get()"><i class="fa fa-fast-backward"></i></a></li> <li ng-class="{\'disabled\': !vm.previous}"><a ng-disabled="!vm.previous" ng-click="!vm.previous || vm.previousPage()"><i class="fa fa-chevron-left"></i></a></li> <li ng-class="{\'disabled\': !vm.next}"><a ng-disabled="!vm.next" ng-click="!vm.next || vm.nextPage()"><i class="fa fa-chevron-right"></i></a></li> </ul> </div> </div> </div> </div> '),$templateCache.put("app/stack/add-reference-dialog.tpl.html",'<form name="addReferenceForm" role="form" class="form-validation" autocomplete="on"> <div class="modal-header dialog-header-confirm"> <button type="button" role="button" class="close" ng-click="vm.cancel()">&times;</button> <h4 class="modal-title"><i class="fa fa-external-link fa-fw"></i> Please enter a Reference Link</h4> </div> <div class="modal-body"> <div class="form-group"> <label for="url">Reference Link</label> <input id="url" name="url" type="url" class="form-control input-lg" placeholder="Please enter a valid URL" ng-model="vm.data.url" ng-required="true" autofocus> <div class="error" ng-messages="addReferenceForm.url.$error" ng-if="addReferenceForm.$submitted || addReferenceForm.url.$touched"> <small ng-message="required">Reference Link is required.</small> <small ng-message="url">Reference Link is required.</small> </div> </div> </div> <div class="modal-footer"> <button type="button" role="button" class="btn btn-default" ng-click="vm.cancel()">Cancel</button> <input type="submit" role="button" class="btn btn-primary" ng-click="vm.save(addReferenceForm.$valid)" value="Save Reference Link"> </div> </form> '),$templateCache.put("app/stack/stack.tpl.html",'<organization-notifications organization-id="vm.stack.organization_id"></organization-notifications> <div class="hbox hbox-auto-xs hbox-auto-sm" refresh-on="StackChanged PersistentEventChanged" refresh-action="vm.get(data)" refresh-if="vm.canRefresh(data)" refresh-debounce="1000"> <div class="wrapper-md" refresh-on="filterChanged" refresh-action="vm.get()"> <div class="row" refresh-always="PlanChanged" refresh-action="vm.get(data)"> <div class="col-sm-12"> <div class="row row-sm text-center"> <div class="col-md-3 col-sm-6 col-xs-6"> <div class="dashboard-block"> <div class="rotate"> <i class="fa fa-calendar fa-4x"></i> </div> <div class="details"> <span class="title">{{::\'Count\' | translate}}</span> <span class="sub">{{vm.stats.count}}</span> </div> </div> </div> <div class="col-md-3 col-sm-6 col-xs-6"> <div class="dashboard-block"> <div class="rotate"> <i class="fa fa-users fa-4x"></i> </div> <div class="details"> <span class="title">{{::\'Users\' | translate}}</span> <span class="sub"> <abbr title="{{vm.stats.usersTitle}}">{{vm.stats.users}}</abbr> </span> </div> </div> </div> <div class="col-md-3 col-sm-6 col-xs-6"> <div class="dashboard-block"> <div class="rotate"> <i class="fa fa-arrow-circle-left fa-4x"></i> </div> <div class="details"> <span class="title">{{::\'First\' | translate}}</span> <span class="sub visible-md visible-lg"> <timeago date="vm.stats.first_occurrence"></timeago> </span> <span class="sub visible-sm"> <span ng-if="vm.isValidDate(vm.stats.first_occurrence)">{{vm.stats.first_occurrence | date:\'shortDate\' }}</span> <span ng-if="!vm.isValidDate(vm.stats.first_occurrence)">never</span> </span> <span class="sub visible-xs"> <span ng-if="vm.isValidDate(vm.stats.first_occurrence)">{{vm.stats.first_occurrence | date:\'M/d\' }}</span> <span ng-if="!vm.isValidDate(vm.stats.first_occurrence)">NA</span> </span> </div> </div> </div> <div class="col-md-3 col-sm-6 col-xs-6"> <div class="dashboard-block"> <div class="rotate"> <i class="fa fa-arrow-circle-right fa-4x"></i> </div> <div class="details"> <span class="title">{{::\'Last\' | translate}}</span> <span class="sub visible-md visible-lg"> <timeago date="vm.stats.last_occurrence"></timeago> </span> <span class="sub visible-sm"> <span ng-if="vm.isValidDate(vm.stats.last_occurrence)">{{vm.stats.last_occurrence | date:\'shortDate\' }}</span> <span ng-if="!vm.isValidDate(vm.stats.last_occurrence)">never</span> </span> <span class="sub visible-xs"> <span ng-if="vm.isValidDate(vm.stats.last_occurrence)">{{vm.stats.last_occurrence | date:\'M/d\' }}</span> <span ng-if="!vm.isValidDate(vm.stats.last_occurrence)">NA</span> </span> </div> </div> </div> </div> </div> </div> <div class="panel panel-default"> <div class="panel-heading"> {{::\'Stack\' | translate}} <span class="labels"> <span class="label label-success" ng-if="vm.stack.date_fixed && !vm.stack.is_regressed"> <span class="hidden-xs">{{::\'FIXED\' | translate}}<span ng-if="vm.stack.fixed_in_version"> IN {{vm.stack.fixed_in_version}}</span></span> <span class="visible-xs">F</span> </span> <span class="label label-success" ng-if="vm.stack.is_regressed"> <span class="hidden-xs">{{::\'REGRESSED\' | translate}}</span> <span class="visible-xs">R</span> </span> <span class="label label-success" ng-if="vm.stack.is_hidden"> <span class="hidden-xs">{{::\'HIDDEN\' | translate}}</span> <span class="visible-xs">H</span> </span> </span> <div class="btn-toolbar pull-right hidden-print" role="toolbar" aria-label="Stack Options"> <div class="btn-group btn-group-sm" role="group" ng-if="vm.stack.type===\'error\' || vm.stack.type===\'404\' "> <button type="button" role="button" class="btn btn-default" title="{{(vm.stack.date_fixed && !vm.stack.is_regressed) ? \'Mark this stack as not fixed\' : \'Mark this stack as fixed\' }}" promise-button="vm.updateIsFixed()" promise-button-busy-text="{{(vm.stack.date_fixed && !vm.stack.is_regressed) ? \'Marking Not Fixed\' : \'Marking Fixed\' }}" promise-button-busy-spinner-class="fa-size-sm"> {{(vm.stack.date_fixed && !vm.stack.is_regressed) ? \'Mark Not Fixed\' : \'Mark Fixed\' }} </button> </div> <div class="btn-group btn-group-sm" role="group"> <button type="button" role="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false"> <span class="visible-xs-inline"><i class="fa fa-fw fa-gear fa-size-sm"></i></span> <span class="hidden-xs">{{::\'Options\' | translate}}</span> <span class="caret"></span> </button> <ul class="dropdown-menu dropdown-menu-right" role="menu"> <li><a ng-click="vm.updateIsHidden()" title="Hide this stack from reports and mutes occurrence notifications"><i ng-if="vm.stack.is_hidden || vm.stack.occurrences_are_critical || vm.stack.disable_notifications" class="fa fa-fw" ng-class="{\'fa-check\': !!vm.stack.is_hidden}"></i>{{::\'Hide\' | translate}}</a></li> <li><a ng-click="vm.updateIsCritical()" title="All future occurrences will be marked as critical"><i ng-if="vm.stack.is_hidden || vm.stack.occurrences_are_critical || vm.stack.disable_notifications" class="fa fa-fw" ng-class="{\'fa-check\': !!vm.stack.occurrences_are_critical}"></i>Future Occurrences Are Critical</a> </li> <li><a ng-click="vm.updateNotifications()" title="Stop sending occurrence notifications for this stack"><i ng-if="vm.stack.is_hidden || vm.stack.occurrences_are_critical || vm.stack.disable_notifications" class="fa fa-fw" ng-class="{\'fa-check\': !!vm.stack.disable_notifications}"></i>Disable Notifications</a></li> <li class="divider"></li> <li><a ng-click="vm.promoteToExternal()" title="Used to promote stacks to external systems."><i ng-if="vm.stack.is_hidden || vm.stack.occurrences_are_critical || vm.stack.disable_notifications" class="fa fa-fw"></i>Promote To External</a> </li> <li><a ng-click="vm.addReferenceLink()" title="Add a reference link to an external resource."><i ng-if="vm.stack.is_hidden || vm.stack.occurrences_are_critical || vm.stack.disable_notifications" class="fa fa-fw"></i>Add Reference Link</a> </li> <li class="divider"></li> <li><a ng-click="vm.remove()" title="Delete this stack"><i ng-if="vm.stack.is_hidden || vm.stack.occurrences_are_critical || vm.stack.disable_notifications" class="fa fa-fw"></i>Delete</a></li> </ul> </div> </div> </div> <div class="panel-body"> <table class="table table-striped table-bordered table-fixed table-key-value b-t"> <tbody> <tr> <th>Title</th> <td><span truncate lines="3">{{vm.stack.title}}</span></td> </tr> <tr> <th>Project</th> <td><a ui-sref="app.project-dashboard({ projectId: vm.project.id })">{{vm.project.name}}</a></td> </tr> <tr ng-if="(vm.stack.date_fixed && !vm.stack.is_regressed)"> <th>Date Fixed</th> <td><span>{{vm.stack.date_fixed | date: \'medium\'}}</span></td> </tr> <tr ng-if="vm.stack.description"> <th>Description</th> <td><span truncate lines="2">{{vm.stack.description}}</span></td> </tr> <tr ng-if="vm.stack.tags.length> 0"> <th>Tags</th> <td><span class="label label-info" ng-repeat="tag in vm.stack.tags.slice(0,25) track by tag">{{::tag}}</span></td> </tr> <tr ng-if="vm.stack.references.length> 0"> <th>{{(vm.stack.references.length > 1) ? \'Reference Links\' : \'Reference Link\'}}</th> <td> <ul ng-if="vm.stack.references.length> 1"> <li ng-repeat="reference in vm.stack.references track by reference"> <a ng-href="{{::reference}}" target="_blank">{{::reference}}</a> <a class="delete-link" ng-click="vm.removeReferenceLink(reference)"><i class="fa fa-fw fa-times"></i></a> </li> </ul> <div ng-if="vm.stack.references.length===1"> <a ng-href="{{::vm.stack.references[0]}}" target="_blank">{{::vm.stack.references[0]}}</a> <a class="delete-link" ng-click="vm.removeReferenceLink(vm.stack.references[0])"><i class="fa fa-fw fa-times"></i></a> </div> </td> </tr> </tbody> </table> <h4>Stacking Information</h4> <table class="table table-striped table-bordered table-fixed table-key-value b-t"> <tbody> <tr ng-repeat="(key, value) in vm.stack.signature_info track by key"> <th>{{key}}</th> <td>{{value}}</td> </tr> </tbody> </table> <div> <div class="btn-group btn-group-xs pull-right" role="group"> <button type="button" role="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-expanded="false"> <span class="visible-xs-inline"><i class="fa fa-fw fa-gear"></i></span> <span class="hidden-xs">Chart Options</span> <span class="caret"></span> </button> <ul class="dropdown-menu dropdown-menu-right" role="menu"> <li ng-repeat="o in vm.chartOptions | filter: { render: true } track by o.field"> <a ng-click="o.selected=!o.selected; vm.updateStats();" title="{{::o.title}}"><i class="fa fa-fw" ng-class="{\'fa-check\': !!o.selected}" ng-if="vm.hasSelectedChartOption()"></i>Show {{::o.name}}</a> </li> </ul> </div> <div class="clearfix"></div> <rickshaw options="vm.chart.options" features="vm.chart.features"></rickshaw> </div> </div> </div> <div class="panel panel-default"> <div class="panel-heading"><i class="fa fa-fw fa-calendar"></i> Recent Occurrences</div> <events settings="vm.recentOccurrences"></events> </div> </div> </div>> '),$templateCache.put("app/status/status.tpl.html",'<div class="container w-auto-xs"> <div class="text-center"> <a href="https://exceptionless.com"> <img src="/img/exceptionless-350.png" alt="logo"> </a> </div> <div class="hbox hbox-auto-xs hbox-auto-sm"> <div class="col"> <div class="wrapper-md"> <div class="panel panel-default"> <div class="panel-heading text-center"><strong>Service Status</strong></div> <div class="panel-body"> {{vm.getMessage()}} </div> </div> </div> </div> </div> </div> '),$templateCache.put("app/users.tpl.html",'<organization-notifications></organization-notifications> <div class="hbox hbox-auto-xs hbox-auto-sm"> <div class="col"> <div class="wrapper-md"> <div class="panel panel-default"> <div class="panel-heading"><i class="fa fa-users"></i> {{::\'Most Users\' | translate}}</div> <stacks settings="vm.mostUsers"></stacks> </div> </div> </div> </div> '),$templateCache.put("components/billing/change-plan-dialog.tpl.html",'<form name="vm.changePlanForm" role="form" class="form-validation" autocomplete="on"> <div class="modal-header dialog-header-notify"> <button type="button" role="button" class="close" ng-click="vm.cancel()">&times;</button> <h4 class="modal-title"><i class="fa fa-credit-card fa-fw"></i> Exceptionless Plan</h4> </div> <div class="modal-body"> <div class="alert alert-danger" role="alert" ng-if="vm.paymentMessage"> <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span> {{vm.paymentMessage}} </div> <div class="form-group" ng-if="vm.organizations.length > 1"> <label for="organization">Organization to change</label> <select id="organization" class="form-control" ng-change="vm.changeOrganization()" ng-model="vm.currentOrganization" ng-disabled="!vm.isBillingEnabled()" ng-options="organization.name for organization in vm.organizations track by organization.id"></select> </div> <p><strong>{{vm.currentOrganization.name}}</strong> is currently on the <strong>{{vm.currentOrganization.plan_name}}</strong> plan.</p> <div class="form-group"> <label for="plan">Select new plan (<a href="https://exceptionless.com/pricing" target="_blank">view plan information</a>). <em>All plan changes are prorated.</em></label> <select id="plan" class="form-control" ng-init="vm.currentPlan = vm.plans[0]" ng-model="vm.currentPlan" ng-disabled="!vm.isBillingEnabled()" ng-options="plan.description for plan in vm.plans track by plan.id" autofocus></select> </div> <div ng-if="vm.isPaidPlan()"> <div ng-if="!vm.hasAdminRole()"> <h4>Credit Card</h4> <div class="row" ng-if="vm.hasExistingCard()"> <div class="form-group col-sm-6"> <div class="radio"> <label class="checks"> <input type="radio" class="form-control" ng-model="vm.card.mode" ng-disabled="!vm.isBillingEnabled()" value="existing"> <i></i> Use credit card ending in {{vm.currentOrganization.card_last4}} </label> </div> </div> <div class="form-group col-sm-6"> <div class="radio"> <label class="checks"> <input type="radio" class="form-control" ng-model="vm.card.mode" ng-disabled="!vm.isBillingEnabled()" value="new"> <i></i> Use a new credit card </label> </div> </div> </div> <div ng-if="vm.isNewCard()"> <div class="row"> <div class="form-group col-xs-8"> <label for="cardNumber">Card number</label> <div class="input-group"> <input id="cardNumber" type="text" class="form-control" placeholder="•••• •••• •••• ••••" x-autocompletetype="cc-number" ng-model="vm.card.number" payments-validate="card" payments-format="card" payments-type-model="vm.card.type" ng-disabled="!vm.isBillingEnabled()" ng-required="true"> <span class="input-group-addon"><img ng-src="/img/cards/{{ vm.card.type ? vm.card.type : \'placeholder\' }}.png" alt="Card Type"></span> </div> </div> <div class="form-group col-xs-4"> <label for="cardExpiry">Expires</label> <input id="cardExpiry" type="text" class="form-control" placeholder="MM / YY" x-autocompletetype="cc-exp" ng-model="vm.card.expiry" ng-disabled="!vm.isBillingEnabled()" payments-validate="expiry" payments-format="expiry" ng-required="true"> </div> </div> <div class="row"> <div class="form-group col-xs-8"> <label for="cardName">Name on card</label> <input id="cardName" type="text" class="form-control" placeholder="Name on card" x-autocompletetype="full-name" autocapitalize="words" autocorrect="off" spellcheck="false" ng-model="vm.card.name" ng-disabled="!vm.isBillingEnabled()" ng-required="true"> </div> <div class="form-group col-xs-4"> <label for="cardCVC">Card code</label> <input id="cardCVC" type="text" class="form-control" placeholder="CVC" x-autocompletetype="cc-csc" autocomplete="off" ng-model="vm.card.cvc" ng-disabled="!vm.isBillingEnabled()" payments-validate="cvc" payments-format="cvc" payments-type-model="vm.card.type" ng-required="true"> </div> </div> </div> </div> <div class="form-group" ng-if="!vm.hasExistingCard()"> <label for="couponId">Coupon code</label> <input id="couponId" type="text" class="form-control" placeholder="Coupon Code" ng-model="vm.coupon" ng-disabled="!vm.isBillingEnabled()"> </div> </div> <div ng-if="vm.isCancellingPlan()"> <p><strong>Help us improve Exceptionless!</strong></p> <p> We hate to see you downgrade, but we\'ll be more than happy to take care of that for you. Use the <a ng-click="vm.showIntercom()">Contact Us</a> button below to let us know why you\'re downgrading, so we can serve you better in the future. </p> </div> </div> <div class="modal-footer"> <button type="button" role="button" class="btn btn-default" ng-click="vm.cancel()">Cancel</button> <span ng-if="vm.isCancellingPlan()"> <button type="submit" role="button" class="btn btn-primary" ng-click="vm.showIntercom()">Contact Us</button> </span> <span ng-if="!vm.isCancellingPlan()"> <button type="submit" role="button" class="btn btn-primary" promise-button="vm.save(vm.changePlanForm.$valid)" promise-button-busy-text="Changing Plan">Change Plan</button> </span> </div> </form> '),$templateCache.put("components/date-filter/custom-date-range-dialog.tpl.html",'<form name="addDateRangeForm" role="form" class="form-validation"> <div class="modal-header dialog-header-confirm"> <button type="button" role="button" class="close" ng-click="vm.cancel()">&times;</button> <h4 class="modal-title">Select Date Range</h4> </div> <div class="modal-body"> <date-range-picker range="vm.range" min-date="vm.minDate" max-date="vm.maxDate" time-picker="true" time-picker-seconds="true" time-picker12-hour="true"> </date-range-picker> </div> <div class="modal-footer"> <button type="button" role="button" class="btn btn-default" ng-click="vm.cancel()">Cancel</button> <input type="submit" role="button" class="btn btn-primary" ng-click="vm.save()" value="Apply"> </div> </form> '),$templateCache.put("components/date-filter/date-filter-directive.tpl.html",'<li class="dropdown" refresh-on="filterChanged" refresh-action="vm.updateFilterDisplayName()"> <a class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" refresh-on="filterChanged" refresh-action="vm.updateFilterDisplayName()"> {{vm.filteredDisplayName | translate}} <span class="caret"></span> </a> <ul class="dropdown-menu"> <li ng-class="{ active: vm.isActive(\'last hour\')}"><a ng-click="vm.setFilter(\'last hour\')">{{::\'Last Hour\' | translate}}</a></li> <li ng-class="{ active: vm.isActive(\'last 24 hours\')}"><a ng-click="vm.setFilter(\'last 24 hours\')">{{::\'Last 24 Hours\' | translate}}</a></li> <li ng-class="{ active: vm.isActive(\'last week\')}"><a ng-click="vm.setFilter(\'last week\')">{{::\'Last Week\' | translate}}</a></li> <li ng-class="{ active: vm.isActive(\'last 30 days\')}"><a ng-click="vm.setFilter(\'last 30 days\')">{{::\'Last 30 Days\' | translate}}</a></li> <li ng-class="{ active: vm.isActive(\'all\')}"><a ng-click="vm.setFilter(\'all\')">{{::\'All Time\' | translate}}</a></li> <li role="separator" class="divider hidden-xs"></li> <li ng-class="{ active: vm.isActive(\'Custom\')}" class="hidden-xs"><a ng-click="vm.setCustomFilter()">{{::\'Custom\' | translate}}</a></li> </ul> </li> '),$templateCache.put("components/date-range-picker/date-range-picker-directive.tpl.html",'<div id="datepicker" class="input-daterange"> <div class="input-group"> <input type="text" class="input-small form-control" name="start" ng-model="range.start" autofocus> <span class="input-group-addon">to</span> <input type="text" class="input-small form-control" name="end" ng-model="range.end"> </div> </div> '),$templateCache.put("components/dialog/confirm-dialog.tpl.html",'<div class="modal-header dialog-header-confirm"> <button type="button" role="button" class="close" ng-click="vm.cancel()">&times;</button> <h4 class="modal-title"> <span class="glyphicon glyphicon-check"></span> {{::vm.header}} </h4> </div> <div class="modal-body" ng-bind-html="vm.message"></div> <div class="modal-footer"> <button type="button" role="button" class="btn btn-default" ng-click="vm.cancel()" autofocus>Cancel</button> <button type="button" role="button" class="btn btn-primary" ng-class="{\'btn-danger\': !!vm.danger}" ng-click="vm.confirm()"> {{vm.confirmButtonText}} </button> </div> '),$templateCache.put("components/events/events-directive.tpl.html",'<div class="table-responsive" refresh-on="filterChanged" refresh-action="vm.get()"> <table class="table table-striped table-bordered table-selectable table-fixed b-t table-hover table-clickable" refresh-on="StackChanged PlanChanged" refresh-if="vm.canRefresh(data)" refresh-action="vm.get(vm.currentOptions)" refresh-throttle="10000"> <thead refresh-on="PersistentEventChanged" refresh-if="vm.canRefresh(data)" refresh-action="vm.get(vm.currentOptions)" refresh-throttle="10000"> <tr> <th class="selection hidden-xs" ng-if="vm.actions.length > 0"> <label class="checks m-b-none"> <input type="checkbox" ng-click="vm.updateSelection()" ng-checked="vm.selectedIds.length > 0" ng-disabled="vm.events.length === 0"><i></i> </label> </th> <th>{{::\'Summary\' | translate}}</th> <th class="action-xl hidden-xs" ng-if="vm.showIPAddress">{{::\'IP\'}}</th> <th class="action-xl hidden-xs">{{::\'User\' | translate}}</th> <th class="clickable" ng-class="{ \'relative-date\': vm.relativeTo(), \'date\': !vm.relativeTo(), \'dropup\': !vm.sortByDateDescending }" ng-click="vm.toggleDateSort()"> <abbr title="{{::vm.sortByDateDescending ? \'Sort Descending\' : \'Sort Ascending\' | translate}}"> {{::vm.timeHeaderText | translate}} <span class="caret"></span> </abbr> </th> </tr> </thead> <tbody> <tr ng-repeat="event in vm.events track by event.id" ng-if="vm.events.length > 0" ng-class="{ \'row-clickable\': vm.currentEventId !== event.id, \'row-selected\': vm.currentEventId === event.id }"> <td class="hidden-xs" ng-if="vm.actions.length > 0"><label class="checks m-b-none"><input type="checkbox" checklist-model="vm.selectedIds" checklist-value="event.id"><i></i></label></td> <td ng-click="vm.open(event.id, $event)"> <summary source="event" show-type="vm.showType"></summary> </td> <td ng-click="vm.open(event.id, $event)" ng-if="vm.showIPAddress"> <span ng-if="event.data && event.data.IpAddress"> <span ng-if="event.data.IpAddress.length === 1">{{::event.data.IpAddress[0]}}</span> <abbr ng-if="event.data.IpAddress.length > 1" title="{{::event.data.IpAddress.join(\',\')}}">{{::event.data.IpAddress[0]}}</abbr> </span> </td> <td class="hidden-xs" ng-click="vm.open(event.id, $event)"> <abbr ng-if="event.data.Name && event.data.Identity" title="{{::event.data.Name}} ({{::event.data.Identity}})" truncate overwrite-tooltip="false" ng-bind-template="{{::event.data.Name}}"></abbr> <span ng-if="!event.data.Name || !event.data.Identity" truncate ng-bind-template="{{::(event.data.Name || event.data.Identity)}}"></span> </td> <td ng-click="vm.open(event.id, $event)"> <span ng-if="vm.hideSessionStartTime && event.data.Type === \'session\'">--</span> <span ng-if="!vm.hideSessionStartTime || event.data.Type !== \'session\'"> <abbr title="{{::\'DateTime\' | translate:event}}"> <span ng-if="vm.relativeTo()">after <relative-time to="vm.relativeTo()" date="event.date"></relative-time></span> <span ng-if="!vm.relativeTo()"><timeago date="event.date"></timeago></span> </abbr> </span> </td> </tr> <tr ng-if="vm.events.length === 0 || vm.loading"> <td class="hidden-xs" ng-if="vm.actions.length > 0"><label class="checks m-b-none"><input type="checkbox" disabled><i></i></label></td> <td colspan="3"> <strong ng-if="vm.loading">{{::\'Loading...\' | translate}}</strong> <strong ng-if="!vm.loading">{{vm.hasFilter() ? \'No events were found with the current filter.\': \'No events were found.\' | translate}}</strong> </td> </tr> </tbody> </table> <div class="table-footer"> <div class="row"> <div class="col-sm-4 hidden-xs"> <div class="dropdown" ng-if="vm.actions.length > 0"> <button type="button" role="button" id="bulkActions" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-expanded="false"> {{::\'Bulk Action\' | translate}} <span class="caret"></span> </button> <ul class="dropdown-menu" role="menu" aria-labelledby="bulkActions"> <li role="presentation"><a role="menuitem" tabindex="-1" ng-repeat="action in vm.actions" ng-click="vm.save(action)">{{::action.name | translate}}</a></li> </ul> </div> </div> <div class="col-sm-4 text-center" ng-class="vm.previous || vm.next ? \'col-xs-8\': \'col-xs-12\'" ng-if="vm.pageSummary"> <small class="text-muted inline m-t-xs">{{vm.pageSummary}}</small> </div> <div class="col-sm-4 col-xs-4 text-right" ng-if="vm.previous || vm.next"> <ul class="pagination pagination-sm m-t-none m-b-none"> <li ng-show="vm.currentOptions.page && vm.currentOptions.page > 2"><a ng-click="vm.get()"><i class="fa fa-fast-backward"></i></a></li> <li ng-class="{\'disabled\': !vm.previous}"><a ng-disabled="!vm.previous" ng-click="!vm.previous || vm.previousPage()"><i class="fa fa-chevron-left"></i></a></li> <li ng-class="{\'disabled\': !vm.next}"><a ng-disabled="!vm.next" ng-click="!vm.next || vm.nextPage()"><i class="fa fa-chevron-right"></i></a></li> </ul> </div> </div> </div> </div> '),$templateCache.put("components/intercom/intercom-directive.tpl.html",'<div> <div refresh-on="UserChanged" refresh-action="vm.getUser(true)" refresh-debounce="10000" refresh-stopping="vm.shutdown()"></div> <div refresh-on="OrganizationChanged" refresh-action="vm.getOrganizations(true)" refresh-debounce="10000"></div> <div refresh-on="ProjectChanged" refresh-action="vm.getProjects(true)" refresh-debounce="10000"></div> <div refresh-on="filterChanged" refresh-action="vm.updateIntercom(true)" refresh-debounce="10000"></div> <div refresh-on="$stateChangeSuccess" refresh-action="vm.hide()" refresh-debounce="1000"></div> </div> '),$templateCache.put("components/organization-notifications/organization-notifications-directive.tpl.html",'<div> <div ng-if="vm.hasNotifications" refresh-on="filterChanged" refresh-action="vm.onFilterChanged()"> <div refresh-on="OrganizationChanged ProjectChanged PersistentEventChanged PlanChanged PlanOverage" refresh-action="vm.get()" refresh-throttle="10000"></div> <div class="alert alert-success alert-banner m-b-none" ng-if="!vm.hasOrganizations()"> <h4>Setup your first project</h4> <p> Please <a ui-sref="app.project.add">add a new project</a> and start becoming exceptionless in less than 60 seconds! </p> </div> <div class="alert alert-success alert-banner m-b-none" ng-if="vm.hasOrganizationsWithNoProjects()"> <h4>Setup your first project</h4> <p> <strong ng-repeat="organization in vm.organizationsWithNoProjects"> <span ng-if="!$first">, </span><a ui-sref="app.project.add({ organizationId: organization.id })">{{organization.name}}</a> </strong> currently has no projects. <a ui-sref="app.project.add({ organizationId: vm.organizationsWithNoProjects[0].id })">Add a new project</a> and start becoming exceptionless in less than 60 seconds! </p> </div> <div class="alert alert-success alert-banner m-b-none" ng-if="vm.hasProjectsRequiringConfiguration()"> <h4>{{::"We haven\'t received any data!" | translate}}</h4> <p> Please configure your clients for <strong ng-repeat="project in vm.projectsRequiringConfiguration"> <span ng-if="!$first">, </span><a ui-sref="app.project.configure({ id: project.id, redirect: true })" title="Configure {{project.name}} ({{project.organization_name}})">{{project.name}}</a> </strong> projects and start becoming exceptionless in less than 60 seconds! </p> </div> <div class="alert alert-danger alert-banner m-b-none" ng-if="vm.hasSuspendedOrganizations()"> <h4> <span ng-repeat="organization in vm.suspendedOrganizations"> <span ng-if="!$first">, </span><a ng-click="vm.showChangePlanDialog(organization.id)">{{organization.name}}</a> </span> has been suspended. </h4> <p><em>Please note that while your account is suspended all new client events will be discarded.</em></p> <p ng-if="vm.hasSuspendedForBillingOrganizations()"> To unsuspend <strong ng-repeat="organization in vm.suspendedForBillingOrganizations"> <span ng-if="!$first">, </span><a ng-click="vm.showChangePlanDialog(organization.id)">{{organization.name}}</a> </strong> , please <a ng-click="vm.showChangePlanDialog(vm.suspendedForBillingOrganizations[0].id)">update your billing information</a>. </p> <p ng-if="vm.hasSuspendedForAbuseOrOverageOrNotActiveOrganizations()"> <strong ng-repeat="organization in vm.suspendedForAbuseOrOverageOrNotActiveOrganizations"> <span ng-if="!$first">, </span><a ng-click="vm.showChangePlanDialog(organization.id)">{{organization.name}}</a> </strong> has exceeded the plan limits. To unsuspend your account, please <a ng-click="vm.showChangePlanDialog(vm.suspendedForAbuseOrOverageOrNotActiveOrganizations[0].id)">upgrade your plan</a>. </p> <p ng-if="vm.isIntercomEnabled()"> Please <a ng-click="appVm.showIntercom()">contact us</a> for more information on why your account was suspended. </p> </div> <div class="alert alert-danger alert-banner m-b-none" ng-if="vm.hasExceededRequestLimitOrganizations()"> <h4> API requests are currently being throttled for <span ng-repeat="organization in vm.exceededRequestLimitOrganizations"> <span ng-if="!$first">, </span>{{organization.name}} </span> </h4> <p ng-if="vm.isIntercomEnabled()"> Please <a ng-click="appVm.showIntercom()">contact us</a> for more information. </p> </div> <div class="alert alert-danger alert-banner m-b-none" ng-if="vm.hasHourlyOverageOrganizations()"> <h4> Events are currently being throttled for <span ng-repeat="organization in vm.hourlyOverageOrganizations"> <span ng-if="!$first">, </span><a ng-click="vm.showChangePlanDialog(organization.id)">{{organization.name}}</a> </span> </h4> <p>Events are currently being throttled to prevent using up your plan limit in a small window of time. <a ng-click="vm.showChangePlanDialog(vm.hourlyOverageOrganizations[0].id)">Upgrade now</a> to increase your limits.</p> </div> <div class="alert alert-danger alert-banner m-b-none" ng-if="vm.hasMonthlyOverageOrganizations()"> <h4> <span ng-repeat="organization in vm.monthlyOverageOrganizations"> <span ng-if="!$first">, </span><a ng-click="vm.showChangePlanDialog(organization.id)">{{organization.name}}</a> </span> has reached its monthly plan limit. </h4> <p><a ng-click="vm.showChangePlanDialog(vm.monthlyOverageOrganizations[0].id)">Upgrade now</a> to continue receiving events.</p> </div> <div class="alert alert-danger alert-banner m-b-none" ng-if="vm.hasOrganizationsWithoutPremiumFeatures()"> <h4> <span ng-repeat="organization in vm.organizationsWithoutPremiumFeatures"> <span ng-if="!$first">, </span><a ng-click="vm.showChangePlanDialog(organization.id)">{{organization.name}}</a> </span> is attempting to use a premium feature. </h4> <p><a ng-click="vm.showChangePlanDialog(vm.organizationsWithoutPremiumFeatures[0].id)">Upgrade now</a> to enable search and other premium features!</p> </div> <div class="alert alert-success alert-banner m-b-none" ng-if="vm.hasFreeOrganizations()"> <h4> <span ng-repeat="organization in vm.freeOrganizations"> <span ng-if="!$first">, </span><a ng-click="vm.showChangePlanDialog(organization.id)">{{organization.name}}</a> </span> is currently on a free plan. </h4> <p><a ng-click="vm.showChangePlanDialog(vm.freeOrganizations[0].id)">Upgrade now</a> to enable premium features and extra storage!</p> </div> </div> </div> '),$templateCache.put("components/project-filter/project-filter-directive.tpl.html",'<li class="dropdown" refresh-on="OrganizationChanged ProjectChanged" refresh-action="vm.get()" refresh-throttle="5000"> <a class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" refresh-on="filterChanged" refresh-action="vm.update()"> {{vm.filteredDisplayName | translate}} <span class="caret"></span> </a> <ul class="dropdown-menu w-xl scrollable-menu" ng-style="{\'max-height\': vm.filterDropDownMaxHeight + \'px\' }" auto-active> <li><a ng-href="{{vm.urls.projects.all}}">{{::\'All Projects\' | translate}}</a></li> <li role="separator" class="divider"></li> <li ng-if="vm.isLoadingOrganizations" disabled><a href="#">{{::\'Loading Organizations...\' | translatAlle}}</a></li> <li ng-repeat-start="organization in vm.organizations | orderBy: \'name\' track by organization.id" class="heading-menu"> <a ng-href="{{vm.urls.organizations[organization.id]}}"> {{::organization.name}} <span class="icon-right" ui-sref="app.organization.manage({ id: organization.id })" show-on-hover-parent><i class="fa fa-gear fa-fw"></i></span> </a> </li> <li ng-if="vm.isLoadingProjects" class="child-menu" disabled><a href="#">{{::\'Loading Projects....\' | translatAlle}}</a></li> <li ng-repeat="project in vm.getProjectsByOrganizationId(organization.id) | orderBy: \'name\' track by project.id" class="child-menu"> <a ng-href="{{vm.urls.projects[project.id]}}"> {{::project.name}} <span class="icon-right" ui-sref="app.project.manage({ id: project.id })" show-on-hover-parent><i class="fa fa-gear fa-fw"></i></span> </a> </li> <li ng-repeat-end role="separator" class="divider"></li> <li><a ui-sref="app.project.add">{{::\'Add New Project\' | translate}}</a></li> </ul> </li>'),$templateCache.put("components/projects/projects-directive.tpl.html",'<div class="table-responsive" refresh-on="OrganizationChanged ProjectChanged" refresh-if="vm.canRefresh(data)" refresh-action="vm.get(vm.currentOptions)" refresh-throttle="10000"> <table class="table table-striped table-bordered table-fixed b-t" refresh-on="PersistentEventChanged" refresh-if="vm.canRefresh(data)" refresh-action="vm.get(vm.currentOptions, false)" refresh-throttle="10000"> <thead refresh-always="PlanChanged" refresh-action="vm.get(vm.currentOptions, false)"> <tr> <th>Name</th> <th ng-if="vm.includeOrganizationName">Organization</th> <th class="number hidden-xs"><abbr title="Total number of stacks">Stacks</abbr></th> <th class="number hidden-xs"><abbr title="Total number of events within the retention period">Events</abbr></th> <th class="action">Actions</th> </tr> </thead> <tbody> <tr class="row-clickable" ng-repeat="project in vm.projects | orderBy: \'name\' track by project.id" ng-if="vm.hasProjects()"> <td ng-click="vm.open(project.id, $event)">{{project.name}}</td> <td ng-if="vm.includeOrganizationName" ng-click="vm.open(project.id, $event)">{{project.organization_name}}</td> <td ng-click="vm.open(project.id, $event)" class="number hidden-xs">{{project.stack_count | number:0}}</td> <td ng-click="vm.open(project.id, $event)" class="number hidden-xs">{{project.event_count | number:0}}</td> <td> <div class="btn-group"> <button type="button" role="button" class="btn btn-sm btn-primary dropdown-toggle" data-toggle="dropdown"> <i class="fa fa-fw fa-edit"></i> <span class="caret"></span> </button> <ul class="dropdown-menu dropdown-menu-right" role="menu"> <li><a ui-sref="app.project-dashboard({ projectId: project.id })"><i class="fa fa-fw fa-dashboard"></i> {{::\'Dashboard\' | translate}}</a></li> <li><a ui-sref="app.project.manage({ id: project.id })"><i class="fa fa-fw fa-edit"></i> Edit</a></li> <li><a ui-sref="app.project.configure({ id: project.id })"><i class="fa fa-fw fa-cloud-download"></i> Download & Configure Client</a></li> <li><a ng-click="vm.remove(project)"><i class="fa fa-fw fa-times"></i> Delete</a></li> <li class="divider"></li> <li><a ui-sref="app.organization.manage({ id: project.organization_id })"><i class="fa fa-fw fa-group"></i> View Organization</a></li> </ul> </div> </td> </tr> <tr ng-if="!vm.hasProjects() && vm.includeOrganizationName"> <td class="hidden-xs" colspan="5"> <strong ng-if="vm.loading">Loading...</strong> <strong ng-if="!vm.loading">No projects were found{{vm.hasFilter ? \' with the current filter\': \'\'}}.</strong> </td> <td class="visible-xs" colspan="3"> <strong ng-if="vm.loading">Loading...</strong> <strong ng-if="!vm.loading">No projects were found{{vm.hasFilter ? \' with the current filter\': \'\'}}.</strong> </td> </tr> <tr ng-if="!vm.hasProjects() && !vm.includeOrganizationName"> <td class="hidden-xs" colspan="4"> <strong ng-if="vm.loading">Loading...</strong> <strong ng-if="!vm.loading">No projects were found{{vm.hasFilter ? \' with the current filter\': \'\'}}.</strong> </td> <td class="visible-xs" colspan="2"> <strong ng-if="vm.loading">Loading...</strong> <strong ng-if="!vm.loading">No projects were found{{vm.hasFilter ? \' with the current filter\': \'\'}}.</strong> </td> </tr> </tbody> </table> <div class="table-footer" ng-if="vm.previous || vm.next"> <div class="row"> <div class="col-sm-8 col-xs-8 text-center" ng-if="vm.pageSummary"> <small class="text-muted inline m-t-xs">{{vm.pageSummary}}</small> </div> <div class="col-sm-4 col-xs-4 text-right"> <ul class="pagination pagination-sm m-t-none m-b-none"> <li ng-show="vm.currentOptions.page && vm.currentOptions.page > 2"><a ng-click="vm.get()"><i class="fa fa-fast-backward"></i></a></li> <li ng-class="{\'disabled\': !vm.previous}"><a ng-disabled="!vm.previous" ng-click="!vm.previous || vm.previousPage()"><i class="fa fa-chevron-left"></i></a></li> <li ng-class="{\'disabled\': !vm.next}"><a ng-disabled="!vm.next" ng-click="!vm.next || vm.nextPage()"><i class="fa fa-chevron-right"></i></a></li> </ul> </div> </div> </div> </div> '),$templateCache.put("components/promise-button/promise-button-directive.tpl.html",'<span> <span ng-if="running"> <span class="fa fa-spinner fa-spin" ng-class="promiseButtonBusySpinnerClass"></span> <span ng-if="promiseButtonBusyText">{{promiseButtonBusyText}}</span> <span ng-if="!promiseButtonBusyText" ng-transclude></span> </span> <span ng-if="!running" ng-transclude></span> </span> '),$templateCache.put("components/rate-limit/rate-limit-directive.tpl.html",'<div class="alert alert-danger alert-banner m-b-none" ng-if="vm.rateLimitExceeded()"> <h4>API rate limit exceeded</h4> <p>Your API rate limit has been exceeded. Please try again in 15 minutes.</p> </div> '),$templateCache.put("components/release-notification/release-notification-directive.tpl.html",'<div refresh-on="ReleaseNotification" refresh-action="rvm.processReleaseNotification(data)"> <div class="alert alert-info alert-banner m-b-none" ng-if="!!rvm.releaseNotificationMessage"> <div ng-bind-html="rvm.releaseNotificationMessage"></div> </div> </div> '),$templateCache.put("components/search-filter/search-filter-directive.tpl.html",'<form class="navbar-form navbar-form-search no-shadow" name="vm.searchFilterForm" role="search" refresh-on="filterChanged" refresh-action="vm.updateFilter()"> <div class="form-group"> <div class="input-group"> <input id="search" name="search" type="search" class="form-control" placeholder="Filter" ng-model="vm.filter" ng-model-options="{ debounce: 500 }" ng-change="vm.setSearchFilter(vm.filter)" search-filter-validator uib-tooltip="{{(vm.searchFilterForm.search.$invalid) ? \'An invalid search term was found.\' : \'\'}}" tooltip-class="error-tooltip" tooltip-is-open="vm.searchFilterForm.search.$invalid" tooltip-placement="bottom"> <div class="input-group-btn"> <a class="btn btn-search-help btn-dark" href="https://github.com/exceptionless/Exceptionless/wiki/Filtering-Searching" target="_blank" title="Search Documentation" aria-label="Search Documentation"> <i class="fa fa-fw fa-question-circle"></i> </a> </div> </div> </div> </form> '),$templateCache.put("components/stack-dialog/mark-fixed-dialog.tpl.html",'<form name="vm.markFixedForm" role="form" class="form-validation" autocomplete="on"> <div class="modal-header dialog-header-confirm"> <button type="button" role="button" class="close" ng-click="vm.cancel()">&times;</button> <h4 class="modal-title"> <span class="glyphicon glyphicon-check"></span> Mark Fixed </h4> </div> <div class="modal-body text-muted"> <p>Marks the stack as fixed. This will also prevent error occurrences from being displayed in the dashboard.</p> <p> <b>Optional:</b> Please enter the version in which the stack has been fixed. Any submitted occurrences with a lower version will not cause a regression. <a href="https://github.com/exceptionless/Exceptionless/wiki/Versioning" target="_blank" title="Versioning Documentation" aria-label="Versioning Documentation"> <i class="fa fa-fw fa-question-circle"></i> </a> </p> <div class="form-group"> <input id="version" name="version" type="text" class="form-control input-lg" placeholder="Optional Version (Example: 1.2.3)" ng-model="vm.data.version" semantic-version-validator autofocus> <div class="error" ng-messages="vm.markFixedForm.$error" ng-if="vm.markFixedForm.$submitted || vm.markFixedForm.version.$touched"> <small ng-message="semver">Invalid version. {{vm.markFixedForm.$error |json}}</small> </div> </div> </div> <div class="modal-footer"> <button type="button" role="button" class="btn btn-default" ng-click="vm.cancel()">Cancel</button> <input type="submit" role="button" class="btn btn-primary" ng-click="vm.save(vm.markFixedForm.$valid)" value="MARK FIXED"> </div> </form> '),$templateCache.put("components/stacks/stacks-directive.tpl.html",'<div class="table-responsive" refresh-on="filterChanged" refresh-action="vm.get()"> <table class="table table-striped table-bordered table-selectable table-fixed b-t table-hover table-clickable" refresh-on="StackChanged PlanChanged" refresh-if="vm.canRefresh(data)" refresh-action="vm.get(vm.currentOptions)" refresh-throttle="10000"> <thead> <tr> <th class="selection hidden-xs"> <label class="checks m-b-none"> <input type="checkbox" ng-click="vm.updateSelection()" ng-checked="vm.selectedIds.length> 0" ng-disabled="vm.stacks.length === 0"><i></i> </label> </th> <th>{{::\'Summary\' | translate}}</th> <th class="percentage">{{::\'UserRatio\' | translate}}</th> <th class="number">{{::\'Events\' | translate}}</th> <th class="date hidden-xs">{{::\'First\' | translate}}</th> <th class="date hidden-xs">{{::\'Last\' | translate}}</th> </tr> </thead> <tbody> <tr class="row-clickable" ng-repeat="stack in vm.stacks track by stack.id" ng-if="vm.stacks.length> 0"> <td class="hidden-xs"> <label class="checks m-b-none"><input type="checkbox" checklist-model="vm.selectedIds" checklist-value="stack.id"><i></i></label> </td> <td ng-click="vm.open(stack.id, $event)"> <summary source="stack" show-type="vm.showType"></summary> </td> <td ng-click="vm.open(stack.id, $event)" class="number"> <abbr title="{{stack.users | number:0}} of {{stack.total_users | number:0}} users">{{(stack.total_users > 0 ? stack.users / stack.total_users * 100.0 : 0) | percentage:100}}</abbr> </td> <td ng-click="vm.open(stack.id, $event)" class="number">{{stack.total | number:0}}</td> <td ng-click="vm.open(stack.id, $event)" class="hidden-xs"> <abbr title="{{::stack.first_occurrence | date : \'medium\' }}"> <timeago date="stack.first_occurrence"></timeago> </abbr> </td> <td ng-click="vm.open(stack.id, $event)" class="hidden-xs"><abbr title="{{::stack.last_occurrence | date : \'medium\' }}"> <timeago date="stack.last_occurrence"></timeago> </abbr></td> </tr> <tr ng-if="vm.stacks.length===0 || vm.loading"> <td class="hidden-xs"><label class="checks m-b-none"><input type="checkbox" disabled><i></i></label></td> <td colspan="5" class="hidden-xs"> <strong ng-if="vm.loading">{{::\'Loading...\' | translate}}</strong> <strong ng-if="!vm.loading">{{vm.hasFilter() ? \'No stacks were found with the current filter.\': \'No stacks were found.\' | translate}}</strong> </td> <td colspan="3" class="visible-xs"> <strong ng-if="vm.loading">{{::\'Loading...\' | translate}}</strong> <strong ng-if="!vm.loading">{{vm.hasFilter() ? \'No stacks were found with the current filter.\': \'No stacks were found.\' | translate}}</strong> </td> </tr> </tbody> </table> <div class="table-footer"> <div class="row"> <div class="col-sm-4 hidden-xs"> <div class="dropdown"> <button type="button" role="button" id="bulkActions" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-expanded="false"> {{::\'Bulk Action\' | translate}} <span class="caret"></span> </button> <ul class="dropdown-menu" role="menu" aria-labelledby="bulkActions"> <li role="presentation"><a role="menuitem" tabindex="-1" ng-repeat="action in vm.actions" ng-click="vm.save(action)">{{::action.name | translate}}</a></li> </ul> </div> </div> <div class="col-sm-4 text-center" ng-class="vm.previous || vm.next ? \'col-xs-8\' : \'col-xs-12\' " ng-if="vm.pageSummary"> <small class="text-muted inline m-t-xs">{{vm.pageSummary}}</small> </div> <div class="col-sm-4 col-xs-4 text-right" ng-if="vm.previous || vm.next"> <ul class="pagination pagination-sm m-t-none m-b-none"> <li ng-show="vm.currentOptions.page && vm.currentOptions.page> 2"><a ng-click="vm.get()"><i class="fa fa-fast-backward"></i></a></li> <li ng-class="{\'disabled\': !vm.previous}"><a ng-disabled="!vm.previous" ng-click="!vm.previous || vm.previousPage()"><i class="fa fa-chevron-left"></i></a></li> <li ng-class="{\'disabled\': !vm.next}"><a ng-disabled="!vm.next" ng-click="!vm.next || vm.nextPage()"><i class="fa fa-chevron-right"></i></a></li> </ul> </div> </div> </div> </div>'),$templateCache.put("components/summary/templates/event-error-summary.tpl.html",'<div> <strong ng-if="source.data.Type"> <abbr title="{{::source.data.TypeFullName}}">{{::source.data.Type}}</abbr> <span ng-if="!source.data.Method">:</span> </strong> <span ng-if="source.data.Method"> in <strong> <abbr title="{{::source.data.MethodFullName}}">{{::source.data.Method}}</abbr> </strong> </span> <a ui-sref="app.event({ id: source.id })" truncate lines="2">{{::source.data.Message}}</a> </div> <div class="hidden-xs error-path" ng-if="source.data.Path"><i class="fa fa-caret-right"></i> <span truncate>{{::source.data.Path}}</span> </div> '),$templateCache.put("components/summary/templates/event-feature-summary.tpl.html",'<span ng-if="showType"><strong>Feature</strong>:&nbsp;</span><a ui-sref="app.event({ id: source.id })" truncate lines="2">{{::source.data.Source}}</a> '),$templateCache.put("components/summary/templates/event-log-summary.tpl.html",'<span ng-if="source.data.Level" class="label label-default" ng-class="{ \'label-success\': isLevelSuccess, \'label-info\': isLevelInfo, \'label-warning\': isLevelWarning, \'label-danger\': isLevelError }"> {{::source.data.Level}} </span> <span ng-if="showType"><strong>Log</strong><span ng-if="source.data.Source">&nbsp;in&nbsp;</span></span> <strong ng-if="source.data.Source"> <abbr ng-if="source.data.SourceShortName" title="{{::source.data.Source}}">{{::source.data.SourceShortName}}</abbr> <span ng-if="!source.data.SourceShortName">{{::source.data.Source}}</span> </strong> <span ng-if="showType || source.data.Source">:&nbsp;</span><a ui-sref="app.event({ id: source.id })" truncate lines="2">{{::source.data.Message}}</a> '),$templateCache.put("components/summary/templates/event-notfound-summary.tpl.html",'<span ng-if="showType"><strong>404</strong>:&nbsp;</span><a ui-sref="app.event({ id: source.id })" truncate lines="2">{{::source.data.Source}}</a> '),$templateCache.put("components/summary/templates/event-session-summary.tpl.html",'<span ng-if="showType"> <strong>Session <span ng-if="source.data.Type === \'sessionend\'"> End</span> <span ng-if="source.data.Type === \'heartbeat\'"> Heartbeat</span> </strong>:&nbsp; </span> <a ui-sref="app.event({ id: source.id })" truncate lines="2"> {{::(source.data.Name || source.data.Identity || source.data.SessionId)}} <span ng-if="source.data.Name && source.data.Identity" class="text-muted"> ({{::source.data.Identity}})</span> </a> '),$templateCache.put("components/summary/templates/event-simple-summary.tpl.html",'<div> <strong> <abbr title="{{::source.data.TypeFullName}}">{{::source.data.Type}}</abbr>: </strong> <a ui-sref="app.event({ id: source.id })" truncate lines="2">{{::source.data.Message}}</a> </div> <div class="hidden-xs error-path" ng-if="source.data.Path"><i class="fa fa-caret-right"></i> <span truncate>{{::source.data.Path}}</span> </div> '),$templateCache.put("components/summary/templates/event-summary.tpl.html",'<strong ng-if="showType">{{::source.data.Type}}</strong><span ng-if="showType && source.data.Source">&nbsp;in&nbsp;</span><strong ng-if="source.data.Source">{{::source.data.Source}}</strong><span ng-if="showType || source.data.Source">:&nbsp;</span><a ui-sref="app.event({ id: source.id })" truncate lines="2">{{::source.data.Message}}</a> '),$templateCache.put("components/summary/templates/stack-error-summary.tpl.html",'<div> <strong> <abbr title="{{::source.data.TypeFullName}}">{{::source.data.Type}}</abbr> <span ng-if="!source.data.Method">:</span> </strong> <span ng-if="source.data.Method"> in <strong> <abbr title="{{::source.data.MethodFullName}}">{{::source.data.Method}}</abbr> </strong> </span> <a ui-sref="app.stack({ id: source.id })" truncate lines="2">{{::source.title}}</a> </div> <div class="hidden-xs error-path" ng-if="source.data.Path"><i class="fa fa-caret-right"></i> <span truncate>{{::source.data.Path}}</span> </div> '),$templateCache.put("components/summary/templates/stack-feature-summary.tpl.html",'<span ng-if="showType"><strong>Feature</strong>:&nbsp;</span><a ui-sref="app.stack({ id: source.id })" truncate lines="2">{{::source.title}}</a> '),$templateCache.put("components/summary/templates/stack-log-summary.tpl.html",'<span ng-if="showType"> <strong>Log source</strong>:&nbsp; </span> <a ui-sref="app.stack({ id: source.id })" truncate lines="2"> <abbr ng-if="source.data.Source" title="{{::source.data.Source}}">{{::source.data.SourceShortName}}</abbr> <span ng-if="!source.data.Source">{{::source.title}}</span> </a> '),$templateCache.put("components/summary/templates/stack-notfound-summary.tpl.html",'<span ng-if="showType"><strong>404</strong>:&nbsp;</span><a ui-sref="app.stack({ id: source.id })" truncate lines="2">{{source.title}}</a> '),$templateCache.put("components/summary/templates/stack-session-summary.tpl.html",'<span ng-if="showType"><strong>Session</strong>:&nbsp;</span><a ui-sref="app.stack({ id: source.id })" truncate lines="2">{{source.title}}</a> '),$templateCache.put("components/summary/templates/stack-simple-summary.tpl.html",'<div> <strong> <abbr title="{{::source.data.TypeFullName}}">{{::source.data.Type}}</abbr>: </strong> <a ui-sref="app.stack({ id: source.id })" truncate lines="2">{{::source.title}}</a> </div> <div class="hidden-xs error-path" ng-if="source.data.Path"><i class="fa fa-caret-right"></i> <span truncate>{{::source.data.Path}}</span> </div> '),$templateCache.put("components/summary/templates/stack-summary.tpl.html",'<strong ng-if="showType">{{::source.data.Type}}</strong><span ng-if="showType && source.data.Source">&nbsp;in&nbsp;</span><strong ng-if="source.data.Source">{{::source.data.Source}}</strong><span ng-if="showType || source.data.Source">:&nbsp;</span><a ui-sref="app.stack({ id: source.id })" truncate lines="2">{{::source.title}}</a> '),$templateCache.put("components/system-notification/system-notification-directive.tpl.html",'<div refresh-on="SystemNotification" refresh-action="svm.processSystemNotification(data)"> <div class="alert alert-danger alert-banner m-b-none" ng-if="!!svm.systemNotificationMessage"> <div ng-bind-html="svm.systemNotificationMessage"></div> </div> </div> '),$templateCache.put("components/users/users-directive.tpl.html",'<div class="table-responsive"> <table class="table table-striped table-bordered table-fixed b-t" refresh-on="OrganizationChanged UserChanged" refresh-action="vm.get(vm.currentOptions)" refresh-throttle="10000"> <thead> <tr> <th>Email Address</th> <th class="action">Actions</th> </tr> </thead> <tbody> <tr ng-repeat="user in vm.users"> <td> <span>{{::user.email_address}}</span> <span ng-if="user.has_admin_role" class="label label-info">{{::\'Admin\' | translate}}</span> <span ng-if="user.is_invite" class="label label-default">Invited</span> </td> <td> <div class="btn-group"> <button type="button" class="btn btn-sm btn-primary dropdown-toggle" data-toggle="dropdown"> <i class="fa fa-fw fa-edit"></i> <span class="caret"></span> </button> <ul class="dropdown-menu dropdown-menu-right" role="menu"> <li ng-if="vm.settings.organizationId"><a ng-click="vm.resendNotification(user)"><i class="fa fa-envelope"></i> Resend Invite Email</a></li> <li ng-if="vm.settings.organizationId"><a ng-click="vm.remove(user)"><i class="fa fa-times"></i> {{user.is_invite ? \'Revoke Invite\' : \'Remove User\' }}</a></li> <li ng-if="!user.is_invite && vm.hasAdminRole(appVm.user)"> <a ng-click="vm.updateAdminRole(user)"><i class="fa fa-user"></i> {{vm.hasAdminRole(user)? \'Add Admin Role\' : \'Remove Admin Role\' }}</a> </li> </ul> </div> </td> </tr> <tr ng-if="!vm.hasUsers()"> <td colspan="2"> <strong>No users were found.</strong> </td> </tr> </tbody> </table> <div class="table-footer" ng-if="vm.previous || vm.next"> <div class="row"> <div class="col-sm-8 col-xs-8 text-center" ng-if="vm.pageSummary"> <small class="text-muted inline m-t-xs">{{vm.pageSummary}}</small> </div> <div class="col-sm-4 col-xs-4 text-right"> <ul class="pagination pagination-sm m-t-none m-b-none"> <li ng-show="vm.currentOptions.page && vm.currentOptions.page > 2"><a ng-click="vm.get()"><i class="fa fa-fast-backward"></i></a></li> <li ng-class="{\'disabled\': !vm.previous}"><a ng-disabled="!vm.previous" ng-click="!vm.previous || vm.previousPage()"><i class="fa fa-chevron-left"></i></a></li> <li ng-class="{\'disabled\': !vm.next}"><a ng-disabled="!vm.next" ng-click="!vm.next || vm.nextPage()"><i class="fa fa-chevron-right"></i></a></li> </ul> </div> </div> </div> </div> '),$templateCache.put("components/web-hook/add-web-hook-dialog.tpl.html",'<form name="vm.addWebHookForm" role="form" class="form-validation" autocomplete="on"> <div class="modal-header dialog-header-confirm"> <button type="button" role="button" class="close" ng-click="vm.cancel()">&times;</button> <h4 class="modal-title"><i class="fa fa-flash fa-fw"></i> Create New Web Hook</h4> </div> <div class="modal-body"> <div class="form-group"> <label for="url">URL</label> <input id="url" name="url" type="url" class="form-control input-lg" placeholder="Enter the URL to call" ng-model="vm.data.url" ng-required="true" autofocus> <div class="error" ng-messages="vm.addWebHookForm.url.$error" ng-if="vm.addWebHookForm.$submitted || vm.addWebHookForm.url.$touched"> <small ng-message="required">URL is required.</small> <small ng-message="url">URL is required.</small> </div> </div> <p>Control when the web hook is called by choosing the event types below.</p> <div class="form-group"> <div class="checkbox checkbox-inline" ng-repeat="type in vm.eventTypes"> <label class="checks"> <input name="types" type="checkbox" checklist-model="vm.data.event_types" checklist-value="type.key" ng-required="!vm.hasEventTypeSelection()"> <i></i> <abbr title="{{::type.description}}">{{::type.name}}</abbr> </label> </div> <div class="error" ng-messages="vm.addWebHookForm.types.$error" ng-if="vm.addWebHookForm.$submitted || vm.addWebHookForm.types.$touched"> <small ng-message="required">Please choose one or more event types.</small> </div> </div> </div> <div class="modal-footer"> <button type="button" role="button" class="btn btn-default" ng-click="vm.cancel()">Cancel</button> <input type="submit" role="button" class="btn btn-primary" ng-click="vm.save(vm.addWebHookForm.$valid)" value="Create Web Hook"> </div> </form> ')}]);